import{r as re,j as g,m as ie,A as un}from"./animations-BJOS7rFy.js";import{r as G_,a as q_}from"./vendor-DlBnNAMw.js";import{c as yv}from"./state-ChBe2EGv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Yf={exports:{}},eo={},Kf={exports:{}},$f={};var Fg;function H_(){return Fg||(Fg=1,(function(r){function t(X,oe){var xe=X.length;X.push(oe);e:for(;0<xe;){var Be=xe-1>>>1,P=X[Be];if(0<o(P,oe))X[Be]=oe,X[xe]=P,xe=Be;else break e}}function a(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var oe=X[0],xe=X.pop();if(xe!==oe){X[0]=xe;e:for(var Be=0,P=X.length,V=P>>>1;Be<V;){var ae=2*(Be+1)-1,ue=X[ae],ge=ae+1,Ee=X[ge];if(0>o(ue,xe))ge<P&&0>o(Ee,ue)?(X[Be]=Ee,X[ge]=xe,Be=ge):(X[Be]=ue,X[ae]=xe,Be=ae);else if(ge<P&&0>o(Ee,xe))X[Be]=Ee,X[ge]=xe,Be=ge;else break e}}return oe}function o(X,oe){var xe=X.sortIndex-oe.sortIndex;return xe!==0?xe:X.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],b=[],x=1,T=null,w=3,O=!1,k=!1,F=!1,U=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function se(X){for(var oe=a(b);oe!==null;){if(oe.callback===null)s(b);else if(oe.startTime<=X)s(b),oe.sortIndex=oe.expirationTime,t(p,oe);else break;oe=a(b)}}function ce(X){if(F=!1,se(X),!k)if(a(p)!==null)k=!0,le||(le=!0,B());else{var oe=a(b);oe!==null&&We(ce,oe.startTime-X)}}var le=!1,M=-1,S=5,C=-1;function N(){return U?!0:!(r.unstable_now()-C<S)}function D(){if(U=!1,le){var X=r.unstable_now();C=X;var oe=!0;try{e:{k=!1,F&&(F=!1,W(M),M=-1),O=!0;var xe=w;try{t:{for(se(X),T=a(p);T!==null&&!(T.expirationTime>X&&N());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,w=T.priorityLevel;var P=Be(T.expirationTime<=X);if(X=r.unstable_now(),typeof P=="function"){T.callback=P,se(X),oe=!0;break t}T===a(p)&&s(p),se(X)}else s(p);T=a(p)}if(T!==null)oe=!0;else{var V=a(b);V!==null&&We(ce,V.startTime-X),oe=!1}}break e}finally{T=null,w=xe,O=!1}oe=void 0}}finally{oe?B():le=!1}}}var B;if(typeof $=="function")B=function(){$(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ue=R.port2;R.port1.onmessage=D,B=function(){Ue.postMessage(null)}}else B=function(){j(D,0)};function We(X,oe){M=j(function(){X(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(X){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var xe=w;w=oe;try{return X()}finally{w=xe}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var xe=w;w=X;try{return oe()}finally{w=xe}},r.unstable_scheduleCallback=function(X,oe,xe){var Be=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Be+xe:Be):xe=Be,X){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=xe+P,X={id:x++,callback:oe,priorityLevel:X,startTime:xe,expirationTime:P,sortIndex:-1},xe>Be?(X.sortIndex=xe,t(b,X),a(p)===null&&X===a(b)&&(F?(W(M),M=-1):F=!0,We(ce,xe-Be))):(X.sortIndex=P,t(p,X),k||O||(k=!0,le||(le=!0,B()))),X},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(X){var oe=w;return function(){var xe=w;w=oe;try{return X.apply(this,arguments)}finally{w=xe}}}})($f)),$f}var Qg;function F_(){return Qg||(Qg=1,Kf.exports=H_()),Kf.exports}var Xg;function Q_(){if(Xg)return eo;Xg=1;var r=F_(),t=G_(),a=q_();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function b(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,l=n;;){var h=i.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){i=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===i)return p(h),e;if(d===l)return p(h),n;d=d.sibling}throw Error(s(188))}if(i.return!==l.return)i=h,l=d;else{for(var v=!1,E=h.child;E;){if(E===i){v=!0,i=h,l=d;break}if(E===l){v=!0,l=h,i=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===i){v=!0,i=d,l=h;break}if(E===l){v=!0,l=d,i=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),$=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function B(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case $:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case se:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:Ue(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Ue(e(n))}catch{}}return null}var We=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Be=[],P=-1;function V(e){return{current:e}}function ae(e){0>P||(e.current=Be[P],Be[P]=null,P--)}function ue(e,n){P++,Be[P]=e.current,e.current=n}var ge=V(null),Ee=V(null),be=V(null),fe=V(null);function de(e,n){switch(ue(be,n),ue(Ee,e),ue(ge,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?mg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=mg(n),e=pg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(ge),ue(ge,e)}function Re(){ae(ge),ae(Ee),ae(be)}function ye(e){e.memoizedState!==null&&ue(fe,e);var n=ge.current,i=pg(n,e.type);n!==i&&(ue(Ee,e),ue(ge,i))}function Ce(e){Ee.current===e&&(ae(ge),ae(Ee)),fe.current===e&&(ae(fe),$l._currentValue=xe)}var Oe,Ve;function Ae(e){if(Oe===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Oe=n&&n[1]||"",Ve=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+e+Ve}var nt=!1;function St(e,n){if(!e||nt)return"";nt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Q=K}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(K){Q=K}e.call(ee.prototype)}}else{try{throw Error()}catch(K){Q=K}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var I=v.split(`
`),H=E.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===H.length)for(l=I.length-1,h=H.length-1;1<=l&&0<=h&&I[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==H[h]){var Z=`
`+I[l].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=l&&0<=h);break}}}finally{nt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ae(i):""}function vt(e,n){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==n&&n!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return St(e.type,!1);case 11:return St(e.type.render,!1);case 1:return St(e.type,!0);case 31:return Ae("Activity");default:return""}}function Mt(e){try{var n="",i=null;do n+=vt(e,i),i=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var at=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,hn=r.unstable_cancelCallback,as=r.unstable_shouldYield,ci=r.unstable_requestPaint,It=r.unstable_now,Dn=r.unstable_getCurrentPriorityLevel,ca=r.unstable_ImmediatePriority,it=r.unstable_UserBlockingPriority,ua=r.unstable_NormalPriority,Hs=r.unstable_LowPriority,is=r.unstable_IdlePriority,ui=r.log,Fs=r.unstable_setDisableYieldValue,Tn=null,$t=null;function On(e){if(typeof ui=="function"&&Fs(e),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Tn,e)}catch{}}var wt=Math.clz32?Math.clz32:Ro,No=Math.log,Qs=Math.LN2;function Ro(e){return e>>>=0,e===0?32:31-(No(e)/Qs|0)|0}var ha=256,ss=262144,Dt=4194304;function fa(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function da(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=fa(l):(v&=E,v!==0?h=fa(v):i||(i=E&~e,i!==0&&(h=fa(i))))):(E=l&~d,E!==0?h=fa(E):v!==0?h=fa(v):i||(i=l&~e,i!==0&&(h=fa(i)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,i=n&-n,d>=i||d===32&&(i&4194048)!==0)?n:h}function Kn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Zu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mo(){var e=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),e}function ma(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function rs(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ju(e,n,i,l,h,d){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var E=e.entanglements,I=e.expirationTimes,H=e.hiddenUpdates;for(i=v&~i;0<i;){var Z=31-wt(i),ee=1<<Z;E[Z]=0,I[Z]=-1;var Q=H[Z];if(Q!==null)for(H[Z]=null,Z=0;Z<Q.length;Z++){var K=Q[Z];K!==null&&(K.lane&=-536870913)}i&=~ee}l!==0&&ls(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~n))}function ls(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-wt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function tl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-wt(i),h=1<<l;h&n|e[l]&n&&(e[l]|=n),i&=~h}}function nl(e,n){var i=n&-n;return i=(i&42)!==0?1:os(i),(i&(e.suspendedLanes|n))!==0?0:i}function os(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ua(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Io(){var e=oe.p;return e!==0?e:(e=window.event,e===void 0?32:Bg(e.type))}function $n(e,n){var i=oe.p;try{return oe.p=e,n()}finally{oe.p=i}}var Zn=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Zn,Ft="__reactProps$"+Zn,pa="__reactContainer$"+Zn,Xs="__reactEvents$"+Zn,Wu="__reactListeners$"+Zn,Do="__reactHandles$"+Zn,Oo="__reactResources$"+Zn,ga="__reactMarker$"+Zn;function Ys(e){delete e[Ot],delete e[Ft],delete e[Xs],delete e[Wu],delete e[Do]}function ya(e){var n=e[Ot];if(n)return n;for(var i=e.parentNode;i;){if(n=i[pa]||i[Ot]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Tg(e);e!==null;){if(i=e[Ot])return i;e=Tg(e)}return n}e=i,i=e.parentNode}return null}function Vn(e){if(e=e[Ot]||e[pa]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function En(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function va(e){var n=e[Oo];return n||(n=e[Oo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(e){e[ga]=!0}var al=new Set,il={};function ba(e,n){_a(e,n),_a(e+"Capture",n)}function _a(e,n){for(il[e]=n,e=0;e<n.length;e++)al.add(n[e])}var sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},ll={};function Vo(e){return at.call(ll,e)?!0:at.call(rl,e)?!1:sl.test(e)?ll[e]=!0:(rl[e]=!0,!1)}function Ks(e,n,i){if(Vo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Sn(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function jt(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ol(e,n,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){i=""+v,d.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function rt(e){if(!e._valueTracker){var n=hi(e)?"checked":"value";e._valueTracker=ol(e,n,""+e[n])}}function cs(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=hi(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var us=/[\n"\\]/g;function mn(e){return e.replace(us,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function $s(e,n,i,l,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?cl(e,v,Qt(n)):i!=null?cl(e,v,Qt(i)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Qt(E):e.removeAttribute("name")}function jo(e,n,i,l,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){rt(e);return}i=i!=null?""+Qt(i):"",n=n!=null?""+Qt(n):i,E||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),rt(e)}function cl(e,n,i){n==="number"&&xa(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function fi(e,n,i,l){if(e=e.options,n){n={};for(var h=0;h<i.length;h++)n["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=n.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Qt(i),n=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function ko(e,n,i){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Qt(i):""}function di(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(s(92));if(We(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Qt(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),rt(e)}function pn(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Lo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||Lo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function hl(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&i[h]!==l&&ul(e,h,l)}else for(var d in n)n.hasOwnProperty(d)&&ul(e,d,n[d])}function Zs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(e){return mi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jn(){}var fl=null;function jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Ta=null;function hs(e){var n=Vn(e);if(n&&(e=n.stateNode)){var i=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if($s(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var h=l[Ft]||null;if(!h)throw Error(s(90));$s(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&cs(l)}break e;case"textarea":ko(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&fi(e,!!i.multiple,n,!1)}}}var Ws=!1;function gi(e,n,i){if(Ws)return e(n,i);Ws=!0;try{var l=e(n);return l}finally{if(Ws=!1,(pi!==null||Ta!==null)&&(Ic(),pi&&(n=pi,e=Ta,Ta=pi=null,hs(n),e)))for(n=0;n<e.length;n++)hs(e[n])}}function Wn(e,n){var i=e.stateNode;if(i===null)return null;var l=i[Ft]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=!1;if(kn)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){fs=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{fs=!1}var Ea=null,dl=null,ds=null;function ml(){if(ds)return ds;var e,n=dl,i=n.length,l,h="value"in Ea?Ea.value:Ea.textContent,d=h.length;for(e=0;e<i&&n[e]===h[e];e++);var v=i-e;for(l=1;l<=v&&n[i-l]===h[d-l];l++);return ds=h.slice(e,1<l?1-l:void 0)}function ms(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function za(){return!0}function ea(){return!1}function Zt(e){function n(i,l,h,d,v){this._reactName=i,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?za:ea,this.isPropagationStopped=ea,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),n}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Zt(Pa),yi=T({},Pa,{view:0,detail:0}),pl=Zt(yi),vi,er,wa,tr=T({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(vi=e.screenX-wa.screenX,er=e.screenY-wa.screenY):er=vi=0,wa=e),vi)},movementY:function(e){return"movementY"in e?e.movementY:er}}),gl=Zt(tr),ps=T({},tr,{dataTransfer:0}),Uo=Zt(ps),zo=T({},yi,{relatedTarget:0}),gs=Zt(zo),yl=T({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Po=Zt(yl),nr=T({},Pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Go=Zt(nr),qo=T({},Pa,{data:0}),Aa=Zt(qo),Ho={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Qo[e])?!!n[e]:!1}function bi(){return Xo}var fn=T({},yi,{key:function(e){if(e.key){var n=Ho[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bi,charCode:function(e){return e.type==="keypress"?ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yo=Zt(fn),Ko=T({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Zt(Ko),u=T({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bi}),y=Zt(u),_=T({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Zt(_),G=T({},tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Zt(G),he=T({},Pa,{newState:0,oldState:0}),je=Zt(he),At=[9,13,27,32],et=kn&&"CompositionEvent"in window,bt=null;kn&&"documentMode"in document&&(bt=document.documentMode);var Ln=kn&&"TextEvent"in window&&!bt,Ca=kn&&(!et||bt&&8<bt&&11>=bt),ta=" ",na=!1;function ys(e,n){switch(e){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ar(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ir=!1;function fb(e,n){switch(e){case"compositionend":return ar(n);case"keypress":return n.which!==32?null:(na=!0,ta);case"textInput":return e=n.data,e===ta&&na?null:e;default:return null}}function db(e,n){if(ir)return e==="compositionend"||!et&&ys(e,n)?(e=ml(),ds=dl=Ea=null,ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ca&&n.locale!=="ko"?null:n.data;default:return null}}var mb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!mb[e.type]:n==="textarea"}function Am(e,n,i,l){pi?Ta?Ta.push(l):Ta=[l]:pi=l,n=Bc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var vl=null,bl=null;function pb(e){og(e,0)}function $o(e){var n=En(e);if(cs(n))return e}function Cm(e,n){if(e==="change")return n}var Nm=!1;if(kn){var eh;if(kn){var th="oninput"in document;if(!th){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),th=typeof Rm.oninput=="function"}eh=th}else eh=!1;Nm=eh&&(!document.documentMode||9<document.documentMode)}function Mm(){vl&&(vl.detachEvent("onpropertychange",Im),bl=vl=null)}function Im(e){if(e.propertyName==="value"&&$o(bl)){var n=[];Am(n,bl,e,jn(e)),gi(pb,n)}}function gb(e,n,i){e==="focusin"?(Mm(),vl=n,bl=i,vl.attachEvent("onpropertychange",Im)):e==="focusout"&&Mm()}function yb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(bl)}function vb(e,n){if(e==="click")return $o(n)}function bb(e,n){if(e==="input"||e==="change")return $o(n)}function _b(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var wn=typeof Object.is=="function"?Object.is:_b;function _l(e,n){if(wn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var h=i[l];if(!at.call(n,h)||!wn(e[h],n[h]))return!1}return!0}function Dm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Om(e,n){var i=Dm(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Dm(i)}}function Vm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Vm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function jm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xa(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=xa(e.document)}return n}function nh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var xb=kn&&"documentMode"in document&&11>=document.documentMode,sr=null,ah=null,xl=null,ih=!1;function km(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ih||sr==null||sr!==xa(l)||(l=sr,"selectionStart"in l&&nh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),xl&&_l(xl,l)||(xl=l,l=Bc(ah,"onSelect"),0<l.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=sr)))}function vs(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var rr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},sh={},Lm={};kn&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function bs(e){if(sh[e])return sh[e];if(!rr[e])return e;var n=rr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Lm)return sh[e]=n[i];return e}var Bm=bs("animationend"),Um=bs("animationiteration"),zm=bs("animationstart"),Tb=bs("transitionrun"),Eb=bs("transitionstart"),Sb=bs("transitioncancel"),Pm=bs("transitionend"),Gm=new Map,rh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rh.push("scrollEnd");function aa(e,n){Gm.set(e,n),ba(n,[e])}var Zo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bn=[],lr=0,lh=0;function Jo(){for(var e=lr,n=lh=lr=0;n<e;){var i=Bn[n];Bn[n++]=null;var l=Bn[n];Bn[n++]=null;var h=Bn[n];Bn[n++]=null;var d=Bn[n];if(Bn[n++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&qm(i,h,d)}}function Wo(e,n,i,l){Bn[lr++]=e,Bn[lr++]=n,Bn[lr++]=i,Bn[lr++]=l,lh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function oh(e,n,i,l){return Wo(e,n,i,l),ec(e)}function _s(e,n){return Wo(e,null,null,n),ec(e)}function qm(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var h=!1,d=e.return;d!==null;)d.childLanes|=i,l=d.alternate,l!==null&&(l.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-wt(i),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=i|536870912),d):null}function ec(e){if(50<ql)throw ql=0,vf=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var or={};function wb(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,i,l){return new wb(e,n,i,l)}function ch(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qa(e,n){var i=e.alternate;return i===null?(i=An(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Hm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function tc(e,n,i,l,h,d){var v=0;if(l=e,typeof e=="function")ch(e)&&(v=1);else if(typeof e=="string")v=M_(e,i,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=An(31,i,n,h),e.elementType=C,e.lanes=d,e;case F:return xs(i.children,h,d,n);case U:v=8,h|=24;break;case j:return e=An(12,i,n,h|2),e.elementType=j,e.lanes=d,e;case ce:return e=An(13,i,n,h),e.elementType=ce,e.lanes=d,e;case le:return e=An(19,i,n,h),e.elementType=le,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:v=10;break e;case W:v=9;break e;case se:v=11;break e;case M:v=14;break e;case S:v=16,l=null;break e}v=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=An(v,i,n,h),n.elementType=e,n.type=l,n.lanes=d,n}function xs(e,n,i,l){return e=An(7,e,l,n),e.lanes=i,e}function uh(e,n,i){return e=An(6,e,null,n),e.lanes=i,e}function Fm(e){var n=An(18,null,null,0);return n.stateNode=e,n}function hh(e,n,i){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Qm=new WeakMap;function Un(e,n){if(typeof e=="object"&&e!==null){var i=Qm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Mt(n)},Qm.set(e,n),n)}return{value:e,source:n,stack:Mt(n)}}var cr=[],ur=0,nc=null,Tl=0,zn=[],Pn=0,_i=null,Na=1,Ra="";function Ha(e,n){cr[ur++]=Tl,cr[ur++]=nc,nc=e,Tl=n}function Xm(e,n,i){zn[Pn++]=Na,zn[Pn++]=Ra,zn[Pn++]=_i,_i=e;var l=Na;e=Ra;var h=32-wt(l)-1;l&=~(1<<h),i+=1;var d=32-wt(n)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Na=1<<32-wt(n)+h|i<<h|l,Ra=d+e}else Na=1<<d|i<<h|l,Ra=e}function fh(e){e.return!==null&&(Ha(e,1),Xm(e,1,0))}function dh(e){for(;e===nc;)nc=cr[--ur],cr[ur]=null,Tl=cr[--ur],cr[ur]=null;for(;e===_i;)_i=zn[--Pn],zn[Pn]=null,Ra=zn[--Pn],zn[Pn]=null,Na=zn[--Pn],zn[Pn]=null}function Ym(e,n){zn[Pn++]=Na,zn[Pn++]=Ra,zn[Pn++]=_i,Na=n.id,Ra=n.overflow,_i=e}var Jt=null,gt=null,Qe=!1,xi=null,Gn=!1,mh=Error(s(519));function Ti(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(Un(n,e)),mh}function Km(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[Ot]=e,n[Ft]=l,i){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(i=0;i<Fl.length;i++)Pe(Fl[i],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":Pe("invalid",n),jo(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",n);break;case"textarea":Pe("invalid",n),di(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||fg(n.textContent,i)?(l.popover!=null&&(Pe("beforetoggle",n),Pe("toggle",n)),l.onScroll!=null&&Pe("scroll",n),l.onScrollEnd!=null&&Pe("scrollend",n),l.onClick!=null&&(n.onclick=Jn),n=!0):n=!1,n||Ti(e,!0)}function $m(e){for(Jt=e.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Jt=Jt.return}}function hr(e){if(e!==Jt)return!1;if(!Qe)return $m(e),Qe=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Of(e.type,e.memoizedProps)),i=!i),i&&gt&&Ti(e),$m(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=xg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=xg(e)}else n===27?(n=gt,ki(e.type)?(e=Bf,Bf=null,gt=e):gt=n):gt=Jt?Hn(e.stateNode.nextSibling):null;return!0}function Ts(){gt=Jt=null,Qe=!1}function ph(){var e=xi;return e!==null&&(bn===null?bn=e:bn.push.apply(bn,e),xi=null),e}function El(e){xi===null?xi=[e]:xi.push(e)}var gh=V(null),Es=null,Fa=null;function Ei(e,n,i){ue(gh,n._currentValue),n._currentValue=i}function Qa(e){e._currentValue=gh.current,ae(gh)}function yh(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function vh(e,n,i,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var I=0;I<n.length;I++)if(E.context===n[I]){d.lanes|=i,E=d.alternate,E!==null&&(E.lanes|=i),yh(d.return,i,e),l||(v=null);break e}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=i,d=v.alternate,d!==null&&(d.lanes|=i),yh(v,i,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function fr(e,n,i,l){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;wn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===fe.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push($l):e=[$l])}h=h.return}e!==null&&vh(n,e,i,l),n.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ss(e){Es=e,Fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Zm(Es,e)}function ic(e,n){return Es===null&&Ss(e),Zm(e,n)}function Zm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Fa===null){if(e===null)throw Error(s(308));Fa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Fa=Fa.next=n;return i}var Ab=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Cb=r.unstable_scheduleCallback,Nb=r.unstable_NormalPriority,kt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bh(){return{controller:new Ab,data:new Map,refCount:0}}function Sl(e){e.refCount--,e.refCount===0&&Cb(Nb,function(){e.controller.abort()})}var wl=null,_h=0,dr=0,mr=null;function Rb(e,n){if(wl===null){var i=wl=[];_h=0,dr=Sf(),mr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return _h++,n.then(Jm,Jm),n}function Jm(){if(--_h===0&&wl!==null){mr!==null&&(mr.status="fulfilled");var e=wl;wl=null,dr=0,mr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Mb(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<i.length;h++)(0,i[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),l}var Wm=X.S;X.S=function(e,n){kp=It(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Rb(e,n),Wm!==null&&Wm(e,n)};var ws=V(null);function xh(){var e=ws.current;return e!==null?e:mt.pooledCache}function sc(e,n){n===null?ue(ws,ws.current):ue(ws,n.pool)}function e0(){var e=xh();return e===null?null:{parent:kt._currentValue,pool:e}}var pr=Error(s(460)),Th=Error(s(474)),rc=Error(s(542)),lc={then:function(){}};function t0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function n0(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Jn,Jn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,i0(e),e;default:if(typeof n.status=="string")n.then(Jn,Jn);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,i0(e),e}throw Cs=n,pr}}function As(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Cs=i,pr):i}}var Cs=null;function a0(){if(Cs===null)throw Error(s(459));var e=Cs;return Cs=null,e}function i0(e){if(e===pr||e===rc)throw Error(s(483))}var gr=null,Al=0;function oc(e){var n=Al;return Al+=1,gr===null&&(gr=[]),n0(gr,e,n)}function Cl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function cc(e,n){throw n.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function s0(e){function n(z,L){if(e){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function i(z,L){if(!e)return null;for(;L!==null;)n(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function h(z,L){return z=qa(z,L),z.index=0,z.sibling=null,z}function d(z,L,q){return z.index=q,e?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=67108866,L):q):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function v(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function E(z,L,q,J){return L===null||L.tag!==6?(L=uh(q,z.mode,J),L.return=z,L):(L=h(L,q),L.return=z,L)}function I(z,L,q,J){var Se=q.type;return Se===F?Z(z,L,q.props.children,J,q.key):L!==null&&(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&As(Se)===L.type)?(L=h(L,q.props),Cl(L,q),L.return=z,L):(L=tc(q.type,q.key,q.props,null,z.mode,J),Cl(L,q),L.return=z,L)}function H(z,L,q,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=hh(q,z.mode,J),L.return=z,L):(L=h(L,q.children||[]),L.return=z,L)}function Z(z,L,q,J,Se){return L===null||L.tag!==7?(L=xs(q,z.mode,J,Se),L.return=z,L):(L=h(L,q),L.return=z,L)}function ee(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=uh(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case O:return q=tc(L.type,L.key,L.props,null,z.mode,q),Cl(q,L),q.return=z,q;case k:return L=hh(L,z.mode,q),L.return=z,L;case S:return L=As(L),ee(z,L,q)}if(We(L)||B(L))return L=xs(L,z.mode,q,null),L.return=z,L;if(typeof L.then=="function")return ee(z,oc(L),q);if(L.$$typeof===$)return ee(z,ic(z,L),q);cc(z,L)}return null}function Q(z,L,q,J){var Se=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Se!==null?null:E(z,L,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case O:return q.key===Se?I(z,L,q,J):null;case k:return q.key===Se?H(z,L,q,J):null;case S:return q=As(q),Q(z,L,q,J)}if(We(q)||B(q))return Se!==null?null:Z(z,L,q,J,null);if(typeof q.then=="function")return Q(z,L,oc(q),J);if(q.$$typeof===$)return Q(z,L,ic(z,q),J);cc(z,q)}return null}function K(z,L,q,J,Se){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(q)||null,E(L,z,""+J,Se);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return z=z.get(J.key===null?q:J.key)||null,I(L,z,J,Se);case k:return z=z.get(J.key===null?q:J.key)||null,H(L,z,J,Se);case S:return J=As(J),K(z,L,q,J,Se)}if(We(J)||B(J))return z=z.get(q)||null,Z(L,z,J,Se,null);if(typeof J.then=="function")return K(z,L,q,oc(J),Se);if(J.$$typeof===$)return K(z,L,q,ic(L,J),Se);cc(L,J)}return null}function _e(z,L,q,J){for(var Se=null,Ze=null,Te=L,Le=L=0,qe=null;Te!==null&&Le<q.length;Le++){Te.index>Le?(qe=Te,Te=null):qe=Te.sibling;var Je=Q(z,Te,q[Le],J);if(Je===null){Te===null&&(Te=qe);break}e&&Te&&Je.alternate===null&&n(z,Te),L=d(Je,L,Le),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je,Te=qe}if(Le===q.length)return i(z,Te),Qe&&Ha(z,Le),Se;if(Te===null){for(;Le<q.length;Le++)Te=ee(z,q[Le],J),Te!==null&&(L=d(Te,L,Le),Ze===null?Se=Te:Ze.sibling=Te,Ze=Te);return Qe&&Ha(z,Le),Se}for(Te=l(Te);Le<q.length;Le++)qe=K(Te,z,Le,q[Le],J),qe!==null&&(e&&qe.alternate!==null&&Te.delete(qe.key===null?Le:qe.key),L=d(qe,L,Le),Ze===null?Se=qe:Ze.sibling=qe,Ze=qe);return e&&Te.forEach(function(Pi){return n(z,Pi)}),Qe&&Ha(z,Le),Se}function Ne(z,L,q,J){if(q==null)throw Error(s(151));for(var Se=null,Ze=null,Te=L,Le=L=0,qe=null,Je=q.next();Te!==null&&!Je.done;Le++,Je=q.next()){Te.index>Le?(qe=Te,Te=null):qe=Te.sibling;var Pi=Q(z,Te,Je.value,J);if(Pi===null){Te===null&&(Te=qe);break}e&&Te&&Pi.alternate===null&&n(z,Te),L=d(Pi,L,Le),Ze===null?Se=Pi:Ze.sibling=Pi,Ze=Pi,Te=qe}if(Je.done)return i(z,Te),Qe&&Ha(z,Le),Se;if(Te===null){for(;!Je.done;Le++,Je=q.next())Je=ee(z,Je.value,J),Je!==null&&(L=d(Je,L,Le),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je);return Qe&&Ha(z,Le),Se}for(Te=l(Te);!Je.done;Le++,Je=q.next())Je=K(Te,z,Le,Je.value,J),Je!==null&&(e&&Je.alternate!==null&&Te.delete(Je.key===null?Le:Je.key),L=d(Je,L,Le),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je);return e&&Te.forEach(function(P_){return n(z,P_)}),Qe&&Ha(z,Le),Se}function ft(z,L,q,J){if(typeof q=="object"&&q!==null&&q.type===F&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case O:e:{for(var Se=q.key;L!==null;){if(L.key===Se){if(Se=q.type,Se===F){if(L.tag===7){i(z,L.sibling),J=h(L,q.props.children),J.return=z,z=J;break e}}else if(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&As(Se)===L.type){i(z,L.sibling),J=h(L,q.props),Cl(J,q),J.return=z,z=J;break e}i(z,L);break}else n(z,L);L=L.sibling}q.type===F?(J=xs(q.props.children,z.mode,J,q.key),J.return=z,z=J):(J=tc(q.type,q.key,q.props,null,z.mode,J),Cl(J,q),J.return=z,z=J)}return v(z);case k:e:{for(Se=q.key;L!==null;){if(L.key===Se)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){i(z,L.sibling),J=h(L,q.children||[]),J.return=z,z=J;break e}else{i(z,L);break}else n(z,L);L=L.sibling}J=hh(q,z.mode,J),J.return=z,z=J}return v(z);case S:return q=As(q),ft(z,L,q,J)}if(We(q))return _e(z,L,q,J);if(B(q)){if(Se=B(q),typeof Se!="function")throw Error(s(150));return q=Se.call(q),Ne(z,L,q,J)}if(typeof q.then=="function")return ft(z,L,oc(q),J);if(q.$$typeof===$)return ft(z,L,ic(z,q),J);cc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(i(z,L.sibling),J=h(L,q),J.return=z,z=J):(i(z,L),J=uh(q,z.mode,J),J.return=z,z=J),v(z)):i(z,L)}return function(z,L,q,J){try{Al=0;var Se=ft(z,L,q,J);return gr=null,Se}catch(Te){if(Te===pr||Te===rc)throw Te;var Ze=An(29,Te,null,z.mode);return Ze.lanes=J,Ze.return=z,Ze}finally{}}}var Ns=s0(!0),r0=s0(!1),Si=!1;function Eh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=ec(e),qm(e,null,i),n}return Wo(e,l,n,i),ec(e)}function Nl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,tl(e,i)}}function wh(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var h=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,i=i.next}while(i!==null);d===null?h=d=n:d=d.next=n}else h=d=n;i={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Ah=!1;function Rl(){if(Ah){var e=mr;if(e!==null)throw e}}function Ml(e,n,i,l){Ah=!1;var h=e.updateQueue;Si=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var I=E,H=I.next;I.next=null,v===null?d=H:v.next=H,v=I;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==v&&(E===null?Z.firstBaseUpdate=H:E.next=H,Z.lastBaseUpdate=I))}if(d!==null){var ee=h.baseState;v=0,Z=H=I=null,E=d;do{var Q=E.lane&-536870913,K=Q!==E.lane;if(K?(Ge&Q)===Q:(l&Q)===Q){Q!==0&&Q===dr&&(Ah=!0),Z!==null&&(Z=Z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var _e=e,Ne=E;Q=n;var ft=i;switch(Ne.tag){case 1:if(_e=Ne.payload,typeof _e=="function"){ee=_e.call(ft,ee,Q);break e}ee=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ne.payload,Q=typeof _e=="function"?_e.call(ft,ee,Q):_e,Q==null)break e;ee=T({},ee,Q);break e;case 2:Si=!0}}Q=E.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?(H=Z=K,I=ee):Z=Z.next=K,v|=Q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;K=E,E=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);Z===null&&(I=ee),h.baseState=I,h.firstBaseUpdate=H,h.lastBaseUpdate=Z,d===null&&(h.shared.lanes=0),Ii|=v,e.lanes=v,e.memoizedState=ee}}function l0(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function o0(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)l0(i[e],n)}var yr=V(null),uc=V(0);function c0(e,n){e=ti,ue(uc,e),ue(yr,n),ti=e|n.baseLanes}function Ch(){ue(uc,ti),ue(yr,yr.current)}function Nh(){ti=uc.current,ae(yr),ae(uc)}var Cn=V(null),qn=null;function Ci(e){var n=e.alternate;ue(Ct,Ct.current&1),ue(Cn,e),qn===null&&(n===null||yr.current!==null||n.memoizedState!==null)&&(qn=e)}function Rh(e){ue(Ct,Ct.current),ue(Cn,e),qn===null&&(qn=e)}function u0(e){e.tag===22?(ue(Ct,Ct.current),ue(Cn,e),qn===null&&(qn=e)):Ni()}function Ni(){ue(Ct,Ct.current),ue(Cn,Cn.current)}function Nn(e){ae(Cn),qn===e&&(qn=null),ae(Ct)}var Ct=V(0);function hc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||kf(i)||Lf(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xa=0,ke=null,ut=null,Lt=null,fc=!1,vr=!1,Rs=!1,dc=0,Il=0,br=null,Ib=0;function Tt(){throw Error(s(321))}function Mh(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!wn(e[i],n[i]))return!1;return!0}function Ih(e,n,i,l,h,d){return Xa=d,ke=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=e===null||e.memoizedState===null?X0:Qh,Rs=!1,d=i(l,h),Rs=!1,vr&&(d=f0(n,i,l,h)),h0(e),d}function h0(e){X.H=Vl;var n=ut!==null&&ut.next!==null;if(Xa=0,Lt=ut=ke=null,fc=!1,Il=0,br=null,n)throw Error(s(300));e===null||Bt||(e=e.dependencies,e!==null&&ac(e)&&(Bt=!0))}function f0(e,n,i,l){ke=e;var h=0;do{if(vr&&(br=null),Il=0,vr=!1,25<=h)throw Error(s(301));if(h+=1,Lt=ut=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=Y0,d=n(i,l)}while(vr);return d}function Db(){var e=X.H,n=e.useState()[0];return n=typeof n.then=="function"?Dl(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(ke.flags|=1024),n}function Dh(){var e=dc!==0;return dc=0,e}function Oh(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Vh(e){if(fc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}fc=!1}Xa=0,Lt=ut=ke=null,vr=!1,Il=dc=0,br=null}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ke.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Nt(){if(ut===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=Lt===null?ke.memoizedState:Lt.next;if(n!==null)Lt=n,ut=e;else{if(e===null)throw ke.alternate===null?Error(s(467)):Error(s(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Lt===null?ke.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(e){var n=Il;return Il+=1,br===null&&(br=[]),e=n0(br,e,n),n=ke,(Lt===null?n.memoizedState:Lt.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?X0:Qh),e}function pc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Dl(e);if(e.$$typeof===$)return Wt(e)}throw Error(s(438,String(e)))}function jh(e){var n=null,i=ke.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=mc(),ke.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=N;return n.index++,i}function Ya(e,n){return typeof n=="function"?n(e):n}function gc(e){var n=Nt();return kh(n,ut,e)}function kh(e,n,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}n.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var E=v=null,I=null,H=n,Z=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(Ge&ee)===ee:(Xa&ee)===ee){var Q=H.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===dr&&(Z=!0);else if((Xa&Q)===Q){H=H.next,Q===dr&&(Z=!0);continue}else ee={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(E=I=ee,v=d):I=I.next=ee,ke.lanes|=Q,Ii|=Q;ee=H.action,Rs&&i(d,ee),d=H.hasEagerState?H.eagerState:i(d,ee)}else Q={lane:ee,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(E=I=Q,v=d):I=I.next=Q,ke.lanes|=ee,Ii|=ee;H=H.next}while(H!==null&&H!==n);if(I===null?v=d:I.next=E,!wn(d,e.memoizedState)&&(Bt=!0,Z&&(i=mr,i!==null)))throw i;e.memoizedState=d,e.baseState=v,e.baseQueue=I,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Lh(e){var n=Nt(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,h=i.pending,d=n.memoizedState;if(h!==null){i.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);wn(d,n.memoizedState)||(Bt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),i.lastRenderedState=d}return[d,l]}function d0(e,n,i){var l=ke,h=Nt(),d=Qe;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=n();var v=!wn((ut||h).memoizedState,i);if(v&&(h.memoizedState=i,Bt=!0),h=h.queue,zh(g0.bind(null,l,h,e),[e]),h.getSnapshot!==n||v||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,_r(9,{destroy:void 0},p0.bind(null,l,h,i,n),null),mt===null)throw Error(s(349));d||(Xa&127)!==0||m0(l,n,i)}return i}function m0(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=ke.updateQueue,n===null?(n=mc(),ke.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function p0(e,n,i,l){n.value=i,n.getSnapshot=l,y0(n)&&v0(e)}function g0(e,n,i){return i(function(){y0(n)&&v0(e)})}function y0(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!wn(e,i)}catch{return!0}}function v0(e){var n=_s(e,2);n!==null&&_n(n,e,2)}function Bh(e){var n=dn();if(typeof e=="function"){var i=e;if(e=i(),Rs){On(!0);try{i()}finally{On(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},n}function b0(e,n,i,l){return e.baseState=i,kh(e,ut,typeof l=="function"?l:Ya)}function Ob(e,n,i,l,h){if(bc(e))throw Error(s(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};X.T!==null?i(!0):d.isTransition=!1,l(d),i=n.pending,i===null?(d.next=n.pending=d,_0(n,d)):(d.next=i.next,n.pending=i.next=d)}}function _0(e,n){var i=n.action,l=n.payload,h=e.state;if(n.isTransition){var d=X.T,v={};X.T=v;try{var E=i(h,l),I=X.S;I!==null&&I(v,E),x0(e,n,E)}catch(H){Uh(e,n,H)}finally{d!==null&&v.types!==null&&(d.types=v.types),X.T=d}}else try{d=i(h,l),x0(e,n,d)}catch(H){Uh(e,n,H)}}function x0(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){T0(e,n,l)},function(l){return Uh(e,n,l)}):T0(e,n,i)}function T0(e,n,i){n.status="fulfilled",n.value=i,E0(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,_0(e,i)))}function Uh(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,E0(n),n=n.next;while(n!==l)}e.action=null}function E0(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function S0(e,n){return n}function w0(e,n){if(Qe){var i=mt.formState;if(i!==null){e:{var l=ke;if(Qe){if(gt){t:{for(var h=gt,d=Gn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Hn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){gt=Hn(h.nextSibling),l=h.data==="F!";break e}}Ti(l)}l=!1}l&&(n=i[0])}}return i=dn(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S0,lastRenderedState:n},i.queue=l,i=H0.bind(null,ke,l),l.dispatch=i,l=Bh(!1),d=Fh.bind(null,ke,!1,l.queue),l=dn(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,i=Ob.bind(null,ke,h,d,i),h.dispatch=i,l.memoizedState=e,[n,i,!1]}function A0(e){var n=Nt();return C0(n,ut,e)}function C0(e,n,i){if(n=kh(e,n,S0)[0],e=gc(Ya)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Dl(n)}catch(v){throw v===pr?rc:v}else l=n;n=Nt();var h=n.queue,d=h.dispatch;return i!==n.memoizedState&&(ke.flags|=2048,_r(9,{destroy:void 0},Vb.bind(null,h,i),null)),[l,d,e]}function Vb(e,n){e.action=n}function N0(e){var n=Nt(),i=ut;if(i!==null)return C0(n,i,e);Nt(),n=n.memoizedState,i=Nt();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function _r(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=ke.updateQueue,n===null&&(n=mc(),ke.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function R0(){return Nt().memoizedState}function yc(e,n,i,l){var h=dn();ke.flags|=e,h.memoizedState=_r(1|n,{destroy:void 0},i,l===void 0?null:l)}function vc(e,n,i,l){var h=Nt();l=l===void 0?null:l;var d=h.memoizedState.inst;ut!==null&&l!==null&&Mh(l,ut.memoizedState.deps)?h.memoizedState=_r(n,d,i,l):(ke.flags|=e,h.memoizedState=_r(1|n,d,i,l))}function M0(e,n){yc(8390656,8,e,n)}function zh(e,n){vc(2048,8,e,n)}function jb(e){ke.flags|=4;var n=ke.updateQueue;if(n===null)n=mc(),ke.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function I0(e){var n=Nt().memoizedState;return jb({ref:n,nextImpl:e}),function(){if((tt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function D0(e,n){return vc(4,2,e,n)}function O0(e,n){return vc(4,4,e,n)}function V0(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function j0(e,n,i){i=i!=null?i.concat([e]):null,vc(4,4,V0.bind(null,n,e),i)}function Ph(){}function k0(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&Mh(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function L0(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&Mh(n,l[1]))return l[0];if(l=e(),Rs){On(!0);try{e()}finally{On(!1)}}return i.memoizedState=[l,n],l}function Gh(e,n,i){return i===void 0||(Xa&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Bp(),ke.lanes|=e,Ii|=e,i)}function B0(e,n,i,l){return wn(i,n)?i:yr.current!==null?(e=Gh(e,i,l),wn(e,n)||(Bt=!0),e):(Xa&42)===0||(Xa&1073741824)!==0&&(Ge&261930)===0?(Bt=!0,e.memoizedState=i):(e=Bp(),ke.lanes|=e,Ii|=e,n)}function U0(e,n,i,l,h){var d=oe.p;oe.p=d!==0&&8>d?d:8;var v=X.T,E={};X.T=E,Fh(e,!1,n,i);try{var I=h(),H=X.S;if(H!==null&&H(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Z=Mb(I,l);Ol(e,n,Z,In(e))}else Ol(e,n,l,In(e))}catch(ee){Ol(e,n,{then:function(){},status:"rejected",reason:ee},In())}finally{oe.p=d,v!==null&&E.types!==null&&(v.types=E.types),X.T=v}}function kb(){}function qh(e,n,i,l){if(e.tag!==5)throw Error(s(476));var h=z0(e).queue;U0(e,h,n,xe,i===null?kb:function(){return P0(e),i(l)})}function z0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:xe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function P0(e){var n=z0(e);n.next===null&&(n=e.alternate.memoizedState),Ol(e,n.next.queue,{},In())}function Hh(){return Wt($l)}function G0(){return Nt().memoizedState}function q0(){return Nt().memoizedState}function Lb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=In();e=wi(i);var l=Ai(n,e,i);l!==null&&(_n(l,n,i),Nl(l,n,i)),n={cache:bh()},e.payload=n;return}n=n.return}}function Bb(e,n,i){var l=In();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},bc(e)?F0(n,i):(i=oh(e,n,i,l),i!==null&&(_n(i,e,l),Q0(i,n,l)))}function H0(e,n,i){var l=In();Ol(e,n,i,l)}function Ol(e,n,i,l){var h={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(bc(e))F0(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var v=n.lastRenderedState,E=d(v,i);if(h.hasEagerState=!0,h.eagerState=E,wn(E,v))return Wo(e,n,h,0),mt===null&&Jo(),!1}catch{}finally{}if(i=oh(e,n,h,l),i!==null)return _n(i,e,l),Q0(i,n,l),!0}return!1}function Fh(e,n,i,l){if(l={lane:2,revertLane:Sf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bc(e)){if(n)throw Error(s(479))}else n=oh(e,i,l,2),n!==null&&_n(n,e,2)}function bc(e){var n=e.alternate;return e===ke||n!==null&&n===ke}function F0(e,n){vr=fc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Q0(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,tl(e,i)}}var Vl={readContext:Wt,use:pc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Vl.useEffectEvent=Tt;var X0={readContext:Wt,use:pc,useCallback:function(e,n){return dn().memoizedState=[e,n===void 0?null:n],e},useContext:Wt,useEffect:M0,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,yc(4194308,4,V0.bind(null,n,e),i)},useLayoutEffect:function(e,n){return yc(4194308,4,e,n)},useInsertionEffect:function(e,n){yc(4,2,e,n)},useMemo:function(e,n){var i=dn();n=n===void 0?null:n;var l=e();if(Rs){On(!0);try{e()}finally{On(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=dn();if(i!==void 0){var h=i(n);if(Rs){On(!0);try{i(n)}finally{On(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=Bb.bind(null,ke,e),[l.memoizedState,e]},useRef:function(e){var n=dn();return e={current:e},n.memoizedState=e},useState:function(e){e=Bh(e);var n=e.queue,i=H0.bind(null,ke,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Ph,useDeferredValue:function(e,n){var i=dn();return Gh(i,e,n)},useTransition:function(){var e=Bh(!1);return e=U0.bind(null,ke,e.queue,!0,!1),dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=ke,h=dn();if(Qe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),mt===null)throw Error(s(349));(Ge&127)!==0||m0(l,n,i)}h.memoizedState=i;var d={value:i,getSnapshot:n};return h.queue=d,M0(g0.bind(null,l,d,e),[e]),l.flags|=2048,_r(9,{destroy:void 0},p0.bind(null,l,d,i,n),null),i},useId:function(){var e=dn(),n=mt.identifierPrefix;if(Qe){var i=Ra,l=Na;i=(l&~(1<<32-wt(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=dc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Ib++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hh,useFormState:w0,useActionState:w0,useOptimistic:function(e){var n=dn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Fh.bind(null,ke,!0,i),i.dispatch=n,[e,n]},useMemoCache:jh,useCacheRefresh:function(){return dn().memoizedState=Lb.bind(null,ke)},useEffectEvent:function(e){var n=dn(),i={impl:e};return n.memoizedState=i,function(){if((tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Qh={readContext:Wt,use:pc,useCallback:k0,useContext:Wt,useEffect:zh,useImperativeHandle:j0,useInsertionEffect:D0,useLayoutEffect:O0,useMemo:L0,useReducer:gc,useRef:R0,useState:function(){return gc(Ya)},useDebugValue:Ph,useDeferredValue:function(e,n){var i=Nt();return B0(i,ut.memoizedState,e,n)},useTransition:function(){var e=gc(Ya)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:d0,useId:G0,useHostTransitionStatus:Hh,useFormState:A0,useActionState:A0,useOptimistic:function(e,n){var i=Nt();return b0(i,ut,e,n)},useMemoCache:jh,useCacheRefresh:q0};Qh.useEffectEvent=I0;var Y0={readContext:Wt,use:pc,useCallback:k0,useContext:Wt,useEffect:zh,useImperativeHandle:j0,useInsertionEffect:D0,useLayoutEffect:O0,useMemo:L0,useReducer:Lh,useRef:R0,useState:function(){return Lh(Ya)},useDebugValue:Ph,useDeferredValue:function(e,n){var i=Nt();return ut===null?Gh(i,e,n):B0(i,ut.memoizedState,e,n)},useTransition:function(){var e=Lh(Ya)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:d0,useId:G0,useHostTransitionStatus:Hh,useFormState:N0,useActionState:N0,useOptimistic:function(e,n){var i=Nt();return ut!==null?b0(i,ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:jh,useCacheRefresh:q0};Y0.useEffectEvent=I0;function Xh(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:T({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yh={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=In(),h=wi(l);h.payload=n,i!=null&&(h.callback=i),n=Ai(e,h,l),n!==null&&(_n(n,e,l),Nl(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=In(),h=wi(l);h.tag=1,h.payload=n,i!=null&&(h.callback=i),n=Ai(e,h,l),n!==null&&(_n(n,e,l),Nl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=In(),l=wi(i);l.tag=2,n!=null&&(l.callback=n),n=Ai(e,l,i),n!==null&&(_n(n,e,i),Nl(n,e,i))}};function K0(e,n,i,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):n.prototype&&n.prototype.isPureReactComponent?!_l(i,l)||!_l(h,d):!0}function $0(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&Yh.enqueueReplaceState(n,n.state,null)}function Ms(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=T({},i));for(var h in e)i[h]===void 0&&(i[h]=e[h])}return i}function Z0(e){Zo(e)}function J0(e){console.error(e)}function W0(e){Zo(e)}function _c(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function ep(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Kh(e,n,i){return i=wi(i),i.tag=3,i.payload={element:null},i.callback=function(){_c(e,n)},i}function tp(e){return e=wi(e),e.tag=3,e}function np(e,n,i,l){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){ep(n,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){ep(n,i,l),typeof h!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function Ub(e,n,i,l,h){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&fr(n,i,h,!0),i=Cn.current,i!==null){switch(i.tag){case 31:case 13:return qn===null?Dc():i.alternate===null&&Et===0&&(Et=3),i.flags&=-257,i.flags|=65536,i.lanes=h,l===lc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),xf(e,l,h)),!1;case 22:return i.flags|=65536,l===lc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),xf(e,l,h)),!1}throw Error(s(435,i.tag))}return xf(e,l,h),Dc(),!1}if(Qe)return n=Cn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==mh&&(e=Error(s(422),{cause:l}),El(Un(e,i)))):(l!==mh&&(n=Error(s(423),{cause:l}),El(Un(n,i))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Un(l,i),h=Kh(e.stateNode,l,h),wh(e,h),Et!==4&&(Et=2)),!1;var d=Error(s(520),{cause:l});if(d=Un(d,i),Gl===null?Gl=[d]:Gl.push(d),Et!==4&&(Et=2),n===null)return!0;l=Un(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=h&-h,i.lanes|=e,e=Kh(i.stateNode,l,e),wh(i,e),!1;case 1:if(n=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Di===null||!Di.has(d))))return i.flags|=65536,h&=-h,i.lanes|=h,h=tp(h),np(h,e,i,l),wh(i,h),!1}i=i.return}while(i!==null);return!1}var $h=Error(s(461)),Bt=!1;function en(e,n,i,l){n.child=e===null?r0(n,null,i,l):Ns(n,e.child,i,l)}function ap(e,n,i,l,h){i=i.render;var d=n.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Ss(n),l=Ih(e,n,i,v,d,h),E=Dh(),e!==null&&!Bt?(Oh(e,n,h),Ka(e,n,h)):(Qe&&E&&fh(n),n.flags|=1,en(e,n,l,h),n.child)}function ip(e,n,i,l,h){if(e===null){var d=i.type;return typeof d=="function"&&!ch(d)&&d.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=d,sp(e,n,d,l,h)):(e=tc(i.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!sf(e,h)){var v=d.memoizedProps;if(i=i.compare,i=i!==null?i:_l,i(v,l)&&e.ref===n.ref)return Ka(e,n,h)}return n.flags|=1,e=qa(d,l),e.ref=n.ref,e.return=n,n.child=e}function sp(e,n,i,l,h){if(e!==null){var d=e.memoizedProps;if(_l(d,l)&&e.ref===n.ref)if(Bt=!1,n.pendingProps=l=d,sf(e,h))(e.flags&131072)!==0&&(Bt=!0);else return n.lanes=e.lanes,Ka(e,n,h)}return Zh(e,n,i,l,h)}function rp(e,n,i,l){var h=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(l=n.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,n.child=null;return lp(e,n,d,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&sc(n,d!==null?d.cachePool:null),d!==null?c0(n,d):Ch(),u0(n);else return l=n.lanes=536870912,lp(e,n,d!==null?d.baseLanes|i:i,i,l)}else d!==null?(sc(n,d.cachePool),c0(n,d),Ni(),n.memoizedState=null):(e!==null&&sc(n,null),Ch(),Ni());return en(e,n,h,i),n.child}function jl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function lp(e,n,i,l,h){var d=xh();return d=d===null?null:{parent:kt._currentValue,pool:d},n.memoizedState={baseLanes:i,cachePool:d},e!==null&&sc(n,null),Ch(),u0(n),e!==null&&fr(e,n,l,!0),n.childLanes=h,null}function xc(e,n){return n=Ec({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function op(e,n,i){return Ns(n,e.child,null,i),e=xc(n,n.pendingProps),e.flags|=2,Nn(n),n.memoizedState=null,e}function zb(e,n,i){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Qe){if(l.mode==="hidden")return e=xc(n,l),n.lanes=536870912,jl(null,e);if(Rh(n),(e=gt)?(e=_g(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_i!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Fm(e),i.return=n,n.child=i,Jt=n,gt=null)):e=null,e===null)throw Ti(n);return n.lanes=536870912,null}return xc(n,l)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(Rh(n),h)if(n.flags&256)n.flags&=-257,n=op(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Bt||fr(e,n,i,!1),h=(i&e.childLanes)!==0,Bt||h){if(l=mt,l!==null&&(v=nl(l,i),v!==0&&v!==d.retryLane))throw d.retryLane=v,_s(e,v),_n(l,e,v),$h;Dc(),n=op(e,n,i)}else e=d.treeContext,gt=Hn(v.nextSibling),Jt=n,Qe=!0,xi=null,Gn=!1,e!==null&&Ym(n,e),n=xc(n,l),n.flags|=4096;return n}return e=qa(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Tc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Zh(e,n,i,l,h){return Ss(n),i=Ih(e,n,i,l,void 0,h),l=Dh(),e!==null&&!Bt?(Oh(e,n,h),Ka(e,n,h)):(Qe&&l&&fh(n),n.flags|=1,en(e,n,i,h),n.child)}function cp(e,n,i,l,h,d){return Ss(n),n.updateQueue=null,i=f0(n,l,i,h),h0(e),l=Dh(),e!==null&&!Bt?(Oh(e,n,d),Ka(e,n,d)):(Qe&&l&&fh(n),n.flags|=1,en(e,n,i,d),n.child)}function up(e,n,i,l,h){if(Ss(n),n.stateNode===null){var d=or,v=i.contextType;typeof v=="object"&&v!==null&&(d=Wt(v)),d=new i(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yh,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Eh(n),v=i.contextType,d.context=typeof v=="object"&&v!==null?Wt(v):or,d.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Xh(n,i,v,l),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Yh.enqueueReplaceState(d,d.state,null),Ml(n,l,d,h),Rl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var E=n.memoizedProps,I=Ms(i,E);d.props=I;var H=d.context,Z=i.contextType;v=or,typeof Z=="object"&&Z!==null&&(v=Wt(Z));var ee=i.getDerivedStateFromProps;Z=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||H!==v)&&$0(n,d,l,v),Si=!1;var Q=n.memoizedState;d.state=Q,Ml(n,l,d,h),Rl(),H=n.memoizedState,E||Q!==H||Si?(typeof ee=="function"&&(Xh(n,i,ee,l),H=n.memoizedState),(I=Si||K0(n,i,I,l,Q,H,v))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=H),d.props=l,d.state=H,d.context=v,l=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,Sh(e,n),v=n.memoizedProps,Z=Ms(i,v),d.props=Z,ee=n.pendingProps,Q=d.context,H=i.contextType,I=or,typeof H=="object"&&H!==null&&(I=Wt(H)),E=i.getDerivedStateFromProps,(H=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ee||Q!==I)&&$0(n,d,l,I),Si=!1,Q=n.memoizedState,d.state=Q,Ml(n,l,d,h),Rl();var K=n.memoizedState;v!==ee||Q!==K||Si||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof E=="function"&&(Xh(n,i,E,l),K=n.memoizedState),(Z=Si||K0(n,i,Z,l,Q,K,I)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),d.props=l,d.state=K,d.context=I,l=Z):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,Tc(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Ns(n,e.child,null,h),n.child=Ns(n,null,i,h)):en(e,n,i,h),n.memoizedState=d.state,e=n.child):e=Ka(e,n,h),e}function hp(e,n,i,l){return Ts(),n.flags|=256,en(e,n,i,l),n.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wh(e){return{baseLanes:e,cachePool:e0()}}function ef(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Mn),e}function fp(e,n,i){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Qe){if(h?Ci(n):Ni(),(e=gt)?(e=_g(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_i!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Fm(e),i.return=n,n.child=i,Jt=n,gt=null)):e=null,e===null)throw Ti(n);return Lf(e)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,h?(Ni(),h=n.mode,E=Ec({mode:"hidden",children:E},h),l=xs(l,h,i,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=Wh(i),l.childLanes=ef(e,v,i),n.memoizedState=Jh,jl(null,l)):(Ci(n),tf(n,E))}var I=e.memoizedState;if(I!==null&&(E=I.dehydrated,E!==null)){if(d)n.flags&256?(Ci(n),n.flags&=-257,n=nf(e,n,i)):n.memoizedState!==null?(Ni(),n.child=e.child,n.flags|=128,n=null):(Ni(),E=l.fallback,h=n.mode,l=Ec({mode:"visible",children:l.children},h),E=xs(E,h,i,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,Ns(n,e.child,null,i),l=n.child,l.memoizedState=Wh(i),l.childLanes=ef(e,v,i),n.memoizedState=Jh,n=jl(null,l));else if(Ci(n),Lf(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var H=v.dgst;v=H,l=Error(s(419)),l.stack="",l.digest=v,El({value:l,source:null,stack:null}),n=nf(e,n,i)}else if(Bt||fr(e,n,i,!1),v=(i&e.childLanes)!==0,Bt||v){if(v=mt,v!==null&&(l=nl(v,i),l!==0&&l!==I.retryLane))throw I.retryLane=l,_s(e,l),_n(v,e,l),$h;kf(E)||Dc(),n=nf(e,n,i)}else kf(E)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,gt=Hn(E.nextSibling),Jt=n,Qe=!0,xi=null,Gn=!1,e!==null&&Ym(n,e),n=tf(n,l.children),n.flags|=4096);return n}return h?(Ni(),E=l.fallback,h=n.mode,I=e.child,H=I.sibling,l=qa(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,H!==null?E=qa(H,E):(E=xs(E,h,i,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,jl(null,l),l=n.child,E=e.child.memoizedState,E===null?E=Wh(i):(h=E.cachePool,h!==null?(I=kt._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=e0(),E={baseLanes:E.baseLanes|i,cachePool:h}),l.memoizedState=E,l.childLanes=ef(e,v,i),n.memoizedState=Jh,jl(e.child,l)):(Ci(n),i=e.child,e=i.sibling,i=qa(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=i,n.memoizedState=null,i)}function tf(e,n){return n=Ec({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ec(e,n){return e=An(22,e,null,n),e.lanes=0,e}function nf(e,n,i){return Ns(n,e.child,null,i),e=tf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function dp(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),yh(e.return,n,i)}function af(e,n,i,l,h,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:h,treeForkCount:d}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=i,v.tailMode=h,v.treeForkCount=d)}function mp(e,n,i){var l=n.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=Ct.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,ue(Ct,v),en(e,n,l,i),l=Qe?Tl:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dp(e,i,n);else if(e.tag===19)dp(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(i=n.child,h=null;i!==null;)e=i.alternate,e!==null&&hc(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=n.child,n.child=null):(h=i.sibling,i.sibling=null),af(n,!1,h,i,d,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&hc(e)===null){n.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}af(n,!0,i,null,d,l);break;case"together":af(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ka(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ii|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(fr(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=qa(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=qa(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function sf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function Pb(e,n,i){switch(n.tag){case 3:de(n,n.stateNode.containerInfo),Ei(n,kt,e.memoizedState.cache),Ts();break;case 27:case 5:ye(n);break;case 4:de(n,n.stateNode.containerInfo);break;case 10:Ei(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Rh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ci(n),n.flags|=128,null):(i&n.child.childLanes)!==0?fp(e,n,i):(Ci(n),e=Ka(e,n,i),e!==null?e.sibling:null);Ci(n);break;case 19:var h=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(fr(e,n,i,!1),l=(i&n.childLanes)!==0),h){if(l)return mp(e,n,i);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,rp(e,n,i,n.pendingProps);case 24:Ei(n,kt,e.memoizedState.cache)}return Ka(e,n,i)}function pp(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Bt=!0;else{if(!sf(e,i)&&(n.flags&128)===0)return Bt=!1,Pb(e,n,i);Bt=(e.flags&131072)!==0}else Bt=!1,Qe&&(n.flags&1048576)!==0&&Xm(n,Tl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=As(n.elementType),n.type=e,typeof e=="function")ch(e)?(l=Ms(e,l),n.tag=1,n=up(null,n,e,l,i)):(n.tag=0,n=Zh(null,n,e,l,i));else{if(e!=null){var h=e.$$typeof;if(h===se){n.tag=11,n=ap(null,n,e,l,i);break e}else if(h===M){n.tag=14,n=ip(null,n,e,l,i);break e}}throw n=Ue(e)||e,Error(s(306,n,""))}}return n;case 0:return Zh(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,h=Ms(l,n.pendingProps),up(e,n,l,h,i);case 3:e:{if(de(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,Sh(e,n),Ml(n,l,null,i);var v=n.memoizedState;if(l=v.cache,Ei(n,kt,l),l!==d.cache&&vh(n,[kt],i,!0),Rl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=hp(e,n,l,i);break e}else if(l!==h){h=Un(Error(s(424)),n),El(h),n=hp(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(gt=Hn(e.firstChild),Jt=n,Qe=!0,xi=null,Gn=!0,i=r0(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ts(),l===h){n=Ka(e,n,i);break e}en(e,n,l,i)}n=n.child}return n;case 26:return Tc(e,n),e===null?(i=Ag(n.type,null,n.pendingProps,null))?n.memoizedState=i:Qe||(i=n.type,e=n.pendingProps,l=Uc(be.current).createElement(i),l[Ot]=n,l[Ft]=e,tn(l,i,e),Vt(l),n.stateNode=l):n.memoizedState=Ag(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ye(n),e===null&&Qe&&(l=n.stateNode=Eg(n.type,n.pendingProps,be.current),Jt=n,Gn=!0,h=gt,ki(n.type)?(Bf=h,gt=Hn(l.firstChild)):gt=h),en(e,n,n.pendingProps.children,i),Tc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Qe&&((h=l=gt)&&(l=y_(l,n.type,n.pendingProps,Gn),l!==null?(n.stateNode=l,Jt=n,gt=Hn(l.firstChild),Gn=!1,h=!0):h=!1),h||Ti(n)),ye(n),h=n.type,d=n.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,Of(h,d)?l=null:v!==null&&Of(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Ih(e,n,Db,null,null,i),$l._currentValue=h),Tc(e,n),en(e,n,l,i),n.child;case 6:return e===null&&Qe&&((e=i=gt)&&(i=v_(i,n.pendingProps,Gn),i!==null?(n.stateNode=i,Jt=n,gt=null,e=!0):e=!1),e||Ti(n)),null;case 13:return fp(e,n,i);case 4:return de(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Ns(n,null,l,i):en(e,n,l,i),n.child;case 11:return ap(e,n,n.type,n.pendingProps,i);case 7:return en(e,n,n.pendingProps,i),n.child;case 8:return en(e,n,n.pendingProps.children,i),n.child;case 12:return en(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,Ei(n,n.type,l.value),en(e,n,l.children,i),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Ss(n),h=Wt(h),l=l(h),n.flags|=1,en(e,n,l,i),n.child;case 14:return ip(e,n,n.type,n.pendingProps,i);case 15:return sp(e,n,n.type,n.pendingProps,i);case 19:return mp(e,n,i);case 31:return zb(e,n,i);case 22:return rp(e,n,i,n.pendingProps);case 24:return Ss(n),l=Wt(kt),e===null?(h=xh(),h===null&&(h=mt,d=bh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=i),h=d),n.memoizedState={parent:l,cache:h},Eh(n),Ei(n,kt,h)):((e.lanes&i)!==0&&(Sh(e,n),Ml(n,null,null,i),Rl()),h=e.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Ei(n,kt,l)):(l=d.cache,Ei(n,kt,l),l!==h.cache&&vh(n,[kt],i,!0))),en(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function $a(e){e.flags|=4}function rf(e,n,i,l,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Gp())e.flags|=8192;else throw Cs=lc,Th}else e.flags&=-16777217}function gp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ig(n))if(Gp())e.flags|=8192;else throw Cs=lc,Th}function Sc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Mo():536870912,e.lanes|=n,Sr|=n)}function kl(e,n){if(!Qe)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function Gb(e,n,i){var l=n.pendingProps;switch(dh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(n),null;case 1:return yt(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Qa(kt),Re(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(hr(n)?$a(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ph())),yt(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?($a(n),d!==null?(yt(n),gp(n,d)):(yt(n),rf(n,h,null,l,i))):d?d!==e.memoizedState?($a(n),yt(n),gp(n,d)):(yt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&$a(n),yt(n),rf(n,h,e,l,i)),null;case 27:if(Ce(n),i=be.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}e=ge.current,hr(n)?Km(n):(e=Eg(h,l,i),n.stateNode=e,$a(n))}return yt(n),null;case 5:if(Ce(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}if(d=ge.current,hr(n))Km(n);else{var v=Uc(be.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[Ot]=n,d[Ft]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=d;e:switch(tn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$a(n)}}return yt(n),rf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=be.current,hr(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ot]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||fg(e.nodeValue,i)),e||Ti(n,!0)}else e=Uc(e).createTextNode(l),e[Ot]=n,n.stateNode=e}return yt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(l=hr(n),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ot]=n}else Ts(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),e=!1}else i=ph(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(Nn(n),n):(Nn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return yt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=hr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ot]=n}else Ts(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),h=!1}else h=ph(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Nn(n),n):(Nn(n),null)}return Nn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Sc(n,n.updateQueue),yt(n),null);case 4:return Re(),e===null&&Nf(n.stateNode.containerInfo),yt(n),null;case 10:return Qa(n.type),yt(n),null;case 19:if(ae(Ct),l=n.memoizedState,l===null)return yt(n),null;if(h=(n.flags&128)!==0,d=l.rendering,d===null)if(h)kl(l,!1);else{if(Et!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=hc(e),d!==null){for(n.flags|=128,kl(l,!1),e=d.updateQueue,n.updateQueue=e,Sc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Hm(i,e),i=i.sibling;return ue(Ct,Ct.current&1|2),Qe&&Ha(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&It()>Rc&&(n.flags|=128,h=!0,kl(l,!1),n.lanes=4194304)}else{if(!h)if(e=hc(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Sc(n,e),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qe)return yt(n),null}else 2*It()-l.renderingStartTime>Rc&&i!==536870912&&(n.flags|=128,h=!0,kl(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=It(),e.sibling=null,i=Ct.current,ue(Ct,h?i&1|2:i&1),Qe&&Ha(n,l.treeForkCount),e):(yt(n),null);case 22:case 23:return Nn(n),Nh(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(yt(n),n.subtreeFlags&6&&(n.flags|=8192)):yt(n),i=n.updateQueue,i!==null&&Sc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&ae(ws),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Qa(kt),yt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function qb(e,n){switch(dh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Qa(kt),Re(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ce(n),null;case 31:if(n.memoizedState!==null){if(Nn(n),n.alternate===null)throw Error(s(340));Ts()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Ts()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ae(Ct),null;case 4:return Re(),null;case 10:return Qa(n.type),null;case 22:case 23:return Nn(n),Nh(),e!==null&&ae(ws),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Qa(kt),null;case 25:return null;default:return null}}function yp(e,n){switch(dh(n),n.tag){case 3:Qa(kt),Re();break;case 26:case 27:case 5:Ce(n);break;case 4:Re();break;case 31:n.memoizedState!==null&&Nn(n);break;case 13:Nn(n);break;case 19:ae(Ct);break;case 10:Qa(n.type);break;case 22:case 23:Nn(n),Nh(),e!==null&&ae(ws);break;case 24:Qa(kt)}}function Ll(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var h=l.next;i=h;do{if((i.tag&e)===e){l=void 0;var d=i.create,v=i.inst;l=d(),v.destroy=l}i=i.next}while(i!==h)}}catch(E){ot(n,n.return,E)}}function Ri(e,n,i){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=n;var I=i,H=E;try{H()}catch(Z){ot(h,I,Z)}}}l=l.next}while(l!==d)}}catch(Z){ot(n,n.return,Z)}}function vp(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{o0(n,i)}catch(l){ot(e,e.return,l)}}}function bp(e,n,i){i.props=Ms(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){ot(e,n,l)}}function Bl(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(h){ot(e,n,h)}}function Ma(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(h){ot(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){ot(e,n,h)}else i.current=null}function _p(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(h){ot(e,e.return,h)}}function lf(e,n,i){try{var l=e.stateNode;h_(l,e.type,i,n),l[Ft]=n}catch(h){ot(e,e.return,h)}}function xp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ki(e.type)||e.tag===4}function of(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cf(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Jn));else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(cf(e,n,i),e=e.sibling;e!==null;)cf(e,n,i),e=e.sibling}function wc(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(wc(e,n,i),e=e.sibling;e!==null;)wc(e,n,i),e=e.sibling}function Tp(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);tn(n,l,i),n[Ot]=e,n[Ft]=i}catch(d){ot(e,e.return,d)}}var Za=!1,Ut=!1,uf=!1,Ep=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Hb(e,n){if(e=e.containerInfo,If=Qc,e=jm(e),nh(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var v=0,E=-1,I=-1,H=0,Z=0,ee=e,Q=null;t:for(;;){for(var K;ee!==i||h!==0&&ee.nodeType!==3||(E=v+h),ee!==d||l!==0&&ee.nodeType!==3||(I=v+l),ee.nodeType===3&&(v+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Q=ee,ee=K;for(;;){if(ee===e)break t;if(Q===i&&++H===h&&(E=v),Q===d&&++Z===l&&(I=v),(K=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=K}i=E===-1||I===-1?null:{start:E,end:I}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},Qc=!1,Xt=n;Xt!==null;)if(n=Xt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Xt=e;else for(;Xt!==null;){switch(n=Xt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)h=e[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=n,h=d.memoizedProps,d=d.memoizedState,l=i.stateNode;try{var _e=Ms(i.type,h);e=l.getSnapshotBeforeUpdate(_e,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){ot(i,i.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)jf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Xt=e;break}Xt=n.return}}function Sp(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Wa(e,i),l&4&&Ll(5,i);break;case 1:if(Wa(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(v){ot(i,i.return,v)}else{var h=Ms(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ot(i,i.return,v)}}l&64&&vp(i),l&512&&Bl(i,i.return);break;case 3:if(Wa(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{o0(e,n)}catch(v){ot(i,i.return,v)}}break;case 27:n===null&&l&4&&Tp(i);case 26:case 5:Wa(e,i),n===null&&l&4&&_p(i),l&512&&Bl(i,i.return);break;case 12:Wa(e,i);break;case 31:Wa(e,i),l&4&&Cp(e,i);break;case 13:Wa(e,i),l&4&&Np(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Wb.bind(null,i),b_(e,i))));break;case 22:if(l=i.memoizedState!==null||Za,!l){n=n!==null&&n.memoizedState!==null||Ut,h=Za;var d=Ut;Za=l,(Ut=n)&&!d?ei(e,i,(i.subtreeFlags&8772)!==0):Wa(e,i),Za=h,Ut=d}break;case 30:break;default:Wa(e,i)}}function wp(e){var n=e.alternate;n!==null&&(e.alternate=null,wp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ys(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _t=null,gn=!1;function Ja(e,n,i){for(i=i.child;i!==null;)Ap(e,n,i),i=i.sibling}function Ap(e,n,i){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Tn,i)}catch{}switch(i.tag){case 26:Ut||Ma(i,n),Ja(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ut||Ma(i,n);var l=_t,h=gn;ki(i.type)&&(_t=i.stateNode,gn=!1),Ja(e,n,i),Xl(i.stateNode),_t=l,gn=h;break;case 5:Ut||Ma(i,n);case 6:if(l=_t,h=gn,_t=null,Ja(e,n,i),_t=l,gn=h,_t!==null)if(gn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(i.stateNode)}catch(d){ot(i,n,d)}else try{_t.removeChild(i.stateNode)}catch(d){ot(i,n,d)}break;case 18:_t!==null&&(gn?(e=_t,vg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Dr(e)):vg(_t,i.stateNode));break;case 4:l=_t,h=gn,_t=i.stateNode.containerInfo,gn=!0,Ja(e,n,i),_t=l,gn=h;break;case 0:case 11:case 14:case 15:Ri(2,i,n),Ut||Ri(4,i,n),Ja(e,n,i);break;case 1:Ut||(Ma(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&bp(i,n,l)),Ja(e,n,i);break;case 21:Ja(e,n,i);break;case 22:Ut=(l=Ut)||i.memoizedState!==null,Ja(e,n,i),Ut=l;break;default:Ja(e,n,i)}}function Cp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Dr(e)}catch(i){ot(n,n.return,i)}}}function Np(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Dr(e)}catch(i){ot(n,n.return,i)}}function Fb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Ep),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Ep),n;default:throw Error(s(435,e.tag))}}function Ac(e,n){var i=Fb(e);n.forEach(function(l){if(!i.has(l)){i.add(l);var h=e_.bind(null,e,l);l.then(h,h)}})}function yn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var h=i[l],d=e,v=n,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ki(E.type)){_t=E.stateNode,gn=!1;break e}break;case 5:_t=E.stateNode,gn=!1;break e;case 3:case 4:_t=E.stateNode.containerInfo,gn=!0;break e}E=E.return}if(_t===null)throw Error(s(160));Ap(d,v,h),_t=null,gn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Rp(n,e),n=n.sibling}var ia=null;function Rp(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),vn(e),l&4&&(Ri(3,e,e.return),Ll(3,e),Ri(5,e,e.return));break;case 1:yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),l&64&&Za&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var h=ia;if(yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),l&4){var d=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ga]||d[Ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,i),d[Ot]=e,Vt(d),l=d;break e;case"link":var v=Rg("link","href",h).get(l+(i.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(E,1);break t}}d=h.createElement(l),tn(d,l,i),h.head.appendChild(d);break;case"meta":if(v=Rg("meta","content",h).get(l+(i.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(E,1);break t}}d=h.createElement(l),tn(d,l,i),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ot]=e,Vt(d),l=d}e.stateNode=l}else Mg(h,e.type,e.stateNode);else e.stateNode=Ng(h,l,e.memoizedProps);else d!==l?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,l===null?Mg(h,e.type,e.stateNode):Ng(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&lf(e,e.memoizedProps,i.memoizedProps)}break;case 27:yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),i!==null&&l&4&&lf(e,e.memoizedProps,i.memoizedProps);break;case 5:if(yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),e.flags&32){h=e.stateNode;try{pn(h,"")}catch(_e){ot(e,e.return,_e)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,lf(e,h,i!==null?i.memoizedProps:h)),l&1024&&(uf=!0);break;case 6:if(yn(n,e),vn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(_e){ot(e,e.return,_e)}}break;case 3:if(Gc=null,h=ia,ia=zc(n.containerInfo),yn(n,e),ia=h,vn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Dr(n.containerInfo)}catch(_e){ot(e,e.return,_e)}uf&&(uf=!1,Mp(e));break;case 4:l=ia,ia=zc(e.stateNode.containerInfo),yn(n,e),vn(e),ia=l;break;case 12:yn(n,e),vn(e);break;case 31:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ac(e,l)));break;case 13:yn(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Nc=It()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ac(e,l)));break;case 22:h=e.memoizedState!==null;var I=i!==null&&i.memoizedState!==null,H=Za,Z=Ut;if(Za=H||h,Ut=Z||I,yn(n,e),Ut=Z,Za=H,vn(e),l&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(i===null||I||Za||Ut||Is(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){I=i=n;try{if(d=I.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=I.stateNode;var ee=I.memoizedProps.style,Q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(_e){ot(I,I.return,_e)}}}else if(n.tag===6){if(i===null){I=n;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(_e){ot(I,I.return,_e)}}}else if(n.tag===18){if(i===null){I=n;try{var K=I.stateNode;h?bg(K,!0):bg(I.stateNode,!1)}catch(_e){ot(I,I.return,_e)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Ac(e,i))));break;case 19:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ac(e,l)));break;case 30:break;case 21:break;default:yn(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(xp(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var h=i.stateNode,d=of(e);wc(e,d,h);break;case 5:var v=i.stateNode;i.flags&32&&(pn(v,""),i.flags&=-33);var E=of(e);wc(e,E,v);break;case 3:case 4:var I=i.stateNode.containerInfo,H=of(e);cf(e,H,I);break;default:throw Error(s(161))}}catch(Z){ot(e,e.return,Z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Mp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Mp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wa(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Sp(e,n.alternate,n),n=n.sibling}function Is(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ri(4,n,n.return),Is(n);break;case 1:Ma(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&bp(n,n.return,i),Is(n);break;case 27:Xl(n.stateNode);case 26:case 5:Ma(n,n.return),Is(n);break;case 22:n.memoizedState===null&&Is(n);break;case 30:Is(n);break;default:Is(n)}e=e.sibling}}function ei(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,d=n,v=d.flags;switch(d.tag){case 0:case 11:case 15:ei(h,d,i),Ll(4,d);break;case 1:if(ei(h,d,i),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ot(l,l.return,H)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)l0(I[h],E)}catch(H){ot(l,l.return,H)}}i&&v&64&&vp(d),Bl(d,d.return);break;case 27:Tp(d);case 26:case 5:ei(h,d,i),i&&l===null&&v&4&&_p(d),Bl(d,d.return);break;case 12:ei(h,d,i);break;case 31:ei(h,d,i),i&&v&4&&Cp(h,d);break;case 13:ei(h,d,i),i&&v&4&&Np(h,d);break;case 22:d.memoizedState===null&&ei(h,d,i),Bl(d,d.return);break;case 30:break;default:ei(h,d,i)}n=n.sibling}}function hf(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Sl(i))}function ff(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e))}function sa(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ip(e,n,i,l),n=n.sibling}function Ip(e,n,i,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:sa(e,n,i,l),h&2048&&Ll(9,n);break;case 1:sa(e,n,i,l);break;case 3:sa(e,n,i,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e)));break;case 12:if(h&2048){sa(e,n,i,l),e=n.stateNode;try{var d=n.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ot(n,n.return,I)}}else sa(e,n,i,l);break;case 31:sa(e,n,i,l);break;case 13:sa(e,n,i,l);break;case 23:break;case 22:d=n.stateNode,v=n.alternate,n.memoizedState!==null?d._visibility&2?sa(e,n,i,l):Ul(e,n):d._visibility&2?sa(e,n,i,l):(d._visibility|=2,xr(e,n,i,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&hf(v,n);break;case 24:sa(e,n,i,l),h&2048&&ff(n.alternate,n);break;default:sa(e,n,i,l)}}function xr(e,n,i,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,v=n,E=i,I=l,H=v.flags;switch(v.tag){case 0:case 11:case 15:xr(d,v,E,I,h),Ll(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?xr(d,v,E,I,h):Ul(d,v):(Z._visibility|=2,xr(d,v,E,I,h)),h&&H&2048&&hf(v.alternate,v);break;case 24:xr(d,v,E,I,h),h&&H&2048&&ff(v.alternate,v);break;default:xr(d,v,E,I,h)}n=n.sibling}}function Ul(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,h=l.flags;switch(l.tag){case 22:Ul(i,l),h&2048&&hf(l.alternate,l);break;case 24:Ul(i,l),h&2048&&ff(l.alternate,l);break;default:Ul(i,l)}n=n.sibling}}var zl=8192;function Tr(e,n,i){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)Dp(e,n,i),e=e.sibling}function Dp(e,n,i){switch(e.tag){case 26:Tr(e,n,i),e.flags&zl&&e.memoizedState!==null&&I_(i,ia,e.memoizedState,e.memoizedProps);break;case 5:Tr(e,n,i);break;case 3:case 4:var l=ia;ia=zc(e.stateNode.containerInfo),Tr(e,n,i),ia=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,Tr(e,n,i),zl=l):Tr(e,n,i));break;default:Tr(e,n,i)}}function Op(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Pl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,jp(l,e)}Op(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vp(e),e=e.sibling}function Vp(e){switch(e.tag){case 0:case 11:case 15:Pl(e),e.flags&2048&&Ri(9,e,e.return);break;case 3:Pl(e);break;case 12:Pl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Cc(e)):Pl(e);break;default:Pl(e)}}function Cc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,jp(l,e)}Op(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ri(8,n,n.return),Cc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Cc(n));break;default:Cc(n)}e=e.sibling}}function jp(e,n){for(;Xt!==null;){var i=Xt;switch(i.tag){case 0:case 11:case 15:Ri(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Xt=l;else e:for(i=e;Xt!==null;){l=Xt;var h=l.sibling,d=l.return;if(wp(l),l===i){Xt=null;break e}if(h!==null){h.return=d,Xt=h;break e}Xt=d}}}var Qb={getCacheForType:function(e){var n=Wt(kt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Wt(kt).controller.signal}},Xb=typeof WeakMap=="function"?WeakMap:Map,tt=0,mt=null,ze=null,Ge=0,lt=0,Rn=null,Mi=!1,Er=!1,df=!1,ti=0,Et=0,Ii=0,Ds=0,mf=0,Mn=0,Sr=0,Gl=null,bn=null,pf=!1,Nc=0,kp=0,Rc=1/0,Mc=null,Di=null,qt=0,Oi=null,wr=null,ni=0,gf=0,yf=null,Lp=null,ql=0,vf=null;function In(){return(tt&2)!==0&&Ge!==0?Ge&-Ge:X.T!==null?Sf():Io()}function Bp(){if(Mn===0)if((Ge&536870912)===0||Qe){var e=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),Mn=e}else Mn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Mn}function _n(e,n,i){(e===mt&&(lt===2||lt===9)||e.cancelPendingCommit!==null)&&(Ar(e,0),Vi(e,Ge,Mn,!1)),rs(e,i),((tt&2)===0||e!==mt)&&(e===mt&&((tt&2)===0&&(Ds|=i),Et===4&&Vi(e,Ge,Mn,!1)),Ia(e))}function Up(e,n,i){if((tt&6)!==0)throw Error(s(327));var l=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Kn(e,n),h=l?$b(e,n):_f(e,n,!0),d=l;do{if(h===0){Er&&!l&&Vi(e,n,0,!1);break}else{if(i=e.current.alternate,d&&!Yb(i)){h=_f(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var E=e;h=Gl;var I=E.current.memoizedState.isDehydrated;if(I&&(Ar(E,v).flags|=256),v=_f(E,v,!1),v!==2){if(df&&!I){E.errorRecoveryDisabledLanes|=d,Ds|=d,h=4;break e}d=bn,bn=h,d!==null&&(bn===null?bn=d:bn.push.apply(bn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ar(e,0),Vi(e,n,0,!0);break}e:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Vi(l,n,Mn,!Mi);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=Nc+300-It(),10<h)){if(Vi(l,n,Mn,!Mi),da(l,0,!0)!==0)break e;ni=n,l.timeoutHandle=gg(zp.bind(null,l,i,bn,Mc,pf,n,Mn,Ds,Sr,Mi,d,"Throttled",-0,0),h);break e}zp(l,i,bn,Mc,pf,n,Mn,Ds,Sr,Mi,d,null,-0,0)}}break}while(!0);Ia(e)}function zp(e,n,i,l,h,d,v,E,I,H,Z,ee,Q,K){if(e.timeoutHandle=-1,ee=n.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Dp(n,d,ee);var _e=(d&62914560)===d?Nc-It():(d&4194048)===d?kp-It():0;if(_e=D_(ee,_e),_e!==null){ni=d,e.cancelPendingCommit=_e(Yp.bind(null,e,n,d,i,l,h,v,E,I,Z,ee,null,Q,K)),Vi(e,d,v,!H);return}}Yp(e,n,d,i,l,h,v,E,I)}function Yb(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var h=i[l],d=h.getSnapshot;h=h.value;try{if(!wn(d(),h))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Vi(e,n,i,l){n&=~mf,n&=~Ds,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var d=31-wt(h),v=1<<d;l[d]=-1,h&=~v}i!==0&&ls(e,i,n)}function Ic(){return(tt&6)===0?(Hl(0),!1):!0}function bf(){if(ze!==null){if(lt===0)var e=ze.return;else e=ze,Fa=Es=null,Vh(e),gr=null,Al=0,e=ze;for(;e!==null;)yp(e.alternate,e),e=e.return;ze=null}}function Ar(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,m_(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ni=0,bf(),mt=e,ze=i=qa(e.current,null),Ge=n,lt=0,Rn=null,Mi=!1,Er=Kn(e,n),df=!1,Sr=Mn=mf=Ds=Ii=Et=0,bn=Gl=null,pf=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-wt(l),d=1<<h;n|=e[h],l&=~d}return ti=n,Jo(),i}function Pp(e,n){ke=null,X.H=Vl,n===pr||n===rc?(n=a0(),lt=3):n===Th?(n=a0(),lt=4):lt=n===$h?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Rn=n,ze===null&&(Et=1,_c(e,Un(n,e.current)))}function Gp(){var e=Cn.current;return e===null?!0:(Ge&4194048)===Ge?qn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===qn:!1}function qp(){var e=X.H;return X.H=Vl,e===null?Vl:e}function Hp(){var e=X.A;return X.A=Qb,e}function Dc(){Et=4,Mi||(Ge&4194048)!==Ge&&Cn.current!==null||(Er=!0),(Ii&134217727)===0&&(Ds&134217727)===0||mt===null||Vi(mt,Ge,Mn,!1)}function _f(e,n,i){var l=tt;tt|=2;var h=qp(),d=Hp();(mt!==e||Ge!==n)&&(Mc=null,Ar(e,n)),n=!1;var v=Et;e:do try{if(lt!==0&&ze!==null){var E=ze,I=Rn;switch(lt){case 8:bf(),v=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(n=!0);var H=lt;if(lt=0,Rn=null,Cr(e,E,I,H),i&&Er){v=0;break e}break;default:H=lt,lt=0,Rn=null,Cr(e,E,I,H)}}Kb(),v=Et;break}catch(Z){Pp(e,Z)}while(!0);return n&&e.shellSuspendCounter++,Fa=Es=null,tt=l,X.H=h,X.A=d,ze===null&&(mt=null,Ge=0,Jo()),v}function Kb(){for(;ze!==null;)Fp(ze)}function $b(e,n){var i=tt;tt|=2;var l=qp(),h=Hp();mt!==e||Ge!==n?(Mc=null,Rc=It()+500,Ar(e,n)):Er=Kn(e,n);e:do try{if(lt!==0&&ze!==null){n=ze;var d=Rn;t:switch(lt){case 1:lt=0,Rn=null,Cr(e,n,d,1);break;case 2:case 9:if(t0(d)){lt=0,Rn=null,Qp(n);break}n=function(){lt!==2&&lt!==9||mt!==e||(lt=7),Ia(e)},d.then(n,n);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:t0(d)?(lt=0,Rn=null,Qp(n)):(lt=0,Rn=null,Cr(e,n,d,7));break;case 5:var v=null;switch(ze.tag){case 26:v=ze.memoizedState;case 5:case 27:var E=ze;if(v?Ig(v):E.stateNode.complete){lt=0,Rn=null;var I=E.sibling;if(I!==null)ze=I;else{var H=E.return;H!==null?(ze=H,Oc(H)):ze=null}break t}}lt=0,Rn=null,Cr(e,n,d,5);break;case 6:lt=0,Rn=null,Cr(e,n,d,6);break;case 8:bf(),Et=6;break e;default:throw Error(s(462))}}Zb();break}catch(Z){Pp(e,Z)}while(!0);return Fa=Es=null,X.H=l,X.A=h,tt=i,ze!==null?0:(mt=null,Ge=0,Jo(),Et)}function Zb(){for(;ze!==null&&!as();)Fp(ze)}function Fp(e){var n=pp(e.alternate,e,ti);e.memoizedProps=e.pendingProps,n===null?Oc(e):ze=n}function Qp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=cp(i,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=cp(i,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:Vh(n);default:yp(i,n),n=ze=Hm(n,ti),n=pp(i,n,ti)}e.memoizedProps=e.pendingProps,n===null?Oc(e):ze=n}function Cr(e,n,i,l){Fa=Es=null,Vh(n),gr=null,Al=0;var h=n.return;try{if(Ub(e,h,n,i,Ge)){Et=1,_c(e,Un(i,e.current)),ze=null;return}}catch(d){if(h!==null)throw ze=h,d;Et=1,_c(e,Un(i,e.current)),ze=null;return}n.flags&32768?(Qe||l===1?e=!0:Er||(Ge&536870912)!==0?e=!1:(Mi=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Xp(n,e)):Oc(n)}function Oc(e){var n=e;do{if((n.flags&32768)!==0){Xp(n,Mi);return}e=n.return;var i=Gb(n.alternate,n,ti);if(i!==null){ze=i;return}if(n=n.sibling,n!==null){ze=n;return}ze=n=e}while(n!==null);Et===0&&(Et=5)}function Xp(e,n){do{var i=qb(e.alternate,e);if(i!==null){i.flags&=32767,ze=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ze=e;return}ze=e=i}while(e!==null);Et=6,ze=null}function Yp(e,n,i,l,h,d,v,E,I){e.cancelPendingCommit=null;do Vc();while(qt!==0);if((tt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=lh,Ju(e,i,d,v,E,I),e===mt&&(ze=mt=null,Ge=0),wr=n,Oi=e,ni=i,gf=d,yf=h,Lp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,t_(ua,function(){return Wp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=oe.p,oe.p=2,v=tt,tt|=4;try{Hb(e,n,i)}finally{tt=v,oe.p=h,X.T=l}}qt=1,Kp(),$p(),Zp()}}function Kp(){if(qt===1){qt=0;var e=Oi,n=wr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var l=oe.p;oe.p=2;var h=tt;tt|=4;try{Rp(n,e);var d=Df,v=jm(e.containerInfo),E=d.focusedElem,I=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Vm(E.ownerDocument.documentElement,E)){if(I!==null&&nh(E)){var H=I.start,Z=I.end;if(Z===void 0&&(Z=H),"selectionStart"in E)E.selectionStart=H,E.selectionEnd=Math.min(Z,E.value.length);else{var ee=E.ownerDocument||document,Q=ee&&ee.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),_e=E.textContent.length,Ne=Math.min(I.start,_e),ft=I.end===void 0?Ne:Math.min(I.end,_e);!K.extend&&Ne>ft&&(v=ft,ft=Ne,Ne=v);var z=Om(E,Ne),L=Om(E,ft);if(z&&L&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),K.removeAllRanges(),Ne>ft?(K.addRange(q),K.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),K.addRange(q))}}}}for(ee=[],K=E;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var J=ee[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Qc=!!If,Df=If=null}finally{tt=h,oe.p=l,X.T=i}}e.current=n,qt=2}}function $p(){if(qt===2){qt=0;var e=Oi,n=wr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var l=oe.p;oe.p=2;var h=tt;tt|=4;try{Sp(e,n.alternate,n)}finally{tt=h,oe.p=l,X.T=i}}qt=3}}function Zp(){if(qt===4||qt===3){qt=0,ci();var e=Oi,n=wr,i=ni,l=Lp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qt=5:(qt=0,wr=Oi=null,Jp(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Di=null),Ua(i),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Tn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,h=oe.p,oe.p=2,X.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{X.T=n,oe.p=h}}(ni&3)!==0&&Vc(),Ia(e),h=e.pendingLanes,(i&261930)!==0&&(h&42)!==0?e===vf?ql++:(ql=0,vf=e):ql=0,Hl(0)}}function Jp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Sl(n)))}function Vc(){return Kp(),$p(),Zp(),Wp()}function Wp(){if(qt!==5)return!1;var e=Oi,n=gf;gf=0;var i=Ua(ni),l=X.T,h=oe.p;try{oe.p=32>i?32:i,X.T=null,i=yf,yf=null;var d=Oi,v=ni;if(qt=0,wr=Oi=null,ni=0,(tt&6)!==0)throw Error(s(331));var E=tt;if(tt|=4,Vp(d.current),Ip(d,d.current,v,i),tt=E,Hl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Tn,d)}catch{}return!0}finally{oe.p=h,X.T=l,Jp(e,n)}}function eg(e,n,i){n=Un(i,n),n=Kh(e.stateNode,n,2),e=Ai(e,n,2),e!==null&&(rs(e,2),Ia(e))}function ot(e,n,i){if(e.tag===3)eg(e,e,i);else for(;n!==null;){if(n.tag===3){eg(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Di===null||!Di.has(l))){e=Un(i,e),i=tp(2),l=Ai(n,i,2),l!==null&&(np(i,l,n,e),rs(l,2),Ia(l));break}}n=n.return}}function xf(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Xb;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(i)||(df=!0,h.add(i),e=Jb.bind(null,e,n,i),n.then(e,e))}function Jb(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,mt===e&&(Ge&i)===i&&(Et===4||Et===3&&(Ge&62914560)===Ge&&300>It()-Nc?(tt&2)===0&&Ar(e,0):mf|=i,Sr===Ge&&(Sr=0)),Ia(e)}function tg(e,n){n===0&&(n=Mo()),e=_s(e,n),e!==null&&(rs(e,n),Ia(e))}function Wb(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),tg(e,i)}function e_(e,n){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),tg(e,i)}function t_(e,n){return $e(e,n)}var jc=null,Nr=null,Tf=!1,kc=!1,Ef=!1,ji=0;function Ia(e){e!==Nr&&e.next===null&&(Nr===null?jc=Nr=e:Nr=Nr.next=e),kc=!0,Tf||(Tf=!0,a_())}function Hl(e,n){if(!Ef&&kc){Ef=!0;do for(var i=!1,l=jc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-wt(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,sg(l,d))}else d=Ge,d=da(l,l===mt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Kn(l,d)||(i=!0,sg(l,d));l=l.next}while(i);Ef=!1}}function n_(){ng()}function ng(){kc=Tf=!1;var e=0;ji!==0&&d_()&&(e=ji);for(var n=It(),i=null,l=jc;l!==null;){var h=l.next,d=ag(l,n);d===0?(l.next=null,i===null?jc=h:i.next=h,h===null&&(Nr=i)):(i=l,(e!==0||(d&3)!==0)&&(kc=!0)),l=h}qt!==0&&qt!==5||Hl(e),ji!==0&&(ji=0)}function ag(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-wt(d),E=1<<v,I=h[v];I===-1?((E&i)===0||(E&l)!==0)&&(h[v]=Zu(E,n)):I<=n&&(e.expiredLanes|=E),d&=~E}if(n=mt,i=Ge,i=da(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(lt===2||lt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&hn(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Kn(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&hn(l),Ua(i)){case 2:case 8:i=it;break;case 32:i=ua;break;case 268435456:i=is;break;default:i=ua}return l=ig.bind(null,e),i=$e(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&hn(l),e.callbackPriority=2,e.callbackNode=null,2}function ig(e,n){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Vc()&&e.callbackNode!==i)return null;var l=Ge;return l=da(e,e===mt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Up(e,l,n),ag(e,It()),e.callbackNode!=null&&e.callbackNode===i?ig.bind(null,e):null)}function sg(e,n){if(Vc())return null;Up(e,n,!0)}function a_(){p_(function(){(tt&6)!==0?$e(ca,n_):ng()})}function Sf(){if(ji===0){var e=dr;e===0&&(e=ha,ha<<=1,(ha&261888)===0&&(ha=256)),ji=e}return ji}function rg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Js(""+e)}function lg(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function i_(e,n,i,l,h){if(n==="submit"&&i&&i.stateNode===h){var d=rg((h[Ft]||null).action),v=l.submitter;v&&(n=(n=v[Ft]||null)?rg(n.formAction):v.getAttribute("formAction"),n!==null&&(d=n,v=null));var E=new Sa("action","action",null,l,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ji!==0){var I=v?lg(h,v):new FormData(h);qh(i,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(E.preventDefault(),I=v?lg(h,v):new FormData(h),qh(i,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var wf=0;wf<rh.length;wf++){var Af=rh[wf],s_=Af.toLowerCase(),r_=Af[0].toUpperCase()+Af.slice(1);aa(s_,"on"+r_)}aa(Bm,"onAnimationEnd"),aa(Um,"onAnimationIteration"),aa(zm,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(Tb,"onTransitionRun"),aa(Eb,"onTransitionStart"),aa(Sb,"onTransitionCancel"),aa(Pm,"onTransitionEnd"),_a("onMouseEnter",["mouseout","mouseover"]),_a("onMouseLeave",["mouseout","mouseover"]),_a("onPointerEnter",["pointerout","pointerover"]),_a("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function og(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],h=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var v=l.length-1;0<=v;v--){var E=l[v],I=E.instance,H=E.currentTarget;if(E=E.listener,I!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=H;try{d(h)}catch(Z){Zo(Z)}h.currentTarget=null,d=I}else for(v=0;v<l.length;v++){if(E=l[v],I=E.instance,H=E.currentTarget,E=E.listener,I!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=H;try{d(h)}catch(Z){Zo(Z)}h.currentTarget=null,d=I}}}}function Pe(e,n){var i=n[Xs];i===void 0&&(i=n[Xs]=new Set);var l=e+"__bubble";i.has(l)||(cg(n,e,2,!1),i.add(l))}function Cf(e,n,i){var l=0;n&&(l|=4),cg(i,e,l,n)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Nf(e){if(!e[Lc]){e[Lc]=!0,al.forEach(function(i){i!=="selectionchange"&&(l_.has(i)||Cf(i,!1,e),Cf(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Lc]||(n[Lc]=!0,Cf("selectionchange",!1,n))}}function cg(e,n,i,l){switch(Bg(n)){case 2:var h=j_;break;case 8:h=k_;break;default:h=qf}i=h.bind(null,n,i,e),h=void 0,!fs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,i,{capture:!0,passive:h}):e.addEventListener(n,i,!0):h!==void 0?e.addEventListener(n,i,{passive:h}):e.addEventListener(n,i,!1)}function Rf(e,n,i,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=ya(E),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=d=v;continue e}E=E.parentNode}}l=l.return}gi(function(){var H=d,Z=jn(i),ee=[];e:{var Q=Gm.get(e);if(Q!==void 0){var K=Sa,_e=e;switch(e){case"keypress":if(ms(i)===0)break e;case"keydown":case"keyup":K=Yo;break;case"focusin":_e="focus",K=gs;break;case"focusout":_e="blur",K=gs;break;case"beforeblur":case"afterblur":K=gs;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case Bm:case Um:case zm:K=Po;break;case Pm:K=A;break;case"scroll":case"scrollend":K=pl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ga;break;case"toggle":case"beforetoggle":K=je}var Ne=(n&4)!==0,ft=!Ne&&(e==="scroll"||e==="scrollend"),z=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var L=H,q;L!==null;){var J=L;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||z===null||(J=Wn(L,z),J!=null&&Ne.push(Ql(L,J,q))),ft)break;L=L.return}0<Ne.length&&(Q=new K(Q,_e,null,i,Z),ee.push({event:Q,listeners:Ne}))}}if((n&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&i!==fl&&(_e=i.relatedTarget||i.fromElement)&&(ya(_e)||_e[pa]))break e;if((K||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(_e=i.relatedTarget||i.toElement,K=H,_e=_e?ya(_e):null,_e!==null&&(ft=c(_e),Ne=_e.tag,_e!==ft||Ne!==5&&Ne!==27&&Ne!==6)&&(_e=null)):(K=null,_e=H),K!==_e)){if(Ne=gl,J="onMouseLeave",z="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=Ga,J="onPointerLeave",z="onPointerEnter",L="pointer"),ft=K==null?Q:En(K),q=_e==null?Q:En(_e),Q=new Ne(J,L+"leave",K,i,Z),Q.target=ft,Q.relatedTarget=q,J=null,ya(Z)===H&&(Ne=new Ne(z,L+"enter",_e,i,Z),Ne.target=q,Ne.relatedTarget=ft,J=Ne),ft=J,K&&_e)t:{for(Ne=o_,z=K,L=_e,q=0,J=z;J;J=Ne(J))q++;J=0;for(var Se=L;Se;Se=Ne(Se))J++;for(;0<q-J;)z=Ne(z),q--;for(;0<J-q;)L=Ne(L),J--;for(;q--;){if(z===L||L!==null&&z===L.alternate){Ne=z;break t}z=Ne(z),L=Ne(L)}Ne=null}else Ne=null;K!==null&&ug(ee,Q,K,Ne,!1),_e!==null&&ft!==null&&ug(ee,ft,_e,Ne,!0)}}e:{if(Q=H?En(H):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var Ze=Cm;else if(wm(Q))if(Nm)Ze=bb;else{Ze=yb;var Te=gb}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&Zs(H.elementType)&&(Ze=Cm):Ze=vb;if(Ze&&(Ze=Ze(e,H))){Am(ee,Ze,i,Z);break e}Te&&Te(e,Q,H),e==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&cl(Q,"number",Q.value)}switch(Te=H?En(H):window,e){case"focusin":(wm(Te)||Te.contentEditable==="true")&&(sr=Te,ah=H,xl=null);break;case"focusout":xl=ah=sr=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,km(ee,i,Z);break;case"selectionchange":if(xb)break;case"keydown":case"keyup":km(ee,i,Z)}var Le;if(et)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ir?ys(e,i)&&(qe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(qe="onCompositionStart");qe&&(Ca&&i.locale!=="ko"&&(ir||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ir&&(Le=ml()):(Ea=Z,dl="value"in Ea?Ea.value:Ea.textContent,ir=!0)),Te=Bc(H,qe),0<Te.length&&(qe=new Aa(qe,e,null,i,Z),ee.push({event:qe,listeners:Te}),Le?qe.data=Le:(Le=ar(i),Le!==null&&(qe.data=Le)))),(Le=Ln?fb(e,i):db(e,i))&&(qe=Bc(H,"onBeforeInput"),0<qe.length&&(Te=new Aa("onBeforeInput","beforeinput",null,i,Z),ee.push({event:Te,listeners:qe}),Te.data=Le)),i_(ee,e,H,i,Z)}og(ee,n)})}function Ql(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Bc(e,n){for(var i=n+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Wn(e,i),h!=null&&l.unshift(Ql(e,h,d)),h=Wn(e,n),h!=null&&l.push(Ql(e,h,d))),e.tag===3)return l;e=e.return}return[]}function o_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ug(e,n,i,l,h){for(var d=n._reactName,v=[];i!==null&&i!==l;){var E=i,I=E.alternate,H=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||H===null||(I=H,h?(H=Wn(i,d),H!=null&&v.unshift(Ql(i,H,I))):h||(H=Wn(i,d),H!=null&&v.push(Ql(i,H,I)))),i=i.return}v.length!==0&&e.push({event:n,listeners:v})}var c_=/\r\n?/g,u_=/\u0000|\uFFFD/g;function hg(e){return(typeof e=="string"?e:""+e).replace(c_,`
`).replace(u_,"")}function fg(e,n){return n=hg(n),hg(e)===n}function ht(e,n,i,l,h,d){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||pn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&pn(e,""+l);break;case"className":Sn(e,"class",l);break;case"tabIndex":Sn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(e,i,l);break;case"style":hl(e,l,d);break;case"data":if(n!=="object"){Sn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Js(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(n!=="input"&&ht(e,n,"name",h.name,h,null),ht(e,n,"formEncType",h.formEncType,h,null),ht(e,n,"formMethod",h.formMethod,h,null),ht(e,n,"formTarget",h.formTarget,h,null)):(ht(e,n,"encType",h.encType,h,null),ht(e,n,"method",h.method,h,null),ht(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Js(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Js(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Pe("beforetoggle",e),Pe("toggle",e),Ks(e,"popover",l);break;case"xlinkActuate":jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ks(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bo.get(i)||i,Ks(e,i,l))}}function Mf(e,n,i,l,h,d){switch(i){case"style":hl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?pn(e,l):(typeof l=="number"||typeof l=="bigint")&&pn(e,""+l);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),n=i.slice(2,h?i.length-7:void 0),d=e[Ft]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,h);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Ks(e,i,l)}}}function tn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",e),Pe("load",e);var l=!1,h=!1,d;for(d in i)if(i.hasOwnProperty(d)){var v=i[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ht(e,n,d,v,i,null)}}h&&ht(e,n,"srcSet",i.srcSet,i,null),l&&ht(e,n,"src",i.src,i,null);return;case"input":Pe("invalid",e);var E=d=v=h=null,I=null,H=null;for(l in i)if(i.hasOwnProperty(l)){var Z=i[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":v=Z;break;case"checked":I=Z;break;case"defaultChecked":H=Z;break;case"value":d=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,n));break;default:ht(e,n,l,Z,i,null)}}jo(e,d,E,I,H,v,h,!1);return;case"select":Pe("invalid",e),l=v=d=null;for(h in i)if(i.hasOwnProperty(h)&&(E=i[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:ht(e,n,h,E,i,null)}n=d,i=v,e.multiple=!!l,n!=null?fi(e,!!l,n,!1):i!=null&&fi(e,!!l,i,!0);return;case"textarea":Pe("invalid",e),d=h=l=null;for(v in i)if(i.hasOwnProperty(v)&&(E=i[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ht(e,n,v,E,i,null)}di(e,l,h,d);return;case"option":for(I in i)if(i.hasOwnProperty(I)&&(l=i[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ht(e,n,I,l,i,null)}return;case"dialog":Pe("beforetoggle",e),Pe("toggle",e),Pe("cancel",e),Pe("close",e);break;case"iframe":case"object":Pe("load",e);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Pe(Fl[l],e);break;case"image":Pe("error",e),Pe("load",e);break;case"details":Pe("toggle",e);break;case"embed":case"source":case"link":Pe("error",e),Pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(l=i[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ht(e,n,H,l,i,null)}return;default:if(Zs(n)){for(Z in i)i.hasOwnProperty(Z)&&(l=i[Z],l!==void 0&&Mf(e,n,Z,l,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(l=i[E],l!=null&&ht(e,n,E,l,i,null))}function h_(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,I=null,H=null,Z=null;for(K in i){var ee=i[K];if(i.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=ee;default:l.hasOwnProperty(K)||ht(e,n,K,null,l,ee)}}for(var Q in l){var K=l[Q];if(ee=i[Q],l.hasOwnProperty(Q)&&(K!=null||ee!=null))switch(Q){case"type":d=K;break;case"name":h=K;break;case"checked":H=K;break;case"defaultChecked":Z=K;break;case"value":v=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==ee&&ht(e,n,Q,K,l,ee)}}$s(e,v,E,I,H,Z,d,h);return;case"select":K=v=E=Q=null;for(d in i)if(I=i[d],i.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":K=I;default:l.hasOwnProperty(d)||ht(e,n,d,null,l,I)}for(h in l)if(d=l[h],I=i[h],l.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":Q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==I&&ht(e,n,h,d,l,I)}n=E,i=v,l=K,Q!=null?fi(e,!!i,Q,!1):!!l!=!!i&&(n!=null?fi(e,!!i,n,!0):fi(e,!!i,i?[]:"",!1));return;case"textarea":K=Q=null;for(E in i)if(h=i[E],i.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ht(e,n,E,null,l,h)}for(v in l)if(h=l[v],d=i[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":Q=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ht(e,n,v,h,l,d)}ko(e,Q,K);return;case"option":for(var _e in i)if(Q=i[_e],i.hasOwnProperty(_e)&&Q!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:ht(e,n,_e,null,l,Q)}for(I in l)if(Q=l[I],K=i[I],l.hasOwnProperty(I)&&Q!==K&&(Q!=null||K!=null))switch(I){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ht(e,n,I,Q,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in i)Q=i[Ne],i.hasOwnProperty(Ne)&&Q!=null&&!l.hasOwnProperty(Ne)&&ht(e,n,Ne,null,l,Q);for(H in l)if(Q=l[H],K=i[H],l.hasOwnProperty(H)&&Q!==K&&(Q!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:ht(e,n,H,Q,l,K)}return;default:if(Zs(n)){for(var ft in i)Q=i[ft],i.hasOwnProperty(ft)&&Q!==void 0&&!l.hasOwnProperty(ft)&&Mf(e,n,ft,void 0,l,Q);for(Z in l)Q=l[Z],K=i[Z],!l.hasOwnProperty(Z)||Q===K||Q===void 0&&K===void 0||Mf(e,n,Z,Q,l,K);return}}for(var z in i)Q=i[z],i.hasOwnProperty(z)&&Q!=null&&!l.hasOwnProperty(z)&&ht(e,n,z,null,l,Q);for(ee in l)Q=l[ee],K=i[ee],!l.hasOwnProperty(ee)||Q===K||Q==null&&K==null||ht(e,n,ee,Q,l,K)}function dg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var h=i[l],d=h.transferSize,v=h.initiatorType,E=h.duration;if(d&&E&&dg(v)){for(v=0,E=h.responseEnd,l+=1;l<i.length;l++){var I=i[l],H=I.startTime;if(H>E)break;var Z=I.transferSize,ee=I.initiatorType;Z&&dg(ee)&&(I=I.responseEnd,v+=Z*(I<E?1:(E-H)/(I-H)))}if(--l,n+=8*(d+v)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var If=null,Df=null;function Uc(e){return e.nodeType===9?e:e.ownerDocument}function mg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Of(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vf=null;function d_(){var e=window.event;return e&&e.type==="popstate"?e===Vf?!1:(Vf=e,!0):(Vf=null,!1)}var gg=typeof setTimeout=="function"?setTimeout:void 0,m_=typeof clearTimeout=="function"?clearTimeout:void 0,yg=typeof Promise=="function"?Promise:void 0,p_=typeof queueMicrotask=="function"?queueMicrotask:typeof yg<"u"?function(e){return yg.resolve(null).then(e).catch(g_)}:gg;function g_(e){setTimeout(function(){throw e})}function ki(e){return e==="head"}function vg(e,n){var i=n,l=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(h),Dr(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Xl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Xl(i);for(var d=i.firstChild;d;){var v=d.nextSibling,E=d.nodeName;d[ga]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=v}}else i==="body"&&Xl(e.ownerDocument.body);i=h}while(i);Dr(n)}function bg(e,n){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function jf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":jf(i),Ys(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function y_(e,n,i,l){for(;e.nodeType===1;){var h=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ga])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function v_(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Hn(e.nextSibling),e===null))return null;return e}function _g(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Hn(e.nextSibling),e===null))return null;return e}function kf(e){return e.data==="$?"||e.data==="$~"}function Lf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function b_(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Hn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bf=null;function xg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Hn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function Tg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function Eg(e,n,i){switch(n=Uc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Xl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ys(e)}var Fn=new Map,Sg=new Set;function zc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ai=oe.d;oe.d={f:__,r:x_,D:T_,C:E_,L:S_,m:w_,X:C_,S:A_,M:N_};function __(){var e=ai.f(),n=Ic();return e||n}function x_(e){var n=Vn(e);n!==null&&n.tag===5&&n.type==="form"?P0(n):ai.r(e)}var Rr=typeof document>"u"?null:document;function wg(e,n,i){var l=Rr;if(l&&typeof n=="string"&&n){var h=mn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),Sg.has(h)||(Sg.add(h),e={rel:e,crossOrigin:i,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function T_(e){ai.D(e),wg("dns-prefetch",e,null)}function E_(e,n){ai.C(e,n),wg("preconnect",e,n)}function S_(e,n,i){ai.L(e,n,i);var l=Rr;if(l&&e&&n){var h='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+mn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+mn(i.imageSizes)+'"]')):h+='[href="'+mn(e)+'"]';var d=h;switch(n){case"style":d=Mr(e);break;case"script":d=Ir(e)}Fn.has(d)||(e=T({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Fn.set(d,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(Yl(d))||n==="script"&&l.querySelector(Kl(d))||(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function w_(e,n){ai.m(e,n);var i=Rr;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+mn(l)+'"][href="'+mn(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ir(e)}if(!Fn.has(d)&&(e=T({rel:"modulepreload",href:e},n),Fn.set(d,e),i.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Kl(d)))return}l=i.createElement("link"),tn(l,"link",e),Vt(l),i.head.appendChild(l)}}}function A_(e,n,i){ai.S(e,n,i);var l=Rr;if(l&&e){var h=va(l).hoistableStyles,d=Mr(e);n=n||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Yl(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Fn.get(d))&&Uf(e,i);var I=v=l.createElement("link");Vt(I),tn(I,"link",e),I._p=new Promise(function(H,Z){I.onload=H,I.onerror=Z}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Pc(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function C_(e,n){ai.X(e,n);var i=Rr;if(i&&e){var l=va(i).hoistableScripts,h=Ir(e),d=l.get(h);d||(d=i.querySelector(Kl(h)),d||(e=T({src:e,async:!0},n),(n=Fn.get(h))&&zf(e,n),d=i.createElement("script"),Vt(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function N_(e,n){ai.M(e,n);var i=Rr;if(i&&e){var l=va(i).hoistableScripts,h=Ir(e),d=l.get(h);d||(d=i.querySelector(Kl(h)),d||(e=T({src:e,async:!0,type:"module"},n),(n=Fn.get(h))&&zf(e,n),d=i.createElement("script"),Vt(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Ag(e,n,i,l){var h=(h=be.current)?zc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Mr(i.href),i=va(h).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Mr(i.href);var d=va(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(Yl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Fn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Fn.set(e,i),d||R_(h,e,i,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ir(i),i=va(h).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Mr(e){return'href="'+mn(e)+'"'}function Yl(e){return'link[rel="stylesheet"]['+e+"]"}function Cg(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function R_(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),tn(n,"link",i),Vt(n),e.head.appendChild(n))}function Ir(e){return'[src="'+mn(e)+'"]'}function Kl(e){return"script[async]"+e}function Ng(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+mn(i.href)+'"]');if(l)return n.instance=l,Vt(l),l;var h=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Vt(l),tn(l,"style",h),Pc(l,i.precedence,e),n.instance=l;case"stylesheet":h=Mr(i.href);var d=e.querySelector(Yl(h));if(d)return n.state.loading|=4,n.instance=d,Vt(d),d;l=Cg(i),(h=Fn.get(h))&&Uf(l,h),d=(e.ownerDocument||e).createElement("link"),Vt(d);var v=d;return v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),tn(d,"link",l),n.state.loading|=4,Pc(d,i.precedence,e),n.instance=d;case"script":return d=Ir(i.src),(h=e.querySelector(Kl(d)))?(n.instance=h,Vt(h),h):(l=i,(h=Fn.get(d))&&(l=T({},i),zf(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),Vt(h),tn(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Pc(l,i.precedence,e));return n.instance}function Pc(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===n)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Uf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Gc=null;function Rg(e,n,i){if(Gc===null){var l=new Map,h=Gc=new Map;h.set(i,l)}else h=Gc,l=h.get(i),l||(l=new Map,h.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),h=0;h<i.length;h++){var d=i[h];if(!(d[ga]||d[Ot]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(n)||"";v=e+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function Mg(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function M_(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ig(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function I_(e,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Mr(l.href),d=n.querySelector(Yl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=qc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=d,Vt(d);return}d=n.ownerDocument||n,l=Cg(l),(h=Fn.get(h))&&Uf(l,h),d=d.createElement("link"),Vt(d);var v=d;v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),tn(d,"link",l),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=qc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Pf=0;function D_(e,n){return e.stylesheets&&e.count===0&&Fc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Fc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Pf===0&&(Pf=62500*f_());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Pf?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hc=null;function Fc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hc=new Map,n.forEach(O_,e),Hc=null,qc.call(e))}function O_(e,n){if(!(n.state.loading&4)){var i=Hc.get(e);if(i)var l=i.get(null);else{i=new Map,Hc.set(e,i);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}h=n.instance,v=h.getAttribute("data-precedence"),d=i.get(v)||l,d===l&&i.set(null,h),i.set(v,h),this.count++,l=qc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var $l={$$typeof:$,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function V_(e,n,i,l,h,d,v,E,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Dg(e,n,i,l,h,d,v,E,I,H,Z,ee){return e=new V_(e,n,i,v,I,H,Z,ee,E),n=1,d===!0&&(n|=24),d=An(3,null,null,n),e.current=d,d.stateNode=e,n=bh(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:i,cache:n},Eh(d),e}function Og(e){return e?(e=or,e):or}function Vg(e,n,i,l,h,d){h=Og(h),l.context===null?l.context=h:l.pendingContext=h,l=wi(n),l.payload={element:i},d=d===void 0?null:d,d!==null&&(l.callback=d),i=Ai(e,l,n),i!==null&&(_n(i,e,n),Nl(i,e,n))}function jg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Gf(e,n){jg(e,n),(e=e.alternate)&&jg(e,n)}function kg(e){if(e.tag===13||e.tag===31){var n=_s(e,67108864);n!==null&&_n(n,e,67108864),Gf(e,67108864)}}function Lg(e){if(e.tag===13||e.tag===31){var n=In();n=os(n);var i=_s(e,n);i!==null&&_n(i,e,n),Gf(e,n)}}var Qc=!0;function j_(e,n,i,l){var h=X.T;X.T=null;var d=oe.p;try{oe.p=2,qf(e,n,i,l)}finally{oe.p=d,X.T=h}}function k_(e,n,i,l){var h=X.T;X.T=null;var d=oe.p;try{oe.p=8,qf(e,n,i,l)}finally{oe.p=d,X.T=h}}function qf(e,n,i,l){if(Qc){var h=Hf(l);if(h===null)Rf(e,n,l,Xc,i),Ug(e,l);else if(B_(h,e,n,i,l))l.stopPropagation();else if(Ug(e,l),n&4&&-1<L_.indexOf(e)){for(;h!==null;){var d=Vn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=fa(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var I=1<<31-wt(v);E.entanglements[1]|=I,v&=~I}Ia(d),(tt&6)===0&&(Rc=It()+500,Hl(0))}}break;case 31:case 13:E=_s(d,2),E!==null&&_n(E,d,2),Ic(),Gf(d,2)}if(d=Hf(l),d===null&&Rf(e,n,l,Xc,i),d===h)break;h=d}h!==null&&l.stopPropagation()}else Rf(e,n,l,null,i)}}function Hf(e){return e=jn(e),Ff(e)}var Xc=null;function Ff(e){if(Xc=null,e=ya(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=f(n),e!==null)return e;e=null}else if(i===31){if(e=m(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Xc=e,null}function Bg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case ca:return 2;case it:return 8;case ua:case Hs:return 32;case is:return 268435456;default:return 32}default:return 32}}var Qf=!1,Li=null,Bi=null,Ui=null,Zl=new Map,Jl=new Map,zi=[],L_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ug(e,n){switch(e){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(n.pointerId)}}function Wl(e,n,i,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Vn(n),n!==null&&kg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function B_(e,n,i,l,h){switch(n){case"focusin":return Li=Wl(Li,e,n,i,l,h),!0;case"dragenter":return Bi=Wl(Bi,e,n,i,l,h),!0;case"mouseover":return Ui=Wl(Ui,e,n,i,l,h),!0;case"pointerover":var d=h.pointerId;return Zl.set(d,Wl(Zl.get(d)||null,e,n,i,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Jl.set(d,Wl(Jl.get(d)||null,e,n,i,l,h)),!0}return!1}function zg(e){var n=ya(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=f(i),n!==null){e.blockedOn=n,$n(e.priority,function(){Lg(i)});return}}else if(n===31){if(n=m(i),n!==null){e.blockedOn=n,$n(e.priority,function(){Lg(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Hf(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);fl=l,i.target.dispatchEvent(l),fl=null}else return n=Vn(i),n!==null&&kg(n),e.blockedOn=i,!1;n.shift()}return!0}function Pg(e,n,i){Yc(e)&&i.delete(n)}function U_(){Qf=!1,Li!==null&&Yc(Li)&&(Li=null),Bi!==null&&Yc(Bi)&&(Bi=null),Ui!==null&&Yc(Ui)&&(Ui=null),Zl.forEach(Pg),Jl.forEach(Pg)}function Kc(e,n){e.blockedOn===n&&(e.blockedOn=null,Qf||(Qf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,U_)))}var $c=null;function Gg(e){$c!==e&&($c=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$c===e&&($c=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(Ff(l||i)===null)continue;break}var d=Vn(i);d!==null&&(e.splice(n,3),n-=3,qh(d,{pending:!0,data:h,method:i.method,action:l},l,h))}}))}function Dr(e){function n(I){return Kc(I,e)}Li!==null&&Kc(Li,e),Bi!==null&&Kc(Bi,e),Ui!==null&&Kc(Ui,e),Zl.forEach(n),Jl.forEach(n);for(var i=0;i<zi.length;i++){var l=zi[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<zi.length&&(i=zi[0],i.blockedOn===null);)zg(i),i.blockedOn===null&&zi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var h=i[l],d=i[l+1],v=h[Ft]||null;if(typeof d=="function")v||Gg(i);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ft]||null)E=v.formAction;else if(Ff(h)!==null)continue}else E=v.action;typeof E=="function"?i[l+1]=E:(i.splice(l,3),l-=3),Gg(i)}}}function qg(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Xf(e){this._internalRoot=e}Zc.prototype.render=Xf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,l=In();Vg(i,l,e,n,null,null)},Zc.prototype.unmount=Xf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Vg(e.current,2,null,e,null,null),Ic(),n[pa]=null}};function Zc(e){this._internalRoot=e}Zc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Io();e={blockedOn:null,target:e,priority:n};for(var i=0;i<zi.length&&n!==0&&n<zi[i].priority;i++);zi.splice(i,0,e),i===0&&zg(e)}};var Hg=t.version;if(Hg!=="19.2.1")throw Error(s(527,Hg,"19.2.1"));oe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var z_={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{Tn=Jc.inject(z_),$t=Jc}catch{}}return eo.createRoot=function(e,n){if(!o(e))throw Error(s(299));var i=!1,l="",h=Z0,d=J0,v=W0;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Dg(e,1,!1,null,null,i,l,null,h,d,v,qg),e[pa]=n.current,Nf(e),new Xf(n)},eo.hydrateRoot=function(e,n,i){if(!o(e))throw Error(s(299));var l=!1,h="",d=Z0,v=J0,E=W0,I=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(I=i.formState)),n=Dg(e,1,!0,n,i??null,l,h,I,d,v,E,qg),n.context=Og(null),i=n.current,l=In(),l=os(l),h=wi(l),h.callback=null,Ai(i,h,l),i=l,n.current.lanes=i,rs(n,i),Ia(n),e[pa]=n.current,Nf(e),new Zc(n)},eo.version="19.2.1",eo}var Yg;function X_(){if(Yg)return Yf.exports;Yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Yf.exports=Q_(),Yf.exports}var Y_=X_();function K_(r,t){let a;try{a=r()}catch{return}return{getItem:o=>{var c;const f=p=>p===null?null:JSON.parse(p,void 0),m=(c=a.getItem(o))!=null?c:null;return m instanceof Promise?m.then(f):f(m)},setItem:(o,c)=>a.setItem(o,JSON.stringify(c,void 0)),removeItem:o=>a.removeItem(o)}}const hd=r=>t=>{try{const a=r(t);return a instanceof Promise?a:{then(s){return hd(s)(a)},catch(s){return this}}}catch(a){return{then(s){return this},catch(s){return hd(s)(a)}}}},$_=(r,t)=>(a,s,o)=>{let c={storage:K_(()=>localStorage),partialize:F=>F,version:0,merge:(F,U)=>({...U,...F}),...t},f=!1;const m=new Set,p=new Set;let b=c.storage;if(!b)return r((...F)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...F)},s,o);const x=()=>{const F=c.partialize({...s()});return b.setItem(c.name,{state:F,version:c.version})},T=o.setState;o.setState=(F,U)=>(T(F,U),x());const w=r((...F)=>(a(...F),x()),s,o);o.getInitialState=()=>w;let O;const k=()=>{var F,U;if(!b)return;f=!1,m.forEach(W=>{var $;return W(($=s())!=null?$:w)});const j=((U=c.onRehydrateStorage)==null?void 0:U.call(c,(F=s())!=null?F:w))||void 0;return hd(b.getItem.bind(b))(c.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==c.version){if(c.migrate){const $=c.migrate(W.state,W.version);return $ instanceof Promise?$.then(se=>[!0,se]):[!0,$]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var $;const[se,ce]=W;if(O=c.merge(ce,($=s())!=null?$:w),a(O,!0),se)return x()}).then(()=>{j?.(O,void 0),O=s(),f=!0,p.forEach(W=>W(O))}).catch(W=>{j?.(void 0,W)})};return o.persist={setOptions:F=>{c={...c,...F},F.storage&&(b=F.storage)},clearStorage:()=>{b?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>k(),hasHydrated:()=>f,onHydrate:F=>(m.add(F),()=>{m.delete(F)}),onFinishHydration:F=>(p.add(F),()=>{p.delete(F)})},c.skipHydration||k(),O||w},vv=$_,nn=[];for(let r=0;r<256;++r)nn.push((r+256).toString(16).slice(1));function Z_(r,t=0){return(nn[r[t+0]]+nn[r[t+1]]+nn[r[t+2]]+nn[r[t+3]]+"-"+nn[r[t+4]]+nn[r[t+5]]+"-"+nn[r[t+6]]+nn[r[t+7]]+"-"+nn[r[t+8]]+nn[r[t+9]]+"-"+nn[r[t+10]]+nn[r[t+11]]+nn[r[t+12]]+nn[r[t+13]]+nn[r[t+14]]+nn[r[t+15]]).toLowerCase()}let Zf;const J_=new Uint8Array(16);function W_(){if(!Zf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zf=crypto.getRandomValues.bind(crypto)}return Zf(J_)}const ex=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kg={randomUUID:ex};function tx(r,t,a){r=r||{};const s=r.random??r.rng?.()??W_();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Z_(s)}function Wc(r,t,a){return Kg.randomUUID&&!r?Kg.randomUUID():tx(r)}const me={COLUMNS:8,ROWS:16,CELL_SIZE:40},Jf={1:["red","blue","green","yellow","purple"],6:["red","blue","green","yellow","purple","cyan"],11:["red","blue","green","yellow","purple","cyan","pink"],16:["red","blue","green","yellow","purple","cyan","pink","orange"]},Bd={red:"#ff4757",blue:"#3742fa",green:"#2ed573",yellow:"#ffa502",purple:"#8854d0",cyan:"#00d2d3",pink:"#ff6b81",orange:"#ff7f50",rainbow:"linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff)"},nx={red:"#D55E00",blue:"#0072B2",green:"#009E73",yellow:"#F0E442",purple:"#CC79A7",cyan:"#56B4E9",pink:"#E69F00",orange:"#999999",rainbow:"linear-gradient(45deg, #D55E00, #0072B2, #009E73, #F0E442)"},ax={red:"striped",blue:"dotted",green:"crosshatch",yellow:"solid",purple:"diagonal",cyan:"grid",pink:"waves",orange:"circles",rainbow:"rainbow"},bv={normal:{name:"",icon:"",description:" ",baseChance:0,minLevel:1},bomb:{name:"",icon:"",description:" 3x3  ",baseChance:.05,minLevel:3,color:"#ff6b6b"},lightning:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:5,color:"#ffd93d"},cross:{name:"",icon:"",description:"    ",baseChance:.04,minLevel:4,color:"#6bcb77"},frozen:{name:"",icon:"",description:"2  ",baseChance:.06,minLevel:2,color:"#74b9ff"},stone:{name:"",icon:"",description:" ,    ",baseChance:.03,minLevel:6,color:"#636e72"},multiplier:{name:"",icon:"",description:"      2",baseChance:.035,minLevel:4,color:"#fdcb6e"},shuffle:{name:"",icon:"",description:"   3x3   ",baseChance:.02,minLevel:8,color:"#a29bfe"},colorShift:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:7,color:"#fd79a8"}},qi={BASE_DROP_SPEED:600,SPEED_DECREASE_PER_LEVEL:40,MIN_DROP_SPEED:80,FUSION_ANIMATION_DURATION:180,CHAIN_DELAY:120,COMBO_TIMEOUT:2e3,SPECIAL_EFFECT_DURATION:300,GARBAGE_INTERVAL:25},Da={BASE_POINTS_PER_BLOCK:10,CHAIN_BONUS_MULTIPLIER:150,COMBO_BONUS:75,MASS_FUSION_THRESHOLD:6,MASS_FUSION_BONUS_PER_BLOCK:30,PERFECT_CLEAR_BONUS:15e3,LEVEL_UP_THRESHOLD:1e3,SPECIAL_BLOCK_BONUS:50,FEVER_MULTIPLIER:3},fd={MIN_BLOCKS_TO_FUSE:4,BOMB_RADIUS:1};function ix(r){return fd.MIN_BLOCKS_TO_FUSE}const Vs={GAUGE_PER_CHAIN:10,GAUGE_PER_COMBO:5,MAX_GAUGE:100,DECAY_RATE:2},Ls={SPECIAL_CHANCE_PER_LEVEL:.006,GARBAGE_START_LEVEL:5,GARBAGE_ROWS_PER_INTERVAL:1,GARBAGE_MAX_ROWS:3,GARBAGE_INTERVAL_DECREASE:.5,GARBAGE_MIN_INTERVAL:10};function $g(r){return r>=30?8:r>=25?7:r>=20?6:r>=15?5:r>=10?4:r>=5?3:r>=3?2:1}const sx=[{offsets:[[0,0],[1,0]],name:"horizontal"},{offsets:[[0,0],[0,1]],name:"vertical"}],rx=[{offsets:[[0,0],[1,0],[2,0]],name:"line-h"},{offsets:[[0,0],[0,1],[0,2]],name:"line-v"},{offsets:[[0,0],[1,0],[1,1]],name:"L-right"},{offsets:[[0,0],[0,1],[1,1]],name:"L-left"},{offsets:[[1,0],[0,1],[1,1]],name:"L-up"},{offsets:[[0,0],[1,0],[0,1]],name:"corner"}],lx=[{offsets:[[0,0],[1,0],[2,0],[3,0]],name:"line-h4"},{offsets:[[0,0],[0,1],[0,2],[0,3]],name:"line-v4"},{offsets:[[0,0],[1,0],[0,1],[1,1]],name:"square"},{offsets:[[1,0],[0,1],[1,1],[2,1]],name:"T-down"},{offsets:[[0,0],[0,1],[1,1],[0,2]],name:"T-right"},{offsets:[[0,0],[1,0],[1,1],[2,1]],name:"zigzag"},{offsets:[[1,0],[0,1],[1,1],[1,2]],name:"plus"},{offsets:[[0,0],[1,0],[2,0],[1,1]],name:"arrow"}],ox=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0]],name:"line-h5"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2]],name:"L-big"},{offsets:[[0,0],[1,0],[2,0],[1,1],[1,2]],name:"T-long"},{offsets:[[1,0],[0,1],[1,1],[2,1],[1,2]],name:"cross"},{offsets:[[0,0],[1,0],[1,1],[2,1],[3,1]],name:"snake"},{offsets:[[0,0],[0,1],[1,1],[1,2],[2,2]],name:"stairs"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1]],name:"P-shape"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1]],name:"U-shape"}],cx=[{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1]],name:"rect-2x3"},{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0]],name:"line-h6"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"tree"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2],[0,3]],name:"L-huge"},{offsets:[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],name:"tower"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"H-shape"}],ux=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0]],name:"line-h7"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],name:"diamond"},{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"arrow-big"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"window"},{offsets:[[1,0],[0,1],[1,1],[2,1],[3,1],[1,2],[1,3]],name:"anchor"}],hx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[0,1],[1,1],[2,1],[3,1]],name:"rect-2x4"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[3,1],[1,2],[2,2]],name:"bone"},{offsets:[[0,0],[1,0],[2,0],[0,1],[2,1],[0,2],[1,2],[2,2]],name:"frame"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2],[1,3]],name:"big-cross"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1],[3,1],[2,2],[3,2]],name:"zigzag-big"}];function fx(r){let t;switch(r){case 2:t=sx;break;case 3:t=rx;break;case 4:t=lx;break;case 5:t=ox;break;case 6:t=cx;break;case 7:t=ux;break;case 8:t=hx;break;default:return{offsets:[[0,0]],name:"single"}}return t[Math.floor(Math.random()*t.length)]}function dx(r){const t=qi.GARBAGE_INTERVAL-(r-Ls.GARBAGE_START_LEVEL)*Ls.GARBAGE_INTERVAL_DECREASE;return Math.max(t,Ls.GARBAGE_MIN_INTERVAL)}function Zg(r){const t=[];return t.push({type:"score",target:r*500+(r-1)*200,current:0,completed:!1}),r>=3&&t.push({type:"clearBlocks",target:20+r*5,current:0,completed:!1}),r>=5&&t.push({type:"chains",target:Math.min(3+Math.floor(r/3),8),current:0,completed:!1}),r>=7&&t.push({type:"clearSpecial",target:3+Math.floor(r/4),current:0,completed:!1}),r>=10&&t.push({type:"clearStone",target:2+Math.floor(r/5),current:0,completed:!1}),t}const pu={getMovesForLevel:r=>Math.max(10,25-Math.floor(r/2)),getTargetScore:r=>500+r*300+Math.floor(r/3)*200,getTargetBlocks:r=>15+r*5,getColorCount:r=>r<=3?4:r<=6?5:r<=10?6:7};function Jg(r){const t=[];if(t.push({type:"score",target:pu.getTargetScore(r),current:0,completed:!1}),r>=2&&t.push({type:"clearBlocks",target:pu.getTargetBlocks(r),current:0,completed:!1}),r>=5&&t.push({type:"chains",target:2+Math.floor(r/3),current:0,completed:!1}),r>=8){const a=["red","blue","green","yellow","purple"],s=a[r%a.length];t.push({type:"clearColor",target:10+r,current:0,color:s,completed:!1})}return t}const mx={colorBomb:{name:" ",description:"    ",icon:"",price:{coins:500,gems:20}},rowClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},columnClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},gravityShift:{name:" ",description:"  ",icon:"",price:{coins:600,gems:25}},timeSlow:{name:" ",description:"5 50%  ",icon:"",price:{coins:300,gems:10}},rainbowBlock:{name:" ",description:"    ",icon:"",price:{coins:800,gems:30}},scoreMultiplier:{name:" ",description:"30  2",icon:"",price:{coins:700,gems:28}},blockPreview:{name:"",description:"10  ",icon:"",price:{coins:200,gems:8}},undo:{name:"",description:" 3 ",icon:"",price:{coins:500,gems:20}},freeze:{name:"",description:"5   ",icon:"",price:{coins:400,gems:15}}},dd={down:{dx:0,dy:1},up:{dx:0,dy:-1},left:{dx:-1,dy:0},right:{dx:1,dy:0}},px={down:"",up:"",left:"",right:""},gx=5,_v={classic:{name:"",description:" !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1},timeAttack:{name:"",description:"2   !",icon:"",hasTimeLimit:!0,timeLimit:120,hasLevelLimit:!1},puzzle:{name:"",description:"   ",icon:"",hasTimeLimit:!1,hasLevelLimit:!0,movesLimit:30},zen:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,noGameOver:!0},daily:{name:" ",description:"  !",icon:"",hasTimeLimit:!0,timeLimit:180,hasLevelLimit:!1},survival:{name:"",description:"  !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,speedIncrease:!0},challenge:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,hasObjectives:!0}},Gi={SWIPE_THRESHOLD:30,FAST_SWIPE_VELOCITY:1e3,LONG_PRESS_DURATION:500,DOUBLE_TAP_DELAY:300},yx={light:[10],medium:[20],heavy:[30],success:[10,50,20],error:[30,50,30],selection:[5]};function Ud(r){const t=Object.keys(Jf).map(Number).sort((a,s)=>s-a);for(const a of t)if(r>=a)return Jf[a];return Jf[1]}function Wg(r){const t=qi.BASE_DROP_SPEED-(r-1)*qi.SPEED_DECREASE_PER_LEVEL;return Math.max(t,qi.MIN_DROP_SPEED)}function vx(r){return Da.LEVEL_UP_THRESHOLD*r+(r-1)*200}function bx(r){return Math.min(.15,.05+r*Ls.SPECIAL_CHANCE_PER_LEVEL)}function ey(r){const t=Object.entries(bv).filter(([o,c])=>o!=="normal"&&r>=c.minLevel).map(([o,c])=>({type:o,chance:c.baseChance}));if(t.length===0)return"normal";const a=t.reduce((o,c)=>o+c.chance,0);let s=Math.random()*a;for(const{type:o,chance:c}of t)if(s-=c,s<=0)return o;return t[0].type}function _x(r){const{blocksCleared:t,chainCount:a,comboCount:s,level:o,powerUpMultiplier:c,perfectClear:f,isFeverMode:m=!1,specialBlocksCleared:p=0}=r;let b=t*Da.BASE_POINTS_PER_BLOCK*o;const x=a>1?Math.pow(a,2.5)*Da.CHAIN_BONUS_MULTIPLIER:0,T=s*Da.COMBO_BONUS*(1+s*.1),w=t>=Da.MASS_FUSION_THRESHOLD?t*Da.MASS_FUSION_BONUS_PER_BLOCK*Math.floor(t/Da.MASS_FUSION_THRESHOLD):0,O=p*Da.SPECIAL_BLOCK_BONUS*o,k=f?Da.PERFECT_CLEAR_BONUS*o:0,F=m?Da.FEVER_MULTIPLIER:1;return Math.floor((b+x+T+w+O+k)*c*F)}const xx=[{id:"score_10k",name:"",description:"10,000 ",category:"score",target:1e4,reward:{gems:10},icon:""},{id:"score_50k",name:"",description:"50,000 ",category:"score",target:5e4,reward:{gems:25},icon:""},{id:"score_100k",name:"",description:"100,000 ",category:"score",target:1e5,reward:{gems:50},icon:""},{id:"score_500k",name:"",description:"500,000 ",category:"score",target:5e5,reward:{gems:100},icon:""},{id:"score_1m",name:"",description:"1,000,000 ",category:"score",target:1e6,reward:{gems:200,skin:"score_master"},icon:""},{id:"score_5m",name:"",description:"5,000,000 ",category:"score",target:5e6,reward:{gems:500},icon:""},{id:"score_10m",name:"",description:"10,000,000 ",category:"score",target:1e7,reward:{gems:1e3,skin:"mythic_legend"},icon:""},{id:"combo_10",name:" ",description:"10  ",category:"combo",target:10,reward:{gems:10},icon:""},{id:"combo_20",name:" ",description:"20  ",category:"combo",target:20,reward:{gems:25},icon:""},{id:"combo_30",name:" ",description:"30  ",category:"combo",target:30,reward:{gems:50},icon:""},{id:"combo_50",name:" ",description:"50  ",category:"combo",target:50,reward:{gems:100,skin:"combo_legend"},icon:""},{id:"combo_100",name:" ",description:"100  ",category:"combo",target:100,reward:{gems:300},icon:""},{id:"chain_5",name:" ",description:"5 ",category:"chain",target:5,reward:{gems:15},icon:""},{id:"chain_10",name:" ",description:"10 ",category:"chain",target:10,reward:{gems:50},icon:""},{id:"chain_15",name:" ",description:"15 ",category:"chain",target:15,reward:{gems:150,skin:"chain_master"},icon:""},{id:"chain_20",name:" ",description:"20 ",category:"chain",target:20,reward:{gems:300},icon:""},{id:"perfect_clear",name:"!",description:"  ",category:"special",target:1,reward:{gems:100},icon:""},{id:"comeback",name:" ",description:"  ",category:"special",target:1,reward:{gems:75},icon:""},{id:"speed_demon",name:" ",description:"1  50,000",category:"special",target:1,reward:{gems:100},icon:""},{id:"no_powerup",name:"",description:"   20",category:"special",target:1,reward:{gems:150},icon:""},{id:"all_colors",name:"",description:"5   ",category:"special",target:1,reward:{gems:50},icon:""},{id:"first_blood",name:" ",description:"  ",category:"special",target:1,reward:{gems:5},icon:""},{id:"marathon",name:"",description:"30  ",category:"special",target:1,reward:{gems:80},icon:""},{id:"games_10",name:"",description:"10 ",category:"play",target:10,reward:{coins:500},icon:""},{id:"games_100",name:"",description:"100 ",category:"play",target:100,reward:{gems:50},icon:""},{id:"games_500",name:"",description:"500 ",category:"play",target:500,reward:{gems:200},icon:""},{id:"games_1000",name:"",description:"1000 ",category:"play",target:1e3,reward:{gems:500},icon:""},{id:"time_1h",name:"",description:" 1 ",category:"play",target:3600,reward:{coins:1e3},icon:""},{id:"time_10h",name:"",description:" 10 ",category:"play",target:36e3,reward:{gems:100},icon:""},{id:"time_100h",name:" ",description:" 100 ",category:"play",target:36e4,reward:{gems:1e3,skin:"veteran"},icon:""},{id:"secret_gravity",name:"???",description:"   ",category:"hidden",target:1,reward:{gems:50},icon:""},{id:"secret_lucky",name:"???",description:" 3  ",category:"hidden",target:1,reward:{gems:100},icon:""},{id:"secret_developer",name:"???",description:"  ",category:"hidden",target:1,reward:{gems:200},icon:""}];function Tx(){return xx.map(r=>({...r,current:0,completed:!1,claimed:!1}))}const fo={classic:{colors:["#ff6b7a","#5b6dff","#4ade80","#ffc532","#a578e8"],borderRadius:"6px",borderWidth:0,borderStyle:"none",innerEffect:"glossy",animation:"shimmer",glowIntensity:.15,texture:"none"},neon:{colors:["#ff2d92","#00f5ff","#4dff4d","#fff44f","#e040fb"],borderRadius:"4px",borderWidth:3,borderStyle:"solid",innerEffect:"glow",animation:"pulse",glowIntensity:1,texture:"circuit"},candy:{colors:["#ff85b3","#c084fc","#5eead4","#fcd34d","#fb7185"],borderRadius:"50%",borderWidth:4,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.4,texture:"dots"},pixel:{colors:["#ef4444","#3b82f6","#22c55e","#eab308","#8b5cf6"],borderRadius:"0px",borderWidth:4,borderStyle:"solid",innerEffect:"flat",animation:"none",glowIntensity:.1,texture:"lines"},galaxy:{colors:["#a78bfa","#f472b6","#22d3ee","#fb7185","#60a5fa"],borderRadius:"8px",borderWidth:2,borderStyle:"solid",innerEffect:"gradient",animation:"shimmer",particleEffect:!0,glowIntensity:.7,texture:"dots"},crystal:{colors:["#f5d0fe","#bae6fd","#bbf7d0","#fef9c3","#fecdd3"],borderRadius:"10px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.85,texture:"cracks"},holographic:{colors:["#f9a8d4","#d8b4fe","#93c5fd","#6ee7b7","#fde047"],borderRadius:"6px",borderWidth:2,borderStyle:"solid",innerEffect:"metallic",animation:"shimmer",glowIntensity:.9,texture:"lines"},animated_fire:{colors:["#ff3b3b","#ff7b00","#ffcc00","#ff5722","#ff8a50"],borderRadius:"6px",borderWidth:0,borderStyle:"none",innerEffect:"glow",animation:"fire",particleEffect:!0,glowIntensity:1,texture:"noise"},animated_ice:{colors:["#38bdf8","#7dd3fc","#bae6fd","#22d3ee","#06b6d4"],borderRadius:"4px",borderWidth:3,borderStyle:"solid",innerEffect:"glass",animation:"ice",particleEffect:!0,glowIntensity:.8,texture:"cracks"},animated_electric:{colors:["#fef08a","#bef264","#5eead4","#f0abfc","#fcd34d"],borderRadius:"6px",borderWidth:3,borderStyle:"solid",innerEffect:"glow",animation:"electric",particleEffect:!0,glowIntensity:1,texture:"circuit"}};Object.fromEntries(Object.entries(fo).map(([r,t])=>[r,t.colors]));const md=[{id:"classic",name:"",price:0,currency:"free",rarity:"common",owned:!0,equipped:!0},{id:"neon",name:"",price:1e3,currency:"coins",rarity:"common",owned:!1,equipped:!1},{id:"candy",name:"",price:2e3,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"pixel",name:"",price:2500,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"galaxy",name:"",price:100,currency:"gems",rarity:"rare",owned:!1,equipped:!1},{id:"crystal",name:"",price:200,currency:"gems",rarity:"epic",owned:!1,equipped:!1},{id:"holographic",name:"",price:500,currency:"gems",rarity:"legendary",owned:!1,equipped:!1},{id:"animated_fire",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_ice",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_electric",name:"",price:1e3,currency:"gems",rarity:"mythic",owned:!1,equipped:!1,animated:!0}],gu=[{id:"dark",name:"",description:"  +  ",price:0,currency:"free",owned:!0,equipped:!0,colors:{background:"#050510",backgroundGradient:"radial-gradient(ellipse at 50% 0%, #1a1a4a 0%, #0a0a20 40%, #050510 70%), radial-gradient(circle at 80% 80%, #15152f 0%, transparent 40%)",panel:"#12122a",panelBorder:"rgba(100,120,255,0.15)",accent:"#6b8fff",text:"#ffffff",textSecondary:"#9ca3af",danger:"#ff5c6c",success:"#4ade80"}},{id:"light",name:"",description:"  +  ",price:500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#f0f4ff",backgroundGradient:"linear-gradient(180deg, #ffffff 0%, #e8f0ff 50%, #d0e0ff 100%), radial-gradient(circle at 70% 20%, rgba(255,200,100,0.2) 0%, transparent 40%)",panel:"rgba(255,255,255,0.95)",panelBorder:"rgba(100,130,200,0.2)",accent:"#4f6cff",text:"#1a1a3e",textSecondary:"#5c6b8a",danger:"#ef4444",success:"#22c55e"}},{id:"ocean",name:"",description:"  +   +  ",price:1500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#041525",backgroundGradient:"radial-gradient(ellipse at 50% 100%, #0a4a6a 0%, #062540 40%, #041525 70%), radial-gradient(circle at 30% 30%, rgba(0,200,255,0.1) 0%, transparent 40%)",panel:"rgba(10,60,90,0.8)",panelBorder:"rgba(34,211,238,0.35)",accent:"#22d3ee",text:"#e0f7ff",textSecondary:"#7dd3fc",danger:"#fb7185",success:"#34d399"}},{id:"forest",name:"",description:"  +  + ",price:150,currency:"gems",owned:!1,equipped:!1,colors:{background:"#071510",backgroundGradient:"radial-gradient(ellipse at 30% 80%, rgba(34,197,94,0.2) 0%, transparent 50%), radial-gradient(circle at 70% 30%, #0a2a15 0%, #071510 60%)",panel:"rgba(20,60,35,0.85)",panelBorder:"rgba(74,222,128,0.35)",accent:"#4ade80",text:"#ecfdf5",textSecondary:"#86efac",danger:"#fb923c",success:"#a3e635"}},{id:"sunset",name:"",description:"  +  ",price:200,currency:"gems",owned:!1,equipped:!1,colors:{background:"#15080f",backgroundGradient:"linear-gradient(180deg, #4a1832 0%, #2d1528 30%, #15080f 70%), radial-gradient(circle at 60% 20%, rgba(255,100,80,0.25) 0%, transparent 50%)",panel:"rgba(60,30,50,0.85)",panelBorder:"rgba(251,113,133,0.4)",accent:"#fb7185",text:"#fff1f2",textSecondary:"#fda4af",danger:"#ef4444",success:"#fdba74"}},{id:"space",name:"",description:" +  +  ",price:300,currency:"gems",owned:!1,equipped:!1,colors:{background:"#030308",backgroundGradient:"radial-gradient(ellipse at 20% 30%, rgba(139,92,246,0.25) 0%, transparent 40%), radial-gradient(ellipse at 80% 70%, rgba(236,72,153,0.15) 0%, transparent 40%), radial-gradient(circle at 50% 50%, #0a0a20 0%, #030308 70%)",panel:"rgba(20,15,40,0.9)",panelBorder:"rgba(168,85,247,0.45)",accent:"#a855f7",text:"#f5f3ff",textSecondary:"#c4b5fd",danger:"#f472b6",success:"#a78bfa"}},{id:"cyberpunk",name:"",description:"  +   + ",price:500,currency:"gems",owned:!1,equipped:!1,colors:{background:"#08080f",backgroundGradient:"linear-gradient(180deg, #0f0a1a 0%, #08080f 50%), radial-gradient(circle at 20% 80%, rgba(255,45,146,0.2) 0%, transparent 40%), radial-gradient(circle at 80% 20%, rgba(0,245,255,0.15) 0%, transparent 40%)",panel:"rgba(25,20,40,0.9)",panelBorder:"rgba(255,45,146,0.5)",accent:"#ff2d92",text:"#f8f0ff",textSecondary:"#e9d5ff",danger:"#ff3b3b",success:"#00f5aa"}},{id:"cherry",name:"",description:"  +  ",price:400,currency:"gems",owned:!1,equipped:!1,colors:{background:"#140a10",backgroundGradient:"radial-gradient(ellipse at 60% 30%, rgba(251,207,232,0.2) 0%, transparent 50%), radial-gradient(circle at 30% 70%, rgba(249,168,212,0.15) 0%, transparent 40%), linear-gradient(180deg, #1f1018 0%, #140a10 100%)",panel:"rgba(50,30,40,0.85)",panelBorder:"rgba(251,207,232,0.4)",accent:"#fbcfe8",text:"#fdf2f8",textSecondary:"#f9a8d4",danger:"#fb7185",success:"#fda4af"}},{id:"gold",name:"",description:"   +  ",price:800,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0d0a05",backgroundGradient:"radial-gradient(ellipse at 50% 30%, rgba(255,200,50,0.15) 0%, transparent 50%), radial-gradient(circle at 70% 70%, rgba(255,180,30,0.1) 0%, transparent 40%), linear-gradient(180deg, #1a1508 0%, #0d0a05 100%)",panel:"rgba(40,35,20,0.9)",panelBorder:"rgba(253,224,71,0.5)",accent:"#fde047",text:"#fefce8",textSecondary:"#fef08a",danger:"#fb923c",success:"#facc15"}}],Ex=[{id:"gems_100",amount:100,bonusAmount:0,price:1.99,label:""},{id:"gems_500",amount:500,bonusAmount:50,price:7.99,label:"",highlight:!0},{id:"gems_1200",amount:1200,bonusAmount:200,price:14.99,label:""},{id:"gems_2500",amount:2500,bonusAmount:500,price:27.99,label:""},{id:"gems_6500",amount:6500,bonusAmount:1500,price:54.99,label:" ",bestValue:!0}],Os=[{id:"coins_50",reward:{coins:50},probability:.25,color:"#888888",label:"50 "},{id:"coins_100",reward:{coins:100},probability:.2,color:"#3742fa",label:"100 "},{id:"coins_200",reward:{coins:200},probability:.15,color:"#3742fa",label:"200 "},{id:"gems_5",reward:{gems:5},probability:.12,color:"#8854d0",label:"5 "},{id:"gems_10",reward:{gems:10},probability:.1,color:"#8854d0",label:"10 "},{id:"powerup",reward:{powerUp:{type:"colorBomb",count:1}},probability:.08,color:"#2ed573",label:""},{id:"gems_25",reward:{gems:25},probability:.05,color:"#ffd700",label:"25 "},{id:"gems_50",reward:{gems:50},probability:.03,color:"#ffd700",label:"50 "},{id:"gems_100",reward:{gems:100},probability:.015,color:"#ff4757",label:"100 !"},{id:"jackpot",reward:{gems:500,coins:5e3},probability:.005,color:"#ff00ff",label:"!"}],pd=[{day:1,reward:{coins:100}},{day:2,reward:{coins:150,powerUp:{type:"timeSlow",count:1}}},{day:3,reward:{coins:200}},{day:4,reward:{coins:250,gems:10}},{day:5,reward:{coins:300,powerUp:{type:"colorBomb",count:1}}},{day:6,reward:{coins:400,gems:20}},{day:7,reward:{coins:500,gems:50}}],Sx={common:"#888888",uncommon:"#2ed573",rare:"#3742fa",epic:"#8854d0",legendary:"#ffd700",mythic:"#ff00ff"},wx={common:"",uncommon:"",rare:"",epic:"",legendary:"",mythic:""},Ax=[{id:"play_3_games",type:"games_played",target:3,desc:"3 ",reward:{xp:30,coins:100}},{id:"score_10k",type:"score",target:1e4,desc:"10,000 ",reward:{xp:40,coins:150}},{id:"combo_10",type:"combo",target:10,desc:"10  ",reward:{xp:50,coins:200}},{id:"chain_5",type:"chain",target:5,desc:"5 ",reward:{xp:50,gems:10}},{id:"use_powerup",type:"powerup_used",target:3,desc:" 3 ",reward:{xp:30,coins:100}},{id:"fuse_50",type:"blocks_fused",target:50,desc:"50  ",reward:{xp:35,coins:120}},{id:"level_10",type:"level_reached",target:10,desc:" 10 ",reward:{xp:45,coins:180}},{id:"play_classic",type:"mode_played",target:1,desc:"  ",reward:{xp:25,coins:80}},{id:"watch_ad",type:"ad_watched",target:1,desc:" ",reward:{xp:20,coins:50}},{id:"perfect_clear",type:"perfect_clear",target:1,desc:" ",reward:{xp:100,gems:20}}],Cx=[{id:"play_20_games",type:"games_played",target:20,desc:"20 ",reward:{xp:200,gems:50}},{id:"total_score_100k",type:"total_score",target:1e5,desc:" 100,000 ",reward:{xp:300,gems:100}},{id:"max_combo_30",type:"max_combo",target:30,desc:" 30  ",reward:{xp:250,gems:75}},{id:"chain_10",type:"max_chain",target:10,desc:"10 ",reward:{xp:300,gems:150}},{id:"reach_level_20",type:"max_level",target:20,desc:" 20 ",reward:{xp:200,gems:80}},{id:"fuse_500",type:"blocks_fused",target:500,desc:"500  ",reward:{xp:250,gems:90}},{id:"use_all_powerups",type:"unique_powerups",target:5,desc:"5  ",reward:{xp:180,gems:60}},{id:"gravity_all",type:"gravity_directions",target:4,desc:"   ",reward:{xp:150,gems:50}}];function Nx(){return[...Ax].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function Rx(){return[...Cx].sort(()=>Math.random()-.5).slice(0,3).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function so(r){return Math.floor(100*Math.pow(1.15,r-1))}function ty(r){let t=1,a=0;for(;a+so(t)<=r;)a+=so(t),t++;return t}function ny(r){let t=1,a=0;for(;a+so(t)<=r;)a+=so(t),t++;const s=r-a,o=so(t);return{currentLevelXP:s,nextLevelXP:o,progress:s/o}}const Mx=[{id:"first_step",name:" ",description:"  ",condition:"games >= 1",icon:"",rarity:"common"},{id:"beginner",name:"",description:"10 ",condition:"games >= 10",icon:"",rarity:"common"},{id:"regular",name:"",description:"50 ",condition:"games >= 50",icon:"",rarity:"rare"},{id:"veteran",name:"",description:"100 ",condition:"games >= 100",icon:"",rarity:"epic"},{id:"legend",name:"",description:"500 ",condition:"games >= 500",icon:"",rarity:"legendary"},{id:"score_1k",name:"1 ",description:"1,000 ",condition:"highScore >= 1000",icon:"",rarity:"common"},{id:"score_5k",name:"5 ",description:"5,000 ",condition:"highScore >= 5000",icon:"",rarity:"rare"},{id:"score_10k",name:"",description:"10,000 ",condition:"highScore >= 10000",icon:"",rarity:"epic"},{id:"score_50k",name:" ",description:"50,000 ",condition:"highScore >= 50000",icon:"",rarity:"legendary"},{id:"score_100k",name:" ",description:"100,000 ",condition:"highScore >= 100000",icon:"",rarity:"mythic"},{id:"combo_5",name:" ",description:"5 ",condition:"maxCombo >= 5",icon:"",rarity:"common"},{id:"combo_10",name:" ",description:"10 ",condition:"maxCombo >= 10",icon:"",rarity:"rare"},{id:"combo_20",name:" ",description:"20 ",condition:"maxCombo >= 20",icon:"",rarity:"epic"},{id:"combo_50",name:" ",description:"50 ",condition:"maxCombo >= 50",icon:"",rarity:"legendary"},{id:"chain_3",name:" ",description:"3 ",condition:"maxChain >= 3",icon:"",rarity:"common"},{id:"chain_5",name:" ",description:"5 ",condition:"maxChain >= 5",icon:"",rarity:"rare"},{id:"chain_10",name:" ",description:"10 ",condition:"maxChain >= 10",icon:"",rarity:"epic"},{id:"chain_15",name:" ",description:"15 ",condition:"maxChain >= 15",icon:"",rarity:"legendary"},{id:"level_10",name:"10 ",description:" 10 ",condition:"maxLevel >= 10",icon:"",rarity:"common"},{id:"level_20",name:"20 ",description:" 20 ",condition:"maxLevel >= 20",icon:"",rarity:"rare"},{id:"level_30",name:"30 ",description:" 30 ",condition:"maxLevel >= 30",icon:"",rarity:"epic"},{id:"level_50",name:" ",description:" 50 ",condition:"maxLevel >= 50",icon:"",rarity:"legendary"},{id:"fever_master",name:" ",description:"  10 ",condition:"feverCount >= 10",icon:"",rarity:"rare"},{id:"speed_demon",name:" ",description:" 3  10,000",condition:"speedScore >= 10000",icon:"",rarity:"epic"},{id:"puzzle_solver",name:" ",description:"  20 ",condition:"puzzleLevel >= 20",icon:"",rarity:"epic"},{id:"perfectionist",name:"",description:" 10",condition:"perfectClears >= 10",icon:"",rarity:"legendary"},{id:"early_bird",name:"",description:" 6-9  ",condition:"special",icon:"",rarity:"rare"},{id:"night_owl",name:"",description:" 12-3  ",condition:"special",icon:"",rarity:"rare"},{id:"weekend_warrior",name:" ",description:" 10  ",condition:"special",icon:"",rarity:"rare"},{id:"streak_7",name:"7 ",description:"7  ",condition:"streak >= 7",icon:"",rarity:"epic"},{id:"streak_30",name:"30 ",description:"30  ",condition:"streak >= 30",icon:"",rarity:"legendary"}];function Ix(r,t,a,s){const o=Math.floor(r/100),c=t*2,f=a*5,m=s*10;return o+c+f+m}function gd(){return Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null))}function xv(r){const t=Ud(r);return t[Math.floor(Math.random()*t.length)]}function Tv(r,t){if(t>0&&t%20===0)return ey(r);const a=bx(r);return Math.random()<a?ey(r):"normal"}function ay(r,t){const a=[],s=[];for(let o=0;o<r;o++)a.push(xv(t)),s.push(o===0?Tv(t,0):"normal");return{colors:a,specialTypes:s}}const Dx={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,specialBlocksUsed:0,levelsCompleted:0},Ox={dailyMissions:Nx(),weeklyMissions:Rx()};let to=!1;const iy={board:gd(),currentBlock:null,currentBlocks:[],nextBlocks:[],nextSpecialTypes:[],holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"ready",gameMode:"classic",powerUps:[],activePowerUp:null,gravityDirection:"down",gameTime:0,statistics:Dx,continues:0,adWatchedThisGame:!1,missionProgress:Ox,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:[],feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,specialBlockChance:.05,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:1,movesRemaining:0,puzzleLevel:1,puzzleCompleted:!1,currentShapeOffsets:[],basePosition:{x:0,y:0}},Ye=yv()(vv((r,t)=>({...iy,blocksPlaced:0,startGame:(a="classic")=>{to=!1;const s=1,o=1,c=a==="puzzle"?1:$g(s),{colors:f,specialTypes:m}=ay(5+c,s);let p=[];a==="challenge"?p=Zg(s):a==="puzzle"&&(p=Jg(o));const b=a==="puzzle"?pu.getMovesForLevel(o):0;r({board:gd(),currentBlock:null,currentBlocks:[],nextBlocks:f,nextSpecialTypes:m,holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:s,combo:0,maxCombo:0,chainCount:0,gameStatus:"playing",gameMode:a,activePowerUp:null,gravityDirection:"down",gameTime:0,continues:0,adWatchedThisGame:!1,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:p,feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,blocksPlaced:0,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:c,movesRemaining:b,puzzleLevel:o,puzzleCompleted:!1}),setTimeout(()=>t().spawnBlock(),100)},pauseGame:()=>{t().gameStatus==="playing"&&r({gameStatus:"paused"})},resumeGame:()=>{t().gameStatus==="paused"&&r({gameStatus:"playing"})},endGame:()=>{const{score:a,statistics:s,combo:o,chainCount:c}=t();r({gameStatus:"gameover",statistics:{...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a,highScore:Math.max(s.highScore,a),maxCombo:Math.max(s.maxCombo,o),maxChain:Math.max(s.maxChain,c)}})},resetGame:()=>{to=!1,r({...iy,statistics:t().statistics,powerUps:t().powerUps,missionProgress:t().missionProgress})},spawnBlock:()=>{const{nextBlocks:a,nextSpecialTypes:s,level:o,gravityDirection:c,board:f,blocksPlaced:m,currentBlocks:p,gameStatus:b}=t();if(!(p.length>0)&&b==="playing"&&!to){to=!0;try{const x=$g(o);let T=[...a],w=[...s];for(;T.length<10;)T.push(xv(o)),w.push(Tv(o,m+T.length));if(T.length<1)return;const k=fx(x).offsets,F=Math.min(...k.map(N=>N[0])),U=Math.max(...k.map(N=>N[0])),j=Math.min(...k.map(N=>N[1])),W=Math.max(...k.map(N=>N[1])),$=U-F+1,se=W-j+1;let ce,le;switch(c){case"down":ce=Math.floor((me.COLUMNS-$)/2),le=0;break;case"up":ce=Math.floor((me.COLUMNS-$)/2),le=me.ROWS-1-se+1;break;case"left":ce=me.COLUMNS-$,le=Math.floor((me.ROWS-se)/2);break;case"right":ce=0,le=Math.floor((me.ROWS-se)/2);break}const M=[];for(let N=0;N<k.length;N++){const[D,B]=k[N],R=T[N]||T[0],Ue=N===0&&w[0]||"normal",We=ce+D,X=le+B;We<0||We>=me.COLUMNS||X<0||X>=me.ROWS||f[X][We]===null&&M.push({id:Wc(),color:R,x:We,y:X,targetY:X,specialType:Ue})}if(M.length===0){t().endGame();return}if(c==="down"){let N=0;for(let D=0;D<me.COLUMNS;D++)f[0][D]!==null&&N++,f[1][D]!==null&&N++;if(N>=me.COLUMNS){t().endGame();return}}const S=[...T.slice(x)],C=[...w.slice(x)];r({currentBlock:M[0]||null,currentBlocks:M,nextBlocks:S,nextSpecialTypes:C,canHold:!0,blocksPlaced:m+x,fallingBlockCount:x,currentShapeOffsets:k,basePosition:{x:ce,y:le}})}finally{to=!1}}},moveBlock:a=>{const{currentBlocks:s,board:o,gravityDirection:c}=t();if(s.length===0)return;const f=[],m=new Set;for(const p of s){let b=p.x,x=p.y;if(c==="down"||c==="up"?b=a==="left"?p.x-1:p.x+1:x=a==="left"?p.y-1:p.y+1,b<0||b>=me.COLUMNS||x<0||x>=me.ROWS||o[x][b]!==null)return;f.push({...p,x:b,y:x}),m.add(`${b},${x}`)}r({currentBlock:f[0]||null,currentBlocks:f})},rotateBlock:()=>{const{currentBlocks:a,board:s}=t();if(a.length<=1)return;const o=a[0],c=[];let f=!0;for(let m=0;m<a.length;m++){const p=a[m],b=p.x-o.x,x=p.y-o.y,T=o.x-x,w=o.y+b;if(T<0||T>=me.COLUMNS||w<0||w>=me.ROWS){f=!1;break}if(s[w]?.[T]!==null){f=!1;break}c.push({...p,x:T,y:w})}if(!f){const m=[[-1,0],[1,0],[-2,0],[2,0],[0,-1],[0,1]];for(const[p,b]of m){const x=[];let T=!0;for(let w=0;w<a.length;w++){const O=a[w],k=O.x-o.x,F=O.y-o.y,U=o.x-F+p,j=o.y+k+b;if(U<0||U>=me.COLUMNS||j<0||j>=me.ROWS||s[j]?.[U]!==null){T=!1;break}x.push({...O,x:U,y:j})}if(T&&x.length===a.length){c.length=0,c.push(...x),f=!0;break}}}if(f&&c.length===a.length){const m=c[0],p=c.map(b=>[b.x-m.x,b.y-m.y]);r({currentBlock:c[0]||null,currentBlocks:c,currentShapeOffsets:p,basePosition:{x:m.x,y:m.y}})}},softDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:f}=dd[o];let m=!1;new Set(a.map(b=>`${b.x},${b.y}`));for(const b of a){const x=b.x+c,T=b.y+f;if(x<0||x>=me.COLUMNS||T<0||T>=me.ROWS){m=!0;break}if(s[T]?.[x]!==null){m=!0;break}}if(m){t().placeBlock();return}const p=a.map(b=>({...b,x:b.x+c,y:b.y+f}));r({currentBlock:p[0]||null,currentBlocks:p})},hardDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:f}=dd[o],m=new Set,p=s.map(T=>[...T]),b=[...a].sort((T,w)=>o==="down"?w.y-T.y:o==="up"?T.y-w.y:o==="right"?w.x-T.x:T.x-w.x),x=[];for(const T of b){let w=T.x,O=T.y;for(;;){const k=w+c,F=O+f;if(k<0||k>=me.COLUMNS||F<0||F>=me.ROWS||p[F]?.[k]!==null||m.has(`${k},${F}`))break;w=k,O=F}m.add(`${w},${O}`),x.push({...T,x:w,y:O}),p[O][w]={id:T.id||Wc(),color:T.color,x:w,y:O,specialType:T.specialType,frozenCount:T.specialType==="frozen"?2:void 0,createdAt:Date.now()}}r({currentBlock:x[0]||null,currentBlocks:x}),t().placeBlock()},doHoldBlock:()=>{const{currentBlock:a,holdBlock:s,holdSpecialType:o,canHold:c}=t();!a||!c||(s&&o!==null?r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:{color:s,x:Math.floor(me.COLUMNS/2),y:0,targetY:0,specialType:o},canHold:!1}):(r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:null,canHold:!1}),t().spawnBlock()))},placeBlock:()=>{const{currentBlocks:a,board:s,garbagePending:o,gameMode:c}=t();if(a.length===0)return;let f=s.map(m=>[...m]);for(const m of a){const p={id:Wc(),color:m.color,x:m.x,y:m.y,specialType:m.specialType,frozenCount:m.specialType==="frozen"?2:void 0,createdAt:Date.now()};f[m.y][m.x]=p}r({board:f,currentBlock:null,currentBlocks:[]}),c==="puzzle"&&t().decrementMoves(),o>0&&c!=="puzzle"&&setTimeout(()=>{t().addGarbageRows(t().garbagePending)},100)},setGravityDirection:a=>{r({gravityDirection:a,isPowerUpSelecting:!1,selectedGravityDirection:null})},toggleGravitySelection:a=>{r({isPowerUpSelecting:a})},cycleGravity:()=>{const{gravityDirection:a}=t(),s=["down","right","up","left"],c=(s.indexOf(a)+1)%s.length;r({gravityDirection:s[c]})},addPowerUp:(a,s=1)=>{const{powerUps:o}=t(),c=o.findIndex(f=>f.type===a);if(c>=0){const f=[...o];f[c]={...f[c],count:f[c].count+s},r({powerUps:f})}else r({powerUps:[...o,{type:a,count:s}]})},usePowerUp:a=>{const{powerUps:s}=t(),o=s.findIndex(f=>f.type===a&&f.count>0);if(o<0)return;const c=[...s];c[o]={...c[o],count:c[o].count-1},c[o].count<=0&&c.splice(o,1),r({powerUps:c})},activatePowerUp:a=>{r({activePowerUp:a})},deactivatePowerUp:()=>{r({activePowerUp:null})},updateBoard:a=>{r({board:a})},addScore:a=>{const{score:s,activePowerUp:o,isFeverMode:c}=t();let f=o?.type==="scoreMultiplier"?2:1;c&&(f*=3),r({score:s+a*f}),t().checkLevelUp()},incrementCombo:()=>{const{combo:a,maxCombo:s}=t(),o=a+1;r({combo:o,maxCombo:Math.max(s,o),comboTimer:3}),t().addFeverGauge(Vs.GAUGE_PER_COMBO*o)},resetCombo:()=>{r({combo:0,comboTimer:0})},incrementChain:()=>{const{chainCount:a}=t(),s=a+1;r({chainCount:s}),t().addFeverGauge(Vs.GAUGE_PER_CHAIN*s)},resetChain:()=>{r({chainCount:0})},checkLevelUp:()=>{const{score:a,level:s,gameMode:o}=t(),c=vx(s);if(a>=c){const f=s+1,m=o==="challenge"?Zg(f):t().levelObjectives;r({level:f,levelObjectives:m})}},addFeverGauge:a=>{const{feverGauge:s,isFeverMode:o}=t();if(o)return;const c=Math.min(Vs.MAX_GAUGE,s+a);r({feverGauge:c}),c>=Vs.MAX_GAUGE&&t().activateFeverMode()},activateFeverMode:()=>{r({isFeverMode:!0,feverGauge:Vs.MAX_GAUGE})},deactivateFeverMode:()=>{r({isFeverMode:!1,feverGauge:0})},updateLevelObjective:(a,s)=>{const{levelObjectives:o}=t(),c=o.map(f=>{if(f.type===a&&!f.completed){const m=f.current+s;return{...f,current:m,completed:m>=f.target}}return f});r({levelObjectives:c}),c.length>0&&c.every(f=>f.completed)&&r({gameStatus:"levelComplete"})},setDangerLevel:a=>{r({dangerLevel:a})},decrementBlocksUntilSpecial:()=>{const{blocksUntilSpecial:a}=t();a>0?r({blocksUntilSpecial:a-1}):r({blocksUntilSpecial:10+Math.floor(Math.random()*5)})},addGarbageRows:a=>{const s=o=>{if(o<=0){r({garbagePending:0});return}const{board:c,level:f}=t(),m=Ud(f),p=Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null));for(let w=1;w<me.ROWS;w++)for(let O=0;O<me.COLUMNS;O++){const k=c[w][O];k&&(p[w-1][O]={...k,y:w-1})}const b=Math.floor(Math.random()*me.COLUMNS),x=me.ROWS-1;for(let w=0;w<me.COLUMNS;w++)w===b?p[x][w]=null:p[x][w]={id:Wc(),color:m[Math.floor(Math.random()*m.length)],x:w,y:x,specialType:Math.random()<.1?"stone":"normal",createdAt:Date.now()};r({board:p});let T=!1;for(let w=0;w<me.COLUMNS;w++)if(p[0][w]!==null){T=!0;break}if(T){t().endGame();return}o>1?setTimeout(()=>s(o-1),300):r({garbagePending:0})};s(a)},incrementGarbageTimer:()=>{const{garbageTimer:a,level:s,garbagePending:o}=t();if(s<Ls.GARBAGE_START_LEVEL)return;const c=dx(s),f=a+1;if(f>=c){const m=Math.min(Ls.GARBAGE_ROWS_PER_INTERVAL+Math.floor(s/5),Ls.GARBAGE_MAX_ROWS);r({garbageTimer:0,garbagePending:o+m})}else r({garbageTimer:f})},updateStatistics:a=>{const{statistics:s}=t();r({statistics:{...s,...a}})},updateMissionProgress:(a,s)=>{const{missionProgress:o}=t(),c=o.dailyMissions.map(m=>{if(m.type===a&&!m.completed){const p=m.current+s;return{...m,current:p,completed:p>=m.target}}return m}),f=o.weeklyMissions.map(m=>{if(m.type===a&&!m.completed){const p=m.current+s;return{...m,current:p,completed:p>=m.target}}return m});r({missionProgress:{dailyMissions:c,weeklyMissions:f}})},incrementGameTime:()=>{const{gameTime:a,comboTimer:s,feverGauge:o,isFeverMode:c}=t();if(s>0){const f=s-1;f<=0?t().resetCombo():r({comboTimer:f})}!c&&o>0&&r({feverGauge:Math.max(0,o-Vs.DECAY_RATE)}),t().incrementGarbageTimer(),r({gameTime:a+1})},continueGame:()=>{const{continues:a,board:s}=t(),o=s.map((c,f)=>f<4?Array(me.COLUMNS).fill(null):c);r({board:o,gameStatus:"playing",continues:a+1}),t().spawnBlock()},decrementMoves:()=>{const{movesRemaining:a,gameMode:s}=t();if(s!=="puzzle")return;const o=a-1;r({movesRemaining:o}),o<=0&&t().checkPuzzleComplete()},nextPuzzleLevel:()=>{const{puzzleLevel:a}=t(),s=a+1,o=pu.getMovesForLevel(s),c=Jg(s),{colors:f,specialTypes:m}=ay(6,1);r({board:gd(),currentBlock:null,currentBlocks:[],nextBlocks:f,nextSpecialTypes:m,score:0,puzzleLevel:s,movesRemaining:o,levelObjectives:c,puzzleCompleted:!1,gameStatus:"playing",combo:0,chainCount:0}),setTimeout(()=>t().spawnBlock(),100)},checkPuzzleComplete:()=>{const{levelObjectives:a,gameMode:s,movesRemaining:o}=t();if(s!=="puzzle")return;a.every(f=>f.completed)?r({puzzleCompleted:!0,gameStatus:"levelComplete"}):o<=0&&t().endGame()}}),{name:"chromafall-game-storage",partialize:r=>({statistics:r.statistics,powerUps:r.powerUps,missionProgress:r.missionProgress})})),Vx={soundEnabled:!0,musicEnabled:!0,soundVolume:.7,musicVolume:.5,hapticEnabled:!0,showGhostBlock:!0,controlType:"both",colorBlindMode:!1,language:"ko",performanceMode:"auto"},jx={coins:1e3,gems:50,lives:5,maxLives:5,lifeRegenTime:0},kx={freeSpinsRemaining:1,adSpinsRemaining:3,lastFreeSpinTime:0,spinHistory:[],pityCounter:0},Lx={currentStreak:0,longestStreak:0,lastPlayDate:"",todayPlayed:!1},Bx={adsEnabled:!0,iapEnabled:!0,removeAds:!1,vipActive:!1,firstPurchaseBonus:!0},Ux={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,maxLevel:1,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,feverCount:0,puzzleLevel:1,speedScore:0},Yn=yv()(vv((r,t)=>({playerId:`player_${Date.now()}`,playerName:"",playerLevel:1,playerXP:0,totalXP:0,avatarId:"default",playerStats:Ux,unlockedTitles:["first_step"],equippedTitleId:"",settings:Vx,currency:jx,achievements:Tx(),ownedSkins:md.filter(a=>a.owned),ownedThemes:gu.filter(a=>a.owned),equippedSkinId:"classic",equippedThemeId:"dark",dailyRewards:pd.map((a,s)=>({...a,claimed:!1})),lastDailyRewardClaim:"",dailyRewardDay:0,streakInfo:Lx,wheelState:kx,monetizationConfig:Bx,purchaseHistory:[],personalBestScores:[],battlePassLevel:1,battlePassXP:0,battlePassPremium:!1,setPlayerName:a=>r({playerName:a}),addXP:a=>{const{totalXP:s}=t(),o=s+a,c=ty(o),f=ny(o);r({totalXP:o,playerLevel:c,playerXP:f.currentLevelXP})},processGameResult:a=>{const{playerStats:s,totalXP:o}=t(),c=Ix(a.score,a.combo,a.chain,a.level),f={...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a.score,highScore:Math.max(s.highScore,a.score),maxCombo:Math.max(s.maxCombo,a.combo),maxChain:Math.max(s.maxChain,a.chain),maxLevel:Math.max(s.maxLevel,a.level)};a.mode==="timeAttack"?f.speedScore=Math.max(f.speedScore,a.score):a.mode==="puzzle"&&(f.puzzleLevel=Math.max(f.puzzleLevel,a.level));const m=o+c,p=ty(m),b=ny(m),x=Math.floor(a.score/50),{currency:T}=t();return r({playerStats:f,totalXP:m,playerLevel:p,playerXP:b.currentLevelXP,currency:{...T,coins:T.coins+x}}),t().checkAndUnlockTitles(),c},checkAndUnlockTitles:()=>{const{playerStats:a,unlockedTitles:s,streakInfo:o}=t(),c=[];return Mx.forEach(f=>{if(s.includes(f.id))return;let m=!1;const p=f.condition;if(p.includes("games >=")){const b=parseInt(p.split(">=")[1]);m=a.totalGamesPlayed>=b}else if(p.includes("highScore >=")){const b=parseInt(p.split(">=")[1]);m=a.highScore>=b}else if(p.includes("maxCombo >=")){const b=parseInt(p.split(">=")[1]);m=a.maxCombo>=b}else if(p.includes("maxChain >=")){const b=parseInt(p.split(">=")[1]);m=a.maxChain>=b}else if(p.includes("maxLevel >=")){const b=parseInt(p.split(">=")[1]);m=a.maxLevel>=b}else if(p.includes("feverCount >=")){const b=parseInt(p.split(">=")[1]);m=a.feverCount>=b}else if(p.includes("speedScore >=")){const b=parseInt(p.split(">=")[1]);m=a.speedScore>=b}else if(p.includes("puzzleLevel >=")){const b=parseInt(p.split(">=")[1]);m=a.puzzleLevel>=b}else if(p.includes("perfectClears >=")){const b=parseInt(p.split(">=")[1]);m=a.perfectClears>=b}else if(p.includes("streak >=")){const b=parseInt(p.split(">=")[1]);m=o.currentStreak>=b}m&&c.push(f.id)}),c.length>0&&r({unlockedTitles:[...s,...c]}),c},equipTitle:a=>{const{unlockedTitles:s}=t();(s.includes(a)||a==="")&&r({equippedTitleId:a})},updatePlayerStats:a=>{const{playerStats:s}=t();r({playerStats:{...s,...a}})},updateSettings:a=>{const{settings:s}=t();r({settings:{...s,...a}})},addCoins:a=>{const{currency:s}=t();r({currency:{...s,coins:s.coins+a}})},spendCoins:a=>{const{currency:s}=t();return s.coins>=a?(r({currency:{...s,coins:s.coins-a}}),!0):!1},addGems:a=>{const{currency:s}=t();r({currency:{...s,gems:s.gems+a}})},spendGems:a=>{const{currency:s}=t();return s.gems>=a?(r({currency:{...s,gems:s.gems-a}}),!0):!1},addLife:a=>{const{currency:s}=t(),o=Math.min(s.lives+a,s.maxLives);r({currency:{...s,lives:o}})},useLife:()=>{const{currency:a}=t();return a.lives>0?(r({currency:{...a,lives:a.lives-1}}),!0):!1},updateAchievement:(a,s)=>{const{achievements:o}=t(),c=o.map(f=>{if(f.id===a){const m=Math.max(f.current,s);return{...f,current:m,completed:m>=f.target}}return f});r({achievements:c})},claimAchievement:a=>{const{achievements:s}=t(),o=s.find(c=>c.id===a);if(o&&o.completed&&!o.claimed){o.reward.coins&&t().addCoins(o.reward.coins),o.reward.gems&&t().addGems(o.reward.gems);const c=s.map(f=>f.id===a?{...f,claimed:!0}:f);r({achievements:c})}},purchaseSkin:a=>{const s=md.find(f=>f.id===a);if(!s)return!1;const{currency:o,ownedSkins:c}=t();return c.some(f=>f.id===a)?!1:s.currency==="free"?(r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):!1},purchaseTheme:a=>{const s=gu.find(f=>f.id===a);if(!s)return!1;const{currency:o,ownedThemes:c}=t();return c.some(f=>f.id===a)?!1:s.currency==="free"?(r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):!1},equipSkin:a=>{const{ownedSkins:s}=t();s.some(o=>o.id===a)&&r({equippedSkinId:a})},equipTheme:a=>{const{ownedThemes:s}=t();s.some(o=>o.id===a)&&r({equippedThemeId:a})},claimDailyReward:()=>{const{dailyRewardDay:a,dailyRewards:s,lastDailyRewardClaim:o}=t(),c=new Date().toDateString();if(o===c)return null;const f=a%7+1,m=pd[f-1];return m.reward.coins&&t().addCoins(m.reward.coins),m.reward.gems&&t().addGems(m.reward.gems),r({dailyRewardDay:f,lastDailyRewardClaim:c}),m.reward},checkDailyRewardAvailable:()=>{const{lastDailyRewardClaim:a}=t(),s=new Date().toDateString();return a!==s},updateStreak:()=>{const{streakInfo:a}=t(),s=new Date().toDateString();if(a.lastPlayDate===s)return;const o=new Date(Date.now()-864e5).toDateString();let c=a.currentStreak;a.lastPlayDate===o?c+=1:a.lastPlayDate!==s&&(c=1),r({streakInfo:{currentStreak:c,longestStreak:Math.max(a.longestStreak,c),lastPlayDate:s,todayPlayed:!0}})},spinWheel:()=>{const{wheelState:a}=t(),{freeSpinsRemaining:s,adSpinsRemaining:o}=a;if(s<=0&&o<=0)return null;const c=["coins_50","coins_100","gems_5","gems_10","powerup"],f=c[Math.floor(Math.random()*c.length)];return r({wheelState:{...a,freeSpinsRemaining:s>0?s-1:s,adSpinsRemaining:s<=0?o-1:o,spinHistory:[...a.spinHistory,f],pityCounter:a.pityCounter+1}}),f},canSpinWheel:()=>{const{wheelState:a,currency:s}=t();return{free:a.freeSpinsRemaining>0,ad:a.adSpinsRemaining>0,gem:s.gems>=20}},addBattlePassXP:a=>{const{battlePassXP:s,battlePassLevel:o}=t(),c=100,f=s+a,m=Math.floor(f/c);r({battlePassXP:f%c,battlePassLevel:Math.min(o+m,50)})},purchaseBattlePassPremium:()=>{const{currency:a}=t();return a.gems>=499?(t().spendGems(499),r({battlePassPremium:!0}),!0):!1},addPersonalBest:(a,s)=>{const{personalBestScores:o}=t(),c=o.findIndex(f=>f.mode===a);if(c>=0){if(s>o[c].score){const f=[...o];f[c]={mode:a,score:s,date:new Date().toISOString()},r({personalBestScores:f})}}else r({personalBestScores:[...o,{mode:a,score:s,date:new Date().toISOString()}]})}}),{name:"chromafall-user-storage"}));function zx(r,t,a,s){const o=[],c=new Set,f=[[t,a]];for(;f.length>0;){const[m,p]=f.shift(),b=`${m},${p}`;if(c.has(b)||m<0||m>=me.COLUMNS||p<0||p>=me.ROWS)continue;const x=r[p][m];x&&(x.color!==s&&x.color!=="rainbow"&&s!=="rainbow"||(c.add(b),o.push(x),f.push([m-1,p]),f.push([m+1,p]),f.push([m,p-1]),f.push([m,p+1])))}return o}function Px(r,t){const a=[],s=new Set,o=ix();for(let c=0;c<me.ROWS;c++)for(let f=0;f<me.COLUMNS;f++){const m=r[c][f];if(!m)continue;const p=`${f},${c}`;if(s.has(p))continue;const b=zx(r,f,c,m.color);b.length>=o&&(a.push(b),b.forEach(x=>s.add(`${x.x},${x.y}`)))}return a}function Gx(r,t){const a=Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null));if(t==="down")for(let s=0;s<me.COLUMNS;s++){let o=me.ROWS-1;for(let c=me.ROWS-1;c>=0;c--)r[c][s]&&(a[o][s]={...r[c][s],y:o},o--)}else if(t==="up")for(let s=0;s<me.COLUMNS;s++){let o=0;for(let c=0;c<me.ROWS;c++)r[c][s]&&(a[o][s]={...r[c][s],y:o},o++)}else if(t==="left")for(let s=0;s<me.ROWS;s++){let o=0;for(let c=0;c<me.COLUMNS;c++)r[s][c]&&(a[s][o]={...r[s][c],x:o},o++)}else if(t==="right")for(let s=0;s<me.ROWS;s++){let o=me.COLUMNS-1;for(let c=me.COLUMNS-1;c>=0;c--)r[s][c]&&(a[s][o]={...r[s][c],x:o},o--)}return a}function qx(r){for(let t=0;t<me.ROWS;t++)for(let a=0;a<me.COLUMNS;a++)if(r[t][a])return!1;return!0}function Hx(r,t,a){const s=r.map(m=>[...m]),o=[],c=[],f=new Set;for(const m of t){if(m.specialType==="normal")continue;const p=`${m.x},${m.y}`;if(f.has(p))continue;f.add(p);const b=[];switch(m.specialType){case"bomb":{for(let x=-1;x<=fd.BOMB_RADIUS;x++)for(let T=-1;T<=fd.BOMB_RADIUS;T++){const w=m.x+T,O=m.y+x;if(w>=0&&w<me.COLUMNS&&O>=0&&O<me.ROWS){const k=s[O][w];k&&!t.includes(k)&&(k.specialType==="frozen"&&(k.frozenCount||2)>1?s[O][w]={...k,frozenCount:(k.frozenCount||2)-1}:(k.specialType,o.push(k),s[O][w]=null),b.push({x:w,y:O}))}}break}case"lightning":{for(let x=0;x<me.ROWS;x++)for(let T=0;T<me.COLUMNS;T++){const w=s[x][T];w&&w.color===m.color&&!t.includes(w)&&(w.specialType==="frozen"&&(w.frozenCount||2)>1?s[x][T]={...w,frozenCount:(w.frozenCount||2)-1}:w.specialType!=="stone"&&(o.push(w),s[x][T]=null),b.push({x:T,y:x}))}break}case"cross":{for(let x=0;x<me.COLUMNS;x++){const T=s[m.y][x];T&&!t.includes(T)&&(T.specialType==="frozen"&&(T.frozenCount||2)>1?s[m.y][x]={...T,frozenCount:(T.frozenCount||2)-1}:T.specialType!=="stone"&&(o.push(T),s[m.y][x]=null),b.push({x,y:m.y}))}for(let x=0;x<me.ROWS;x++){const T=s[x][m.x];T&&!t.includes(T)&&(T.specialType==="frozen"&&(T.frozenCount||2)>1?s[x][m.x]={...T,frozenCount:(T.frozenCount||2)-1}:T.specialType!=="stone"&&(o.push(T),s[x][m.x]=null),b.push({x:m.x,y:x}))}break}case"colorShift":{for(let x=-1;x<=1;x++)for(let T=-1;T<=1;T++){if(T===0&&x===0)continue;const w=m.x+T,O=m.y+x;if(w>=0&&w<me.COLUMNS&&O>=0&&O<me.ROWS){const k=s[O][w];k&&k.specialType!=="stone"&&k.specialType!=="frozen"&&(s[O][w]={...k,color:m.color},b.push({x:w,y:O}))}}break}case"shuffle":{const x=Ud(a);for(let T=-1;T<=1;T++)for(let w=-1;w<=1;w++){if(w===0&&T===0)continue;const O=m.x+w,k=m.y+T;if(O>=0&&O<me.COLUMNS&&k>=0&&k<me.ROWS){const F=s[k][O];if(F&&F.specialType!=="stone"&&F.specialType!=="frozen"){const U=x[Math.floor(Math.random()*x.length)];s[k][O]={...F,color:U},b.push({x:O,y:k})}}}break}}b.length>0&&c.push({type:m.specialType,x:m.x,y:m.y,affectedBlocks:b})}return{additionalCleared:o,newBoard:s,effects:c}}function Fx(r,t){const a=r.map(c=>[...c]),s=[],o=new Set(t.map(c=>`${c.x},${c.y}`));for(let c=0;c<me.ROWS;c++)for(let f=0;f<me.COLUMNS;f++){const m=a[c][f];m?.specialType==="stone"&&[`${f-1},${c}`,`${f+1},${c}`,`${f},${c-1}`,`${f},${c+1}`].some(x=>o.has(x))&&(s.push(m),a[c][f]=null)}return{destroyedStones:s,newBoard:a}}function Qx(r,t){const a=t.map(o=>[...o]),s=[];for(const o of r)if(o.specialType==="frozen"){const c=o.frozenCount||2;c>1?a[o.y][o.x]={...o,frozenCount:c-1}:s.push(o)}else s.push(o);return{blocksToRemove:s,updatedBoard:a}}function Xx(){const{board:r,currentBlock:t,currentBlocks:a,gameStatus:s,level:o,combo:c,chainCount:f,gravityDirection:m,activePowerUp:p,updateBoard:b,addScore:x,incrementCombo:T,resetCombo:w,incrementChain:O,resetChain:k,spawnBlock:F,softDrop:U,updateStatistics:j,updateMissionProgress:W,updateLevelObjective:$,checkPuzzleComplete:se,gameMode:ce,statistics:le}=Ye(),{updateAchievement:M,addBattlePassXP:S}=Yn(),[C,N]=re.useState(!1),[D,B]=re.useState([]),[R,Ue]=re.useState(0),[We,X]=re.useState([]),oe=re.useRef(null),xe=re.useRef(null),Be=re.useRef(0),P=re.useRef(!1),V=re.useRef(!1),ae=p?.type==="timeSlow"?Wg(o)*2:Wg(o),ue=re.useCallback(async be=>{const fe=Px(be);if(fe.length===0)return{result:null,newBoard:be};let de=0,Re=0;const ye=[],Ce=[];let Oe=!1,Ve=be.map(it=>[...it]);const Ae=fe.flat(),{blocksToRemove:nt,updatedBoard:St}=Qx(Ae,Ve);Ve=St;for(const it of nt)ye.push({x:it.x,y:it.y,color:it.color}),Ve[it.y][it.x]=null,de++,it.specialType!=="normal"&&(Re++,it.specialType==="multiplier"&&(Oe=!0));B(ye);const vt=Hx(Ve,nt,o);Ve=vt.newBoard,de+=vt.additionalCleared.length,Ce.push(...vt.effects);for(const it of vt.additionalCleared)ye.push({x:it.x,y:it.y,color:it.color}),it.specialType!=="normal"&&Re++;const Mt=Fx(Ve,[...nt,...vt.additionalCleared]);Ve=Mt.newBoard,de+=Mt.destroyedStones.length;for(const it of Mt.destroyedStones)ye.push({x:it.x,y:it.y,color:it.color}),Re++;Ce.length>0&&X(Ce);const at=qx(Ve),$e=(p?.type==="scoreMultiplier"?2:1)*(Oe?2:1),hn=Ye.getState().chainCount,as=Ye.getState().combo,ci=Ye.getState().isFeverMode,It=_x({blocksCleared:de,chainCount:hn+1,comboCount:as,level:o,powerUpMultiplier:$e,perfectClear:at,isFeverMode:ci,specialBlocksCleared:Re}),Dn=Ye.getState().addFeverGauge;Dn&&Dn(de*3+(hn+1)*10),await new Promise(it=>setTimeout(it,qi.FUSION_ANIMATION_DURATION)),Ce.length>0&&await new Promise(it=>setTimeout(it,qi.SPECIAL_EFFECT_DURATION));const ca=Gx(Ve,m);return B([]),X([]),{result:{clearedBlocks:[...nt,...vt.additionalCleared,...Mt.destroyedStones],score:It,chainCount:hn+1,isChainReaction:hn>0,specialEffects:Ce},newBoard:ca}},[o,m,p]),ge=re.useCallback(async()=>{if(P.current)return;P.current=!0,N(!0);let be=0,fe=0,de=0,Re=Ye.getState().board;for(k();;){const{result:Ce,newBoard:Oe}=await ue(Re);if(!Ce)break;Re=Oe,b(Re),de++,be+=Ce.score,fe+=Ce.clearedBlocks.length,O(),Ue(de),await new Promise(Ve=>setTimeout(Ve,qi.CHAIN_DELAY))}if(be>0){if(x(be),T(),j({totalBlocksCleared:le.totalBlocksCleared+fe,totalFusions:le.totalFusions+1,maxChain:Math.max(le.maxChain,de)}),W("blocks_fused",fe),de>=5&&W("chain",1),Ye.getState().gameMode==="puzzle"){const Oe=Ye.getState();if($("score",be),$("clearBlocks",fe),de>0){const Ve=Oe.levelObjectives.find(Ae=>Ae.type==="chains");Ve&&de>Ve.current&&$("chains",de-Ve.current)}setTimeout(()=>{Ye.getState().checkPuzzleComplete()},100)}M("chain_5",de),M("chain_10",de),M("chain_15",de),M("chain_20",de),S(Math.floor(be/100)),xe.current&&clearTimeout(xe.current),xe.current=window.setTimeout(()=>{w()},qi.COMBO_TIMEOUT)}Ue(0),N(!1),P.current=!1,Ye.getState().gameStatus==="playing"&&setTimeout(()=>{F()},50)},[ue,x,T,w,O,k,F,b,le,j,W,$,M,S]);re.useEffect(()=>{a.length>0?V.current=!0:V.current&&s==="playing"&&!P.current&&(V.current=!1,ge())},[a,s,ge]),re.useEffect(()=>{if(s!=="playing"||C){oe.current&&(clearInterval(oe.current),oe.current=null);return}Be.current=Date.now();const be=()=>{const fe=Date.now(),de=Ye.getState();de.currentBlocks.length>0&&!P.current&&fe-Be.current>=ae&&(de.softDrop(),Be.current=fe)};return oe.current=window.setInterval(be,50),()=>{oe.current&&(clearInterval(oe.current),oe.current=null)}},[s,ae,C]),re.useEffect(()=>()=>{oe.current&&clearInterval(oe.current),xe.current&&clearTimeout(xe.current)},[]);const Ee=re.useCallback(()=>{if(a.length===0)return null;const{dx:be,dy:fe}=dd[m];let de=1/0;for(const ye of a){let Ce=0,Oe=ye.x,Ve=ye.y;for(;;){const Ae=Oe+be,nt=Ve+fe;if(Ae<0||Ae>=me.COLUMNS||nt<0||nt>=me.ROWS||r[nt]?.[Ae]!==null)break;Ce++,Oe=Ae,Ve=nt}de=Math.min(de,Ce)}const Re=a[0];return{x:Re.x+be*de,y:Re.y+fe*de}},[a,r,m]);return{isProcessingFusion:C,fusionEffects:D,chainEffects:R,specialEffects:We,getGhostPosition:Ee,dropSpeed:ae}}function Yx(r){const{gameStatus:t,moveBlock:a,softDrop:s,hardDrop:o,doHoldBlock:c,pauseGame:f,isPowerUpSelecting:m,setGravityDirection:p}=Ye(),{settings:b}=Yn(),x=re.useRef({startX:0,startY:0,startTime:0,lastTapTime:0,isDragging:!1}),T=re.useRef(null),w=re.useCallback(U=>{!b.hapticEnabled||!navigator.vibrate||navigator.vibrate(yx[U])},[b.hapticEnabled]),O=re.useCallback(U=>{if(t!=="playing")return;const j=U.touches[0],W=Date.now();x.current={startX:j.clientX,startY:j.clientY,startTime:W,lastTapTime:x.current.lastTapTime,isDragging:!1},T.current=window.setTimeout(()=>{w("medium"),c(),x.current.isDragging=!0},Gi.LONG_PRESS_DURATION)},[t,c,w]),k=re.useCallback(U=>{if(t!=="playing")return;const j=U.touches[0],{startX:W,startY:$,isDragging:se}=x.current,ce=j.clientX-W,le=j.clientY-$,M=Math.abs(ce),S=Math.abs(le);if((M>10||S>10)&&T.current&&(clearTimeout(T.current),T.current=null),M>=Gi.SWIPE_THRESHOLD||S>=Gi.SWIPE_THRESHOLD){if(x.current.isDragging=!0,m){M>S?p(ce>0?"right":"left"):p(le>0?"down":"up"),x.current.startX=j.clientX,x.current.startY=j.clientY;return}M>S&&M>=Gi.SWIPE_THRESHOLD&&(ce>0?a("right"):a("left"),w("light"),x.current.startX=j.clientX),S>M&&S>=Gi.SWIPE_THRESHOLD&&(le>0&&(s(),w("light")),x.current.startY=j.clientY)}},[t,m,a,s,p,w]),F=re.useCallback(U=>{if(t!=="playing")return;T.current&&(clearTimeout(T.current),T.current=null);const{startX:j,startY:W,startTime:$,lastTapTime:se,isDragging:ce}=x.current,le=Date.now(),M=le-$;if(!ce&&M<Gi.LONG_PRESS_DURATION){const S=U.changedTouches[0],C=Math.abs(S.clientX-j),N=Math.abs(S.clientY-W);C<10&&N<10&&(le-se<Gi.DOUBLE_TAP_DELAY?(w("medium"),o()):w("selection"),x.current.lastTapTime=le)}if(ce){const C=U.changedTouches[0].clientY-W,N=C/M*1e3;C>0&&N>Gi.FAST_SWIPE_VELOCITY&&(w("heavy"),o())}x.current.isDragging=!1},[t,o,w]);return re.useEffect(()=>{const U=r.current;if(U)return U.addEventListener("touchstart",O,{passive:!0}),U.addEventListener("touchmove",k,{passive:!0}),U.addEventListener("touchend",F,{passive:!0}),()=>{U.removeEventListener("touchstart",O),U.removeEventListener("touchmove",k),U.removeEventListener("touchend",F),T.current&&clearTimeout(T.current)}},[r,O,k,F]),{triggerHaptic:w}}class Kx{audioContext=null;masterGain=null;musicGain=null;sfxGain=null;currentOscillators=[];isFeverMode=!1;bgmInterval=null;ambientInterval=null;constructor(){this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.musicGain=this.audioContext.createGain(),this.sfxGain=this.audioContext.createGain();const t=this.audioContext.createDynamicsCompressor();t.threshold.value=-24,t.knee.value=30,t.ratio.value=12,t.attack.value=.003,t.release.value=.25,this.musicGain.connect(t),this.sfxGain.connect(t),t.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination)}catch{console.warn("Web Audio API not supported")}}resume(){this.audioContext?.state==="suspended"&&this.audioContext.resume()}setMusicVolume(t){this.musicGain&&(this.musicGain.gain.value=t)}setSfxVolume(t){this.sfxGain&&(this.sfxGain.gain.value=t)}createReverb(t=1){if(!this.audioContext)return null;const a=this.audioContext.createConvolver(),s=this.audioContext.sampleRate,o=s*t,c=this.audioContext.createBuffer(2,o,s);for(let f=0;f<2;f++){const m=c.getChannelData(f);for(let p=0;p<o;p++)m[p]=(Math.random()*2-1)*Math.pow(1-p/o,2)}return a.buffer=c,a}playChord(t,a,s="sine",o=.15){t.forEach((c,f)=>{setTimeout(()=>{this.playTone(c,a,s,o/t.length)},f*20)})}playTone(t,a,s="sine",o=.3){if(!this.audioContext||!this.sfxGain)return;const c=this.audioContext.createOscillator(),f=this.audioContext.createGain(),m=this.audioContext.createBiquadFilter();c.type=s,c.frequency.value=t;const p=this.audioContext.createOscillator(),b=this.audioContext.createGain();p.type=s,p.frequency.value=t*2,b.gain.value=o*.3,m.type="lowpass",m.frequency.value=Math.min(t*4,8e3),m.Q.value=1;const x=this.audioContext.currentTime;f.gain.setValueAtTime(0,x),f.gain.linearRampToValueAtTime(o,x+.02),f.gain.linearRampToValueAtTime(o*.7,x+.1),f.gain.setValueAtTime(o*.7,x+a*.8),f.gain.exponentialRampToValueAtTime(.01,x+a),c.connect(m),p.connect(b),b.connect(m),m.connect(f),f.connect(this.sfxGain),c.start(x),p.start(x),c.stop(x+a),p.stop(x+a)}playSoundEffect(t){if(this.audioContext)switch(t){case"blockLand":this.playTone(150,.15,"sine",.3),this.playTone(80,.2,"sine",.2),setTimeout(()=>this.playTone(100,.1,"sine",.15),50),this.playTone(400,.05,"triangle",.08);break;case"blockMove":this.playTone(800,.05,"sine",.1),this.playTone(1e3,.04,"sine",.06),this.playTone(600,.03,"triangle",.04);break;case"blockRotate":this.playTone(400,.08,"sine",.15),setTimeout(()=>this.playTone(600,.07,"sine",.14),25),setTimeout(()=>this.playTone(800,.06,"sine",.12),50),setTimeout(()=>this.playTone(1e3,.05,"triangle",.08),75),setTimeout(()=>this.playTone(1200,.1,"sine",.04),100);break;case"hardDrop":this.playTone(50,.2,"sine",.4),this.playTone(70,.18,"triangle",.35),this.playTone(100,.15,"sine",.25),setTimeout(()=>{this.playTone(80,.12,"triangle",.2),this.playTone(120,.1,"sine",.15),this.playTone(200,.08,"triangle",.1)},60),setTimeout(()=>this.playTone(60,.15,"sine",.1),150);break;case"fusion":[523,659,784,988,1175].forEach((p,b)=>{setTimeout(()=>{this.playTone(p,.3,"sine",.22),this.playTone(p*1.5,.25,"triangle",.12),this.playTone(p*2,.2,"sine",.06)},b*50)}),setTimeout(()=>{for(let p=0;p<8;p++)setTimeout(()=>{this.playTone(1500+Math.random()*2500,.12,"sine",.08),this.playTone(2e3+Math.random()*2e3,.08,"triangle",.05)},p*35)},200);break;case"chain":const s=349;for(let p=0;p<8;p++)setTimeout(()=>{const b=s*Math.pow(1.12,p);this.playChord([b,b*1.25,b*1.5],.15,"sine",.28),p>3&&this.playTone(b*2,.1,"triangle",.08)},p*60);setTimeout(()=>this.playTone(3e3,.2,"sine",.06),500);break;case"combo":this.playChord([523,659,784],.12,"sine",.2),setTimeout(()=>this.playChord([587,740,880],.12,"sine",.22),70),setTimeout(()=>this.playChord([659,831,988],.14,"sine",.24),140),setTimeout(()=>this.playTone(1175,.18,"sine",.22),200),setTimeout(()=>{for(let p=0;p<4;p++)setTimeout(()=>this.playTone(1800+p*300,.08,"sine",.06),p*25)},250);break;case"levelUp":[{notes:[523,659,784],delay:0,dur:.2},{notes:[587,740,880],delay:100,dur:.2},{notes:[659,831,988],delay:200,dur:.2},{notes:[784,988,1175],delay:300,dur:.25},{notes:[880,1100,1319],delay:420,dur:.3},{notes:[1047,1319,1568],delay:550,dur:.4}].forEach(({notes:p,delay:b,dur:x})=>{setTimeout(()=>{this.playChord(p,x,"sine",.28)},b)});for(let p=0;p<12;p++)setTimeout(()=>{this.playTone(1200+Math.random()*2500,.12,"sine",.1)},600+p*45);this.playTone(80,.3,"sine",.2),setTimeout(()=>this.playTone(60,.4,"sine",.15),550);break;case"powerUpGet":this.playTone(698,.1,"sine",.28),setTimeout(()=>this.playTone(880,.1,"sine",.3),50),setTimeout(()=>this.playTone(1047,.12,"sine",.32),100),setTimeout(()=>this.playTone(1319,.15,"sine",.3),150),setTimeout(()=>this.playTone(1568,.2,"sine",.25),210),setTimeout(()=>{for(let p=0;p<6;p++)setTimeout(()=>this.playTone(2e3+p*250,.1,"sine",.08),p*30)},280);break;case"powerUpUse":for(let p=0;p<12;p++)setTimeout(()=>{this.playTone(150+p*70,.06,"sawtooth",.18-p*.01)},p*25);setTimeout(()=>{this.playChord([784,988,1175],.35,"sine",.25),this.playTone(1568,.3,"triangle",.15)},320),setTimeout(()=>{for(let p=0;p<5;p++)setTimeout(()=>this.playTone(1500-p*200,.15,"sine",.08),p*50)},400);break;case"gameOver":const c=[{freq:523,dur:.35},{freq:494,dur:.35},{freq:440,dur:.35},{freq:392,dur:.5},{freq:349,dur:.6},{freq:330,dur:.8}];let f=0;c.forEach(({freq:p,dur:b})=>{setTimeout(()=>{this.playTone(p,b,"sine",.25),this.playTone(p*.5,b,"sine",.12),this.playTone(p*.75,b*.8,"sine",.08)},f),f+=b*380}),setTimeout(()=>{this.playTone(262,1.5,"sine",.08),this.playTone(330,1.5,"sine",.06)},f);break;case"highScore":[523,587,659,784,880,988,1047,1175,1319,1568].forEach((p,b)=>{setTimeout(()=>{this.playChord([p,p*1.25,p*1.5],.22,"sine",.28)},b*80)});for(let p=0;p<10;p++)setTimeout(()=>this.playTone(80,.08,"triangle",.2-p*.015),p*30);for(let p=0;p<25;p++)setTimeout(()=>{this.playTone(600+Math.random()*3500,.18,"sine",.12)},800+p*35);setTimeout(()=>{this.playChord([1568,1976,2349],.5,"sine",.2)},1700);break;case"achievement":this.playChord([659,831,988],.18,"sine",.28),setTimeout(()=>this.playChord([784,988,1175],.18,"sine",.3),100),setTimeout(()=>this.playChord([880,1100,1319],.22,"sine",.32),200),setTimeout(()=>this.playChord([1047,1319,1568],.35,"sine",.3),320),setTimeout(()=>{this.playTone(100,.15,"sine",.15);for(let p=0;p<5;p++)setTimeout(()=>this.playTone(1800+p*200,.1,"sine",.07),p*40)},400);break;case"buttonClick":this.playTone(1400,.04,"sine",.14),this.playTone(1e3,.035,"sine",.1),this.playTone(700,.03,"triangle",.06);break;case"rewardGet":this.playTone(784,.1,"sine",.25),setTimeout(()=>this.playTone(988,.1,"sine",.27),70),setTimeout(()=>this.playTone(1175,.12,"sine",.28),140),setTimeout(()=>this.playTone(1319,.15,"sine",.26),220),setTimeout(()=>{for(let p=0;p<10;p++)setTimeout(()=>{this.playTone(1800+p*180,.1,"sine",.12),p%2===0&&this.playTone(2500+p*100,.06,"triangle",.06)},p*35)},280);break;case"purchaseSuccess":this.playChord([523,659,784],.12,"sine",.28),setTimeout(()=>this.playChord([659,784,988],.12,"sine",.3),90),setTimeout(()=>this.playChord([784,988,1175],.15,"sine",.32),180),setTimeout(()=>this.playChord([988,1175,1480],.2,"sine",.28),280),setTimeout(()=>{for(let p=0;p<6;p++)setTimeout(()=>this.playTone(2200+p*150,.08,"sine",.08),p*40)},350);break;case"wheelSpin":this.playTone(500,.04,"sine",.18),this.playTone(600,.03,"triangle",.12);break;case"jackpot":for(let p=0;p<15;p++)setTimeout(()=>{this.playTone(250+p*80,.22,"sine",.28),this.playTone(250+p*80+250,.2,"sine",.18)},p*70);setTimeout(()=>{for(let p=0;p<8;p++)setTimeout(()=>{this.playTone(p%2===0?800:1200,.25,"sine",.2)},p*200)},1100),setTimeout(()=>{for(let p=0;p<30;p++)setTimeout(()=>{this.playTone(400+Math.random()*3e3,.22,"sine",.15)},p*45)},1200),setTimeout(()=>{this.playChord([1047,1319,1568,1976],.6,"sine",.25)},2600);break}}startBGM(t=1){if(!this.audioContext||!this.musicGain)return;this.stopBGM();const s=60/(110+t*5),o={melody:[523,587,659,784,880,988,1047,1175],bass:[131,147,165,196,220,247],chord:[[262,330,392],[294,370,440],[330,415,494],[349,440,523],[392,494,587],[440,523,659]]};let c=0,f=0;const m=[0,2,4,5,7,5,4,2],p=()=>{if(!this.audioContext||!this.musicGain)return;const b=this.audioContext.currentTime,x=this.isFeverMode;if(c%2===0){const T=this.audioContext.createOscillator(),w=this.audioContext.createGain();T.type="sine",T.frequency.value=o.bass[c%6],w.gain.setValueAtTime(x?.18:.12,b),w.gain.exponentialRampToValueAtTime(.01,b+s*.9),T.connect(w),w.connect(this.musicGain),T.start(b),T.stop(b+s),this.currentOscillators.push(T)}if(c%4===0){const T=this.audioContext.createOscillator(),w=this.audioContext.createGain();T.type="sine",T.frequency.setValueAtTime(x?80:60,b),T.frequency.exponentialRampToValueAtTime(30,b+.1),w.gain.setValueAtTime(x?.25:.18,b),w.gain.exponentialRampToValueAtTime(.01,b+.15),T.connect(w),w.connect(this.musicGain),T.start(b),T.stop(b+.2),this.currentOscillators.push(T)}if(c%(x?1:2)===0){const T=this.audioContext.createOscillator(),w=this.audioContext.createGain(),O=this.audioContext.createBiquadFilter();T.type="square",T.frequency.value=8e3,O.type="highpass",O.frequency.value=7e3,w.gain.setValueAtTime(.03,b),w.gain.exponentialRampToValueAtTime(.001,b+.05),T.connect(O),O.connect(w),w.connect(this.musicGain),T.start(b),T.stop(b+.08),this.currentOscillators.push(T)}if(c%2===0){const T=o.melody[m[f%m.length]],w=this.audioContext.createOscillator(),O=this.audioContext.createGain();w.type=x?"sawtooth":"triangle",w.frequency.value=T,O.gain.setValueAtTime(x?.12:.08,b),O.gain.exponentialRampToValueAtTime(.01,b+s*.7),w.connect(O),O.connect(this.musicGain),w.start(b),w.stop(b+s*.8),this.currentOscillators.push(w),f++}if(c%8===0&&o.chord[Math.floor(c/8)%o.chord.length].forEach(w=>{const O=this.audioContext.createOscillator(),k=this.audioContext.createGain();O.type="sine",O.frequency.value=w,k.gain.setValueAtTime(.04,b),k.gain.setValueAtTime(.04,b+s*6),k.gain.exponentialRampToValueAtTime(.001,b+s*7.5),O.connect(k),k.connect(this.musicGain),O.start(b),O.stop(b+s*8),this.currentOscillators.push(O)}),x&&c%1===0){const T=o.melody[c*3%o.melody.length],w=this.audioContext.createOscillator(),O=this.audioContext.createGain();w.type="sine",w.frequency.value=T,O.gain.setValueAtTime(.06,b),O.gain.exponentialRampToValueAtTime(.001,b+s*.4),w.connect(O),O.connect(this.musicGain),w.start(b),w.stop(b+s*.5),this.currentOscillators.push(w)}c++};this.bgmInterval=window.setInterval(p,s*1e3),this.startAmbient()}startAmbient(){if(!this.audioContext||!this.musicGain)return;const t=()=>{if(!this.audioContext||!this.musicGain)return;const a=this.audioContext.currentTime,s=100+Math.random()*100,o=this.audioContext.createOscillator(),c=this.audioContext.createGain(),f=this.audioContext.createBiquadFilter();o.type="sine",o.frequency.value=s,f.type="lowpass",f.frequency.value=200,c.gain.setValueAtTime(0,a),c.gain.linearRampToValueAtTime(.02,a+1),c.gain.setValueAtTime(.02,a+3),c.gain.linearRampToValueAtTime(0,a+4),o.connect(f),f.connect(c),c.connect(this.musicGain),o.start(a),o.stop(a+5)};this.ambientInterval=window.setInterval(t,5e3)}setFeverMode(t){this.isFeverMode=t}stopBGM(){this.bgmInterval&&(clearInterval(this.bgmInterval),this.bgmInterval=null),this.ambientInterval&&(clearInterval(this.ambientInterval),this.ambientInterval=null),this.currentOscillators.forEach(t=>{try{t.stop()}catch{}}),this.currentOscillators=[]}cleanup(){this.stopBGM(),this.audioContext&&this.audioContext.close()}}let Wf=null;function $x(){return Wf||(Wf=new Kx),Wf}function oa(){const{settings:r}=Yn(),t=re.useRef(null);re.useEffect(()=>{t.current=$x(),t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0);const c=()=>{t.current?.resume(),window.removeEventListener("click",c),window.removeEventListener("touchstart",c)};return window.addEventListener("click",c),window.addEventListener("touchstart",c),()=>{window.removeEventListener("click",c),window.removeEventListener("touchstart",c)}},[]),re.useEffect(()=>{t.current&&(t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0))},[r.soundEnabled,r.musicEnabled,r.soundVolume,r.musicVolume]);const a=re.useCallback(c=>{r.soundEnabled&&t.current&&t.current.playSoundEffect(c)},[r.soundEnabled]),s=re.useCallback((c=1)=>{r.musicEnabled&&t.current&&t.current.startBGM(c)},[r.musicEnabled]),o=re.useCallback(()=>{t.current?.stopBGM()},[]);return{playSound:a,startBGM:s,stopBGM:o}}const Zx={red:0,blue:1,green:2,yellow:3,purple:4,orange:3,cyan:1,pink:0,rainbow:0},lu=re.memo(function({color:t,size:a,isGhost:s=!1,isFusing:o=!1,isMatched:c=!1,specialType:f="normal",frozenCount:m=0}){const{settings:p,equippedSkinId:b}=Yn(),x=re.useMemo(()=>fo[b]||fo.classic,[b]),T=Zx[t]??0,w=x.colors[T]||x.colors[0],O=p.colorBlindMode?nx:Bd,k=p.colorBlindMode?O[t]:w,F=p.colorBlindMode?ax[t]:null,U=t==="rainbow",j=f!=="normal",W=bv[f],$=f==="frozen",se=f==="stone";if(s)return g.jsx("div",{className:"absolute rounded-md box-border transition-all duration-75",style:{width:a-2,height:a-2,borderColor:k,borderWidth:"2px",borderStyle:"dashed",backgroundColor:`${k}15`,boxShadow:`0 0 10px ${k}40`}});if(se)return g.jsxs(ie.div,{className:"absolute rounded-md overflow-hidden",style:{width:a-2,height:a-2,background:"linear-gradient(145deg, #6c757d, #495057)",border:"2px solid #343a40"},initial:!1,animate:{scale:o?[1,1.1,0]:1},transition:{scale:{duration:.3}},children:[g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"}}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-lg",children:""})]});const ce=()=>{if(U)return"linear-gradient(135deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff)";if($)return`linear-gradient(145deg, ${k}90, ${k}60)`;switch(x.innerEffect){case"glow":return`radial-gradient(circle at 30% 30%, ${k}dd, ${k}88 70%, ${k}44)`;case"glass":return`linear-gradient(145deg, ${k}ee, ${k}aa 50%, ${k}cc)`;case"gradient":return`linear-gradient(135deg, ${k}, ${k}88, ${k}cc)`;case"flat":return k;case"metallic":return`linear-gradient(145deg, ${k}ff, ${k}66 30%, ${k}cc 70%, ${k}ff)`;case"matte":return`linear-gradient(180deg, ${k}ee, ${k}bb)`;default:return k}},le=()=>{if(x.glowIntensity<=0)return"none";const N=Math.round(x.glowIntensity*20);return`0 0 ${N}px ${k}, 0 0 ${N*2}px ${k}66`},M=()=>{switch(x.texture){case"lines":return"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.1) 2px, rgba(255,255,255,0.1) 4px)";case"dots":return"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.2) 1px, transparent 1px)";case"circuit":return"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%)";case"cracks":return"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.2) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.15) 61%, transparent 62%)";case"noise":return`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`;default:return"none"}},S=()=>{const N={scale:o?[1,1.2,0]:c?[1,1.1,1]:1,filter:o?"brightness(1.5)":"brightness(1)",rotate:U?360:0};switch(x.animation){case"pulse":return{...N,boxShadow:[`0 0 5px ${k}`,`0 0 20px ${k}`,`0 0 5px ${k}`]};case"shimmer":return N;case"fire":return{...N,y:[0,-2,0,-1,0]};case"ice":return{...N,opacity:[1,.9,1]};case"electric":return{...N,x:[-1,1,-1,0]};default:return N}},C=()=>{const N={scale:{duration:o?.3:.2},rotate:{duration:3,repeat:1/0,ease:"linear"}};switch(x.animation){case"pulse":return{...N,boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}};case"fire":return{...N,y:{duration:.3,repeat:1/0,ease:"easeInOut"}};case"ice":return{...N,opacity:{duration:2,repeat:1/0,ease:"easeInOut"}};case"electric":return{...N,x:{duration:.1,repeat:1/0}};default:return N}};return g.jsxs(ie.div,{className:"absolute overflow-hidden block-3d",style:{width:a-2,height:a-2,borderRadius:x.borderRadius,background:ce(),opacity:o?.8:1,zIndex:o?10:1,border:$?"2px solid #a5d8ff":j?`2px solid ${W?.color||k}`:x.borderWidth>0?`${x.borderWidth}px ${x.borderStyle} ${k}88`:"none",boxShadow:j&&!$?`0 0 8px ${W?.color||k}60`:le()},initial:!1,animate:S(),transition:C(),children:[x.innerEffect==="glossy"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-transparent to-black/10 pointer-events-none"}),x.innerEffect==="glass"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent pointer-events-none"}),x.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30 pointer-events-none"}),g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius,border:x.innerEffect==="flat"?"none":"1px solid rgba(255,255,255,0.2)"}}),x.texture!=="none"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-50",style:{backgroundImage:M(),backgroundSize:x.texture==="dots"?"8px 8px":"100% 100%",borderRadius:x.borderRadius}}),x.animation==="shimmer"&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(110deg, transparent 20%, rgba(255,255,255,0.4) 50%, transparent 80%)",borderRadius:x.borderRadius},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}}),x.animation==="fire"&&g.jsx(ie.div,{className:"absolute -inset-1 pointer-events-none",style:{background:`radial-gradient(ellipse at bottom, ${k}88 0%, transparent 70%)`,filter:"blur(2px)",borderRadius:x.borderRadius},animate:{opacity:[.5,.8,.5],scale:[1,1.1,1]},transition:{duration:.5,repeat:1/0}}),x.animation==="ice"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(200,230,255,0.2) 100%)",borderRadius:x.borderRadius}}),x.animation==="electric"&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius},animate:{boxShadow:[`inset 0 0 5px ${k}`,`inset 0 0 15px ${k}, 0 0 10px ${k}`,`inset 0 0 5px ${k}`]},transition:{duration:.2,repeat:1/0}}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-200/50 to-blue-300/30"}),g.jsx(ie.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.4) 50%, transparent 60%)",backgroundSize:"200% 200%"},animate:{backgroundPosition:["0% 0%","200% 200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),m>0&&g.jsx("div",{className:"absolute bottom-0 right-0 bg-cyan-600 text-white text-xs font-bold px-1 rounded-tl",children:m})]}),j&&!$&&W?.icon&&g.jsx(ie.div,{className:"absolute inset-0 flex items-center justify-center text-base drop-shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:W.icon}),o&&g.jsx(ie.div,{className:"absolute inset-0 rounded-md",style:{boxShadow:`0 0 20px 5px ${k}`}}),F&&g.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{background:Jx(F)}}),j&&!$&&g.jsx(ie.div,{className:"absolute inset-0 rounded-md pointer-events-none",animate:{boxShadow:[`0 0 5px ${W?.color||k}40`,`0 0 15px ${W?.color||k}60`,`0 0 5px ${W?.color||k}40`]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})});function Jx(r){switch(r){case"striped":return"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.3) 5px, rgba(0,0,0,0.3) 10px)";case"dotted":return"radial-gradient(circle, rgba(0,0,0,0.3) 2px, transparent 2.5px) 0 0 / 8px 8px";case"crosshatch":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px)";case"diagonal":return"repeating-linear-gradient(135deg, transparent, transparent 3px, rgba(255,255,255,0.5) 3px, rgba(255,255,255,0.5) 5px)";case"grid":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px)";case"waves":return"repeating-linear-gradient(45deg, transparent 0px, transparent 5px, rgba(255,255,255,0.3) 5px, rgba(255,255,255,0.3) 10px)";case"circles":return"radial-gradient(circle at 50% 50%, transparent 3px, rgba(255,255,255,0.3) 3px, rgba(255,255,255,0.3) 5px, transparent 5px)";default:return"none"}}function Wx({cellSize:r}){const t=re.useRef(null),{triggerHaptic:a}=Yx(t),{playSound:s,startBGM:o,stopBGM:c}=oa(),{board:f,currentBlock:m,currentBlocks:p,gameStatus:b,level:x,gravityDirection:T,isPowerUpSelecting:w,garbagePending:O,garbageTimer:k}=Ye(),{settings:F}=Yn(),{fusionEffects:U,chainEffects:j,specialEffects:W,getGhostPosition:$}=Xx(),se=re.useMemo(()=>{if(r)return r;if(typeof window<"u"){const S=window.innerWidth<768,C=Math.min(window.innerWidth-32,450),N=window.innerHeight-200,D=Math.floor(C/me.COLUMNS),B=Math.floor(N/me.ROWS);return Math.min(D,B,S?38:45)}return 40},[r]),ce=se*me.COLUMNS,le=se*me.ROWS,M=re.useMemo(()=>F.showGhostBlock&&m?$():null,[m,F.showGhostBlock,$]);return re.useEffect(()=>{b==="playing"?o(x):c()},[b,x,o,c]),re.useEffect(()=>{U.length>0&&(s("fusion"),a("medium"))},[U,s,a]),re.useEffect(()=>{j>1&&(s("chain"),a("heavy"))},[j,s,a]),g.jsx("div",{className:"relative p-1 rounded-xl bg-gradient-to-b from-gray-800 to-gray-900 shadow-2xl border border-white/10",children:g.jsxs("div",{ref:t,className:"relative overflow-hidden rounded-lg bg-[#0a0a15] select-none touch-none",style:{width:ce,height:le},children:[g.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:g.jsxs("svg",{width:"100%",height:"100%",children:[g.jsx("defs",{children:g.jsx("pattern",{id:"grid",width:se,height:se,patternUnits:"userSpaceOnUse",children:g.jsx("path",{d:`M ${se} 0 L 0 0 0 ${se}`,fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"})})}),g.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),T==="down"&&g.jsx("div",{className:"absolute top-0 left-0 right-0 pointer-events-none transition-opacity duration-500",style:{height:se*3,background:"linear-gradient(to bottom, rgba(255, 50, 50, 0.15) 0%, transparent 100%)",borderBottom:"1px dashed rgba(255, 50, 50, 0.3)"}}),M&&m&&M.y!==m.y&&g.jsx("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:M.x*se+1,top:M.y*se+1,zIndex:0},children:g.jsx(lu,{color:m.color,size:se,isGhost:!0})}),g.jsx(un,{children:f.map((S,C)=>S.map((N,D)=>{if(!N)return null;const B=U.some(R=>R.x===D&&R.y===C);return g.jsx(ie.div,{className:"absolute",style:{left:D*se+1,top:C*se+1,zIndex:10},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:g.jsx(lu,{color:N.color,size:se,isFusing:B,specialType:N.specialType,frozenCount:N.frozenCount})},N.id)}))}),g.jsx(un,{children:p.map((S,C)=>g.jsx(ie.div,{className:"absolute pointer-events-none",style:{left:S.x*se+1,top:S.y*se+1,zIndex:20},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.05},children:g.jsx(lu,{color:S.color,size:se,specialType:S.specialType})},S.id||`falling-${C}`))}),O>0&&g.jsx(ie.div,{className:"absolute bottom-0 left-0 right-0 flex justify-center items-center gap-1 py-1 bg-red-600/80 backdrop-blur-sm z-25",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:g.jsxs("span",{className:"text-white text-xs font-bold",children:[" GARBAGE INCOMING: ",O," ROW",O>1?"S":""]})}),g.jsx("div",{className:"absolute inset-0 pointer-events-none z-30",children:g.jsxs(un,{children:[U.map((S,C)=>g.jsx(ie.div,{className:"absolute rounded-full blur-md",style:{left:S.x*se,top:S.y*se,width:se,height:se,backgroundColor:Bd[S.color]||"#fff"},initial:{scale:.5,opacity:.8},animate:{scale:2.5,opacity:0},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"}},`fusion-${C}`)),j>1&&g.jsx(ie.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:.5,opacity:0,y:20},animate:{scale:1.2,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:g.jsxs("div",{className:"text-center",children:[g.jsxs("h2",{className:"text-5xl font-black italic text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-orange-500 drop-shadow-[0_0_15px_rgba(255,165,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:[j," CHAIN!"]}),g.jsx("p",{className:"text-white font-bold text-lg drop-shadow-md",children:"COMBO BOOSTER"})]})}),W.map((S,C)=>g.jsxs(ie.div,{className:"absolute pointer-events-none",style:{left:S.x*se,top:S.y*se,width:se,height:se},initial:{scale:1,opacity:1},animate:{scale:2.5,opacity:0},transition:{duration:.5},children:[S.type==="bomb"&&g.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-orange-500 to-red-600 blur-md"}),S.type==="lightning"&&g.jsx("div",{className:"w-full h-full bg-yellow-400 blur-lg animate-pulse"}),S.type==="cross"&&g.jsxs("div",{className:"w-full h-full",children:[g.jsx("div",{className:"absolute inset-x-0 top-1/2 h-2 -translate-y-1/2 bg-green-400 blur-sm"}),g.jsx("div",{className:"absolute inset-y-0 left-1/2 w-2 -translate-x-1/2 bg-green-400 blur-sm"})]})]},`special-${C}`))]})}),g.jsx(un,{children:w&&g.jsx(ie.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-white font-bold text-xl mb-6 neon-text",children:"  "}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsx("div",{}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("up"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("div",{}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("left"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("down"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("right"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""})]})]})})}),b==="paused"&&g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] z-30 flex items-center justify-center",children:g.jsx("h2",{className:"text-3xl font-bold text-white tracking-widest",style:{fontFamily:"var(--font-display)"},children:"PAUSED"})})]})})}function sy({cellSize:r=24,maxBlocks:t=gx}){const{nextBlocks:a,nextSpecialTypes:s}=Ye(),o=a.slice(0,t),c=s?.slice(0,t)||[];return g.jsxs("div",{className:"glass-panel rounded-xl p-3 flex flex-col items-center min-w-[60px]",children:[g.jsx("h3",{className:"text-[10px] font-bold text-gray-400 mb-3 tracking-widest text-center",children:"NEXT"}),g.jsx("div",{className:"flex flex-col gap-3 items-center",children:o.map((f,m)=>g.jsxs(ie.div,{className:"relative",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:m*.1},style:{transform:`scale(${m===0?1:.8})`,opacity:m===0?1:.6,filter:m===0?"none":"grayscale(30%)"},children:[g.jsx(lu,{color:f,size:r,specialType:c[m]||"normal"}),m===0&&g.jsx("div",{className:"absolute -inset-2 rounded-full border border-white/20 animate-pulse pointer-events-none"})]},`next-${m}`))})]})}const e2=150;function t2({visible:r=!0}){const{playSound:t}=oa(),a=re.useRef(null),s=re.useRef({}),o=re.useCallback((T,w)=>{const O=Date.now(),k=s.current[T]||0;return O-k<e2?!1:(s.current[T]=O,w(),!0)},[]);re.useEffect(()=>{const T=new Set;let w=null,O=null,k=null;const F=()=>{w&&clearInterval(w),k&&clearTimeout(k),w=null,k=null,O=null},U=$=>{if(T.has($.code)){$.preventDefault();return}T.add($.code);const se=Ye.getState();if($.code==="Escape"||$.code==="KeyP"){se.gameStatus==="playing"?se.pauseGame():se.gameStatus==="paused"&&se.resumeGame();return}if(se.gameStatus==="playing"){if(se.isPowerUpSelecting){$.code==="ArrowUp"?se.setGravityDirection("up"):$.code==="ArrowDown"?se.setGravityDirection("down"):$.code==="ArrowLeft"?se.setGravityDirection("left"):$.code==="ArrowRight"&&se.setGravityDirection("right");return}if($.code==="ArrowLeft"||$.code==="KeyA"){$.preventDefault(),F(),se.moveBlock("left"),O="left",k=window.setTimeout(()=>{O==="left"&&(w=window.setInterval(()=>Ye.getState().moveBlock("left"),50))},250);return}if($.code==="ArrowRight"||$.code==="KeyD"){$.preventDefault(),F(),se.moveBlock("right"),O="right",k=window.setTimeout(()=>{O==="right"&&(w=window.setInterval(()=>{Ye.getState().moveBlock("right")},50))},250);return}if($.code==="ArrowDown"||$.code==="KeyS"){$.preventDefault(),se.softDrop();return}if($.code==="ArrowUp"||$.code==="KeyW"){$.preventDefault(),se.rotateBlock();return}if($.code==="Space"){$.preventDefault(),se.hardDrop();return}}},j=$=>{T.delete($.code),($.code==="ArrowLeft"||$.code==="KeyA")&&O==="left"&&F(),($.code==="ArrowRight"||$.code==="KeyD")&&O==="right"&&F()},W=()=>{T.clear(),F()};return window.addEventListener("keydown",U),window.addEventListener("keyup",j),window.addEventListener("blur",W),()=>{window.removeEventListener("keydown",U),window.removeEventListener("keyup",j),window.removeEventListener("blur",W),F()}},[]);const c=re.useCallback(()=>{o("hardDrop",()=>{t("hardDrop"),Ye.getState().hardDrop()})},[t,o]),f=re.useCallback(()=>{o("rotate",()=>{t("blockRotate"),Ye.getState().rotateBlock()})},[t,o]),m=re.useCallback(()=>{o("softDrop",()=>{t("blockMove"),Ye.getState().softDrop()})},[t,o]),p=re.useCallback(T=>{t("blockMove"),Ye.getState().moveBlock(T),a.current&&clearInterval(a.current),a.timeout&&clearTimeout(a.timeout);const w=setTimeout(()=>{a.current=window.setInterval(()=>{Ye.getState().moveBlock(T)},80)},300);a.timeout=w},[t]),b=re.useCallback(()=>{a.timeout&&(clearTimeout(a.timeout),a.timeout=null),a.current&&(clearInterval(a.current),a.current=null)},[]),x=Ye(T=>T.currentBlocks);return r?g.jsx("div",{className:"w-full px-3 pb-4 pt-2 select-none touch-none",children:g.jsxs("div",{className:"flex justify-between items-center gap-3 max-w-md mx-auto",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(ed,{icon:"",onStart:()=>p("left"),onEnd:b}),g.jsx(ed,{icon:"",onStart:m}),g.jsx(ed,{icon:"",onStart:()=>p("right"),onEnd:b})]}),g.jsxs(ie.button,{className:`w-14 h-14 rounded-2xl flex flex-col items-center justify-center
                     text-white font-bold shadow-lg border-b-4
                     active:border-b-0 active:translate-y-1 transition-all
                     ${x.length>1?"bg-gradient-to-br from-purple-500 to-indigo-600 border-purple-700":"bg-slate-700 border-slate-600 opacity-50"}`,whileTap:{scale:.9},onTouchStart:T=>{T.preventDefault(),T.stopPropagation(),f()},children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-[8px] opacity-80",children:""})]}),g.jsxs(ie.button,{className:`w-20 h-14 rounded-2xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500\r
                     flex items-center justify-center gap-1 text-white font-bold\r
                     shadow-lg shadow-orange-500/30 border-b-4 border-orange-700\r
                     active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.95},onTouchStart:T=>{T.preventDefault(),T.stopPropagation(),c()},children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-sm",children:"DROP"})]})]})}):null}function ed({icon:r,onStart:t,onEnd:a}){const s=re.useCallback(c=>{c.preventDefault(),c.stopPropagation(),t()},[t]),o=re.useCallback(c=>{c.preventDefault(),c.stopPropagation(),a?.()},[a]);return g.jsx(ie.button,{className:`w-14 h-14 rounded-2xl bg-slate-700/90 backdrop-blur\r
                 flex items-center justify-center text-white text-2xl font-bold\r
                 shadow-lg border-b-4 border-slate-600\r
                 active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.9},onTouchStart:s,onTouchEnd:o,onTouchCancel:o,children:r})}function n2(){const{powerUps:r,gameStatus:t,usePowerUp:a,toggleGravitySelection:s,activatePowerUp:o}=Ye(),{playSound:c}=oa(),f=m=>{if(t!=="playing")return;const p=r.find(b=>b.type===m);if(!(!p||p.count<=0)){if(c("powerUpUse"),m==="gravityShift"){s(!0),a(m);return}a(m),(m==="timeSlow"||m==="scoreMultiplier"||m==="freeze")&&(o({type:m,count:1,isActive:!0,remainingTime:m==="scoreMultiplier"?30:5}),setTimeout(()=>{Ye.getState().deactivatePowerUp()},m==="scoreMultiplier"?3e4:5e3))}};return r.length===0?null:g.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:g.jsx(un,{children:r.map(m=>{const p=mx[m.type];return g.jsxs(ie.button,{className:`relative flex flex-col items-center gap-1 p-2 bg-game-panel/80 rounded-lg\r
                         hover:bg-game-accent/30 active:scale-95 transition-all border border-white/10\r
                         disabled:opacity-50 disabled:cursor-not-allowed`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:()=>f(m.type),disabled:t!=="playing"||m.count<=0,title:`${p.name}: ${p.description}`,children:[g.jsx("span",{className:"text-2xl",children:p.icon}),g.jsx("span",{className:"text-xs text-gray-400",children:p.name}),g.jsx("span",{className:`absolute -top-1 -right-1 w-5 h-5 bg-game-accent rounded-full\r
                             text-xs font-bold flex items-center justify-center text-white`,children:m.count})]},m.type)})})})}function a2(){const{score:r,level:t,combo:a,chainCount:s,gravityDirection:o,gameTime:c,activePowerUp:f,statistics:m,feverGauge:p,isFeverMode:b,gameMode:x,movesRemaining:T,puzzleLevel:w,levelObjectives:O}=Ye(),k=x==="puzzle",F=j=>{const W=Math.floor(j/60),$=j%60;return`${W}:${$.toString().padStart(2,"0")}`},U=r>m.highScore&&r>0;return g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsxs("div",{className:"glass-panel p-4 rounded-xl text-center relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 tracking-wider mb-1",children:"SCORE"}),g.jsx(ie.p,{initial:{scale:1.1},animate:{scale:1},className:`text-2xl font-mono font-bold ${U?"text-yellow-400 neon-text":"text-white"}`,children:r.toLocaleString()},r),U&&g.jsx("span",{className:"absolute top-2 right-2 text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded font-bold animate-pulse",children:"NEW"})]}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:k?g.jsxs(g.Fragment,{children:[g.jsx(eu,{label:"PUZZLE",value:`Lv.${w}`,color:"text-purple-400"}),g.jsx(eu,{label:"MOVES",value:T,color:T<=5?"text-red-400":"text-yellow-400"})]}):g.jsxs(g.Fragment,{children:[g.jsx(eu,{label:"LEVEL",value:t,color:"text-cyan-400"}),g.jsx(eu,{label:"TIME",value:F(c),color:"text-gray-300",font:"font-mono"})]})}),k&&O.length>0&&g.jsxs("div",{className:"glass-panel p-3 rounded-xl",children:[g.jsx("p",{className:"text-xs font-bold text-purple-300 mb-2",children:" OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:O.map((j,W)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${j.completed?"bg-green-500":"bg-gray-600"}`,children:j.completed?"":""}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center text-xs",children:[g.jsxs("span",{className:"text-gray-300",children:[j.type==="score"&&"",j.type==="clearBlocks"&&" ",j.type==="chains"&&"",j.type==="clearColor"&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"w-3 h-3 rounded",style:{background:Bd[j.color]}})," "]})]}),g.jsxs("span",{className:j.completed?"text-green-400":"text-white",children:[j.current,"/",j.target]})]}),g.jsx("div",{className:"w-full bg-gray-700 h-1 rounded-full mt-1 overflow-hidden",children:g.jsx("div",{className:`h-full ${j.completed?"bg-green-500":"bg-purple-500"}`,style:{width:`${Math.min(100,j.current/j.target*100)}%`}})})]})]},W))})]}),g.jsx(un,{children:(a>1||s>0)&&g.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex gap-2",children:[a>1&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-orange-900/20 border-orange-500/30",children:[g.jsx("span",{className:"text-[10px] text-orange-300",children:"COMBO"}),g.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["x",a]})]}),s>0&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-purple-900/20 border-purple-500/30",children:[g.jsx("span",{className:"text-[10px] text-purple-300",children:"CHAIN"}),g.jsx("span",{className:"text-lg font-bold text-purple-400",children:s})]})]})}),g.jsxs("div",{className:`glass-panel p-3 rounded-xl ${b?"border-2 border-orange-500 bg-orange-900/30":""}`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:`text-xs font-bold ${b?"text-orange-300":"text-gray-400"}`,children:b?" FEVER MODE!":"FEVER GAUGE"}),g.jsxs("span",{className:`text-xs font-mono ${b?"text-orange-400":"text-gray-500"}`,children:[Math.floor(p||0),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-700/50 h-3 rounded-full overflow-hidden",children:g.jsx(ie.div,{className:`h-full ${b?"bg-gradient-to-r from-orange-500 via-red-500 to-yellow-500":"bg-gradient-to-r from-orange-600 to-yellow-500"}`,initial:!1,animate:{width:`${Math.min(p||0,Vs.MAX_GAUGE)}%`},transition:{duration:.3},style:{boxShadow:b?"0 0 10px #ff6b00":"none"}})}),b&&g.jsx(ie.p,{className:"text-center text-xs text-orange-300 mt-1 font-bold",animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},children:"x3 SCORE MULTIPLIER!"})]}),g.jsxs("div",{className:"glass-panel p-3 rounded-xl flex items-center justify-between",children:[g.jsx("span",{className:"text-xs text-gray-400",children:"GRAVITY"}),g.jsx(ie.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},className:"text-xl bg-white/10 w-8 h-8 rounded flex items-center justify-center",children:px[o]},o)]}),g.jsx(un,{children:f&&g.jsxs(ie.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"glass-panel p-3 rounded-xl border-l-4 border-blue-500 bg-blue-900/20",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-xs font-bold text-blue-300",children:"ACTIVE EFFECT"}),f.remainingTime&&g.jsxs("span",{className:"text-xs font-mono text-white",children:[f.remainingTime,"s"]})]}),g.jsxs("div",{className:"text-sm text-white font-medium flex items-center gap-2",children:[f.type==="timeSlow"&&" Time Slow",f.type==="scoreMultiplier"&&" x2 Score",f.type==="freeze"&&" Frozen"]}),f.remainingTime&&g.jsx("div",{className:"w-full bg-gray-700 h-1 mt-2 rounded-full overflow-hidden",children:g.jsx(ie.div,{className:"h-full bg-blue-400",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:f.remainingTime,ease:"linear"}})})]})})]})}function eu({label:r,value:t,color:a,font:s=""}){return g.jsxs("div",{className:"glass-panel p-2 rounded-lg text-center flex flex-col justify-center min-h-[60px]",children:[g.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-0.5",children:r}),g.jsx("p",{className:`text-lg font-bold ${a} ${s}`,children:t})]})}var zd={};(function r(t,a,s,o){var c=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),f=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=(function(){if(!t.OffscreenCanvas)return!1;try{var P=new OffscreenCanvas(1,1),V=P.getContext("2d");V.fillRect(0,0,1,1);var ae=P.transferToImageBitmap();V.createPattern(ae,"no-repeat")}catch{return!1}return!0})();function p(){}function b(P){var V=a.exports.Promise,ae=V!==void 0?V:t.Promise;return typeof ae=="function"?new ae(P):(P(p,p),null)}var x=(function(P,V){return{transform:function(ae){if(P)return ae;if(V.has(ae))return V.get(ae);var ue=new OffscreenCanvas(ae.width,ae.height),ge=ue.getContext("2d");return ge.drawImage(ae,0,0),V.set(ae,ue),ue},clear:function(){V.clear()}}})(m,new Map),T=(function(){var P=Math.floor(16.666666666666668),V,ae,ue={},ge=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(V=function(Ee){var be=Math.random();return ue[be]=requestAnimationFrame(function fe(de){ge===de||ge+P-1<de?(ge=de,delete ue[be],Ee()):ue[be]=requestAnimationFrame(fe)}),be},ae=function(Ee){ue[Ee]&&cancelAnimationFrame(ue[Ee])}):(V=function(Ee){return setTimeout(Ee,P)},ae=function(Ee){return clearTimeout(Ee)}),{frame:V,cancel:ae}})(),w=(function(){var P,V,ae={};function ue(ge){function Ee(be,fe){ge.postMessage({options:be||{},callback:fe})}ge.init=function(fe){var de=fe.transferControlToOffscreen();ge.postMessage({canvas:de},[de])},ge.fire=function(fe,de,Re){if(V)return Ee(fe,null),V;var ye=Math.random().toString(36).slice(2);return V=b(function(Ce){function Oe(Ve){Ve.data.callback===ye&&(delete ae[ye],ge.removeEventListener("message",Oe),V=null,x.clear(),Re(),Ce())}ge.addEventListener("message",Oe),Ee(fe,ye),ae[ye]=Oe.bind(null,{data:{callback:ye}})}),V},ge.reset=function(){ge.postMessage({reset:!0});for(var fe in ae)ae[fe](),delete ae[fe]}}return function(){if(P)return P;if(!s&&c){var ge=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([ge])))}catch(Ee){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Ee),null}ue(P)}return P}})(),O={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function k(P,V){return V?V(P):P}function F(P){return P!=null}function U(P,V,ae){return k(P&&F(P[V])?P[V]:O[V],ae)}function j(P){return P<0?0:Math.floor(P)}function W(P,V){return Math.floor(Math.random()*(V-P))+P}function $(P){return parseInt(P,16)}function se(P){return P.map(ce)}function ce(P){var V=String(P).replace(/[^0-9a-f]/gi,"");return V.length<6&&(V=V[0]+V[0]+V[1]+V[1]+V[2]+V[2]),{r:$(V.substring(0,2)),g:$(V.substring(2,4)),b:$(V.substring(4,6))}}function le(P){var V=U(P,"origin",Object);return V.x=U(V,"x",Number),V.y=U(V,"y",Number),V}function M(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function S(P){var V=P.getBoundingClientRect();P.width=V.width,P.height=V.height}function C(P){var V=document.createElement("canvas");return V.style.position="fixed",V.style.top="0px",V.style.left="0px",V.style.pointerEvents="none",V.style.zIndex=P,V}function N(P,V,ae,ue,ge,Ee,be,fe,de){P.save(),P.translate(V,ae),P.rotate(Ee),P.scale(ue,ge),P.arc(0,0,1,be,fe,de),P.restore()}function D(P){var V=P.angle*(Math.PI/180),ae=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-V+(.5*ae-Math.random()*ae),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function B(P,V){V.x+=Math.cos(V.angle2D)*V.velocity+V.drift,V.y+=Math.sin(V.angle2D)*V.velocity+V.gravity,V.velocity*=V.decay,V.flat?(V.wobble=0,V.wobbleX=V.x+10*V.scalar,V.wobbleY=V.y+10*V.scalar,V.tiltSin=0,V.tiltCos=0,V.random=1):(V.wobble+=V.wobbleSpeed,V.wobbleX=V.x+10*V.scalar*Math.cos(V.wobble),V.wobbleY=V.y+10*V.scalar*Math.sin(V.wobble),V.tiltAngle+=.1,V.tiltSin=Math.sin(V.tiltAngle),V.tiltCos=Math.cos(V.tiltAngle),V.random=Math.random()+2);var ae=V.tick++/V.totalTicks,ue=V.x+V.random*V.tiltCos,ge=V.y+V.random*V.tiltSin,Ee=V.wobbleX+V.random*V.tiltCos,be=V.wobbleY+V.random*V.tiltSin;if(P.fillStyle="rgba("+V.color.r+", "+V.color.g+", "+V.color.b+", "+(1-ae)+")",P.beginPath(),f&&V.shape.type==="path"&&typeof V.shape.path=="string"&&Array.isArray(V.shape.matrix))P.fill(oe(V.shape.path,V.shape.matrix,V.x,V.y,Math.abs(Ee-ue)*.1,Math.abs(be-ge)*.1,Math.PI/10*V.wobble));else if(V.shape.type==="bitmap"){var fe=Math.PI/10*V.wobble,de=Math.abs(Ee-ue)*.1,Re=Math.abs(be-ge)*.1,ye=V.shape.bitmap.width*V.scalar,Ce=V.shape.bitmap.height*V.scalar,Oe=new DOMMatrix([Math.cos(fe)*de,Math.sin(fe)*de,-Math.sin(fe)*Re,Math.cos(fe)*Re,V.x,V.y]);Oe.multiplySelf(new DOMMatrix(V.shape.matrix));var Ve=P.createPattern(x.transform(V.shape.bitmap),"no-repeat");Ve.setTransform(Oe),P.globalAlpha=1-ae,P.fillStyle=Ve,P.fillRect(V.x-ye/2,V.y-Ce/2,ye,Ce),P.globalAlpha=1}else if(V.shape==="circle")P.ellipse?P.ellipse(V.x,V.y,Math.abs(Ee-ue)*V.ovalScalar,Math.abs(be-ge)*V.ovalScalar,Math.PI/10*V.wobble,0,2*Math.PI):N(P,V.x,V.y,Math.abs(Ee-ue)*V.ovalScalar,Math.abs(be-ge)*V.ovalScalar,Math.PI/10*V.wobble,0,2*Math.PI);else if(V.shape==="star")for(var Ae=Math.PI/2*3,nt=4*V.scalar,St=8*V.scalar,vt=V.x,Mt=V.y,at=5,$e=Math.PI/at;at--;)vt=V.x+Math.cos(Ae)*St,Mt=V.y+Math.sin(Ae)*St,P.lineTo(vt,Mt),Ae+=$e,vt=V.x+Math.cos(Ae)*nt,Mt=V.y+Math.sin(Ae)*nt,P.lineTo(vt,Mt),Ae+=$e;else P.moveTo(Math.floor(V.x),Math.floor(V.y)),P.lineTo(Math.floor(V.wobbleX),Math.floor(ge)),P.lineTo(Math.floor(Ee),Math.floor(be)),P.lineTo(Math.floor(ue),Math.floor(V.wobbleY));return P.closePath(),P.fill(),V.tick<V.totalTicks}function R(P,V,ae,ue,ge){var Ee=V.slice(),be=P.getContext("2d"),fe,de,Re=b(function(ye){function Ce(){fe=de=null,be.clearRect(0,0,ue.width,ue.height),x.clear(),ge(),ye()}function Oe(){s&&!(ue.width===o.width&&ue.height===o.height)&&(ue.width=P.width=o.width,ue.height=P.height=o.height),!ue.width&&!ue.height&&(ae(P),ue.width=P.width,ue.height=P.height),be.clearRect(0,0,ue.width,ue.height),Ee=Ee.filter(function(Ve){return B(be,Ve)}),Ee.length?fe=T.frame(Oe):Ce()}fe=T.frame(Oe),de=Ce});return{addFettis:function(ye){return Ee=Ee.concat(ye),Re},canvas:P,promise:Re,reset:function(){fe&&T.cancel(fe),de&&de()}}}function Ue(P,V){var ae=!P,ue=!!U(V||{},"resize"),ge=!1,Ee=U(V,"disableForReducedMotion",Boolean),be=c&&!!U(V||{},"useWorker"),fe=be?w():null,de=ae?M:S,Re=P&&fe?!!P.__confetti_initialized:!1,ye=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ce;function Oe(Ae,nt,St){for(var vt=U(Ae,"particleCount",j),Mt=U(Ae,"angle",Number),at=U(Ae,"spread",Number),$e=U(Ae,"startVelocity",Number),hn=U(Ae,"decay",Number),as=U(Ae,"gravity",Number),ci=U(Ae,"drift",Number),It=U(Ae,"colors",se),Dn=U(Ae,"ticks",Number),ca=U(Ae,"shapes"),it=U(Ae,"scalar"),ua=!!U(Ae,"flat"),Hs=le(Ae),is=vt,ui=[],Fs=P.width*Hs.x,Tn=P.height*Hs.y;is--;)ui.push(D({x:Fs,y:Tn,angle:Mt,spread:at,startVelocity:$e,color:It[is%It.length],shape:ca[W(0,ca.length)],ticks:Dn,decay:hn,gravity:as,drift:ci,scalar:it,flat:ua}));return Ce?Ce.addFettis(ui):(Ce=R(P,ui,de,nt,St),Ce.promise)}function Ve(Ae){var nt=Ee||U(Ae,"disableForReducedMotion",Boolean),St=U(Ae,"zIndex",Number);if(nt&&ye)return b(function($e){$e()});ae&&Ce?P=Ce.canvas:ae&&!P&&(P=C(St),document.body.appendChild(P)),ue&&!Re&&de(P);var vt={width:P.width,height:P.height};fe&&!Re&&fe.init(P),Re=!0,fe&&(P.__confetti_initialized=!0);function Mt(){if(fe){var $e={getBoundingClientRect:function(){if(!ae)return P.getBoundingClientRect()}};de($e),fe.postMessage({resize:{width:$e.width,height:$e.height}});return}vt.width=vt.height=null}function at(){Ce=null,ue&&(ge=!1,t.removeEventListener("resize",Mt)),ae&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,Re=!1)}return ue&&!ge&&(ge=!0,t.addEventListener("resize",Mt,!1)),fe?fe.fire(Ae,vt,at):Oe(Ae,vt,at)}return Ve.reset=function(){fe&&fe.reset(),Ce&&Ce.reset()},Ve}var We;function X(){return We||(We=Ue(null,{useWorker:!0,resize:!0})),We}function oe(P,V,ae,ue,ge,Ee,be){var fe=new Path2D(P),de=new Path2D;de.addPath(fe,new DOMMatrix(V));var Re=new Path2D;return Re.addPath(de,new DOMMatrix([Math.cos(be)*ge,Math.sin(be)*ge,-Math.sin(be)*Ee,Math.cos(be)*Ee,ae,ue])),Re}function xe(P){if(!f)throw new Error("path confetti are not supported in this browser");var V,ae;typeof P=="string"?V=P:(V=P.path,ae=P.matrix);var ue=new Path2D(V),ge=document.createElement("canvas"),Ee=ge.getContext("2d");if(!ae){for(var be=1e3,fe=be,de=be,Re=0,ye=0,Ce,Oe,Ve=0;Ve<be;Ve+=2)for(var Ae=0;Ae<be;Ae+=2)Ee.isPointInPath(ue,Ve,Ae,"nonzero")&&(fe=Math.min(fe,Ve),de=Math.min(de,Ae),Re=Math.max(Re,Ve),ye=Math.max(ye,Ae));Ce=Re-fe,Oe=ye-de;var nt=10,St=Math.min(nt/Ce,nt/Oe);ae=[St,0,0,St,-Math.round(Ce/2+fe)*St,-Math.round(Oe/2+de)*St]}return{type:"path",path:V,matrix:ae}}function Be(P){var V,ae=1,ue="#000000",ge='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?V=P:(V=P.text,ae="scalar"in P?P.scalar:ae,ge="fontFamily"in P?P.fontFamily:ge,ue="color"in P?P.color:ue);var Ee=10*ae,be=""+Ee+"px "+ge,fe=new OffscreenCanvas(Ee,Ee),de=fe.getContext("2d");de.font=be;var Re=de.measureText(V),ye=Math.ceil(Re.actualBoundingBoxRight+Re.actualBoundingBoxLeft),Ce=Math.ceil(Re.actualBoundingBoxAscent+Re.actualBoundingBoxDescent),Oe=2,Ve=Re.actualBoundingBoxLeft+Oe,Ae=Re.actualBoundingBoxAscent+Oe;ye+=Oe+Oe,Ce+=Oe+Oe,fe=new OffscreenCanvas(ye,Ce),de=fe.getContext("2d"),de.font=be,de.fillStyle=ue,de.fillText(V,Ve,Ae);var nt=1/ae;return{type:"bitmap",bitmap:fe.transferToImageBitmap(),matrix:[nt,0,0,nt,-ye*nt/2,-Ce*nt/2]}}a.exports=function(){return X().apply(this,arguments)},a.exports.reset=function(){X().reset()},a.exports.create=Ue,a.exports.shapeFromPath=xe,a.exports.shapeFromText=Be})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),zd,!1);const Pd=zd.exports;zd.exports.create;const i2=()=>{};var ry={};const Ev=function(r){const t=[];let a=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[a++]=o:o<2048?(t[a++]=o>>6|192,t[a++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[a++]=o>>18|240,t[a++]=o>>12&63|128,t[a++]=o>>6&63|128,t[a++]=o&63|128):(t[a++]=o>>12|224,t[a++]=o>>6&63|128,t[a++]=o&63|128)}return t},s2=function(r){const t=[];let a=0,s=0;for(;a<r.length;){const o=r[a++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[a++];t[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[a++],f=r[a++],m=r[a++],p=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[a++],f=r[a++];t[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return t.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,b=p?r[o+2]:0,x=c>>2,T=(c&3)<<4|m>>4;let w=(m&15)<<2|b>>6,O=b&63;p||(O=64,f||(w=64)),s.push(a[x],a[T],a[w],a[O])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Ev(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):s2(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=a[r.charAt(o++)],m=o<r.length?a[r.charAt(o)]:0;++o;const b=o<r.length?a[r.charAt(o)]:64;++o;const T=o<r.length?a[r.charAt(o)]:64;if(++o,c==null||m==null||b==null||T==null)throw new r2;const w=c<<2|m>>4;if(s.push(w),b!==64){const O=m<<4&240|b>>2;if(s.push(O),T!==64){const k=b<<6&192|T;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class r2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l2=function(r){const t=Ev(r);return Sv.encodeByteArray(t,!0)},yu=function(r){return l2(r).replace(/\./g,"")},o2=function(r){try{return Sv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const u2=()=>c2().__FIREBASE_DEFAULTS__,h2=()=>{if(typeof process>"u"||typeof ry>"u")return;const r=ry.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},f2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&o2(r[1]);return t&&JSON.parse(t)},Gd=()=>{try{return i2()||u2()||h2()||f2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},d2=r=>Gd()?.emulatorHosts?.[r],m2=r=>{const t=d2(r);if(!t)return;const a=t.lastIndexOf(":");if(a<=0||a+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(a+1),10);return t[0]==="["?[t.substring(1,a-1),s]:[t.substring(0,a),s]},wv=()=>Gd()?.config;class p2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,s)=>{a?this.reject(a):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,s))}}}function qd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g2(r){return(await fetch(r,{credentials:"include"})).ok}function y2(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[yu(JSON.stringify(a)),yu(JSON.stringify(f)),""].join(".")}const ro={};function v2(){const r={prod:[],emulator:[]};for(const t of Object.keys(ro))ro[t]?r.emulator.push(t):r.prod.push(t);return r}function b2(r){let t=document.getElementById(r),a=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),a=!0),{created:a,element:t}}let ly=!1;function _2(r,t){if(typeof window>"u"||typeof document>"u"||!qd(window.location.host)||ro[r]===t||ro[r]||ly)return;ro[r]=t;function a(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=v2().prod.length>0;function f(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,O){w.setAttribute("width","24"),w.setAttribute("id",O),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function b(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{ly=!0,f()},w}function x(w,O){w.setAttribute("id",O),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=b2(s),O=a("text"),k=document.getElementById(O)||document.createElement("span"),F=a("learnmore"),U=document.getElementById(F)||document.createElement("a"),j=a("preprendIcon"),W=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const $=w.element;m($),x(U,F);const se=b();p(W,j),$.append(W,k,U,se),document.body.appendChild($)}c?(k.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function x2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T2(){const r=Gd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E2(){return!T2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S2(){try{return typeof indexedDB=="object"}catch{return!1}}function w2(){return new Promise((r,t)=>{try{let a=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),a||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{a=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(a){t(a)}})}const A2="FirebaseError";class Kr extends Error{constructor(t,a,s){super(a),this.code=t,this.customData=s,this.name=A2,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Av.prototype.create)}}class Av{constructor(t,a,s){this.service=t,this.serviceName=a,this.errors=s}create(t,...a){const s=a[0]||{},o=`${this.service}/${t}`,c=this.errors[t],f=c?C2(c,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Kr(o,m,s)}}function C2(r,t){return r.replace(N2,(a,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const N2=/\{\$([^}]+)}/g;function vu(r,t){if(r===t)return!0;const a=Object.keys(r),s=Object.keys(t);for(const o of a){if(!s.includes(o))return!1;const c=r[o],f=t[o];if(oy(c)&&oy(f)){if(!vu(c,f))return!1}else if(c!==f)return!1}for(const o of s)if(!a.includes(o))return!1;return!0}function oy(r){return r!==null&&typeof r=="object"}function Gr(r){return r&&r._delegate?r._delegate:r}class mo{constructor(t,a,s){this.name=t,this.instanceFactory=a,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const js="[DEFAULT]";class R2{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const s=new p2;if(this.instancesDeferred.set(a,s),this.isInitialized(a)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:a});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){const a=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(I2(t))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(t=js){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=js){return this.instances.has(t)}getOptions(t=js){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:a});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(o)}return o}onInit(t,a){const s=this.normalizeInstanceIdentifier(a),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&t(c,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,a){const s=this.onInitCallbacks.get(a);if(s)for(const o of s)try{o(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:M2(t),options:a}),this.instances.set(t,s),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=js){return this.component?this.component.multipleInstances?t:js:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M2(r){return r===js?void 0:r}function I2(r){return r.instantiationMode==="EAGER"}class D2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new R2(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const O2={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},V2=Ke.INFO,j2={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},k2=(r,t,...a)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=j2[t];if(o)console[o](`[${s}]  ${r.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cv{constructor(t){this.name=t,this._logLevel=V2,this._logHandler=k2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ke))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?O2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}const L2=(r,t)=>t.some(a=>r instanceof a);let cy,uy;function B2(){return cy||(cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U2(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nv=new WeakMap,yd=new WeakMap,Rv=new WeakMap,td=new WeakMap,Hd=new WeakMap;function z2(r){const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{a(Fi(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",f)});return t.then(a=>{a instanceof IDBCursor&&Nv.set(a,r)}).catch(()=>{}),Hd.set(t,r),t}function P2(r){if(yd.has(r))return;const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{a(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});yd.set(r,t)}let vd={get(r,t,a){if(r instanceof IDBTransaction){if(t==="done")return yd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Rv.get(r);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Fi(r[t])},set(r,t,a){return r[t]=a,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function G2(r){vd=r(vd)}function q2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const s=r.call(nd(this),t,...a);return Rv.set(s,t.sort?t.sort():[t]),Fi(s)}:U2().includes(r)?function(...t){return r.apply(nd(this),t),Fi(Nv.get(this))}:function(...t){return Fi(r.apply(nd(this),t))}}function H2(r){return typeof r=="function"?q2(r):(r instanceof IDBTransaction&&P2(r),L2(r,B2())?new Proxy(r,vd):r)}function Fi(r){if(r instanceof IDBRequest)return z2(r);if(td.has(r))return td.get(r);const t=H2(r);return t!==r&&(td.set(r,t),Hd.set(t,r)),t}const nd=r=>Hd.get(r);function F2(r,t,{blocked:a,upgrade:s,blocking:o,terminated:c}={}){const f=indexedDB.open(r,t),m=Fi(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Fi(f.result),p.oldVersion,p.newVersion,Fi(f.transaction),p)}),a&&f.addEventListener("blocked",p=>a(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const Q2=["get","getKey","getAll","getAllKeys","count"],X2=["put","add","delete","clear"],ad=new Map;function hy(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(ad.get(t))return ad.get(t);const a=t.replace(/FromIndex$/,""),s=t!==a,o=X2.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Q2.includes(a)))return;const c=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let b=p.store;return s&&(b=b.index(m.shift())),(await Promise.all([b[a](...m),o&&p.done]))[0]};return ad.set(t,c),c}G2(r=>({...r,get:(t,a,s)=>hy(t,a)||r.get(t,a,s),has:(t,a)=>!!hy(t,a)||r.has(t,a)}));class Y2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(K2(a)){const s=a.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(a=>a).join(" ")}}function K2(r){return r.getComponent()?.type==="VERSION"}const bd="@firebase/app",fy="0.14.6";const ri=new Cv("@firebase/app"),$2="@firebase/app-compat",Z2="@firebase/analytics-compat",J2="@firebase/analytics",W2="@firebase/app-check-compat",eT="@firebase/app-check",tT="@firebase/auth",nT="@firebase/auth-compat",aT="@firebase/database",iT="@firebase/data-connect",sT="@firebase/database-compat",rT="@firebase/functions",lT="@firebase/functions-compat",oT="@firebase/installations",cT="@firebase/installations-compat",uT="@firebase/messaging",hT="@firebase/messaging-compat",fT="@firebase/performance",dT="@firebase/performance-compat",mT="@firebase/remote-config",pT="@firebase/remote-config-compat",gT="@firebase/storage",yT="@firebase/storage-compat",vT="@firebase/firestore",bT="@firebase/ai",_T="@firebase/firestore-compat",xT="firebase",TT="12.6.0";const _d="[DEFAULT]",ET={[bd]:"fire-core",[$2]:"fire-core-compat",[J2]:"fire-analytics",[Z2]:"fire-analytics-compat",[eT]:"fire-app-check",[W2]:"fire-app-check-compat",[tT]:"fire-auth",[nT]:"fire-auth-compat",[aT]:"fire-rtdb",[iT]:"fire-data-connect",[sT]:"fire-rtdb-compat",[rT]:"fire-fn",[lT]:"fire-fn-compat",[oT]:"fire-iid",[cT]:"fire-iid-compat",[uT]:"fire-fcm",[hT]:"fire-fcm-compat",[fT]:"fire-perf",[dT]:"fire-perf-compat",[mT]:"fire-rc",[pT]:"fire-rc-compat",[gT]:"fire-gcs",[yT]:"fire-gcs-compat",[vT]:"fire-fst",[_T]:"fire-fst-compat",[bT]:"fire-vertex","fire-js":"fire-js",[xT]:"fire-js-all"};const bu=new Map,ST=new Map,xd=new Map;function dy(r,t){try{r.container.addComponent(t)}catch(a){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,a)}}function _u(r){const t=r.name;if(xd.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;xd.set(t,r);for(const a of bu.values())dy(a,r);for(const a of ST.values())dy(a,r);return!0}function wT(r,t){const a=r.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),r.container.getProvider(t)}function AT(r){return r==null?!1:r.settings!==void 0}const CT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Av("app","Firebase",CT);class NT{constructor(t,a,s){this._isDeleted=!1,this._options={...t},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const RT=TT;function Mv(r,t={}){let a=r;typeof t!="object"&&(t={name:t});const s={name:_d,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(a||(a=wv()),!a)throw Qi.create("no-options");const c=bu.get(o);if(c){if(vu(a,c.options)&&vu(s,c.config))return c;throw Qi.create("duplicate-app",{appName:o})}const f=new D2(o);for(const p of xd.values())f.addComponent(p);const m=new NT(a,s,f);return bu.set(o,m),m}function MT(r=_d){const t=bu.get(r);if(!t&&r===_d&&wv())return Mv();if(!t)throw Qi.create("no-app",{appName:r});return t}function Br(r,t,a){let s=ET[r]??r;a&&(s+=`-${a}`);const o=s.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${t}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(f.join(" "));return}_u(new mo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const IT="firebase-heartbeat-database",DT=1,po="firebase-heartbeat-store";let id=null;function Iv(){return id||(id=F2(IT,DT,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(po)}catch(a){console.warn(a)}}}}).catch(r=>{throw Qi.create("idb-open",{originalErrorMessage:r.message})})),id}async function OT(r){try{const a=(await Iv()).transaction(po),s=await a.objectStore(po).get(Dv(r));return await a.done,s}catch(t){if(t instanceof Kr)ri.warn(t.message);else{const a=Qi.create("idb-get",{originalErrorMessage:t?.message});ri.warn(a.message)}}}async function my(r,t){try{const s=(await Iv()).transaction(po,"readwrite");await s.objectStore(po).put(t,Dv(r)),await s.done}catch(a){if(a instanceof Kr)ri.warn(a.message);else{const s=Qi.create("idb-set",{originalErrorMessage:a?.message});ri.warn(s.message)}}}function Dv(r){return`${r.name}!${r.options.appId}`}const VT=1024,jT=30;class kT{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new BT(a),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=py();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>jT){const o=UT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ri.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=py(),{heartbeatsToSend:a,unsentEntries:s}=LT(this._heartbeatsCache.heartbeats),o=yu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ri.warn(t),""}}}function py(){return new Date().toISOString().substring(0,10)}function LT(r,t=VT){const a=[];let s=r.slice();for(const o of r){const c=a.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),gy(a)>t){c.dates.pop();break}}else if(a.push({agent:o.agent,dates:[o.date]}),gy(a)>t){a.pop();break}s=s.slice(1)}return{heartbeatsToSend:a,unsentEntries:s}}class BT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S2()?w2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await OT(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return my(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return my(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function gy(r){return yu(JSON.stringify({version:2,heartbeats:r})).length}function UT(r){if(r.length===0)return-1;let t=0,a=r[0].date;for(let s=1;s<r.length;s++)r[s].date<a&&(a=r[s].date,t=s);return t}function zT(r){_u(new mo("platform-logger",t=>new Y2(t),"PRIVATE")),_u(new mo("heartbeat",t=>new kT(t),"PRIVATE")),Br(bd,fy,r),Br(bd,fy,"esm2020"),Br("fire-js","")}zT("");var PT="firebase",GT="12.6.0";Br(PT,GT,"app");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xi,Ov;(function(){var r;function t(M,S){function C(){}C.prototype=S.prototype,M.F=S.prototype,M.prototype=new C,M.prototype.constructor=M,M.D=function(N,D,B){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return S.prototype[D].apply(N,R)}}function a(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,a),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,S,C){C||(C=0);const N=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)N[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)N[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=M.g[0],C=M.g[1],D=M.g[2];let B=M.g[3],R;R=S+(B^C&(D^B))+N[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[1]+3905402710&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[2]+606105819&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[3]+3250441966&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(B^C&(D^B))+N[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[5]+1200080426&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[6]+2821735955&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[7]+4249261313&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(B^C&(D^B))+N[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[9]+2336552879&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[10]+4294925233&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[11]+2304563134&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(B^C&(D^B))+N[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[13]+4254626195&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[14]+2792965006&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[15]+1236535329&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(D^B&(C^D))+N[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[6]+3225465664&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[11]+643717713&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[0]+3921069994&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^B&(C^D))+N[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[10]+38016083&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[15]+3634488961&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[4]+3889429448&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^B&(C^D))+N[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[14]+3275163606&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[3]+4107603335&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[8]+1163531501&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^B&(C^D))+N[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[2]+4243563512&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[7]+1735328473&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[12]+2368359562&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(C^D^B)+N[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[8]+2272392833&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[11]+1839030562&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[14]+4259657740&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^B)+N[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[4]+1272893353&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[7]+4139469664&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[10]+3200236656&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^B)+N[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[0]+3936430074&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[3]+3572445317&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[6]+76029189&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^B)+N[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[12]+3873151461&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[15]+530742520&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[2]+3299628645&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(D^(C|~B))+N[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[7]+1126891415&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[14]+2878612391&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[5]+4237533241&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~B))+N[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[3]+2399980690&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[10]+4293915773&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[1]+2240044497&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~B))+N[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[15]+4264355552&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[6]+2734768916&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[13]+1309151649&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~B))+N[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[11]+3174756917&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[2]+718787259&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+B&4294967295}s.prototype.v=function(M,S){S===void 0&&(S=M.length);const C=S-this.blockSize,N=this.C;let D=this.h,B=0;for(;B<S;){if(D==0)for(;B<=C;)o(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<S;)if(N[D++]=M.charCodeAt(B++),D==this.blockSize){o(this,N),D=0;break}}else for(;B<S;)if(N[D++]=M[B++],D==this.blockSize){o(this,N),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var C=M.length-8;C<M.length;++C)M[C]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)M[S++]=this.g[C]>>>N&255;return M};function c(M,S){var C=m;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=S(M)}function f(M,S){this.h=S;const C=[];let N=!0;for(let D=M.length-1;D>=0;D--){const B=M[D]|0;N&&B==S||(C[D]=B,N=!1)}this.g=C}var m={};function p(M){return-128<=M&&M<128?c(M,function(S){return new f([S|0],S<0?-1:0)}):new f([M|0],M<0?-1:0)}function b(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return U(b(-M));const S=[];let C=1;for(let N=0;M>=C;N++)S[N]=M/C|0,C*=4294967296;return new f(S,0)}function x(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return U(x(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=b(Math.pow(S,8));let N=T;for(let B=0;B<M.length;B+=8){var D=Math.min(8,M.length-B);const R=parseInt(M.substring(B,B+D),S);D<8?(D=b(Math.pow(S,D)),N=N.j(D).add(b(R))):(N=N.j(C),N=N.add(b(R)))}return N}var T=p(0),w=p(1),O=p(16777216);r=f.prototype,r.m=function(){if(F(this))return-U(this).m();let M=0,S=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);M+=(N>=0?N:4294967296+N)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(F(this))return"-"+U(this).toString(M);const S=b(Math.pow(M,6));var C=this;let N="";for(;;){const D=se(C,S).g;C=j(C,D.j(S));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(M);if(C=D,k(C))return B+N;for(;B.length<6;)B="0"+B;N=B+N}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function F(M){return M.h==-1}r.l=function(M){return M=j(this,M),F(M)?-1:k(M)?0:1};function U(M){const S=M.g.length,C=[];for(let N=0;N<S;N++)C[N]=~M.g[N];return new f(C,~M.h).add(w)}r.abs=function(){return F(this)?U(this):this},r.add=function(M){const S=Math.max(this.g.length,M.g.length),C=[];let N=0;for(let D=0;D<=S;D++){let B=N+(this.i(D)&65535)+(M.i(D)&65535),R=(B>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);N=R>>>16,B&=65535,R&=65535,C[D]=R<<16|B}return new f(C,C[C.length-1]&-2147483648?-1:0)};function j(M,S){return M.add(U(S))}r.j=function(M){if(k(this)||k(M))return T;if(F(this))return F(M)?U(this).j(U(M)):U(U(this).j(M));if(F(M))return U(this.j(U(M)));if(this.l(O)<0&&M.l(O)<0)return b(this.m()*M.m());const S=this.g.length+M.g.length,C=[];for(var N=0;N<2*S;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<M.g.length;D++){const B=this.i(N)>>>16,R=this.i(N)&65535,Ue=M.i(D)>>>16,We=M.i(D)&65535;C[2*N+2*D]+=R*We,W(C,2*N+2*D),C[2*N+2*D+1]+=B*We,W(C,2*N+2*D+1),C[2*N+2*D+1]+=R*Ue,W(C,2*N+2*D+1),C[2*N+2*D+2]+=B*Ue,W(C,2*N+2*D+2)}for(M=0;M<S;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=S;M<2*S;M++)C[M]=0;return new f(C,0)};function W(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function $(M,S){this.g=M,this.h=S}function se(M,S){if(k(S))throw Error("division by zero");if(k(M))return new $(T,T);if(F(M))return S=se(U(M),S),new $(U(S.g),U(S.h));if(F(S))return S=se(M,U(S)),new $(U(S.g),S.h);if(M.g.length>30){if(F(M)||F(S))throw Error("slowDivide_ only works with positive integers.");for(var C=w,N=S;N.l(M)<=0;)C=ce(C),N=ce(N);var D=le(C,1),B=le(N,1);for(N=le(N,2),C=le(C,2);!k(N);){var R=B.add(N);R.l(M)<=0&&(D=D.add(C),B=R),N=le(N,1),C=le(C,1)}return S=j(M,D.j(S)),new $(D,S)}for(D=T;M.l(S)>=0;){for(C=Math.max(1,Math.floor(M.m()/S.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),B=b(C),R=B.j(S);F(R)||R.l(M)>0;)C-=N,B=b(C),R=B.j(S);k(B)&&(B=w),D=D.add(B),M=j(M,R)}return new $(D,M)}r.B=function(M){return se(this,M).h},r.and=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)&M.i(N);return new f(C,this.h&M.h)},r.or=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)|M.i(N);return new f(C,this.h|M.h)},r.xor=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)^M.i(N);return new f(C,this.h^M.h)};function ce(M){const S=M.g.length+1,C=[];for(let N=0;N<S;N++)C[N]=M.i(N)<<1|M.i(N-1)>>>31;return new f(C,M.h)}function le(M,S){const C=S>>5;S%=32;const N=M.g.length-C,D=[];for(let B=0;B<N;B++)D[B]=S>0?M.i(B+C)>>>S|M.i(B+C+1)<<32-S:M.i(B+C);return new f(D,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ov=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=x,Xi=f}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vv,no,jv,ou,Td,kv,Lv,Bv;(function(){var r,t=Object.defineProperty;function a(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=a(this);function o(u,y){if(y)e:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var G=u[A];if(!(G in _))break e;_=_[G]}u=u[u.length-1],A=_[u],y=y(A),y!=A&&y!=null&&t(_,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});var c=c||{},f=this||self;function m(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,_){return u.call.apply(u.bind,arguments)}function b(u,y,_){return b=p,b.apply(null,arguments)}function x(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function T(u,y){function _(){}_.prototype=y.prototype,u.Z=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(A,G,Y){for(var he=Array(arguments.length-2),je=2;je<arguments.length;je++)he[je-2]=arguments[je];return y.prototype[G].apply(A,he)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const y=u.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=u[A];return _}return[]}function k(u,y){for(let A=1;A<arguments.length;A++){const G=arguments[A];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=u.length||0;const Y=G.length||0;u.length=_+Y;for(let he=0;he<Y;he++)u[_+he]=G[he]}else u.push(G)}}class F{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(u){f.setTimeout(()=>{throw u},0)}function j(){var u=M;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,_){const A=$.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new F(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,le=!1,M=new W,S=()=>{const u=Promise.resolve(void 0);ce=()=>{u.then(C)}};function C(){for(var u;u=j();){try{u.h.call(u.g)}catch(_){U(_)}var y=$;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}le=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,y){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}T(Ue,D),Ue.prototype.init=function(u,y){const _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(_=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(u,y,_,A,G){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=G,this.key=++X,this.da=this.fa=!1}function xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Be(u,y,_){for(const A in u)y.call(_,u[A],A,u)}function P(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function V(u){const y={};for(const _ in u)y[_]=u[_];return y}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(u,y){let _,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(_ in A)u[_]=A[_];for(let Y=0;Y<ae.length;Y++)_=ae[Y],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function ge(u){this.src=u,this.g={},this.h=0}ge.prototype.add=function(u,y,_,A,G){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const he=be(u,y,A,G);return he>-1?(y=u[he],_||(y.fa=!1)):(y=new oe(y,this.src,Y,!!A,G),y.fa=_,u.push(y)),y};function Ee(u,y){const _=y.type;if(_ in u.g){var A=u.g[_],G=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=G>=0)&&Array.prototype.splice.call(A,G,1),Y&&(xe(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function be(u,y,_,A){for(let G=0;G<u.length;++G){const Y=u[G];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==A)return G}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),de={};function Re(u,y,_,A,G){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Re(u,y[Y],_,A,G);return null}return _=Mt(_),u&&u[We]?u.J(y,_,m(A)?!!A.capture:!1,G):ye(u,y,_,!1,A,G)}function ye(u,y,_,A,G,Y){if(!y)throw Error("Invalid event type");const he=m(G)?!!G.capture:!!G;let je=St(u);if(je||(u[fe]=je=new ge(u)),_=je.add(y,_,A,he,Y),_.proxy)return _;if(A=Ce(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)B||(G=he),G===void 0&&(G=!1),u.addEventListener(y.toString(),A,G);else if(u.attachEvent)u.attachEvent(Ae(y.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ce(){function u(_){return y.call(u.src,u.listener,_)}const y=nt;return u}function Oe(u,y,_,A,G){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Oe(u,y[Y],_,A,G);else A=m(A)?!!A.capture:!!A,_=Mt(_),u&&u[We]?(u=u.i,Y=String(y).toString(),Y in u.g&&(y=u.g[Y],_=be(y,_,A,G),_>-1&&(xe(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete u.g[Y],u.h--)))):u&&(u=St(u))&&(y=u.g[y.toString()],u=-1,y&&(u=be(y,_,A,G)),(_=u>-1?y[u]:null)&&Ve(_))}function Ve(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[We])Ee(y.i,u);else{var _=u.type,A=u.proxy;y.removeEventListener?y.removeEventListener(_,A,u.capture):y.detachEvent?y.detachEvent(Ae(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=St(y))?(Ee(_,u),_.h==0&&(_.src=null,y[fe]=null)):xe(u)}}}function Ae(u){return u in de?de[u]:de[u]="on"+u}function nt(u,y){if(u.da)u=!0;else{y=new Ue(y,this);const _=u.listener,A=u.ha||u.src;u.fa&&Ve(u),u=_.call(A,y)}return u}function St(u){return u=u[fe],u instanceof ge?u:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(u){return typeof u=="function"?u:(u[vt]||(u[vt]=function(y){return u.handleEvent(y)}),u[vt])}function at(){N.call(this),this.i=new ge(this),this.M=this,this.G=null}T(at,N),at.prototype[We]=!0,at.prototype.removeEventListener=function(u,y,_,A){Oe(this,u,y,_,A)};function $e(u,y){var _,A=u.G;if(A)for(_=[];A;A=A.G)_.push(A);if(u=u.M,A=y.type||y,typeof y=="string")y=new D(y,u);else if(y instanceof D)y.target=y.target||u;else{var G=y;y=new D(A,u),ue(y,G)}G=!0;let Y,he;if(_)for(he=_.length-1;he>=0;he--)Y=y.g=_[he],G=hn(Y,A,!0,y)&&G;if(Y=y.g=u,G=hn(Y,A,!0,y)&&G,G=hn(Y,A,!1,y)&&G,_)for(he=0;he<_.length;he++)Y=y.g=_[he],G=hn(Y,A,!1,y)&&G}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const _=u.g[y];for(let A=0;A<_.length;A++)xe(_[A]);delete u.g[y],u.h--}}this.G=null},at.prototype.J=function(u,y,_,A){return this.i.add(String(u),y,!1,_,A)},at.prototype.K=function(u,y,_,A){return this.i.add(String(u),y,!0,_,A)};function hn(u,y,_,A){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let Y=0;Y<y.length;++Y){const he=y[Y];if(he&&!he.da&&he.capture==_){const je=he.listener,At=he.ha||he.src;he.fa&&Ee(u.i,he),G=je.call(At,A)!==!1&&G}}return G&&!A.defaultPrevented}function as(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(u,y||0)}function ci(u){u.g=as(()=>{u.g=null,u.i&&(u.i=!1,ci(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class It extends N{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ci(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(u){N.call(this),this.h=u,this.g={}}T(Dn,N);var ca=[];function it(u){Be(u.g,function(y,_){this.g.hasOwnProperty(_)&&Ve(y)},u),u.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),it(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ua=f.JSON.stringify,Hs=f.JSON.parse,is=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ui(){}function Fs(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){D.call(this,"d")}T($t,D);function On(){D.call(this,"c")}T(On,D);var wt={},No=null;function Qs(){return No=No||new at}wt.Ia="serverreachability";function Ro(u){D.call(this,wt.Ia,u)}T(Ro,D);function ha(u){const y=Qs();$e(y,new Ro(y))}wt.STAT_EVENT="statevent";function ss(u,y){D.call(this,wt.STAT_EVENT,u),this.stat=y}T(ss,D);function Dt(u){const y=Qs();$e(y,new ss(y,u))}wt.Ja="timingevent";function fa(u,y){D.call(this,wt.Ja,u),this.size=y}T(fa,D);function da(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},y)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function Zu(u,y,_,A,G,Y){u.info(function(){if(u.g)if(Y){var he="",je=Y.split("&");for(let et=0;et<je.length;et++){var At=je[et].split("=");if(At.length>1){const bt=At[0];At=At[1];const Ln=bt.split("_");he=Ln.length>=2&&Ln[1]=="type"?he+(bt+"="+At+"&"):he+(bt+"=redacted&")}}}else he=null;else he=Y;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+y+`
`+_+`
`+he})}function Mo(u,y,_,A,G,Y,he){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+y+`
`+_+`
`+Y+" "+he})}function ma(u,y,_,A){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ju(u,_)+(A?" "+A:"")})}function rs(u,y){u.info(function(){return"TIMEOUT: "+y})}Kn.prototype.info=function(){};function Ju(u,y){if(!u.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var _=Y[u];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var G=A[0];if(G!="noop"&&G!="stop"&&G!="close")for(let he=1;he<A.length;he++)A[he]=""}}}}return ua(Y)}catch{return y}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function os(){}T(os,ui),os.prototype.g=function(){return new XMLHttpRequest},nl=new os;function Ua(u){return encodeURIComponent(String(u))}function Io(u){var y=1;u=u.split(":");const _=[];for(;y>0&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function $n(u,y,_,A){this.j=u,this.i=y,this.l=_,this.S=A||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ot={},Ft={};function pa(u,y,_){u.M=1,u.A=cs(jt(y)),u.u=_,u.R=!0,Xs(u,null)}function Xs(u,y){u.F=Date.now(),ga(u),u.B=jt(u.A);var _=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Zs(_.i,"t",A),u.C=0,_=u.j.L,u.h=new Zn,u.g=Qo(u.j,_?y:null,!u.u),u.P>0&&(u.O=new It(b(u.Y,u,u.g),u.P)),y=u.V,_=u.g,A=u.ba;var G="readystatechange";Array.isArray(G)||(G&&(ca[0]=G.toString()),G=ca);for(let Y=0;Y<G.length;Y++){const he=Re(_,G[Y],A||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),ha(),Zu(u.i,u.v,u.B,u.l,u.S,u.u)}$n.prototype.ba=function(u){u=u.target;const y=this.O;y&&ea(u)==3?y.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const je=ea(this.g),At=this.g.ya(),et=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||je!=4||At==7||(At==8||et<=0?ha(3):ha(2)),ya(this);var y=this.g.ca();this.X=y;var _=Wu(this);if(this.o=y==200,Mo(this.i,this.v,this.B,this.l,this.S,je,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,G=this.g;if((A=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var Y=A;break t}}Y=null}if(u=Y)ma(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,va(this,u);else{this.o=!1,this.m=3,Dt(12),En(this),Vn(this);break e}}if(this.R){u=!0;let bt;for(;!this.K&&this.C<_.length;)if(bt=Oo(this,_),bt==Ft){je==4&&(this.m=4,Dt(14),u=!1),ma(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Ot){this.m=4,Dt(15),ma(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else ma(this.i,this.l,bt,null),va(this,bt);if(Do(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||_.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)ma(this.i,this.l,_,"[Invalid Chunked Response]"),En(this),Vn(this);else if(_.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),yl(he),he.P=!0,Dt(11))}}else ma(this.i,this.l,_,null),va(this,_);je==4&&En(this),this.o&&!this.K&&(je==4?Go(this.j,this):(this.o=!1,ga(this)))}else Pa(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),En(this),Vn(this)}}}catch{}finally{}};function Wu(u){if(!Do(u))return u.g.la();const y=Zt(u.g);if(y==="")return"";let _="";const A=y.length,G=ea(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return En(u),Vn(u),"";u.h.i=new f.TextDecoder}for(let Y=0;Y<A;Y++)u.h.h=!0,_+=u.h.i.decode(y[Y],{stream:!(G&&Y==A-1)});return y.length=0,u.h.g+=_,u.C=0,u.h.g}function Do(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Oo(u,y){var _=u.C,A=y.indexOf(`
`,_);return A==-1?Ft:(_=Number(y.substring(_,A)),isNaN(_)?Ot:(A+=1,A+_>y.length?Ft:(y=y.slice(A,A+_),u.C=A+_,y)))}$n.prototype.cancel=function(){this.K=!0,En(this)};function ga(u){u.T=Date.now()+u.H,Ys(u,u.H)}function Ys(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=da(b(u.aa,u),y)}function ya(u){u.D&&(f.clearTimeout(u.D),u.D=null)}$n.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(rs(this.i,this.B),this.M!=2&&(ha(),Dt(17)),En(this),this.m=2,Vn(this)):Ys(this,this.T-u)};function Vn(u){u.j.I==0||u.K||Go(u.j,u)}function En(u){ya(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,it(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function va(u,y){try{var _=u.j;if(_.I!=0&&(_.g==u||_a(_.h,u))){if(!u.L&&_a(_.h,u)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)nr(_),vi(_);else break e;gs(_),Dt(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=da(b(_.Va,_),6e3));ba(_.h)<=1&&_.ta&&(_.ta=void 0)}else Aa(_,11)}else if((u.L||_.g==u)&&nr(_),!R(y))for(G=_.Ba.g.parse(y),y=0;y<G.length;y++){let et=G[y];const bt=et[0];if(!(bt<=_.K))if(_.K=bt,et=et[1],_.I==2)if(et[0]=="c"){_.M=et[1],_.ba=et[2];const Ln=et[3];Ln!=null&&(_.ka=Ln,_.j.info("VER="+_.ka));const Ca=et[4];Ca!=null&&(_.za=Ca,_.j.info("SVER="+_.za));const ta=et[5];ta!=null&&typeof ta=="number"&&ta>0&&(A=1.5*ta,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const na=u.g;if(na){const ys=na.g?na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var Y=A.h;Y.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sl(Y,Y.h),Y.h=null))}if(A.G){const ar=na.g?na.g.getResponseHeader("X-HTTP-Session-Id"):null;ar&&(A.wa=ar,rt(A.J,A.G,ar))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var he=u;if(A.na=Fo(A,A.L?A.ba:null,A.W),he.L){rl(A.h,he);var je=he,At=A.O;At&&(je.H=At),je.D&&(ya(je),ga(je)),A.g=he}else zo(A);_.i.length>0&&wa(_)}else et[0]!="stop"&&et[0]!="close"||Aa(_,7);else _.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Aa(_,7):pl(_):et[0]!="noop"&&_.l&&_.l.qa(et),_.A=0)}}ha(4)}catch{}}var Vt=class{constructor(u,y){this.g=u,this.map=y}};function al(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function il(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ba(u){return u.h?1:u.g?u.g.size:0}function _a(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function sl(u,y){u.g?u.g.add(y):u.h=y}function rl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}al.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ll(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.G);return y}return O(u.i)}var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(u,y){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const A=u[_].indexOf("=");let G,Y=null;A>=0?(G=u[_].substring(0,A),Y=u[_].substring(A+1)):G=u[_],y(G,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Sn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Sn?(this.l=u.l,Qt(this,u.j),this.o=u.o,this.g=u.g,hi(this,u.u),this.h=u.h,ol(this,Bo(u.i)),this.m=u.m):u&&(y=String(u).match(Vo))?(this.l=!1,Qt(this,y[1]||"",!0),this.o=xa(y[2]||""),this.g=xa(y[3]||"",!0),hi(this,y[4]),this.h=xa(y[5]||"",!0),ol(this,y[6]||"",!0),this.m=xa(y[7]||"")):(this.l=!1,this.i=new di(null,this.l))}Sn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(us(y,$s,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(us(y,$s,!0),"@"),u.push(Ua(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(us(_,_.charAt(0)=="/"?cl:jo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",us(_,ko)),u.join("")},Sn.prototype.resolve=function(u){const y=jt(this);let _=!!u.j;_?Qt(y,u.j):_=!!u.o,_?y.o=u.o:_=!!u.g,_?y.g=u.g:_=u.u!=null;var A=u.h;if(_)hi(y,u.u);else if(_=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var G=y.h.lastIndexOf("/");G!=-1&&(A=y.h.slice(0,G+1)+A)}if(G=A,G==".."||G==".")A="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){A=G.lastIndexOf("/",0)==0,G=G.split("/");const Y=[];for(let he=0;he<G.length;){const je=G[he++];je=="."?A&&he==G.length&&Y.push(""):je==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&he==G.length&&Y.push("")):(Y.push(je),A=!0)}A=Y.join("/")}else A=G}return _?y.h=A:_=u.i.toString()!=="",_?ol(y,Bo(u.i)):_=!!u.m,_&&(y.m=u.m),y};function jt(u){return new Sn(u)}function Qt(u,y,_){u.j=_?xa(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function hi(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function ol(u,y,_){y instanceof di?(u.i=y,Js(u.i,u.l)):(_||(y=us(y,fi)),u.i=new di(y,u.l))}function rt(u,y,_){u.i.set(y,_)}function cs(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xa(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,mn),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $s=/[#\/\?@]/g,jo=/[#\?:]/g,cl=/[#\?]/g,fi=/[#\?@]/g,ko=/#/g;function di(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function pn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ks(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=di.prototype,r.add=function(u,y){pn(this),this.i=null,u=mi(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function Lo(u,y){pn(u),y=mi(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ul(u,y){return pn(u),y=mi(u,y),u.g.has(y)}r.forEach=function(u,y){pn(this),this.g.forEach(function(_,A){_.forEach(function(G){u.call(y,G,A,this)},this)},this)};function hl(u,y){pn(u);let _=[];if(typeof y=="string")ul(u,y)&&(_=_.concat(u.g.get(mi(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)_=_.concat(u[y]);return _}r.set=function(u,y){return pn(this),this.i=null,u=mi(this,u),ul(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=hl(this,u),u.length>0?String(u[0]):y):y};function Zs(u,y,_){Lo(u,y),_.length>0&&(u.i=null,u.g.set(mi(u,y),O(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const G=Ua(_);_=hl(this,_);for(let Y=0;Y<_.length;Y++){let he=G;_[Y]!==""&&(he+="="+Ua(_[Y])),u.push(he)}}return this.i=u.join("&")};function Bo(u){const y=new di;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function mi(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Js(u,y){y&&!u.j&&(pn(u),u.i=null,u.g.forEach(function(_,A){const G=A.toLowerCase();A!=G&&(Lo(this,A),Zs(this,G,_))},u)),u.j=y}function Jn(u,y){const _=new Kn;if(f.Image){const A=new Image;A.onload=x(jn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=x(jn,_,"TestLoadImage: error",!1,y,A),A.onabort=x(jn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=x(jn,_,"TestLoadImage: timeout",!1,y,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else y(!1)}function fl(u,y){const _=new Kn,A=new AbortController,G=setTimeout(()=>{A.abort(),jn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:A.signal}).then(Y=>{clearTimeout(G),Y.ok?jn(_,"TestPingServer: ok",!0,y):jn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),jn(_,"TestPingServer: error",!1,y)})}function jn(u,y,_,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(_)}catch{}}function pi(){this.g=new is}function Ta(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Ta,ui),Ta.prototype.g=function(){return new hs(this.i,this.h)};function hs(u,y){at.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(hs,at),r=hs.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ws(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ws(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?gi(this):Wn(this),this.readyState==3&&Ws(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,gi(this))},r.Na=function(u){this.g&&(this.response=u,gi(this))},r.ga=function(){this.g&&gi(this)};function gi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Wn(u)}r.setRequestHeader=function(u,y){this.A.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function kn(u){let y="";return Be(u,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function fs(u,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=kn(_),typeof u=="string"?_!=null&&Ua(_):rt(u,y,_))}function ct(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ct,at);var Ea=/^https?$/i,dl=["POST","PUT"];r=ct.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=w(b(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){ds(this,Y);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)_.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())_.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(dl,y,void 0)>=0)||A||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of _)this.g.setRequestHeader(Y,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){ds(this,Y)}};function ds(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,ml(u),za(u)}function ml(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,$e(this,"complete"),$e(this,"abort"),za(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),ct.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},r.Xa=function(){ms(this)};function ms(u){if(u.h&&typeof c<"u"){if(u.v&&ea(u)==4)setTimeout(u.Ca.bind(u),0);else if($e(u,"readystatechange"),ea(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=Y===0){let he=String(u.D).match(Vo)[1]||null;!he&&f.self&&f.self.location&&(he=f.self.location.protocol.slice(0,-1)),A=!Ea.test(he?he.toLowerCase():"")}_=A}if(_)$e(u,"complete"),$e(u,"success");else{u.o=6;try{var G=ea(u)>2?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.ca()+"]",ml(u)}}finally{za(u)}}}}function za(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,y||$e(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ea(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ea(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Hs(y)}};function Zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Pa(u){const y={};u=(u.g&&ea(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(R(u[A]))continue;var _=Io(u[A]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[G]||[];y[G]=Y,Y.push(_)}P(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function yi(u){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,u),this.Za=Sa("retryDelaySeedMs",1e4,u),this.Ta=Sa("forwardChannelMaxRetries",2,u),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new al(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=yi.prototype,r.ka=8,r.I=1,r.connect=function(u,y,_,A){Dt(0),this.W=u,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Fo(this,null,this.W),wa(this)};function pl(u){if(er(u),u.I==3){var y=u.V++,_=jt(u.J);if(rt(_,"SID",u.M),rt(_,"RID",y),rt(_,"TYPE","terminate"),ps(u,_),y=new $n(u,u.j,y),y.M=2,y.A=cs(jt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=Qo(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ga(y)}Ho(u)}function vi(u){u.g&&(yl(u),u.g.cancel(),u.g=null)}function er(u){vi(u),u.v&&(f.clearTimeout(u.v),u.v=null),nr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function wa(u){if(!il(u.h)&&!u.m){u.m=!0;var y=u.Ea;ce||S(),le||(ce(),le=!0),M.add(y,u),u.D=0}}function tr(u,y){return ba(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=da(b(u.Ea,u,y),qo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const G=new $n(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=V(Y),ue(Y,this.U)):Y=this.U),this.u!==null||this.R||(G.J=Y,Y=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Uo(this,G,y),_=jt(this.J),rt(_,"RID",u),rt(_,"CVER",22),this.G&&rt(_,"X-HTTP-Session-Id",this.G),ps(this,_),Y&&(this.R?y="headers="+Ua(kn(Y))+"&"+y:this.u&&fs(_,this.u,Y)),sl(this.h,G),this.Ra&&rt(_,"TYPE","init"),this.S?(rt(_,"$req",y),rt(_,"SID","null"),G.U=!0,pa(G,_,null)):pa(G,_,y),this.I=2}}else this.I==3&&(u?gl(this,u):this.i.length==0||il(this.h)||gl(this))};function gl(u,y){var _;y?_=y.l:_=u.V++;const A=jt(u.J);rt(A,"SID",u.M),rt(A,"RID",_),rt(A,"AID",u.K),ps(u,A),u.u&&u.o&&fs(A,u.u,u.o),_=new $n(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),y&&(u.i=y.G.concat(u.i)),y=Uo(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),sl(u.h,_),pa(_,A,y)}function ps(u,y){u.H&&Be(u.H,function(_,A){rt(y,A,_)}),u.l&&Be({},function(_,A){rt(y,A,_)})}function Uo(u,y,_){_=Math.min(u.i.length,_);const A=u.l?b(u.l.Ka,u.l,u):null;e:{var G=u.i;let je=-1;for(;;){const At=["count="+_];je==-1?_>0?(je=G[0].g,At.push("ofs="+je)):je=0:At.push("ofs="+je);let et=!0;for(let bt=0;bt<_;bt++){var Y=G[bt].g;const Ln=G[bt].map;if(Y-=je,Y<0)je=Math.max(0,G[bt].g-100),et=!1;else try{Y="req"+Y+"_"||"";try{var he=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Ca,ta]of he){let na=ta;m(ta)&&(na=ua(ta)),At.push(Y+Ca+"="+encodeURIComponent(na))}}catch(Ca){throw At.push(Y+"type="+encodeURIComponent("_badmap")),Ca}}catch{A&&A(Ln)}}if(et){he=At.join("&");break e}}he=void 0}return u=u.i.splice(0,_),y.G=u,he}function zo(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;ce||S(),le||(ce(),le=!0),M.add(y,u),u.A=0}}function gs(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=da(b(u.Da,u),qo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Po(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=da(b(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),vi(this),Po(this))};function yl(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Po(u){u.g=new $n(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=jt(u.na);rt(y,"RID","rpc"),rt(y,"SID",u.M),rt(y,"AID",u.K),rt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(y,"TO",u.ia),rt(y,"TYPE","xmlhttp"),ps(u,y),u.u&&u.o&&fs(y,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=cs(jt(y)),_.u=null,_.R=!0,Xs(_,u)}r.Va=function(){this.C!=null&&(this.C=null,vi(this),gs(this),Dt(19))};function nr(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Go(u,y){var _=null;if(u.g==y){nr(u),yl(u),u.g=null;var A=2}else if(_a(u.h,y))_=y.G,rl(u.h,y),A=1;else return;if(u.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var G=u.D;A=Qs(),$e(A,new fa(A,_)),wa(u)}else zo(u);else if(G=y.m,G==3||G==0&&y.X>0||!(A==1&&tr(u,y)||A==2&&gs(u)))switch(_&&_.length>0&&(y=u.h,y.i=y.i.concat(_)),G){case 1:Aa(u,5);break;case 4:Aa(u,10);break;case 3:Aa(u,6);break;default:Aa(u,2)}}}function qo(u,y){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*y}function Aa(u,y){if(u.j.info("Error code "+y),y==2){var _=b(u.bb,u),A=u.Ua;const G=!A;A=new Sn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Qt(A,"https"),cs(A),G?Jn(A.toString(),_):fl(A.toString(),_)}else Dt(2);u.I=0,u.l&&u.l.pa(y),Ho(u),er(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Ho(u){if(u.I=0,u.ja=[],u.l){const y=ll(u.h);(y.length!=0||u.i.length!=0)&&(k(u.ja,y),k(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Fo(u,y,_){var A=_ instanceof Sn?jt(_):new Sn(_);if(A.g!="")y&&(A.g=y+"."+A.g),hi(A,A.u);else{var G=f.location;A=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const Y=new Sn(null);A&&Qt(Y,A),y&&(Y.g=y),G&&hi(Y,G),_&&(Y.h=_),A=Y}return _=u.G,y=u.wa,_&&y&&rt(A,_,y),rt(A,"VER",u.ka),ps(u,A),A}function Qo(u,y,_){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new ct(new Ta({ab:_})):new ct(u.ma),y.Fa(u.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xo(){}r=Xo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function bi(){}bi.prototype.g=function(u,y){return new fn(u,y)};function fn(u,y){at.call(this),this.g=new yi(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!R(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Ga(this)}T(fn,at),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){pl(this.g)},fn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=ua(u),u=_);y.i.push(new Vt(y.Ya++,u)),y.I==3&&wa(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,fn.Z.N.call(this)};function Yo(u){$t.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}T(Yo,$t);function Ko(){On.call(this),this.status=1}T(Ko,On);function Ga(u){this.g=u}T(Ga,Xo),Ga.prototype.ra=function(){$e(this.g,"a")},Ga.prototype.qa=function(u){$e(this.g,new Yo(u))},Ga.prototype.pa=function(u){$e(this.g,new Ko)},Ga.prototype.oa=function(){$e(this.g,"b")},bi.prototype.createWebChannel=bi.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Bv=function(){return new bi},Lv=function(){return Qs()},kv=wt,Td={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,ou=ls,tl.COMPLETE="complete",jv=tl,Fs.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",at.prototype.listen=at.prototype.J,no=Fs,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,Vv=ct}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore",by="4.9.2";class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let $r="12.3.0";const Bs=new Cv("@firebase/firestore");function Or(){return Bs.logLevel}function ve(r,...t){if(Bs.logLevel<=Ke.DEBUG){const a=t.map(Fd);Bs.debug(`Firestore (${$r}): ${r}`,...a)}}function li(r,...t){if(Bs.logLevel<=Ke.ERROR){const a=t.map(Fd);Bs.error(`Firestore (${$r}): ${r}`,...a)}}function qr(r,...t){if(Bs.logLevel<=Ke.WARN){const a=t.map(Fd);Bs.warn(`Firestore (${$r}): ${r}`,...a)}}function Fd(r){if(typeof r=="string")return r;try{return(function(a){return JSON.stringify(a)})(r)}catch{return r}}function Me(r,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,Uv(r,s,a)}function Uv(r,t,a){let s=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(a!==void 0)try{s+=" CONTEXT: "+JSON.stringify(a)}catch{s+=" CONTEXT: "+a}throw li(s),new Error(s)}function st(r,t,a,s){let o="Unexpected state";typeof a=="string"?o=a:s=a,r||Uv(t,o,s)}function De(r,t){return r}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Kr{constructor(t,a){super(t,a),this.code=t,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yi{constructor(){this.promise=new Promise(((t,a)=>{this.resolve=t,this.reject=a}))}}class zv{constructor(t,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,a){t.enqueueRetryable((()=>a(on.UNAUTHENTICATED)))}shutdown(){}}class HT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,a){this.changeListener=a,t.enqueueRetryable((()=>a(this.token.user)))}shutdown(){this.changeListener=null}}class FT{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,a){st(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,a(p)):Promise.resolve();let c=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Yi,t.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=c;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Yi)}}),0),f()}getToken(){const t=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then((s=>this.i!==t?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new zv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return st(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class QT{constructor(t,a,s){this.P=t,this.T=a,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XT{constructor(t,a,s){this.P=t,this.T=a,this.I=s}getToken(){return Promise.resolve(new QT(this.P,this.T,this.I))}start(t,a){t.enqueueRetryable((()=>a(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _y{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YT{constructor(t,a){this.V=a,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,AT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,a){st(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?a(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _y(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((a=>a?(st(typeof a.token=="string",44558,{tokenResult:a}),this.m=a.token,new _y(a.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function KT(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(a);else for(let s=0;s<r;s++)a[s]=Math.floor(256*Math.random());return a}class Qd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=KT(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<a&&(s+=t.charAt(o[c]%62))}return s}}function He(r,t){return r<t?-1:r>t?1:0}function Ed(r,t){const a=Math.min(r.length,t.length);for(let s=0;s<a;s++){const o=r.charAt(s),c=t.charAt(s);if(o!==c)return sd(o)===sd(c)?He(o,c):sd(o)?1:-1}return He(r.length,t.length)}const $T=55296,ZT=57343;function sd(r){const t=r.charCodeAt(0);return t>=$T&&t<=ZT}function Hr(r,t,a){return r.length===t.length&&r.every(((s,o)=>a(s,t[o])))}const xy="__name__";class Oa{constructor(t,a,s){a===void 0?a=0:a>t.length&&Me(637,{offset:a,range:t.length}),s===void 0?s=t.length-a:s>t.length-a&&Me(1746,{length:s,range:t.length-a}),this.segments=t,this.offset=a,this.len=s}get length(){return this.len}isEqual(t){return Oa.comparator(this,t)===0}child(t){const a=this.segments.slice(this.offset,this.limit());return t instanceof Oa?t.forEach((s=>{a.push(s)})):a.push(t),this.construct(a)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}forEach(t){for(let a=this.offset,s=this.limit();a<s;a++)t(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,a){const s=Math.min(t.length,a.length);for(let o=0;o<s;o++){const c=Oa.compareSegments(t.get(o),a.get(o));if(c!==0)return c}return He(t.length,a.length)}static compareSegments(t,a){const s=Oa.isNumericId(t),o=Oa.isNumericId(a);return s&&!o?-1:!s&&o?1:s&&o?Oa.extractNumericId(t).compare(Oa.extractNumericId(a)):Ed(t,a)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xi.fromString(t.substring(4,t.length-2))}}class pt extends Oa{construct(t,a,s){return new pt(t,a,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const a=[];for(const s of t){if(s.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);a.push(...s.split("/").filter((o=>o.length>0)))}return new pt(a)}static emptyPath(){return new pt([])}}const JT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Oa{construct(t,a,s){return new sn(t,a,s)}static isValidIdentifier(t){return JT.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xy}static keyField(){return new sn([xy])}static fromServerFormat(t){const a=[];let s="",o=0;const c=()=>{if(s.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(s),s=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(c(),o++)}if(c(),f)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(a)}static emptyPath(){return new sn([])}}class we{constructor(t){this.path=t}static fromPath(t){return new we(pt.fromString(t))}static fromName(t){return new we(pt.fromString(t).popFirst(5))}static empty(){return new we(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,a){return pt.comparator(t.path,a.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new we(new pt(t.slice()))}}function Pv(r,t,a){if(!a)throw new pe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function WT(r,t,a,s){if(t===!0&&s===!0)throw new pe(te.INVALID_ARGUMENT,`${r} and ${a} cannot be used together.`)}function Ty(r){if(!we.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ey(r){if(we.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Vu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Me(12329,{type:typeof r})}function xu(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Vu(r);throw new pe(te.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${a}`)}}return r}function eE(r,t){if(t<=0)throw new pe(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}function Gt(r,t){const a={typeString:r};return t&&(a.value=t),a}function Eo(r,t){if(!Gv(r))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let a;for(const s in t)if(t[s]){const o=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){a=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){a=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){a=`Expected '${s}' field to equal '${c.value}'`;break}}if(a)throw new pe(te.INVALID_ARGUMENT,a);return!0}const Sy=-62135596800,wy=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(t){return dt.fromMillis(t.getTime())}static fromMillis(t){const a=Math.floor(t/1e3),s=Math.floor((t-1e3*a)*wy);return new dt(a,s)}constructor(t,a){if(this.seconds=t,this.nanoseconds=a,a<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(t<Sy)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wy}_compareTo(t){return this.seconds===t.seconds?He(this.nanoseconds,t.nanoseconds):He(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Eo(t,dt._jsonSchema))return new dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Sy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Gt("string",dt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};class Ie{static fromTimestamp(t){return new Ie(t)}static min(){return new Ie(new dt(0,0))}static max(){return new Ie(new dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const go=-1;function tE(r,t){const a=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new dt(a+1,0):new dt(a,s));return new $i(o,we.empty(),t)}function nE(r){return new $i(r.readTime,r.key,go)}class $i{constructor(t,a,s){this.readTime=t,this.documentKey=a,this.largestBatchId=s}static min(){return new $i(Ie.min(),we.empty(),go)}static max(){return new $i(Ie.max(),we.empty(),go)}}function aE(r,t){let a=r.readTime.compareTo(t.readTime);return a!==0?a:(a=we.comparator(r.documentKey,t.documentKey),a!==0?a:He(r.largestBatchId,t.largestBatchId))}const iE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Zr(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==iE)throw r;ve("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)}),(a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)}))}catch(t){return this.next(void 0,t)}next(t,a){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(t,this.result):new ne(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(a,c).next(s,o)}}))}toPromise(){return new Promise(((t,a)=>{this.next(t,a)}))}wrapUserFunction(t){try{const a=t();return a instanceof ne?a:ne.resolve(a)}catch(a){return ne.reject(a)}}wrapSuccess(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.resolve(a)}wrapFailure(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.reject(a)}static resolve(t){return new ne(((a,s)=>{a(t)}))}static reject(t){return new ne(((a,s)=>{s(t)}))}static waitFor(t){return new ne(((a,s)=>{let o=0,c=0,f=!1;t.forEach((m=>{++o,m.next((()=>{++c,f&&c===o&&a()}),(p=>s(p)))})),f=!0,c===o&&a()}))}static or(t){let a=ne.resolve(!1);for(const s of t)a=a.next((o=>o?ne.resolve(o):s()));return a}static forEach(t,a){const s=[];return t.forEach(((o,c)=>{s.push(a.call(this,o,c))})),this.waitFor(s)}static mapArray(t,a){return new ne(((s,o)=>{const c=t.length,f=new Array(c);let m=0;for(let p=0;p<c;p++){const b=p;a(t[b]).next((x=>{f[b]=x,++m,m===c&&s(f)}),(x=>o(x)))}}))}static doWhile(t,a){return new ne(((s,o)=>{const c=()=>{t()===!0?a().next((()=>{c()}),o):s()};c()}))}}function rE(r){const t=r.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function Jr(r){return r.name==="IndexedDbTransactionError"}class ju{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>a.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ju.ce=-1;const Xd=-1;function ku(r){return r==null}function Tu(r){return r===0&&1/r==-1/0}function lE(r){return typeof r=="number"&&Number.isInteger(r)&&!Tu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const qv="";function oE(r){let t="";for(let a=0;a<r.length;a++)t.length>0&&(t=Ay(t)),t=cE(r.get(a),t);return Ay(t)}function cE(r,t){let a=t;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":a+="";break;case qv:a+="";break;default:a+=c}}return a}function Ay(r){return r+qv+""}function Cy(r){let t=0;for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t++;return t}function zs(r,t){for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t(a,r[a])}function Hv(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class xt{constructor(t,a){this.comparator=t,this.root=a||an.EMPTY}insert(t,a){return new xt(this.comparator,this.root.insert(t,a,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let a=this.root;for(;!a.isEmpty();){const s=this.comparator(t,a.key);if(s===0)return a.value;s<0?a=a.left:s>0&&(a=a.right)}return null}indexOf(t){let a=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return a+s.left.size;o<0?s=s.left:(a+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((a,s)=>(t(a,s),!1)))}toString(){const t=[];return this.inorderTraversal(((a,s)=>(t.push(`${a}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nu(this.root,t,this.comparator,!1)}getReverseIterator(){return new nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nu(this.root,t,this.comparator,!0)}}class nu{constructor(t,a,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=a?s(t.key,a):1,a&&o&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const a={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,a,s,o,c){this.key=t,this.value=a,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=c??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,a,s,o,c){return new an(t??this.key,a??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,a,s){let o=this;const c=s(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,a,s),null):c===0?o.copy(null,a,null,null,null):o.copy(null,null,null,null,o.right.insert(t,a,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,a){let s,o=this;if(a(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,a),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),a(t,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,a))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,a)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Me(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(t,a,s,o,c){return this}insert(t,a,s){return new an(t,a)}remove(t,a){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((a,s)=>(t(a),!1)))}forEachInRange(t,a){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;a(o.key)}}forEachWhile(t,a){let s;for(s=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const a=this.data.getIteratorFrom(t);return a.hasNext()?a.getNext().key:null}getIterator(){return new Ny(this.data.getIterator())}getIteratorFrom(t){return new Ny(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let a=this;return a.size<t.size&&(a=t,t=this),t.forEach((s=>{a=a.add(s)})),a}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const a=this.data.getIterator(),s=t.data.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((a=>{t.push(a)})),t}toString(){const t=[];return this.forEach((a=>t.push(a))),"SortedSet("+t.toString()+")"}copy(t){const a=new Ht(this.comparator);return a.data=t,a}}class Ny{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ra{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new ra([])}unionWith(t){let a=new Ht(sn.comparator);for(const s of this.fields)a=a.add(s);for(const s of t)a=a.add(s);return new ra(a.toArray())}covers(t){for(const a of this.fields)if(a.isPrefixOf(t))return!0;return!1}isEqual(t){return Hr(this.fields,t.fields,((a,s)=>a.isEqual(s)))}}class Fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const a=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Fv("Invalid base64 string: "+c):c}})(t);return new rn(a)}static fromUint8Array(t){const a=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(t);return new rn(a)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(a){return btoa(a)})(this.binaryString)}toUint8Array(){return(function(a){const s=new Uint8Array(a.length);for(let o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return He(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const uE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(r){if(st(!!r,39018),typeof r=="string"){let t=0;const a=uE.exec(r);if(st(!!a,46558,{timestamp:r}),a[1]){let o=a[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ji(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}const Qv="server_timestamp",Xv="__type__",Yv="__previous_value__",Kv="__local_write_time__";function Yd(r){return(r?.mapValue?.fields||{})[Xv]?.stringValue===Qv}function Lu(r){const t=r.mapValue.fields[Yv];return Yd(t)?Lu(t):t}function yo(r){const t=Zi(r.mapValue.fields[Kv].timestampValue);return new dt(t.seconds,t.nanos)}class hE{constructor(t,a,s,o,c,f,m,p,b,x){this.databaseId=t,this.appId=a,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=b,this.isUsingEmulator=x}}const Eu="(default)";class vo{constructor(t,a){this.projectId=t,this.database=a||Eu}static empty(){return new vo("","")}get isDefaultDatabase(){return this.database===Eu}isEqual(t){return t instanceof vo&&t.projectId===this.projectId&&t.database===this.database}}const $v="__type__",fE="__max__",au={mapValue:{}},Zv="__vector__",Su="value";function Wi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yd(r)?4:mE(r)?9007199254740991:dE(r)?10:11:Me(28295,{value:r})}function Ba(r,t){if(r===t)return!0;const a=Wi(r);if(a!==Wi(t))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return yo(r).isEqual(yo(t));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Zi(o.timestampValue),m=Zi(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,c){return Ji(o.bytesValue).isEqual(Ji(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(r,t);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Rt(o.doubleValue),m=Rt(c.doubleValue);return f===m?Tu(f)===Tu(m):isNaN(f)&&isNaN(m)}return!1})(r,t);case 9:return Hr(r.arrayValue.values||[],t.arrayValue.values||[],Ba);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Cy(f)!==Cy(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Ba(f[p],m[p])))return!1;return!0})(r,t);default:return Me(52216,{left:r})}}function bo(r,t){return(r.values||[]).find((a=>Ba(a,t)))!==void 0}function Fr(r,t){if(r===t)return 0;const a=Wi(r),s=Wi(t);if(a!==s)return He(a,s);switch(a){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,t.booleanValue);case 2:return(function(c,f){const m=Rt(c.integerValue||c.doubleValue),p=Rt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,t);case 3:return Ry(r.timestampValue,t.timestampValue);case 4:return Ry(yo(r),yo(t));case 5:return Ed(r.stringValue,t.stringValue);case 6:return(function(c,f){const m=Ji(c),p=Ji(f);return m.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(c,f){const m=c.split("/"),p=f.split("/");for(let b=0;b<m.length&&b<p.length;b++){const x=He(m[b],p[b]);if(x!==0)return x}return He(m.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,f){const m=He(Rt(c.latitude),Rt(f.latitude));return m!==0?m:He(Rt(c.longitude),Rt(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return My(r.arrayValue,t.arrayValue);case 10:return(function(c,f){const m=c.fields||{},p=f.fields||{},b=m[Su]?.arrayValue,x=p[Su]?.arrayValue,T=He(b?.values?.length||0,x?.values?.length||0);return T!==0?T:My(b,x)})(r.mapValue,t.mapValue);case 11:return(function(c,f){if(c===au.mapValue&&f===au.mapValue)return 0;if(c===au.mapValue)return 1;if(f===au.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),b=f.fields||{},x=Object.keys(b);p.sort(),x.sort();for(let T=0;T<p.length&&T<x.length;++T){const w=Ed(p[T],x[T]);if(w!==0)return w;const O=Fr(m[p[T]],b[x[T]]);if(O!==0)return O}return He(p.length,x.length)})(r.mapValue,t.mapValue);default:throw Me(23264,{he:a})}}function Ry(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return He(r,t);const a=Zi(r),s=Zi(t),o=He(a.seconds,s.seconds);return o!==0?o:He(a.nanos,s.nanos)}function My(r,t){const a=r.values||[],s=t.values||[];for(let o=0;o<a.length&&o<s.length;++o){const c=Fr(a[o],s[o]);if(c)return c}return He(a.length,s.length)}function Qr(r){return Sd(r)}function Sd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(a){const s=Zi(a);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(a){return Ji(a).toBase64()})(r.bytesValue):"referenceValue"in r?(function(a){return we.fromName(a).toString()})(r.referenceValue):"geoPointValue"in r?(function(a){return`geo(${a.latitude},${a.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(a){let s="[",o=!0;for(const c of a.values||[])o?o=!1:s+=",",s+=Sd(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(a){const s=Object.keys(a.fields||{}).sort();let o="{",c=!0;for(const f of s)c?c=!1:o+=",",o+=`${f}:${Sd(a.fields[f])}`;return o+"}"})(r.mapValue):Me(61005,{value:r})}function cu(r){switch(Wi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lu(r);return t?16+cu(t):16;case 5:return 2*r.stringValue.length;case 6:return Ji(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+cu(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return zs(s.fields,((c,f)=>{o+=c.length+cu(f)})),o})(r.mapValue);default:throw Me(13486,{value:r})}}function Iy(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function wd(r){return!!r&&"integerValue"in r}function Kd(r){return!!r&&"arrayValue"in r}function Dy(r){return!!r&&"nullValue"in r}function Oy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uu(r){return!!r&&"mapValue"in r}function dE(r){return(r?.mapValue?.fields||{})[$v]?.stringValue===Zv}function lo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return zs(r.mapValue.fields,((a,s)=>t.mapValue.fields[a]=lo(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let a=0;a<(r.arrayValue.values||[]).length;++a)t.arrayValue.values[a]=lo(r.arrayValue.values[a]);return t}return{...r}}function mE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===fE}class Qn{constructor(t){this.value=t}static empty(){return new Qn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let a=this.value;for(let s=0;s<t.length-1;++s)if(a=(a.mapValue.fields||{})[t.get(s)],!uu(a))return null;return a=(a.mapValue.fields||{})[t.lastSegment()],a||null}}set(t,a){this.getFieldsMap(t.popLast())[t.lastSegment()]=lo(a)}setAll(t){let a=sn.emptyPath(),s={},o=[];t.forEach(((f,m)=>{if(!a.isImmediateParentOf(m)){const p=this.getFieldsMap(a);this.applyChanges(p,s,o),s={},o=[],a=m.popLast()}f?s[m.lastSegment()]=lo(f):o.push(m.lastSegment())}));const c=this.getFieldsMap(a);this.applyChanges(c,s,o)}delete(t){const a=this.field(t.popLast());uu(a)&&a.mapValue.fields&&delete a.mapValue.fields[t.lastSegment()]}isEqual(t){return Ba(this.value,t.value)}getFieldsMap(t){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=a.mapValue.fields[t.get(s)];uu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},a.mapValue.fields[t.get(s)]=o),a=o}return a.mapValue.fields}applyChanges(t,a,s){zs(a,((o,c)=>t[o]=c));for(const o of s)delete t[o]}clone(){return new Qn(lo(this.value))}}function Jv(r){const t=[];return zs(r.fields,((a,s)=>{const o=new sn([a]);if(uu(s)){const c=Jv(s.mapValue).fields;if(c.length===0)t.push(o);else for(const f of c)t.push(o.child(f))}else t.push(o)})),new ra(t)}class cn{constructor(t,a,s,o,c,f,m){this.key=t,this.documentType=a,this.version=s,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Ie.min(),Ie.min(),Ie.min(),Qn.empty(),0)}static newFoundDocument(t,a,s,o){return new cn(t,1,a,Ie.min(),s,o,0)}static newNoDocument(t,a){return new cn(t,2,a,Ie.min(),Ie.min(),Qn.empty(),0)}static newUnknownDocument(t,a){return new cn(t,3,a,Ie.min(),Ie.min(),Qn.empty(),2)}convertToFoundDocument(t,a){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wu{constructor(t,a){this.position=t,this.inclusive=a}}function Vy(r,t,a){let s=0;for(let o=0;o<r.position.length;o++){const c=t[o],f=r.position[o];if(c.field.isKeyField()?s=we.comparator(we.fromName(f.referenceValue),a.key):s=Fr(f,a.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function jy(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let a=0;a<r.position.length;a++)if(!Ba(r.position[a],t.position[a]))return!1;return!0}class _o{constructor(t,a="asc"){this.field=t,this.dir=a}}function pE(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class Wv{}class Pt extends Wv{constructor(t,a,s){super(),this.field=t,this.op=a,this.value=s}static create(t,a,s){return t.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(t,a,s):new yE(t,a,s):a==="array-contains"?new _E(t,s):a==="in"?new xE(t,s):a==="not-in"?new TE(t,s):a==="array-contains-any"?new EE(t,s):new Pt(t,a,s)}static createKeyFieldInFilter(t,a,s){return a==="in"?new vE(t,s):new bE(t,s)}matches(t){const a=t.data.field(this.field);return this.op==="!="?a!==null&&a.nullValue===void 0&&this.matchesComparison(Fr(a,this.value)):a!==null&&Wi(this.value)===Wi(a)&&this.matchesComparison(Fr(a,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class la extends Wv{constructor(t,a){super(),this.filters=t,this.op=a,this.Pe=null}static create(t,a){return new la(t,a)}matches(t){return e1(this)?this.filters.find((a=>!a.matches(t)))===void 0:this.filters.find((a=>a.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,a)=>t.concat(a.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function e1(r){return r.op==="and"}function t1(r){return gE(r)&&e1(r)}function gE(r){for(const t of r.filters)if(t instanceof la)return!1;return!0}function Ad(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+Qr(r.value);if(t1(r))return r.filters.map((t=>Ad(t))).join(",");{const t=r.filters.map((a=>Ad(a))).join(",");return`${r.op}(${t})`}}function n1(r,t){return r instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&Ba(s.value,o.value)})(r,t):r instanceof la?(function(s,o){return o instanceof la&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,f,m)=>c&&n1(f,o.filters[m])),!0):!1})(r,t):void Me(19439)}function a1(r){return r instanceof Pt?(function(a){return`${a.field.canonicalString()} ${a.op} ${Qr(a.value)}`})(r):r instanceof la?(function(a){return a.op.toString()+" {"+a.getFilters().map(a1).join(" ,")+"}"})(r):"Filter"}class yE extends Pt{constructor(t,a,s){super(t,a,s),this.key=we.fromName(s.referenceValue)}matches(t){const a=we.comparator(t.key,this.key);return this.matchesComparison(a)}}class vE extends Pt{constructor(t,a){super(t,"in",a),this.keys=i1("in",a)}matches(t){return this.keys.some((a=>a.isEqual(t.key)))}}class bE extends Pt{constructor(t,a){super(t,"not-in",a),this.keys=i1("not-in",a)}matches(t){return!this.keys.some((a=>a.isEqual(t.key)))}}function i1(r,t){return(t.arrayValue?.values||[]).map((a=>we.fromName(a.referenceValue)))}class _E extends Pt{constructor(t,a){super(t,"array-contains",a)}matches(t){const a=t.data.field(this.field);return Kd(a)&&bo(a.arrayValue,this.value)}}class xE extends Pt{constructor(t,a){super(t,"in",a)}matches(t){const a=t.data.field(this.field);return a!==null&&bo(this.value.arrayValue,a)}}class TE extends Pt{constructor(t,a){super(t,"not-in",a)}matches(t){if(bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=t.data.field(this.field);return a!==null&&a.nullValue===void 0&&!bo(this.value.arrayValue,a)}}class EE extends Pt{constructor(t,a){super(t,"array-contains-any",a)}matches(t){const a=t.data.field(this.field);return!(!Kd(a)||!a.arrayValue.values)&&a.arrayValue.values.some((s=>bo(this.value.arrayValue,s)))}}class SE{constructor(t,a=null,s=[],o=[],c=null,f=null,m=null){this.path=t,this.collectionGroup=a,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function ky(r,t=null,a=[],s=[],o=null,c=null,f=null){return new SE(r,t,a,s,o,c,f)}function $d(r){const t=De(r);if(t.Te===null){let a=t.path.canonicalString();t.collectionGroup!==null&&(a+="|cg:"+t.collectionGroup),a+="|f:",a+=t.filters.map((s=>Ad(s))).join(","),a+="|ob:",a+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ku(t.limit)||(a+="|l:",a+=t.limit),t.startAt&&(a+="|lb:",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Qr(s))).join(",")),t.endAt&&(a+="|ub:",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Qr(s))).join(",")),t.Te=a}return t.Te}function Zd(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<r.orderBy.length;a++)if(!pE(r.orderBy[a],t.orderBy[a]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let a=0;a<r.filters.length;a++)if(!n1(r.filters[a],t.filters[a]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!jy(r.startAt,t.startAt)&&jy(r.endAt,t.endAt)}function Cd(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Wr{constructor(t,a=null,s=[],o=[],c=null,f="F",m=null,p=null){this.path=t,this.collectionGroup=a,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wE(r,t,a,s,o,c,f,m){return new Wr(r,t,a,s,o,c,f,m)}function s1(r){return new Wr(r)}function Ly(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function r1(r){return r.collectionGroup!==null}function oo(r){const t=De(r);if(t.Ie===null){t.Ie=[];const a=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),a.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(sn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((b=>{b.isInequality()&&(m=m.add(b.field))}))})),m})(t).forEach((c=>{a.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new _o(c,s))})),a.has(sn.keyField().canonicalString())||t.Ie.push(new _o(sn.keyField(),s))}return t.Ie}function Va(r){const t=De(r);return t.Ee||(t.Ee=AE(t,oo(r))),t.Ee}function AE(r,t){if(r.limitType==="F")return ky(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new _o(o.field,c)}));const a=r.endAt?new wu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new wu(r.startAt.position,r.startAt.inclusive):null;return ky(r.path,r.collectionGroup,t,r.filters,r.limit,a,s)}}function Nd(r,t){const a=r.filters.concat([t]);return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),a,r.limit,r.limitType,r.startAt,r.endAt)}function Au(r,t,a){return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,a,r.startAt,r.endAt)}function Bu(r,t){return Zd(Va(r),Va(t))&&r.limitType===t.limitType}function l1(r){return`${$d(Va(r))}|lt:${r.limitType}`}function Vr(r){return`Query(target=${(function(a){let s=a.path.canonicalString();return a.collectionGroup!==null&&(s+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(s+=`, filters: [${a.filters.map((o=>a1(o))).join(", ")}]`),ku(a.limit)||(s+=", limit: "+a.limit),a.orderBy.length>0&&(s+=`, orderBy: [${a.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),a.startAt&&(s+=", startAt: ",s+=a.startAt.inclusive?"b:":"a:",s+=a.startAt.position.map((o=>Qr(o))).join(",")),a.endAt&&(s+=", endAt: ",s+=a.endAt.inclusive?"a:":"b:",s+=a.endAt.position.map((o=>Qr(o))).join(",")),`Target(${s})`})(Va(r))}; limitType=${r.limitType})`}function Uu(r,t){return t.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):we.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,o){for(const c of oo(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const b=Vy(f,m,p);return f.inclusive?b<=0:b<0})(s.startAt,oo(s),o)||s.endAt&&!(function(f,m,p){const b=Vy(f,m,p);return f.inclusive?b>=0:b>0})(s.endAt,oo(s),o))})(r,t)}function CE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function o1(r){return(t,a)=>{let s=!1;for(const o of oo(r)){const c=NE(o,t,a);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function NE(r,t,a){const s=r.field.isKeyField()?we.comparator(t.key,a.key):(function(c,f,m){const p=f.data.field(c),b=m.data.field(c);return p!==null&&b!==null?Fr(p,b):Me(42886)})(r.field,t,a);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:r.dir})}}class Ps{constructor(t,a){this.mapKeyFn=t,this.equalsFn=a,this.inner={},this.innerSize=0}get(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,t))return c}}has(t){return this.get(t)!==void 0}set(t,a){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,a]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return void(o[c]=[t,a]);o.push([t,a]),this.innerSize++}delete(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[a]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){zs(this.inner,((a,s)=>{for(const[o,c]of s)t(o,c)}))}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}const RE=new xt(we.comparator);function oi(){return RE}const c1=new xt(we.comparator);function ao(...r){let t=c1;for(const a of r)t=t.insert(a.key,a);return t}function u1(r){let t=c1;return r.forEach(((a,s)=>t=t.insert(a,s.overlayedDocument))),t}function ks(){return co()}function h1(){return co()}function co(){return new Ps((r=>r.toString()),((r,t)=>r.isEqual(t)))}const ME=new xt(we.comparator),IE=new Ht(we.comparator);function Fe(...r){let t=IE;for(const a of r)t=t.add(a);return t}const DE=new Ht(He);function OE(){return DE}function Jd(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(t)?"-0":t}}function f1(r){return{integerValue:""+r}}function VE(r,t){return lE(t)?f1(t):Jd(r,t)}class zu{constructor(){this._=void 0}}function jE(r,t,a){return r instanceof Cu?(function(o,c){const f={fields:{[Xv]:{stringValue:Qv},[Kv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Yd(c)&&(c=Lu(c)),c&&(f.fields[Yv]=c),{mapValue:f}})(a,t):r instanceof xo?m1(r,t):r instanceof To?p1(r,t):(function(o,c){const f=d1(o,c),m=By(f)+By(o.Ae);return wd(f)&&wd(o.Ae)?f1(m):Jd(o.serializer,m)})(r,t)}function kE(r,t,a){return r instanceof xo?m1(r,t):r instanceof To?p1(r,t):a}function d1(r,t){return r instanceof Nu?(function(s){return wd(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Cu extends zu{}class xo extends zu{constructor(t){super(),this.elements=t}}function m1(r,t){const a=g1(t);for(const s of r.elements)a.some((o=>Ba(o,s)))||a.push(s);return{arrayValue:{values:a}}}class To extends zu{constructor(t){super(),this.elements=t}}function p1(r,t){let a=g1(t);for(const s of r.elements)a=a.filter((o=>!Ba(o,s)));return{arrayValue:{values:a}}}class Nu extends zu{constructor(t,a){super(),this.serializer=t,this.Ae=a}}function By(r){return Rt(r.integerValue||r.doubleValue)}function g1(r){return Kd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function LE(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof xo&&o instanceof xo||s instanceof To&&o instanceof To?Hr(s.elements,o.elements,Ba):s instanceof Nu&&o instanceof Nu?Ba(s.Ae,o.Ae):s instanceof Cu&&o instanceof Cu})(r.transform,t.transform)}class BE{constructor(t,a){this.version=t,this.transformResults=a}}class si{constructor(t,a){this.updateTime=t,this.exists=a}static none(){return new si}static exists(t){return new si(void 0,t)}static updateTime(t){return new si(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hu(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Pu{}function y1(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new b1(r.key,si.none()):new So(r.key,r.data,si.none());{const a=r.data,s=Qn.empty();let o=new Ht(sn.comparator);for(let c of t.fields)if(!o.has(c)){let f=a.field(c);f===null&&c.length>1&&(c=c.popLast(),f=a.field(c)),f===null?s.delete(c):s.set(c,f),o=o.add(c)}return new Gs(r.key,s,new ra(o.toArray()),si.none())}}function UE(r,t,a){r instanceof So?(function(o,c,f){const m=o.value.clone(),p=zy(o.fieldTransforms,c,f.transformResults);m.setAll(p),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,t,a):r instanceof Gs?(function(o,c,f){if(!hu(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=zy(o.fieldTransforms,c,f.transformResults),p=c.data;p.setAll(v1(o)),p.setAll(m),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,t,a):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,a)}function uo(r,t,a,s){return r instanceof So?(function(c,f,m,p){if(!hu(c.precondition,f))return m;const b=c.value.clone(),x=Py(c.fieldTransforms,p,f);return b.setAll(x),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null})(r,t,a,s):r instanceof Gs?(function(c,f,m,p){if(!hu(c.precondition,f))return m;const b=Py(c.fieldTransforms,p,f),x=f.data;return x.setAll(v1(c)),x.setAll(b),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(r,t,a,s):(function(c,f,m){return hu(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,t,a)}function zE(r,t){let a=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),c=d1(s.transform,o||null);c!=null&&(a===null&&(a=Qn.empty()),a.set(s.field,c))}return a||null}function Uy(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Hr(s,o,((c,f)=>LE(c,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class So extends Pu{constructor(t,a,s,o=[]){super(),this.key=t,this.value=a,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends Pu{constructor(t,a,s,o,c=[]){super(),this.key=t,this.data=a,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function v1(r){const t=new Map;return r.fieldMask.fields.forEach((a=>{if(!a.isEmpty()){const s=r.data.field(a);t.set(a,s)}})),t}function zy(r,t,a){const s=new Map;st(r.length===a.length,32656,{Re:a.length,Ve:r.length});for(let o=0;o<a.length;o++){const c=r[o],f=c.transform,m=t.data.field(c.field);s.set(c.field,kE(f,m,a[o]))}return s}function Py(r,t,a){const s=new Map;for(const o of r){const c=o.transform,f=a.data.field(o.field);s.set(o.field,jE(c,f,t))}return s}class b1 extends Pu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PE extends Pu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GE{constructor(t,a,s,o){this.batchId=t,this.localWriteTime=a,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,a){const s=a.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(t.key)&&UE(c,t,s[o])}}applyToLocalView(t,a){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(a=uo(s,t,a,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(a=uo(s,t,a,this.localWriteTime));return a}applyToLocalDocumentSet(t,a){const s=h1();return this.mutations.forEach((o=>{const c=t.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=a.has(o.key)?null:m;const p=y1(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((t,a)=>t.add(a.key)),Fe())}isEqual(t){return this.batchId===t.batchId&&Hr(this.mutations,t.mutations,((a,s)=>Uy(a,s)))&&Hr(this.baseMutations,t.baseMutations,((a,s)=>Uy(a,s)))}}class Wd{constructor(t,a,s,o){this.batch=t,this.commitVersion=a,this.mutationResults=s,this.docVersions=o}static from(t,a,s){st(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return ME})();const c=t.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,s[f].version);return new Wd(t,a,s,o)}}class qE{constructor(t,a){this.largestBatchId=t,this.mutation=a}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HE{constructor(t,a){this.count=t,this.unchangedNames=a}}var zt,Xe;function FE(r){switch(r){case te.OK:return Me(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Me(15467,{code:r})}}function _1(r){if(r===void 0)return li("GRPC error has no .code"),te.UNKNOWN;switch(r){case zt.OK:return te.OK;case zt.CANCELLED:return te.CANCELLED;case zt.UNKNOWN:return te.UNKNOWN;case zt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case zt.INTERNAL:return te.INTERNAL;case zt.UNAVAILABLE:return te.UNAVAILABLE;case zt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case zt.NOT_FOUND:return te.NOT_FOUND;case zt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case zt.ABORTED:return te.ABORTED;case zt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case zt.DATA_LOSS:return te.DATA_LOSS;default:return Me(39323,{code:r})}}(Xe=zt||(zt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function QE(){return new TextEncoder}const XE=new Xi([4294967295,4294967295],0);function Gy(r){const t=QE().encode(r),a=new Ov;return a.update(t),new Uint8Array(a.digest())}function qy(r){const t=new DataView(r.buffer),a=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Xi([a,s],0),new Xi([o,c],0)]}class em{constructor(t,a,s){if(this.bitmap=t,this.padding=a,this.hashCount=s,a<0||a>=8)throw new io(`Invalid padding: ${a}`);if(s<0)throw new io(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${s}`);if(t.length===0&&a!==0)throw new io(`Invalid padding when bitmap length is 0: ${a}`);this.ge=8*t.length-a,this.pe=Xi.fromNumber(this.ge)}ye(t,a,s){let o=t.add(a.multiply(Xi.fromNumber(s)));return o.compare(XE)===1&&(o=new Xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const a=Gy(t),[s,o]=qy(a);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);if(!this.we(f))return!1}return!0}static create(t,a,s){const o=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new em(c,o,a);return s.forEach((m=>f.insert(m))),f}insert(t){if(this.ge===0)return;const a=Gy(t),[s,o]=qy(a);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);this.Se(f)}}Se(t){const a=Math.floor(t/8),s=t%8;this.bitmap[a]|=1<<s}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gu{constructor(t,a,s,o,c){this.snapshotVersion=t,this.targetChanges=a,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,a,s){const o=new Map;return o.set(t,wo.createSynthesizedTargetChangeForCurrentChange(t,a,s)),new Gu(Ie.min(),o,new xt(He),oi(),Fe())}}class wo{constructor(t,a,s,o,c){this.resumeToken=t,this.current=a,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,a,s){return new wo(s,a,Fe(),Fe(),Fe())}}class fu{constructor(t,a,s,o){this.be=t,this.removedTargetIds=a,this.key=s,this.De=o}}class x1{constructor(t,a){this.targetId=t,this.Ce=a}}class T1{constructor(t,a,s=rn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=a,this.resumeToken=s,this.cause=o}}class Hy{constructor(){this.ve=0,this.Fe=Fy(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Fe(),a=Fe(),s=Fe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:t=t.add(o);break;case 2:a=a.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:c})}})),new wo(this.Me,this.xe,t,a,s)}qe(){this.Oe=!1,this.Fe=Fy()}Qe(t,a){this.Oe=!0,this.Fe=this.Fe.insert(t,a)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YE{constructor(t){this.Ge=t,this.ze=new Map,this.je=oi(),this.Je=iu(),this.He=iu(),this.Ye=new xt(He)}Ze(t){for(const a of t.be)t.De&&t.De.isFoundDocument()?this.Xe(a,t.De):this.et(a,t.key,t.De);for(const a of t.removedTargetIds)this.et(a,t.key,t.De)}tt(t){this.forEachTarget(t,(a=>{const s=this.nt(a);switch(t.state){case 0:this.rt(a)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(a);break;case 3:this.rt(a)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(a)&&(this.it(a),s.Le(t.resumeToken));break;default:Me(56790,{state:t.state})}}))}forEachTarget(t,a){t.targetIds.length>0?t.targetIds.forEach(a):this.ze.forEach(((s,o)=>{this.rt(o)&&a(o)}))}st(t){const a=t.targetId,s=t.Ce.count,o=this.ot(a);if(o){const c=o.target;if(Cd(c))if(s===0){const f=new we(c.path);this.et(a,f,cn.newNoDocument(f,Ie.min()))}else st(s===1,20013,{expectedCount:s});else{const f=this._t(a);if(f!==s){const m=this.ut(t),p=m?this.ct(m,t,f):1;if(p!==0){this.it(a);const b=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(a,b)}}}}}ut(t){const a=t.Ce.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=a;let f,m;try{f=Ji(s).toUint8Array()}catch(p){if(p instanceof Fv)return qr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new em(f,o,c)}catch(p){return qr(p instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,a,s){return a.Ce.count===s-this.Pt(t,a.targetId)?0:2}Pt(t,a){const s=this.Ge.getRemoteKeysForTarget(a);let o=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.et(a,c,null),o++)})),o}Tt(t){const a=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&Cd(m.target)){const p=new we(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,cn.newNoDocument(p,t))}c.Be&&(a.set(f,c.ke()),c.qe())}}));let s=Fe();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((p=>{const b=this.ot(p);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const o=new Gu(t,a,this.Ye,this.je,s);return this.je=oi(),this.Je=iu(),this.He=iu(),this.Ye=new xt(He),o}Xe(t,a){if(!this.rt(t))return;const s=this.Et(t,a.key)?2:0;this.nt(t).Qe(a.key,s),this.je=this.je.insert(a.key,a),this.Je=this.Je.insert(a.key,this.It(a.key).add(t)),this.He=this.He.insert(a.key,this.dt(a.key).add(t))}et(t,a,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,a)?o.Qe(a,1):o.$e(a),this.He=this.He.insert(a,this.dt(a).delete(t)),this.He=this.He.insert(a,this.dt(a).add(t)),s&&(this.je=this.je.insert(a,s))}removeTarget(t){this.ze.delete(t)}_t(t){const a=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+a.addedDocuments.size-a.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let a=this.ze.get(t);return a||(a=new Hy,this.ze.set(t,a)),a}dt(t){let a=this.He.get(t);return a||(a=new Ht(He),this.He=this.He.insert(t,a)),a}It(t){let a=this.Je.get(t);return a||(a=new Ht(He),this.Je=this.Je.insert(t,a)),a}rt(t){const a=this.ot(t)!==null;return a||ve("WatchChangeAggregator","Detected inactive target",t),a}ot(t){const a=this.ze.get(t);return a&&a.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Hy),this.Ge.getRemoteKeysForTarget(t).forEach((a=>{this.et(t,a,null)}))}Et(t,a){return this.Ge.getRemoteKeysForTarget(t).has(a)}}function iu(){return new xt(we.comparator)}function Fy(){return new xt(we.comparator)}const KE={asc:"ASCENDING",desc:"DESCENDING"},$E={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZE={and:"AND",or:"OR"};class JE{constructor(t,a){this.databaseId=t,this.useProto3Json=a}}function Rd(r,t){return r.useProto3Json||ku(t)?t:{value:t}}function Ru(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E1(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function WE(r,t){return Ru(r,t.toTimestamp())}function ja(r){return st(!!r,49232),Ie.fromTimestamp((function(a){const s=Zi(a);return new dt(s.seconds,s.nanos)})(r))}function tm(r,t){return Md(r,t).canonicalString()}function Md(r,t){const a=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?a:a.child(t)}function S1(r){const t=pt.fromString(r);return st(R1(t),10190,{key:t.toString()}),t}function Id(r,t){return tm(r.databaseId,t.path)}function rd(r,t){const a=S1(t);if(a.get(1)!==r.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+r.databaseId.projectId);if(a.get(3)!==r.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+r.databaseId.database);return new we(A1(a))}function w1(r,t){return tm(r.databaseId,t)}function eS(r){const t=S1(r);return t.length===4?pt.emptyPath():A1(t)}function Dd(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function A1(r){return st(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Qy(r,t,a){return{name:Id(r,t),fields:a.value.mapValue.fields}}function tS(r,t){let a;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Me(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=(function(b,x){return b.useProto3Json?(st(x===void 0||typeof x=="string",58123),rn.fromBase64String(x||"")):(st(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),rn.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&(function(b){const x=b.code===void 0?te.UNKNOWN:_1(b.code);return new pe(x,b.message||"")})(f);a=new T1(s,o,c,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=rd(r,s.document.name),c=ja(s.document.updateTime),f=s.document.createTime?ja(s.document.createTime):Ie.min(),m=new Qn({mapValue:{fields:s.document.fields}}),p=cn.newFoundDocument(o,c,f,m),b=s.targetIds||[],x=s.removedTargetIds||[];a=new fu(b,x,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=rd(r,s.document),c=s.readTime?ja(s.readTime):Ie.min(),f=cn.newNoDocument(o,c),m=s.removedTargetIds||[];a=new fu([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=rd(r,s.document),c=s.removedTargetIds||[];a=new fu([],c,o,null)}else{if(!("filter"in t))return Me(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,f=new HE(o,c),m=s.targetId;a=new x1(m,f)}}return a}function nS(r,t){let a;if(t instanceof So)a={update:Qy(r,t.key,t.value)};else if(t instanceof b1)a={delete:Id(r,t.key)};else if(t instanceof Gs)a={update:Qy(r,t.key,t.data),updateMask:hS(t.fieldMask)};else{if(!(t instanceof PE))return Me(16599,{Vt:t.type});a={verify:Id(r,t.key)}}return t.fieldTransforms.length>0&&(a.updateTransforms=t.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Cu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof xo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof To)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Nu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Me(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(a.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:WE(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)})(r,t.precondition)),a}function aS(r,t){return r&&r.length>0?(st(t!==void 0,14353),r.map((a=>(function(o,c){let f=o.updateTime?ja(o.updateTime):ja(c);return f.isEqual(Ie.min())&&(f=ja(c)),new BE(f,o.transformResults||[])})(a,t)))):[]}function iS(r,t){return{documents:[w1(r,t.path)]}}function sS(r,t){const a={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),a.structuredQuery.from=[{collectionId:s.lastSegment()}]),a.parent=w1(r,o);const c=(function(b){if(b.length!==0)return N1(la.create(b,"and"))})(t.filters);c&&(a.structuredQuery.where=c);const f=(function(b){if(b.length!==0)return b.map((x=>(function(w){return{field:jr(w.field),direction:oS(w.dir)}})(x)))})(t.orderBy);f&&(a.structuredQuery.orderBy=f);const m=Rd(r,t.limit);return m!==null&&(a.structuredQuery.limit=m),t.startAt&&(a.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(a.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:a,parent:o}}function rS(r){let t=eS(r.parent);const a=r.structuredQuery,s=a.from?a.from.length:0;let o=null;if(s>0){st(s===1,65062);const x=a.from[0];x.allDescendants?o=x.collectionId:t=t.child(x.collectionId)}let c=[];a.where&&(c=(function(T){const w=C1(T);return w instanceof la&&t1(w)?w.getFilters():[w]})(a.where));let f=[];a.orderBy&&(f=(function(T){return T.map((w=>(function(k){return new _o(kr(k.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(a.orderBy));let m=null;a.limit&&(m=(function(T){let w;return w=typeof T=="object"?T.value:T,ku(w)?null:w})(a.limit));let p=null;a.startAt&&(p=(function(T){const w=!!T.before,O=T.values||[];return new wu(O,w)})(a.startAt));let b=null;return a.endAt&&(b=(function(T){const w=!T.before,O=T.values||[];return new wu(O,w)})(a.endAt)),wE(t,o,f,c,m,"F",p,b)}function lS(r,t){const a=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(t.purpose);return a==null?null:{"goog-listen-tags":a}}function C1(r){return r.unaryFilter!==void 0?(function(a){switch(a.unaryFilter.op){case"IS_NAN":const s=kr(a.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=kr(a.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=kr(a.unaryFilter.field);return Pt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=kr(a.unaryFilter.field);return Pt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(r):r.fieldFilter!==void 0?(function(a){return Pt.create(kr(a.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(a.fieldFilter.op),a.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(a){return la.create(a.compositeFilter.filters.map((s=>C1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(a.compositeFilter.op))})(r):Me(30097,{filter:r})}function oS(r){return KE[r]}function cS(r){return $E[r]}function uS(r){return ZE[r]}function jr(r){return{fieldPath:r.canonicalString()}}function kr(r){return sn.fromServerFormat(r.fieldPath)}function N1(r){return r instanceof Pt?(function(a){if(a.op==="=="){if(Oy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NAN"}};if(Dy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(Oy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NOT_NAN"}};if(Dy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(a.field),op:cS(a.op),value:a.value}}})(r):r instanceof la?(function(a){const s=a.getFilters().map((o=>N1(o)));return s.length===1?s[0]:{compositeFilter:{op:uS(a.op),filters:s}}})(r):Me(54877,{filter:r})}function hS(r){const t=[];return r.fields.forEach((a=>t.push(a.canonicalString()))),{fieldPaths:t}}function R1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Hi{constructor(t,a,s,o,c=Ie.min(),f=Ie.min(),m=rn.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=a,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new Hi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,a){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class fS{constructor(t){this.yt=t}}function dS(r){const t=rS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Au(t,t.limit,"L"):t}class mS{constructor(){this.Cn=new pS}addToCollectionParentIndex(t,a){return this.Cn.add(a),ne.resolve()}getCollectionParents(t,a){return ne.resolve(this.Cn.getEntries(a))}addFieldIndex(t,a){return ne.resolve()}deleteFieldIndex(t,a){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,a){return ne.resolve()}getDocumentsMatchingTarget(t,a){return ne.resolve(null)}getIndexType(t,a){return ne.resolve(0)}getFieldIndexes(t,a){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,a){return ne.resolve($i.min())}getMinOffsetFromCollectionGroup(t,a){return ne.resolve($i.min())}updateCollectionGroup(t,a,s){return ne.resolve()}updateIndexEntries(t,a){return ne.resolve()}}class pS{constructor(){this.index={}}add(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a]||new Ht(pt.comparator),c=!o.has(s);return this.index[a]=o.add(s),c}has(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ht(pt.comparator)).toArray()}}const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M1=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,a,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=a,this.maximumSequenceNumbersToCollect=s}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(M1,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xr(0)}static cr(){return new Xr(-1)}}const Yy="LruGarbageCollector",gS=1048576;function Ky([r,t],[a,s]){const o=He(r,a);return o===0?He(t,s):o}class yS{constructor(t){this.Ir=t,this.buffer=new Ht(Ky),this.Er=0}dr(){return++this.Er}Ar(t){const a=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(a);else{const s=this.buffer.last();Ky(a,s)<0&&(this.buffer=this.buffer.delete(s).add(a))}}get maxValue(){return this.buffer.last()[0]}}class vS{constructor(t,a,s){this.garbageCollector=t,this.asyncQueue=a,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ve(Yy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){Jr(a)?ve(Yy,"Ignoring IndexedDB error during garbage collection: ",a):await Zr(a)}await this.Vr(3e5)}))}}class bS{constructor(t,a){this.mr=t,this.params=a}calculateTargetCount(t,a){return this.mr.gr(t).next((s=>Math.floor(a/100*s)))}nthSequenceNumber(t,a){if(a===0)return ne.resolve(ju.ce);const s=new yS(a);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,a,s){return this.mr.removeTargets(t,a,s)}removeOrphanedDocuments(t,a){return this.mr.removeOrphanedDocuments(t,a)}collect(t,a){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Xy)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.yr(t,a)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,a){let s,o,c,f,m,p,b;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,a)))).next((T=>(c=T,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(b=Date.now(),Or()<=Ke.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-x}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(b-p)+`ms
Total Duration: ${b-x}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T}))))}}function _S(r,t){return new bS(r,t)}class xS{constructor(){this.changes=new Ps((t=>t.toString()),((t,a)=>t.isEqual(a))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,a){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(a))}getEntry(t,a){this.assertNotApplied();const s=this.changes.get(a);return s!==void 0?ne.resolve(s):this.getFromCache(t,a)}getEntries(t,a){return this.getAllFromCache(t,a)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class TS{constructor(t,a){this.overlayedDocument=t,this.mutatedFields=a}}class ES{constructor(t,a,s,o){this.remoteDocumentCache=t,this.mutationQueue=a,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,a){let s=null;return this.documentOverlayCache.getOverlay(t,a).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,a)))).next((o=>(s!==null&&uo(s.mutation,o,ra.empty(),dt.now()),o)))}getDocuments(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.getLocalViewOfDocuments(t,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(t,a,s=Fe()){const o=ks();return this.populateOverlays(t,o,a).next((()=>this.computeViews(t,a,o,s).next((c=>{let f=ao();return c.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(t,a){const s=ks();return this.populateOverlays(t,s,a).next((()=>this.computeViews(t,a,s,Fe())))}populateOverlays(t,a,s){const o=[];return s.forEach((c=>{a.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(t,o).next((c=>{c.forEach(((f,m)=>{a.set(f,m)}))}))}computeViews(t,a,s,o){let c=oi();const f=co(),m=(function(){return co()})();return a.forEach(((p,b)=>{const x=s.get(b.key);o.has(b.key)&&(x===void 0||x.mutation instanceof Gs)?c=c.insert(b.key,b):x!==void 0?(f.set(b.key,x.mutation.getFieldMask()),uo(x.mutation,b,x.mutation.getFieldMask(),dt.now())):f.set(b.key,ra.empty())})),this.recalculateAndSaveOverlays(t,c).next((p=>(p.forEach(((b,x)=>f.set(b,x))),a.forEach(((b,x)=>m.set(b,new TS(x,f.get(b)??null)))),m)))}recalculateAndSaveOverlays(t,a){const s=co();let o=new xt(((f,m)=>f-m)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,a).next((f=>{for(const m of f)m.keys().forEach((p=>{const b=a.get(p);if(b===null)return;let x=s.get(p)||ra.empty();x=m.applyToLocalView(b,x),s.set(p,x);const T=(o.get(m.batchId)||Fe()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),b=p.key,x=p.value,T=h1();x.forEach((w=>{if(!c.has(w)){const O=y1(a.get(w),s.get(w));O!==null&&T.set(w,O),c=c.add(w)}})),f.push(this.documentOverlayCache.saveOverlays(t,b,T))}return ne.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,a,s,o){return(function(f){return we.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(a)?this.getDocumentsMatchingDocumentQuery(t,a.path):r1(a)?this.getDocumentsMatchingCollectionGroupQuery(t,a,s,o):this.getDocumentsMatchingCollectionQuery(t,a,s,o)}getNextDocuments(t,a,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,a,s,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,a,s.largestBatchId,o-c.size):ne.resolve(ks());let m=go,p=c;return f.next((b=>ne.forEach(b,((x,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),c.get(x)?ne.resolve():this.remoteDocumentCache.getEntry(t,x).next((w=>{p=p.insert(x,w)}))))).next((()=>this.populateOverlays(t,b,c))).next((()=>this.computeViews(t,p,b,Fe()))).next((x=>({batchId:m,changes:u1(x)})))))}))}getDocumentsMatchingDocumentQuery(t,a){return this.getDocument(t,new we(a)).next((s=>{let o=ao();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,a,s,o){const c=a.collectionGroup;let f=ao();return this.indexManager.getCollectionParents(t,c).next((m=>ne.forEach(m,(p=>{const b=(function(T,w){return new Wr(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(a,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,b,s,o).next((x=>{x.forEach(((T,w)=>{f=f.insert(T,w)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,a,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(t,a.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,a,s,c,o)))).next((f=>{c.forEach(((p,b)=>{const x=b.getKey();f.get(x)===null&&(f=f.insert(x,cn.newInvalidDocument(x)))}));let m=ao();return f.forEach(((p,b)=>{const x=c.get(p);x!==void 0&&uo(x.mutation,b,ra.empty(),dt.now()),Uu(a,b)&&(m=m.insert(p,b))})),m}))}}class SS{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,a){return ne.resolve(this.Lr.get(a))}saveBundleMetadata(t,a){return this.Lr.set(a.id,(function(o){return{id:o.id,version:o.version,createTime:ja(o.createTime)}})(a)),ne.resolve()}getNamedQuery(t,a){return ne.resolve(this.kr.get(a))}saveNamedQuery(t,a){return this.kr.set(a.name,(function(o){return{name:o.name,query:dS(o.bundledQuery),readTime:ja(o.readTime)}})(a)),ne.resolve()}}class wS{constructor(){this.overlays=new xt(we.comparator),this.qr=new Map}getOverlay(t,a){return ne.resolve(this.overlays.get(a))}getOverlays(t,a){const s=ks();return ne.forEach(a,(o=>this.getOverlay(t,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(t,a,s){return s.forEach(((o,c)=>{this.St(t,a,c)})),ne.resolve()}removeOverlaysForBatchId(t,a,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(t,a,s){const o=ks(),c=a.length+1,f=new we(a.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,b=p.getKey();if(!a.isPrefixOf(b.path))break;b.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(t,a,s,o){let c=new xt(((b,x)=>b-x));const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===a&&b.largestBatchId>s){let x=c.get(b.largestBatchId);x===null&&(x=ks(),c=c.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=ks(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((b,x)=>m.set(b,x))),!(m.size()>=o)););return ne.resolve(m)}St(t,a,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new qE(a,s));let c=this.qr.get(a);c===void 0&&(c=Fe(),this.qr.set(a,c)),this.qr.set(a,c.add(s.key))}}class AS{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,a){return this.sessionToken=a,ne.resolve()}}class nm{constructor(){this.Qr=new Ht(Yt.$r),this.Ur=new Ht(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,a){const s=new Yt(t,a);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,a){t.forEach((s=>this.addReference(s,a)))}removeReference(t,a){this.Gr(new Yt(t,a))}zr(t,a){t.forEach((s=>this.removeReference(s,a)))}jr(t){const a=new we(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1),c=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const a=new we(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1);let c=Fe();return this.Ur.forEachInRange([s,o],(f=>{c=c.add(f.key)})),c}containsKey(t){const a=new Yt(t,0),s=this.Qr.firstAfterOrEqual(a);return s!==null&&t.isEqual(s.key)}}class Yt{constructor(t,a){this.key=t,this.Yr=a}static $r(t,a){return we.comparator(t.key,a.key)||He(t.Yr,a.Yr)}static Kr(t,a){return He(t.Yr,a.Yr)||we.comparator(t.key,a.key)}}class CS{constructor(t,a){this.indexManager=t,this.referenceDelegate=a,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Yt.$r)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,a,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new GE(c,a,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(t,a){return ne.resolve(this.Xr(a))}getNextMutationBatchAfterBatchId(t,a){const s=a+1,o=this.ei(s),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Xd:this.tr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,a){const s=new Yt(a,0),o=new Yt(a,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);c.push(m)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,a){let s=new Ht(He);return a.forEach((o=>{const c=new Yt(o,0),f=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,a){const s=a.path,o=s.length+1;let c=s;we.isDocumentKey(c)||(c=c.child(""));const f=new Yt(new we(c),0);let m=new Ht(He);return this.Zr.forEachWhile((p=>{const b=p.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(m=m.add(p.Yr)),!0)}),f),ne.resolve(this.ti(m))}ti(t){const a=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&a.push(o)})),a}removeMutationBatch(t,a){st(this.ni(a.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(a.mutations,(o=>{const c=new Yt(o.key,a.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,a){const s=new Yt(a,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(a.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}ni(t,a){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const a=this.ei(t);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}class NS{constructor(t){this.ri=t,this.docs=(function(){return new xt(we.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,a){const s=a.key,o=this.docs.get(s),c=o?o.size:0,f=this.ri(a);return this.docs=this.docs.insert(s,{document:a.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const a=this.docs.get(t);a&&(this.docs=this.docs.remove(t),this.size-=a.size)}getEntry(t,a){const s=this.docs.get(a);return ne.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(a))}getEntries(t,a){let s=oi();return a.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():cn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(t,a,s,o){let c=oi();const f=a.path,m=new we(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:b,value:{document:x}}=p.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||aE(nE(x),s)<=0||(o.has(x.key)||Uu(a,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(t,a,s,o){Me(9500)}ii(t,a){return ne.forEach(this.docs,(s=>a(s)))}newChangeBuffer(t){return new RS(this)}getSize(t){return ne.resolve(this.size)}}class RS extends xS{constructor(t){super(),this.Nr=t}applyChanges(t){const a=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?a.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),ne.waitFor(a)}getFromCache(t,a){return this.Nr.getEntry(t,a)}getAllFromCache(t,a){return this.Nr.getEntries(t,a)}}class MS{constructor(t){this.persistence=t,this.si=new Ps((a=>$d(a)),Zd),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new nm,this.targetCount=0,this.ai=Xr.ur()}forEachTarget(t,a){return this.si.forEach(((s,o)=>a(o))),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,a,s){return s&&(this.lastRemoteSnapshotVersion=s),a>this.oi&&(this.oi=a),ne.resolve()}Pr(t){this.si.set(t.target,t);const a=t.targetId;a>this.highestTargetId&&(this.ai=new Xr(a),this.highestTargetId=a),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,a){return this.Pr(a),this.targetCount+=1,ne.resolve()}updateTargetData(t,a){return this.Pr(a),ne.resolve()}removeTargetData(t,a){return this.si.delete(a.target),this._i.jr(a.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,a,s){let o=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=a&&s.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,a){const s=this.si.get(a)||null;return ne.resolve(s)}addMatchingKeys(t,a,s){return this._i.Wr(a,s),ne.resolve()}removeMatchingKeys(t,a,s){this._i.zr(a,s);const o=this.persistence.referenceDelegate,c=[];return o&&a.forEach((f=>{c.push(o.markPotentiallyOrphaned(t,f))})),ne.waitFor(c)}removeMatchingKeysForTargetId(t,a){return this._i.jr(a),ne.resolve()}getMatchingKeysForTargetId(t,a){const s=this._i.Hr(a);return ne.resolve(s)}containsKey(t,a){return ne.resolve(this._i.containsKey(a))}}class I1{constructor(t,a){this.ui={},this.overlays={},this.ci=new ju(0),this.li=!1,this.li=!0,this.hi=new AS,this.referenceDelegate=t(this),this.Pi=new MS(this),this.indexManager=new mS,this.remoteDocumentCache=(function(o){return new NS(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fS(a),this.Ii=new SS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let a=this.overlays[t.toKey()];return a||(a=new wS,this.overlays[t.toKey()]=a),a}getMutationQueue(t,a){let s=this.ui[t.toKey()];return s||(s=new CS(a,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,a,s){ve("MemoryPersistence","Starting transaction:",t);const o=new IS(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(t,a){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,a))))}}class IS extends sE{constructor(t){super(),this.currentSequenceNumber=t}}class am{constructor(t){this.persistence=t,this.Ri=new nm,this.Vi=null}static mi(t){return new am(t)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(t,a,s){return this.Ri.addReference(s,a),this.fi.delete(s.toString()),ne.resolve()}removeReference(t,a,s){return this.Ri.removeReference(s,a),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(t,a){return this.fi.add(a.toString()),ne.resolve()}removeTarget(t,a){this.Ri.jr(a.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,a.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,a)))}Ei(){this.Vi=new Set}di(t){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=we.fromPath(s);return this.gi(t,o).next((c=>{c||a.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,a.apply(t))))}updateLimboDocument(t,a){return this.gi(t,a).next((s=>{s?this.fi.delete(a.toString()):this.fi.add(a.toString())}))}Ti(t){return 0}gi(t,a){return ne.or([()=>ne.resolve(this.Ri.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(t,a),()=>this.persistence.Ai(t,a)])}}class Mu{constructor(t,a){this.persistence=t,this.pi=new Ps((s=>oE(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=_S(this,a)}static mi(t,a){return new Mu(t,a)}Ei(){}di(t){return ne.resolve()}forEachTarget(t,a){return this.persistence.getTargetCache().forEachTarget(t,a)}gr(t){const a=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>a.next((o=>s+o))))}wr(t){let a=0;return this.pr(t,(s=>{a++})).next((()=>a))}pr(t,a){return ne.forEach(this.pi,((s,o)=>this.br(t,s,o).next((c=>c?ne.resolve():a(o)))))}removeTargets(t,a,s){return this.persistence.getTargetCache().removeTargets(t,a,s)}removeOrphanedDocuments(t,a){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(t,(f=>this.br(t,f,a).next((m=>{m||(s++,c.removeEntry(f,Ie.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,a){return this.pi.set(a,t.currentSequenceNumber),ne.resolve()}removeTarget(t,a){const s=a.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),ne.resolve()}removeReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,a){return this.pi.set(a,t.currentSequenceNumber),ne.resolve()}Ti(t){let a=t.key.toString().length;return t.isFoundDocument()&&(a+=cu(t.data.value)),a}br(t,a,s){return ne.or([()=>this.persistence.Ai(t,a),()=>this.persistence.getTargetCache().containsKey(t,a),()=>{const o=this.pi.get(a);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class im{constructor(t,a,s,o){this.targetId=t,this.fromCache=a,this.Es=s,this.ds=o}static As(t,a){let s=Fe(),o=Fe();for(const c of a.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new im(t,a.fromCache,s,o)}}class DS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class OS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return E2()?8:rE(x2())>0?6:4})()}initialize(t,a){this.ps=t,this.indexManager=a,this.Rs=!0}getDocumentsMatchingQuery(t,a,s,o){const c={result:null};return this.ys(t,a).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,a,o,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new DS;return this.Ss(t,a,f).next((m=>{if(c.result=m,this.Vs)return this.bs(t,a,f,m.size)}))})).next((()=>c.result))}bs(t,a,s,o){return s.documentReadCount<this.fs?(Or()<=Ke.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Vr(a),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Or()<=Ke.DEBUG&&ve("QueryEngine","Query:",Vr(a),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Or()<=Ke.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Vr(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Va(a))):ne.resolve())}ys(t,a){if(Ly(a))return ne.resolve(null);let s=Va(a);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(a.limit!==null&&o===1&&(a=Au(a,null,"F"),s=Va(a)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const f=Fe(...c);return this.ps.getDocuments(t,f).next((m=>this.indexManager.getMinOffset(t,s).next((p=>{const b=this.Ds(a,m);return this.Cs(a,b,f,p.readTime)?this.ys(t,Au(a,null,"F")):this.vs(t,b,a,p)}))))})))))}ws(t,a,s,o){return Ly(a)||o.isEqual(Ie.min())?ne.resolve(null):this.ps.getDocuments(t,s).next((c=>{const f=this.Ds(a,c);return this.Cs(a,f,s,o)?ne.resolve(null):(Or()<=Ke.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vr(a)),this.vs(t,f,a,tE(o,go)).next((m=>m)))}))}Ds(t,a){let s=new Ht(o1(t));return a.forEach(((o,c)=>{Uu(t,c)&&(s=s.add(c))})),s}Cs(t,a,s,o){if(t.limit===null)return!1;if(s.size!==a.size)return!0;const c=t.limitType==="F"?a.last():a.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(t,a,s){return Or()<=Ke.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Vr(a)),this.ps.getDocumentsMatchingQuery(t,a,$i.min(),s)}vs(t,a,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((c=>(a.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const sm="LocalStore",VS=3e8;class jS{constructor(t,a,s,o){this.persistence=t,this.Fs=a,this.serializer=o,this.Ms=new xt(He),this.xs=new Ps((c=>$d(c)),Zd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ES(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(a=>t.collect(a,this.Ms)))}}function kS(r,t,a,s){return new jS(r,t,a,s)}async function D1(r,t){const a=De(r);return await a.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return a.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,a.Bs(t),a.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let p=Fe();for(const b of o){f.push(b.batchId);for(const x of b.mutations)p=p.add(x.key)}for(const b of c){m.push(b.batchId);for(const x of b.mutations)p=p.add(x.key)}return a.localDocuments.getDocuments(s,p).next((b=>({Ls:b,removedBatchIds:f,addedBatchIds:m})))}))}))}function LS(r,t){const a=De(r);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),c=a.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,b,x){const T=b.batch,w=T.keys();let O=ne.resolve();return w.forEach((k=>{O=O.next((()=>x.getEntry(p,k))).next((F=>{const U=b.docVersions.get(k);st(U!==null,48541),F.version.compareTo(U)<0&&(T.applyToRemoteDocument(F,b),F.isValidDocument()&&(F.setReadTime(b.commitVersion),x.addEntry(F)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(a,s,t,c).next((()=>c.apply(s))).next((()=>a.mutationQueue.performConsistencyCheck(s))).next((()=>a.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Fe();for(let b=0;b<m.mutationResults.length;++b)m.mutationResults[b].transformResults.length>0&&(p=p.add(m.batch.mutations[b].key));return p})(t)))).next((()=>a.localDocuments.getDocuments(s,o)))}))}function O1(r){const t=De(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(a=>t.Pi.getLastRemoteSnapshotVersion(a)))}function BS(r,t){const a=De(r),s=t.snapshotVersion;let o=a.Ms;return a.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=a.Ns.newChangeBuffer({trackRemovals:!0});o=a.Ms;const m=[];t.targetChanges.forEach(((x,T)=>{const w=o.get(T);if(!w)return;m.push(a.Pi.removeMatchingKeys(c,x.removedDocuments,T).next((()=>a.Pi.addMatchingKeys(c,x.addedDocuments,T))));let O=w.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(T)!==null?O=O.withResumeToken(rn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):x.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(x.resumeToken,s)),o=o.insert(T,O),(function(F,U,j){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=VS?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(w,O,x)&&m.push(a.Pi.updateTargetData(c,O))}));let p=oi(),b=Fe();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&m.push(a.persistence.referenceDelegate.updateLimboDocument(c,x))})),m.push(US(c,f,t.documentUpdates).next((x=>{p=x.ks,b=x.qs}))),!s.isEqual(Ie.min())){const x=a.Pi.getLastRemoteSnapshotVersion(c).next((T=>a.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(x)}return ne.waitFor(m).next((()=>f.apply(c))).next((()=>a.localDocuments.getLocalViewOfDocuments(c,p,b))).next((()=>p))})).then((c=>(a.Ms=o,c)))}function US(r,t,a){let s=Fe(),o=Fe();return a.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let f=oi();return a.forEach(((m,p)=>{const b=c.get(m);p.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(t.removeEntry(m,p.readTime),f=f.insert(m,p)):!b.isValidDocument()||p.version.compareTo(b.version)>0||p.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(p),f=f.insert(m,p)):ve(sm,"Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function zS(r,t){const a=De(r);return a.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Xd),a.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function PS(r,t){const a=De(r);return a.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return a.Pi.getTargetData(s,t).next((c=>c?(o=c,ne.resolve(o)):a.Pi.allocateTargetId(s).next((f=>(o=new Hi(t,f,"TargetPurposeListen",s.currentSequenceNumber),a.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=a.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(a.Ms=a.Ms.insert(s.targetId,s),a.xs.set(t,s.targetId)),s}))}async function Od(r,t,a){const s=De(r),o=s.Ms.get(t),c=a?"readwrite":"readwrite-primary";try{a||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Jr(f))throw f;ve(sm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function $y(r,t,a){const s=De(r);let o=Ie.min(),c=Fe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,b,x){const T=De(p),w=T.xs.get(x);return w!==void 0?ne.resolve(T.Ms.get(w)):T.Pi.getTargetData(b,x)})(s,f,Va(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,a?o:Ie.min(),a?c:Fe()))).next((m=>(GS(s,CE(t),m),{documents:m,Qs:c})))))}function GS(r,t,a){let s=r.Os.get(t)||Ie.min();a.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Zy{constructor(){this.activeTargetIds=OE()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qS{constructor(){this.Mo=new Zy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,a,s){}addLocalQueryTarget(t,a=!0){return a&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,a,s){this.xo[t]=a}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Zy,Promise.resolve()}handleUserChange(t,a,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class HS{Oo(t){}shutdown(){}}const Jy="ConnectivityMonitor";class Wy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Jy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ve(Jy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let su=null;function Vd(){return su===null?su=(function(){return 268435456+Math.round(2147483648*Math.random())})():su++,"0x"+su.toString(16)}const ld="RestConnection",FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const a=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=a+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Eu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,a,s,o,c){const f=Vd(),m=this.zo(t,a.toUriEncodedString());ve(ld,`Sending RPC '${t}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:b}=new URL(m),x=qd(b);return this.Jo(t,m,p,s,x).then((T=>(ve(ld,`Received RPC '${t}' ${f}: `,T),T)),(T=>{throw qr(ld,`RPC '${t}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(t,a,s,o,c,f){return this.Go(t,a,s,o,c)}jo(t,a,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$r})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach(((o,c)=>t[c]=o)),s&&s.headers.forEach(((o,c)=>t[c]=o))}zo(t,a){const s=FS[t];return`${this.Uo}/v1/${a}:${s}`}terminate(){}}class XS{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const ln="WebChannelConnection";class YS extends QS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,a,s,o,c){const f=Vd();return new Promise(((m,p)=>{const b=new Vv;b.setWithCredentials(!0),b.listenOnce(jv.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case ou.NO_ERROR:const T=b.getResponseJson();ve(ln,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(T)),m(T);break;case ou.TIMEOUT:ve(ln,`RPC '${t}' ${f} timed out`),p(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ou.HTTP_ERROR:const w=b.getStatus();if(ve(ln,`RPC '${t}' ${f} failed with status:`,w,"response text:",b.getResponseText()),w>0){let O=b.getResponseJson();Array.isArray(O)&&(O=O[0]);const k=O?.error;if(k&&k.status&&k.message){const F=(function(j){const W=j.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN})(k.status);p(new pe(F,k.message))}else p(new pe(te.UNKNOWN,"Server responded with status "+b.getStatus()))}else p(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:t,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{ve(ln,`RPC '${t}' ${f} completed.`)}}));const x=JSON.stringify(o);ve(ln,`RPC '${t}' ${f} sending request:`,o),b.send(a,"POST",x,s,15)}))}T_(t,a,s){const o=Vd(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Bv(),m=Lv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(p.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,a,s),p.encodeInitMessageHeaders=!0;const x=c.join("");ve(ln,`Creating RPC '${t}' stream ${o}: ${x}`,p);const T=f.createWebChannel(x,p);this.I_(T);let w=!1,O=!1;const k=new XS({Yo:U=>{O?ve(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,U):(w||(ve(ln,`Opening RPC '${t}' stream ${o} transport.`),T.open(),w=!0),ve(ln,`RPC '${t}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),F=(U,j,W)=>{U.listen(j,($=>{try{W($)}catch(se){setTimeout((()=>{throw se}),0)}}))};return F(T,no.EventType.OPEN,(()=>{O||(ve(ln,`RPC '${t}' stream ${o} transport opened.`),k.o_())})),F(T,no.EventType.CLOSE,(()=>{O||(O=!0,ve(ln,`RPC '${t}' stream ${o} transport closed`),k.a_(),this.E_(T))})),F(T,no.EventType.ERROR,(U=>{O||(O=!0,qr(ln,`RPC '${t}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),k.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),F(T,no.EventType.MESSAGE,(U=>{if(!O){const j=U.data[0];st(!!j,16349);const W=j,$=W?.error||W[0]?.error;if($){ve(ln,`RPC '${t}' stream ${o} received error:`,$);const se=$.status;let ce=(function(S){const C=zt[S];if(C!==void 0)return _1(C)})(se),le=$.message;ce===void 0&&(ce=te.INTERNAL,le="Unknown error status: "+se+" with message "+$.message),O=!0,k.a_(new pe(ce,le)),T.close()}else ve(ln,`RPC '${t}' stream ${o} received:`,j),k.u_(j)}})),F(m,kv.STAT_EVENT,(U=>{U.stat===Td.PROXY?ve(ln,`RPC '${t}' stream ${o} detected buffering proxy`):U.stat===Td.NOPROXY&&ve(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((a=>a===t))}}function od(){return typeof document<"u"?document:null}function qu(r){return new JE(r,!0)}class V1{constructor(t,a,s=1e3,o=1.5,c=6e4){this.Mi=t,this.timerId=a,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const a=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,a-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${a} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ev="PersistentStream";class j1{constructor(t,a,s,o,c,f,m,p){this.Mi=t,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V1(t,a)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,a){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():a&&a.code===te.RESOURCE_EXHAUSTED?(li(a.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):a&&a.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(a)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),a=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===a&&this.G_(s,o)}),(s=>{t((()=>{const o=new pe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,a){const s=this.W_(this.D_);this.stream=this.j_(t,a),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ve(ev,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return a=>{this.Mi.enqueueAndForget((()=>this.D_===t?a():(ve(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KS extends j1{constructor(t,a,s,o,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,s,o,f),this.serializer=c}j_(t,a){return this.connection.T_("Listen",t,a)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const a=tS(this.serializer,t),s=(function(c){if(!("targetChange"in c))return Ie.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ie.min():f.readTime?ja(f.readTime):Ie.min()})(t);return this.listener.H_(a,s)}Y_(t){const a={};a.database=Dd(this.serializer),a.addTarget=(function(c,f){let m;const p=f.target;if(m=Cd(p)?{documents:iS(c,p)}:{query:sS(c,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=E1(c,f.resumeToken);const b=Rd(c,f.expectedCount);b!==null&&(m.expectedCount=b)}else if(f.snapshotVersion.compareTo(Ie.min())>0){m.readTime=Ru(c,f.snapshotVersion.toTimestamp());const b=Rd(c,f.expectedCount);b!==null&&(m.expectedCount=b)}return m})(this.serializer,t);const s=lS(this.serializer,t);s&&(a.labels=s),this.q_(a)}Z_(t){const a={};a.database=Dd(this.serializer),a.removeTarget=t,this.q_(a)}}class $S extends j1{constructor(t,a,s,o,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,s,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,a){return this.connection.T_("Write",t,a)}J_(t){return st(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,st(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){st(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const a=aS(t.writeResults,t.commitTime),s=ja(t.commitTime);return this.listener.na(s,a)}ra(){const t={};t.database=Dd(this.serializer),this.q_(t)}ea(t){const a={streamToken:this.lastStreamToken,writes:t.map((s=>nS(this.serializer,s)))};this.q_(a)}}class ZS{}class JS extends ZS{constructor(t,a,s,o){super(),this.authCredentials=t,this.appCheckCredentials=a,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,a,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,Md(a,s),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(te.UNKNOWN,c.toString())}))}Ho(t,a,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(t,Md(a,s),o,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(te.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WS{constructor(t,a){this.asyncQueue=t,this.onlineStateHandler=a,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const a=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(a),this.aa=!1):ve("OnlineStateTracker",a)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Us="RemoteStore";class ew{constructor(t,a,s,o,c){this.localStore=t,this.datastore=a,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{qs(this)&&(ve(Us,"Restarting streams for network reachability change."),await(async function(p){const b=De(p);b.Ea.add(4),await Ao(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Hu(b)})(this))}))})),this.Ra=new WS(s,o)}}async function Hu(r){if(qs(r))for(const t of r.da)await t(!0)}async function Ao(r){for(const t of r.da)await t(!1)}function k1(r,t){const a=De(r);a.Ia.has(t.targetId)||(a.Ia.set(t.targetId,t),cm(a)?om(a):el(a).O_()&&lm(a,t))}function rm(r,t){const a=De(r),s=el(a);a.Ia.delete(t),s.O_()&&L1(a,t),a.Ia.size===0&&(s.O_()?s.L_():qs(a)&&a.Ra.set("Unknown"))}function lm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ie.min())>0){const a=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(a)}el(r).Y_(t)}function L1(r,t){r.Va.Ue(t),el(r).Z_(t)}function om(r){r.Va=new YE({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),el(r).start(),r.Ra.ua()}function cm(r){return qs(r)&&!el(r).x_()&&r.Ia.size>0}function qs(r){return De(r).Ea.size===0}function B1(r){r.Va=void 0}async function tw(r){r.Ra.set("Online")}async function nw(r){r.Ia.forEach(((t,a)=>{lm(r,t)}))}async function aw(r,t){B1(r),cm(r)?(r.Ra.ha(t),om(r)):r.Ra.set("Unknown")}async function iw(r,t,a){if(r.Ra.set("Online"),t instanceof T1&&t.state===2&&t.cause)try{await(async function(o,c){const f=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){ve(Us,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Iu(r,s)}else if(t instanceof fu?r.Va.Ze(t):t instanceof x1?r.Va.st(t):r.Va.tt(t),!a.isEqual(Ie.min()))try{const s=await O1(r.localStore);a.compareTo(s)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((p,b)=>{if(p.resumeToken.approximateByteSize()>0){const x=c.Ia.get(b);x&&c.Ia.set(b,x.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,b)=>{const x=c.Ia.get(p);if(!x)return;c.Ia.set(p,x.withResumeToken(rn.EMPTY_BYTE_STRING,x.snapshotVersion)),L1(c,p);const T=new Hi(x.target,p,b,x.sequenceNumber);lm(c,T)})),c.remoteSyncer.applyRemoteEvent(m)})(r,a)}catch(s){ve(Us,"Failed to raise snapshot:",s),await Iu(r,s)}}async function Iu(r,t,a){if(!Jr(t))throw t;r.Ea.add(1),await Ao(r),r.Ra.set("Offline"),a||(a=()=>O1(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve(Us,"Retrying IndexedDB access"),await a(),r.Ea.delete(1),await Hu(r)}))}function U1(r,t){return t().catch((a=>Iu(r,a,t)))}async function Fu(r){const t=De(r),a=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xd;for(;sw(t);)try{const o=await zS(t.localStore,s);if(o===null){t.Ta.length===0&&a.L_();break}s=o.batchId,rw(t,o)}catch(o){await Iu(t,o)}z1(t)&&P1(t)}function sw(r){return qs(r)&&r.Ta.length<10}function rw(r,t){r.Ta.push(t);const a=es(r);a.O_()&&a.X_&&a.ea(t.mutations)}function z1(r){return qs(r)&&!es(r).x_()&&r.Ta.length>0}function P1(r){es(r).start()}async function lw(r){es(r).ra()}async function ow(r){const t=es(r);for(const a of r.Ta)t.ea(a.mutations)}async function cw(r,t,a){const s=r.Ta.shift(),o=Wd.from(s,t,a);await U1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Fu(r)}async function uw(r,t){t&&es(r).X_&&await(async function(s,o){if((function(f){return FE(f)&&f!==te.ABORTED})(o.code)){const c=s.Ta.shift();es(s).B_(),await U1(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Fu(s)}})(r,t),z1(r)&&P1(r)}async function tv(r,t){const a=De(r);a.asyncQueue.verifyOperationInProgress(),ve(Us,"RemoteStore received new credentials");const s=qs(a);a.Ea.add(3),await Ao(a),s&&a.Ra.set("Unknown"),await a.remoteSyncer.handleCredentialChange(t),a.Ea.delete(3),await Hu(a)}async function hw(r,t){const a=De(r);t?(a.Ea.delete(2),await Hu(a)):t||(a.Ea.add(2),await Ao(a),a.Ra.set("Unknown"))}function el(r){return r.ma||(r.ma=(function(a,s,o){const c=De(a);return c.sa(),new KS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:tw.bind(null,r),t_:nw.bind(null,r),r_:aw.bind(null,r),H_:iw.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),cm(r)?om(r):r.Ra.set("Unknown")):(await r.ma.stop(),B1(r))}))),r.ma}function es(r){return r.fa||(r.fa=(function(a,s,o){const c=De(a);return c.sa(),new $S(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:lw.bind(null,r),r_:uw.bind(null,r),ta:ow.bind(null,r),na:cw.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Fu(r)):(await r.fa.stop(),r.Ta.length>0&&(ve(Us,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class um{constructor(t,a,s,o,c){this.asyncQueue=t,this.timerId=a,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,a,s,o,c){const f=Date.now()+s,m=new um(t,a,f,o,c);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(r,t){if(li("AsyncQueue",`${t}: ${r}`),Jr(r))return new pe(te.UNAVAILABLE,`${t}: ${r}`);throw r}class Ur{static emptySet(t){return new Ur(t.comparator)}constructor(t){this.comparator=t?(a,s)=>t(a,s)||we.comparator(a.key,s.key):(a,s)=>we.comparator(a.key,s.key),this.keyedMap=ao(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const a=this.keyedMap.get(t);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((a,s)=>(t(a),!1)))}add(t){const a=this.delete(t.key);return a.copy(a.keyedMap.insert(t.key,t),a.sortedSet.insert(t,null))}delete(t){const a=this.get(t);return a?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(a)):this}isEqual(t){if(!(t instanceof Ur)||this.size!==t.size)return!1;const a=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((a=>{t.push(a.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,a){const s=new Ur;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=a,s}}class nv{constructor(){this.ga=new xt(we.comparator)}track(t){const a=t.doc.key,s=this.ga.get(a);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(a,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(a,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(a,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(a):t.type===1&&s.type===2?this.ga=this.ga.insert(a,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):Me(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(a,t)}ya(){const t=[];return this.ga.inorderTraversal(((a,s)=>{t.push(s)})),t}}class Yr{constructor(t,a,s,o,c,f,m,p,b){this.query=t,this.docs=a,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=b}static fromInitialDocuments(t,a,s,o,c){const f=[];return a.forEach((m=>{f.push({type:0,doc:m})})),new Yr(t,a,Ur.emptySet(a),f,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const a=this.docChanges,s=t.docChanges;if(a.length!==s.length)return!1;for(let o=0;o<a.length;o++)if(a[o].type!==s[o].type||!a[o].doc.isEqual(s[o].doc))return!1;return!0}}class fw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class dw{constructor(){this.queries=av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(a,s){const o=De(a),c=o.queries;o.queries=av(),c.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function av(){return new Ps((r=>l1(r)),Bu)}async function mw(r,t){const a=De(r);let s=3;const o=t.query;let c=a.queries.get(o);c?!c.ba()&&t.Da()&&(s=2):(c=new fw,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await a.onListen(o,!0);break;case 1:c.wa=await a.onListen(o,!1);break;case 2:await a.onFirstRemoteStoreListen(o)}}catch(f){const m=hm(f,`Initialization of query '${Vr(t.query)}' failed`);return void t.onError(m)}a.queries.set(o,c),c.Sa.push(t),t.va(a.onlineState),c.wa&&t.Fa(c.wa)&&fm(a)}async function pw(r,t){const a=De(r),s=t.query;let o=3;const c=a.queries.get(s);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=t.Da()?0:1:!c.ba()&&t.Da()&&(o=2))}switch(o){case 0:return a.queries.delete(s),a.onUnlisten(s,!0);case 1:return a.queries.delete(s),a.onUnlisten(s,!1);case 2:return a.onLastRemoteStoreUnlisten(s);default:return}}function gw(r,t){const a=De(r);let s=!1;for(const o of t){const c=o.query,f=a.queries.get(c);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&fm(a)}function yw(r,t,a){const s=De(r),o=s.queries.get(t);if(o)for(const c of o.Sa)c.onError(a);s.queries.delete(t)}function fm(r){r.Ca.forEach((t=>{t.next()}))}var jd,iv;(iv=jd||(jd={})).Ma="default",iv.Cache="cache";class vw{constructor(t,a,s){this.query=t,this.xa=a,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Yr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let a=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),a=!0):this.La(t,this.onlineState)&&(this.ka(t),a=!0),this.Na=t,a}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let a=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),a=!0),a}La(t,a){if(!t.fromCache||!this.Da())return!0;const s=a!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||a==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const a=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}ka(t){t=Yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==jd.Cache}}class G1{constructor(t){this.key=t}}class q1{constructor(t){this.key=t}}class bw{constructor(t,a){this.query=t,this.Ya=a,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=o1(t),this.tu=new Ur(this.eu)}get nu(){return this.Ya}ru(t,a){const s=a?a.iu:new nv,o=a?a.tu:this.tu;let c=a?a.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((x,T)=>{const w=o.get(x),O=Uu(this.query,T)?T:null,k=!!w&&this.mutatedKeys.has(w.key),F=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;w&&O?w.data.isEqual(O.data)?k!==F&&(s.track({type:3,doc:O}),U=!0):this.su(w,O)||(s.track({type:2,doc:O}),U=!0,(p&&this.eu(O,p)>0||b&&this.eu(O,b)<0)&&(m=!0)):!w&&O?(s.track({type:0,doc:O}),U=!0):w&&!O&&(s.track({type:1,doc:w}),U=!0,(p||b)&&(m=!0)),U&&(O?(f=f.add(O),c=F?c.add(x):c.delete(x)):(f=f.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const x=this.query.limitType==="F"?f.last():f.first();f=f.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:f,iu:s,Cs:m,mutatedKeys:c}}su(t,a){return t.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(t,a,s,o){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((x,T)=>(function(O,k){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:U})}};return F(O)-F(k)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(s),o=o??!1;const m=a&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,b=p!==this.Za;return this.Za=p,f.length!==0||b?{snapshot:new Yr(this.query,t.tu,c,f,t.mutatedKeys,p===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((a=>this.Ya=this.Ya.add(a))),t.modifiedDocuments.forEach((a=>{})),t.removedDocuments.forEach((a=>this.Ya=this.Ya.delete(a))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const a=[];return t.forEach((s=>{this.Xa.has(s)||a.push(new q1(s))})),this.Xa.forEach((s=>{t.has(s)||a.push(new G1(s))})),a}cu(t){this.Ya=t.Qs,this.Xa=Fe();const a=this.ru(t.documents);return this.applyChanges(a,!0)}lu(){return Yr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dm="SyncEngine";class _w{constructor(t,a,s){this.query=t,this.targetId=a,this.view=s}}class xw{constructor(t){this.key=t,this.hu=!1}}class Tw{constructor(t,a,s,o,c,f){this.localStore=t,this.remoteStore=a,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ps((m=>l1(m)),Bu),this.Iu=new Map,this.Eu=new Set,this.du=new xt(we.comparator),this.Au=new Map,this.Ru=new nm,this.Vu={},this.mu=new Map,this.fu=Xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ew(r,t,a=!0){const s=K1(r);let o;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await H1(s,t,a,!0),o}async function Sw(r,t){const a=K1(r);await H1(a,t,!0,!1)}async function H1(r,t,a,s){const o=await PS(r.localStore,Va(t)),c=o.targetId,f=r.sharedClientState.addLocalQueryTarget(c,a);let m;return s&&(m=await ww(r,t,c,f==="current",o.resumeToken)),r.isPrimaryClient&&a&&k1(r.remoteStore,o),m}async function ww(r,t,a,s,o){r.pu=(T,w,O)=>(async function(F,U,j,W){let $=U.view.ru(j);$.Cs&&($=await $y(F.localStore,U.query,!1).then((({documents:M})=>U.view.ru(M,$))));const se=W&&W.targetChanges.get(U.targetId),ce=W&&W.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges($,F.isPrimaryClient,se,ce);return rv(F,U.targetId,le.au),le.snapshot})(r,T,w,O);const c=await $y(r.localStore,t,!0),f=new bw(t,c.Qs),m=f.ru(c.documents),p=wo.createSynthesizedTargetChangeForCurrentChange(a,s&&r.onlineState!=="Offline",o),b=f.applyChanges(m,r.isPrimaryClient,p);rv(r,a,b.au);const x=new _w(t,a,f);return r.Tu.set(t,x),r.Iu.has(a)?r.Iu.get(a).push(t):r.Iu.set(a,[t]),b.snapshot}async function Aw(r,t,a){const s=De(r),o=s.Tu.get(t),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((f=>!Bu(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Od(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),a&&rm(s.remoteStore,o.targetId),kd(s,o.targetId)})).catch(Zr)):(kd(s,o.targetId),await Od(s.localStore,o.targetId,!0))}async function Cw(r,t){const a=De(r),s=a.Tu.get(t),o=a.Iu.get(s.targetId);a.isPrimaryClient&&o.length===1&&(a.sharedClientState.removeLocalQueryTarget(s.targetId),rm(a.remoteStore,s.targetId))}async function Nw(r,t,a){const s=jw(r);try{const o=await(function(f,m){const p=De(f),b=dt.now(),x=m.reduce(((O,k)=>O.add(k.key)),Fe());let T,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let k=oi(),F=Fe();return p.Ns.getEntries(O,x).next((U=>{k=U,k.forEach(((j,W)=>{W.isValidDocument()||(F=F.add(j))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,k))).next((U=>{T=U;const j=[];for(const W of m){const $=zE(W,T.get(W.key).overlayedDocument);$!=null&&j.push(new Gs(W.key,$,Jv($.value.mapValue),si.exists(!0)))}return p.mutationQueue.addMutationBatch(O,b,j,m)})).next((U=>{w=U;const j=U.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(O,U.batchId,j)}))})).then((()=>({batchId:w.batchId,changes:u1(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let b=f.Vu[f.currentUser.toKey()];b||(b=new xt(He)),b=b.insert(m,p),f.Vu[f.currentUser.toKey()]=b})(s,o.batchId,a),await Co(s,o.changes),await Fu(s.remoteStore)}catch(o){const c=hm(o,"Failed to persist write");a.reject(c)}}async function F1(r,t){const a=De(r);try{const s=await BS(a.localStore,t);t.targetChanges.forEach(((o,c)=>{const f=a.Au.get(c);f&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?st(f.hu,14607):o.removedDocuments.size>0&&(st(f.hu,42227),f.hu=!1))})),await Co(a,s,t)}catch(s){await Zr(s)}}function sv(r,t,a){const s=De(r);if(s.isPrimaryClient&&a===0||!s.isPrimaryClient&&a===1){const o=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=De(f);p.onlineState=m;let b=!1;p.queries.forEach(((x,T)=>{for(const w of T.Sa)w.va(m)&&(b=!0)})),b&&fm(p)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Rw(r,t,a){const s=De(r);s.sharedClientState.updateQueryState(t,"rejected",a);const o=s.Au.get(t),c=o&&o.key;if(c){let f=new xt(we.comparator);f=f.insert(c,cn.newNoDocument(c,Ie.min()));const m=Fe().add(c),p=new Gu(Ie.min(),new Map,new xt(He),f,m);await F1(s,p),s.du=s.du.remove(c),s.Au.delete(t),mm(s)}else await Od(s.localStore,t,!1).then((()=>kd(s,t,a))).catch(Zr)}async function Mw(r,t){const a=De(r),s=t.batch.batchId;try{const o=await LS(a.localStore,t);X1(a,s,null),Q1(a,s),a.sharedClientState.updateMutationState(s,"acknowledged"),await Co(a,o)}catch(o){await Zr(o)}}async function Iw(r,t,a){const s=De(r);try{const o=await(function(f,m){const p=De(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let x;return p.mutationQueue.lookupMutationBatch(b,m).next((T=>(st(T!==null,37113),x=T.keys(),p.mutationQueue.removeMutationBatch(b,T)))).next((()=>p.mutationQueue.performConsistencyCheck(b))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(b,x,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,x))).next((()=>p.localDocuments.getDocuments(b,x)))}))})(s.localStore,t);X1(s,t,a),Q1(s,t),s.sharedClientState.updateMutationState(t,"rejected",a),await Co(s,o)}catch(o){await Zr(o)}}function Q1(r,t){(r.mu.get(t)||[]).forEach((a=>{a.resolve()})),r.mu.delete(t)}function X1(r,t,a){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(t);c&&(a?c.reject(a):c.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function kd(r,t,a=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),a&&r.Pu.yu(s,a);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||Y1(r,s)}))}function Y1(r,t){r.Eu.delete(t.path.canonicalString());const a=r.du.get(t);a!==null&&(rm(r.remoteStore,a),r.du=r.du.remove(t),r.Au.delete(a),mm(r))}function rv(r,t,a){for(const s of a)s instanceof G1?(r.Ru.addReference(s.key,t),Dw(r,s)):s instanceof q1?(ve(dm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||Y1(r,s.key)):Me(19791,{wu:s})}function Dw(r,t){const a=t.key,s=a.path.canonicalString();r.du.get(a)||r.Eu.has(s)||(ve(dm,"New document in limbo: "+a),r.Eu.add(s),mm(r))}function mm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const a=new we(pt.fromString(t)),s=r.fu.next();r.Au.set(s,new xw(a)),r.du=r.du.insert(a,s),k1(r.remoteStore,new Hi(Va(s1(a.path)),s,"TargetPurposeLimboResolution",ju.ce))}}async function Co(r,t,a){const s=De(r),o=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,t,a).then((b=>{if((b||a)&&s.isPrimaryClient){const x=b?!b.fromCache:a?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(b){o.push(b);const x=im.As(p.targetId,b);c.push(x)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,b){const x=De(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ne.forEach(b,(w=>ne.forEach(w.Es,(O=>x.persistence.referenceDelegate.addReference(T,w.targetId,O))).next((()=>ne.forEach(w.ds,(O=>x.persistence.referenceDelegate.removeReference(T,w.targetId,O)))))))))}catch(T){if(!Jr(T))throw T;ve(sm,"Failed to update sequence numbers: "+T)}for(const T of b){const w=T.targetId;if(!T.fromCache){const O=x.Ms.get(w),k=O.snapshotVersion,F=O.withLastLimboFreeSnapshotVersion(k);x.Ms=x.Ms.insert(w,F)}}})(s.localStore,c))}async function Ow(r,t){const a=De(r);if(!a.currentUser.isEqual(t)){ve(dm,"User change. New user:",t.toKey());const s=await D1(a.localStore,t);a.currentUser=t,(function(c,f){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new pe(te.CANCELLED,f))}))})),c.mu.clear()})(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Co(a,s.Ls)}}function Vw(r,t){const a=De(r),s=a.Au.get(t);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const c=a.Iu.get(t);if(!c)return o;for(const f of c){const m=a.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function K1(r){const t=De(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rw.bind(null,t),t.Pu.H_=gw.bind(null,t.eventManager),t.Pu.yu=yw.bind(null,t.eventManager),t}function jw(r){const t=De(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Iw.bind(null,t),t}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,a){return null}Mu(t,a){return null}vu(t){return kS(this.persistence,new OS,t.initialUser,this.serializer)}Cu(t){return new I1(am.mi,this.serializer)}Du(t){return new qS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class kw extends Du{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,a){st(this.persistence.referenceDelegate instanceof Mu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new vS(s,t.asyncQueue,a)}Cu(t){const a=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new I1((s=>Mu.mi(s,a)),this.serializer)}}class Ld{async initialize(t,a){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ow.bind(null,this.syncEngine),await hw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dw})()}createDatastore(t){const a=qu(t.databaseInfo.databaseId),s=(function(c){return new YS(c)})(t.databaseInfo);return(function(c,f,m,p){return new JS(c,f,m,p)})(t.authCredentials,t.appCheckCredentials,s,a)}createRemoteStore(t){return(function(s,o,c,f,m){return new ew(s,o,c,f,m)})(this.localStore,this.datastore,t.asyncQueue,(a=>sv(this.syncEngine,a,0)),(function(){return Wy.v()?new Wy:new HS})())}createSyncEngine(t,a){return(function(o,c,f,m,p,b,x){const T=new Tw(o,c,f,m,p,b);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,a)}async terminate(){await(async function(a){const s=De(a);ve(Us,"RemoteStore shutting down."),s.Ea.add(5),await Ao(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ld.provider={build:()=>new Ld};class Lw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):li("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,a){setTimeout((()=>{this.muted||t(a)}),0)}}const ts="FirestoreClient";class Bw{constructor(t,a,s,o,c){this.authCredentials=t,this.appCheckCredentials=a,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{ve(ts,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ve(ts,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(a){const s=hm(a,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function cd(r,t){r.asyncQueue.verifyOperationInProgress(),ve(ts,"Initializing OfflineComponentProvider");const a=r.configuration;await t.initialize(a);let s=a.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await D1(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function lv(r,t){r.asyncQueue.verifyOperationInProgress();const a=await Uw(r);ve(ts,"Initializing OnlineComponentProvider"),await t.initialize(a,r.configuration),r.setCredentialChangeListener((s=>tv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>tv(t.remoteStore,o))),r._onlineComponents=t}async function Uw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ts,"Using user provided OfflineComponentProvider");try{await cd(r,r._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(a))throw a;qr("Error using user provided cache. Falling back to memory cache: "+a),await cd(r,new Du)}}else ve(ts,"Using default OfflineComponentProvider"),await cd(r,new kw(void 0));return r._offlineComponents}async function $1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ts,"Using user provided OnlineComponentProvider"),await lv(r,r._uninitializedComponentsProvider._online)):(ve(ts,"Using default OnlineComponentProvider"),await lv(r,new Ld))),r._onlineComponents}function zw(r){return $1(r).then((t=>t.syncEngine))}async function Pw(r){const t=await $1(r),a=t.eventManager;return a.onListen=Ew.bind(null,t.syncEngine),a.onUnlisten=Aw.bind(null,t.syncEngine),a.onFirstRemoteStoreListen=Sw.bind(null,t.syncEngine),a.onLastRemoteStoreUnlisten=Cw.bind(null,t.syncEngine),a}function Gw(r,t,a={}){const s=new Yi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,p,b){const x=new Lw({next:w=>{x.Nu(),f.enqueueAndForget((()=>pw(c,T))),w.fromCache&&p.source==="server"?b.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(w)},error:w=>b.reject(w)}),T=new vw(m,x,{includeMetadataChanges:!0,qa:!0});return mw(c,T)})(await Pw(r),r.asyncQueue,t,a,s))),s.promise}function Z1(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const ov=new Map;const J1="firestore.googleapis.com",cv=!0;class uv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J1,this.ssl=cv}else this.host=t.host,this.ssl=t.ssl??cv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=M1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gS)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}WT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z1(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qu{constructor(t,a,s,o){this._authCredentials=t,this._appCheckCredentials=a,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new qT;switch(s.type){case"firstParty":return new XT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(a){const s=ov.get(a);s&&(ve("ComponentProvider","Removing Datastore"),ov.delete(a),s.terminate())})(this),Promise.resolve()}}function qw(r,t,a,s={}){r=xu(r,Qu);const o=qd(t),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${a}`;o&&(g2(`https://${m}`),_2("Firestore",!0)),c.host!==J1&&c.host!==m&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:s};if(!vu(p,f)&&(r._setSettings(p),s.mockUserToken)){let b,x;if(typeof s.mockUserToken=="string")b=s.mockUserToken,x=on.MOCK_USER;else{b=y2(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(T)}r._authCredentials=new HT(new zv(b,x))}}class ns{constructor(t,a,s){this.converter=a,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ns(this.firestore,t,this._query)}}class Kt{constructor(t,a,s){this.converter=a,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kt(this.firestore,t,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,a,s){if(Eo(a,Kt._jsonSchema))return new Kt(t,s||null,new we(pt.fromString(a.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Gt("string",Kt._jsonSchemaVersion),referencePath:Gt("string")};class Ki extends ns{constructor(t,a,s){super(t,a,s1(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new we(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function Xu(r,t,...a){if(r=Gr(r),Pv("collection","path",t),r instanceof Qu){const s=pt.fromString(t,...a);return Ey(s),new Ki(r,null,s)}{if(!(r instanceof Kt||r instanceof Ki))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return Ey(s),new Ki(r.firestore,null,s)}}function Hw(r,t,...a){if(r=Gr(r),arguments.length===1&&(t=Qd.newId()),Pv("doc","path",t),r instanceof Qu){const s=pt.fromString(t,...a);return Ty(s),new Kt(r,null,new we(s))}{if(!(r instanceof Kt||r instanceof Ki))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return Ty(s),new Kt(r.firestore,r instanceof Ki?r.converter:null,new we(s))}}const hv="AsyncQueue";class fv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V1(this,"async_queue_retry"),this._c=()=>{const s=od();s&&ve(hv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const a=od();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const a=od();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const a=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(a.resolve,a.reject),a.promise))).then((()=>a.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Jr(t))throw t;ve(hv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const a=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",dv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=a,a}enqueueAfterDelay(t,a,s){this.uc(),this.oc.indexOf(t)>-1&&(a=0);const o=um.createAndSchedule(this,t,a,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const a of this.tc)if(a.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((a,s)=>a.targetTimeMs-s.targetTimeMs));for(const a of this.tc)if(a.skipDelay(),t!=="all"&&a.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const a=this.tc.indexOf(t);this.tc.splice(a,1)}}function dv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class pm extends Qu{constructor(t,a,s,o){super(t,a,s,o),this.type="firestore",this._queue=new fv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new fv(t),this._firestoreClient=void 0,await t}}}function Fw(r,t){const a=typeof r=="object"?r:MT(),s=typeof r=="string"?r:Eu,o=wT(a,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=m2("firestore");c&&qw(o,...c)}return o}function W1(r){if(r._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Qw(r),r._firestoreClient}function Qw(r){const t=r._freezeSettings(),a=(function(o,c,f,m){return new hE(o,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Z1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new Bw(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Xn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xn(rn.fromBase64String(t))}catch(a){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(t){return new Xn(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Eo(t,Xn._jsonSchema))return Xn.fromBase64String(t.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Gt("string",Xn._jsonSchemaVersion),bytes:Gt("string")};class gm{constructor(...t){for(let a=0;a<t.length;++a)if(t[a].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class eb{constructor(t){this._methodName=t}}class ka{constructor(t,a){if(!isFinite(t)||t<-90||t>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(a)||a<-180||a>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=t,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return He(this._lat,t._lat)||He(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ka._jsonSchemaVersion}}static fromJSON(t){if(Eo(t,ka._jsonSchema))return new ka(t.latitude,t.longitude)}}ka._jsonSchemaVersion="firestore/geoPoint/1.0",ka._jsonSchema={type:Gt("string",ka._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};class La{constructor(t){this._values=(t||[]).map((a=>a))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Eo(t,La._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((a=>typeof a=="number")))return new La(t.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:Gt("string",La._jsonSchemaVersion),vectorValues:Gt("object")};const Xw=/^__.*__$/;class Yw{constructor(t,a,s){this.data=t,this.fieldMask=a,this.fieldTransforms=s}toMutation(t,a){return this.fieldMask!==null?new Gs(t,this.data,this.fieldMask,a,this.fieldTransforms):new So(t,this.data,a,this.fieldTransforms)}}function tb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:r})}}class ym{constructor(t,a,s,o,c,f){this.settings=t,this.databaseId=a,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ym({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.gc(t),s}yc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ou(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((a=>t.isPrefixOf(a)))!==void 0||this.fieldTransforms.find((a=>t.isPrefixOf(a.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(tb(this.Ac)&&Xw.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Kw{constructor(t,a,s){this.databaseId=t,this.ignoreUndefinedProperties=a,this.serializer=s||qu(t)}Cc(t,a,s,o=!1){return new ym({Ac:t,methodName:a,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nb(r){const t=r._freezeSettings(),a=qu(r._databaseId);return new Kw(r._databaseId,!!t.ignoreUndefinedProperties,a)}function $w(r,t,a,s,o,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,t,a,o);sb("Data must be an object, but it was:",f,s);const m=ab(s,f);let p,b;if(c.merge)p=new ra(f.fieldMask),b=f.fieldTransforms;else if(c.mergeFields){const x=[];for(const T of c.mergeFields){const w=Jw(t,T,a);if(!f.contains(w))throw new pe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);e5(x,w)||x.push(w)}p=new ra(x),b=f.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,b=f.fieldTransforms;return new Yw(new Qn(m),p,b)}function Zw(r,t,a,s=!1){return vm(a,r.Cc(s?4:3,t))}function vm(r,t){if(ib(r=Gr(r)))return sb("Unsupported field value:",t,r),ab(r,t);if(r instanceof eb)return(function(s,o){if(!tb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let f=0;for(const m of s){let p=vm(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),f++}return{arrayValue:{values:c}}})(r,t)}return(function(s,o){if((s=Gr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return VE(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=dt.fromDate(s);return{timestampValue:Ru(o.serializer,c)}}if(s instanceof dt){const c=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ru(o.serializer,c)}}if(s instanceof ka)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xn)return{bytesValue:E1(o.serializer,s._byteString)};if(s instanceof Kt){const c=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof La)return(function(f,m){return{mapValue:{fields:{[$v]:{stringValue:Zv},[Su]:{arrayValue:{values:f.toArray().map((b=>{if(typeof b!="number")throw m.Sc("VectorValues must only contain numeric values.");return Jd(m.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vu(s)}`)})(r,t)}function ab(r,t){const a={};return Hv(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zs(r,((s,o)=>{const c=vm(o,t.mc(s));c!=null&&(a[s]=c)})),{mapValue:{fields:a}}}function ib(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof ka||r instanceof Xn||r instanceof Kt||r instanceof eb||r instanceof La)}function sb(r,t,a){if(!ib(a)||!Gv(a)){const s=Vu(a);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Jw(r,t,a){if((t=Gr(t))instanceof gm)return t._internalPath;if(typeof t=="string")return rb(r,t);throw Ou("Field path arguments must be of type string or ",r,!1,void 0,a)}const Ww=new RegExp("[~\\*/\\[\\]]");function rb(r,t,a){if(t.search(Ww)>=0)throw Ou(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,a);try{return new gm(...t.split("."))._internalPath}catch{throw Ou(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,a)}}function Ou(r,t,a,s,o){const c=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;a&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||f)&&(p+=" (found",c&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new pe(te.INVALID_ARGUMENT,m+r+p)}function e5(r,t){return r.some((a=>a.isEqual(t)))}class lb{constructor(t,a,s,o,c){this._firestore=t,this._userDataWriter=a,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new t5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const a=this._document.data.field(Yu("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a)}}}class t5 extends lb{data(){return super.data()}}function Yu(r,t){return typeof t=="string"?rb(r,t):t instanceof gm?t._internalPath:t._delegate._internalPath}function n5(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class _m extends bm{}function ho(r,t,...a){let s=[];t instanceof bm&&s.push(t),s=s.concat(a),(function(c){const f=c.filter((p=>p instanceof xm)).length,m=c.filter((p=>p instanceof Ku)).length;if(f>1||f>0&&m>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Ku extends _m{constructor(t,a,s){super(),this._field=t,this._op=a,this._value=s,this.type="where"}static _create(t,a,s){return new Ku(t,a,s)}_apply(t){const a=this._parse(t);return ob(t._query,a),new ns(t.firestore,t.converter,Nd(t._query,a))}_parse(t){const a=nb(t.firestore);return(function(c,f,m,p,b,x,T){let w;if(b.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){pv(T,x);const k=[];for(const F of T)k.push(mv(p,c,F));w={arrayValue:{values:k}}}else w=mv(p,c,T)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||pv(T,x),w=Zw(m,f,T,x==="in"||x==="not-in");return Pt.create(b,x,w)})(t._query,"where",a,t.firestore._databaseId,this._field,this._op,this._value)}}function ii(r,t,a){const s=t,o=Yu("where",r);return Ku._create(o,s,a)}class xm extends bm{constructor(t,a){super(),this.type=t,this._queryConstraints=a}static _create(t,a){return new xm(t,a)}_parse(t){const a=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return a.length===1?a[0]:la.create(a,this._getOperator())}_apply(t){const a=this._parse(t);return a.getFilters().length===0?t:((function(o,c){let f=o;const m=c.getFlattenedFilters();for(const p of m)ob(f,p),f=Nd(f,p)})(t._query,a),new ns(t.firestore,t.converter,Nd(t._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tm extends _m{constructor(t,a){super(),this._field=t,this._direction=a,this.type="orderBy"}static _create(t,a){return new Tm(t,a)}_apply(t){const a=(function(o,c,f){if(o.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(c,f)})(t._query,this._field,this._direction);return new ns(t.firestore,t.converter,(function(o,c){const f=o.explicitOrderBy.concat([c]);return new Wr(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,a))}}function Lr(r,t="asc"){const a=t,s=Yu("orderBy",r);return Tm._create(s,a)}class Em extends _m{constructor(t,a,s){super(),this.type=t,this._limit=a,this._limitType=s}static _create(t,a,s){return new Em(t,a,s)}_apply(t){return new ns(t.firestore,t.converter,Au(t._query,this._limit,this._limitType))}}function du(r){return eE("limit",r),Em._create("limit",r,"F")}function mv(r,t,a){if(typeof(a=Gr(a))=="string"){if(a==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r1(t)&&a.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const s=t.path.child(pt.fromString(a));if(!we.isDocumentKey(s))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Iy(r,new we(s))}if(a instanceof Kt)return Iy(r,a._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vu(a)}.`)}function pv(r,t){if(!Array.isArray(r)||r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ob(r,t){const a=(function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(a!==null)throw a===t.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${a.toString()}' filters.`)}class a5{convertValue(t,a="none"){switch(Wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,a);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,a);case 11:return this.convertObject(t.mapValue,a);case 10:return this.convertVectorValue(t.mapValue);default:throw Me(62114,{value:t})}}convertObject(t,a){return this.convertObjectMap(t.fields,a)}convertObjectMap(t,a="none"){const s={};return zs(t,((o,c)=>{s[o]=this.convertValue(c,a)})),s}convertVectorValue(t){const a=t.fields?.[Su].arrayValue?.values?.map((s=>Rt(s.doubleValue)));return new La(a)}convertGeoPoint(t){return new ka(Rt(t.latitude),Rt(t.longitude))}convertArray(t,a){return(t.values||[]).map((s=>this.convertValue(s,a)))}convertServerTimestamp(t,a){switch(a){case"previous":const s=Lu(t);return s==null?null:this.convertValue(s,a);case"estimate":return this.convertTimestamp(yo(t));default:return null}}convertTimestamp(t){const a=Zi(t);return new dt(a.seconds,a.nanos)}convertDocumentKey(t,a){const s=pt.fromString(t);st(R1(s),9688,{name:t});const o=new vo(s.get(1),s.get(3)),c=new we(s.popFirst(5));return o.isEqual(a)||li(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),c}}function i5(r,t,a){let s;return s=r?r.toFirestore(t):t,s}class ru{constructor(t,a){this.hasPendingWrites=t,this.fromCache=a}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zr extends lb{constructor(t,a,s,o,c,f){super(t,a,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const a=new mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,a={}){if(this._document){const s=this._document.data.field(Yu("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,a.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,a={};return a.type=zr._jsonSchemaVersion,a.bundle="",a.bundleSource="DocumentSnapshot",a.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?a:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),a.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),a)}}zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",zr._jsonSchema={type:Gt("string",zr._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class mu extends zr{data(t={}){return super.data(t)}}class Pr{constructor(t,a,s,o){this._firestore=t,this._userDataWriter=a,this._snapshot=o,this.metadata=new ru(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((a=>t.push(a))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,a){this._snapshot.docs.forEach((s=>{t.call(a,new mu(this._firestore,this._userDataWriter,s.key,s,new ru(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const a=!!t.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new mu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ru(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new mu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ru(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,x=-1;return m.type!==0&&(b=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),x=f.indexOf(m.doc.key)),{type:s5(m.type),doc:p,oldIndex:b,newIndex:x}}))}})(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const a=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(a.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function s5(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:r})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:Gt("string",Pr._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class r5 extends a5{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xn(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,a)}}function Sm(r){r=xu(r,ns);const t=xu(r.firestore,pm),a=W1(t),s=new r5(t);return n5(r._query),Gw(a,r._query).then((o=>new Pr(t,s,r,o)))}function l5(r,t){const a=xu(r.firestore,pm),s=Hw(r),o=i5(r.converter,t);return o5(a,[$w(nb(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,si.exists(!1))]).then((()=>s))}function o5(r,t){return(function(s,o){const c=new Yi;return s.asyncQueue.enqueueAndForget((async()=>Nw(await zw(s),o,c))),c.promise})(W1(r),t)}(function(t,a=!0){(function(o){$r=o})(RT),_u(new mo("firestore",((s,{instanceIdentifier:o,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new pm(new FT(s.getProvider("auth-internal")),new YT(f,s.getProvider("app-check-internal")),(function(b,x){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(b.options.projectId,x)})(f,o),f);return c={useFetchStreams:a,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Br(vy,by,t),Br(vy,by,"esm2020")})();const c5={apiKey:"AIzaSyBKsN2qQ7oc3l5MrNXpWtHnxLlMqM3PFSA",authDomain:"gugudan-e4c77.firebaseapp.com",projectId:"gugudan-e4c77",storageBucket:"gugudan-e4c77.firebasestorage.app",messagingSenderId:"798815663534",appId:"1:798815663534:web:9e4aacdbd8acfc36c6fc67"},u5=Mv(c5),$u=Fw(u5);function cb(){let r=localStorage.getItem("chromafall_player_id");return r||(r="player_"+Math.random().toString(36).substring(2,15)+Date.now().toString(36),localStorage.setItem("chromafall_player_id",r)),r}function ub(){return localStorage.getItem("chromafall_player_name")||"Player"}function hb(r){localStorage.setItem("chromafall_player_name",r)}async function h5(r){try{return(await l5(Xu($u,"rankings"),{...r,createdAt:dt.now()})).id}catch(t){return console.error("  :",t),null}}async function f5(r="all",t="classic",a=100){try{let s;const o=Xu($u,"rankings");if(r==="daily"){const m=new Date;m.setHours(0,0,0,0),s=ho(o,ii("gameMode","==",t),ii("createdAt",">=",dt.fromDate(m)),Lr("createdAt","desc"),Lr("score","desc"),du(a))}else if(r==="weekly"){const m=new Date;m.setDate(m.getDate()-7),m.setHours(0,0,0,0),s=ho(o,ii("gameMode","==",t),ii("createdAt",">=",dt.fromDate(m)),Lr("createdAt","desc"),Lr("score","desc"),du(a))}else s=ho(o,ii("gameMode","==",t),Lr("score","desc"),du(a));const c=await Sm(s),f=[];return c.forEach(m=>{f.push({id:m.id,...m.data()})}),(r==="daily"||r==="weekly")&&f.sort((m,p)=>p.score-m.score),f}catch(s){return console.error("  :",s),[]}}async function d5(r,t="classic"){try{const a=Xu($u,"rankings"),s=ho(a,ii("playerId","==",r),ii("gameMode","==",t),Lr("score","desc"),du(1)),o=await Sm(s);if(o.empty)return null;const c=o.docs[0];return{id:c.id,...c.data()}}catch(a){return console.error("    :",a),null}}async function m5(r,t="classic"){try{const a=await d5(r,t);if(!a)return-1;const s=Xu($u,"rankings"),o=ho(s,ii("gameMode","==",t),ii("score",">",a.score));return(await Sm(o)).size+1}catch(a){return console.error("   :",a),-1}}function p5({onRestart:r,onMainMenu:t,onContinue:a}){const{score:s,level:o,maxCombo:c,chainCount:f,gameTime:m,continues:p,statistics:b,gameMode:x}=Ye(),{currency:T,addPersonalBest:w}=Yn(),{playSound:O}=oa(),[k,F]=re.useState(!1),[U,j]=re.useState(!1),[W,$]=re.useState(ub()),[se,ce]=re.useState(W==="Player"),[le,M]=re.useState(W),S=s>b.highScore-s,C=p<3,N=X=>{const oe=Math.floor(X/60),xe=X%60;return`${oe} ${xe}`},D=X=>X.toLocaleString(),B=async()=>{if(!(k||U||s===0)){le.trim()&&le!==W&&(hb(le.trim()),$(le.trim())),j(!0);try{await h5({playerId:cb(),playerName:le.trim()||W,score:s,level:o,maxCombo:c,maxChain:f,gameMode:x,playTime:m})&&(F(!0),O("rewardGet"))}catch(X){console.error("  :",X)}finally{j(!1),ce(!1)}}};re.useEffect(()=>{O("gameOver"),S&&s>0&&setTimeout(()=>{O("highScore"),Pd({particleCount:100,spread:70,origin:{y:.6}})},500),w("classic",s),s>0&&W!=="Player"&&B()},[]);const R=()=>s>=1e6?{grade:"S+",color:"text-purple-400"}:s>=5e5?{grade:"S",color:"text-yellow-400"}:s>=2e5?{grade:"A",color:"text-green-400"}:s>=1e5?{grade:"B",color:"text-blue-400"}:s>=5e4?{grade:"C",color:"text-gray-300"}:{grade:"D",color:"text-gray-500"},{grade:Ue,color:We}=R();return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,y:50},animate:{scale:1,y:0},transition:{delay:.2,type:"spring"},children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"GAME OVER"}),S&&s>0&&g.jsx(ie.p,{className:"text-yellow-400 font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:"NEW HIGH SCORE!"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-gray-400 text-sm",children:"SCORE"}),g.jsx(ie.p,{className:"text-4xl font-bold text-white",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:D(s)})]}),g.jsx(ie.div,{className:`text-6xl font-bold ${We}`,initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.4,type:"spring"},children:Ue})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"LEVEL"}),g.jsx("p",{className:"text-xl font-bold text-game-accent",children:o})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX COMBO"}),g.jsxs("p",{className:"text-xl font-bold text-orange-400",children:["x",c]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX CHAIN"}),g.jsxs("p",{className:"text-xl font-bold text-purple-400",children:[f,""]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"TIME"}),g.jsx("p",{className:"text-xl font-bold text-gray-300",children:N(m)})]})]}),g.jsxs("div",{className:"space-y-3",children:[C&&a&&g.jsxs(ie.button,{className:`w-full py-4 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white flex items-center justify-center gap-2\r
                         hover:from-green-400 hover:to-green-500 transition-all`,whileTap:{scale:.98},onClick:a,children:[g.jsx("span",{children:""}),g.jsx("span",{children:"  "}),g.jsxs("span",{className:"text-sm opacity-70",children:["(",3-p," )"]})]}),g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:r,children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:" "}),g.jsxs(ie.button,{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white flex items-center justify-center gap-2\r
                       hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:()=>{O("rewardGet")},children:[g.jsx("span",{children:""}),g.jsx("span",{children:"   2"})]})]}),s>0&&!k&&g.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl border border-purple-500/30",children:[g.jsx("p",{className:"text-center text-sm text-gray-300 mb-2",children:" "}),se?g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:le,onChange:X=>M(X.target.value),placeholder:" ",maxLength:12,className:"flex-1 bg-black/50 border border-purple-500 rounded-lg px-3 py-2 text-white text-sm",autoFocus:!0,onKeyDown:X=>X.key==="Enter"&&B()}),g.jsx("button",{onClick:B,disabled:U||!le.trim(),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:U?"...":""})]}):g.jsx("button",{onClick:B,disabled:U,className:"w-full py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:U?" ...":`${W} `})]}),k&&g.jsx("div",{className:"mt-4 p-3 bg-green-900/30 rounded-xl border border-green-500/30 text-center",children:g.jsx("span",{className:"text-green-400 font-bold",children:" !"})}),g.jsx("div",{className:"mt-4 text-center",children:g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>{const X=`ChromaFall ${D(s)} !  ${o},  ${c} !`;navigator.share?navigator.share({title:"ChromaFall",text:X}):(navigator.clipboard.writeText(X),alert("  !"))},children:"  "})})]})})}const g5=[{icon:"",name:"",desc:"   3x3    ",color:"from-red-500 to-orange-500"},{icon:"",name:"",desc:"       ",color:"from-yellow-400 to-yellow-600"},{icon:"",name:"",desc:"     +    ",color:"from-green-400 to-green-600"},{icon:"",name:"",desc:"2   ( )",color:"from-cyan-300 to-blue-500"},{icon:"",name:"",desc:" !      ",color:"from-gray-400 to-gray-600"},{icon:"",name:"",desc:"      ",color:"from-purple-400 to-pink-500"},{icon:"",name:"",desc:"      ",color:"from-pink-400 to-rose-500"},{icon:"2",name:"",desc:"   2 ",color:"from-amber-400 to-orange-500"},{icon:"",name:"",desc:"    ",color:"from-red-400 via-yellow-400 to-blue-400"}],y5=[{key:" ",desc:"  "},{key:"",desc:"  ( )"},{key:"Space",desc:"  (  + )"},{key:"Z / ",desc:"  ()"},{key:"P / ESC",desc:""}],v5=[" 4      ()","       "," (Space)     ","       ","    3!"];function b5({onClose:r}){const[t,a]=re.useState("blocks");return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:s=>s.stopPropagation(),children:[g.jsxs("div",{className:"bg-gradient-to-r from-game-accent to-purple-600 p-4 flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),g.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30",children:""})]}),g.jsx("div",{className:"flex border-b border-gray-700",children:[{id:"blocks",label:" "},{id:"controls",label:""},{id:"tips",label:""}].map(s=>g.jsx("button",{onClick:()=>a(s.id),className:`flex-1 py-3 text-sm font-bold transition-colors ${t===s.id?"text-game-accent border-b-2 border-game-accent bg-game-accent/10":"text-gray-400 hover:text-white"}`,children:s.label},s.id))}),g.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:g.jsxs(un,{mode:"wait",children:[t==="blocks"&&g.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:g5.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center text-2xl`,children:s.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-white",children:s.name}),g.jsx("p",{className:"text-xs text-gray-400",children:s.desc})]})]},o))},"blocks"),t==="controls"&&g.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[g.jsx("p",{className:"text-gray-400 text-sm mb-4",children:" &  "}),y5.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-4 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:"w-20 text-center",children:g.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded text-white font-mono text-sm",children:s.key})}),g.jsx("p",{className:"text-white flex-1",children:s.desc})]},o)),g.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:g.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",g.jsx("strong",{children:":"}),"      "]})})]},"controls"),t==="tips"&&g.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[v5.map((s,o)=>g.jsx("div",{className:"bg-black/30 rounded-lg p-4 text-white",children:s},o)),g.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg border border-orange-500/30",children:[g.jsx("h4",{className:"font-bold text-orange-400 mb-2",children:"  "}),g.jsxs("p",{className:"text-sm text-gray-300",children:["     !     ",g.jsx("strong",{className:"text-orange-400",children:"3"})," !"]})]})]},"tips")]})})]})})}function _5({onResume:r,onRestart:t,onSettings:a,onMainMenu:s}){const{score:o,level:c,gameTime:f}=Ye(),{playSound:m}=oa(),[p,b]=re.useState(!1),x=w=>{m("buttonClick"),w()},T=w=>{const O=Math.floor(w/60),k=w%60;return`${O}:${k.toString().padStart(2,"0")}`};return g.jsxs(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-xs w-full mx-4",initial:{scale:.8,y:-50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:20},children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:""}),g.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:o.toLocaleString()})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-game-accent font-bold",children:c})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:T(f)})]})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white text-lg hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(r),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(t),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(a),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gradient-to-r from-purple-700 to-blue-700 rounded-xl font-bold text-white\r
                       hover:from-purple-600 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>{m("buttonClick"),b(!0)},children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-red-900/50 rounded-xl font-bold text-red-300\r
                       hover:bg-red-800/50 transition-all`,whileTap:{scale:.98},onClick:()=>x(s),children:"  "})]})]}),g.jsx(un,{children:p&&g.jsx(b5,{onClose:()=>b(!1)})})]})}function gv({onClose:r}){const{settings:t,updateSettings:a}=Yn(),{playSound:s}=oa(),o=(f,m)=>{s("buttonClick"),a({[f]:m})},c=(f,m)=>{a({[f]:m})};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4 max-h-[80vh] overflow-y-auto",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:f=>f.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors text-2xl",onClick:r,children:""})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.soundEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("soundEnabled",!t.soundEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.soundEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.soundEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.soundVolume,onChange:f=>c("soundVolume",parseFloat(f.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.soundVolume*100),"%"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.musicEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("musicEnabled",!t.musicEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.musicEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.musicEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.musicVolume,onChange:f=>c("musicVolume",parseFloat(f.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.musicVolume*100),"%"]})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.hapticEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("hapticEnabled",!t.hapticEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.hapticEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:"  "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.showGhostBlock?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("showGhostBlock",!t.showGhostBlock),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.showGhostBlock?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:" "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.colorBlindMode?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("colorBlindMode",!t.colorBlindMode),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.colorBlindMode?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:["swipe","buttons","both"].map(f=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.controlType===f?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({controlType:f})},children:[f==="swipe"&&"",f==="buttons"&&"",f==="both"&&" "]},f))})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:["auto","high","medium","low"].map(f=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.performanceMode===f?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({performanceMode:f})},children:[f==="auto"&&"",f==="high"&&"",f==="medium"&&"",f==="low"&&""]},f))})]}),g.jsx(ie.button,{className:`w-full mt-6 py-3 bg-gray-700 rounded-xl font-bold text-white\r
                     hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:r,children:""})]})})}function x5({onNextLevel:r,onMainMenu:t}){const{score:a,puzzleLevel:s,movesRemaining:o,levelObjectives:c}=Ye(),f=o*100,m=a+f;return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(ie.div,{className:"bg-gradient-to-b from-purple-900 to-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4 border-2 border-purple-500",initial:{scale:.5,y:50},animate:{scale:1,y:0},transition:{type:"spring",damping:15},children:[g.jsxs(ie.div,{className:"text-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[g.jsx(ie.div,{className:"text-6xl mb-2",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5,delay:.3},children:""}),g.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"PUZZLE CLEAR!"}),g.jsxs("p",{className:"text-purple-300 mt-1",children:["Level ",s," Complete"]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-4",children:[g.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:c.map((p,b)=>g.jsxs(ie.div,{className:"flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+b*.1},children:[g.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:g.jsx("span",{className:"text-white text-xs",children:""})}),g.jsxs("span",{className:"text-gray-300 text-sm flex-1",children:[p.type==="score"&&` ${p.target.toLocaleString()}`,p.type==="clearBlocks"&&` ${p.target} `,p.type==="chains"&&`${p.target}`,p.type==="clearColor"&&`  ${p.target} `]}),g.jsxs("span",{className:"text-green-400 text-sm",children:[p.current,"/",p.target]})]},b))})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-gray-400 text-sm",children:""}),g.jsx("span",{className:"text-white font-mono",children:a.toLocaleString()})]}),o>0&&g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("span",{className:"text-gray-400 text-sm",children:["   (",o,")"]}),g.jsxs("span",{className:"text-yellow-400 font-mono",children:["+",f.toLocaleString()]})]}),g.jsx("div",{className:"border-t border-gray-700 pt-2 mt-2",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-purple-300 font-bold",children:" "}),g.jsx("span",{className:"text-2xl font-bold text-white font-mono",children:m.toLocaleString()})]})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs(ie.button,{className:`w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl
                       font-bold text-white text-lg hover:from-purple-500 hover:to-pink-500 transition-all`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,children:[" Level ",s+1]}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:"  "})]})]})})}function T5({onStartGame:r,onOpenShop:t,onOpenSettings:a,onOpenLeaderboard:s,onOpenBattlePass:o,onOpenDailyReward:c}){const{currency:f,playerName:m,playerLevel:p,streakInfo:b,checkDailyRewardAvailable:x}=Yn(),{playSound:T}=oa(),[w,O]=re.useState(!1),[k,F]=re.useState(!1);re.useEffect(()=>{F(x())},[x]);const U=j=>{T("buttonClick"),j()};return g.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col items-center justify-center text-white bg-[#050510]",children:[g.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-[#050510] to-[#050510]"}),[...Array(15)].map((j,W)=>g.jsx(ie.div,{className:"absolute rounded-full blur-xl",style:{background:["#ff4757","#3742fa","#2ed573","#ffa502"][W%4],width:Math.random()*100+50,height:Math.random()*100+50,opacity:.1,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-100],x:[0,Math.random()*50-25],scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"easeInOut"}},W))]}),g.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>U(a),className:"w-10 h-10 rounded-full bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors",children:""}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-yellow-400 font-mono",children:f.coins.toLocaleString()})]}),g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-purple-400 font-mono",children:f.gems.toLocaleString()})]})]})]}),g.jsxs("div",{className:"z-10 w-full max-w-md px-6 flex flex-col items-center gap-8",children:[g.jsxs("div",{className:"text-center relative",children:[g.jsx(ie.div,{initial:{scale:.5,opacity:0,y:-30},animate:{scale:1,opacity:1,y:0},transition:{type:"spring",stiffness:180,damping:12},children:g.jsxs("h1",{className:"text-6xl md:text-8xl font-black italic tracking-tighter",style:{fontFamily:"var(--font-display)"},children:[g.jsx(ie.span,{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 neon-pulse inline-block",animate:{filter:["hue-rotate(0deg)","hue-rotate(20deg)","hue-rotate(0deg)"]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},style:{textShadow:"0 0 40px rgba(0,200,255,0.5), 0 0 80px rgba(100,100,255,0.3)"},children:"CHROMA"}),g.jsx("br",{}),g.jsx(ie.span,{className:"text-white inline-block",style:{textShadow:"0 4px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.4)"},animate:{textShadow:["0 4px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.4)","0 4px 12px rgba(0,0,0,0.6), 0 0 50px rgba(255,255,255,0.6)","0 4px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"FALL"})]})}),g.jsx(ie.p,{className:"text-gray-400 mt-3 tracking-[0.3em] text-sm uppercase font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:" Color Fusion Puzzle "})]}),g.jsxs(ie.div,{className:"glass-ultra w-full p-5 rounded-3xl flex items-center justify-between shimmer",initial:{y:30,opacity:0,scale:.95},animate:{y:0,opacity:1,scale:1},transition:{delay:.25,type:"spring",stiffness:150},children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(ie.div,{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center text-2xl font-bold shadow-lg",style:{boxShadow:"0 8px 25px rgba(139, 92, 246, 0.4)"},whileHover:{scale:1.08,rotate:5},transition:{type:"spring",stiffness:400},children:m.charAt(0)}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-lg tracking-wide",children:m}),g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsxs("span",{className:"bg-gradient-to-r from-blue-500/30 to-cyan-500/30 text-cyan-300 px-2 py-1 rounded-lg font-semibold border border-cyan-500/20",children:["Lv.",p]}),b.currentStreak>0&&g.jsxs(ie.span,{className:"text-orange-400 flex items-center gap-1",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},children:[" ",b.currentStreak,""]})]})]})]}),k&&g.jsxs(ie.button,{onClick:()=>U(c),className:"bg-gradient-to-r from-amber-400 via-orange-500 to-red-500 text-white text-xs font-bold px-4 py-2 rounded-xl shadow-lg relative overflow-hidden",style:{boxShadow:"0 6px 20px rgba(251, 146, 60, 0.5)"},whileHover:{scale:1.05},whileTap:{scale:.95},animate:{y:[0,-3,0]},transition:{y:{duration:1,repeat:1/0,ease:"easeInOut"}},children:[g.jsx("span",{className:"relative z-10",children:"  "}),g.jsx(ie.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:1}})]})]}),g.jsxs(ie.div,{className:"w-full space-y-5",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35,type:"spring",stiffness:120},children:[g.jsxs(ie.button,{onClick:()=>U(()=>O(!0)),className:"w-full py-6 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-3xl font-black text-2xl text-white relative overflow-hidden group",style:{boxShadow:"0 10px 40px rgba(79, 70, 229, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",fontFamily:"var(--font-display)"},whileHover:{scale:1.03,boxShadow:"0 15px 50px rgba(79, 70, 229, 0.6)"},whileTap:{scale:.98},children:[g.jsx(ie.div,{className:"absolute inset-[-2px] bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 rounded-3xl opacity-0 group-hover:opacity-100 -z-10",style:{filter:"blur(8px)"},transition:{duration:.3}}),g.jsx(ie.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/25 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2.5,repeat:1/0,ease:"linear"}}),g.jsxs("span",{className:"relative flex items-center justify-center gap-4",children:[g.jsx(ie.span,{className:"text-3xl",animate:{rotate:[0,-10,10,0]},transition:{duration:2,repeat:1/0},children:""}),"GAME START"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsx(ud,{icon:"",label:"",onClick:()=>U(t),color:"from-pink-500/20 to-rose-500/20"}),g.jsx(ud,{icon:"",label:"",onClick:()=>U(s),color:"from-amber-500/20 to-yellow-500/20"}),g.jsx(ud,{icon:"",label:"",onClick:()=>U(o),color:"from-emerald-500/20 to-green-500/20"})]})]})]}),g.jsx(un,{children:w&&g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>O(!1),children:g.jsxs(ie.div,{className:"w-full max-w-md bg-[#1a1a2e] border border-white/10 rounded-3xl overflow-hidden shadow-2xl",initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},onClick:j=>j.stopPropagation(),children:[g.jsxs("div",{className:"p-6 bg-gradient-to-b from-[#2a2a4e] to-[#1a1a2e]",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-6",style:{fontFamily:"var(--font-display)"},children:"SELECT MODE"}),g.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:Object.entries(_v).map(([j,W])=>g.jsxs("button",{onClick:()=>{U(()=>{O(!1),r(j)})},className:"w-full p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-left flex items-center gap-4 group",children:[g.jsx("span",{className:"text-3xl group-hover:scale-110 transition-transform",children:W.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:W.name}),W.hasTimeLimit&&g.jsx("span",{className:"text-xs text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:"TIME"})]}),g.jsx("p",{className:"text-sm text-gray-400",children:W.description})]}),g.jsx("span",{className:"text-gray-500 group-hover:text-white transition-colors",children:""})]},j))})]}),g.jsx("div",{className:"p-4 bg-[#151525]",children:g.jsx("button",{onClick:()=>O(!1),className:"w-full py-3 text-gray-400 font-bold hover:text-white transition-colors",children:""})})]})})})]})}function ud({icon:r,label:t,onClick:a,color:s}){return g.jsxs(ie.button,{onClick:a,className:`flex flex-col items-center justify-center gap-2 py-5 rounded-2xl border border-white/10 transition-all bg-gradient-to-br ${s} backdrop-blur-sm relative overflow-hidden group`,whileHover:{scale:1.05,borderColor:"rgba(255,255,255,0.3)"},whileTap:{scale:.95},children:[g.jsx(ie.span,{className:"text-3xl drop-shadow-lg",animate:{y:[0,-2,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:r}),g.jsx("span",{className:"text-sm font-bold text-gray-200 tracking-wide",children:t}),g.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"})]})}function E5({onClose:r}){const{claimDailyReward:t,dailyRewardDay:a,checkDailyRewardAvailable:s,streakInfo:o}=Yn(),{playSound:c}=oa(),[f,m]=re.useState(!1),[p,b]=re.useState(null),x=s(),T=()=>{if(!x||f)return;const w=t();w&&(c("rewardGet"),m(!0),b(w),Pd({particleCount:50,spread:60,origin:{y:.7}}))};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:w=>w.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:" "}),g.jsx("div",{className:"text-center mb-6",children:g.jsxs("p",{className:"text-orange-400",children:[" ",o.currentStreak,"  "]})}),g.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:pd.map((w,O)=>{const k=O+1,F=k<(a||0)+1,U=k===(a||0)+1;return g.jsxs(ie.div,{className:`relative p-2 rounded-lg text-center ${F?"bg-gray-700 opacity-50":U?"bg-gradient-to-b from-game-accent to-blue-600 ring-2 ring-yellow-400":"bg-gray-800"}`,animate:U&&x?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:1.5},children:[g.jsx("p",{className:"text-xs text-gray-400",children:"Day"}),g.jsx("p",{className:"text-lg font-bold text-white",children:k}),g.jsx("div",{className:"mt-1",children:w.reward.gems?g.jsxs("p",{className:"text-xs text-purple-400",children:["",w.reward.gems]}):g.jsxs("p",{className:"text-xs text-yellow-400",children:["",w.reward.coins]})}),F&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:""})})]},k)})}),f&&p?g.jsxs(ie.div,{className:"text-center py-4",initial:{scale:0},animate:{scale:1},children:[g.jsx("p",{className:"text-xl font-bold text-green-400 mb-2",children:" !"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[p.coins&&g.jsxs("p",{className:"text-yellow-400",children:[" +",p.coins]}),p.gems&&g.jsxs("p",{className:"text-purple-400",children:[" +",p.gems]})]})]}):x?g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white text-lg hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:T,children:"  "}):g.jsxs("div",{className:"text-center py-4",children:[g.jsx("p",{className:"text-gray-400",children:"   "}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  !"})]}),g.jsx("button",{className:`w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                     hover:bg-gray-600 transition-all`,onClick:r,children:""})]})})}function S5({onClose:r}){const{currency:t,ownedSkins:a,ownedThemes:s,equippedSkinId:o,equippedThemeId:c,purchaseSkin:f,purchaseTheme:m,equipSkin:p,equipTheme:b}=Yn(),{playSound:x}=oa(),[T,w]=re.useState("skins"),O=j=>{f(j)&&x("purchaseSuccess")},k=j=>{m(j)&&x("purchaseSuccess")},F=j=>{x("buttonClick"),p(j)},U=j=>{x("buttonClick"),b(j)};return g.jsxs(ie.div,{className:"fixed inset-0 bg-game-bg z-50 flex flex-col",initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"tween"},children:[g.jsxs("div",{className:"flex items-center justify-between p-4 bg-game-panel/80",children:[g.jsx("button",{className:"text-2xl text-gray-400 hover:text-white",onClick:r,children:""}),g.jsx("h1",{className:"text-xl font-bold text-white",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:t.coins.toLocaleString()})]}),g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-purple-400 font-bold text-sm",children:t.gems.toLocaleString()})]})]})]}),g.jsx("div",{className:"flex bg-game-panel/50",children:["skins","themes","gems"].map(j=>g.jsxs("button",{className:`flex-1 py-3 font-bold transition-colors ${T===j?"text-game-accent border-b-2 border-game-accent":"text-gray-400"}`,onClick:()=>{x("buttonClick"),w(j)},children:[j==="skins"&&" ",j==="themes"&&" ",j==="gems"&&" "]},j))}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g.jsxs(un,{mode:"wait",children:[T==="skins"&&g.jsx(ie.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:md.map(j=>{const W=a.some(ce=>ce.id===j.id),$=o===j.id,se=j.currency==="coins"?t.coins>=j.price:j.currency==="gems"?t.gems>=j.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 ${$?"ring-2 ring-game-accent":""}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("p",{className:"font-bold text-white",children:j.name}),g.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:Sx[j.rarity]},children:wx[j.rarity]})]}),g.jsx("div",{className:"bg-black/40 rounded-lg p-3 mb-3",children:g.jsx("div",{className:"flex gap-1.5 justify-center",children:(()=>{const ce=fo[j.id]||fo.classic;return ce.colors.slice(0,4).map((le,M)=>g.jsxs(ie.div,{className:"relative overflow-hidden",style:{width:32,height:32,borderRadius:ce.borderRadius,background:ce.innerEffect==="glow"?`radial-gradient(circle at 30% 30%, ${le}dd, ${le}88 70%, ${le}44)`:ce.innerEffect==="glass"?`linear-gradient(145deg, ${le}ee, ${le}aa 50%, ${le}cc)`:ce.innerEffect==="gradient"?`linear-gradient(135deg, ${le}, ${le}88, ${le}cc)`:ce.innerEffect==="metallic"?`linear-gradient(145deg, ${le}ff, ${le}66 30%, ${le}cc 70%, ${le}ff)`:ce.innerEffect==="flat"?le:`linear-gradient(145deg, ${le}, ${le}dd)`,border:ce.borderWidth>0?`${ce.borderWidth}px ${ce.borderStyle} ${le}aa`:"none",boxShadow:ce.glowIntensity>0?`0 0 ${Math.round(ce.glowIntensity*15)}px ${le}, 0 0 ${Math.round(ce.glowIntensity*5)}px ${le}`:"0 2px 4px rgba(0,0,0,0.3)"},animate:ce.animation==="pulse"?{boxShadow:[`0 0 8px ${le}`,`0 0 20px ${le}`,`0 0 8px ${le}`]}:ce.animation==="fire"?{y:[0,-3,0,-1,0]}:ce.animation==="ice"?{opacity:[1,.7,1]}:ce.animation==="electric"?{x:[-2,2,-1,1,0]}:void 0,transition:ce.animation==="pulse"?{duration:1.2,repeat:1/0}:ce.animation==="fire"?{duration:.4,repeat:1/0}:ce.animation==="ice"?{duration:2.5,repeat:1/0}:ce.animation==="electric"?{duration:.15,repeat:1/0}:void 0,children:[(ce.innerEffect==="glossy"||ce.innerEffect==="glass")&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent rounded-inherit"}),ce.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30"}),ce.texture==="lines"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.2) 2px, rgba(255,255,255,0.2) 4px)"}}),ce.texture==="dots"&&g.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.5) 1px, transparent 1px)",backgroundSize:"6px 6px"}}),ce.texture==="cracks"&&g.jsx("div",{className:"absolute inset-0 opacity-25",style:{background:"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.3) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.2) 61%, transparent 62%)"}}),ce.texture==="circuit"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%)",backgroundSize:"8px 8px"}}),ce.animation==="shimmer"&&g.jsx(ie.div,{className:"absolute inset-0",style:{background:"linear-gradient(110deg, transparent 25%, rgba(255,255,255,0.6) 50%, transparent 75%)"},animate:{x:["-150%","250%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:.5}})]},M))})()})}),g.jsxs("p",{className:"text-[10px] text-gray-400 mb-2 text-center",children:[j.id==="classic"&&"  ",j.id==="neon"&&"  + ",j.id==="candy"&&"  ",j.id==="pixel"&&"8  ",j.id==="galaxy"&&"  + ",j.id==="crystal"&&"  +  ",j.id==="holographic"&&" ",j.id==="animated_fire"&&"  ",j.id==="animated_ice"&&"  ",j.id==="animated_electric"&&"  "]}),W?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold ${$?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>F(j.id),disabled:$,children:$?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-1 ${se||j.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>O(j.id),disabled:!se&&j.currency!=="free",children:j.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[j.currency==="coins"?"":"",j.price," "]})})]},j.id)})},"skins"),T==="themes"&&g.jsx(ie.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:gu.map(j=>{const W=s.some(ce=>ce.id===j.id),$=c===j.id,se=j.currency==="coins"?t.coins>=j.price:j.currency==="gems"?t.gems>=j.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-3 ${$?"ring-2 ring-game-accent":""}`,children:[g.jsx("p",{className:"font-bold text-white mb-1 text-sm",children:j.name}),j.description&&g.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:j.description}),g.jsx("div",{className:"h-24 rounded-lg mb-2 p-2 overflow-hidden relative",style:{background:j.colors.backgroundGradient||j.colors.background,border:`1px solid ${j.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:g.jsxs("div",{className:"w-full h-full rounded relative",style:{backgroundColor:j.colors.panel,border:`1px solid ${j.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:[g.jsx("div",{className:"absolute top-2 left-2 w-12 h-1.5 rounded-full",style:{backgroundColor:j.colors.accent}}),g.jsxs("div",{className:"absolute top-5 left-2 flex flex-col gap-1",children:[g.jsx("div",{className:"w-8 h-1 rounded",style:{backgroundColor:j.colors.text||"#fff",opacity:.8}}),g.jsx("div",{className:"w-6 h-1 rounded",style:{backgroundColor:j.colors.textSecondary||"#888",opacity:.6}})]}),g.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-0.5",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#ff4757"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3742fa"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#2ed573"}})]}),g.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:j.colors.success||"#2ed573"}}),g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:j.colors.danger||"#ff4757"}})]})]})}),W?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm ${$?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>U(j.id),disabled:$,children:$?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm flex items-center justify-center gap-1 ${se||j.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>k(j.id),disabled:!se&&j.currency!=="free",children:j.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[j.currency==="coins"?"":"",j.price," "]})})]},j.id)})},"themes"),T==="gems"&&g.jsxs(ie.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[Ex.map(j=>g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 flex items-center justify-between ${j.highlight?"ring-2 ring-yellow-400":""} ${j.bestValue?"ring-2 ring-purple-400":""}`,children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("p",{className:"font-bold text-white text-lg",children:[j.amount," "]}),j.bonusAmount>0&&g.jsxs("span",{className:"text-green-400 text-sm",children:["+",j.bonusAmount," "]})]}),g.jsx("p",{className:"text-sm text-gray-400",children:j.label})]})]}),g.jsxs("button",{className:`bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-xl\r
                               font-bold text-white hover:from-purple-400 hover:to-pink-400`,onClick:()=>{x("purchaseSuccess"),alert(`${j.amount+j.bonusAmount}   (   )`)},children:["$",j.price]})]},j.id)),g.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-white",children:" "}),g.jsx("p",{className:"text-sm text-green-200",children:"  50  "})]})]}),g.jsx("button",{className:`bg-white/20 px-6 py-3 rounded-xl font-bold text-white\r
                             hover:bg-white/30`,onClick:()=>{x("rewardGet"),alert("   50   ( SDK  )")},children:""})]})]},"gems")]})})]})}function w5({onClose:r}){const[t,a]=re.useState([]),[s,o]=re.useState(!0),[c,f]=re.useState("all"),[m,p]=re.useState("classic"),[b,x]=re.useState(-1),[T,w]=re.useState(ub()),[O,k]=re.useState(!1),[F,U]=re.useState(T),j=cb(),W=re.useCallback(async()=>{o(!0);try{const S=await f5(c,m,50);a(S);const C=await m5(j,m);x(C)}catch(S){console.error("  :",S)}finally{o(!1)}},[c,m,j]);re.useEffect(()=>{W()},[W]);const $=()=>{F.trim()&&(hb(F.trim()),w(F.trim())),k(!1)},se=S=>S===1?"bg-gradient-to-r from-yellow-500 to-amber-600 text-black":S===2?"bg-gradient-to-r from-gray-300 to-gray-400 text-black":S===3?"bg-gradient-to-r from-orange-400 to-orange-600 text-black":"bg-white/10 text-white",ce=S=>S===1?"":S===2?"":S===3?"":S.toString(),le=S=>{const C=Math.floor(S/60),N=S%60;return`${C}:${N.toString().padStart(2,"0")}`},M=S=>{const C=S instanceof Date?S:S.toDate(),D=new Date().getTime()-C.getTime(),B=Math.floor(D/(1e3*60*60)),R=Math.floor(D/(1e3*60*60*24));return B<1?" ":B<24?`${B} `:R<7?`${R} `:C.toLocaleDateString("ko-KR")};return g.jsxs(ie.div,{className:"fixed inset-0 bg-gradient-to-b from-[#0a0a20] via-[#1a1a40] to-[#0a0a20] z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"}),g.jsxs("div",{className:"relative h-full flex flex-col max-w-lg mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""}),g.jsx("h1",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500",children:"RANKING"}),g.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""})]}),g.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-2xl p-4 mb-4 border border-purple-500/30",children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-2xl",children:""}),g.jsxs("div",{children:[O?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:F,onChange:S=>U(S.target.value),maxLength:12,className:"bg-black/50 border border-purple-500 rounded px-2 py-1 text-white text-sm w-28",autoFocus:!0,onKeyDown:S=>S.key==="Enter"&&$()}),g.jsx("button",{onClick:$,className:"text-green-400 text-sm",children:""})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-white font-bold",children:T}),g.jsx("button",{onClick:()=>k(!0),className:"text-gray-400 text-xs hover:text-white",children:""})]}),g.jsx("div",{className:"text-gray-400 text-xs",children:b>0?` : ${b}`:" "})]})]})})}),g.jsx("div",{className:"flex gap-2 mb-3",children:g.jsx("div",{className:"flex bg-black/30 rounded-xl p-1 flex-1",children:["all","weekly","daily"].map(S=>g.jsx("button",{onClick:()=>f(S),className:`flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all ${c===S?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400"}`,children:S==="all"?"":S==="weekly"?"":""},S))})}),g.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:["classic","timeAttack","survival","puzzle"].map(S=>g.jsx("button",{onClick:()=>p(S),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all ${m===S?"bg-gradient-to-r from-orange-500 to-red-600 text-white":"bg-white/10 text-gray-400"}`,children:S==="classic"?"":S==="timeAttack"?"":S==="survival"?"":""},S))}),g.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-4",children:s?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-gray-400 text-sm",children:" ..."})]}):t.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("span",{className:"text-5xl",children:""}),g.jsx("span",{className:"text-gray-400 text-sm",children:"  "}),g.jsx("span",{className:"text-gray-500 text-xs",children:"  1 !"})]}):g.jsx(un,{children:t.map((S,C)=>{const N=C+1,D=S.playerId===j;return g.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:C*.03},className:`rounded-xl p-3 ${se(N)} ${D?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-[#0a0a20]":""}`,children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-sm ${N<=3?"":"bg-black/20"}`,children:ce(N)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`font-bold truncate ${N<=3?"":"text-white"}`,children:S.playerName}),D&&g.jsx("span",{className:"text-[10px] bg-cyan-500 text-white px-1.5 py-0.5 rounded-full",children:"ME"})]}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-400"}`,children:["Lv.",S.level," | ",le(S.playTime)," |"," ",M(S.createdAt)]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:`font-black text-lg ${N<=3?"":"text-cyan-400"}`,children:S.score.toLocaleString()}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-500"}`,children:[S.maxCombo," ",S.maxChain,""]})]})]})},S.id||C)})})})]})]})}function A5({onClose:r}){const{wheelState:t,spinWheel:a,canSpinWheel:s,addCoins:o,addGems:c}=Yn(),{playSound:f}=oa(),[m,p]=re.useState(!1),[b,x]=re.useState(0),[T,w]=re.useState(null),O=re.useRef(null),k=s(),F=360/Os.length,U=j=>{if(m||j==="free"&&!k.free||j==="ad"&&!k.ad||j==="gem"&&!k.gem)return;p(!0),w(null),f("wheelSpin");const W=Math.random();let $=0,se=Os[0];for(const C of Os)if($+=C.probability,W<=$){se=C;break}const le=Os.findIndex(C=>C.id===se.id)*F,M=5+Math.random()*3,S=b+M*360+(360-le);x(S),setTimeout(()=>{p(!1),w(se.id);const C=se.reward;C.coins&&o(C.coins),C.gems&&c(C.gems),se.probability<.1?(f("jackpot"),Pd({particleCount:100,spread:70,origin:{y:.6}})):f("rewardGet"),a()},5e3)};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-md w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:j=>j.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:" "}),g.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-6",children:[g.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-10",children:g.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-12 border-l-transparent border-r-transparent border-t-yellow-400"})}),g.jsx(ie.div,{ref:O,className:"w-full h-full rounded-full overflow-hidden border-4 border-yellow-400",style:{background:`conic-gradient(${Os.map((j,W)=>`${j.color} ${W*F}deg ${(W+1)*F}deg`).join(", ")})`},animate:{rotate:b},transition:{duration:5,ease:[.25,.1,.25,1]},children:Os.map((j,W)=>{const $=W*F+F/2;return g.jsx("div",{className:"absolute text-xs font-bold text-white whitespace-nowrap",style:{top:"50%",left:"50%",transform:`rotate(${$}deg) translateY(-100px)`,transformOrigin:"center",textShadow:"1px 1px 2px black"},children:j.label},j.id)})}),g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-yellow-400 flex items-center justify-center text-2xl shadow-lg",children:""})]}),T&&!m&&g.jsx(ie.div,{className:"text-center mb-4",initial:{scale:0},animate:{scale:1},children:g.jsxs("p",{className:"text-xl font-bold text-green-400",children:[Os.find(j=>j.id===T)?.label," !"]})}),g.jsxs("div",{className:"space-y-2",children:[k.free&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white hover:from-green-400 hover:to-green-500 disabled:opacity-50`,onClick:()=>U("free"),disabled:m,children:["   (",t.freeSpinsRemaining,")"]}),k.ad&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                         font-bold text-white hover:from-yellow-400 hover:to-orange-400 disabled:opacity-50`,onClick:()=>U("ad"),disabled:m,children:["    (",t.adSpinsRemaining,")"]}),k.gem&&g.jsx("button",{className:`w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl\r
                         font-bold text-white hover:from-purple-400 hover:to-pink-400 disabled:opacity-50`,onClick:()=>U("gem"),disabled:m,children:" 20  "}),!k.free&&!k.ad&&!k.gem&&g.jsx("p",{className:"text-center text-gray-400",children:"   "})]}),g.jsx("button",{className:"w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300",onClick:r,disabled:m,children:""})]})})}const C5={background:"#0a0a1a",backgroundGradient:"radial-gradient(circle at 50% 10%, #1a1a40 0%, #050510 60%)",panel:"#1a1a2e",panelBorder:"rgba(255,255,255,0.1)",accent:"#4a9eff",text:"#ffffff",textSecondary:"#888888",danger:"#ff4757",success:"#2ed573"};function N5(){const[r,t]=re.useState("menu"),[a,s]=re.useState(!1),[o,c]=re.useState(!1),[f,m]=re.useState(!1),[p,b]=re.useState(!1),[x,T]=re.useState(!1),[w,O]=re.useState(0),k=re.useRef(!1),F=Ye(),{gameStatus:U,startGame:j,pauseGame:W,resumeGame:$,resetGame:se,continueGame:ce,incrementGameTime:le,endGame:M,nextPuzzleLevel:S,score:C,combo:N,chainCount:D,level:B,board:R,isFeverMode:Ue,feverGauge:We,gameTime:X,gameMode:oe}=F,{settings:xe,updateStreak:Be,equippedThemeId:P}=Yn(),V=re.useMemo(()=>gu.find(Ce=>Ce.id===P)?.colors||C5,[P]);re.useEffect(()=>{const ye=document.documentElement;ye.style.setProperty("--theme-bg",V.background),ye.style.setProperty("--theme-bg-gradient",V.backgroundGradient||V.background),ye.style.setProperty("--theme-panel",V.panel),ye.style.setProperty("--theme-panel-border",V.panelBorder||"rgba(255,255,255,0.1)"),ye.style.setProperty("--theme-accent",V.accent),ye.style.setProperty("--theme-text",V.text||"#ffffff"),ye.style.setProperty("--theme-text-secondary",V.textSecondary||"#888888"),ye.style.setProperty("--theme-danger",V.danger||"#ff4757"),ye.style.setProperty("--theme-success",V.success||"#2ed573"),document.body.style.background=V.backgroundGradient||V.background,document.body.style.backgroundColor=V.background},[V]);const{playSound:ae,stopBGM:ue}=oa(),ge=re.useRef(B);re.useEffect(()=>{Be()},[Be]),re.useEffect(()=>{B>ge.current&&U==="playing"&&(b(!0),ae("levelUp"),setTimeout(()=>b(!1),2e3)),ge.current=B},[B,U,ae]),re.useEffect(()=>{Ue&&!k.current&&U==="playing"&&(T(!0),ae("combo"),setTimeout(()=>T(!1),2e3)),k.current=Ue},[Ue,U,ae]),re.useEffect(()=>{if(U!=="playing"){O(0);return}let ye=0;for(let Ce=0;Ce<4;Ce++)for(let Oe=0;Oe<me.COLUMNS;Oe++)R[Ce]?.[Oe]!==null&&ye++;ye>=me.COLUMNS*2?O(2):ye>=me.COLUMNS?O(1):O(0)},[R,U]),re.useEffect(()=>{let ye=null;return U==="playing"&&(ye=window.setInterval(()=>le(),1e3)),()=>{ye&&clearInterval(ye)}},[U,le]),re.useEffect(()=>{if(U!=="playing")return;const ye=_v[oe];ye?.hasTimeLimit&&ye.timeLimit&&X>=ye.timeLimit&&M()},[U,oe,X,M]);const Ee=re.useCallback(()=>{const ye=document.documentElement;ye.requestFullscreen?ye.requestFullscreen().catch(()=>{}):ye.webkitRequestFullscreen?ye.webkitRequestFullscreen():ye.msRequestFullscreen&&ye.msRequestFullscreen()},[]),be=re.useCallback(ye=>{ae("buttonClick"),("ontouchstart"in window||navigator.maxTouchPoints>0)&&Ee(),j(ye),t("game")},[j,ae,Ee]),fe=re.useCallback(()=>{ae("buttonClick"),se(),ue(),t("menu")},[se,ue,ae]),de=re.useCallback(()=>{ae("buttonClick"),se(),j("classic")},[se,j,ae]),Re=re.useCallback(()=>{ae("buttonClick"),ce()},[ce,ae]);return r==="menu"?g.jsxs(g.Fragment,{children:[g.jsx(T5,{onStartGame:be,onOpenShop:()=>{ae("buttonClick"),t("shop")},onOpenSettings:()=>{ae("buttonClick"),s(!0)},onOpenLeaderboard:()=>{ae("buttonClick"),t("leaderboard")},onOpenBattlePass:()=>{ae("buttonClick"),alert("Coming Soon!")},onOpenDailyReward:()=>{ae("buttonClick"),c(!0)}}),g.jsxs(un,{children:[a&&g.jsx(gv,{onClose:()=>s(!1)}),o&&g.jsx(E5,{onClose:()=>c(!1)}),f&&g.jsx(A5,{onClose:()=>m(!1)})]})]}):r==="shop"?g.jsx(S5,{onClose:()=>t("menu")}):r==="leaderboard"?g.jsx(w5,{onClose:()=>t("menu")}):g.jsxs("div",{className:`fixed inset-0 bg-[#0a0a15] flex flex-col items-center overflow-hidden transition-colors duration-500
      ${w===2?"shadow-[inset_0_0_50px_rgba(255,0,0,0.3)]":""}
      ${Ue?"shadow-[inset_0_0_100px_rgba(255,100,0,0.3)]":""}`,children:[Ue&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none z-0",animate:{opacity:[.3,.5,.3]},transition:{duration:.5,repeat:1/0},style:{background:"radial-gradient(ellipse at center, rgba(255, 100, 0, 0.2) 0%, transparent 70%)"}}),w>0&&!Ue&&g.jsx("div",{className:`absolute inset-0 pointer-events-none z-0 animate-pulse ${w===2?"bg-red-900/10":"bg-transparent"}`}),g.jsx(un,{children:p&&g.jsxs(ie.div,{initial:{scale:.5,opacity:0,y:100},animate:{scale:1,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-100},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx("h2",{className:"text-6xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-yellow-400 to-yellow-100 drop-shadow-[0_0_20px_rgba(255,215,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:"LEVEL UP!"}),g.jsxs("p",{className:"text-3xl text-white font-bold mt-2 neon-text",children:["Lv. ",B]})]})}),g.jsx(un,{children:x&&g.jsxs(ie.div,{initial:{scale:0,rotate:-10,opacity:0},animate:{scale:1,rotate:0,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx(ie.h2,{className:"text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-orange-600 via-red-500 to-yellow-400 drop-shadow-[0_0_30px_rgba(255,100,0,0.8)]",style:{fontFamily:"var(--font-display)"},animate:{scale:[1,1.1,1]},transition:{duration:.3,repeat:1/0},children:" FEVER! "}),g.jsx("p",{className:"text-2xl text-yellow-300 font-bold mt-2",children:"x3 SCORE MULTIPLIER!"})]})}),g.jsxs("div",{className:"w-full max-w-2xl px-4 py-2 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>{ae("buttonClick"),U==="playing"?W():$()},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:U==="paused"?"":""}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[10px] text-gray-400 font-bold tracking-widest",children:"LEVEL"}),g.jsx("div",{className:"text-xl font-black text-cyan-400 font-mono leading-none",children:B})]}),g.jsx("button",{onClick:()=>{ae("buttonClick"),s(!0)},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:""})]}),g.jsxs("div",{className:"flex-1 w-full max-w-4xl flex justify-center items-start gap-1 md:gap-4 px-1 md:px-2 py-1 overflow-hidden",children:[g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-48 items-stretch z-10",children:g.jsx(a2,{})}),g.jsxs("div",{className:"flex flex-col items-center relative z-20",children:[g.jsx("div",{className:"flex md:hidden justify-end w-full max-w-[280px] mb-1 px-1",children:g.jsx(sy,{cellSize:18,maxBlocks:3})}),g.jsx(Wx,{}),g.jsxs("div",{className:"md:hidden flex justify-around w-full max-w-[280px] mt-1 py-1 px-2 bg-black/30 rounded-lg",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"SCORE"}),g.jsx("div",{className:"text-sm font-mono font-bold text-white leading-none",children:C.toLocaleString()})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"COMBO"}),g.jsxs("div",{className:`text-sm font-mono font-bold leading-none ${N>1?"text-orange-400":"text-gray-600"}`,children:["x",N]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"CHAIN"}),g.jsx("div",{className:`text-sm font-mono font-bold leading-none ${D>0?"text-cyan-400":"text-gray-600"}`,children:D})]})]}),g.jsx("div",{className:"mt-1 w-full max-w-[300px]",children:g.jsx(n2,{})})]}),g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-32 items-center z-10",children:g.jsx(sy,{cellSize:28,maxBlocks:5})})]}),g.jsx("div",{className:"w-full max-w-lg pb-safe z-30",children:(xe.controlType==="buttons"||xe.controlType==="both")&&g.jsx(t2,{visible:U==="playing"})}),g.jsxs(un,{children:[U==="paused"&&g.jsx(_5,{onResume:$,onRestart:de,onSettings:()=>s(!0),onMainMenu:fe}),U==="gameover"&&g.jsx(p5,{onRestart:de,onMainMenu:fe,onContinue:Re}),U==="levelComplete"&&oe==="puzzle"&&g.jsx(x5,{onNextLevel:()=>{ae("levelUp"),S()},onMainMenu:fe}),a&&g.jsx(gv,{onClose:()=>s(!1)})]})]})}Y_.createRoot(document.getElementById("root")).render(g.jsx(re.StrictMode,{children:g.jsx(N5,{})}));
