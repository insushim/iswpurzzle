import{r as se,j as g,m as le,A as un}from"./animations-BJOS7rFy.js";import{r as G1,a as q1}from"./vendor-DlBnNAMw.js";import{c as yv}from"./state-ChBe2EGv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Yh={exports:{}},eo={},Kh={exports:{}},$h={};var F0;function H1(){return F0||(F0=1,(function(r){function t(X,oe){var xe=X.length;X.push(oe);e:for(;0<xe;){var Be=xe-1>>>1,P=X[Be];if(0<o(P,oe))X[Be]=oe,X[xe]=P,xe=Be;else break e}}function a(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var oe=X[0],xe=X.pop();if(xe!==oe){X[0]=xe;e:for(var Be=0,P=X.length,O=P>>>1;Be<O;){var ae=2*(Be+1)-1,ue=X[ae],ge=ae+1,Te=X[ge];if(0>o(ue,xe))ge<P&&0>o(Te,ue)?(X[Be]=Te,X[ge]=xe,Be=ge):(X[Be]=ue,X[ae]=xe,Be=ae);else if(ge<P&&0>o(Te,xe))X[Be]=Te,X[ge]=xe,Be=ge;else break e}}return oe}function o(X,oe){var xe=X.sortIndex-oe.sortIndex;return xe!==0?xe:X.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var v=[],b=[],x=1,E=null,A=3,L=!1,j=!1,F=!1,U=!1,V=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ie(X){for(var oe=a(b);oe!==null;){if(oe.callback===null)s(b);else if(oe.startTime<=X)s(b),oe.sortIndex=oe.expirationTime,t(v,oe);else break;oe=a(b)}}function ce(X){if(F=!1,ie(X),!j)if(a(v)!==null)j=!0,re||(re=!0,B());else{var oe=a(b);oe!==null&&We(ce,oe.startTime-X)}}var re=!1,M=-1,S=5,C=-1;function N(){return U?!0:!(r.unstable_now()-C<S)}function D(){if(U=!1,re){var X=r.unstable_now();C=X;var oe=!0;try{e:{j=!1,F&&(F=!1,W(M),M=-1),L=!0;var xe=A;try{t:{for(ie(X),E=a(v);E!==null&&!(E.expirationTime>X&&N());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,A=E.priorityLevel;var P=Be(E.expirationTime<=X);if(X=r.unstable_now(),typeof P=="function"){E.callback=P,ie(X),oe=!0;break t}E===a(v)&&s(v),ie(X)}else s(v);E=a(v)}if(E!==null)oe=!0;else{var O=a(b);O!==null&&We(ce,O.startTime-X),oe=!1}}break e}finally{E=null,A=xe,L=!1}oe=void 0}}finally{oe?B():re=!1}}}var B;if(typeof $=="function")B=function(){$(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ue=R.port2;R.port1.onmessage=D,B=function(){Ue.postMessage(null)}}else B=function(){V(D,0)};function We(X,oe){M=V(function(){X(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(X){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var xe=A;A=oe;try{return X()}finally{A=xe}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var xe=A;A=X;try{return oe()}finally{A=xe}},r.unstable_scheduleCallback=function(X,oe,xe){var Be=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Be+xe:Be):xe=Be,X){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=xe+P,X={id:x++,callback:oe,priorityLevel:X,startTime:xe,expirationTime:P,sortIndex:-1},xe>Be?(X.sortIndex=xe,t(b,X),a(v)===null&&X===a(b)&&(F?(W(M),M=-1):F=!0,We(ce,xe-Be))):(X.sortIndex=P,t(v,X),j||L||(j=!0,re||(re=!0,B()))),X},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(X){var oe=A;return function(){var xe=A;A=oe;try{return X.apply(this,arguments)}finally{A=xe}}}})($h)),$h}var Q0;function F1(){return Q0||(Q0=1,Kh.exports=H1()),Kh.exports}var X0;function Q1(){if(X0)return eo;X0=1;var r=F1(),t=G1(),a=q1();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(c(e)!==e)throw Error(s(188))}function b(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,l=n;;){var f=i.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===i)return v(f),e;if(d===l)return v(f),n;d=d.sibling}throw Error(s(188))}if(i.return!==l.return)i=f,l=d;else{for(var y=!1,T=f.child;T;){if(T===i){y=!0,i=f,l=d;break}if(T===l){y=!0,l=f,i=d;break}T=T.sibling}if(!y){for(T=d.child;T;){if(T===i){y=!0,i=d,l=f;break}if(T===l){y=!0,l=d,i=f;break}T=T.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function B(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case V:return"Profiler";case U:return"StrictMode";case ce:return"Suspense";case re:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case $:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case ie:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:Ue(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Ue(e(n))}catch{}}return null}var We=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Be=[],P=-1;function O(e){return{current:e}}function ae(e){0>P||(e.current=Be[P],Be[P]=null,P--)}function ue(e,n){P++,Be[P]=e.current,e.current=n}var ge=O(null),Te=O(null),_e=O(null),he=O(null);function de(e,n){switch(ue(_e,n),ue(Te,e),ue(ge,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?m0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=m0(n),e=p0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(ge),ue(ge,e)}function Re(){ae(ge),ae(Te),ae(_e)}function ye(e){e.memoizedState!==null&&ue(he,e);var n=ge.current,i=p0(n,e.type);n!==i&&(ue(Te,e),ue(ge,i))}function Ce(e){Te.current===e&&(ae(ge),ae(Te)),he.current===e&&(ae(he),$l._currentValue=xe)}var Oe,Ve;function Ae(e){if(Oe===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Oe=n&&n[1]||"",Ve=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+e+Ve}var nt=!1;function St(e,n){if(!e||nt)return"";nt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Q=K}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(K){Q=K}e.call(ee.prototype)}}else{try{throw Error()}catch(K){Q=K}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],T=d[1];if(y&&T){var I=y.split(`
`),H=T.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===H.length)for(l=I.length-1,f=H.length-1;1<=l&&0<=f&&I[l]!==H[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==H[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==H[f]){var Z=`
`+I[l].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=l&&0<=f);break}}}finally{nt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ae(i):""}function vt(e,n){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==n&&n!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return St(e.type,!1);case 11:return St(e.type.render,!1);case 1:return St(e.type,!0);case 31:return Ae("Activity");default:return""}}function Mt(e){try{var n="",i=null;do n+=vt(e,i),i=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var at=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,fn=r.unstable_cancelCallback,as=r.unstable_shouldYield,ci=r.unstable_requestPaint,It=r.unstable_now,Dn=r.unstable_getCurrentPriorityLevel,ca=r.unstable_ImmediatePriority,it=r.unstable_UserBlockingPriority,ua=r.unstable_NormalPriority,Hs=r.unstable_LowPriority,is=r.unstable_IdlePriority,ui=r.log,Fs=r.unstable_setDisableYieldValue,En=null,$t=null;function On(e){if(typeof ui=="function"&&Fs(e),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(En,e)}catch{}}var wt=Math.clz32?Math.clz32:Ro,No=Math.log,Qs=Math.LN2;function Ro(e){return e>>>=0,e===0?32:31-(No(e)/Qs|0)|0}var fa=256,ss=262144,Dt=4194304;function ha(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function da(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=ha(l):(y&=T,y!==0?f=ha(y):i||(i=T&~e,i!==0&&(f=ha(i))))):(T=l&~d,T!==0?f=ha(T):y!==0?f=ha(y):i||(i=l&~e,i!==0&&(f=ha(i)))),f===0?0:n!==0&&n!==f&&(n&d)===0&&(d=f&-f,i=n&-n,d>=i||d===32&&(i&4194048)!==0)?n:f}function Kn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Zu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mo(){var e=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),e}function ma(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function rs(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ju(e,n,i,l,f,d){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var T=e.entanglements,I=e.expirationTimes,H=e.hiddenUpdates;for(i=y&~i;0<i;){var Z=31-wt(i),ee=1<<Z;T[Z]=0,I[Z]=-1;var Q=H[Z];if(Q!==null)for(H[Z]=null,Z=0;Z<Q.length;Z++){var K=Q[Z];K!==null&&(K.lane&=-536870913)}i&=~ee}l!==0&&ls(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~n))}function ls(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-wt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function tl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-wt(i),f=1<<l;f&n|e[l]&n&&(e[l]|=n),i&=~f}}function nl(e,n){var i=n&-n;return i=(i&42)!==0?1:os(i),(i&(e.suspendedLanes|n))!==0?0:i}function os(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ua(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Io(){var e=oe.p;return e!==0?e:(e=window.event,e===void 0?32:B0(e.type))}function $n(e,n){var i=oe.p;try{return oe.p=e,n()}finally{oe.p=i}}var Zn=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Zn,Ft="__reactProps$"+Zn,pa="__reactContainer$"+Zn,Xs="__reactEvents$"+Zn,Wu="__reactListeners$"+Zn,Do="__reactHandles$"+Zn,Oo="__reactResources$"+Zn,ga="__reactMarker$"+Zn;function Ys(e){delete e[Ot],delete e[Ft],delete e[Xs],delete e[Wu],delete e[Do]}function ya(e){var n=e[Ot];if(n)return n;for(var i=e.parentNode;i;){if(n=i[pa]||i[Ot]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=E0(e);e!==null;){if(i=e[Ot])return i;e=E0(e)}return n}e=i,i=e.parentNode}return null}function Vn(e){if(e=e[Ot]||e[pa]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Tn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function va(e){var n=e[Oo];return n||(n=e[Oo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(e){e[ga]=!0}var al=new Set,il={};function _a(e,n){ba(e,n),ba(e+"Capture",n)}function ba(e,n){for(il[e]=n,e=0;e<n.length;e++)al.add(n[e])}var sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},ll={};function Vo(e){return at.call(ll,e)?!0:at.call(rl,e)?!1:sl.test(e)?ll[e]=!0:(rl[e]=!0,!1)}function Ks(e,n,i){if(Vo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Sn(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function jt(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ol(e,n,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(y){i=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function rt(e){if(!e._valueTracker){var n=fi(e)?"checked":"value";e._valueTracker=ol(e,n,""+e[n])}}function cs(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=fi(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var us=/[\n"\\]/g;function mn(e){return e.replace(us,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function $s(e,n,i,l,f,d,y,T){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?cl(e,y,Qt(n)):i!=null?cl(e,y,Qt(i)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Qt(T):e.removeAttribute("name")}function jo(e,n,i,l,f,d,y,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){rt(e);return}i=i!=null?""+Qt(i):"",n=n!=null?""+Qt(n):i,T||n===e.value||(e.value=n),e.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),rt(e)}function cl(e,n,i){n==="number"&&xa(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hi(e,n,i,l){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Qt(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function ko(e,n,i){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Qt(i):""}function di(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(s(92));if(We(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Qt(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),rt(e)}function pn(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Lo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||Lo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function fl(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&i[f]!==l&&ul(e,f,l)}else for(var d in n)n.hasOwnProperty(d)&&ul(e,d,n[d])}function Zs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(e){return mi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jn(){}var hl=null;function jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Ea=null;function fs(e){var n=Vn(e);if(n&&(e=n.stateNode)){var i=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if($s(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var f=l[Ft]||null;if(!f)throw Error(s(90));$s(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&cs(l)}break e;case"textarea":ko(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&hi(e,!!i.multiple,n,!1)}}}var Ws=!1;function gi(e,n,i){if(Ws)return e(n,i);Ws=!0;try{var l=e(n);return l}finally{if(Ws=!1,(pi!==null||Ea!==null)&&(Ic(),pi&&(n=pi,e=Ea,Ea=pi=null,fs(n),e)))for(n=0;n<e.length;n++)fs(e[n])}}function Wn(e,n){var i=e.stateNode;if(i===null)return null;var l=i[Ft]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=!1;if(kn)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){hs=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{hs=!1}var Ta=null,dl=null,ds=null;function ml(){if(ds)return ds;var e,n=dl,i=n.length,l,f="value"in Ta?Ta.value:Ta.textContent,d=f.length;for(e=0;e<i&&n[e]===f[e];e++);var y=i-e;for(l=1;l<=y&&n[i-l]===f[d-l];l++);return ds=f.slice(e,1<l?1-l:void 0)}function ms(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function za(){return!0}function ea(){return!1}function Zt(e){function n(i,l,f,d,y){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(i=e[T],this[T]=i?i(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?za:ea,this.isPropagationStopped=ea,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),n}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Zt(Pa),yi=E({},Pa,{view:0,detail:0}),pl=Zt(yi),vi,er,wa,tr=E({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(vi=e.screenX-wa.screenX,er=e.screenY-wa.screenY):er=vi=0,wa=e),vi)},movementY:function(e){return"movementY"in e?e.movementY:er}}),gl=Zt(tr),ps=E({},tr,{dataTransfer:0}),Uo=Zt(ps),zo=E({},yi,{relatedTarget:0}),gs=Zt(zo),yl=E({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Po=Zt(yl),nr=E({},Pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Go=Zt(nr),qo=E({},Pa,{data:0}),Aa=Zt(qo),Ho={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Qo[e])?!!n[e]:!1}function _i(){return Xo}var hn=E({},yi,{key:function(e){if(e.key){var n=Ho[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(e){return e.type==="keypress"?ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yo=Zt(hn),Ko=E({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Zt(Ko),u=E({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),p=Zt(u),_=E({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Zt(_),G=E({},tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Zt(G),fe=E({},Pa,{newState:0,oldState:0}),je=Zt(fe),At=[9,13,27,32],et=kn&&"CompositionEvent"in window,_t=null;kn&&"documentMode"in document&&(_t=document.documentMode);var Ln=kn&&"TextEvent"in window&&!_t,Ca=kn&&(!et||_t&&8<_t&&11>=_t),ta=" ",na=!1;function ys(e,n){switch(e){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ar(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ir=!1;function hb(e,n){switch(e){case"compositionend":return ar(n);case"keypress":return n.which!==32?null:(na=!0,ta);case"textInput":return e=n.data,e===ta&&na?null:e;default:return null}}function db(e,n){if(ir)return e==="compositionend"||!et&&ys(e,n)?(e=ml(),ds=dl=Ta=null,ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ca&&n.locale!=="ko"?null:n.data;default:return null}}var mb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!mb[e.type]:n==="textarea"}function Am(e,n,i,l){pi?Ea?Ea.push(l):Ea=[l]:pi=l,n=Bc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var vl=null,_l=null;function pb(e){o0(e,0)}function $o(e){var n=Tn(e);if(cs(n))return e}function Cm(e,n){if(e==="change")return n}var Nm=!1;if(kn){var ef;if(kn){var tf="oninput"in document;if(!tf){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),tf=typeof Rm.oninput=="function"}ef=tf}else ef=!1;Nm=ef&&(!document.documentMode||9<document.documentMode)}function Mm(){vl&&(vl.detachEvent("onpropertychange",Im),_l=vl=null)}function Im(e){if(e.propertyName==="value"&&$o(_l)){var n=[];Am(n,_l,e,jn(e)),gi(pb,n)}}function gb(e,n,i){e==="focusin"?(Mm(),vl=n,_l=i,vl.attachEvent("onpropertychange",Im)):e==="focusout"&&Mm()}function yb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(_l)}function vb(e,n){if(e==="click")return $o(n)}function _b(e,n){if(e==="input"||e==="change")return $o(n)}function bb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var wn=typeof Object.is=="function"?Object.is:bb;function bl(e,n){if(wn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!at.call(n,f)||!wn(e[f],n[f]))return!1}return!0}function Dm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Om(e,n){var i=Dm(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Dm(i)}}function Vm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Vm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function jm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xa(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=xa(e.document)}return n}function nf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var xb=kn&&"documentMode"in document&&11>=document.documentMode,sr=null,af=null,xl=null,sf=!1;function km(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;sf||sr==null||sr!==xa(l)||(l=sr,"selectionStart"in l&&nf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),xl&&bl(xl,l)||(xl=l,l=Bc(af,"onSelect"),0<l.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=sr)))}function vs(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var rr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},rf={},Lm={};kn&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function _s(e){if(rf[e])return rf[e];if(!rr[e])return e;var n=rr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Lm)return rf[e]=n[i];return e}var Bm=_s("animationend"),Um=_s("animationiteration"),zm=_s("animationstart"),Eb=_s("transitionrun"),Tb=_s("transitionstart"),Sb=_s("transitioncancel"),Pm=_s("transitionend"),Gm=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function aa(e,n){Gm.set(e,n),_a(n,[e])}var Zo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bn=[],lr=0,of=0;function Jo(){for(var e=lr,n=of=lr=0;n<e;){var i=Bn[n];Bn[n++]=null;var l=Bn[n];Bn[n++]=null;var f=Bn[n];Bn[n++]=null;var d=Bn[n];if(Bn[n++]=null,l!==null&&f!==null){var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}d!==0&&qm(i,f,d)}}function Wo(e,n,i,l){Bn[lr++]=e,Bn[lr++]=n,Bn[lr++]=i,Bn[lr++]=l,of|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function cf(e,n,i,l){return Wo(e,n,i,l),ec(e)}function bs(e,n){return Wo(e,null,null,n),ec(e)}function qm(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var f=!1,d=e.return;d!==null;)d.childLanes|=i,l=d.alternate,l!==null&&(l.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&n!==null&&(f=31-wt(i),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[n]:l.push(n),n.lane=i|536870912),d):null}function ec(e){if(50<ql)throw ql=0,vh=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var or={};function wb(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,i,l){return new wb(e,n,i,l)}function uf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qa(e,n){var i=e.alternate;return i===null?(i=An(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Hm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function tc(e,n,i,l,f,d){var y=0;if(l=e,typeof e=="function")uf(e)&&(y=1);else if(typeof e=="string")y=M1(e,i,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=An(31,i,n,f),e.elementType=C,e.lanes=d,e;case F:return xs(i.children,f,d,n);case U:y=8,f|=24;break;case V:return e=An(12,i,n,f|2),e.elementType=V,e.lanes=d,e;case ce:return e=An(13,i,n,f),e.elementType=ce,e.lanes=d,e;case re:return e=An(19,i,n,f),e.elementType=re,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:y=10;break e;case W:y=9;break e;case ie:y=11;break e;case M:y=14;break e;case S:y=16,l=null;break e}y=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=An(y,i,n,f),n.elementType=e,n.type=l,n.lanes=d,n}function xs(e,n,i,l){return e=An(7,e,l,n),e.lanes=i,e}function ff(e,n,i){return e=An(6,e,null,n),e.lanes=i,e}function Fm(e){var n=An(18,null,null,0);return n.stateNode=e,n}function hf(e,n,i){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Qm=new WeakMap;function Un(e,n){if(typeof e=="object"&&e!==null){var i=Qm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Mt(n)},Qm.set(e,n),n)}return{value:e,source:n,stack:Mt(n)}}var cr=[],ur=0,nc=null,El=0,zn=[],Pn=0,bi=null,Na=1,Ra="";function Ha(e,n){cr[ur++]=El,cr[ur++]=nc,nc=e,El=n}function Xm(e,n,i){zn[Pn++]=Na,zn[Pn++]=Ra,zn[Pn++]=bi,bi=e;var l=Na;e=Ra;var f=32-wt(l)-1;l&=~(1<<f),i+=1;var d=32-wt(n)+f;if(30<d){var y=f-f%5;d=(l&(1<<y)-1).toString(32),l>>=y,f-=y,Na=1<<32-wt(n)+f|i<<f|l,Ra=d+e}else Na=1<<d|i<<f|l,Ra=e}function df(e){e.return!==null&&(Ha(e,1),Xm(e,1,0))}function mf(e){for(;e===nc;)nc=cr[--ur],cr[ur]=null,El=cr[--ur],cr[ur]=null;for(;e===bi;)bi=zn[--Pn],zn[Pn]=null,Ra=zn[--Pn],zn[Pn]=null,Na=zn[--Pn],zn[Pn]=null}function Ym(e,n){zn[Pn++]=Na,zn[Pn++]=Ra,zn[Pn++]=bi,Na=n.id,Ra=n.overflow,bi=e}var Jt=null,gt=null,Qe=!1,xi=null,Gn=!1,pf=Error(s(519));function Ei(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Un(n,e)),pf}function Km(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[Ot]=e,n[Ft]=l,i){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(i=0;i<Fl.length;i++)Pe(Fl[i],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":Pe("invalid",n),jo(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",n);break;case"textarea":Pe("invalid",n),di(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||h0(n.textContent,i)?(l.popover!=null&&(Pe("beforetoggle",n),Pe("toggle",n)),l.onScroll!=null&&Pe("scroll",n),l.onScrollEnd!=null&&Pe("scrollend",n),l.onClick!=null&&(n.onclick=Jn),n=!0):n=!1,n||Ei(e,!0)}function $m(e){for(Jt=e.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Jt=Jt.return}}function fr(e){if(e!==Jt)return!1;if(!Qe)return $m(e),Qe=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Oh(e.type,e.memoizedProps)),i=!i),i&&gt&&Ei(e),$m(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=x0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=x0(e)}else n===27?(n=gt,ki(e.type)?(e=Bh,Bh=null,gt=e):gt=n):gt=Jt?Hn(e.stateNode.nextSibling):null;return!0}function Es(){gt=Jt=null,Qe=!1}function gf(){var e=xi;return e!==null&&(_n===null?_n=e:_n.push.apply(_n,e),xi=null),e}function Tl(e){xi===null?xi=[e]:xi.push(e)}var yf=O(null),Ts=null,Fa=null;function Ti(e,n,i){ue(yf,n._currentValue),n._currentValue=i}function Qa(e){e._currentValue=yf.current,ae(yf)}function vf(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function _f(e,n,i,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var I=0;I<n.length;I++)if(T.context===n[I]){d.lanes|=i,T=d.alternate,T!==null&&(T.lanes|=i),vf(d.return,i,e),l||(y=null);break e}d=T.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(s(341));y.lanes|=i,d=y.alternate,d!==null&&(d.lanes|=i),vf(y,i,e),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function hr(e,n,i,l){e=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var T=f.type;wn(f.pendingProps.value,y.value)||(e!==null?e.push(T):e=[T])}}else if(f===he.current){if(y=f.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push($l):e=[$l])}f=f.return}e!==null&&_f(n,e,i,l),n.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ss(e){Ts=e,Fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Zm(Ts,e)}function ic(e,n){return Ts===null&&Ss(e),Zm(e,n)}function Zm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Fa===null){if(e===null)throw Error(s(308));Fa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Fa=Fa.next=n;return i}var Ab=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Cb=r.unstable_scheduleCallback,Nb=r.unstable_NormalPriority,kt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new Ab,data:new Map,refCount:0}}function Sl(e){e.refCount--,e.refCount===0&&Cb(Nb,function(){e.controller.abort()})}var wl=null,xf=0,dr=0,mr=null;function Rb(e,n){if(wl===null){var i=wl=[];xf=0,dr=Sh(),mr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return xf++,n.then(Jm,Jm),n}function Jm(){if(--xf===0&&wl!==null){mr!==null&&(mr.status="fulfilled");var e=wl;wl=null,dr=0,mr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Mb(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var Wm=X.S;X.S=function(e,n){kg=It(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Rb(e,n),Wm!==null&&Wm(e,n)};var ws=O(null);function Ef(){var e=ws.current;return e!==null?e:mt.pooledCache}function sc(e,n){n===null?ue(ws,ws.current):ue(ws,n.pool)}function ep(){var e=Ef();return e===null?null:{parent:kt._currentValue,pool:e}}var pr=Error(s(460)),Tf=Error(s(474)),rc=Error(s(542)),lc={then:function(){}};function tp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function np(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Jn,Jn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ip(e),e;default:if(typeof n.status=="string")n.then(Jn,Jn);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ip(e),e}throw Cs=n,pr}}function As(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Cs=i,pr):i}}var Cs=null;function ap(){if(Cs===null)throw Error(s(459));var e=Cs;return Cs=null,e}function ip(e){if(e===pr||e===rc)throw Error(s(483))}var gr=null,Al=0;function oc(e){var n=Al;return Al+=1,gr===null&&(gr=[]),np(gr,e,n)}function Cl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function cc(e,n){throw n.$$typeof===A?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function sp(e){function n(z,k){if(e){var q=z.deletions;q===null?(z.deletions=[k],z.flags|=16):q.push(k)}}function i(z,k){if(!e)return null;for(;k!==null;)n(z,k),k=k.sibling;return null}function l(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function f(z,k){return z=qa(z,k),z.index=0,z.sibling=null,z}function d(z,k,q){return z.index=q,e?(q=z.alternate,q!==null?(q=q.index,q<k?(z.flags|=67108866,k):q):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function y(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function T(z,k,q,J){return k===null||k.tag!==6?(k=ff(q,z.mode,J),k.return=z,k):(k=f(k,q),k.return=z,k)}function I(z,k,q,J){var Se=q.type;return Se===F?Z(z,k,q.props.children,J,q.key):k!==null&&(k.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&As(Se)===k.type)?(k=f(k,q.props),Cl(k,q),k.return=z,k):(k=tc(q.type,q.key,q.props,null,z.mode,J),Cl(k,q),k.return=z,k)}function H(z,k,q,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=hf(q,z.mode,J),k.return=z,k):(k=f(k,q.children||[]),k.return=z,k)}function Z(z,k,q,J,Se){return k===null||k.tag!==7?(k=xs(q,z.mode,J,Se),k.return=z,k):(k=f(k,q),k.return=z,k)}function ee(z,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=ff(""+k,z.mode,q),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case L:return q=tc(k.type,k.key,k.props,null,z.mode,q),Cl(q,k),q.return=z,q;case j:return k=hf(k,z.mode,q),k.return=z,k;case S:return k=As(k),ee(z,k,q)}if(We(k)||B(k))return k=xs(k,z.mode,q,null),k.return=z,k;if(typeof k.then=="function")return ee(z,oc(k),q);if(k.$$typeof===$)return ee(z,ic(z,k),q);cc(z,k)}return null}function Q(z,k,q,J){var Se=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Se!==null?null:T(z,k,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case L:return q.key===Se?I(z,k,q,J):null;case j:return q.key===Se?H(z,k,q,J):null;case S:return q=As(q),Q(z,k,q,J)}if(We(q)||B(q))return Se!==null?null:Z(z,k,q,J,null);if(typeof q.then=="function")return Q(z,k,oc(q),J);if(q.$$typeof===$)return Q(z,k,ic(z,q),J);cc(z,q)}return null}function K(z,k,q,J,Se){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(q)||null,T(k,z,""+J,Se);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case L:return z=z.get(J.key===null?q:J.key)||null,I(k,z,J,Se);case j:return z=z.get(J.key===null?q:J.key)||null,H(k,z,J,Se);case S:return J=As(J),K(z,k,q,J,Se)}if(We(J)||B(J))return z=z.get(q)||null,Z(k,z,J,Se,null);if(typeof J.then=="function")return K(z,k,q,oc(J),Se);if(J.$$typeof===$)return K(z,k,q,ic(k,J),Se);cc(k,J)}return null}function be(z,k,q,J){for(var Se=null,Ze=null,Ee=k,Le=k=0,qe=null;Ee!==null&&Le<q.length;Le++){Ee.index>Le?(qe=Ee,Ee=null):qe=Ee.sibling;var Je=Q(z,Ee,q[Le],J);if(Je===null){Ee===null&&(Ee=qe);break}e&&Ee&&Je.alternate===null&&n(z,Ee),k=d(Je,k,Le),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je,Ee=qe}if(Le===q.length)return i(z,Ee),Qe&&Ha(z,Le),Se;if(Ee===null){for(;Le<q.length;Le++)Ee=ee(z,q[Le],J),Ee!==null&&(k=d(Ee,k,Le),Ze===null?Se=Ee:Ze.sibling=Ee,Ze=Ee);return Qe&&Ha(z,Le),Se}for(Ee=l(Ee);Le<q.length;Le++)qe=K(Ee,z,Le,q[Le],J),qe!==null&&(e&&qe.alternate!==null&&Ee.delete(qe.key===null?Le:qe.key),k=d(qe,k,Le),Ze===null?Se=qe:Ze.sibling=qe,Ze=qe);return e&&Ee.forEach(function(Pi){return n(z,Pi)}),Qe&&Ha(z,Le),Se}function Ne(z,k,q,J){if(q==null)throw Error(s(151));for(var Se=null,Ze=null,Ee=k,Le=k=0,qe=null,Je=q.next();Ee!==null&&!Je.done;Le++,Je=q.next()){Ee.index>Le?(qe=Ee,Ee=null):qe=Ee.sibling;var Pi=Q(z,Ee,Je.value,J);if(Pi===null){Ee===null&&(Ee=qe);break}e&&Ee&&Pi.alternate===null&&n(z,Ee),k=d(Pi,k,Le),Ze===null?Se=Pi:Ze.sibling=Pi,Ze=Pi,Ee=qe}if(Je.done)return i(z,Ee),Qe&&Ha(z,Le),Se;if(Ee===null){for(;!Je.done;Le++,Je=q.next())Je=ee(z,Je.value,J),Je!==null&&(k=d(Je,k,Le),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je);return Qe&&Ha(z,Le),Se}for(Ee=l(Ee);!Je.done;Le++,Je=q.next())Je=K(Ee,z,Le,Je.value,J),Je!==null&&(e&&Je.alternate!==null&&Ee.delete(Je.key===null?Le:Je.key),k=d(Je,k,Le),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je);return e&&Ee.forEach(function(P1){return n(z,P1)}),Qe&&Ha(z,Le),Se}function ht(z,k,q,J){if(typeof q=="object"&&q!==null&&q.type===F&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case L:e:{for(var Se=q.key;k!==null;){if(k.key===Se){if(Se=q.type,Se===F){if(k.tag===7){i(z,k.sibling),J=f(k,q.props.children),J.return=z,z=J;break e}}else if(k.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&As(Se)===k.type){i(z,k.sibling),J=f(k,q.props),Cl(J,q),J.return=z,z=J;break e}i(z,k);break}else n(z,k);k=k.sibling}q.type===F?(J=xs(q.props.children,z.mode,J,q.key),J.return=z,z=J):(J=tc(q.type,q.key,q.props,null,z.mode,J),Cl(J,q),J.return=z,z=J)}return y(z);case j:e:{for(Se=q.key;k!==null;){if(k.key===Se)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){i(z,k.sibling),J=f(k,q.children||[]),J.return=z,z=J;break e}else{i(z,k);break}else n(z,k);k=k.sibling}J=hf(q,z.mode,J),J.return=z,z=J}return y(z);case S:return q=As(q),ht(z,k,q,J)}if(We(q))return be(z,k,q,J);if(B(q)){if(Se=B(q),typeof Se!="function")throw Error(s(150));return q=Se.call(q),Ne(z,k,q,J)}if(typeof q.then=="function")return ht(z,k,oc(q),J);if(q.$$typeof===$)return ht(z,k,ic(z,q),J);cc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(i(z,k.sibling),J=f(k,q),J.return=z,z=J):(i(z,k),J=ff(q,z.mode,J),J.return=z,z=J),y(z)):i(z,k)}return function(z,k,q,J){try{Al=0;var Se=ht(z,k,q,J);return gr=null,Se}catch(Ee){if(Ee===pr||Ee===rc)throw Ee;var Ze=An(29,Ee,null,z.mode);return Ze.lanes=J,Ze.return=z,Ze}finally{}}}var Ns=sp(!0),rp=sp(!1),Si=!1;function Sf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=ec(e),qm(e,null,i),n}return Wo(e,l,n,i),ec(e)}function Nl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,tl(e,i)}}function Af(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?f=d=n:d=d.next=n}else f=d=n;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Cf=!1;function Rl(){if(Cf){var e=mr;if(e!==null)throw e}}function Ml(e,n,i,l){Cf=!1;var f=e.updateQueue;Si=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var I=T,H=I.next;I.next=null,y===null?d=H:y.next=H,y=I;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==y&&(T===null?Z.firstBaseUpdate=H:T.next=H,Z.lastBaseUpdate=I))}if(d!==null){var ee=f.baseState;y=0,Z=H=I=null,T=d;do{var Q=T.lane&-536870913,K=Q!==T.lane;if(K?(Ge&Q)===Q:(l&Q)===Q){Q!==0&&Q===dr&&(Cf=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var be=e,Ne=T;Q=n;var ht=i;switch(Ne.tag){case 1:if(be=Ne.payload,typeof be=="function"){ee=be.call(ht,ee,Q);break e}ee=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ne.payload,Q=typeof be=="function"?be.call(ht,ee,Q):be,Q==null)break e;ee=E({},ee,Q);break e;case 2:Si=!0}}Q=T.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(H=Z=K,I=ee):Z=Z.next=K,y|=Q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;K=T,T=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Z===null&&(I=ee),f.baseState=I,f.firstBaseUpdate=H,f.lastBaseUpdate=Z,d===null&&(f.shared.lanes=0),Ii|=y,e.lanes=y,e.memoizedState=ee}}function lp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function op(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)lp(i[e],n)}var yr=O(null),uc=O(0);function cp(e,n){e=ti,ue(uc,e),ue(yr,n),ti=e|n.baseLanes}function Nf(){ue(uc,ti),ue(yr,yr.current)}function Rf(){ti=uc.current,ae(yr),ae(uc)}var Cn=O(null),qn=null;function Ci(e){var n=e.alternate;ue(Ct,Ct.current&1),ue(Cn,e),qn===null&&(n===null||yr.current!==null||n.memoizedState!==null)&&(qn=e)}function Mf(e){ue(Ct,Ct.current),ue(Cn,e),qn===null&&(qn=e)}function up(e){e.tag===22?(ue(Ct,Ct.current),ue(Cn,e),qn===null&&(qn=e)):Ni()}function Ni(){ue(Ct,Ct.current),ue(Cn,Cn.current)}function Nn(e){ae(Cn),qn===e&&(qn=null),ae(Ct)}var Ct=O(0);function fc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||kh(i)||Lh(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xa=0,ke=null,ut=null,Lt=null,hc=!1,vr=!1,Rs=!1,dc=0,Il=0,_r=null,Ib=0;function Et(){throw Error(s(321))}function If(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!wn(e[i],n[i]))return!1;return!0}function Df(e,n,i,l,f,d){return Xa=d,ke=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=e===null||e.memoizedState===null?Xp:Xf,Rs=!1,d=i(l,f),Rs=!1,vr&&(d=hp(n,i,l,f)),fp(e),d}function fp(e){X.H=Vl;var n=ut!==null&&ut.next!==null;if(Xa=0,Lt=ut=ke=null,hc=!1,Il=0,_r=null,n)throw Error(s(300));e===null||Bt||(e=e.dependencies,e!==null&&ac(e)&&(Bt=!0))}function hp(e,n,i,l){ke=e;var f=0;do{if(vr&&(_r=null),Il=0,vr=!1,25<=f)throw Error(s(301));if(f+=1,Lt=ut=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=Yp,d=n(i,l)}while(vr);return d}function Db(){var e=X.H,n=e.useState()[0];return n=typeof n.then=="function"?Dl(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(ke.flags|=1024),n}function Of(){var e=dc!==0;return dc=0,e}function Vf(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function jf(e){if(hc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}hc=!1}Xa=0,Lt=ut=ke=null,vr=!1,Il=dc=0,_r=null}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ke.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Nt(){if(ut===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=Lt===null?ke.memoizedState:Lt.next;if(n!==null)Lt=n,ut=e;else{if(e===null)throw ke.alternate===null?Error(s(467)):Error(s(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Lt===null?ke.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(e){var n=Il;return Il+=1,_r===null&&(_r=[]),e=np(_r,e,n),n=ke,(Lt===null?n.memoizedState:Lt.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?Xp:Xf),e}function pc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Dl(e);if(e.$$typeof===$)return Wt(e)}throw Error(s(438,String(e)))}function kf(e){var n=null,i=ke.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=mc(),ke.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=N;return n.index++,i}function Ya(e,n){return typeof n=="function"?n(e):n}function gc(e){var n=Nt();return Lf(n,ut,e)}function Lf(e,n,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}n.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{n=f.next;var T=y=null,I=null,H=n,Z=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(Ge&ee)===ee:(Xa&ee)===ee){var Q=H.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===dr&&(Z=!0);else if((Xa&Q)===Q){H=H.next,Q===dr&&(Z=!0);continue}else ee={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(T=I=ee,y=d):I=I.next=ee,ke.lanes|=Q,Ii|=Q;ee=H.action,Rs&&i(d,ee),d=H.hasEagerState?H.eagerState:i(d,ee)}else Q={lane:ee,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(T=I=Q,y=d):I=I.next=Q,ke.lanes|=ee,Ii|=ee;H=H.next}while(H!==null&&H!==n);if(I===null?y=d:I.next=T,!wn(d,e.memoizedState)&&(Bt=!0,Z&&(i=mr,i!==null)))throw i;e.memoizedState=d,e.baseState=y,e.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Bf(e){var n=Nt(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,f=i.pending,d=n.memoizedState;if(f!==null){i.pending=null;var y=f=f.next;do d=e(d,y.action),y=y.next;while(y!==f);wn(d,n.memoizedState)||(Bt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),i.lastRenderedState=d}return[d,l]}function dp(e,n,i){var l=ke,f=Nt(),d=Qe;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=n();var y=!wn((ut||f).memoizedState,i);if(y&&(f.memoizedState=i,Bt=!0),f=f.queue,Pf(gp.bind(null,l,f,e),[e]),f.getSnapshot!==n||y||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,br(9,{destroy:void 0},pp.bind(null,l,f,i,n),null),mt===null)throw Error(s(349));d||(Xa&127)!==0||mp(l,n,i)}return i}function mp(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=ke.updateQueue,n===null?(n=mc(),ke.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function pp(e,n,i,l){n.value=i,n.getSnapshot=l,yp(n)&&vp(e)}function gp(e,n,i){return i(function(){yp(n)&&vp(e)})}function yp(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!wn(e,i)}catch{return!0}}function vp(e){var n=bs(e,2);n!==null&&bn(n,e,2)}function Uf(e){var n=dn();if(typeof e=="function"){var i=e;if(e=i(),Rs){On(!0);try{i()}finally{On(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},n}function _p(e,n,i,l){return e.baseState=i,Lf(e,ut,typeof l=="function"?l:Ya)}function Ob(e,n,i,l,f){if(_c(e))throw Error(s(485));if(e=n.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};X.T!==null?i(!0):d.isTransition=!1,l(d),i=n.pending,i===null?(d.next=n.pending=d,bp(n,d)):(d.next=i.next,n.pending=i.next=d)}}function bp(e,n){var i=n.action,l=n.payload,f=e.state;if(n.isTransition){var d=X.T,y={};X.T=y;try{var T=i(f,l),I=X.S;I!==null&&I(y,T),xp(e,n,T)}catch(H){zf(e,n,H)}finally{d!==null&&y.types!==null&&(d.types=y.types),X.T=d}}else try{d=i(f,l),xp(e,n,d)}catch(H){zf(e,n,H)}}function xp(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Ep(e,n,l)},function(l){return zf(e,n,l)}):Ep(e,n,i)}function Ep(e,n,i){n.status="fulfilled",n.value=i,Tp(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,bp(e,i)))}function zf(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,Tp(n),n=n.next;while(n!==l)}e.action=null}function Tp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Sp(e,n){return n}function wp(e,n){if(Qe){var i=mt.formState;if(i!==null){e:{var l=ke;if(Qe){if(gt){t:{for(var f=gt,d=Gn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Hn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){gt=Hn(f.nextSibling),l=f.data==="F!";break e}}Ei(l)}l=!1}l&&(n=i[0])}}return i=dn(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:n},i.queue=l,i=Hp.bind(null,ke,l),l.dispatch=i,l=Uf(!1),d=Qf.bind(null,ke,!1,l.queue),l=dn(),f={state:n,dispatch:null,action:e,pending:null},l.queue=f,i=Ob.bind(null,ke,f,d,i),f.dispatch=i,l.memoizedState=e,[n,i,!1]}function Ap(e){var n=Nt();return Cp(n,ut,e)}function Cp(e,n,i){if(n=Lf(e,n,Sp)[0],e=gc(Ya)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Dl(n)}catch(y){throw y===pr?rc:y}else l=n;n=Nt();var f=n.queue,d=f.dispatch;return i!==n.memoizedState&&(ke.flags|=2048,br(9,{destroy:void 0},Vb.bind(null,f,i),null)),[l,d,e]}function Vb(e,n){e.action=n}function Np(e){var n=Nt(),i=ut;if(i!==null)return Cp(n,i,e);Nt(),n=n.memoizedState,i=Nt();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function br(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=ke.updateQueue,n===null&&(n=mc(),ke.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function Rp(){return Nt().memoizedState}function yc(e,n,i,l){var f=dn();ke.flags|=e,f.memoizedState=br(1|n,{destroy:void 0},i,l===void 0?null:l)}function vc(e,n,i,l){var f=Nt();l=l===void 0?null:l;var d=f.memoizedState.inst;ut!==null&&l!==null&&If(l,ut.memoizedState.deps)?f.memoizedState=br(n,d,i,l):(ke.flags|=e,f.memoizedState=br(1|n,d,i,l))}function Mp(e,n){yc(8390656,8,e,n)}function Pf(e,n){vc(2048,8,e,n)}function jb(e){ke.flags|=4;var n=ke.updateQueue;if(n===null)n=mc(),ke.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Ip(e){var n=Nt().memoizedState;return jb({ref:n,nextImpl:e}),function(){if((tt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Dp(e,n){return vc(4,2,e,n)}function Op(e,n){return vc(4,4,e,n)}function Vp(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function jp(e,n,i){i=i!=null?i.concat([e]):null,vc(4,4,Vp.bind(null,n,e),i)}function Gf(){}function kp(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&If(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function Lp(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&If(n,l[1]))return l[0];if(l=e(),Rs){On(!0);try{e()}finally{On(!1)}}return i.memoizedState=[l,n],l}function qf(e,n,i){return i===void 0||(Xa&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Bg(),ke.lanes|=e,Ii|=e,i)}function Bp(e,n,i,l){return wn(i,n)?i:yr.current!==null?(e=qf(e,i,l),wn(e,n)||(Bt=!0),e):(Xa&42)===0||(Xa&1073741824)!==0&&(Ge&261930)===0?(Bt=!0,e.memoizedState=i):(e=Bg(),ke.lanes|=e,Ii|=e,n)}function Up(e,n,i,l,f){var d=oe.p;oe.p=d!==0&&8>d?d:8;var y=X.T,T={};X.T=T,Qf(e,!1,n,i);try{var I=f(),H=X.S;if(H!==null&&H(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Z=Mb(I,l);Ol(e,n,Z,In(e))}else Ol(e,n,l,In(e))}catch(ee){Ol(e,n,{then:function(){},status:"rejected",reason:ee},In())}finally{oe.p=d,y!==null&&T.types!==null&&(y.types=T.types),X.T=y}}function kb(){}function Hf(e,n,i,l){if(e.tag!==5)throw Error(s(476));var f=zp(e).queue;Up(e,f,n,xe,i===null?kb:function(){return Pp(e),i(l)})}function zp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:xe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Pp(e){var n=zp(e);n.next===null&&(n=e.alternate.memoizedState),Ol(e,n.next.queue,{},In())}function Ff(){return Wt($l)}function Gp(){return Nt().memoizedState}function qp(){return Nt().memoizedState}function Lb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=In();e=wi(i);var l=Ai(n,e,i);l!==null&&(bn(l,n,i),Nl(l,n,i)),n={cache:bf()},e.payload=n;return}n=n.return}}function Bb(e,n,i){var l=In();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},_c(e)?Fp(n,i):(i=cf(e,n,i,l),i!==null&&(bn(i,e,l),Qp(i,n,l)))}function Hp(e,n,i){var l=In();Ol(e,n,i,l)}function Ol(e,n,i,l){var f={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(_c(e))Fp(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,T=d(y,i);if(f.hasEagerState=!0,f.eagerState=T,wn(T,y))return Wo(e,n,f,0),mt===null&&Jo(),!1}catch{}finally{}if(i=cf(e,n,f,l),i!==null)return bn(i,e,l),Qp(i,n,l),!0}return!1}function Qf(e,n,i,l){if(l={lane:2,revertLane:Sh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},_c(e)){if(n)throw Error(s(479))}else n=cf(e,i,l,2),n!==null&&bn(n,e,2)}function _c(e){var n=e.alternate;return e===ke||n!==null&&n===ke}function Fp(e,n){vr=hc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Qp(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,tl(e,i)}}var Vl={readContext:Wt,use:pc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Vl.useEffectEvent=Et;var Xp={readContext:Wt,use:pc,useCallback:function(e,n){return dn().memoizedState=[e,n===void 0?null:n],e},useContext:Wt,useEffect:Mp,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,yc(4194308,4,Vp.bind(null,n,e),i)},useLayoutEffect:function(e,n){return yc(4194308,4,e,n)},useInsertionEffect:function(e,n){yc(4,2,e,n)},useMemo:function(e,n){var i=dn();n=n===void 0?null:n;var l=e();if(Rs){On(!0);try{e()}finally{On(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=dn();if(i!==void 0){var f=i(n);if(Rs){On(!0);try{i(n)}finally{On(!1)}}}else f=n;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Bb.bind(null,ke,e),[l.memoizedState,e]},useRef:function(e){var n=dn();return e={current:e},n.memoizedState=e},useState:function(e){e=Uf(e);var n=e.queue,i=Hp.bind(null,ke,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Gf,useDeferredValue:function(e,n){var i=dn();return qf(i,e,n)},useTransition:function(){var e=Uf(!1);return e=Up.bind(null,ke,e.queue,!0,!1),dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=ke,f=dn();if(Qe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),mt===null)throw Error(s(349));(Ge&127)!==0||mp(l,n,i)}f.memoizedState=i;var d={value:i,getSnapshot:n};return f.queue=d,Mp(gp.bind(null,l,d,e),[e]),l.flags|=2048,br(9,{destroy:void 0},pp.bind(null,l,d,i,n),null),i},useId:function(){var e=dn(),n=mt.identifierPrefix;if(Qe){var i=Ra,l=Na;i=(l&~(1<<32-wt(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=dc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Ib++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Ff,useFormState:wp,useActionState:wp,useOptimistic:function(e){var n=dn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Qf.bind(null,ke,!0,i),i.dispatch=n,[e,n]},useMemoCache:kf,useCacheRefresh:function(){return dn().memoizedState=Lb.bind(null,ke)},useEffectEvent:function(e){var n=dn(),i={impl:e};return n.memoizedState=i,function(){if((tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Xf={readContext:Wt,use:pc,useCallback:kp,useContext:Wt,useEffect:Pf,useImperativeHandle:jp,useInsertionEffect:Dp,useLayoutEffect:Op,useMemo:Lp,useReducer:gc,useRef:Rp,useState:function(){return gc(Ya)},useDebugValue:Gf,useDeferredValue:function(e,n){var i=Nt();return Bp(i,ut.memoizedState,e,n)},useTransition:function(){var e=gc(Ya)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:dp,useId:Gp,useHostTransitionStatus:Ff,useFormState:Ap,useActionState:Ap,useOptimistic:function(e,n){var i=Nt();return _p(i,ut,e,n)},useMemoCache:kf,useCacheRefresh:qp};Xf.useEffectEvent=Ip;var Yp={readContext:Wt,use:pc,useCallback:kp,useContext:Wt,useEffect:Pf,useImperativeHandle:jp,useInsertionEffect:Dp,useLayoutEffect:Op,useMemo:Lp,useReducer:Bf,useRef:Rp,useState:function(){return Bf(Ya)},useDebugValue:Gf,useDeferredValue:function(e,n){var i=Nt();return ut===null?qf(i,e,n):Bp(i,ut.memoizedState,e,n)},useTransition:function(){var e=Bf(Ya)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:dp,useId:Gp,useHostTransitionStatus:Ff,useFormState:Np,useActionState:Np,useOptimistic:function(e,n){var i=Nt();return ut!==null?_p(i,ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:kf,useCacheRefresh:qp};Yp.useEffectEvent=Ip;function Yf(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:E({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Kf={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=In(),f=wi(l);f.payload=n,i!=null&&(f.callback=i),n=Ai(e,f,l),n!==null&&(bn(n,e,l),Nl(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=In(),f=wi(l);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Ai(e,f,l),n!==null&&(bn(n,e,l),Nl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=In(),l=wi(i);l.tag=2,n!=null&&(l.callback=n),n=Ai(e,l,i),n!==null&&(bn(n,e,i),Nl(n,e,i))}};function Kp(e,n,i,l,f,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):n.prototype&&n.prototype.isPureReactComponent?!bl(i,l)||!bl(f,d):!0}function $p(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&Kf.enqueueReplaceState(n,n.state,null)}function Ms(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=E({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function Zp(e){Zo(e)}function Jp(e){console.error(e)}function Wp(e){Zo(e)}function bc(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function eg(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $f(e,n,i){return i=wi(i),i.tag=3,i.payload={element:null},i.callback=function(){bc(e,n)},i}function tg(e){return e=wi(e),e.tag=3,e}function ng(e,n,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){eg(n,i,l)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){eg(n,i,l),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Ub(e,n,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&hr(n,i,f,!0),i=Cn.current,i!==null){switch(i.tag){case 31:case 13:return qn===null?Dc():i.alternate===null&&Tt===0&&(Tt=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===lc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),xh(e,l,f)),!1;case 22:return i.flags|=65536,l===lc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),xh(e,l,f)),!1}throw Error(s(435,i.tag))}return xh(e,l,f),Dc(),!1}if(Qe)return n=Cn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==pf&&(e=Error(s(422),{cause:l}),Tl(Un(e,i)))):(l!==pf&&(n=Error(s(423),{cause:l}),Tl(Un(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Un(l,i),f=$f(e.stateNode,l,f),Af(e,f),Tt!==4&&(Tt=2)),!1;var d=Error(s(520),{cause:l});if(d=Un(d,i),Gl===null?Gl=[d]:Gl.push(d),Tt!==4&&(Tt=2),n===null)return!0;l=Un(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=$f(i.stateNode,l,e),Af(i,e),!1;case 1:if(n=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Di===null||!Di.has(d))))return i.flags|=65536,f&=-f,i.lanes|=f,f=tg(f),ng(f,e,i,l),Af(i,f),!1}i=i.return}while(i!==null);return!1}var Zf=Error(s(461)),Bt=!1;function en(e,n,i,l){n.child=e===null?rp(n,null,i,l):Ns(n,e.child,i,l)}function ag(e,n,i,l,f){i=i.render;var d=n.ref;if("ref"in l){var y={};for(var T in l)T!=="ref"&&(y[T]=l[T])}else y=l;return Ss(n),l=Df(e,n,i,y,d,f),T=Of(),e!==null&&!Bt?(Vf(e,n,f),Ka(e,n,f)):(Qe&&T&&df(n),n.flags|=1,en(e,n,l,f),n.child)}function ig(e,n,i,l,f){if(e===null){var d=i.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=d,sg(e,n,d,l,f)):(e=tc(i.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!sh(e,f)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:bl,i(y,l)&&e.ref===n.ref)return Ka(e,n,f)}return n.flags|=1,e=qa(d,l),e.ref=n.ref,e.return=n,n.child=e}function sg(e,n,i,l,f){if(e!==null){var d=e.memoizedProps;if(bl(d,l)&&e.ref===n.ref)if(Bt=!1,n.pendingProps=l=d,sh(e,f))(e.flags&131072)!==0&&(Bt=!0);else return n.lanes=e.lanes,Ka(e,n,f)}return Jf(e,n,i,l,f)}function rg(e,n,i,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(l=n.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,n.child=null;return lg(e,n,d,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&sc(n,d!==null?d.cachePool:null),d!==null?cp(n,d):Nf(),up(n);else return l=n.lanes=536870912,lg(e,n,d!==null?d.baseLanes|i:i,i,l)}else d!==null?(sc(n,d.cachePool),cp(n,d),Ni(),n.memoizedState=null):(e!==null&&sc(n,null),Nf(),Ni());return en(e,n,f,i),n.child}function jl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function lg(e,n,i,l,f){var d=Ef();return d=d===null?null:{parent:kt._currentValue,pool:d},n.memoizedState={baseLanes:i,cachePool:d},e!==null&&sc(n,null),Nf(),up(n),e!==null&&hr(e,n,l,!0),n.childLanes=f,null}function xc(e,n){return n=Tc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function og(e,n,i){return Ns(n,e.child,null,i),e=xc(n,n.pendingProps),e.flags|=2,Nn(n),n.memoizedState=null,e}function zb(e,n,i){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Qe){if(l.mode==="hidden")return e=xc(n,l),n.lanes=536870912,jl(null,e);if(Mf(n),(e=gt)?(e=b0(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bi!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Fm(e),i.return=n,n.child=i,Jt=n,gt=null)):e=null,e===null)throw Ei(n);return n.lanes=536870912,null}return xc(n,l)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(Mf(n),f)if(n.flags&256)n.flags&=-257,n=og(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Bt||hr(e,n,i,!1),f=(i&e.childLanes)!==0,Bt||f){if(l=mt,l!==null&&(y=nl(l,i),y!==0&&y!==d.retryLane))throw d.retryLane=y,bs(e,y),bn(l,e,y),Zf;Dc(),n=og(e,n,i)}else e=d.treeContext,gt=Hn(y.nextSibling),Jt=n,Qe=!0,xi=null,Gn=!1,e!==null&&Ym(n,e),n=xc(n,l),n.flags|=4096;return n}return e=qa(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ec(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Jf(e,n,i,l,f){return Ss(n),i=Df(e,n,i,l,void 0,f),l=Of(),e!==null&&!Bt?(Vf(e,n,f),Ka(e,n,f)):(Qe&&l&&df(n),n.flags|=1,en(e,n,i,f),n.child)}function cg(e,n,i,l,f,d){return Ss(n),n.updateQueue=null,i=hp(n,l,i,f),fp(e),l=Of(),e!==null&&!Bt?(Vf(e,n,d),Ka(e,n,d)):(Qe&&l&&df(n),n.flags|=1,en(e,n,i,d),n.child)}function ug(e,n,i,l,f){if(Ss(n),n.stateNode===null){var d=or,y=i.contextType;typeof y=="object"&&y!==null&&(d=Wt(y)),d=new i(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Sf(n),y=i.contextType,d.context=typeof y=="object"&&y!==null?Wt(y):or,d.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Yf(n,i,y,l),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Kf.enqueueReplaceState(d,d.state,null),Ml(n,l,d,f),Rl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,I=Ms(i,T);d.props=I;var H=d.context,Z=i.contextType;y=or,typeof Z=="object"&&Z!==null&&(y=Wt(Z));var ee=i.getDerivedStateFromProps;Z=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||H!==y)&&$p(n,d,l,y),Si=!1;var Q=n.memoizedState;d.state=Q,Ml(n,l,d,f),Rl(),H=n.memoizedState,T||Q!==H||Si?(typeof ee=="function"&&(Yf(n,i,ee,l),H=n.memoizedState),(I=Si||Kp(n,i,I,l,Q,H,y))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=H),d.props=l,d.state=H,d.context=y,l=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,wf(e,n),y=n.memoizedProps,Z=Ms(i,y),d.props=Z,ee=n.pendingProps,Q=d.context,H=i.contextType,I=or,typeof H=="object"&&H!==null&&(I=Wt(H)),T=i.getDerivedStateFromProps,(H=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==ee||Q!==I)&&$p(n,d,l,I),Si=!1,Q=n.memoizedState,d.state=Q,Ml(n,l,d,f),Rl();var K=n.memoizedState;y!==ee||Q!==K||Si||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof T=="function"&&(Yf(n,i,T,l),K=n.memoizedState),(Z=Si||Kp(n,i,Z,l,Q,K,I)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),d.props=l,d.state=K,d.context=I,l=Z):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,Ec(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Ns(n,e.child,null,f),n.child=Ns(n,null,i,f)):en(e,n,i,f),n.memoizedState=d.state,e=n.child):e=Ka(e,n,f),e}function fg(e,n,i,l){return Es(),n.flags|=256,en(e,n,i,l),n.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eh(e){return{baseLanes:e,cachePool:ep()}}function th(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Mn),e}function hg(e,n,i){var l=n.pendingProps,f=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),y&&(f=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(Qe){if(f?Ci(n):Ni(),(e=gt)?(e=b0(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bi!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Fm(e),i.return=n,n.child=i,Jt=n,gt=null)):e=null,e===null)throw Ei(n);return Lh(e)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(Ni(),f=n.mode,T=Tc({mode:"hidden",children:T},f),l=xs(l,f,i,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=eh(i),l.childLanes=th(e,y,i),n.memoizedState=Wf,jl(null,l)):(Ci(n),nh(n,T))}var I=e.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(d)n.flags&256?(Ci(n),n.flags&=-257,n=ah(e,n,i)):n.memoizedState!==null?(Ni(),n.child=e.child,n.flags|=128,n=null):(Ni(),T=l.fallback,f=n.mode,l=Tc({mode:"visible",children:l.children},f),T=xs(T,f,i,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,Ns(n,e.child,null,i),l=n.child,l.memoizedState=eh(i),l.childLanes=th(e,y,i),n.memoizedState=Wf,n=jl(null,l));else if(Ci(n),Lh(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var H=y.dgst;y=H,l=Error(s(419)),l.stack="",l.digest=y,Tl({value:l,source:null,stack:null}),n=ah(e,n,i)}else if(Bt||hr(e,n,i,!1),y=(i&e.childLanes)!==0,Bt||y){if(y=mt,y!==null&&(l=nl(y,i),l!==0&&l!==I.retryLane))throw I.retryLane=l,bs(e,l),bn(y,e,l),Zf;kh(T)||Dc(),n=ah(e,n,i)}else kh(T)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,gt=Hn(T.nextSibling),Jt=n,Qe=!0,xi=null,Gn=!1,e!==null&&Ym(n,e),n=nh(n,l.children),n.flags|=4096);return n}return f?(Ni(),T=l.fallback,f=n.mode,I=e.child,H=I.sibling,l=qa(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,H!==null?T=qa(H,T):(T=xs(T,f,i,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,jl(null,l),l=n.child,T=e.child.memoizedState,T===null?T=eh(i):(f=T.cachePool,f!==null?(I=kt._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=ep(),T={baseLanes:T.baseLanes|i,cachePool:f}),l.memoizedState=T,l.childLanes=th(e,y,i),n.memoizedState=Wf,jl(e.child,l)):(Ci(n),i=e.child,e=i.sibling,i=qa(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function nh(e,n){return n=Tc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Tc(e,n){return e=An(22,e,null,n),e.lanes=0,e}function ah(e,n,i){return Ns(n,e.child,null,i),e=nh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function dg(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),vf(e.return,n,i)}function ih(e,n,i,l,f,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f,treeForkCount:d}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=i,y.tailMode=f,y.treeForkCount=d)}function mg(e,n,i){var l=n.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var y=Ct.current,T=(y&2)!==0;if(T?(y=y&1|2,n.flags|=128):y&=1,ue(Ct,y),en(e,n,l,i),l=Qe?El:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dg(e,i,n);else if(e.tag===19)dg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&fc(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),ih(n,!1,f,i,d,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&fc(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}ih(n,!0,i,null,d,l);break;case"together":ih(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ka(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ii|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(hr(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=qa(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=qa(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function sh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function Pb(e,n,i){switch(n.tag){case 3:de(n,n.stateNode.containerInfo),Ti(n,kt,e.memoizedState.cache),Es();break;case 27:case 5:ye(n);break;case 4:de(n,n.stateNode.containerInfo);break;case 10:Ti(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Mf(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ci(n),n.flags|=128,null):(i&n.child.childLanes)!==0?hg(e,n,i):(Ci(n),e=Ka(e,n,i),e!==null?e.sibling:null);Ci(n);break;case 19:var f=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(hr(e,n,i,!1),l=(i&n.childLanes)!==0),f){if(l)return mg(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,rg(e,n,i,n.pendingProps);case 24:Ti(n,kt,e.memoizedState.cache)}return Ka(e,n,i)}function pg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Bt=!0;else{if(!sh(e,i)&&(n.flags&128)===0)return Bt=!1,Pb(e,n,i);Bt=(e.flags&131072)!==0}else Bt=!1,Qe&&(n.flags&1048576)!==0&&Xm(n,El,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=As(n.elementType),n.type=e,typeof e=="function")uf(e)?(l=Ms(e,l),n.tag=1,n=ug(null,n,e,l,i)):(n.tag=0,n=Jf(null,n,e,l,i));else{if(e!=null){var f=e.$$typeof;if(f===ie){n.tag=11,n=ag(null,n,e,l,i);break e}else if(f===M){n.tag=14,n=ig(null,n,e,l,i);break e}}throw n=Ue(e)||e,Error(s(306,n,""))}}return n;case 0:return Jf(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,f=Ms(l,n.pendingProps),ug(e,n,l,f,i);case 3:e:{if(de(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;f=d.element,wf(e,n),Ml(n,l,null,i);var y=n.memoizedState;if(l=y.cache,Ti(n,kt,l),l!==d.cache&&_f(n,[kt],i,!0),Rl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=fg(e,n,l,i);break e}else if(l!==f){f=Un(Error(s(424)),n),Tl(f),n=fg(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(gt=Hn(e.firstChild),Jt=n,Qe=!0,xi=null,Gn=!0,i=rp(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Es(),l===f){n=Ka(e,n,i);break e}en(e,n,l,i)}n=n.child}return n;case 26:return Ec(e,n),e===null?(i=A0(n.type,null,n.pendingProps,null))?n.memoizedState=i:Qe||(i=n.type,e=n.pendingProps,l=Uc(_e.current).createElement(i),l[Ot]=n,l[Ft]=e,tn(l,i,e),Vt(l),n.stateNode=l):n.memoizedState=A0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ye(n),e===null&&Qe&&(l=n.stateNode=T0(n.type,n.pendingProps,_e.current),Jt=n,Gn=!0,f=gt,ki(n.type)?(Bh=f,gt=Hn(l.firstChild)):gt=f),en(e,n,n.pendingProps.children,i),Ec(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Qe&&((f=l=gt)&&(l=y1(l,n.type,n.pendingProps,Gn),l!==null?(n.stateNode=l,Jt=n,gt=Hn(l.firstChild),Gn=!1,f=!0):f=!1),f||Ei(n)),ye(n),f=n.type,d=n.pendingProps,y=e!==null?e.memoizedProps:null,l=d.children,Oh(f,d)?l=null:y!==null&&Oh(f,y)&&(n.flags|=32),n.memoizedState!==null&&(f=Df(e,n,Db,null,null,i),$l._currentValue=f),Ec(e,n),en(e,n,l,i),n.child;case 6:return e===null&&Qe&&((e=i=gt)&&(i=v1(i,n.pendingProps,Gn),i!==null?(n.stateNode=i,Jt=n,gt=null,e=!0):e=!1),e||Ei(n)),null;case 13:return hg(e,n,i);case 4:return de(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Ns(n,null,l,i):en(e,n,l,i),n.child;case 11:return ag(e,n,n.type,n.pendingProps,i);case 7:return en(e,n,n.pendingProps,i),n.child;case 8:return en(e,n,n.pendingProps.children,i),n.child;case 12:return en(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,Ti(n,n.type,l.value),en(e,n,l.children,i),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,Ss(n),f=Wt(f),l=l(f),n.flags|=1,en(e,n,l,i),n.child;case 14:return ig(e,n,n.type,n.pendingProps,i);case 15:return sg(e,n,n.type,n.pendingProps,i);case 19:return mg(e,n,i);case 31:return zb(e,n,i);case 22:return rg(e,n,i,n.pendingProps);case 24:return Ss(n),l=Wt(kt),e===null?(f=Ef(),f===null&&(f=mt,d=bf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=i),f=d),n.memoizedState={parent:l,cache:f},Sf(n),Ti(n,kt,f)):((e.lanes&i)!==0&&(wf(e,n),Ml(n,null,null,i),Rl()),f=e.memoizedState,d=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Ti(n,kt,l)):(l=d.cache,Ti(n,kt,l),l!==f.cache&&_f(n,[kt],i,!0))),en(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function $a(e){e.flags|=4}function rh(e,n,i,l,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Gg())e.flags|=8192;else throw Cs=lc,Tf}else e.flags&=-16777217}function gg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!I0(n))if(Gg())e.flags|=8192;else throw Cs=lc,Tf}function Sc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Mo():536870912,e.lanes|=n,Sr|=n)}function kl(e,n){if(!Qe)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function Gb(e,n,i){var l=n.pendingProps;switch(mf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(n),null;case 1:return yt(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Qa(kt),Re(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fr(n)?$a(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),yt(n),null;case 26:var f=n.type,d=n.memoizedState;return e===null?($a(n),d!==null?(yt(n),gg(n,d)):(yt(n),rh(n,f,null,l,i))):d?d!==e.memoizedState?($a(n),yt(n),gg(n,d)):(yt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&$a(n),yt(n),rh(n,f,e,l,i)),null;case 27:if(Ce(n),i=_e.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}e=ge.current,fr(n)?Km(n):(e=T0(f,l,i),n.stateNode=e,$a(n))}return yt(n),null;case 5:if(Ce(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}if(d=ge.current,fr(n))Km(n);else{var y=Uc(_e.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(f,{is:l.is}):y.createElement(f)}}d[Ot]=n,d[Ft]=l;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=d;e:switch(tn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$a(n)}}return yt(n),rh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=_e.current,fr(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,f=Jt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Ot]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||h0(e.nodeValue,i)),e||Ei(n,!0)}else e=Uc(e).createTextNode(l),e[Ot]=n,n.stateNode=e}return yt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(l=fr(n),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ot]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),e=!1}else i=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(Nn(n),n):(Nn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return yt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=fr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ot]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),f=!1}else f=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Nn(n),n):(Nn(n),null)}return Nn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Sc(n,n.updateQueue),yt(n),null);case 4:return Re(),e===null&&Nh(n.stateNode.containerInfo),yt(n),null;case 10:return Qa(n.type),yt(n),null;case 19:if(ae(Ct),l=n.memoizedState,l===null)return yt(n),null;if(f=(n.flags&128)!==0,d=l.rendering,d===null)if(f)kl(l,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=fc(e),d!==null){for(n.flags|=128,kl(l,!1),e=d.updateQueue,n.updateQueue=e,Sc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Hm(i,e),i=i.sibling;return ue(Ct,Ct.current&1|2),Qe&&Ha(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&It()>Rc&&(n.flags|=128,f=!0,kl(l,!1),n.lanes=4194304)}else{if(!f)if(e=fc(d),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Sc(n,e),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qe)return yt(n),null}else 2*It()-l.renderingStartTime>Rc&&i!==536870912&&(n.flags|=128,f=!0,kl(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=It(),e.sibling=null,i=Ct.current,ue(Ct,f?i&1|2:i&1),Qe&&Ha(n,l.treeForkCount),e):(yt(n),null);case 22:case 23:return Nn(n),Rf(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(yt(n),n.subtreeFlags&6&&(n.flags|=8192)):yt(n),i=n.updateQueue,i!==null&&Sc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&ae(ws),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Qa(kt),yt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function qb(e,n){switch(mf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Qa(kt),Re(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ce(n),null;case 31:if(n.memoizedState!==null){if(Nn(n),n.alternate===null)throw Error(s(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ae(Ct),null;case 4:return Re(),null;case 10:return Qa(n.type),null;case 22:case 23:return Nn(n),Rf(),e!==null&&ae(ws),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Qa(kt),null;case 25:return null;default:return null}}function yg(e,n){switch(mf(n),n.tag){case 3:Qa(kt),Re();break;case 26:case 27:case 5:Ce(n);break;case 4:Re();break;case 31:n.memoizedState!==null&&Nn(n);break;case 13:Nn(n);break;case 19:ae(Ct);break;case 10:Qa(n.type);break;case 22:case 23:Nn(n),Rf(),e!==null&&ae(ws);break;case 24:Qa(kt)}}function Ll(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&e)===e){l=void 0;var d=i.create,y=i.inst;l=d(),y.destroy=l}i=i.next}while(i!==f)}}catch(T){ot(n,n.return,T)}}function Ri(e,n,i){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var y=l.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,f=n;var I=i,H=T;try{H()}catch(Z){ot(f,I,Z)}}}l=l.next}while(l!==d)}}catch(Z){ot(n,n.return,Z)}}function vg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{op(n,i)}catch(l){ot(e,e.return,l)}}}function _g(e,n,i){i.props=Ms(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){ot(e,n,l)}}function Bl(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(f){ot(e,n,f)}}function Ma(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){ot(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){ot(e,n,f)}else i.current=null}function bg(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){ot(e,e.return,f)}}function lh(e,n,i){try{var l=e.stateNode;f1(l,e.type,i,n),l[Ft]=n}catch(f){ot(e,e.return,f)}}function xg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ki(e.type)||e.tag===4}function oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ch(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Jn));else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(ch(e,n,i),e=e.sibling;e!==null;)ch(e,n,i),e=e.sibling}function wc(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(wc(e,n,i),e=e.sibling;e!==null;)wc(e,n,i),e=e.sibling}function Eg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);tn(n,l,i),n[Ot]=e,n[Ft]=i}catch(d){ot(e,e.return,d)}}var Za=!1,Ut=!1,uh=!1,Tg=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Hb(e,n){if(e=e.containerInfo,Ih=Qc,e=jm(e),nf(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,T=-1,I=-1,H=0,Z=0,ee=e,Q=null;t:for(;;){for(var K;ee!==i||f!==0&&ee.nodeType!==3||(T=y+f),ee!==d||l!==0&&ee.nodeType!==3||(I=y+l),ee.nodeType===3&&(y+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Q=ee,ee=K;for(;;){if(ee===e)break t;if(Q===i&&++H===f&&(T=y),Q===d&&++Z===l&&(I=y),(K=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=K}i=T===-1||I===-1?null:{start:T,end:I}}else i=null}i=i||{start:0,end:0}}else i=null;for(Dh={focusedElem:e,selectionRange:i},Qc=!1,Xt=n;Xt!==null;)if(n=Xt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Xt=e;else for(;Xt!==null;){switch(n=Xt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=n,f=d.memoizedProps,d=d.memoizedState,l=i.stateNode;try{var be=Ms(i.type,f);e=l.getSnapshotBeforeUpdate(be,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){ot(i,i.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)jh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Xt=e;break}Xt=n.return}}function Sg(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Wa(e,i),l&4&&Ll(5,i);break;case 1:if(Wa(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){ot(i,i.return,y)}else{var f=Ms(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ot(i,i.return,y)}}l&64&&vg(i),l&512&&Bl(i,i.return);break;case 3:if(Wa(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{op(e,n)}catch(y){ot(i,i.return,y)}}break;case 27:n===null&&l&4&&Eg(i);case 26:case 5:Wa(e,i),n===null&&l&4&&bg(i),l&512&&Bl(i,i.return);break;case 12:Wa(e,i);break;case 31:Wa(e,i),l&4&&Cg(e,i);break;case 13:Wa(e,i),l&4&&Ng(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Wb.bind(null,i),_1(e,i))));break;case 22:if(l=i.memoizedState!==null||Za,!l){n=n!==null&&n.memoizedState!==null||Ut,f=Za;var d=Ut;Za=l,(Ut=n)&&!d?ei(e,i,(i.subtreeFlags&8772)!==0):Wa(e,i),Za=f,Ut=d}break;case 30:break;default:Wa(e,i)}}function wg(e){var n=e.alternate;n!==null&&(e.alternate=null,wg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ys(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,gn=!1;function Ja(e,n,i){for(i=i.child;i!==null;)Ag(e,n,i),i=i.sibling}function Ag(e,n,i){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(En,i)}catch{}switch(i.tag){case 26:Ut||Ma(i,n),Ja(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ut||Ma(i,n);var l=bt,f=gn;ki(i.type)&&(bt=i.stateNode,gn=!1),Ja(e,n,i),Xl(i.stateNode),bt=l,gn=f;break;case 5:Ut||Ma(i,n);case 6:if(l=bt,f=gn,bt=null,Ja(e,n,i),bt=l,gn=f,bt!==null)if(gn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(i.stateNode)}catch(d){ot(i,n,d)}else try{bt.removeChild(i.stateNode)}catch(d){ot(i,n,d)}break;case 18:bt!==null&&(gn?(e=bt,v0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Dr(e)):v0(bt,i.stateNode));break;case 4:l=bt,f=gn,bt=i.stateNode.containerInfo,gn=!0,Ja(e,n,i),bt=l,gn=f;break;case 0:case 11:case 14:case 15:Ri(2,i,n),Ut||Ri(4,i,n),Ja(e,n,i);break;case 1:Ut||(Ma(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&_g(i,n,l)),Ja(e,n,i);break;case 21:Ja(e,n,i);break;case 22:Ut=(l=Ut)||i.memoizedState!==null,Ja(e,n,i),Ut=l;break;default:Ja(e,n,i)}}function Cg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Dr(e)}catch(i){ot(n,n.return,i)}}}function Ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Dr(e)}catch(i){ot(n,n.return,i)}}function Fb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Tg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Tg),n;default:throw Error(s(435,e.tag))}}function Ac(e,n){var i=Fb(e);n.forEach(function(l){if(!i.has(l)){i.add(l);var f=e1.bind(null,e,l);l.then(f,f)}})}function yn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],d=e,y=n,T=y;e:for(;T!==null;){switch(T.tag){case 27:if(ki(T.type)){bt=T.stateNode,gn=!1;break e}break;case 5:bt=T.stateNode,gn=!1;break e;case 3:case 4:bt=T.stateNode.containerInfo,gn=!0;break e}T=T.return}if(bt===null)throw Error(s(160));Ag(d,y,f),bt=null,gn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Rg(n,e),n=n.sibling}var ia=null;function Rg(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),vn(e),l&4&&(Ri(3,e,e.return),Ll(3,e),Ri(5,e,e.return));break;case 1:yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),l&64&&Za&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=ia;if(yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),l&4){var d=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[ga]||d[Ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),tn(d,l,i),d[Ot]=e,Vt(d),l=d;break e;case"link":var y=R0("link","href",f).get(l+(i.href||""));if(y){for(var T=0;T<y.length;T++)if(d=y[T],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(T,1);break t}}d=f.createElement(l),tn(d,l,i),f.head.appendChild(d);break;case"meta":if(y=R0("meta","content",f).get(l+(i.content||""))){for(T=0;T<y.length;T++)if(d=y[T],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(T,1);break t}}d=f.createElement(l),tn(d,l,i),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ot]=e,Vt(d),l=d}e.stateNode=l}else M0(f,e.type,e.stateNode);else e.stateNode=N0(f,l,e.memoizedProps);else d!==l?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,l===null?M0(f,e.type,e.stateNode):N0(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&lh(e,e.memoizedProps,i.memoizedProps)}break;case 27:yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),i!==null&&l&4&&lh(e,e.memoizedProps,i.memoizedProps);break;case 5:if(yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),e.flags&32){f=e.stateNode;try{pn(f,"")}catch(be){ot(e,e.return,be)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,lh(e,f,i!==null?i.memoizedProps:f)),l&1024&&(uh=!0);break;case 6:if(yn(n,e),vn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(be){ot(e,e.return,be)}}break;case 3:if(Gc=null,f=ia,ia=zc(n.containerInfo),yn(n,e),ia=f,vn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Dr(n.containerInfo)}catch(be){ot(e,e.return,be)}uh&&(uh=!1,Mg(e));break;case 4:l=ia,ia=zc(e.stateNode.containerInfo),yn(n,e),vn(e),ia=l;break;case 12:yn(n,e),vn(e);break;case 31:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ac(e,l)));break;case 13:yn(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Nc=It()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ac(e,l)));break;case 22:f=e.memoizedState!==null;var I=i!==null&&i.memoizedState!==null,H=Za,Z=Ut;if(Za=H||f,Ut=Z||I,yn(n,e),Ut=Z,Za=H,vn(e),l&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||I||Za||Ut||Is(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){I=i=n;try{if(d=I.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=I.stateNode;var ee=I.memoizedProps.style,Q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(be){ot(I,I.return,be)}}}else if(n.tag===6){if(i===null){I=n;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(be){ot(I,I.return,be)}}}else if(n.tag===18){if(i===null){I=n;try{var K=I.stateNode;f?_0(K,!0):_0(I.stateNode,!1)}catch(be){ot(I,I.return,be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Ac(e,i))));break;case 19:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ac(e,l)));break;case 30:break;case 21:break;default:yn(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(xg(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,d=oh(e);wc(e,d,f);break;case 5:var y=i.stateNode;i.flags&32&&(pn(y,""),i.flags&=-33);var T=oh(e);wc(e,T,y);break;case 3:case 4:var I=i.stateNode.containerInfo,H=oh(e);ch(e,H,I);break;default:throw Error(s(161))}}catch(Z){ot(e,e.return,Z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Mg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Mg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wa(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Sg(e,n.alternate,n),n=n.sibling}function Is(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ri(4,n,n.return),Is(n);break;case 1:Ma(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&_g(n,n.return,i),Is(n);break;case 27:Xl(n.stateNode);case 26:case 5:Ma(n,n.return),Is(n);break;case 22:n.memoizedState===null&&Is(n);break;case 30:Is(n);break;default:Is(n)}e=e.sibling}}function ei(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=e,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:ei(f,d,i),Ll(4,d);break;case 1:if(ei(f,d,i),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){ot(l,l.return,H)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)lp(I[f],T)}catch(H){ot(l,l.return,H)}}i&&y&64&&vg(d),Bl(d,d.return);break;case 27:Eg(d);case 26:case 5:ei(f,d,i),i&&l===null&&y&4&&bg(d),Bl(d,d.return);break;case 12:ei(f,d,i);break;case 31:ei(f,d,i),i&&y&4&&Cg(f,d);break;case 13:ei(f,d,i),i&&y&4&&Ng(f,d);break;case 22:d.memoizedState===null&&ei(f,d,i),Bl(d,d.return);break;case 30:break;default:ei(f,d,i)}n=n.sibling}}function fh(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Sl(i))}function hh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e))}function sa(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ig(e,n,i,l),n=n.sibling}function Ig(e,n,i,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:sa(e,n,i,l),f&2048&&Ll(9,n);break;case 1:sa(e,n,i,l);break;case 3:sa(e,n,i,l),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e)));break;case 12:if(f&2048){sa(e,n,i,l),e=n.stateNode;try{var d=n.memoizedProps,y=d.id,T=d.onPostCommit;typeof T=="function"&&T(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ot(n,n.return,I)}}else sa(e,n,i,l);break;case 31:sa(e,n,i,l);break;case 13:sa(e,n,i,l);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?sa(e,n,i,l):Ul(e,n):d._visibility&2?sa(e,n,i,l):(d._visibility|=2,xr(e,n,i,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&fh(y,n);break;case 24:sa(e,n,i,l),f&2048&&hh(n.alternate,n);break;default:sa(e,n,i,l)}}function xr(e,n,i,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,y=n,T=i,I=l,H=y.flags;switch(y.tag){case 0:case 11:case 15:xr(d,y,T,I,f),Ll(8,y);break;case 23:break;case 22:var Z=y.stateNode;y.memoizedState!==null?Z._visibility&2?xr(d,y,T,I,f):Ul(d,y):(Z._visibility|=2,xr(d,y,T,I,f)),f&&H&2048&&fh(y.alternate,y);break;case 24:xr(d,y,T,I,f),f&&H&2048&&hh(y.alternate,y);break;default:xr(d,y,T,I,f)}n=n.sibling}}function Ul(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,f=l.flags;switch(l.tag){case 22:Ul(i,l),f&2048&&fh(l.alternate,l);break;case 24:Ul(i,l),f&2048&&hh(l.alternate,l);break;default:Ul(i,l)}n=n.sibling}}var zl=8192;function Er(e,n,i){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)Dg(e,n,i),e=e.sibling}function Dg(e,n,i){switch(e.tag){case 26:Er(e,n,i),e.flags&zl&&e.memoizedState!==null&&I1(i,ia,e.memoizedState,e.memoizedProps);break;case 5:Er(e,n,i);break;case 3:case 4:var l=ia;ia=zc(e.stateNode.containerInfo),Er(e,n,i),ia=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,Er(e,n,i),zl=l):Er(e,n,i));break;default:Er(e,n,i)}}function Og(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Pl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,jg(l,e)}Og(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vg(e),e=e.sibling}function Vg(e){switch(e.tag){case 0:case 11:case 15:Pl(e),e.flags&2048&&Ri(9,e,e.return);break;case 3:Pl(e);break;case 12:Pl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Cc(e)):Pl(e);break;default:Pl(e)}}function Cc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,jg(l,e)}Og(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ri(8,n,n.return),Cc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Cc(n));break;default:Cc(n)}e=e.sibling}}function jg(e,n){for(;Xt!==null;){var i=Xt;switch(i.tag){case 0:case 11:case 15:Ri(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Xt=l;else e:for(i=e;Xt!==null;){l=Xt;var f=l.sibling,d=l.return;if(wg(l),l===i){Xt=null;break e}if(f!==null){f.return=d,Xt=f;break e}Xt=d}}}var Qb={getCacheForType:function(e){var n=Wt(kt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Wt(kt).controller.signal}},Xb=typeof WeakMap=="function"?WeakMap:Map,tt=0,mt=null,ze=null,Ge=0,lt=0,Rn=null,Mi=!1,Tr=!1,dh=!1,ti=0,Tt=0,Ii=0,Ds=0,mh=0,Mn=0,Sr=0,Gl=null,_n=null,ph=!1,Nc=0,kg=0,Rc=1/0,Mc=null,Di=null,qt=0,Oi=null,wr=null,ni=0,gh=0,yh=null,Lg=null,ql=0,vh=null;function In(){return(tt&2)!==0&&Ge!==0?Ge&-Ge:X.T!==null?Sh():Io()}function Bg(){if(Mn===0)if((Ge&536870912)===0||Qe){var e=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),Mn=e}else Mn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Mn}function bn(e,n,i){(e===mt&&(lt===2||lt===9)||e.cancelPendingCommit!==null)&&(Ar(e,0),Vi(e,Ge,Mn,!1)),rs(e,i),((tt&2)===0||e!==mt)&&(e===mt&&((tt&2)===0&&(Ds|=i),Tt===4&&Vi(e,Ge,Mn,!1)),Ia(e))}function Ug(e,n,i){if((tt&6)!==0)throw Error(s(327));var l=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Kn(e,n),f=l?$b(e,n):bh(e,n,!0),d=l;do{if(f===0){Tr&&!l&&Vi(e,n,0,!1);break}else{if(i=e.current.alternate,d&&!Yb(i)){f=bh(e,n,!1),d=!1;continue}if(f===2){if(d=n,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var T=e;f=Gl;var I=T.current.memoizedState.isDehydrated;if(I&&(Ar(T,y).flags|=256),y=bh(T,y,!1),y!==2){if(dh&&!I){T.errorRecoveryDisabledLanes|=d,Ds|=d,f=4;break e}d=_n,_n=f,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){Ar(e,0),Vi(e,n,0,!0);break}e:{switch(l=e,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Vi(l,n,Mn,!Mi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=Nc+300-It(),10<f)){if(Vi(l,n,Mn,!Mi),da(l,0,!0)!==0)break e;ni=n,l.timeoutHandle=g0(zg.bind(null,l,i,_n,Mc,ph,n,Mn,Ds,Sr,Mi,d,"Throttled",-0,0),f);break e}zg(l,i,_n,Mc,ph,n,Mn,Ds,Sr,Mi,d,null,-0,0)}}break}while(!0);Ia(e)}function zg(e,n,i,l,f,d,y,T,I,H,Z,ee,Q,K){if(e.timeoutHandle=-1,ee=n.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Dg(n,d,ee);var be=(d&62914560)===d?Nc-It():(d&4194048)===d?kg-It():0;if(be=D1(ee,be),be!==null){ni=d,e.cancelPendingCommit=be(Yg.bind(null,e,n,d,i,l,f,y,T,I,Z,ee,null,Q,K)),Vi(e,d,y,!H);return}}Yg(e,n,d,i,l,f,y,T,I)}function Yb(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],d=f.getSnapshot;f=f.value;try{if(!wn(d(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Vi(e,n,i,l){n&=~mh,n&=~Ds,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var f=n;0<f;){var d=31-wt(f),y=1<<d;l[d]=-1,f&=~y}i!==0&&ls(e,i,n)}function Ic(){return(tt&6)===0?(Hl(0),!1):!0}function _h(){if(ze!==null){if(lt===0)var e=ze.return;else e=ze,Fa=Ts=null,jf(e),gr=null,Al=0,e=ze;for(;e!==null;)yg(e.alternate,e),e=e.return;ze=null}}function Ar(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,m1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ni=0,_h(),mt=e,ze=i=qa(e.current,null),Ge=n,lt=0,Rn=null,Mi=!1,Tr=Kn(e,n),dh=!1,Sr=Mn=mh=Ds=Ii=Tt=0,_n=Gl=null,ph=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var f=31-wt(l),d=1<<f;n|=e[f],l&=~d}return ti=n,Jo(),i}function Pg(e,n){ke=null,X.H=Vl,n===pr||n===rc?(n=ap(),lt=3):n===Tf?(n=ap(),lt=4):lt=n===Zf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Rn=n,ze===null&&(Tt=1,bc(e,Un(n,e.current)))}function Gg(){var e=Cn.current;return e===null?!0:(Ge&4194048)===Ge?qn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===qn:!1}function qg(){var e=X.H;return X.H=Vl,e===null?Vl:e}function Hg(){var e=X.A;return X.A=Qb,e}function Dc(){Tt=4,Mi||(Ge&4194048)!==Ge&&Cn.current!==null||(Tr=!0),(Ii&134217727)===0&&(Ds&134217727)===0||mt===null||Vi(mt,Ge,Mn,!1)}function bh(e,n,i){var l=tt;tt|=2;var f=qg(),d=Hg();(mt!==e||Ge!==n)&&(Mc=null,Ar(e,n)),n=!1;var y=Tt;e:do try{if(lt!==0&&ze!==null){var T=ze,I=Rn;switch(lt){case 8:_h(),y=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(n=!0);var H=lt;if(lt=0,Rn=null,Cr(e,T,I,H),i&&Tr){y=0;break e}break;default:H=lt,lt=0,Rn=null,Cr(e,T,I,H)}}Kb(),y=Tt;break}catch(Z){Pg(e,Z)}while(!0);return n&&e.shellSuspendCounter++,Fa=Ts=null,tt=l,X.H=f,X.A=d,ze===null&&(mt=null,Ge=0,Jo()),y}function Kb(){for(;ze!==null;)Fg(ze)}function $b(e,n){var i=tt;tt|=2;var l=qg(),f=Hg();mt!==e||Ge!==n?(Mc=null,Rc=It()+500,Ar(e,n)):Tr=Kn(e,n);e:do try{if(lt!==0&&ze!==null){n=ze;var d=Rn;t:switch(lt){case 1:lt=0,Rn=null,Cr(e,n,d,1);break;case 2:case 9:if(tp(d)){lt=0,Rn=null,Qg(n);break}n=function(){lt!==2&&lt!==9||mt!==e||(lt=7),Ia(e)},d.then(n,n);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:tp(d)?(lt=0,Rn=null,Qg(n)):(lt=0,Rn=null,Cr(e,n,d,7));break;case 5:var y=null;switch(ze.tag){case 26:y=ze.memoizedState;case 5:case 27:var T=ze;if(y?I0(y):T.stateNode.complete){lt=0,Rn=null;var I=T.sibling;if(I!==null)ze=I;else{var H=T.return;H!==null?(ze=H,Oc(H)):ze=null}break t}}lt=0,Rn=null,Cr(e,n,d,5);break;case 6:lt=0,Rn=null,Cr(e,n,d,6);break;case 8:_h(),Tt=6;break e;default:throw Error(s(462))}}Zb();break}catch(Z){Pg(e,Z)}while(!0);return Fa=Ts=null,X.H=l,X.A=f,tt=i,ze!==null?0:(mt=null,Ge=0,Jo(),Tt)}function Zb(){for(;ze!==null&&!as();)Fg(ze)}function Fg(e){var n=pg(e.alternate,e,ti);e.memoizedProps=e.pendingProps,n===null?Oc(e):ze=n}function Qg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=cg(i,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=cg(i,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:jf(n);default:yg(i,n),n=ze=Hm(n,ti),n=pg(i,n,ti)}e.memoizedProps=e.pendingProps,n===null?Oc(e):ze=n}function Cr(e,n,i,l){Fa=Ts=null,jf(n),gr=null,Al=0;var f=n.return;try{if(Ub(e,f,n,i,Ge)){Tt=1,bc(e,Un(i,e.current)),ze=null;return}}catch(d){if(f!==null)throw ze=f,d;Tt=1,bc(e,Un(i,e.current)),ze=null;return}n.flags&32768?(Qe||l===1?e=!0:Tr||(Ge&536870912)!==0?e=!1:(Mi=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Xg(n,e)):Oc(n)}function Oc(e){var n=e;do{if((n.flags&32768)!==0){Xg(n,Mi);return}e=n.return;var i=Gb(n.alternate,n,ti);if(i!==null){ze=i;return}if(n=n.sibling,n!==null){ze=n;return}ze=n=e}while(n!==null);Tt===0&&(Tt=5)}function Xg(e,n){do{var i=qb(e.alternate,e);if(i!==null){i.flags&=32767,ze=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ze=e;return}ze=e=i}while(e!==null);Tt=6,ze=null}function Yg(e,n,i,l,f,d,y,T,I){e.cancelPendingCommit=null;do Vc();while(qt!==0);if((tt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=of,Ju(e,i,d,y,T,I),e===mt&&(ze=mt=null,Ge=0),wr=n,Oi=e,ni=i,gh=d,yh=f,Lg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,t1(ua,function(){return Wg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=oe.p,oe.p=2,y=tt,tt|=4;try{Hb(e,n,i)}finally{tt=y,oe.p=f,X.T=l}}qt=1,Kg(),$g(),Zg()}}function Kg(){if(qt===1){qt=0;var e=Oi,n=wr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var l=oe.p;oe.p=2;var f=tt;tt|=4;try{Rg(n,e);var d=Dh,y=jm(e.containerInfo),T=d.focusedElem,I=d.selectionRange;if(y!==T&&T&&T.ownerDocument&&Vm(T.ownerDocument.documentElement,T)){if(I!==null&&nf(T)){var H=I.start,Z=I.end;if(Z===void 0&&(Z=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(Z,T.value.length);else{var ee=T.ownerDocument||document,Q=ee&&ee.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),be=T.textContent.length,Ne=Math.min(I.start,be),ht=I.end===void 0?Ne:Math.min(I.end,be);!K.extend&&Ne>ht&&(y=ht,ht=Ne,Ne=y);var z=Om(T,Ne),k=Om(T,ht);if(z&&k&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==k.node||K.focusOffset!==k.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),K.removeAllRanges(),Ne>ht?(K.addRange(q),K.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),K.addRange(q))}}}}for(ee=[],K=T;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var J=ee[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Qc=!!Ih,Dh=Ih=null}finally{tt=f,oe.p=l,X.T=i}}e.current=n,qt=2}}function $g(){if(qt===2){qt=0;var e=Oi,n=wr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var l=oe.p;oe.p=2;var f=tt;tt|=4;try{Sg(e,n.alternate,n)}finally{tt=f,oe.p=l,X.T=i}}qt=3}}function Zg(){if(qt===4||qt===3){qt=0,ci();var e=Oi,n=wr,i=ni,l=Lg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qt=5:(qt=0,wr=Oi=null,Jg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Di=null),Ua(i),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(En,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,f=oe.p,oe.p=2,X.T=null;try{for(var d=e.onRecoverableError,y=0;y<l.length;y++){var T=l[y];d(T.value,{componentStack:T.stack})}}finally{X.T=n,oe.p=f}}(ni&3)!==0&&Vc(),Ia(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===vh?ql++:(ql=0,vh=e):ql=0,Hl(0)}}function Jg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Sl(n)))}function Vc(){return Kg(),$g(),Zg(),Wg()}function Wg(){if(qt!==5)return!1;var e=Oi,n=gh;gh=0;var i=Ua(ni),l=X.T,f=oe.p;try{oe.p=32>i?32:i,X.T=null,i=yh,yh=null;var d=Oi,y=ni;if(qt=0,wr=Oi=null,ni=0,(tt&6)!==0)throw Error(s(331));var T=tt;if(tt|=4,Vg(d.current),Ig(d,d.current,y,i),tt=T,Hl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(En,d)}catch{}return!0}finally{oe.p=f,X.T=l,Jg(e,n)}}function e0(e,n,i){n=Un(i,n),n=$f(e.stateNode,n,2),e=Ai(e,n,2),e!==null&&(rs(e,2),Ia(e))}function ot(e,n,i){if(e.tag===3)e0(e,e,i);else for(;n!==null;){if(n.tag===3){e0(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Di===null||!Di.has(l))){e=Un(i,e),i=tg(2),l=Ai(n,i,2),l!==null&&(ng(i,l,n,e),rs(l,2),Ia(l));break}}n=n.return}}function xh(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Xb;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(i)||(dh=!0,f.add(i),e=Jb.bind(null,e,n,i),n.then(e,e))}function Jb(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,mt===e&&(Ge&i)===i&&(Tt===4||Tt===3&&(Ge&62914560)===Ge&&300>It()-Nc?(tt&2)===0&&Ar(e,0):mh|=i,Sr===Ge&&(Sr=0)),Ia(e)}function t0(e,n){n===0&&(n=Mo()),e=bs(e,n),e!==null&&(rs(e,n),Ia(e))}function Wb(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),t0(e,i)}function e1(e,n){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),t0(e,i)}function t1(e,n){return $e(e,n)}var jc=null,Nr=null,Eh=!1,kc=!1,Th=!1,ji=0;function Ia(e){e!==Nr&&e.next===null&&(Nr===null?jc=Nr=e:Nr=Nr.next=e),kc=!0,Eh||(Eh=!0,a1())}function Hl(e,n){if(!Th&&kc){Th=!0;do for(var i=!1,l=jc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var y=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-wt(42|e)+1)-1,d&=f&~(y&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,s0(l,d))}else d=Ge,d=da(l,l===mt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Kn(l,d)||(i=!0,s0(l,d));l=l.next}while(i);Th=!1}}function n1(){n0()}function n0(){kc=Eh=!1;var e=0;ji!==0&&d1()&&(e=ji);for(var n=It(),i=null,l=jc;l!==null;){var f=l.next,d=a0(l,n);d===0?(l.next=null,i===null?jc=f:i.next=f,f===null&&(Nr=i)):(i=l,(e!==0||(d&3)!==0)&&(kc=!0)),l=f}qt!==0&&qt!==5||Hl(e),ji!==0&&(ji=0)}function a0(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-wt(d),T=1<<y,I=f[y];I===-1?((T&i)===0||(T&l)!==0)&&(f[y]=Zu(T,n)):I<=n&&(e.expiredLanes|=T),d&=~T}if(n=mt,i=Ge,i=da(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(lt===2||lt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&fn(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Kn(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&fn(l),Ua(i)){case 2:case 8:i=it;break;case 32:i=ua;break;case 268435456:i=is;break;default:i=ua}return l=i0.bind(null,e),i=$e(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&fn(l),e.callbackPriority=2,e.callbackNode=null,2}function i0(e,n){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Vc()&&e.callbackNode!==i)return null;var l=Ge;return l=da(e,e===mt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ug(e,l,n),a0(e,It()),e.callbackNode!=null&&e.callbackNode===i?i0.bind(null,e):null)}function s0(e,n){if(Vc())return null;Ug(e,n,!0)}function a1(){p1(function(){(tt&6)!==0?$e(ca,n1):n0()})}function Sh(){if(ji===0){var e=dr;e===0&&(e=fa,fa<<=1,(fa&261888)===0&&(fa=256)),ji=e}return ji}function r0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Js(""+e)}function l0(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function i1(e,n,i,l,f){if(n==="submit"&&i&&i.stateNode===f){var d=r0((f[Ft]||null).action),y=l.submitter;y&&(n=(n=y[Ft]||null)?r0(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var T=new Sa("action","action",null,l,f);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ji!==0){var I=y?l0(f,y):new FormData(f);Hf(i,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=y?l0(f,y):new FormData(f),Hf(i,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var wh=0;wh<lf.length;wh++){var Ah=lf[wh],s1=Ah.toLowerCase(),r1=Ah[0].toUpperCase()+Ah.slice(1);aa(s1,"on"+r1)}aa(Bm,"onAnimationEnd"),aa(Um,"onAnimationIteration"),aa(zm,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(Eb,"onTransitionRun"),aa(Tb,"onTransitionStart"),aa(Sb,"onTransitionCancel"),aa(Pm,"onTransitionEnd"),ba("onMouseEnter",["mouseout","mouseover"]),ba("onMouseLeave",["mouseout","mouseover"]),ba("onPointerEnter",["pointerout","pointerover"]),ba("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function o0(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var y=l.length-1;0<=y;y--){var T=l[y],I=T.instance,H=T.currentTarget;if(T=T.listener,I!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=H;try{d(f)}catch(Z){Zo(Z)}f.currentTarget=null,d=I}else for(y=0;y<l.length;y++){if(T=l[y],I=T.instance,H=T.currentTarget,T=T.listener,I!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=H;try{d(f)}catch(Z){Zo(Z)}f.currentTarget=null,d=I}}}}function Pe(e,n){var i=n[Xs];i===void 0&&(i=n[Xs]=new Set);var l=e+"__bubble";i.has(l)||(c0(n,e,2,!1),i.add(l))}function Ch(e,n,i){var l=0;n&&(l|=4),c0(i,e,l,n)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Nh(e){if(!e[Lc]){e[Lc]=!0,al.forEach(function(i){i!=="selectionchange"&&(l1.has(i)||Ch(i,!1,e),Ch(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Lc]||(n[Lc]=!0,Ch("selectionchange",!1,n))}}function c0(e,n,i,l){switch(B0(n)){case 2:var f=j1;break;case 8:f=k1;break;default:f=qh}i=f.bind(null,n,i,e),f=void 0,!hs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Rh(e,n,i,l,f){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var T=l.stateNode.containerInfo;if(T===f)break;if(y===4)for(y=l.return;y!==null;){var I=y.tag;if((I===3||I===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;T!==null;){if(y=ya(T),y===null)return;if(I=y.tag,I===5||I===6||I===26||I===27){l=d=y;continue e}T=T.parentNode}}l=l.return}gi(function(){var H=d,Z=jn(i),ee=[];e:{var Q=Gm.get(e);if(Q!==void 0){var K=Sa,be=e;switch(e){case"keypress":if(ms(i)===0)break e;case"keydown":case"keyup":K=Yo;break;case"focusin":be="focus",K=gs;break;case"focusout":be="blur",K=gs;break;case"beforeblur":case"afterblur":K=gs;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=p;break;case Bm:case Um:case zm:K=Po;break;case Pm:K=w;break;case"scroll":case"scrollend":K=pl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ga;break;case"toggle":case"beforetoggle":K=je}var Ne=(n&4)!==0,ht=!Ne&&(e==="scroll"||e==="scrollend"),z=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var k=H,q;k!==null;){var J=k;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||z===null||(J=Wn(k,z),J!=null&&Ne.push(Ql(k,J,q))),ht)break;k=k.return}0<Ne.length&&(Q=new K(Q,be,null,i,Z),ee.push({event:Q,listeners:Ne}))}}if((n&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&i!==hl&&(be=i.relatedTarget||i.fromElement)&&(ya(be)||be[pa]))break e;if((K||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(be=i.relatedTarget||i.toElement,K=H,be=be?ya(be):null,be!==null&&(ht=c(be),Ne=be.tag,be!==ht||Ne!==5&&Ne!==27&&Ne!==6)&&(be=null)):(K=null,be=H),K!==be)){if(Ne=gl,J="onMouseLeave",z="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=Ga,J="onPointerLeave",z="onPointerEnter",k="pointer"),ht=K==null?Q:Tn(K),q=be==null?Q:Tn(be),Q=new Ne(J,k+"leave",K,i,Z),Q.target=ht,Q.relatedTarget=q,J=null,ya(Z)===H&&(Ne=new Ne(z,k+"enter",be,i,Z),Ne.target=q,Ne.relatedTarget=ht,J=Ne),ht=J,K&&be)t:{for(Ne=o1,z=K,k=be,q=0,J=z;J;J=Ne(J))q++;J=0;for(var Se=k;Se;Se=Ne(Se))J++;for(;0<q-J;)z=Ne(z),q--;for(;0<J-q;)k=Ne(k),J--;for(;q--;){if(z===k||k!==null&&z===k.alternate){Ne=z;break t}z=Ne(z),k=Ne(k)}Ne=null}else Ne=null;K!==null&&u0(ee,Q,K,Ne,!1),be!==null&&ht!==null&&u0(ee,ht,be,Ne,!0)}}e:{if(Q=H?Tn(H):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var Ze=Cm;else if(wm(Q))if(Nm)Ze=_b;else{Ze=yb;var Ee=gb}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&Zs(H.elementType)&&(Ze=Cm):Ze=vb;if(Ze&&(Ze=Ze(e,H))){Am(ee,Ze,i,Z);break e}Ee&&Ee(e,Q,H),e==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&cl(Q,"number",Q.value)}switch(Ee=H?Tn(H):window,e){case"focusin":(wm(Ee)||Ee.contentEditable==="true")&&(sr=Ee,af=H,xl=null);break;case"focusout":xl=af=sr=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,km(ee,i,Z);break;case"selectionchange":if(xb)break;case"keydown":case"keyup":km(ee,i,Z)}var Le;if(et)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ir?ys(e,i)&&(qe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(qe="onCompositionStart");qe&&(Ca&&i.locale!=="ko"&&(ir||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ir&&(Le=ml()):(Ta=Z,dl="value"in Ta?Ta.value:Ta.textContent,ir=!0)),Ee=Bc(H,qe),0<Ee.length&&(qe=new Aa(qe,e,null,i,Z),ee.push({event:qe,listeners:Ee}),Le?qe.data=Le:(Le=ar(i),Le!==null&&(qe.data=Le)))),(Le=Ln?hb(e,i):db(e,i))&&(qe=Bc(H,"onBeforeInput"),0<qe.length&&(Ee=new Aa("onBeforeInput","beforeinput",null,i,Z),ee.push({event:Ee,listeners:qe}),Ee.data=Le)),i1(ee,e,H,i,Z)}o0(ee,n)})}function Ql(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Bc(e,n){for(var i=n+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Wn(e,i),f!=null&&l.unshift(Ql(e,f,d)),f=Wn(e,n),f!=null&&l.push(Ql(e,f,d))),e.tag===3)return l;e=e.return}return[]}function o1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function u0(e,n,i,l,f){for(var d=n._reactName,y=[];i!==null&&i!==l;){var T=i,I=T.alternate,H=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||H===null||(I=H,f?(H=Wn(i,d),H!=null&&y.unshift(Ql(i,H,I))):f||(H=Wn(i,d),H!=null&&y.push(Ql(i,H,I)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var c1=/\r\n?/g,u1=/\u0000|\uFFFD/g;function f0(e){return(typeof e=="string"?e:""+e).replace(c1,`
`).replace(u1,"")}function h0(e,n){return n=f0(n),f0(e)===n}function ft(e,n,i,l,f,d){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||pn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&pn(e,""+l);break;case"className":Sn(e,"class",l);break;case"tabIndex":Sn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(e,i,l);break;case"style":fl(e,l,d);break;case"data":if(n!=="object"){Sn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Js(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(n!=="input"&&ft(e,n,"name",f.name,f,null),ft(e,n,"formEncType",f.formEncType,f,null),ft(e,n,"formMethod",f.formMethod,f,null),ft(e,n,"formTarget",f.formTarget,f,null)):(ft(e,n,"encType",f.encType,f,null),ft(e,n,"method",f.method,f,null),ft(e,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Js(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Js(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Pe("beforetoggle",e),Pe("toggle",e),Ks(e,"popover",l);break;case"xlinkActuate":jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ks(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bo.get(i)||i,Ks(e,i,l))}}function Mh(e,n,i,l,f,d){switch(i){case"style":fl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?pn(e,l):(typeof l=="number"||typeof l=="bigint")&&pn(e,""+l);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),d=e[Ft]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(n,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,f);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Ks(e,i,l)}}}function tn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",e),Pe("load",e);var l=!1,f=!1,d;for(d in i)if(i.hasOwnProperty(d)){var y=i[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ft(e,n,d,y,i,null)}}f&&ft(e,n,"srcSet",i.srcSet,i,null),l&&ft(e,n,"src",i.src,i,null);return;case"input":Pe("invalid",e);var T=d=y=f=null,I=null,H=null;for(l in i)if(i.hasOwnProperty(l)){var Z=i[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":y=Z;break;case"checked":I=Z;break;case"defaultChecked":H=Z;break;case"value":d=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,n));break;default:ft(e,n,l,Z,i,null)}}jo(e,d,T,I,H,y,f,!1);return;case"select":Pe("invalid",e),l=y=d=null;for(f in i)if(i.hasOwnProperty(f)&&(T=i[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":y=T;break;case"multiple":l=T;default:ft(e,n,f,T,i,null)}n=d,i=y,e.multiple=!!l,n!=null?hi(e,!!l,n,!1):i!=null&&hi(e,!!l,i,!0);return;case"textarea":Pe("invalid",e),d=f=l=null;for(y in i)if(i.hasOwnProperty(y)&&(T=i[y],T!=null))switch(y){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:ft(e,n,y,T,i,null)}di(e,l,f,d);return;case"option":for(I in i)if(i.hasOwnProperty(I)&&(l=i[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(e,n,I,l,i,null)}return;case"dialog":Pe("beforetoggle",e),Pe("toggle",e),Pe("cancel",e),Pe("close",e);break;case"iframe":case"object":Pe("load",e);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Pe(Fl[l],e);break;case"image":Pe("error",e),Pe("load",e);break;case"details":Pe("toggle",e);break;case"embed":case"source":case"link":Pe("error",e),Pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(l=i[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ft(e,n,H,l,i,null)}return;default:if(Zs(n)){for(Z in i)i.hasOwnProperty(Z)&&(l=i[Z],l!==void 0&&Mh(e,n,Z,l,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(l=i[T],l!=null&&ft(e,n,T,l,i,null))}function f1(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,T=null,I=null,H=null,Z=null;for(K in i){var ee=i[K];if(i.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=ee;default:l.hasOwnProperty(K)||ft(e,n,K,null,l,ee)}}for(var Q in l){var K=l[Q];if(ee=i[Q],l.hasOwnProperty(Q)&&(K!=null||ee!=null))switch(Q){case"type":d=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":Z=K;break;case"value":y=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==ee&&ft(e,n,Q,K,l,ee)}}$s(e,y,T,I,H,Z,d,f);return;case"select":K=y=T=Q=null;for(d in i)if(I=i[d],i.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":K=I;default:l.hasOwnProperty(d)||ft(e,n,d,null,l,I)}for(f in l)if(d=l[f],I=i[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":Q=d;break;case"defaultValue":T=d;break;case"multiple":y=d;default:d!==I&&ft(e,n,f,d,l,I)}n=T,i=y,l=K,Q!=null?hi(e,!!i,Q,!1):!!l!=!!i&&(n!=null?hi(e,!!i,n,!0):hi(e,!!i,i?[]:"",!1));return;case"textarea":K=Q=null;for(T in i)if(f=i[T],i.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ft(e,n,T,null,l,f)}for(y in l)if(f=l[y],d=i[y],l.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":Q=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&ft(e,n,y,f,l,d)}ko(e,Q,K);return;case"option":for(var be in i)if(Q=i[be],i.hasOwnProperty(be)&&Q!=null&&!l.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:ft(e,n,be,null,l,Q)}for(I in l)if(Q=l[I],K=i[I],l.hasOwnProperty(I)&&Q!==K&&(Q!=null||K!=null))switch(I){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ft(e,n,I,Q,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in i)Q=i[Ne],i.hasOwnProperty(Ne)&&Q!=null&&!l.hasOwnProperty(Ne)&&ft(e,n,Ne,null,l,Q);for(H in l)if(Q=l[H],K=i[H],l.hasOwnProperty(H)&&Q!==K&&(Q!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:ft(e,n,H,Q,l,K)}return;default:if(Zs(n)){for(var ht in i)Q=i[ht],i.hasOwnProperty(ht)&&Q!==void 0&&!l.hasOwnProperty(ht)&&Mh(e,n,ht,void 0,l,Q);for(Z in l)Q=l[Z],K=i[Z],!l.hasOwnProperty(Z)||Q===K||Q===void 0&&K===void 0||Mh(e,n,Z,Q,l,K);return}}for(var z in i)Q=i[z],i.hasOwnProperty(z)&&Q!=null&&!l.hasOwnProperty(z)&&ft(e,n,z,null,l,Q);for(ee in l)Q=l[ee],K=i[ee],!l.hasOwnProperty(ee)||Q===K||Q==null&&K==null||ft(e,n,ee,Q,l,K)}function d0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function h1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var f=i[l],d=f.transferSize,y=f.initiatorType,T=f.duration;if(d&&T&&d0(y)){for(y=0,T=f.responseEnd,l+=1;l<i.length;l++){var I=i[l],H=I.startTime;if(H>T)break;var Z=I.transferSize,ee=I.initiatorType;Z&&d0(ee)&&(I=I.responseEnd,y+=Z*(I<T?1:(T-H)/(I-H)))}if(--l,n+=8*(d+y)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ih=null,Dh=null;function Uc(e){return e.nodeType===9?e:e.ownerDocument}function m0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Oh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vh=null;function d1(){var e=window.event;return e&&e.type==="popstate"?e===Vh?!1:(Vh=e,!0):(Vh=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,m1=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,p1=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(e){return y0.resolve(null).then(e).catch(g1)}:g0;function g1(e){setTimeout(function(){throw e})}function ki(e){return e==="head"}function v0(e,n){var i=n,l=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(f),Dr(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Xl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Xl(i);for(var d=i.firstChild;d;){var y=d.nextSibling,T=d.nodeName;d[ga]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=y}}else i==="body"&&Xl(e.ownerDocument.body);i=f}while(i);Dr(n)}function _0(e,n){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function jh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":jh(i),Ys(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function y1(e,n,i,l){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ga])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function v1(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Hn(e.nextSibling),e===null))return null;return e}function b0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Hn(e.nextSibling),e===null))return null;return e}function kh(e){return e.data==="$?"||e.data==="$~"}function Lh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _1(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Hn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bh=null;function x0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Hn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function E0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function T0(e,n,i){switch(n=Uc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Xl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ys(e)}var Fn=new Map,S0=new Set;function zc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ai=oe.d;oe.d={f:b1,r:x1,D:E1,C:T1,L:S1,m:w1,X:C1,S:A1,M:N1};function b1(){var e=ai.f(),n=Ic();return e||n}function x1(e){var n=Vn(e);n!==null&&n.tag===5&&n.type==="form"?Pp(n):ai.r(e)}var Rr=typeof document>"u"?null:document;function w0(e,n,i){var l=Rr;if(l&&typeof n=="string"&&n){var f=mn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),S0.has(f)||(S0.add(f),e={rel:e,crossOrigin:i,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function E1(e){ai.D(e),w0("dns-prefetch",e,null)}function T1(e,n){ai.C(e,n),w0("preconnect",e,n)}function S1(e,n,i){ai.L(e,n,i);var l=Rr;if(l&&e&&n){var f='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+mn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+mn(i.imageSizes)+'"]')):f+='[href="'+mn(e)+'"]';var d=f;switch(n){case"style":d=Mr(e);break;case"script":d=Ir(e)}Fn.has(d)||(e=E({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Fn.set(d,e),l.querySelector(f)!==null||n==="style"&&l.querySelector(Yl(d))||n==="script"&&l.querySelector(Kl(d))||(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function w1(e,n){ai.m(e,n);var i=Rr;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+mn(l)+'"][href="'+mn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ir(e)}if(!Fn.has(d)&&(e=E({rel:"modulepreload",href:e},n),Fn.set(d,e),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Kl(d)))return}l=i.createElement("link"),tn(l,"link",e),Vt(l),i.head.appendChild(l)}}}function A1(e,n,i){ai.S(e,n,i);var l=Rr;if(l&&e){var f=va(l).hoistableStyles,d=Mr(e);n=n||"default";var y=f.get(d);if(!y){var T={loading:0,preload:null};if(y=l.querySelector(Yl(d)))T.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Fn.get(d))&&Uh(e,i);var I=y=l.createElement("link");Vt(I),tn(I,"link",e),I._p=new Promise(function(H,Z){I.onload=H,I.onerror=Z}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Pc(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:T},f.set(d,y)}}}function C1(e,n){ai.X(e,n);var i=Rr;if(i&&e){var l=va(i).hoistableScripts,f=Ir(e),d=l.get(f);d||(d=i.querySelector(Kl(f)),d||(e=E({src:e,async:!0},n),(n=Fn.get(f))&&zh(e,n),d=i.createElement("script"),Vt(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function N1(e,n){ai.M(e,n);var i=Rr;if(i&&e){var l=va(i).hoistableScripts,f=Ir(e),d=l.get(f);d||(d=i.querySelector(Kl(f)),d||(e=E({src:e,async:!0,type:"module"},n),(n=Fn.get(f))&&zh(e,n),d=i.createElement("script"),Vt(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function A0(e,n,i,l){var f=(f=_e.current)?zc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Mr(i.href),i=va(f).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Mr(i.href);var d=va(f).hoistableStyles,y=d.get(e);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=f.querySelector(Yl(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Fn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Fn.set(e,i),d||R1(f,e,i,y.state))),n&&l===null)throw Error(s(528,""));return y}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ir(i),i=va(f).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Mr(e){return'href="'+mn(e)+'"'}function Yl(e){return'link[rel="stylesheet"]['+e+"]"}function C0(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function R1(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),tn(n,"link",i),Vt(n),e.head.appendChild(n))}function Ir(e){return'[src="'+mn(e)+'"]'}function Kl(e){return"script[async]"+e}function N0(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+mn(i.href)+'"]');if(l)return n.instance=l,Vt(l),l;var f=E({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Vt(l),tn(l,"style",f),Pc(l,i.precedence,e),n.instance=l;case"stylesheet":f=Mr(i.href);var d=e.querySelector(Yl(f));if(d)return n.state.loading|=4,n.instance=d,Vt(d),d;l=C0(i),(f=Fn.get(f))&&Uh(l,f),d=(e.ownerDocument||e).createElement("link"),Vt(d);var y=d;return y._p=new Promise(function(T,I){y.onload=T,y.onerror=I}),tn(d,"link",l),n.state.loading|=4,Pc(d,i.precedence,e),n.instance=d;case"script":return d=Ir(i.src),(f=e.querySelector(Kl(d)))?(n.instance=f,Vt(f),f):(l=i,(f=Fn.get(d))&&(l=E({},i),zh(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Vt(f),tn(f,"link",l),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Pc(l,i.precedence,e));return n.instance}function Pc(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,y=0;y<l.length;y++){var T=l[y];if(T.dataset.precedence===n)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Uh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Gc=null;function R0(e,n,i){if(Gc===null){var l=new Map,f=Gc=new Map;f.set(i,l)}else f=Gc,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var d=i[f];if(!(d[ga]||d[Ot]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=e+y;var T=l.get(y);T?T.push(d):l.set(y,[d])}}return l}function M0(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function M1(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function I0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function I1(e,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Mr(l.href),d=n.querySelector(Yl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=qc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=d,Vt(d);return}d=n.ownerDocument||n,l=C0(l),(f=Fn.get(f))&&Uh(l,f),d=d.createElement("link"),Vt(d);var y=d;y._p=new Promise(function(T,I){y.onload=T,y.onerror=I}),tn(d,"link",l),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=qc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Ph=0;function D1(e,n){return e.stylesheets&&e.count===0&&Fc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Fc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Ph===0&&(Ph=62500*h1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Ph?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hc=null;function Fc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hc=new Map,n.forEach(O1,e),Hc=null,qc.call(e))}function O1(e,n){if(!(n.state.loading&4)){var i=Hc.get(e);if(i)var l=i.get(null);else{i=new Map,Hc.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),l=y)}l&&i.set(null,l)}f=n.instance,y=f.getAttribute("data-precedence"),d=i.get(y)||l,d===l&&i.set(null,f),i.set(y,f),this.count++,l=qc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var $l={$$typeof:$,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function V1(e,n,i,l,f,d,y,T,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function D0(e,n,i,l,f,d,y,T,I,H,Z,ee){return e=new V1(e,n,i,y,I,H,Z,ee,T),n=1,d===!0&&(n|=24),d=An(3,null,null,n),e.current=d,d.stateNode=e,n=bf(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:i,cache:n},Sf(d),e}function O0(e){return e?(e=or,e):or}function V0(e,n,i,l,f,d){f=O0(f),l.context===null?l.context=f:l.pendingContext=f,l=wi(n),l.payload={element:i},d=d===void 0?null:d,d!==null&&(l.callback=d),i=Ai(e,l,n),i!==null&&(bn(i,e,n),Nl(i,e,n))}function j0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Gh(e,n){j0(e,n),(e=e.alternate)&&j0(e,n)}function k0(e){if(e.tag===13||e.tag===31){var n=bs(e,67108864);n!==null&&bn(n,e,67108864),Gh(e,67108864)}}function L0(e){if(e.tag===13||e.tag===31){var n=In();n=os(n);var i=bs(e,n);i!==null&&bn(i,e,n),Gh(e,n)}}var Qc=!0;function j1(e,n,i,l){var f=X.T;X.T=null;var d=oe.p;try{oe.p=2,qh(e,n,i,l)}finally{oe.p=d,X.T=f}}function k1(e,n,i,l){var f=X.T;X.T=null;var d=oe.p;try{oe.p=8,qh(e,n,i,l)}finally{oe.p=d,X.T=f}}function qh(e,n,i,l){if(Qc){var f=Hh(l);if(f===null)Rh(e,n,l,Xc,i),U0(e,l);else if(B1(f,e,n,i,l))l.stopPropagation();else if(U0(e,l),n&4&&-1<L1.indexOf(e)){for(;f!==null;){var d=Vn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=ha(d.pendingLanes);if(y!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var I=1<<31-wt(y);T.entanglements[1]|=I,y&=~I}Ia(d),(tt&6)===0&&(Rc=It()+500,Hl(0))}}break;case 31:case 13:T=bs(d,2),T!==null&&bn(T,d,2),Ic(),Gh(d,2)}if(d=Hh(l),d===null&&Rh(e,n,l,Xc,i),d===f)break;f=d}f!==null&&l.stopPropagation()}else Rh(e,n,l,null,i)}}function Hh(e){return e=jn(e),Fh(e)}var Xc=null;function Fh(e){if(Xc=null,e=ya(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=h(n),e!==null)return e;e=null}else if(i===31){if(e=m(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Xc=e,null}function B0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case ca:return 2;case it:return 8;case ua:case Hs:return 32;case is:return 268435456;default:return 32}default:return 32}}var Qh=!1,Li=null,Bi=null,Ui=null,Zl=new Map,Jl=new Map,zi=[],L1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U0(e,n){switch(e){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(n.pointerId)}}function Wl(e,n,i,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=Vn(n),n!==null&&k0(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function B1(e,n,i,l,f){switch(n){case"focusin":return Li=Wl(Li,e,n,i,l,f),!0;case"dragenter":return Bi=Wl(Bi,e,n,i,l,f),!0;case"mouseover":return Ui=Wl(Ui,e,n,i,l,f),!0;case"pointerover":var d=f.pointerId;return Zl.set(d,Wl(Zl.get(d)||null,e,n,i,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Jl.set(d,Wl(Jl.get(d)||null,e,n,i,l,f)),!0}return!1}function z0(e){var n=ya(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=h(i),n!==null){e.blockedOn=n,$n(e.priority,function(){L0(i)});return}}else if(n===31){if(n=m(i),n!==null){e.blockedOn=n,$n(e.priority,function(){L0(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Hh(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);hl=l,i.target.dispatchEvent(l),hl=null}else return n=Vn(i),n!==null&&k0(n),e.blockedOn=i,!1;n.shift()}return!0}function P0(e,n,i){Yc(e)&&i.delete(n)}function U1(){Qh=!1,Li!==null&&Yc(Li)&&(Li=null),Bi!==null&&Yc(Bi)&&(Bi=null),Ui!==null&&Yc(Ui)&&(Ui=null),Zl.forEach(P0),Jl.forEach(P0)}function Kc(e,n){e.blockedOn===n&&(e.blockedOn=null,Qh||(Qh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,U1)))}var $c=null;function G0(e){$c!==e&&($c=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$c===e&&($c=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],f=e[n+2];if(typeof l!="function"){if(Fh(l||i)===null)continue;break}var d=Vn(i);d!==null&&(e.splice(n,3),n-=3,Hf(d,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function Dr(e){function n(I){return Kc(I,e)}Li!==null&&Kc(Li,e),Bi!==null&&Kc(Bi,e),Ui!==null&&Kc(Ui,e),Zl.forEach(n),Jl.forEach(n);for(var i=0;i<zi.length;i++){var l=zi[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<zi.length&&(i=zi[0],i.blockedOn===null);)z0(i),i.blockedOn===null&&zi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],d=i[l+1],y=f[Ft]||null;if(typeof d=="function")y||G0(i);else if(y){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[Ft]||null)T=y.formAction;else if(Fh(f)!==null)continue}else T=y.action;typeof T=="function"?i[l+1]=T:(i.splice(l,3),l-=3),G0(i)}}}function q0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Xh(e){this._internalRoot=e}Zc.prototype.render=Xh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,l=In();V0(i,l,e,n,null,null)},Zc.prototype.unmount=Xh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;V0(e.current,2,null,e,null,null),Ic(),n[pa]=null}};function Zc(e){this._internalRoot=e}Zc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Io();e={blockedOn:null,target:e,priority:n};for(var i=0;i<zi.length&&n!==0&&n<zi[i].priority;i++);zi.splice(i,0,e),i===0&&z0(e)}};var H0=t.version;if(H0!=="19.2.1")throw Error(s(527,H0,"19.2.1"));oe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var z1={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{En=Jc.inject(z1),$t=Jc}catch{}}return eo.createRoot=function(e,n){if(!o(e))throw Error(s(299));var i=!1,l="",f=Zp,d=Jp,y=Wp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=D0(e,1,!1,null,null,i,l,null,f,d,y,q0),e[pa]=n.current,Nh(e),new Xh(n)},eo.hydrateRoot=function(e,n,i){if(!o(e))throw Error(s(299));var l=!1,f="",d=Zp,y=Jp,T=Wp,I=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.formState!==void 0&&(I=i.formState)),n=D0(e,1,!0,n,i??null,l,f,I,d,y,T,q0),n.context=O0(null),i=n.current,l=In(),l=os(l),f=wi(l),f.callback=null,Ai(i,f,l),i=l,n.current.lanes=i,rs(n,i),Ia(n),e[pa]=n.current,Nh(e),new Zc(n)},eo.version="19.2.1",eo}var Y0;function X1(){if(Y0)return Yh.exports;Y0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Yh.exports=Q1(),Yh.exports}var Y1=X1();function K1(r,t){let a;try{a=r()}catch{return}return{getItem:o=>{var c;const h=v=>v===null?null:JSON.parse(v,void 0),m=(c=a.getItem(o))!=null?c:null;return m instanceof Promise?m.then(h):h(m)},setItem:(o,c)=>a.setItem(o,JSON.stringify(c,void 0)),removeItem:o=>a.removeItem(o)}}const fd=r=>t=>{try{const a=r(t);return a instanceof Promise?a:{then(s){return fd(s)(a)},catch(s){return this}}}catch(a){return{then(s){return this},catch(s){return fd(s)(a)}}}},$1=(r,t)=>(a,s,o)=>{let c={storage:K1(()=>localStorage),partialize:F=>F,version:0,merge:(F,U)=>({...U,...F}),...t},h=!1;const m=new Set,v=new Set;let b=c.storage;if(!b)return r((...F)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...F)},s,o);const x=()=>{const F=c.partialize({...s()});return b.setItem(c.name,{state:F,version:c.version})},E=o.setState;o.setState=(F,U)=>(E(F,U),x());const A=r((...F)=>(a(...F),x()),s,o);o.getInitialState=()=>A;let L;const j=()=>{var F,U;if(!b)return;h=!1,m.forEach(W=>{var $;return W(($=s())!=null?$:A)});const V=((U=c.onRehydrateStorage)==null?void 0:U.call(c,(F=s())!=null?F:A))||void 0;return fd(b.getItem.bind(b))(c.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==c.version){if(c.migrate){const $=c.migrate(W.state,W.version);return $ instanceof Promise?$.then(ie=>[!0,ie]):[!0,$]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var $;const[ie,ce]=W;if(L=c.merge(ce,($=s())!=null?$:A),a(L,!0),ie)return x()}).then(()=>{V?.(L,void 0),L=s(),h=!0,v.forEach(W=>W(L))}).catch(W=>{V?.(void 0,W)})};return o.persist={setOptions:F=>{c={...c,...F},F.storage&&(b=F.storage)},clearStorage:()=>{b?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>j(),hasHydrated:()=>h,onHydrate:F=>(m.add(F),()=>{m.delete(F)}),onFinishHydration:F=>(v.add(F),()=>{v.delete(F)})},c.skipHydration||j(),L||A},vv=$1,nn=[];for(let r=0;r<256;++r)nn.push((r+256).toString(16).slice(1));function Z1(r,t=0){return(nn[r[t+0]]+nn[r[t+1]]+nn[r[t+2]]+nn[r[t+3]]+"-"+nn[r[t+4]]+nn[r[t+5]]+"-"+nn[r[t+6]]+nn[r[t+7]]+"-"+nn[r[t+8]]+nn[r[t+9]]+"-"+nn[r[t+10]]+nn[r[t+11]]+nn[r[t+12]]+nn[r[t+13]]+nn[r[t+14]]+nn[r[t+15]]).toLowerCase()}let Zh;const J1=new Uint8Array(16);function W1(){if(!Zh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zh=crypto.getRandomValues.bind(crypto)}return Zh(J1)}const ex=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),K0={randomUUID:ex};function tx(r,t,a){r=r||{};const s=r.random??r.rng?.()??W1();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Z1(s)}function Wc(r,t,a){return K0.randomUUID&&!r?K0.randomUUID():tx(r)}const me={COLUMNS:8,ROWS:16,CELL_SIZE:40},Jh={1:["red","blue","green","yellow","purple"],6:["red","blue","green","yellow","purple","cyan"],11:["red","blue","green","yellow","purple","cyan","pink"],16:["red","blue","green","yellow","purple","cyan","pink","orange"]},Bd={red:"#ff4757",blue:"#3742fa",green:"#2ed573",yellow:"#ffa502",purple:"#8854d0",cyan:"#00d2d3",pink:"#ff6b81",orange:"#ff7f50",rainbow:"linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff)"},nx={red:"#D55E00",blue:"#0072B2",green:"#009E73",yellow:"#F0E442",purple:"#CC79A7",cyan:"#56B4E9",pink:"#E69F00",orange:"#999999",rainbow:"linear-gradient(45deg, #D55E00, #0072B2, #009E73, #F0E442)"},ax={red:"striped",blue:"dotted",green:"crosshatch",yellow:"solid",purple:"diagonal",cyan:"grid",pink:"waves",orange:"circles",rainbow:"rainbow"},_v={normal:{name:"",icon:"",description:" ",baseChance:0,minLevel:1},bomb:{name:"",icon:"",description:" 3x3  ",baseChance:.05,minLevel:3,color:"#ff6b6b"},lightning:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:5,color:"#ffd93d"},cross:{name:"",icon:"",description:"    ",baseChance:.04,minLevel:4,color:"#6bcb77"},frozen:{name:"",icon:"",description:"2  ",baseChance:.06,minLevel:2,color:"#74b9ff"},stone:{name:"",icon:"",description:" ,    ",baseChance:.03,minLevel:6,color:"#636e72"},multiplier:{name:"",icon:"",description:"      2",baseChance:.035,minLevel:4,color:"#fdcb6e"},shuffle:{name:"",icon:"",description:"   3x3   ",baseChance:.02,minLevel:8,color:"#a29bfe"},colorShift:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:7,color:"#fd79a8"}},qi={BASE_DROP_SPEED:600,SPEED_DECREASE_PER_LEVEL:40,MIN_DROP_SPEED:80,FUSION_ANIMATION_DURATION:180,CHAIN_DELAY:120,COMBO_TIMEOUT:2e3,SPECIAL_EFFECT_DURATION:300,GARBAGE_INTERVAL:25},Da={BASE_POINTS_PER_BLOCK:10,CHAIN_BONUS_MULTIPLIER:150,COMBO_BONUS:75,MASS_FUSION_THRESHOLD:6,MASS_FUSION_BONUS_PER_BLOCK:30,PERFECT_CLEAR_BONUS:15e3,LEVEL_UP_THRESHOLD:1e3,SPECIAL_BLOCK_BONUS:50,FEVER_MULTIPLIER:3},hd={MIN_BLOCKS_TO_FUSE:4,BOMB_RADIUS:1};function ix(r){return hd.MIN_BLOCKS_TO_FUSE}const Vs={GAUGE_PER_CHAIN:10,GAUGE_PER_COMBO:5,MAX_GAUGE:100,DECAY_RATE:2},Ls={SPECIAL_CHANCE_PER_LEVEL:.006,GARBAGE_START_LEVEL:5,GARBAGE_ROWS_PER_INTERVAL:1,GARBAGE_MAX_ROWS:3,GARBAGE_INTERVAL_DECREASE:.5,GARBAGE_MIN_INTERVAL:10};function $0(r){return r>=30?8:r>=25?7:r>=20?6:r>=15?5:r>=10?4:r>=5?3:r>=3?2:1}const sx=[{offsets:[[0,0],[1,0]],name:"horizontal"},{offsets:[[0,0],[0,1]],name:"vertical"}],rx=[{offsets:[[0,0],[1,0],[2,0]],name:"line-h"},{offsets:[[0,0],[0,1],[0,2]],name:"line-v"},{offsets:[[0,0],[1,0],[1,1]],name:"L-right"},{offsets:[[0,0],[0,1],[1,1]],name:"L-left"},{offsets:[[1,0],[0,1],[1,1]],name:"L-up"},{offsets:[[0,0],[1,0],[0,1]],name:"corner"}],lx=[{offsets:[[0,0],[1,0],[2,0],[3,0]],name:"line-h4"},{offsets:[[0,0],[0,1],[0,2],[0,3]],name:"line-v4"},{offsets:[[0,0],[1,0],[0,1],[1,1]],name:"square"},{offsets:[[1,0],[0,1],[1,1],[2,1]],name:"T-down"},{offsets:[[0,0],[0,1],[1,1],[0,2]],name:"T-right"},{offsets:[[0,0],[1,0],[1,1],[2,1]],name:"zigzag"},{offsets:[[1,0],[0,1],[1,1],[1,2]],name:"plus"},{offsets:[[0,0],[1,0],[2,0],[1,1]],name:"arrow"}],ox=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0]],name:"line-h5"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2]],name:"L-big"},{offsets:[[0,0],[1,0],[2,0],[1,1],[1,2]],name:"T-long"},{offsets:[[1,0],[0,1],[1,1],[2,1],[1,2]],name:"cross"},{offsets:[[0,0],[1,0],[1,1],[2,1],[3,1]],name:"snake"},{offsets:[[0,0],[0,1],[1,1],[1,2],[2,2]],name:"stairs"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1]],name:"P-shape"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1]],name:"U-shape"}],cx=[{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1]],name:"rect-2x3"},{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0]],name:"line-h6"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"tree"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2],[0,3]],name:"L-huge"},{offsets:[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],name:"tower"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"H-shape"}],ux=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0]],name:"line-h7"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],name:"diamond"},{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"arrow-big"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"window"},{offsets:[[1,0],[0,1],[1,1],[2,1],[3,1],[1,2],[1,3]],name:"anchor"}],fx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[0,1],[1,1],[2,1],[3,1]],name:"rect-2x4"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[3,1],[1,2],[2,2]],name:"bone"},{offsets:[[0,0],[1,0],[2,0],[0,1],[2,1],[0,2],[1,2],[2,2]],name:"frame"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2],[1,3]],name:"big-cross"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1],[3,1],[2,2],[3,2]],name:"zigzag-big"}];function hx(r){let t;switch(r){case 2:t=sx;break;case 3:t=rx;break;case 4:t=lx;break;case 5:t=ox;break;case 6:t=cx;break;case 7:t=ux;break;case 8:t=fx;break;default:return{offsets:[[0,0]],name:"single"}}return t[Math.floor(Math.random()*t.length)]}function dx(r){const t=qi.GARBAGE_INTERVAL-(r-Ls.GARBAGE_START_LEVEL)*Ls.GARBAGE_INTERVAL_DECREASE;return Math.max(t,Ls.GARBAGE_MIN_INTERVAL)}function Z0(r){const t=[];return t.push({type:"score",target:r*500+(r-1)*200,current:0,completed:!1}),r>=3&&t.push({type:"clearBlocks",target:20+r*5,current:0,completed:!1}),r>=5&&t.push({type:"chains",target:Math.min(3+Math.floor(r/3),8),current:0,completed:!1}),r>=7&&t.push({type:"clearSpecial",target:3+Math.floor(r/4),current:0,completed:!1}),r>=10&&t.push({type:"clearStone",target:2+Math.floor(r/5),current:0,completed:!1}),t}const pu={getMovesForLevel:r=>Math.max(10,25-Math.floor(r/2)),getTargetScore:r=>500+r*300+Math.floor(r/3)*200,getTargetBlocks:r=>15+r*5,getColorCount:r=>r<=3?4:r<=6?5:r<=10?6:7};function J0(r){const t=[];if(t.push({type:"score",target:pu.getTargetScore(r),current:0,completed:!1}),r>=2&&t.push({type:"clearBlocks",target:pu.getTargetBlocks(r),current:0,completed:!1}),r>=5&&t.push({type:"chains",target:2+Math.floor(r/3),current:0,completed:!1}),r>=8){const a=["red","blue","green","yellow","purple"],s=a[r%a.length];t.push({type:"clearColor",target:10+r,current:0,color:s,completed:!1})}return t}const mx={colorBomb:{name:" ",description:"    ",icon:"",price:{coins:500,gems:20}},rowClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},columnClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},gravityShift:{name:" ",description:"  ",icon:"",price:{coins:600,gems:25}},timeSlow:{name:" ",description:"5 50%  ",icon:"",price:{coins:300,gems:10}},rainbowBlock:{name:" ",description:"    ",icon:"",price:{coins:800,gems:30}},scoreMultiplier:{name:" ",description:"30  2",icon:"",price:{coins:700,gems:28}},blockPreview:{name:"",description:"10  ",icon:"",price:{coins:200,gems:8}},undo:{name:"",description:" 3 ",icon:"",price:{coins:500,gems:20}},freeze:{name:"",description:"5   ",icon:"",price:{coins:400,gems:15}}},dd={down:{dx:0,dy:1},up:{dx:0,dy:-1},left:{dx:-1,dy:0},right:{dx:1,dy:0}},px={down:"",up:"",left:"",right:""},gx=5,bv={classic:{name:"",description:" !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1},timeAttack:{name:"",description:"2   !",icon:"",hasTimeLimit:!0,timeLimit:120,hasLevelLimit:!1},puzzle:{name:"",description:"   ",icon:"",hasTimeLimit:!1,hasLevelLimit:!0,movesLimit:30},zen:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,noGameOver:!0},daily:{name:" ",description:"  !",icon:"",hasTimeLimit:!0,timeLimit:180,hasLevelLimit:!1},survival:{name:"",description:"  !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,speedIncrease:!0},challenge:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,hasObjectives:!0}},Gi={SWIPE_THRESHOLD:30,FAST_SWIPE_VELOCITY:1e3,LONG_PRESS_DURATION:500,DOUBLE_TAP_DELAY:300},yx={light:[10],medium:[20],heavy:[30],success:[10,50,20],error:[30,50,30],selection:[5]};function Ud(r){const t=Object.keys(Jh).map(Number).sort((a,s)=>s-a);for(const a of t)if(r>=a)return Jh[a];return Jh[1]}function W0(r){const t=qi.BASE_DROP_SPEED-(r-1)*qi.SPEED_DECREASE_PER_LEVEL;return Math.max(t,qi.MIN_DROP_SPEED)}function vx(r){return Da.LEVEL_UP_THRESHOLD*r+(r-1)*200}function _x(r){return Math.min(.15,.05+r*Ls.SPECIAL_CHANCE_PER_LEVEL)}function ey(r){const t=Object.entries(_v).filter(([o,c])=>o!=="normal"&&r>=c.minLevel).map(([o,c])=>({type:o,chance:c.baseChance}));if(t.length===0)return"normal";const a=t.reduce((o,c)=>o+c.chance,0);let s=Math.random()*a;for(const{type:o,chance:c}of t)if(s-=c,s<=0)return o;return t[0].type}function bx(r){const{blocksCleared:t,chainCount:a,comboCount:s,level:o,powerUpMultiplier:c,perfectClear:h,isFeverMode:m=!1,specialBlocksCleared:v=0}=r;let b=t*Da.BASE_POINTS_PER_BLOCK*o;const x=a>1?Math.pow(a,2.5)*Da.CHAIN_BONUS_MULTIPLIER:0,E=s*Da.COMBO_BONUS*(1+s*.1),A=t>=Da.MASS_FUSION_THRESHOLD?t*Da.MASS_FUSION_BONUS_PER_BLOCK*Math.floor(t/Da.MASS_FUSION_THRESHOLD):0,L=v*Da.SPECIAL_BLOCK_BONUS*o,j=h?Da.PERFECT_CLEAR_BONUS*o:0,F=m?Da.FEVER_MULTIPLIER:1;return Math.floor((b+x+E+A+L+j)*c*F)}const xx=[{id:"score_10k",name:"",description:"10,000 ",category:"score",target:1e4,reward:{gems:10},icon:""},{id:"score_50k",name:"",description:"50,000 ",category:"score",target:5e4,reward:{gems:25},icon:""},{id:"score_100k",name:"",description:"100,000 ",category:"score",target:1e5,reward:{gems:50},icon:""},{id:"score_500k",name:"",description:"500,000 ",category:"score",target:5e5,reward:{gems:100},icon:""},{id:"score_1m",name:"",description:"1,000,000 ",category:"score",target:1e6,reward:{gems:200,skin:"score_master"},icon:""},{id:"score_5m",name:"",description:"5,000,000 ",category:"score",target:5e6,reward:{gems:500},icon:""},{id:"score_10m",name:"",description:"10,000,000 ",category:"score",target:1e7,reward:{gems:1e3,skin:"mythic_legend"},icon:""},{id:"combo_10",name:" ",description:"10  ",category:"combo",target:10,reward:{gems:10},icon:""},{id:"combo_20",name:" ",description:"20  ",category:"combo",target:20,reward:{gems:25},icon:""},{id:"combo_30",name:" ",description:"30  ",category:"combo",target:30,reward:{gems:50},icon:""},{id:"combo_50",name:" ",description:"50  ",category:"combo",target:50,reward:{gems:100,skin:"combo_legend"},icon:""},{id:"combo_100",name:" ",description:"100  ",category:"combo",target:100,reward:{gems:300},icon:""},{id:"chain_5",name:" ",description:"5 ",category:"chain",target:5,reward:{gems:15},icon:""},{id:"chain_10",name:" ",description:"10 ",category:"chain",target:10,reward:{gems:50},icon:""},{id:"chain_15",name:" ",description:"15 ",category:"chain",target:15,reward:{gems:150,skin:"chain_master"},icon:""},{id:"chain_20",name:" ",description:"20 ",category:"chain",target:20,reward:{gems:300},icon:""},{id:"perfect_clear",name:"!",description:"  ",category:"special",target:1,reward:{gems:100},icon:""},{id:"comeback",name:" ",description:"  ",category:"special",target:1,reward:{gems:75},icon:""},{id:"speed_demon",name:" ",description:"1  50,000",category:"special",target:1,reward:{gems:100},icon:""},{id:"no_powerup",name:"",description:"   20",category:"special",target:1,reward:{gems:150},icon:""},{id:"all_colors",name:"",description:"5   ",category:"special",target:1,reward:{gems:50},icon:""},{id:"first_blood",name:" ",description:"  ",category:"special",target:1,reward:{gems:5},icon:""},{id:"marathon",name:"",description:"30  ",category:"special",target:1,reward:{gems:80},icon:""},{id:"games_10",name:"",description:"10 ",category:"play",target:10,reward:{coins:500},icon:""},{id:"games_100",name:"",description:"100 ",category:"play",target:100,reward:{gems:50},icon:""},{id:"games_500",name:"",description:"500 ",category:"play",target:500,reward:{gems:200},icon:""},{id:"games_1000",name:"",description:"1000 ",category:"play",target:1e3,reward:{gems:500},icon:""},{id:"time_1h",name:"",description:" 1 ",category:"play",target:3600,reward:{coins:1e3},icon:""},{id:"time_10h",name:"",description:" 10 ",category:"play",target:36e3,reward:{gems:100},icon:""},{id:"time_100h",name:" ",description:" 100 ",category:"play",target:36e4,reward:{gems:1e3,skin:"veteran"},icon:""},{id:"secret_gravity",name:"???",description:"   ",category:"hidden",target:1,reward:{gems:50},icon:""},{id:"secret_lucky",name:"???",description:" 3  ",category:"hidden",target:1,reward:{gems:100},icon:""},{id:"secret_developer",name:"???",description:"  ",category:"hidden",target:1,reward:{gems:200},icon:""}];function Ex(){return xx.map(r=>({...r,current:0,completed:!1,claimed:!1}))}const ho={classic:{colors:["#ff4757","#3742fa","#2ed573","#ffa502","#8854d0"],borderRadius:"4px",borderWidth:0,borderStyle:"none",innerEffect:"glossy",animation:"none",glowIntensity:0,texture:"none"},neon:{colors:["#ff0080","#00ffff","#39ff14","#ffff00","#bf00ff"],borderRadius:"2px",borderWidth:2,borderStyle:"solid",innerEffect:"glow",animation:"pulse",glowIntensity:.8,texture:"none"},candy:{colors:["#ff6b9d","#a855f7","#4ade80","#fbbf24","#fb923c"],borderRadius:"50%",borderWidth:3,borderStyle:"solid",innerEffect:"glass",animation:"none",glowIntensity:.2,texture:"none"},pixel:{colors:["#dc2626","#2563eb","#16a34a","#ca8a04","#7c3aed"],borderRadius:"0px",borderWidth:3,borderStyle:"solid",innerEffect:"flat",animation:"none",glowIntensity:0,texture:"lines"},galaxy:{colors:["#8b5cf6","#ec4899","#06b6d4","#f43f5e","#3b82f6"],borderRadius:"6px",borderWidth:1,borderStyle:"solid",innerEffect:"gradient",animation:"shimmer",glowIntensity:.5,texture:"dots"},crystal:{colors:["#f0abfc","#a5f3fc","#bbf7d0","#fef08a","#fecaca"],borderRadius:"8px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.6,texture:"cracks"},holographic:{colors:["#f472b6","#c084fc","#60a5fa","#34d399","#fbbf24"],borderRadius:"4px",borderWidth:1,borderStyle:"solid",innerEffect:"metallic",animation:"shimmer",glowIntensity:.7,texture:"lines"},animated_fire:{colors:["#ef4444","#f97316","#eab308","#dc2626","#fb923c"],borderRadius:"4px",borderWidth:0,borderStyle:"none",innerEffect:"glow",animation:"fire",particleEffect:!0,glowIntensity:.9,texture:"noise"},animated_ice:{colors:["#38bdf8","#67e8f9","#a5f3fc","#22d3ee","#0ea5e9"],borderRadius:"2px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"ice",particleEffect:!0,glowIntensity:.6,texture:"cracks"},animated_electric:{colors:["#facc15","#a3e635","#22d3ee","#e879f9","#fbbf24"],borderRadius:"4px",borderWidth:2,borderStyle:"solid",innerEffect:"glow",animation:"electric",particleEffect:!0,glowIntensity:1,texture:"circuit"}};Object.fromEntries(Object.entries(ho).map(([r,t])=>[r,t.colors]));const md=[{id:"classic",name:"",price:0,currency:"free",rarity:"common",owned:!0,equipped:!0},{id:"neon",name:"",price:1e3,currency:"coins",rarity:"common",owned:!1,equipped:!1},{id:"candy",name:"",price:2e3,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"pixel",name:"",price:2500,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"galaxy",name:"",price:100,currency:"gems",rarity:"rare",owned:!1,equipped:!1},{id:"crystal",name:"",price:200,currency:"gems",rarity:"epic",owned:!1,equipped:!1},{id:"holographic",name:"",price:500,currency:"gems",rarity:"legendary",owned:!1,equipped:!1},{id:"animated_fire",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_ice",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_electric",name:"",price:1e3,currency:"gems",rarity:"mythic",owned:!1,equipped:!1,animated:!0}],gu=[{id:"dark",name:"",description:"  ",price:0,currency:"free",owned:!0,equipped:!0,colors:{background:"#0a0a1a",backgroundGradient:"radial-gradient(circle at 50% 10%, #1a1a40 0%, #050510 60%)",panel:"#1a1a2e",panelBorder:"rgba(255,255,255,0.1)",accent:"#4a9eff",text:"#ffffff",textSecondary:"#888888",danger:"#ff4757",success:"#2ed573"}},{id:"light",name:"",description:"  ",price:500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#e8e8f0",backgroundGradient:"linear-gradient(180deg, #f5f5fa 0%, #e0e0ea 100%)",panel:"#ffffff",panelBorder:"rgba(0,0,0,0.1)",accent:"#3742fa",text:"#1a1a2e",textSecondary:"#666666",danger:"#dc3545",success:"#28a745"}},{id:"ocean",name:"",description:"   ",price:1500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#0a1628",backgroundGradient:"radial-gradient(ellipse at bottom, #0a2463 0%, #0a1628 50%, #030811 100%)",panel:"#162d50",panelBorder:"rgba(0,210,211,0.3)",accent:"#00d2d3",text:"#e0f7fa",textSecondary:"#80deea",danger:"#ff6b6b",success:"#00e676"}},{id:"forest",name:"",description:"  ",price:150,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0a1a0a",backgroundGradient:"radial-gradient(circle at 30% 80%, #1a3a1a 0%, #0a1a0a 60%)",panel:"#1a2e1a",panelBorder:"rgba(46,213,115,0.3)",accent:"#2ed573",text:"#e8f5e9",textSecondary:"#a5d6a7",danger:"#ff7043",success:"#76ff03"}},{id:"sunset",name:"",description:"  ",price:200,currency:"gems",owned:!1,equipped:!1,colors:{background:"#1a0a1a",backgroundGradient:"linear-gradient(180deg, #2d1b3d 0%, #1a0a1a 50%, #0d0508 100%)",panel:"#2e1a2e",panelBorder:"rgba(255,107,129,0.3)",accent:"#ff6b81",text:"#fce4ec",textSecondary:"#f48fb1",danger:"#ff1744",success:"#ffab40"}},{id:"space",name:"",description:"  ",price:300,currency:"gems",owned:!1,equipped:!1,colors:{background:"#050510",backgroundGradient:"radial-gradient(ellipse at 20% 20%, #1a0a30 0%, #050510 40%, #000005 100%)",panel:"#0a0a20",panelBorder:"rgba(136,84,208,0.4)",accent:"#8854d0",text:"#ede7f6",textSecondary:"#b39ddb",danger:"#ff4081",success:"#7c4dff"}},{id:"cyberpunk",name:"",description:"   ",price:500,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0d0d1a",backgroundGradient:"linear-gradient(135deg, #0d0d1a 0%, #1a0a2e 50%, #0d0d1a 100%)",panel:"#1a1a33",panelBorder:"rgba(255,0,255,0.4)",accent:"#ff00ff",text:"#f0f0ff",textSecondary:"#ce93d8",danger:"#ff1744",success:"#00ff88"}},{id:"cherry",name:"",description:"  ",price:400,currency:"gems",owned:!1,equipped:!1,colors:{background:"#1a0f14",backgroundGradient:"radial-gradient(circle at 70% 30%, #3d1f2e 0%, #1a0f14 60%)",panel:"#2d1a24",panelBorder:"rgba(255,183,197,0.3)",accent:"#ffb7c5",text:"#fff0f3",textSecondary:"#f8bbd0",danger:"#ff5252",success:"#ff8a80"}},{id:"gold",name:"",description:"  ",price:800,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0f0d08",backgroundGradient:"radial-gradient(circle at 50% 50%, #2a2210 0%, #0f0d08 70%)",panel:"#1f1a0f",panelBorder:"rgba(255,215,0,0.4)",accent:"#ffd700",text:"#fff8e1",textSecondary:"#ffe082",danger:"#ff6f00",success:"#ffc400"}}],Tx=[{id:"gems_100",amount:100,bonusAmount:0,price:1.99,label:""},{id:"gems_500",amount:500,bonusAmount:50,price:7.99,label:"",highlight:!0},{id:"gems_1200",amount:1200,bonusAmount:200,price:14.99,label:""},{id:"gems_2500",amount:2500,bonusAmount:500,price:27.99,label:""},{id:"gems_6500",amount:6500,bonusAmount:1500,price:54.99,label:" ",bestValue:!0}],Os=[{id:"coins_50",reward:{coins:50},probability:.25,color:"#888888",label:"50 "},{id:"coins_100",reward:{coins:100},probability:.2,color:"#3742fa",label:"100 "},{id:"coins_200",reward:{coins:200},probability:.15,color:"#3742fa",label:"200 "},{id:"gems_5",reward:{gems:5},probability:.12,color:"#8854d0",label:"5 "},{id:"gems_10",reward:{gems:10},probability:.1,color:"#8854d0",label:"10 "},{id:"powerup",reward:{powerUp:{type:"colorBomb",count:1}},probability:.08,color:"#2ed573",label:""},{id:"gems_25",reward:{gems:25},probability:.05,color:"#ffd700",label:"25 "},{id:"gems_50",reward:{gems:50},probability:.03,color:"#ffd700",label:"50 "},{id:"gems_100",reward:{gems:100},probability:.015,color:"#ff4757",label:"100 !"},{id:"jackpot",reward:{gems:500,coins:5e3},probability:.005,color:"#ff00ff",label:"!"}],pd=[{day:1,reward:{coins:100}},{day:2,reward:{coins:150,powerUp:{type:"timeSlow",count:1}}},{day:3,reward:{coins:200}},{day:4,reward:{coins:250,gems:10}},{day:5,reward:{coins:300,powerUp:{type:"colorBomb",count:1}}},{day:6,reward:{coins:400,gems:20}},{day:7,reward:{coins:500,gems:50}}],Sx={common:"#888888",uncommon:"#2ed573",rare:"#3742fa",epic:"#8854d0",legendary:"#ffd700",mythic:"#ff00ff"},wx={common:"",uncommon:"",rare:"",epic:"",legendary:"",mythic:""},Ax=[{id:"play_3_games",type:"games_played",target:3,desc:"3 ",reward:{xp:30,coins:100}},{id:"score_10k",type:"score",target:1e4,desc:"10,000 ",reward:{xp:40,coins:150}},{id:"combo_10",type:"combo",target:10,desc:"10  ",reward:{xp:50,coins:200}},{id:"chain_5",type:"chain",target:5,desc:"5 ",reward:{xp:50,gems:10}},{id:"use_powerup",type:"powerup_used",target:3,desc:" 3 ",reward:{xp:30,coins:100}},{id:"fuse_50",type:"blocks_fused",target:50,desc:"50  ",reward:{xp:35,coins:120}},{id:"level_10",type:"level_reached",target:10,desc:" 10 ",reward:{xp:45,coins:180}},{id:"play_classic",type:"mode_played",target:1,desc:"  ",reward:{xp:25,coins:80}},{id:"watch_ad",type:"ad_watched",target:1,desc:" ",reward:{xp:20,coins:50}},{id:"perfect_clear",type:"perfect_clear",target:1,desc:" ",reward:{xp:100,gems:20}}],Cx=[{id:"play_20_games",type:"games_played",target:20,desc:"20 ",reward:{xp:200,gems:50}},{id:"total_score_100k",type:"total_score",target:1e5,desc:" 100,000 ",reward:{xp:300,gems:100}},{id:"max_combo_30",type:"max_combo",target:30,desc:" 30  ",reward:{xp:250,gems:75}},{id:"chain_10",type:"max_chain",target:10,desc:"10 ",reward:{xp:300,gems:150}},{id:"reach_level_20",type:"max_level",target:20,desc:" 20 ",reward:{xp:200,gems:80}},{id:"fuse_500",type:"blocks_fused",target:500,desc:"500  ",reward:{xp:250,gems:90}},{id:"use_all_powerups",type:"unique_powerups",target:5,desc:"5  ",reward:{xp:180,gems:60}},{id:"gravity_all",type:"gravity_directions",target:4,desc:"   ",reward:{xp:150,gems:50}}];function Nx(){return[...Ax].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function Rx(){return[...Cx].sort(()=>Math.random()-.5).slice(0,3).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function so(r){return Math.floor(100*Math.pow(1.15,r-1))}function ty(r){let t=1,a=0;for(;a+so(t)<=r;)a+=so(t),t++;return t}function ny(r){let t=1,a=0;for(;a+so(t)<=r;)a+=so(t),t++;const s=r-a,o=so(t);return{currentLevelXP:s,nextLevelXP:o,progress:s/o}}const Mx=[{id:"first_step",name:" ",description:"  ",condition:"games >= 1",icon:"",rarity:"common"},{id:"beginner",name:"",description:"10 ",condition:"games >= 10",icon:"",rarity:"common"},{id:"regular",name:"",description:"50 ",condition:"games >= 50",icon:"",rarity:"rare"},{id:"veteran",name:"",description:"100 ",condition:"games >= 100",icon:"",rarity:"epic"},{id:"legend",name:"",description:"500 ",condition:"games >= 500",icon:"",rarity:"legendary"},{id:"score_1k",name:"1 ",description:"1,000 ",condition:"highScore >= 1000",icon:"",rarity:"common"},{id:"score_5k",name:"5 ",description:"5,000 ",condition:"highScore >= 5000",icon:"",rarity:"rare"},{id:"score_10k",name:"",description:"10,000 ",condition:"highScore >= 10000",icon:"",rarity:"epic"},{id:"score_50k",name:" ",description:"50,000 ",condition:"highScore >= 50000",icon:"",rarity:"legendary"},{id:"score_100k",name:" ",description:"100,000 ",condition:"highScore >= 100000",icon:"",rarity:"mythic"},{id:"combo_5",name:" ",description:"5 ",condition:"maxCombo >= 5",icon:"",rarity:"common"},{id:"combo_10",name:" ",description:"10 ",condition:"maxCombo >= 10",icon:"",rarity:"rare"},{id:"combo_20",name:" ",description:"20 ",condition:"maxCombo >= 20",icon:"",rarity:"epic"},{id:"combo_50",name:" ",description:"50 ",condition:"maxCombo >= 50",icon:"",rarity:"legendary"},{id:"chain_3",name:" ",description:"3 ",condition:"maxChain >= 3",icon:"",rarity:"common"},{id:"chain_5",name:" ",description:"5 ",condition:"maxChain >= 5",icon:"",rarity:"rare"},{id:"chain_10",name:" ",description:"10 ",condition:"maxChain >= 10",icon:"",rarity:"epic"},{id:"chain_15",name:" ",description:"15 ",condition:"maxChain >= 15",icon:"",rarity:"legendary"},{id:"level_10",name:"10 ",description:" 10 ",condition:"maxLevel >= 10",icon:"",rarity:"common"},{id:"level_20",name:"20 ",description:" 20 ",condition:"maxLevel >= 20",icon:"",rarity:"rare"},{id:"level_30",name:"30 ",description:" 30 ",condition:"maxLevel >= 30",icon:"",rarity:"epic"},{id:"level_50",name:" ",description:" 50 ",condition:"maxLevel >= 50",icon:"",rarity:"legendary"},{id:"fever_master",name:" ",description:"  10 ",condition:"feverCount >= 10",icon:"",rarity:"rare"},{id:"speed_demon",name:" ",description:" 3  10,000",condition:"speedScore >= 10000",icon:"",rarity:"epic"},{id:"puzzle_solver",name:" ",description:"  20 ",condition:"puzzleLevel >= 20",icon:"",rarity:"epic"},{id:"perfectionist",name:"",description:" 10",condition:"perfectClears >= 10",icon:"",rarity:"legendary"},{id:"early_bird",name:"",description:" 6-9  ",condition:"special",icon:"",rarity:"rare"},{id:"night_owl",name:"",description:" 12-3  ",condition:"special",icon:"",rarity:"rare"},{id:"weekend_warrior",name:" ",description:" 10  ",condition:"special",icon:"",rarity:"rare"},{id:"streak_7",name:"7 ",description:"7  ",condition:"streak >= 7",icon:"",rarity:"epic"},{id:"streak_30",name:"30 ",description:"30  ",condition:"streak >= 30",icon:"",rarity:"legendary"}];function Ix(r,t,a,s){const o=Math.floor(r/100),c=t*2,h=a*5,m=s*10;return o+c+h+m}function gd(){return Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null))}function xv(r){const t=Ud(r);return t[Math.floor(Math.random()*t.length)]}function Ev(r,t){if(t>0&&t%20===0)return ey(r);const a=_x(r);return Math.random()<a?ey(r):"normal"}function ay(r,t){const a=[],s=[];for(let o=0;o<r;o++)a.push(xv(t)),s.push(o===0?Ev(t,0):"normal");return{colors:a,specialTypes:s}}const Dx={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,specialBlocksUsed:0,levelsCompleted:0},Ox={dailyMissions:Nx(),weeklyMissions:Rx()};let to=!1;const iy={board:gd(),currentBlock:null,currentBlocks:[],nextBlocks:[],nextSpecialTypes:[],holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"ready",gameMode:"classic",powerUps:[],activePowerUp:null,gravityDirection:"down",gameTime:0,statistics:Dx,continues:0,adWatchedThisGame:!1,missionProgress:Ox,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:[],feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,specialBlockChance:.05,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:1,movesRemaining:0,puzzleLevel:1,puzzleCompleted:!1,currentShapeOffsets:[],basePosition:{x:0,y:0}},Ye=yv()(vv((r,t)=>({...iy,blocksPlaced:0,startGame:(a="classic")=>{to=!1;const s=1,o=1,c=a==="puzzle"?1:$0(s),{colors:h,specialTypes:m}=ay(5+c,s);let v=[];a==="challenge"?v=Z0(s):a==="puzzle"&&(v=J0(o));const b=a==="puzzle"?pu.getMovesForLevel(o):0;r({board:gd(),currentBlock:null,currentBlocks:[],nextBlocks:h,nextSpecialTypes:m,holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:s,combo:0,maxCombo:0,chainCount:0,gameStatus:"playing",gameMode:a,activePowerUp:null,gravityDirection:"down",gameTime:0,continues:0,adWatchedThisGame:!1,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:v,feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,blocksPlaced:0,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:c,movesRemaining:b,puzzleLevel:o,puzzleCompleted:!1}),setTimeout(()=>t().spawnBlock(),100)},pauseGame:()=>{t().gameStatus==="playing"&&r({gameStatus:"paused"})},resumeGame:()=>{t().gameStatus==="paused"&&r({gameStatus:"playing"})},endGame:()=>{const{score:a,statistics:s,combo:o,chainCount:c}=t();r({gameStatus:"gameover",statistics:{...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a,highScore:Math.max(s.highScore,a),maxCombo:Math.max(s.maxCombo,o),maxChain:Math.max(s.maxChain,c)}})},resetGame:()=>{to=!1,r({...iy,statistics:t().statistics,powerUps:t().powerUps,missionProgress:t().missionProgress})},spawnBlock:()=>{const{nextBlocks:a,nextSpecialTypes:s,level:o,gravityDirection:c,board:h,blocksPlaced:m,currentBlocks:v,gameStatus:b}=t();if(!(v.length>0)&&b==="playing"&&!to){to=!0;try{const x=$0(o);let E=[...a],A=[...s];for(;E.length<10;)E.push(xv(o)),A.push(Ev(o,m+E.length));if(E.length<1)return;const j=hx(x).offsets,F=Math.min(...j.map(N=>N[0])),U=Math.max(...j.map(N=>N[0])),V=Math.min(...j.map(N=>N[1])),W=Math.max(...j.map(N=>N[1])),$=U-F+1,ie=W-V+1;let ce,re;switch(c){case"down":ce=Math.floor((me.COLUMNS-$)/2),re=0;break;case"up":ce=Math.floor((me.COLUMNS-$)/2),re=me.ROWS-1-ie+1;break;case"left":ce=me.COLUMNS-$,re=Math.floor((me.ROWS-ie)/2);break;case"right":ce=0,re=Math.floor((me.ROWS-ie)/2);break}const M=[];for(let N=0;N<j.length;N++){const[D,B]=j[N],R=E[N]||E[0],Ue=N===0&&A[0]||"normal",We=ce+D,X=re+B;We<0||We>=me.COLUMNS||X<0||X>=me.ROWS||h[X][We]===null&&M.push({id:Wc(),color:R,x:We,y:X,targetY:X,specialType:Ue})}if(M.length===0){t().endGame();return}if(c==="down"){let N=0;for(let D=0;D<me.COLUMNS;D++)h[0][D]!==null&&N++,h[1][D]!==null&&N++;if(N>=me.COLUMNS){t().endGame();return}}const S=[...E.slice(x)],C=[...A.slice(x)];r({currentBlock:M[0]||null,currentBlocks:M,nextBlocks:S,nextSpecialTypes:C,canHold:!0,blocksPlaced:m+x,fallingBlockCount:x,currentShapeOffsets:j,basePosition:{x:ce,y:re}})}finally{to=!1}}},moveBlock:a=>{const{currentBlocks:s,board:o,gravityDirection:c}=t();if(s.length===0)return;const h=[],m=new Set;for(const v of s){let b=v.x,x=v.y;if(c==="down"||c==="up"?b=a==="left"?v.x-1:v.x+1:x=a==="left"?v.y-1:v.y+1,b<0||b>=me.COLUMNS||x<0||x>=me.ROWS||o[x][b]!==null)return;h.push({...v,x:b,y:x}),m.add(`${b},${x}`)}r({currentBlock:h[0]||null,currentBlocks:h})},rotateBlock:()=>{const{currentBlocks:a,board:s}=t();if(a.length<=1)return;const o=a[0],c=[];let h=!0;for(let m=0;m<a.length;m++){const v=a[m],b=v.x-o.x,x=v.y-o.y,E=o.x-x,A=o.y+b;if(E<0||E>=me.COLUMNS||A<0||A>=me.ROWS){h=!1;break}if(s[A]?.[E]!==null){h=!1;break}c.push({...v,x:E,y:A})}if(!h){const m=[[-1,0],[1,0],[-2,0],[2,0],[0,-1],[0,1]];for(const[v,b]of m){const x=[];let E=!0;for(let A=0;A<a.length;A++){const L=a[A],j=L.x-o.x,F=L.y-o.y,U=o.x-F+v,V=o.y+j+b;if(U<0||U>=me.COLUMNS||V<0||V>=me.ROWS||s[V]?.[U]!==null){E=!1;break}x.push({...L,x:U,y:V})}if(E&&x.length===a.length){c.length=0,c.push(...x),h=!0;break}}}if(h&&c.length===a.length){const m=c[0],v=c.map(b=>[b.x-m.x,b.y-m.y]);r({currentBlock:c[0]||null,currentBlocks:c,currentShapeOffsets:v,basePosition:{x:m.x,y:m.y}})}},softDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:h}=dd[o];let m=!1;new Set(a.map(b=>`${b.x},${b.y}`));for(const b of a){const x=b.x+c,E=b.y+h;if(x<0||x>=me.COLUMNS||E<0||E>=me.ROWS){m=!0;break}if(s[E]?.[x]!==null){m=!0;break}}if(m){t().placeBlock();return}const v=a.map(b=>({...b,x:b.x+c,y:b.y+h}));r({currentBlock:v[0]||null,currentBlocks:v})},hardDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:h}=dd[o],m=new Set,v=s.map(E=>[...E]),b=[...a].sort((E,A)=>o==="down"?A.y-E.y:o==="up"?E.y-A.y:o==="right"?A.x-E.x:E.x-A.x),x=[];for(const E of b){let A=E.x,L=E.y;for(;;){const j=A+c,F=L+h;if(j<0||j>=me.COLUMNS||F<0||F>=me.ROWS||v[F]?.[j]!==null||m.has(`${j},${F}`))break;A=j,L=F}m.add(`${A},${L}`),x.push({...E,x:A,y:L}),v[L][A]={id:E.id||Wc(),color:E.color,x:A,y:L,specialType:E.specialType,frozenCount:E.specialType==="frozen"?2:void 0,createdAt:Date.now()}}r({currentBlock:x[0]||null,currentBlocks:x}),t().placeBlock()},doHoldBlock:()=>{const{currentBlock:a,holdBlock:s,holdSpecialType:o,canHold:c}=t();!a||!c||(s&&o!==null?r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:{color:s,x:Math.floor(me.COLUMNS/2),y:0,targetY:0,specialType:o},canHold:!1}):(r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:null,canHold:!1}),t().spawnBlock()))},placeBlock:()=>{const{currentBlocks:a,board:s,garbagePending:o,gameMode:c}=t();if(a.length===0)return;let h=s.map(m=>[...m]);for(const m of a){const v={id:Wc(),color:m.color,x:m.x,y:m.y,specialType:m.specialType,frozenCount:m.specialType==="frozen"?2:void 0,createdAt:Date.now()};h[m.y][m.x]=v}r({board:h,currentBlock:null,currentBlocks:[]}),c==="puzzle"&&t().decrementMoves(),o>0&&c!=="puzzle"&&setTimeout(()=>{t().addGarbageRows(t().garbagePending)},100)},setGravityDirection:a=>{r({gravityDirection:a,isPowerUpSelecting:!1,selectedGravityDirection:null})},toggleGravitySelection:a=>{r({isPowerUpSelecting:a})},cycleGravity:()=>{const{gravityDirection:a}=t(),s=["down","right","up","left"],c=(s.indexOf(a)+1)%s.length;r({gravityDirection:s[c]})},addPowerUp:(a,s=1)=>{const{powerUps:o}=t(),c=o.findIndex(h=>h.type===a);if(c>=0){const h=[...o];h[c]={...h[c],count:h[c].count+s},r({powerUps:h})}else r({powerUps:[...o,{type:a,count:s}]})},usePowerUp:a=>{const{powerUps:s}=t(),o=s.findIndex(h=>h.type===a&&h.count>0);if(o<0)return;const c=[...s];c[o]={...c[o],count:c[o].count-1},c[o].count<=0&&c.splice(o,1),r({powerUps:c})},activatePowerUp:a=>{r({activePowerUp:a})},deactivatePowerUp:()=>{r({activePowerUp:null})},updateBoard:a=>{r({board:a})},addScore:a=>{const{score:s,activePowerUp:o,isFeverMode:c}=t();let h=o?.type==="scoreMultiplier"?2:1;c&&(h*=3),r({score:s+a*h}),t().checkLevelUp()},incrementCombo:()=>{const{combo:a,maxCombo:s}=t(),o=a+1;r({combo:o,maxCombo:Math.max(s,o),comboTimer:3}),t().addFeverGauge(Vs.GAUGE_PER_COMBO*o)},resetCombo:()=>{r({combo:0,comboTimer:0})},incrementChain:()=>{const{chainCount:a}=t(),s=a+1;r({chainCount:s}),t().addFeverGauge(Vs.GAUGE_PER_CHAIN*s)},resetChain:()=>{r({chainCount:0})},checkLevelUp:()=>{const{score:a,level:s,gameMode:o}=t(),c=vx(s);if(a>=c){const h=s+1,m=o==="challenge"?Z0(h):t().levelObjectives;r({level:h,levelObjectives:m})}},addFeverGauge:a=>{const{feverGauge:s,isFeverMode:o}=t();if(o)return;const c=Math.min(Vs.MAX_GAUGE,s+a);r({feverGauge:c}),c>=Vs.MAX_GAUGE&&t().activateFeverMode()},activateFeverMode:()=>{r({isFeverMode:!0,feverGauge:Vs.MAX_GAUGE})},deactivateFeverMode:()=>{r({isFeverMode:!1,feverGauge:0})},updateLevelObjective:(a,s)=>{const{levelObjectives:o}=t(),c=o.map(h=>{if(h.type===a&&!h.completed){const m=h.current+s;return{...h,current:m,completed:m>=h.target}}return h});r({levelObjectives:c}),c.length>0&&c.every(h=>h.completed)&&r({gameStatus:"levelComplete"})},setDangerLevel:a=>{r({dangerLevel:a})},decrementBlocksUntilSpecial:()=>{const{blocksUntilSpecial:a}=t();a>0?r({blocksUntilSpecial:a-1}):r({blocksUntilSpecial:10+Math.floor(Math.random()*5)})},addGarbageRows:a=>{const s=o=>{if(o<=0){r({garbagePending:0});return}const{board:c,level:h}=t(),m=Ud(h),v=Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null));for(let A=1;A<me.ROWS;A++)for(let L=0;L<me.COLUMNS;L++){const j=c[A][L];j&&(v[A-1][L]={...j,y:A-1})}const b=Math.floor(Math.random()*me.COLUMNS),x=me.ROWS-1;for(let A=0;A<me.COLUMNS;A++)A===b?v[x][A]=null:v[x][A]={id:Wc(),color:m[Math.floor(Math.random()*m.length)],x:A,y:x,specialType:Math.random()<.1?"stone":"normal",createdAt:Date.now()};r({board:v});let E=!1;for(let A=0;A<me.COLUMNS;A++)if(v[0][A]!==null){E=!0;break}if(E){t().endGame();return}o>1?setTimeout(()=>s(o-1),300):r({garbagePending:0})};s(a)},incrementGarbageTimer:()=>{const{garbageTimer:a,level:s,garbagePending:o}=t();if(s<Ls.GARBAGE_START_LEVEL)return;const c=dx(s),h=a+1;if(h>=c){const m=Math.min(Ls.GARBAGE_ROWS_PER_INTERVAL+Math.floor(s/5),Ls.GARBAGE_MAX_ROWS);r({garbageTimer:0,garbagePending:o+m})}else r({garbageTimer:h})},updateStatistics:a=>{const{statistics:s}=t();r({statistics:{...s,...a}})},updateMissionProgress:(a,s)=>{const{missionProgress:o}=t(),c=o.dailyMissions.map(m=>{if(m.type===a&&!m.completed){const v=m.current+s;return{...m,current:v,completed:v>=m.target}}return m}),h=o.weeklyMissions.map(m=>{if(m.type===a&&!m.completed){const v=m.current+s;return{...m,current:v,completed:v>=m.target}}return m});r({missionProgress:{dailyMissions:c,weeklyMissions:h}})},incrementGameTime:()=>{const{gameTime:a,comboTimer:s,feverGauge:o,isFeverMode:c}=t();if(s>0){const h=s-1;h<=0?t().resetCombo():r({comboTimer:h})}!c&&o>0&&r({feverGauge:Math.max(0,o-Vs.DECAY_RATE)}),t().incrementGarbageTimer(),r({gameTime:a+1})},continueGame:()=>{const{continues:a,board:s}=t(),o=s.map((c,h)=>h<4?Array(me.COLUMNS).fill(null):c);r({board:o,gameStatus:"playing",continues:a+1}),t().spawnBlock()},decrementMoves:()=>{const{movesRemaining:a,gameMode:s}=t();if(s!=="puzzle")return;const o=a-1;r({movesRemaining:o}),o<=0&&t().checkPuzzleComplete()},nextPuzzleLevel:()=>{const{puzzleLevel:a}=t(),s=a+1,o=pu.getMovesForLevel(s),c=J0(s),{colors:h,specialTypes:m}=ay(6,1);r({board:gd(),currentBlock:null,currentBlocks:[],nextBlocks:h,nextSpecialTypes:m,score:0,puzzleLevel:s,movesRemaining:o,levelObjectives:c,puzzleCompleted:!1,gameStatus:"playing",combo:0,chainCount:0}),setTimeout(()=>t().spawnBlock(),100)},checkPuzzleComplete:()=>{const{levelObjectives:a,gameMode:s,movesRemaining:o}=t();if(s!=="puzzle")return;a.every(h=>h.completed)?r({puzzleCompleted:!0,gameStatus:"levelComplete"}):o<=0&&t().endGame()}}),{name:"chromafall-game-storage",partialize:r=>({statistics:r.statistics,powerUps:r.powerUps,missionProgress:r.missionProgress})})),Vx={soundEnabled:!0,musicEnabled:!0,soundVolume:.7,musicVolume:.5,hapticEnabled:!0,showGhostBlock:!0,controlType:"both",colorBlindMode:!1,language:"ko",performanceMode:"auto"},jx={coins:1e3,gems:50,lives:5,maxLives:5,lifeRegenTime:0},kx={freeSpinsRemaining:1,adSpinsRemaining:3,lastFreeSpinTime:0,spinHistory:[],pityCounter:0},Lx={currentStreak:0,longestStreak:0,lastPlayDate:"",todayPlayed:!1},Bx={adsEnabled:!0,iapEnabled:!0,removeAds:!1,vipActive:!1,firstPurchaseBonus:!0},Ux={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,maxLevel:1,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,feverCount:0,puzzleLevel:1,speedScore:0},Yn=yv()(vv((r,t)=>({playerId:`player_${Date.now()}`,playerName:"",playerLevel:1,playerXP:0,totalXP:0,avatarId:"default",playerStats:Ux,unlockedTitles:["first_step"],equippedTitleId:"",settings:Vx,currency:jx,achievements:Ex(),ownedSkins:md.filter(a=>a.owned),ownedThemes:gu.filter(a=>a.owned),equippedSkinId:"classic",equippedThemeId:"dark",dailyRewards:pd.map((a,s)=>({...a,claimed:!1})),lastDailyRewardClaim:"",dailyRewardDay:0,streakInfo:Lx,wheelState:kx,monetizationConfig:Bx,purchaseHistory:[],personalBestScores:[],battlePassLevel:1,battlePassXP:0,battlePassPremium:!1,setPlayerName:a=>r({playerName:a}),addXP:a=>{const{totalXP:s}=t(),o=s+a,c=ty(o),h=ny(o);r({totalXP:o,playerLevel:c,playerXP:h.currentLevelXP})},processGameResult:a=>{const{playerStats:s,totalXP:o}=t(),c=Ix(a.score,a.combo,a.chain,a.level),h={...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a.score,highScore:Math.max(s.highScore,a.score),maxCombo:Math.max(s.maxCombo,a.combo),maxChain:Math.max(s.maxChain,a.chain),maxLevel:Math.max(s.maxLevel,a.level)};a.mode==="timeAttack"?h.speedScore=Math.max(h.speedScore,a.score):a.mode==="puzzle"&&(h.puzzleLevel=Math.max(h.puzzleLevel,a.level));const m=o+c,v=ty(m),b=ny(m),x=Math.floor(a.score/50),{currency:E}=t();return r({playerStats:h,totalXP:m,playerLevel:v,playerXP:b.currentLevelXP,currency:{...E,coins:E.coins+x}}),t().checkAndUnlockTitles(),c},checkAndUnlockTitles:()=>{const{playerStats:a,unlockedTitles:s,streakInfo:o}=t(),c=[];return Mx.forEach(h=>{if(s.includes(h.id))return;let m=!1;const v=h.condition;if(v.includes("games >=")){const b=parseInt(v.split(">=")[1]);m=a.totalGamesPlayed>=b}else if(v.includes("highScore >=")){const b=parseInt(v.split(">=")[1]);m=a.highScore>=b}else if(v.includes("maxCombo >=")){const b=parseInt(v.split(">=")[1]);m=a.maxCombo>=b}else if(v.includes("maxChain >=")){const b=parseInt(v.split(">=")[1]);m=a.maxChain>=b}else if(v.includes("maxLevel >=")){const b=parseInt(v.split(">=")[1]);m=a.maxLevel>=b}else if(v.includes("feverCount >=")){const b=parseInt(v.split(">=")[1]);m=a.feverCount>=b}else if(v.includes("speedScore >=")){const b=parseInt(v.split(">=")[1]);m=a.speedScore>=b}else if(v.includes("puzzleLevel >=")){const b=parseInt(v.split(">=")[1]);m=a.puzzleLevel>=b}else if(v.includes("perfectClears >=")){const b=parseInt(v.split(">=")[1]);m=a.perfectClears>=b}else if(v.includes("streak >=")){const b=parseInt(v.split(">=")[1]);m=o.currentStreak>=b}m&&c.push(h.id)}),c.length>0&&r({unlockedTitles:[...s,...c]}),c},equipTitle:a=>{const{unlockedTitles:s}=t();(s.includes(a)||a==="")&&r({equippedTitleId:a})},updatePlayerStats:a=>{const{playerStats:s}=t();r({playerStats:{...s,...a}})},updateSettings:a=>{const{settings:s}=t();r({settings:{...s,...a}})},addCoins:a=>{const{currency:s}=t();r({currency:{...s,coins:s.coins+a}})},spendCoins:a=>{const{currency:s}=t();return s.coins>=a?(r({currency:{...s,coins:s.coins-a}}),!0):!1},addGems:a=>{const{currency:s}=t();r({currency:{...s,gems:s.gems+a}})},spendGems:a=>{const{currency:s}=t();return s.gems>=a?(r({currency:{...s,gems:s.gems-a}}),!0):!1},addLife:a=>{const{currency:s}=t(),o=Math.min(s.lives+a,s.maxLives);r({currency:{...s,lives:o}})},useLife:()=>{const{currency:a}=t();return a.lives>0?(r({currency:{...a,lives:a.lives-1}}),!0):!1},updateAchievement:(a,s)=>{const{achievements:o}=t(),c=o.map(h=>{if(h.id===a){const m=Math.max(h.current,s);return{...h,current:m,completed:m>=h.target}}return h});r({achievements:c})},claimAchievement:a=>{const{achievements:s}=t(),o=s.find(c=>c.id===a);if(o&&o.completed&&!o.claimed){o.reward.coins&&t().addCoins(o.reward.coins),o.reward.gems&&t().addGems(o.reward.gems);const c=s.map(h=>h.id===a?{...h,claimed:!0}:h);r({achievements:c})}},purchaseSkin:a=>{const s=md.find(h=>h.id===a);if(!s)return!1;const{currency:o,ownedSkins:c}=t();return c.some(h=>h.id===a)?!1:s.currency==="free"?(r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):!1},purchaseTheme:a=>{const s=gu.find(h=>h.id===a);if(!s)return!1;const{currency:o,ownedThemes:c}=t();return c.some(h=>h.id===a)?!1:s.currency==="free"?(r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):!1},equipSkin:a=>{const{ownedSkins:s}=t();s.some(o=>o.id===a)&&r({equippedSkinId:a})},equipTheme:a=>{const{ownedThemes:s}=t();s.some(o=>o.id===a)&&r({equippedThemeId:a})},claimDailyReward:()=>{const{dailyRewardDay:a,dailyRewards:s,lastDailyRewardClaim:o}=t(),c=new Date().toDateString();if(o===c)return null;const h=a%7+1,m=pd[h-1];return m.reward.coins&&t().addCoins(m.reward.coins),m.reward.gems&&t().addGems(m.reward.gems),r({dailyRewardDay:h,lastDailyRewardClaim:c}),m.reward},checkDailyRewardAvailable:()=>{const{lastDailyRewardClaim:a}=t(),s=new Date().toDateString();return a!==s},updateStreak:()=>{const{streakInfo:a}=t(),s=new Date().toDateString();if(a.lastPlayDate===s)return;const o=new Date(Date.now()-864e5).toDateString();let c=a.currentStreak;a.lastPlayDate===o?c+=1:a.lastPlayDate!==s&&(c=1),r({streakInfo:{currentStreak:c,longestStreak:Math.max(a.longestStreak,c),lastPlayDate:s,todayPlayed:!0}})},spinWheel:()=>{const{wheelState:a}=t(),{freeSpinsRemaining:s,adSpinsRemaining:o}=a;if(s<=0&&o<=0)return null;const c=["coins_50","coins_100","gems_5","gems_10","powerup"],h=c[Math.floor(Math.random()*c.length)];return r({wheelState:{...a,freeSpinsRemaining:s>0?s-1:s,adSpinsRemaining:s<=0?o-1:o,spinHistory:[...a.spinHistory,h],pityCounter:a.pityCounter+1}}),h},canSpinWheel:()=>{const{wheelState:a,currency:s}=t();return{free:a.freeSpinsRemaining>0,ad:a.adSpinsRemaining>0,gem:s.gems>=20}},addBattlePassXP:a=>{const{battlePassXP:s,battlePassLevel:o}=t(),c=100,h=s+a,m=Math.floor(h/c);r({battlePassXP:h%c,battlePassLevel:Math.min(o+m,50)})},purchaseBattlePassPremium:()=>{const{currency:a}=t();return a.gems>=499?(t().spendGems(499),r({battlePassPremium:!0}),!0):!1},addPersonalBest:(a,s)=>{const{personalBestScores:o}=t(),c=o.findIndex(h=>h.mode===a);if(c>=0){if(s>o[c].score){const h=[...o];h[c]={mode:a,score:s,date:new Date().toISOString()},r({personalBestScores:h})}}else r({personalBestScores:[...o,{mode:a,score:s,date:new Date().toISOString()}]})}}),{name:"chromafall-user-storage"}));function zx(r,t,a,s){const o=[],c=new Set,h=[[t,a]];for(;h.length>0;){const[m,v]=h.shift(),b=`${m},${v}`;if(c.has(b)||m<0||m>=me.COLUMNS||v<0||v>=me.ROWS)continue;const x=r[v][m];x&&(x.color!==s&&x.color!=="rainbow"&&s!=="rainbow"||(c.add(b),o.push(x),h.push([m-1,v]),h.push([m+1,v]),h.push([m,v-1]),h.push([m,v+1])))}return o}function Px(r,t){const a=[],s=new Set,o=ix();for(let c=0;c<me.ROWS;c++)for(let h=0;h<me.COLUMNS;h++){const m=r[c][h];if(!m)continue;const v=`${h},${c}`;if(s.has(v))continue;const b=zx(r,h,c,m.color);b.length>=o&&(a.push(b),b.forEach(x=>s.add(`${x.x},${x.y}`)))}return a}function Gx(r,t){const a=Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null));if(t==="down")for(let s=0;s<me.COLUMNS;s++){let o=me.ROWS-1;for(let c=me.ROWS-1;c>=0;c--)r[c][s]&&(a[o][s]={...r[c][s],y:o},o--)}else if(t==="up")for(let s=0;s<me.COLUMNS;s++){let o=0;for(let c=0;c<me.ROWS;c++)r[c][s]&&(a[o][s]={...r[c][s],y:o},o++)}else if(t==="left")for(let s=0;s<me.ROWS;s++){let o=0;for(let c=0;c<me.COLUMNS;c++)r[s][c]&&(a[s][o]={...r[s][c],x:o},o++)}else if(t==="right")for(let s=0;s<me.ROWS;s++){let o=me.COLUMNS-1;for(let c=me.COLUMNS-1;c>=0;c--)r[s][c]&&(a[s][o]={...r[s][c],x:o},o--)}return a}function qx(r){for(let t=0;t<me.ROWS;t++)for(let a=0;a<me.COLUMNS;a++)if(r[t][a])return!1;return!0}function Hx(r,t,a){const s=r.map(m=>[...m]),o=[],c=[],h=new Set;for(const m of t){if(m.specialType==="normal")continue;const v=`${m.x},${m.y}`;if(h.has(v))continue;h.add(v);const b=[];switch(m.specialType){case"bomb":{for(let x=-1;x<=hd.BOMB_RADIUS;x++)for(let E=-1;E<=hd.BOMB_RADIUS;E++){const A=m.x+E,L=m.y+x;if(A>=0&&A<me.COLUMNS&&L>=0&&L<me.ROWS){const j=s[L][A];j&&!t.includes(j)&&(j.specialType==="frozen"&&(j.frozenCount||2)>1?s[L][A]={...j,frozenCount:(j.frozenCount||2)-1}:(j.specialType,o.push(j),s[L][A]=null),b.push({x:A,y:L}))}}break}case"lightning":{for(let x=0;x<me.ROWS;x++)for(let E=0;E<me.COLUMNS;E++){const A=s[x][E];A&&A.color===m.color&&!t.includes(A)&&(A.specialType==="frozen"&&(A.frozenCount||2)>1?s[x][E]={...A,frozenCount:(A.frozenCount||2)-1}:A.specialType!=="stone"&&(o.push(A),s[x][E]=null),b.push({x:E,y:x}))}break}case"cross":{for(let x=0;x<me.COLUMNS;x++){const E=s[m.y][x];E&&!t.includes(E)&&(E.specialType==="frozen"&&(E.frozenCount||2)>1?s[m.y][x]={...E,frozenCount:(E.frozenCount||2)-1}:E.specialType!=="stone"&&(o.push(E),s[m.y][x]=null),b.push({x,y:m.y}))}for(let x=0;x<me.ROWS;x++){const E=s[x][m.x];E&&!t.includes(E)&&(E.specialType==="frozen"&&(E.frozenCount||2)>1?s[x][m.x]={...E,frozenCount:(E.frozenCount||2)-1}:E.specialType!=="stone"&&(o.push(E),s[x][m.x]=null),b.push({x:m.x,y:x}))}break}case"colorShift":{for(let x=-1;x<=1;x++)for(let E=-1;E<=1;E++){if(E===0&&x===0)continue;const A=m.x+E,L=m.y+x;if(A>=0&&A<me.COLUMNS&&L>=0&&L<me.ROWS){const j=s[L][A];j&&j.specialType!=="stone"&&j.specialType!=="frozen"&&(s[L][A]={...j,color:m.color},b.push({x:A,y:L}))}}break}case"shuffle":{const x=Ud(a);for(let E=-1;E<=1;E++)for(let A=-1;A<=1;A++){if(A===0&&E===0)continue;const L=m.x+A,j=m.y+E;if(L>=0&&L<me.COLUMNS&&j>=0&&j<me.ROWS){const F=s[j][L];if(F&&F.specialType!=="stone"&&F.specialType!=="frozen"){const U=x[Math.floor(Math.random()*x.length)];s[j][L]={...F,color:U},b.push({x:L,y:j})}}}break}}b.length>0&&c.push({type:m.specialType,x:m.x,y:m.y,affectedBlocks:b})}return{additionalCleared:o,newBoard:s,effects:c}}function Fx(r,t){const a=r.map(c=>[...c]),s=[],o=new Set(t.map(c=>`${c.x},${c.y}`));for(let c=0;c<me.ROWS;c++)for(let h=0;h<me.COLUMNS;h++){const m=a[c][h];m?.specialType==="stone"&&[`${h-1},${c}`,`${h+1},${c}`,`${h},${c-1}`,`${h},${c+1}`].some(x=>o.has(x))&&(s.push(m),a[c][h]=null)}return{destroyedStones:s,newBoard:a}}function Qx(r,t){const a=t.map(o=>[...o]),s=[];for(const o of r)if(o.specialType==="frozen"){const c=o.frozenCount||2;c>1?a[o.y][o.x]={...o,frozenCount:c-1}:s.push(o)}else s.push(o);return{blocksToRemove:s,updatedBoard:a}}function Xx(){const{board:r,currentBlock:t,currentBlocks:a,gameStatus:s,level:o,combo:c,chainCount:h,gravityDirection:m,activePowerUp:v,updateBoard:b,addScore:x,incrementCombo:E,resetCombo:A,incrementChain:L,resetChain:j,spawnBlock:F,softDrop:U,updateStatistics:V,updateMissionProgress:W,updateLevelObjective:$,checkPuzzleComplete:ie,gameMode:ce,statistics:re}=Ye(),{updateAchievement:M,addBattlePassXP:S}=Yn(),[C,N]=se.useState(!1),[D,B]=se.useState([]),[R,Ue]=se.useState(0),[We,X]=se.useState([]),oe=se.useRef(null),xe=se.useRef(null),Be=se.useRef(0),P=se.useRef(!1),O=se.useRef(!1),ae=v?.type==="timeSlow"?W0(o)*2:W0(o),ue=se.useCallback(async _e=>{const he=Px(_e);if(he.length===0)return{result:null,newBoard:_e};let de=0,Re=0;const ye=[],Ce=[];let Oe=!1,Ve=_e.map(it=>[...it]);const Ae=he.flat(),{blocksToRemove:nt,updatedBoard:St}=Qx(Ae,Ve);Ve=St;for(const it of nt)ye.push({x:it.x,y:it.y,color:it.color}),Ve[it.y][it.x]=null,de++,it.specialType!=="normal"&&(Re++,it.specialType==="multiplier"&&(Oe=!0));B(ye);const vt=Hx(Ve,nt,o);Ve=vt.newBoard,de+=vt.additionalCleared.length,Ce.push(...vt.effects);for(const it of vt.additionalCleared)ye.push({x:it.x,y:it.y,color:it.color}),it.specialType!=="normal"&&Re++;const Mt=Fx(Ve,[...nt,...vt.additionalCleared]);Ve=Mt.newBoard,de+=Mt.destroyedStones.length;for(const it of Mt.destroyedStones)ye.push({x:it.x,y:it.y,color:it.color}),Re++;Ce.length>0&&X(Ce);const at=qx(Ve),$e=(v?.type==="scoreMultiplier"?2:1)*(Oe?2:1),fn=Ye.getState().chainCount,as=Ye.getState().combo,ci=Ye.getState().isFeverMode,It=bx({blocksCleared:de,chainCount:fn+1,comboCount:as,level:o,powerUpMultiplier:$e,perfectClear:at,isFeverMode:ci,specialBlocksCleared:Re}),Dn=Ye.getState().addFeverGauge;Dn&&Dn(de*3+(fn+1)*10),await new Promise(it=>setTimeout(it,qi.FUSION_ANIMATION_DURATION)),Ce.length>0&&await new Promise(it=>setTimeout(it,qi.SPECIAL_EFFECT_DURATION));const ca=Gx(Ve,m);return B([]),X([]),{result:{clearedBlocks:[...nt,...vt.additionalCleared,...Mt.destroyedStones],score:It,chainCount:fn+1,isChainReaction:fn>0,specialEffects:Ce},newBoard:ca}},[o,m,v]),ge=se.useCallback(async()=>{if(P.current)return;P.current=!0,N(!0);let _e=0,he=0,de=0,Re=Ye.getState().board;for(j();;){const{result:Ce,newBoard:Oe}=await ue(Re);if(!Ce)break;Re=Oe,b(Re),de++,_e+=Ce.score,he+=Ce.clearedBlocks.length,L(),Ue(de),await new Promise(Ve=>setTimeout(Ve,qi.CHAIN_DELAY))}if(_e>0){if(x(_e),E(),V({totalBlocksCleared:re.totalBlocksCleared+he,totalFusions:re.totalFusions+1,maxChain:Math.max(re.maxChain,de)}),W("blocks_fused",he),de>=5&&W("chain",1),Ye.getState().gameMode==="puzzle"){const Oe=Ye.getState();if($("score",_e),$("clearBlocks",he),de>0){const Ve=Oe.levelObjectives.find(Ae=>Ae.type==="chains");Ve&&de>Ve.current&&$("chains",de-Ve.current)}setTimeout(()=>{Ye.getState().checkPuzzleComplete()},100)}M("chain_5",de),M("chain_10",de),M("chain_15",de),M("chain_20",de),S(Math.floor(_e/100)),xe.current&&clearTimeout(xe.current),xe.current=window.setTimeout(()=>{A()},qi.COMBO_TIMEOUT)}Ue(0),N(!1),P.current=!1,Ye.getState().gameStatus==="playing"&&setTimeout(()=>{F()},50)},[ue,x,E,A,L,j,F,b,re,V,W,$,M,S]);se.useEffect(()=>{a.length>0?O.current=!0:O.current&&s==="playing"&&!P.current&&(O.current=!1,ge())},[a,s,ge]),se.useEffect(()=>{if(s!=="playing"||C){oe.current&&(clearInterval(oe.current),oe.current=null);return}Be.current=Date.now();const _e=()=>{const he=Date.now(),de=Ye.getState();de.currentBlocks.length>0&&!P.current&&he-Be.current>=ae&&(de.softDrop(),Be.current=he)};return oe.current=window.setInterval(_e,50),()=>{oe.current&&(clearInterval(oe.current),oe.current=null)}},[s,ae,C]),se.useEffect(()=>()=>{oe.current&&clearInterval(oe.current),xe.current&&clearTimeout(xe.current)},[]);const Te=se.useCallback(()=>{if(a.length===0)return null;const{dx:_e,dy:he}=dd[m];let de=1/0;for(const ye of a){let Ce=0,Oe=ye.x,Ve=ye.y;for(;;){const Ae=Oe+_e,nt=Ve+he;if(Ae<0||Ae>=me.COLUMNS||nt<0||nt>=me.ROWS||r[nt]?.[Ae]!==null)break;Ce++,Oe=Ae,Ve=nt}de=Math.min(de,Ce)}const Re=a[0];return{x:Re.x+_e*de,y:Re.y+he*de}},[a,r,m]);return{isProcessingFusion:C,fusionEffects:D,chainEffects:R,specialEffects:We,getGhostPosition:Te,dropSpeed:ae}}function Yx(r){const{gameStatus:t,moveBlock:a,softDrop:s,hardDrop:o,doHoldBlock:c,pauseGame:h,isPowerUpSelecting:m,setGravityDirection:v}=Ye(),{settings:b}=Yn(),x=se.useRef({startX:0,startY:0,startTime:0,lastTapTime:0,isDragging:!1}),E=se.useRef(null),A=se.useCallback(U=>{!b.hapticEnabled||!navigator.vibrate||navigator.vibrate(yx[U])},[b.hapticEnabled]),L=se.useCallback(U=>{if(t!=="playing")return;const V=U.touches[0],W=Date.now();x.current={startX:V.clientX,startY:V.clientY,startTime:W,lastTapTime:x.current.lastTapTime,isDragging:!1},E.current=window.setTimeout(()=>{A("medium"),c(),x.current.isDragging=!0},Gi.LONG_PRESS_DURATION)},[t,c,A]),j=se.useCallback(U=>{if(t!=="playing")return;const V=U.touches[0],{startX:W,startY:$,isDragging:ie}=x.current,ce=V.clientX-W,re=V.clientY-$,M=Math.abs(ce),S=Math.abs(re);if((M>10||S>10)&&E.current&&(clearTimeout(E.current),E.current=null),M>=Gi.SWIPE_THRESHOLD||S>=Gi.SWIPE_THRESHOLD){if(x.current.isDragging=!0,m){M>S?v(ce>0?"right":"left"):v(re>0?"down":"up"),x.current.startX=V.clientX,x.current.startY=V.clientY;return}M>S&&M>=Gi.SWIPE_THRESHOLD&&(ce>0?a("right"):a("left"),A("light"),x.current.startX=V.clientX),S>M&&S>=Gi.SWIPE_THRESHOLD&&(re>0&&(s(),A("light")),x.current.startY=V.clientY)}},[t,m,a,s,v,A]),F=se.useCallback(U=>{if(t!=="playing")return;E.current&&(clearTimeout(E.current),E.current=null);const{startX:V,startY:W,startTime:$,lastTapTime:ie,isDragging:ce}=x.current,re=Date.now(),M=re-$;if(!ce&&M<Gi.LONG_PRESS_DURATION){const S=U.changedTouches[0],C=Math.abs(S.clientX-V),N=Math.abs(S.clientY-W);C<10&&N<10&&(re-ie<Gi.DOUBLE_TAP_DELAY?(A("medium"),o()):A("selection"),x.current.lastTapTime=re)}if(ce){const C=U.changedTouches[0].clientY-W,N=C/M*1e3;C>0&&N>Gi.FAST_SWIPE_VELOCITY&&(A("heavy"),o())}x.current.isDragging=!1},[t,o,A]);return se.useEffect(()=>{const U=r.current;if(U)return U.addEventListener("touchstart",L,{passive:!0}),U.addEventListener("touchmove",j,{passive:!0}),U.addEventListener("touchend",F,{passive:!0}),()=>{U.removeEventListener("touchstart",L),U.removeEventListener("touchmove",j),U.removeEventListener("touchend",F),E.current&&clearTimeout(E.current)}},[r,L,j,F]),{triggerHaptic:A}}class Kx{audioContext=null;masterGain=null;musicGain=null;sfxGain=null;currentOscillators=[];constructor(){this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.musicGain=this.audioContext.createGain(),this.sfxGain=this.audioContext.createGain(),this.musicGain.connect(this.masterGain),this.sfxGain.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination)}catch{console.warn("Web Audio API not supported")}}resume(){this.audioContext?.state==="suspended"&&this.audioContext.resume()}setMusicVolume(t){this.musicGain&&(this.musicGain.gain.value=t)}setSfxVolume(t){this.sfxGain&&(this.sfxGain.gain.value=t)}playTone(t,a,s="sine",o=.3){if(!this.audioContext||!this.sfxGain)return;const c=this.audioContext.createOscillator(),h=this.audioContext.createGain();c.type=s,c.frequency.value=t,h.gain.setValueAtTime(o,this.audioContext.currentTime),h.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+a),c.connect(h),h.connect(this.sfxGain),c.start(),c.stop(this.audioContext.currentTime+a)}playSoundEffect(t){if(this.audioContext)switch(t){case"blockLand":this.playTone(200,.1,"triangle",.2);break;case"blockMove":this.playTone(400,.03,"sine",.1);break;case"blockRotate":this.playTone(600,.05,"sine",.15),setTimeout(()=>this.playTone(800,.05,"sine",.12),30);break;case"hardDrop":this.playTone(150,.08,"triangle",.25),setTimeout(()=>this.playTone(100,.1,"triangle",.2),50);break;case"fusion":this.playTone(440,.15,"sine",.3),setTimeout(()=>this.playTone(554,.15,"sine",.3),50),setTimeout(()=>this.playTone(659,.2,"sine",.3),100);break;case"chain":const a=330;for(let h=0;h<4;h++)setTimeout(()=>{this.playTone(a*Math.pow(1.2,h),.1,"sine",.25)},h*80);break;case"combo":this.playTone(523,.08,"square",.2),setTimeout(()=>this.playTone(659,.08,"square",.2),60);break;case"levelUp":[523,659,784,1047].forEach((h,m)=>{setTimeout(()=>this.playTone(h,.2,"sine",.3),m*100)});break;case"powerUpGet":this.playTone(880,.1,"sine",.3),setTimeout(()=>this.playTone(1100,.15,"sine",.3),80);break;case"powerUpUse":this.playTone(440,.1,"sawtooth",.2),setTimeout(()=>this.playTone(880,.2,"sawtooth",.3),100);break;case"gameOver":[440,415,392,370].forEach((h,m)=>{setTimeout(()=>this.playTone(h,.3,"sine",.25),m*200)});break;case"highScore":[523,659,784,880,1047].forEach((h,m)=>{setTimeout(()=>this.playTone(h,.2,"sine",.3),m*120)});break;case"achievement":this.playTone(659,.15,"sine",.3),setTimeout(()=>this.playTone(784,.15,"sine",.3),100),setTimeout(()=>this.playTone(1047,.25,"sine",.35),200);break;case"buttonClick":this.playTone(800,.05,"sine",.15);break;case"rewardGet":this.playTone(698,.1,"sine",.25),setTimeout(()=>this.playTone(880,.15,"sine",.3),80);break;case"purchaseSuccess":this.playTone(523,.1,"sine",.3),setTimeout(()=>this.playTone(659,.1,"sine",.3),100),setTimeout(()=>this.playTone(784,.2,"sine",.35),200);break;case"wheelSpin":this.playTone(300,.05,"triangle",.2);break;case"jackpot":for(let h=0;h<8;h++)setTimeout(()=>{this.playTone(440+h*100,.15,"sine",.3)},h*100);break}}startBGM(t=1){if(!this.audioContext||!this.musicGain)return;this.stopBGM();const s=60/(120+t*2),o=[261.63,293.66,329.63,392,440,523.25,587.33,659.25],h=setInterval(()=>{if(!this.audioContext||!this.musicGain)return;const m=this.audioContext.createOscillator(),v=this.audioContext.createGain();m.type="sine",m.frequency.value=o[0]/2,v.gain.setValueAtTime(.15,this.audioContext.currentTime),v.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s*.8),m.connect(v),v.connect(this.musicGain),m.start(),m.stop(this.audioContext.currentTime+s);const b=this.audioContext.createOscillator(),x=this.audioContext.createGain();b.type="triangle",b.frequency.value=o[Math.floor(Math.random()*o.length)],x.gain.setValueAtTime(.08,this.audioContext.currentTime),x.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s*.5),b.connect(x),x.connect(this.musicGain),b.start(),b.stop(this.audioContext.currentTime+s*.5),this.currentOscillators.push(m,b)},s*1e3);this.bgmInterval=h}stopBGM(){this.bgmInterval&&clearInterval(this.bgmInterval),this.currentOscillators.forEach(t=>{try{t.stop()}catch{}}),this.currentOscillators=[]}cleanup(){this.stopBGM(),this.audioContext&&this.audioContext.close()}}let Wh=null;function $x(){return Wh||(Wh=new Kx),Wh}function oa(){const{settings:r}=Yn(),t=se.useRef(null);se.useEffect(()=>{t.current=$x(),t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0);const c=()=>{t.current?.resume(),window.removeEventListener("click",c),window.removeEventListener("touchstart",c)};return window.addEventListener("click",c),window.addEventListener("touchstart",c),()=>{window.removeEventListener("click",c),window.removeEventListener("touchstart",c)}},[]),se.useEffect(()=>{t.current&&(t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0))},[r.soundEnabled,r.musicEnabled,r.soundVolume,r.musicVolume]);const a=se.useCallback(c=>{r.soundEnabled&&t.current&&t.current.playSoundEffect(c)},[r.soundEnabled]),s=se.useCallback((c=1)=>{r.musicEnabled&&t.current&&t.current.startBGM(c)},[r.musicEnabled]),o=se.useCallback(()=>{t.current?.stopBGM()},[]);return{playSound:a,startBGM:s,stopBGM:o}}const Zx={red:0,blue:1,green:2,yellow:3,purple:4,orange:3,cyan:1,pink:0,rainbow:0},lu=se.memo(function({color:t,size:a,isGhost:s=!1,isFusing:o=!1,isMatched:c=!1,specialType:h="normal",frozenCount:m=0}){const{settings:v,equippedSkinId:b}=Yn(),x=se.useMemo(()=>ho[b]||ho.classic,[b]),E=Zx[t]??0,A=x.colors[E]||x.colors[0],L=v.colorBlindMode?nx:Bd,j=v.colorBlindMode?L[t]:A,F=v.colorBlindMode?ax[t]:null,U=t==="rainbow",V=h!=="normal",W=_v[h],$=h==="frozen",ie=h==="stone";if(s)return g.jsx("div",{className:"absolute rounded-md box-border transition-all duration-75",style:{width:a-2,height:a-2,borderColor:j,borderWidth:"2px",borderStyle:"dashed",backgroundColor:`${j}15`,boxShadow:`0 0 10px ${j}40`}});if(ie)return g.jsxs(le.div,{className:"absolute rounded-md overflow-hidden",style:{width:a-2,height:a-2,background:"linear-gradient(145deg, #6c757d, #495057)",border:"2px solid #343a40"},initial:!1,animate:{scale:o?[1,1.1,0]:1},transition:{scale:{duration:.3}},children:[g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"}}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-lg",children:""})]});const ce=()=>{if(U)return"linear-gradient(135deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff)";if($)return`linear-gradient(145deg, ${j}90, ${j}60)`;switch(x.innerEffect){case"glow":return`radial-gradient(circle at 30% 30%, ${j}dd, ${j}88 70%, ${j}44)`;case"glass":return`linear-gradient(145deg, ${j}ee, ${j}aa 50%, ${j}cc)`;case"gradient":return`linear-gradient(135deg, ${j}, ${j}88, ${j}cc)`;case"flat":return j;case"metallic":return`linear-gradient(145deg, ${j}ff, ${j}66 30%, ${j}cc 70%, ${j}ff)`;case"matte":return`linear-gradient(180deg, ${j}ee, ${j}bb)`;default:return j}},re=()=>{if(x.glowIntensity<=0)return"none";const N=Math.round(x.glowIntensity*20);return`0 0 ${N}px ${j}, 0 0 ${N*2}px ${j}66`},M=()=>{switch(x.texture){case"lines":return"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.1) 2px, rgba(255,255,255,0.1) 4px)";case"dots":return"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.2) 1px, transparent 1px)";case"circuit":return"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%)";case"cracks":return"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.2) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.15) 61%, transparent 62%)";case"noise":return`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`;default:return"none"}},S=()=>{const N={scale:o?[1,1.2,0]:c?[1,1.1,1]:1,filter:o?"brightness(1.5)":"brightness(1)",rotate:U?360:0};switch(x.animation){case"pulse":return{...N,boxShadow:[`0 0 5px ${j}`,`0 0 20px ${j}`,`0 0 5px ${j}`]};case"shimmer":return N;case"fire":return{...N,y:[0,-2,0,-1,0]};case"ice":return{...N,opacity:[1,.9,1]};case"electric":return{...N,x:[-1,1,-1,0]};default:return N}},C=()=>{const N={scale:{duration:o?.3:.2},rotate:{duration:3,repeat:1/0,ease:"linear"}};switch(x.animation){case"pulse":return{...N,boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}};case"fire":return{...N,y:{duration:.3,repeat:1/0,ease:"easeInOut"}};case"ice":return{...N,opacity:{duration:2,repeat:1/0,ease:"easeInOut"}};case"electric":return{...N,x:{duration:.1,repeat:1/0}};default:return N}};return g.jsxs(le.div,{className:"absolute overflow-hidden block-3d",style:{width:a-2,height:a-2,borderRadius:x.borderRadius,background:ce(),opacity:o?.8:1,zIndex:o?10:1,border:$?"2px solid #a5d8ff":V?`2px solid ${W?.color||j}`:x.borderWidth>0?`${x.borderWidth}px ${x.borderStyle} ${j}88`:"none",boxShadow:V&&!$?`0 0 8px ${W?.color||j}60`:re()},initial:!1,animate:S(),transition:C(),children:[x.innerEffect==="glossy"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-transparent to-black/10 pointer-events-none"}),x.innerEffect==="glass"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent pointer-events-none"}),x.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30 pointer-events-none"}),g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius,border:x.innerEffect==="flat"?"none":"1px solid rgba(255,255,255,0.2)"}}),x.texture!=="none"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-50",style:{backgroundImage:M(),backgroundSize:x.texture==="dots"?"8px 8px":"100% 100%",borderRadius:x.borderRadius}}),x.animation==="shimmer"&&g.jsx(le.div,{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(110deg, transparent 20%, rgba(255,255,255,0.4) 50%, transparent 80%)",borderRadius:x.borderRadius},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}}),x.animation==="fire"&&g.jsx(le.div,{className:"absolute -inset-1 pointer-events-none",style:{background:`radial-gradient(ellipse at bottom, ${j}88 0%, transparent 70%)`,filter:"blur(2px)",borderRadius:x.borderRadius},animate:{opacity:[.5,.8,.5],scale:[1,1.1,1]},transition:{duration:.5,repeat:1/0}}),x.animation==="ice"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(200,230,255,0.2) 100%)",borderRadius:x.borderRadius}}),x.animation==="electric"&&g.jsx(le.div,{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius},animate:{boxShadow:[`inset 0 0 5px ${j}`,`inset 0 0 15px ${j}, 0 0 10px ${j}`,`inset 0 0 5px ${j}`]},transition:{duration:.2,repeat:1/0}}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-200/50 to-blue-300/30"}),g.jsx(le.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.4) 50%, transparent 60%)",backgroundSize:"200% 200%"},animate:{backgroundPosition:["0% 0%","200% 200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),m>0&&g.jsx("div",{className:"absolute bottom-0 right-0 bg-cyan-600 text-white text-xs font-bold px-1 rounded-tl",children:m})]}),V&&!$&&W?.icon&&g.jsx(le.div,{className:"absolute inset-0 flex items-center justify-center text-base drop-shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:W.icon}),o&&g.jsx(le.div,{className:"absolute inset-0 rounded-md",style:{boxShadow:`0 0 20px 5px ${j}`}}),F&&g.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{background:Jx(F)}}),V&&!$&&g.jsx(le.div,{className:"absolute inset-0 rounded-md pointer-events-none",animate:{boxShadow:[`0 0 5px ${W?.color||j}40`,`0 0 15px ${W?.color||j}60`,`0 0 5px ${W?.color||j}40`]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})});function Jx(r){switch(r){case"striped":return"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.3) 5px, rgba(0,0,0,0.3) 10px)";case"dotted":return"radial-gradient(circle, rgba(0,0,0,0.3) 2px, transparent 2.5px) 0 0 / 8px 8px";case"crosshatch":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px)";case"diagonal":return"repeating-linear-gradient(135deg, transparent, transparent 3px, rgba(255,255,255,0.5) 3px, rgba(255,255,255,0.5) 5px)";case"grid":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px)";case"waves":return"repeating-linear-gradient(45deg, transparent 0px, transparent 5px, rgba(255,255,255,0.3) 5px, rgba(255,255,255,0.3) 10px)";case"circles":return"radial-gradient(circle at 50% 50%, transparent 3px, rgba(255,255,255,0.3) 3px, rgba(255,255,255,0.3) 5px, transparent 5px)";default:return"none"}}function Wx({cellSize:r}){const t=se.useRef(null),{triggerHaptic:a}=Yx(t),{playSound:s,startBGM:o,stopBGM:c}=oa(),{board:h,currentBlock:m,currentBlocks:v,gameStatus:b,level:x,gravityDirection:E,isPowerUpSelecting:A,garbagePending:L,garbageTimer:j}=Ye(),{settings:F}=Yn(),{fusionEffects:U,chainEffects:V,specialEffects:W,getGhostPosition:$}=Xx(),ie=se.useMemo(()=>{if(r)return r;if(typeof window<"u"){const S=window.innerWidth<768,C=Math.min(window.innerWidth-32,450),N=window.innerHeight-200,D=Math.floor(C/me.COLUMNS),B=Math.floor(N/me.ROWS);return Math.min(D,B,S?38:45)}return 40},[r]),ce=ie*me.COLUMNS,re=ie*me.ROWS,M=se.useMemo(()=>F.showGhostBlock&&m?$():null,[m,F.showGhostBlock,$]);return se.useEffect(()=>{b==="playing"?o(x):c()},[b,x,o,c]),se.useEffect(()=>{U.length>0&&(s("fusion"),a("medium"))},[U,s,a]),se.useEffect(()=>{V>1&&(s("chain"),a("heavy"))},[V,s,a]),g.jsx("div",{className:"relative p-1 rounded-xl bg-gradient-to-b from-gray-800 to-gray-900 shadow-2xl border border-white/10",children:g.jsxs("div",{ref:t,className:"relative overflow-hidden rounded-lg bg-[#0a0a15] select-none touch-none",style:{width:ce,height:re},children:[g.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:g.jsxs("svg",{width:"100%",height:"100%",children:[g.jsx("defs",{children:g.jsx("pattern",{id:"grid",width:ie,height:ie,patternUnits:"userSpaceOnUse",children:g.jsx("path",{d:`M ${ie} 0 L 0 0 0 ${ie}`,fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"})})}),g.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),E==="down"&&g.jsx("div",{className:"absolute top-0 left-0 right-0 pointer-events-none transition-opacity duration-500",style:{height:ie*3,background:"linear-gradient(to bottom, rgba(255, 50, 50, 0.15) 0%, transparent 100%)",borderBottom:"1px dashed rgba(255, 50, 50, 0.3)"}}),M&&m&&M.y!==m.y&&g.jsx("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:M.x*ie+1,top:M.y*ie+1,zIndex:0},children:g.jsx(lu,{color:m.color,size:ie,isGhost:!0})}),g.jsx(un,{children:h.map((S,C)=>S.map((N,D)=>{if(!N)return null;const B=U.some(R=>R.x===D&&R.y===C);return g.jsx(le.div,{className:"absolute",style:{left:D*ie+1,top:C*ie+1,zIndex:10},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:g.jsx(lu,{color:N.color,size:ie,isFusing:B,specialType:N.specialType,frozenCount:N.frozenCount})},N.id)}))}),g.jsx(un,{children:v.map((S,C)=>g.jsx(le.div,{className:"absolute pointer-events-none",style:{left:S.x*ie+1,top:S.y*ie+1,zIndex:20},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.05},children:g.jsx(lu,{color:S.color,size:ie,specialType:S.specialType})},S.id||`falling-${C}`))}),L>0&&g.jsx(le.div,{className:"absolute bottom-0 left-0 right-0 flex justify-center items-center gap-1 py-1 bg-red-600/80 backdrop-blur-sm z-25",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:g.jsxs("span",{className:"text-white text-xs font-bold",children:[" GARBAGE INCOMING: ",L," ROW",L>1?"S":""]})}),g.jsx("div",{className:"absolute inset-0 pointer-events-none z-30",children:g.jsxs(un,{children:[U.map((S,C)=>g.jsx(le.div,{className:"absolute rounded-full blur-md",style:{left:S.x*ie,top:S.y*ie,width:ie,height:ie,backgroundColor:Bd[S.color]||"#fff"},initial:{scale:.5,opacity:.8},animate:{scale:2.5,opacity:0},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"}},`fusion-${C}`)),V>1&&g.jsx(le.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:.5,opacity:0,y:20},animate:{scale:1.2,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:g.jsxs("div",{className:"text-center",children:[g.jsxs("h2",{className:"text-5xl font-black italic text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-orange-500 drop-shadow-[0_0_15px_rgba(255,165,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:[V," CHAIN!"]}),g.jsx("p",{className:"text-white font-bold text-lg drop-shadow-md",children:"COMBO BOOSTER"})]})}),W.map((S,C)=>g.jsxs(le.div,{className:"absolute pointer-events-none",style:{left:S.x*ie,top:S.y*ie,width:ie,height:ie},initial:{scale:1,opacity:1},animate:{scale:2.5,opacity:0},transition:{duration:.5},children:[S.type==="bomb"&&g.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-orange-500 to-red-600 blur-md"}),S.type==="lightning"&&g.jsx("div",{className:"w-full h-full bg-yellow-400 blur-lg animate-pulse"}),S.type==="cross"&&g.jsxs("div",{className:"w-full h-full",children:[g.jsx("div",{className:"absolute inset-x-0 top-1/2 h-2 -translate-y-1/2 bg-green-400 blur-sm"}),g.jsx("div",{className:"absolute inset-y-0 left-1/2 w-2 -translate-x-1/2 bg-green-400 blur-sm"})]})]},`special-${C}`))]})}),g.jsx(un,{children:A&&g.jsx(le.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-white font-bold text-xl mb-6 neon-text",children:"  "}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsx("div",{}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("up"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("div",{}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("left"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("down"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>Ye.getState().setGravityDirection("right"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""})]})]})})}),b==="paused"&&g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] z-30 flex items-center justify-center",children:g.jsx("h2",{className:"text-3xl font-bold text-white tracking-widest",style:{fontFamily:"var(--font-display)"},children:"PAUSED"})})]})})}function sy({cellSize:r=24,maxBlocks:t=gx}){const{nextBlocks:a,nextSpecialTypes:s}=Ye(),o=a.slice(0,t),c=s?.slice(0,t)||[];return g.jsxs("div",{className:"glass-panel rounded-xl p-3 flex flex-col items-center min-w-[60px]",children:[g.jsx("h3",{className:"text-[10px] font-bold text-gray-400 mb-3 tracking-widest text-center",children:"NEXT"}),g.jsx("div",{className:"flex flex-col gap-3 items-center",children:o.map((h,m)=>g.jsxs(le.div,{className:"relative",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:m*.1},style:{transform:`scale(${m===0?1:.8})`,opacity:m===0?1:.6,filter:m===0?"none":"grayscale(30%)"},children:[g.jsx(lu,{color:h,size:r,specialType:c[m]||"normal"}),m===0&&g.jsx("div",{className:"absolute -inset-2 rounded-full border border-white/20 animate-pulse pointer-events-none"})]},`next-${m}`))})]})}const eE=150;function tE({visible:r=!0}){const{playSound:t}=oa(),a=se.useRef(null),s=se.useRef({}),o=se.useCallback((E,A)=>{const L=Date.now(),j=s.current[E]||0;return L-j<eE?!1:(s.current[E]=L,A(),!0)},[]);se.useEffect(()=>{const E=new Set;let A=null,L=null,j=null;const F=()=>{A&&clearInterval(A),j&&clearTimeout(j),A=null,j=null,L=null},U=$=>{if(E.has($.code)){$.preventDefault();return}E.add($.code);const ie=Ye.getState();if($.code==="Escape"||$.code==="KeyP"){ie.gameStatus==="playing"?ie.pauseGame():ie.gameStatus==="paused"&&ie.resumeGame();return}if(ie.gameStatus==="playing"){if(ie.isPowerUpSelecting){$.code==="ArrowUp"?ie.setGravityDirection("up"):$.code==="ArrowDown"?ie.setGravityDirection("down"):$.code==="ArrowLeft"?ie.setGravityDirection("left"):$.code==="ArrowRight"&&ie.setGravityDirection("right");return}if($.code==="ArrowLeft"||$.code==="KeyA"){$.preventDefault(),F(),ie.moveBlock("left"),L="left",j=window.setTimeout(()=>{L==="left"&&(A=window.setInterval(()=>Ye.getState().moveBlock("left"),50))},250);return}if($.code==="ArrowRight"||$.code==="KeyD"){$.preventDefault(),F(),ie.moveBlock("right"),L="right",j=window.setTimeout(()=>{L==="right"&&(A=window.setInterval(()=>{Ye.getState().moveBlock("right")},50))},250);return}if($.code==="ArrowDown"||$.code==="KeyS"){$.preventDefault(),ie.softDrop();return}if($.code==="ArrowUp"||$.code==="KeyW"){$.preventDefault(),ie.rotateBlock();return}if($.code==="Space"){$.preventDefault(),ie.hardDrop();return}}},V=$=>{E.delete($.code),($.code==="ArrowLeft"||$.code==="KeyA")&&L==="left"&&F(),($.code==="ArrowRight"||$.code==="KeyD")&&L==="right"&&F()},W=()=>{E.clear(),F()};return window.addEventListener("keydown",U),window.addEventListener("keyup",V),window.addEventListener("blur",W),()=>{window.removeEventListener("keydown",U),window.removeEventListener("keyup",V),window.removeEventListener("blur",W),F()}},[]);const c=se.useCallback(()=>{o("hardDrop",()=>{t("hardDrop"),Ye.getState().hardDrop()})},[t,o]),h=se.useCallback(()=>{o("rotate",()=>{t("blockRotate"),Ye.getState().rotateBlock()})},[t,o]),m=se.useCallback(()=>{o("softDrop",()=>{t("blockMove"),Ye.getState().softDrop()})},[t,o]),v=se.useCallback(E=>{t("blockMove"),Ye.getState().moveBlock(E),a.current&&clearInterval(a.current),a.timeout&&clearTimeout(a.timeout);const A=setTimeout(()=>{a.current=window.setInterval(()=>{Ye.getState().moveBlock(E)},80)},300);a.timeout=A},[t]),b=se.useCallback(()=>{a.timeout&&(clearTimeout(a.timeout),a.timeout=null),a.current&&(clearInterval(a.current),a.current=null)},[]),x=Ye(E=>E.currentBlocks);return r?g.jsx("div",{className:"w-full px-3 pb-4 pt-2 select-none touch-none",children:g.jsxs("div",{className:"flex justify-between items-center gap-3 max-w-md mx-auto",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(ed,{icon:"",onStart:()=>v("left"),onEnd:b}),g.jsx(ed,{icon:"",onStart:m}),g.jsx(ed,{icon:"",onStart:()=>v("right"),onEnd:b})]}),g.jsxs(le.button,{className:`w-14 h-14 rounded-2xl flex flex-col items-center justify-center
                     text-white font-bold shadow-lg border-b-4
                     active:border-b-0 active:translate-y-1 transition-all
                     ${x.length>1?"bg-gradient-to-br from-purple-500 to-indigo-600 border-purple-700":"bg-slate-700 border-slate-600 opacity-50"}`,whileTap:{scale:.9},onTouchStart:E=>{E.preventDefault(),E.stopPropagation(),h()},children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-[8px] opacity-80",children:""})]}),g.jsxs(le.button,{className:`w-20 h-14 rounded-2xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500\r
                     flex items-center justify-center gap-1 text-white font-bold\r
                     shadow-lg shadow-orange-500/30 border-b-4 border-orange-700\r
                     active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.95},onTouchStart:E=>{E.preventDefault(),E.stopPropagation(),c()},children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-sm",children:"DROP"})]})]})}):null}function ed({icon:r,onStart:t,onEnd:a}){const s=se.useCallback(c=>{c.preventDefault(),c.stopPropagation(),t()},[t]),o=se.useCallback(c=>{c.preventDefault(),c.stopPropagation(),a?.()},[a]);return g.jsx(le.button,{className:`w-14 h-14 rounded-2xl bg-slate-700/90 backdrop-blur\r
                 flex items-center justify-center text-white text-2xl font-bold\r
                 shadow-lg border-b-4 border-slate-600\r
                 active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.9},onTouchStart:s,onTouchEnd:o,onTouchCancel:o,children:r})}function nE(){const{powerUps:r,gameStatus:t,usePowerUp:a,toggleGravitySelection:s,activatePowerUp:o}=Ye(),{playSound:c}=oa(),h=m=>{if(t!=="playing")return;const v=r.find(b=>b.type===m);if(!(!v||v.count<=0)){if(c("powerUpUse"),m==="gravityShift"){s(!0),a(m);return}a(m),(m==="timeSlow"||m==="scoreMultiplier"||m==="freeze")&&(o({type:m,count:1,isActive:!0,remainingTime:m==="scoreMultiplier"?30:5}),setTimeout(()=>{Ye.getState().deactivatePowerUp()},m==="scoreMultiplier"?3e4:5e3))}};return r.length===0?null:g.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:g.jsx(un,{children:r.map(m=>{const v=mx[m.type];return g.jsxs(le.button,{className:`relative flex flex-col items-center gap-1 p-2 bg-game-panel/80 rounded-lg\r
                         hover:bg-game-accent/30 active:scale-95 transition-all border border-white/10\r
                         disabled:opacity-50 disabled:cursor-not-allowed`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:()=>h(m.type),disabled:t!=="playing"||m.count<=0,title:`${v.name}: ${v.description}`,children:[g.jsx("span",{className:"text-2xl",children:v.icon}),g.jsx("span",{className:"text-xs text-gray-400",children:v.name}),g.jsx("span",{className:`absolute -top-1 -right-1 w-5 h-5 bg-game-accent rounded-full\r
                             text-xs font-bold flex items-center justify-center text-white`,children:m.count})]},m.type)})})})}function aE(){const{score:r,level:t,combo:a,chainCount:s,gravityDirection:o,gameTime:c,activePowerUp:h,statistics:m,feverGauge:v,isFeverMode:b,gameMode:x,movesRemaining:E,puzzleLevel:A,levelObjectives:L}=Ye(),j=x==="puzzle",F=V=>{const W=Math.floor(V/60),$=V%60;return`${W}:${$.toString().padStart(2,"0")}`},U=r>m.highScore&&r>0;return g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsxs("div",{className:"glass-panel p-4 rounded-xl text-center relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 tracking-wider mb-1",children:"SCORE"}),g.jsx(le.p,{initial:{scale:1.1},animate:{scale:1},className:`text-2xl font-mono font-bold ${U?"text-yellow-400 neon-text":"text-white"}`,children:r.toLocaleString()},r),U&&g.jsx("span",{className:"absolute top-2 right-2 text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded font-bold animate-pulse",children:"NEW"})]}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:j?g.jsxs(g.Fragment,{children:[g.jsx(eu,{label:"PUZZLE",value:`Lv.${A}`,color:"text-purple-400"}),g.jsx(eu,{label:"MOVES",value:E,color:E<=5?"text-red-400":"text-yellow-400"})]}):g.jsxs(g.Fragment,{children:[g.jsx(eu,{label:"LEVEL",value:t,color:"text-cyan-400"}),g.jsx(eu,{label:"TIME",value:F(c),color:"text-gray-300",font:"font-mono"})]})}),j&&L.length>0&&g.jsxs("div",{className:"glass-panel p-3 rounded-xl",children:[g.jsx("p",{className:"text-xs font-bold text-purple-300 mb-2",children:" OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:L.map((V,W)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${V.completed?"bg-green-500":"bg-gray-600"}`,children:V.completed?"":""}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center text-xs",children:[g.jsxs("span",{className:"text-gray-300",children:[V.type==="score"&&"",V.type==="clearBlocks"&&" ",V.type==="chains"&&"",V.type==="clearColor"&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"w-3 h-3 rounded",style:{background:Bd[V.color]}})," "]})]}),g.jsxs("span",{className:V.completed?"text-green-400":"text-white",children:[V.current,"/",V.target]})]}),g.jsx("div",{className:"w-full bg-gray-700 h-1 rounded-full mt-1 overflow-hidden",children:g.jsx("div",{className:`h-full ${V.completed?"bg-green-500":"bg-purple-500"}`,style:{width:`${Math.min(100,V.current/V.target*100)}%`}})})]})]},W))})]}),g.jsx(un,{children:(a>1||s>0)&&g.jsxs(le.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex gap-2",children:[a>1&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-orange-900/20 border-orange-500/30",children:[g.jsx("span",{className:"text-[10px] text-orange-300",children:"COMBO"}),g.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["x",a]})]}),s>0&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-purple-900/20 border-purple-500/30",children:[g.jsx("span",{className:"text-[10px] text-purple-300",children:"CHAIN"}),g.jsx("span",{className:"text-lg font-bold text-purple-400",children:s})]})]})}),g.jsxs("div",{className:`glass-panel p-3 rounded-xl ${b?"border-2 border-orange-500 bg-orange-900/30":""}`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:`text-xs font-bold ${b?"text-orange-300":"text-gray-400"}`,children:b?" FEVER MODE!":"FEVER GAUGE"}),g.jsxs("span",{className:`text-xs font-mono ${b?"text-orange-400":"text-gray-500"}`,children:[Math.floor(v||0),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-700/50 h-3 rounded-full overflow-hidden",children:g.jsx(le.div,{className:`h-full ${b?"bg-gradient-to-r from-orange-500 via-red-500 to-yellow-500":"bg-gradient-to-r from-orange-600 to-yellow-500"}`,initial:!1,animate:{width:`${Math.min(v||0,Vs.MAX_GAUGE)}%`},transition:{duration:.3},style:{boxShadow:b?"0 0 10px #ff6b00":"none"}})}),b&&g.jsx(le.p,{className:"text-center text-xs text-orange-300 mt-1 font-bold",animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},children:"x3 SCORE MULTIPLIER!"})]}),g.jsxs("div",{className:"glass-panel p-3 rounded-xl flex items-center justify-between",children:[g.jsx("span",{className:"text-xs text-gray-400",children:"GRAVITY"}),g.jsx(le.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},className:"text-xl bg-white/10 w-8 h-8 rounded flex items-center justify-center",children:px[o]},o)]}),g.jsx(un,{children:h&&g.jsxs(le.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"glass-panel p-3 rounded-xl border-l-4 border-blue-500 bg-blue-900/20",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-xs font-bold text-blue-300",children:"ACTIVE EFFECT"}),h.remainingTime&&g.jsxs("span",{className:"text-xs font-mono text-white",children:[h.remainingTime,"s"]})]}),g.jsxs("div",{className:"text-sm text-white font-medium flex items-center gap-2",children:[h.type==="timeSlow"&&" Time Slow",h.type==="scoreMultiplier"&&" x2 Score",h.type==="freeze"&&" Frozen"]}),h.remainingTime&&g.jsx("div",{className:"w-full bg-gray-700 h-1 mt-2 rounded-full overflow-hidden",children:g.jsx(le.div,{className:"h-full bg-blue-400",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:h.remainingTime,ease:"linear"}})})]})})]})}function eu({label:r,value:t,color:a,font:s=""}){return g.jsxs("div",{className:"glass-panel p-2 rounded-lg text-center flex flex-col justify-center min-h-[60px]",children:[g.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-0.5",children:r}),g.jsx("p",{className:`text-lg font-bold ${a} ${s}`,children:t})]})}var zd={};(function r(t,a,s,o){var c=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=(function(){if(!t.OffscreenCanvas)return!1;try{var P=new OffscreenCanvas(1,1),O=P.getContext("2d");O.fillRect(0,0,1,1);var ae=P.transferToImageBitmap();O.createPattern(ae,"no-repeat")}catch{return!1}return!0})();function v(){}function b(P){var O=a.exports.Promise,ae=O!==void 0?O:t.Promise;return typeof ae=="function"?new ae(P):(P(v,v),null)}var x=(function(P,O){return{transform:function(ae){if(P)return ae;if(O.has(ae))return O.get(ae);var ue=new OffscreenCanvas(ae.width,ae.height),ge=ue.getContext("2d");return ge.drawImage(ae,0,0),O.set(ae,ue),ue},clear:function(){O.clear()}}})(m,new Map),E=(function(){var P=Math.floor(16.666666666666668),O,ae,ue={},ge=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(O=function(Te){var _e=Math.random();return ue[_e]=requestAnimationFrame(function he(de){ge===de||ge+P-1<de?(ge=de,delete ue[_e],Te()):ue[_e]=requestAnimationFrame(he)}),_e},ae=function(Te){ue[Te]&&cancelAnimationFrame(ue[Te])}):(O=function(Te){return setTimeout(Te,P)},ae=function(Te){return clearTimeout(Te)}),{frame:O,cancel:ae}})(),A=(function(){var P,O,ae={};function ue(ge){function Te(_e,he){ge.postMessage({options:_e||{},callback:he})}ge.init=function(he){var de=he.transferControlToOffscreen();ge.postMessage({canvas:de},[de])},ge.fire=function(he,de,Re){if(O)return Te(he,null),O;var ye=Math.random().toString(36).slice(2);return O=b(function(Ce){function Oe(Ve){Ve.data.callback===ye&&(delete ae[ye],ge.removeEventListener("message",Oe),O=null,x.clear(),Re(),Ce())}ge.addEventListener("message",Oe),Te(he,ye),ae[ye]=Oe.bind(null,{data:{callback:ye}})}),O},ge.reset=function(){ge.postMessage({reset:!0});for(var he in ae)ae[he](),delete ae[he]}}return function(){if(P)return P;if(!s&&c){var ge=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([ge])))}catch(Te){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Te),null}ue(P)}return P}})(),L={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function j(P,O){return O?O(P):P}function F(P){return P!=null}function U(P,O,ae){return j(P&&F(P[O])?P[O]:L[O],ae)}function V(P){return P<0?0:Math.floor(P)}function W(P,O){return Math.floor(Math.random()*(O-P))+P}function $(P){return parseInt(P,16)}function ie(P){return P.map(ce)}function ce(P){var O=String(P).replace(/[^0-9a-f]/gi,"");return O.length<6&&(O=O[0]+O[0]+O[1]+O[1]+O[2]+O[2]),{r:$(O.substring(0,2)),g:$(O.substring(2,4)),b:$(O.substring(4,6))}}function re(P){var O=U(P,"origin",Object);return O.x=U(O,"x",Number),O.y=U(O,"y",Number),O}function M(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function S(P){var O=P.getBoundingClientRect();P.width=O.width,P.height=O.height}function C(P){var O=document.createElement("canvas");return O.style.position="fixed",O.style.top="0px",O.style.left="0px",O.style.pointerEvents="none",O.style.zIndex=P,O}function N(P,O,ae,ue,ge,Te,_e,he,de){P.save(),P.translate(O,ae),P.rotate(Te),P.scale(ue,ge),P.arc(0,0,1,_e,he,de),P.restore()}function D(P){var O=P.angle*(Math.PI/180),ae=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-O+(.5*ae-Math.random()*ae),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function B(P,O){O.x+=Math.cos(O.angle2D)*O.velocity+O.drift,O.y+=Math.sin(O.angle2D)*O.velocity+O.gravity,O.velocity*=O.decay,O.flat?(O.wobble=0,O.wobbleX=O.x+10*O.scalar,O.wobbleY=O.y+10*O.scalar,O.tiltSin=0,O.tiltCos=0,O.random=1):(O.wobble+=O.wobbleSpeed,O.wobbleX=O.x+10*O.scalar*Math.cos(O.wobble),O.wobbleY=O.y+10*O.scalar*Math.sin(O.wobble),O.tiltAngle+=.1,O.tiltSin=Math.sin(O.tiltAngle),O.tiltCos=Math.cos(O.tiltAngle),O.random=Math.random()+2);var ae=O.tick++/O.totalTicks,ue=O.x+O.random*O.tiltCos,ge=O.y+O.random*O.tiltSin,Te=O.wobbleX+O.random*O.tiltCos,_e=O.wobbleY+O.random*O.tiltSin;if(P.fillStyle="rgba("+O.color.r+", "+O.color.g+", "+O.color.b+", "+(1-ae)+")",P.beginPath(),h&&O.shape.type==="path"&&typeof O.shape.path=="string"&&Array.isArray(O.shape.matrix))P.fill(oe(O.shape.path,O.shape.matrix,O.x,O.y,Math.abs(Te-ue)*.1,Math.abs(_e-ge)*.1,Math.PI/10*O.wobble));else if(O.shape.type==="bitmap"){var he=Math.PI/10*O.wobble,de=Math.abs(Te-ue)*.1,Re=Math.abs(_e-ge)*.1,ye=O.shape.bitmap.width*O.scalar,Ce=O.shape.bitmap.height*O.scalar,Oe=new DOMMatrix([Math.cos(he)*de,Math.sin(he)*de,-Math.sin(he)*Re,Math.cos(he)*Re,O.x,O.y]);Oe.multiplySelf(new DOMMatrix(O.shape.matrix));var Ve=P.createPattern(x.transform(O.shape.bitmap),"no-repeat");Ve.setTransform(Oe),P.globalAlpha=1-ae,P.fillStyle=Ve,P.fillRect(O.x-ye/2,O.y-Ce/2,ye,Ce),P.globalAlpha=1}else if(O.shape==="circle")P.ellipse?P.ellipse(O.x,O.y,Math.abs(Te-ue)*O.ovalScalar,Math.abs(_e-ge)*O.ovalScalar,Math.PI/10*O.wobble,0,2*Math.PI):N(P,O.x,O.y,Math.abs(Te-ue)*O.ovalScalar,Math.abs(_e-ge)*O.ovalScalar,Math.PI/10*O.wobble,0,2*Math.PI);else if(O.shape==="star")for(var Ae=Math.PI/2*3,nt=4*O.scalar,St=8*O.scalar,vt=O.x,Mt=O.y,at=5,$e=Math.PI/at;at--;)vt=O.x+Math.cos(Ae)*St,Mt=O.y+Math.sin(Ae)*St,P.lineTo(vt,Mt),Ae+=$e,vt=O.x+Math.cos(Ae)*nt,Mt=O.y+Math.sin(Ae)*nt,P.lineTo(vt,Mt),Ae+=$e;else P.moveTo(Math.floor(O.x),Math.floor(O.y)),P.lineTo(Math.floor(O.wobbleX),Math.floor(ge)),P.lineTo(Math.floor(Te),Math.floor(_e)),P.lineTo(Math.floor(ue),Math.floor(O.wobbleY));return P.closePath(),P.fill(),O.tick<O.totalTicks}function R(P,O,ae,ue,ge){var Te=O.slice(),_e=P.getContext("2d"),he,de,Re=b(function(ye){function Ce(){he=de=null,_e.clearRect(0,0,ue.width,ue.height),x.clear(),ge(),ye()}function Oe(){s&&!(ue.width===o.width&&ue.height===o.height)&&(ue.width=P.width=o.width,ue.height=P.height=o.height),!ue.width&&!ue.height&&(ae(P),ue.width=P.width,ue.height=P.height),_e.clearRect(0,0,ue.width,ue.height),Te=Te.filter(function(Ve){return B(_e,Ve)}),Te.length?he=E.frame(Oe):Ce()}he=E.frame(Oe),de=Ce});return{addFettis:function(ye){return Te=Te.concat(ye),Re},canvas:P,promise:Re,reset:function(){he&&E.cancel(he),de&&de()}}}function Ue(P,O){var ae=!P,ue=!!U(O||{},"resize"),ge=!1,Te=U(O,"disableForReducedMotion",Boolean),_e=c&&!!U(O||{},"useWorker"),he=_e?A():null,de=ae?M:S,Re=P&&he?!!P.__confetti_initialized:!1,ye=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ce;function Oe(Ae,nt,St){for(var vt=U(Ae,"particleCount",V),Mt=U(Ae,"angle",Number),at=U(Ae,"spread",Number),$e=U(Ae,"startVelocity",Number),fn=U(Ae,"decay",Number),as=U(Ae,"gravity",Number),ci=U(Ae,"drift",Number),It=U(Ae,"colors",ie),Dn=U(Ae,"ticks",Number),ca=U(Ae,"shapes"),it=U(Ae,"scalar"),ua=!!U(Ae,"flat"),Hs=re(Ae),is=vt,ui=[],Fs=P.width*Hs.x,En=P.height*Hs.y;is--;)ui.push(D({x:Fs,y:En,angle:Mt,spread:at,startVelocity:$e,color:It[is%It.length],shape:ca[W(0,ca.length)],ticks:Dn,decay:fn,gravity:as,drift:ci,scalar:it,flat:ua}));return Ce?Ce.addFettis(ui):(Ce=R(P,ui,de,nt,St),Ce.promise)}function Ve(Ae){var nt=Te||U(Ae,"disableForReducedMotion",Boolean),St=U(Ae,"zIndex",Number);if(nt&&ye)return b(function($e){$e()});ae&&Ce?P=Ce.canvas:ae&&!P&&(P=C(St),document.body.appendChild(P)),ue&&!Re&&de(P);var vt={width:P.width,height:P.height};he&&!Re&&he.init(P),Re=!0,he&&(P.__confetti_initialized=!0);function Mt(){if(he){var $e={getBoundingClientRect:function(){if(!ae)return P.getBoundingClientRect()}};de($e),he.postMessage({resize:{width:$e.width,height:$e.height}});return}vt.width=vt.height=null}function at(){Ce=null,ue&&(ge=!1,t.removeEventListener("resize",Mt)),ae&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,Re=!1)}return ue&&!ge&&(ge=!0,t.addEventListener("resize",Mt,!1)),he?he.fire(Ae,vt,at):Oe(Ae,vt,at)}return Ve.reset=function(){he&&he.reset(),Ce&&Ce.reset()},Ve}var We;function X(){return We||(We=Ue(null,{useWorker:!0,resize:!0})),We}function oe(P,O,ae,ue,ge,Te,_e){var he=new Path2D(P),de=new Path2D;de.addPath(he,new DOMMatrix(O));var Re=new Path2D;return Re.addPath(de,new DOMMatrix([Math.cos(_e)*ge,Math.sin(_e)*ge,-Math.sin(_e)*Te,Math.cos(_e)*Te,ae,ue])),Re}function xe(P){if(!h)throw new Error("path confetti are not supported in this browser");var O,ae;typeof P=="string"?O=P:(O=P.path,ae=P.matrix);var ue=new Path2D(O),ge=document.createElement("canvas"),Te=ge.getContext("2d");if(!ae){for(var _e=1e3,he=_e,de=_e,Re=0,ye=0,Ce,Oe,Ve=0;Ve<_e;Ve+=2)for(var Ae=0;Ae<_e;Ae+=2)Te.isPointInPath(ue,Ve,Ae,"nonzero")&&(he=Math.min(he,Ve),de=Math.min(de,Ae),Re=Math.max(Re,Ve),ye=Math.max(ye,Ae));Ce=Re-he,Oe=ye-de;var nt=10,St=Math.min(nt/Ce,nt/Oe);ae=[St,0,0,St,-Math.round(Ce/2+he)*St,-Math.round(Oe/2+de)*St]}return{type:"path",path:O,matrix:ae}}function Be(P){var O,ae=1,ue="#000000",ge='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?O=P:(O=P.text,ae="scalar"in P?P.scalar:ae,ge="fontFamily"in P?P.fontFamily:ge,ue="color"in P?P.color:ue);var Te=10*ae,_e=""+Te+"px "+ge,he=new OffscreenCanvas(Te,Te),de=he.getContext("2d");de.font=_e;var Re=de.measureText(O),ye=Math.ceil(Re.actualBoundingBoxRight+Re.actualBoundingBoxLeft),Ce=Math.ceil(Re.actualBoundingBoxAscent+Re.actualBoundingBoxDescent),Oe=2,Ve=Re.actualBoundingBoxLeft+Oe,Ae=Re.actualBoundingBoxAscent+Oe;ye+=Oe+Oe,Ce+=Oe+Oe,he=new OffscreenCanvas(ye,Ce),de=he.getContext("2d"),de.font=_e,de.fillStyle=ue,de.fillText(O,Ve,Ae);var nt=1/ae;return{type:"bitmap",bitmap:he.transferToImageBitmap(),matrix:[nt,0,0,nt,-ye*nt/2,-Ce*nt/2]}}a.exports=function(){return X().apply(this,arguments)},a.exports.reset=function(){X().reset()},a.exports.create=Ue,a.exports.shapeFromPath=xe,a.exports.shapeFromText=Be})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),zd,!1);const Pd=zd.exports;zd.exports.create;const iE=()=>{};var ry={};const Tv=function(r){const t=[];let a=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[a++]=o:o<2048?(t[a++]=o>>6|192,t[a++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[a++]=o>>18|240,t[a++]=o>>12&63|128,t[a++]=o>>6&63|128,t[a++]=o&63|128):(t[a++]=o>>12|224,t[a++]=o>>6&63|128,t[a++]=o&63|128)}return t},sE=function(r){const t=[];let a=0,s=0;for(;a<r.length;){const o=r[a++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[a++];t[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[a++],h=r[a++],m=r[a++],v=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(v>>10)),t[s++]=String.fromCharCode(56320+(v&1023))}else{const c=r[a++],h=r[a++];t[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return t.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],h=o+1<r.length,m=h?r[o+1]:0,v=o+2<r.length,b=v?r[o+2]:0,x=c>>2,E=(c&3)<<4|m>>4;let A=(m&15)<<2|b>>6,L=b&63;v||(L=64,h||(A=64)),s.push(a[x],a[E],a[A],a[L])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Tv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):sE(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=a[r.charAt(o++)],m=o<r.length?a[r.charAt(o)]:0;++o;const b=o<r.length?a[r.charAt(o)]:64;++o;const E=o<r.length?a[r.charAt(o)]:64;if(++o,c==null||m==null||b==null||E==null)throw new rE;const A=c<<2|m>>4;if(s.push(A),b!==64){const L=m<<4&240|b>>2;if(s.push(L),E!==64){const j=b<<6&192|E;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class rE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lE=function(r){const t=Tv(r);return Sv.encodeByteArray(t,!0)},yu=function(r){return lE(r).replace(/\./g,"")},oE=function(r){try{return Sv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function cE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const uE=()=>cE().__FIREBASE_DEFAULTS__,fE=()=>{if(typeof process>"u"||typeof ry>"u")return;const r=ry.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&oE(r[1]);return t&&JSON.parse(t)},Gd=()=>{try{return iE()||uE()||fE()||hE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},dE=r=>Gd()?.emulatorHosts?.[r],mE=r=>{const t=dE(r);if(!t)return;const a=t.lastIndexOf(":");if(a<=0||a+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(a+1),10);return t[0]==="["?[t.substring(1,a-1),s]:[t.substring(0,a),s]},wv=()=>Gd()?.config;class pE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,s)=>{a?this.reject(a):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,s))}}}function qd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gE(r){return(await fetch(r,{credentials:"include"})).ok}function yE(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[yu(JSON.stringify(a)),yu(JSON.stringify(h)),""].join(".")}const ro={};function vE(){const r={prod:[],emulator:[]};for(const t of Object.keys(ro))ro[t]?r.emulator.push(t):r.prod.push(t);return r}function _E(r){let t=document.getElementById(r),a=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),a=!0),{created:a,element:t}}let ly=!1;function bE(r,t){if(typeof window>"u"||typeof document>"u"||!qd(window.location.host)||ro[r]===t||ro[r]||ly)return;ro[r]=t;function a(A){return`__firebase__banner__${A}`}const s="__firebase__banner",c=vE().prod.length>0;function h(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,L){A.setAttribute("width","24"),A.setAttribute("id",L),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function b(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{ly=!0,h()},A}function x(A,L){A.setAttribute("id",L),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=_E(s),L=a("text"),j=document.getElementById(L)||document.createElement("span"),F=a("learnmore"),U=document.getElementById(F)||document.createElement("a"),V=a("preprendIcon"),W=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const $=A.element;m($),x(U,F);const ie=b();v(W,V),$.append(W,j,U,ie),document.body.appendChild($)}c?(j.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function xE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EE(){const r=Gd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TE(){return!EE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SE(){try{return typeof indexedDB=="object"}catch{return!1}}function wE(){return new Promise((r,t)=>{try{let a=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),a||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{a=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(a){t(a)}})}const AE="FirebaseError";class Kr extends Error{constructor(t,a,s){super(a),this.code=t,this.customData=s,this.name=AE,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Av.prototype.create)}}class Av{constructor(t,a,s){this.service=t,this.serviceName=a,this.errors=s}create(t,...a){const s=a[0]||{},o=`${this.service}/${t}`,c=this.errors[t],h=c?CE(c,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Kr(o,m,s)}}function CE(r,t){return r.replace(NE,(a,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const NE=/\{\$([^}]+)}/g;function vu(r,t){if(r===t)return!0;const a=Object.keys(r),s=Object.keys(t);for(const o of a){if(!s.includes(o))return!1;const c=r[o],h=t[o];if(oy(c)&&oy(h)){if(!vu(c,h))return!1}else if(c!==h)return!1}for(const o of s)if(!a.includes(o))return!1;return!0}function oy(r){return r!==null&&typeof r=="object"}function Gr(r){return r&&r._delegate?r._delegate:r}class mo{constructor(t,a,s){this.name=t,this.instanceFactory=a,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const js="[DEFAULT]";class RE{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const s=new pE;if(this.instancesDeferred.set(a,s),this.isInitialized(a)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:a});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){const a=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IE(t))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(t=js){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=js){return this.instances.has(t)}getOptions(t=js){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:a});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&h.resolve(o)}return o}onInit(t,a){const s=this.normalizeInstanceIdentifier(a),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&t(c,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,a){const s=this.onInitCallbacks.get(a);if(s)for(const o of s)try{o(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ME(t),options:a}),this.instances.set(t,s),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=js){return this.component?this.component.multipleInstances?t:js:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ME(r){return r===js?void 0:r}function IE(r){return r.instantiationMode==="EAGER"}class DE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new RE(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const OE={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},VE=Ke.INFO,jE={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},kE=(r,t,...a)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=jE[t];if(o)console[o](`[${s}]  ${r.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cv{constructor(t){this.name=t,this._logLevel=VE,this._logHandler=kE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ke))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}const LE=(r,t)=>t.some(a=>r instanceof a);let cy,uy;function BE(){return cy||(cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UE(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nv=new WeakMap,yd=new WeakMap,Rv=new WeakMap,td=new WeakMap,Hd=new WeakMap;function zE(r){const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{a(Fi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",h)});return t.then(a=>{a instanceof IDBCursor&&Nv.set(a,r)}).catch(()=>{}),Hd.set(t,r),t}function PE(r){if(yd.has(r))return;const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{a(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});yd.set(r,t)}let vd={get(r,t,a){if(r instanceof IDBTransaction){if(t==="done")return yd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Rv.get(r);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Fi(r[t])},set(r,t,a){return r[t]=a,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function GE(r){vd=r(vd)}function qE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const s=r.call(nd(this),t,...a);return Rv.set(s,t.sort?t.sort():[t]),Fi(s)}:UE().includes(r)?function(...t){return r.apply(nd(this),t),Fi(Nv.get(this))}:function(...t){return Fi(r.apply(nd(this),t))}}function HE(r){return typeof r=="function"?qE(r):(r instanceof IDBTransaction&&PE(r),LE(r,BE())?new Proxy(r,vd):r)}function Fi(r){if(r instanceof IDBRequest)return zE(r);if(td.has(r))return td.get(r);const t=HE(r);return t!==r&&(td.set(r,t),Hd.set(t,r)),t}const nd=r=>Hd.get(r);function FE(r,t,{blocked:a,upgrade:s,blocking:o,terminated:c}={}){const h=indexedDB.open(r,t),m=Fi(h);return s&&h.addEventListener("upgradeneeded",v=>{s(Fi(h.result),v.oldVersion,v.newVersion,Fi(h.transaction),v)}),a&&h.addEventListener("blocked",v=>a(v.oldVersion,v.newVersion,v)),m.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const QE=["get","getKey","getAll","getAllKeys","count"],XE=["put","add","delete","clear"],ad=new Map;function fy(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(ad.get(t))return ad.get(t);const a=t.replace(/FromIndex$/,""),s=t!==a,o=XE.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(o||QE.includes(a)))return;const c=async function(h,...m){const v=this.transaction(h,o?"readwrite":"readonly");let b=v.store;return s&&(b=b.index(m.shift())),(await Promise.all([b[a](...m),o&&v.done]))[0]};return ad.set(t,c),c}GE(r=>({...r,get:(t,a,s)=>fy(t,a)||r.get(t,a,s),has:(t,a)=>!!fy(t,a)||r.has(t,a)}));class YE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(KE(a)){const s=a.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(a=>a).join(" ")}}function KE(r){return r.getComponent()?.type==="VERSION"}const _d="@firebase/app",hy="0.14.6";const ri=new Cv("@firebase/app"),$E="@firebase/app-compat",ZE="@firebase/analytics-compat",JE="@firebase/analytics",WE="@firebase/app-check-compat",eT="@firebase/app-check",tT="@firebase/auth",nT="@firebase/auth-compat",aT="@firebase/database",iT="@firebase/data-connect",sT="@firebase/database-compat",rT="@firebase/functions",lT="@firebase/functions-compat",oT="@firebase/installations",cT="@firebase/installations-compat",uT="@firebase/messaging",fT="@firebase/messaging-compat",hT="@firebase/performance",dT="@firebase/performance-compat",mT="@firebase/remote-config",pT="@firebase/remote-config-compat",gT="@firebase/storage",yT="@firebase/storage-compat",vT="@firebase/firestore",_T="@firebase/ai",bT="@firebase/firestore-compat",xT="firebase",ET="12.6.0";const bd="[DEFAULT]",TT={[_d]:"fire-core",[$E]:"fire-core-compat",[JE]:"fire-analytics",[ZE]:"fire-analytics-compat",[eT]:"fire-app-check",[WE]:"fire-app-check-compat",[tT]:"fire-auth",[nT]:"fire-auth-compat",[aT]:"fire-rtdb",[iT]:"fire-data-connect",[sT]:"fire-rtdb-compat",[rT]:"fire-fn",[lT]:"fire-fn-compat",[oT]:"fire-iid",[cT]:"fire-iid-compat",[uT]:"fire-fcm",[fT]:"fire-fcm-compat",[hT]:"fire-perf",[dT]:"fire-perf-compat",[mT]:"fire-rc",[pT]:"fire-rc-compat",[gT]:"fire-gcs",[yT]:"fire-gcs-compat",[vT]:"fire-fst",[bT]:"fire-fst-compat",[_T]:"fire-vertex","fire-js":"fire-js",[xT]:"fire-js-all"};const _u=new Map,ST=new Map,xd=new Map;function dy(r,t){try{r.container.addComponent(t)}catch(a){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,a)}}function bu(r){const t=r.name;if(xd.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;xd.set(t,r);for(const a of _u.values())dy(a,r);for(const a of ST.values())dy(a,r);return!0}function wT(r,t){const a=r.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),r.container.getProvider(t)}function AT(r){return r==null?!1:r.settings!==void 0}const CT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Av("app","Firebase",CT);class NT{constructor(t,a,s){this._isDeleted=!1,this._options={...t},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const RT=ET;function Mv(r,t={}){let a=r;typeof t!="object"&&(t={name:t});const s={name:bd,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(a||(a=wv()),!a)throw Qi.create("no-options");const c=_u.get(o);if(c){if(vu(a,c.options)&&vu(s,c.config))return c;throw Qi.create("duplicate-app",{appName:o})}const h=new DE(o);for(const v of xd.values())h.addComponent(v);const m=new NT(a,s,h);return _u.set(o,m),m}function MT(r=bd){const t=_u.get(r);if(!t&&r===bd&&wv())return Mv();if(!t)throw Qi.create("no-app",{appName:r});return t}function Br(r,t,a){let s=TT[r]??r;a&&(s+=`-${a}`);const o=s.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(h.join(" "));return}bu(new mo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const IT="firebase-heartbeat-database",DT=1,po="firebase-heartbeat-store";let id=null;function Iv(){return id||(id=FE(IT,DT,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(po)}catch(a){console.warn(a)}}}}).catch(r=>{throw Qi.create("idb-open",{originalErrorMessage:r.message})})),id}async function OT(r){try{const a=(await Iv()).transaction(po),s=await a.objectStore(po).get(Dv(r));return await a.done,s}catch(t){if(t instanceof Kr)ri.warn(t.message);else{const a=Qi.create("idb-get",{originalErrorMessage:t?.message});ri.warn(a.message)}}}async function my(r,t){try{const s=(await Iv()).transaction(po,"readwrite");await s.objectStore(po).put(t,Dv(r)),await s.done}catch(a){if(a instanceof Kr)ri.warn(a.message);else{const s=Qi.create("idb-set",{originalErrorMessage:a?.message});ri.warn(s.message)}}}function Dv(r){return`${r.name}!${r.options.appId}`}const VT=1024,jT=30;class kT{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new BT(a),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=py();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>jT){const o=UT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ri.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=py(),{heartbeatsToSend:a,unsentEntries:s}=LT(this._heartbeatsCache.heartbeats),o=yu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ri.warn(t),""}}}function py(){return new Date().toISOString().substring(0,10)}function LT(r,t=VT){const a=[];let s=r.slice();for(const o of r){const c=a.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),gy(a)>t){c.dates.pop();break}}else if(a.push({agent:o.agent,dates:[o.date]}),gy(a)>t){a.pop();break}s=s.slice(1)}return{heartbeatsToSend:a,unsentEntries:s}}class BT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SE()?wE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await OT(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return my(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return my(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function gy(r){return yu(JSON.stringify({version:2,heartbeats:r})).length}function UT(r){if(r.length===0)return-1;let t=0,a=r[0].date;for(let s=1;s<r.length;s++)r[s].date<a&&(a=r[s].date,t=s);return t}function zT(r){bu(new mo("platform-logger",t=>new YE(t),"PRIVATE")),bu(new mo("heartbeat",t=>new kT(t),"PRIVATE")),Br(_d,hy,r),Br(_d,hy,"esm2020"),Br("fire-js","")}zT("");var PT="firebase",GT="12.6.0";Br(PT,GT,"app");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xi,Ov;(function(){var r;function t(M,S){function C(){}C.prototype=S.prototype,M.F=S.prototype,M.prototype=new C,M.prototype.constructor=M,M.D=function(N,D,B){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return S.prototype[D].apply(N,R)}}function a(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,a),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,S,C){C||(C=0);const N=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)N[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)N[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=M.g[0],C=M.g[1],D=M.g[2];let B=M.g[3],R;R=S+(B^C&(D^B))+N[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[1]+3905402710&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[2]+606105819&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[3]+3250441966&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(B^C&(D^B))+N[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[5]+1200080426&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[6]+2821735955&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[7]+4249261313&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(B^C&(D^B))+N[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[9]+2336552879&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[10]+4294925233&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[11]+2304563134&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(B^C&(D^B))+N[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(D^S&(C^D))+N[13]+4254626195&4294967295,B=S+(R<<12&4294967295|R>>>20),R=D+(C^B&(S^C))+N[14]+2792965006&4294967295,D=B+(R<<17&4294967295|R>>>15),R=C+(S^D&(B^S))+N[15]+1236535329&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(D^B&(C^D))+N[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[6]+3225465664&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[11]+643717713&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[0]+3921069994&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^B&(C^D))+N[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[10]+38016083&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[15]+3634488961&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[4]+3889429448&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^B&(C^D))+N[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[14]+3275163606&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[3]+4107603335&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[8]+1163531501&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^B&(C^D))+N[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^D&(S^C))+N[2]+4243563512&4294967295,B=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(B^S))+N[7]+1735328473&4294967295,D=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(D^B))+N[12]+2368359562&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(C^D^B)+N[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[8]+2272392833&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[11]+1839030562&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[14]+4259657740&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^B)+N[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[4]+1272893353&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[7]+4139469664&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[10]+3200236656&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^B)+N[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[0]+3936430074&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[3]+3572445317&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[6]+76029189&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^B)+N[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^D)+N[12]+3873151461&4294967295,B=S+(R<<11&4294967295|R>>>21),R=D+(B^S^C)+N[15]+530742520&4294967295,D=B+(R<<16&4294967295|R>>>16),R=C+(D^B^S)+N[2]+3299628645&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(D^(C|~B))+N[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[7]+1126891415&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[14]+2878612391&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[5]+4237533241&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~B))+N[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[3]+2399980690&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[10]+4293915773&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[1]+2240044497&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~B))+N[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[15]+4264355552&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[6]+2734768916&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[13]+1309151649&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~B))+N[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~D))+N[11]+3174756917&4294967295,B=S+(R<<10&4294967295|R>>>22),R=D+(S^(B|~C))+N[2]+718787259&4294967295,D=B+(R<<15&4294967295|R>>>17),R=C+(B^(D|~S))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+B&4294967295}s.prototype.v=function(M,S){S===void 0&&(S=M.length);const C=S-this.blockSize,N=this.C;let D=this.h,B=0;for(;B<S;){if(D==0)for(;B<=C;)o(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<S;)if(N[D++]=M.charCodeAt(B++),D==this.blockSize){o(this,N),D=0;break}}else for(;B<S;)if(N[D++]=M[B++],D==this.blockSize){o(this,N),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var C=M.length-8;C<M.length;++C)M[C]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)M[S++]=this.g[C]>>>N&255;return M};function c(M,S){var C=m;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=S(M)}function h(M,S){this.h=S;const C=[];let N=!0;for(let D=M.length-1;D>=0;D--){const B=M[D]|0;N&&B==S||(C[D]=B,N=!1)}this.g=C}var m={};function v(M){return-128<=M&&M<128?c(M,function(S){return new h([S|0],S<0?-1:0)}):new h([M|0],M<0?-1:0)}function b(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return U(b(-M));const S=[];let C=1;for(let N=0;M>=C;N++)S[N]=M/C|0,C*=4294967296;return new h(S,0)}function x(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return U(x(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=b(Math.pow(S,8));let N=E;for(let B=0;B<M.length;B+=8){var D=Math.min(8,M.length-B);const R=parseInt(M.substring(B,B+D),S);D<8?(D=b(Math.pow(S,D)),N=N.j(D).add(b(R))):(N=N.j(C),N=N.add(b(R)))}return N}var E=v(0),A=v(1),L=v(16777216);r=h.prototype,r.m=function(){if(F(this))return-U(this).m();let M=0,S=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);M+=(N>=0?N:4294967296+N)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(j(this))return"0";if(F(this))return"-"+U(this).toString(M);const S=b(Math.pow(M,6));var C=this;let N="";for(;;){const D=ie(C,S).g;C=V(C,D.j(S));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(M);if(C=D,j(C))return B+N;for(;B.length<6;)B="0"+B;N=B+N}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function j(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function F(M){return M.h==-1}r.l=function(M){return M=V(this,M),F(M)?-1:j(M)?0:1};function U(M){const S=M.g.length,C=[];for(let N=0;N<S;N++)C[N]=~M.g[N];return new h(C,~M.h).add(A)}r.abs=function(){return F(this)?U(this):this},r.add=function(M){const S=Math.max(this.g.length,M.g.length),C=[];let N=0;for(let D=0;D<=S;D++){let B=N+(this.i(D)&65535)+(M.i(D)&65535),R=(B>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);N=R>>>16,B&=65535,R&=65535,C[D]=R<<16|B}return new h(C,C[C.length-1]&-2147483648?-1:0)};function V(M,S){return M.add(U(S))}r.j=function(M){if(j(this)||j(M))return E;if(F(this))return F(M)?U(this).j(U(M)):U(U(this).j(M));if(F(M))return U(this.j(U(M)));if(this.l(L)<0&&M.l(L)<0)return b(this.m()*M.m());const S=this.g.length+M.g.length,C=[];for(var N=0;N<2*S;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<M.g.length;D++){const B=this.i(N)>>>16,R=this.i(N)&65535,Ue=M.i(D)>>>16,We=M.i(D)&65535;C[2*N+2*D]+=R*We,W(C,2*N+2*D),C[2*N+2*D+1]+=B*We,W(C,2*N+2*D+1),C[2*N+2*D+1]+=R*Ue,W(C,2*N+2*D+1),C[2*N+2*D+2]+=B*Ue,W(C,2*N+2*D+2)}for(M=0;M<S;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=S;M<2*S;M++)C[M]=0;return new h(C,0)};function W(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function $(M,S){this.g=M,this.h=S}function ie(M,S){if(j(S))throw Error("division by zero");if(j(M))return new $(E,E);if(F(M))return S=ie(U(M),S),new $(U(S.g),U(S.h));if(F(S))return S=ie(M,U(S)),new $(U(S.g),S.h);if(M.g.length>30){if(F(M)||F(S))throw Error("slowDivide_ only works with positive integers.");for(var C=A,N=S;N.l(M)<=0;)C=ce(C),N=ce(N);var D=re(C,1),B=re(N,1);for(N=re(N,2),C=re(C,2);!j(N);){var R=B.add(N);R.l(M)<=0&&(D=D.add(C),B=R),N=re(N,1),C=re(C,1)}return S=V(M,D.j(S)),new $(D,S)}for(D=E;M.l(S)>=0;){for(C=Math.max(1,Math.floor(M.m()/S.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),B=b(C),R=B.j(S);F(R)||R.l(M)>0;)C-=N,B=b(C),R=B.j(S);j(B)&&(B=A),D=D.add(B),M=V(M,R)}return new $(D,M)}r.B=function(M){return ie(this,M).h},r.and=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)&M.i(N);return new h(C,this.h&M.h)},r.or=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)|M.i(N);return new h(C,this.h|M.h)},r.xor=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)^M.i(N);return new h(C,this.h^M.h)};function ce(M){const S=M.g.length+1,C=[];for(let N=0;N<S;N++)C[N]=M.i(N)<<1|M.i(N-1)>>>31;return new h(C,M.h)}function re(M,S){const C=S>>5;S%=32;const N=M.g.length-C,D=[];for(let B=0;B<N;B++)D[B]=S>0?M.i(B+C)>>>S|M.i(B+C+1)<<32-S:M.i(B+C);return new h(D,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ov=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=b,h.fromString=x,Xi=h}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vv,no,jv,ou,Ed,kv,Lv,Bv;(function(){var r,t=Object.defineProperty;function a(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=a(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var G=u[w];if(!(G in _))break e;_=_[G]}u=u[u.length-1],w=_[u],p=p(w),p!=w&&p!=null&&t(_,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var _=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&_.push([w,p[w]]);return _}});var c=c||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function b(u,p,_){return b=v,b.apply(null,arguments)}function x(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function E(u,p){function _(){}_.prototype=p.prototype,u.Z=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(w,G,Y){for(var fe=Array(arguments.length-2),je=2;je<arguments.length;je++)fe[je-2]=arguments[je];return p.prototype[G].apply(w,fe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const p=u.length;if(p>0){const _=Array(p);for(let w=0;w<p;w++)_[w]=u[w];return _}return[]}function j(u,p){for(let w=1;w<arguments.length;w++){const G=arguments[w];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=u.length||0;const Y=G.length||0;u.length=_+Y;for(let fe=0;fe<Y;fe++)u[_+fe]=G[fe]}else u.push(G)}}class F{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function U(u){h.setTimeout(()=>{throw u},0)}function V(){var u=M;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,_){const w=$.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var $=new F(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,re=!1,M=new W,S=()=>{const u=Promise.resolve(void 0);ce=()=>{u.then(C)}};function C(){for(var u;u=V();){try{u.h.call(u.g)}catch(_){U(_)}var p=$;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}re=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}E(Ue,D),Ue.prototype.init=function(u,p){const _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(_=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(u,p,_,w,G){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=G,this.key=++X,this.da=this.fa=!1}function xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Be(u,p,_){for(const w in u)p.call(_,u[w],w,u)}function P(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function O(u){const p={};for(const _ in u)p[_]=u[_];return p}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(u,p){let _,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(_ in w)u[_]=w[_];for(let Y=0;Y<ae.length;Y++)_=ae[Y],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function ge(u){this.src=u,this.g={},this.h=0}ge.prototype.add=function(u,p,_,w,G){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const fe=_e(u,p,w,G);return fe>-1?(p=u[fe],_||(p.fa=!1)):(p=new oe(p,this.src,Y,!!w,G),p.fa=_,u.push(p)),p};function Te(u,p){const _=p.type;if(_ in u.g){var w=u.g[_],G=Array.prototype.indexOf.call(w,p,void 0),Y;(Y=G>=0)&&Array.prototype.splice.call(w,G,1),Y&&(xe(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function _e(u,p,_,w){for(let G=0;G<u.length;++G){const Y=u[G];if(!Y.da&&Y.listener==p&&Y.capture==!!_&&Y.ha==w)return G}return-1}var he="closure_lm_"+(Math.random()*1e6|0),de={};function Re(u,p,_,w,G){if(Array.isArray(p)){for(let Y=0;Y<p.length;Y++)Re(u,p[Y],_,w,G);return null}return _=Mt(_),u&&u[We]?u.J(p,_,m(w)?!!w.capture:!1,G):ye(u,p,_,!1,w,G)}function ye(u,p,_,w,G,Y){if(!p)throw Error("Invalid event type");const fe=m(G)?!!G.capture:!!G;let je=St(u);if(je||(u[he]=je=new ge(u)),_=je.add(p,_,w,fe,Y),_.proxy)return _;if(w=Ce(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)B||(G=fe),G===void 0&&(G=!1),u.addEventListener(p.toString(),w,G);else if(u.attachEvent)u.attachEvent(Ae(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ce(){function u(_){return p.call(u.src,u.listener,_)}const p=nt;return u}function Oe(u,p,_,w,G){if(Array.isArray(p))for(var Y=0;Y<p.length;Y++)Oe(u,p[Y],_,w,G);else w=m(w)?!!w.capture:!!w,_=Mt(_),u&&u[We]?(u=u.i,Y=String(p).toString(),Y in u.g&&(p=u.g[Y],_=_e(p,_,w,G),_>-1&&(xe(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete u.g[Y],u.h--)))):u&&(u=St(u))&&(p=u.g[p.toString()],u=-1,p&&(u=_e(p,_,w,G)),(_=u>-1?p[u]:null)&&Ve(_))}function Ve(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[We])Te(p.i,u);else{var _=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(_,w,u.capture):p.detachEvent?p.detachEvent(Ae(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=St(p))?(Te(_,u),_.h==0&&(_.src=null,p[he]=null)):xe(u)}}}function Ae(u){return u in de?de[u]:de[u]="on"+u}function nt(u,p){if(u.da)u=!0;else{p=new Ue(p,this);const _=u.listener,w=u.ha||u.src;u.fa&&Ve(u),u=_.call(w,p)}return u}function St(u){return u=u[he],u instanceof ge?u:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(u){return typeof u=="function"?u:(u[vt]||(u[vt]=function(p){return u.handleEvent(p)}),u[vt])}function at(){N.call(this),this.i=new ge(this),this.M=this,this.G=null}E(at,N),at.prototype[We]=!0,at.prototype.removeEventListener=function(u,p,_,w){Oe(this,u,p,_,w)};function $e(u,p){var _,w=u.G;if(w)for(_=[];w;w=w.G)_.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var G=p;p=new D(w,u),ue(p,G)}G=!0;let Y,fe;if(_)for(fe=_.length-1;fe>=0;fe--)Y=p.g=_[fe],G=fn(Y,w,!0,p)&&G;if(Y=p.g=u,G=fn(Y,w,!0,p)&&G,G=fn(Y,w,!1,p)&&G,_)for(fe=0;fe<_.length;fe++)Y=p.g=_[fe],G=fn(Y,w,!1,p)&&G}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const _=u.g[p];for(let w=0;w<_.length;w++)xe(_[w]);delete u.g[p],u.h--}}this.G=null},at.prototype.J=function(u,p,_,w){return this.i.add(String(u),p,!1,_,w)},at.prototype.K=function(u,p,_,w){return this.i.add(String(u),p,!0,_,w)};function fn(u,p,_,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let G=!0;for(let Y=0;Y<p.length;++Y){const fe=p[Y];if(fe&&!fe.da&&fe.capture==_){const je=fe.listener,At=fe.ha||fe.src;fe.fa&&Te(u.i,fe),G=je.call(At,w)!==!1&&G}}return G&&!w.defaultPrevented}function as(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function ci(u){u.g=as(()=>{u.g=null,u.i&&(u.i=!1,ci(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class It extends N{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ci(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(u){N.call(this),this.h=u,this.g={}}E(Dn,N);var ca=[];function it(u){Be(u.g,function(p,_){this.g.hasOwnProperty(_)&&Ve(p)},u),u.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),it(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ua=h.JSON.stringify,Hs=h.JSON.parse,is=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ui(){}function Fs(){}var En={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){D.call(this,"d")}E($t,D);function On(){D.call(this,"c")}E(On,D);var wt={},No=null;function Qs(){return No=No||new at}wt.Ia="serverreachability";function Ro(u){D.call(this,wt.Ia,u)}E(Ro,D);function fa(u){const p=Qs();$e(p,new Ro(p))}wt.STAT_EVENT="statevent";function ss(u,p){D.call(this,wt.STAT_EVENT,u),this.stat=p}E(ss,D);function Dt(u){const p=Qs();$e(p,new ss(p,u))}wt.Ja="timingevent";function ha(u,p){D.call(this,wt.Ja,u),this.size=p}E(ha,D);function da(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function Zu(u,p,_,w,G,Y){u.info(function(){if(u.g)if(Y){var fe="",je=Y.split("&");for(let et=0;et<je.length;et++){var At=je[et].split("=");if(At.length>1){const _t=At[0];At=At[1];const Ln=_t.split("_");fe=Ln.length>=2&&Ln[1]=="type"?fe+(_t+"="+At+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+p+`
`+_+`
`+fe})}function Mo(u,p,_,w,G,Y,fe){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+p+`
`+_+`
`+Y+" "+fe})}function ma(u,p,_,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ju(u,_)+(w?" "+w:"")})}function rs(u,p){u.info(function(){return"TIMEOUT: "+p})}Kn.prototype.info=function(){};function Ju(u,p){if(!u.g)return p;if(!p)return null;try{const Y=JSON.parse(p);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var _=Y[u];if(!(_.length<2)){var w=_[1];if(Array.isArray(w)&&!(w.length<1)){var G=w[0];if(G!="noop"&&G!="stop"&&G!="close")for(let fe=1;fe<w.length;fe++)w[fe]=""}}}}return ua(Y)}catch{return p}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function os(){}E(os,ui),os.prototype.g=function(){return new XMLHttpRequest},nl=new os;function Ua(u){return encodeURIComponent(String(u))}function Io(u){var p=1;u=u.split(":");const _=[];for(;p>0&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function $n(u,p,_,w){this.j=u,this.i=p,this.l=_,this.S=w||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ot={},Ft={};function pa(u,p,_){u.M=1,u.A=cs(jt(p)),u.u=_,u.R=!0,Xs(u,null)}function Xs(u,p){u.F=Date.now(),ga(u),u.B=jt(u.A);var _=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),Zs(_.i,"t",w),u.C=0,_=u.j.L,u.h=new Zn,u.g=Qo(u.j,_?p:null,!u.u),u.P>0&&(u.O=new It(b(u.Y,u,u.g),u.P)),p=u.V,_=u.g,w=u.ba;var G="readystatechange";Array.isArray(G)||(G&&(ca[0]=G.toString()),G=ca);for(let Y=0;Y<G.length;Y++){const fe=Re(_,G[Y],w||p.handleEvent,!1,p.h||p);if(!fe)break;p.g[fe.key]=fe}p=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),fa(),Zu(u.i,u.v,u.B,u.l,u.S,u.u)}$n.prototype.ba=function(u){u=u.target;const p=this.O;p&&ea(u)==3?p.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const je=ea(this.g),At=this.g.ya(),et=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||je!=4||At==7||(At==8||et<=0?fa(3):fa(2)),ya(this);var p=this.g.ca();this.X=p;var _=Wu(this);if(this.o=p==200,Mo(this.i,this.v,this.B,this.l,this.S,je,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,G=this.g;if((w=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(w)){var Y=w;break t}}Y=null}if(u=Y)ma(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,va(this,u);else{this.o=!1,this.m=3,Dt(12),Tn(this),Vn(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<_.length;)if(_t=Oo(this,_),_t==Ft){je==4&&(this.m=4,Dt(14),u=!1),ma(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Dt(15),ma(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else ma(this.i,this.l,_t,null),va(this,_t);if(Do(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||_.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)ma(this.i,this.l,_,"[Invalid Chunked Response]"),Tn(this),Vn(this);else if(_.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),yl(fe),fe.P=!0,Dt(11))}}else ma(this.i,this.l,_,null),va(this,_);je==4&&Tn(this),this.o&&!this.K&&(je==4?Go(this.j,this):(this.o=!1,ga(this)))}else Pa(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Tn(this),Vn(this)}}}catch{}finally{}};function Wu(u){if(!Do(u))return u.g.la();const p=Zt(u.g);if(p==="")return"";let _="";const w=p.length,G=ea(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Tn(u),Vn(u),"";u.h.i=new h.TextDecoder}for(let Y=0;Y<w;Y++)u.h.h=!0,_+=u.h.i.decode(p[Y],{stream:!(G&&Y==w-1)});return p.length=0,u.h.g+=_,u.C=0,u.h.g}function Do(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Oo(u,p){var _=u.C,w=p.indexOf(`
`,_);return w==-1?Ft:(_=Number(p.substring(_,w)),isNaN(_)?Ot:(w+=1,w+_>p.length?Ft:(p=p.slice(w,w+_),u.C=w+_,p)))}$n.prototype.cancel=function(){this.K=!0,Tn(this)};function ga(u){u.T=Date.now()+u.H,Ys(u,u.H)}function Ys(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=da(b(u.aa,u),p)}function ya(u){u.D&&(h.clearTimeout(u.D),u.D=null)}$n.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(rs(this.i,this.B),this.M!=2&&(fa(),Dt(17)),Tn(this),this.m=2,Vn(this)):Ys(this,this.T-u)};function Vn(u){u.j.I==0||u.K||Go(u.j,u)}function Tn(u){ya(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,it(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function va(u,p){try{var _=u.j;if(_.I!=0&&(_.g==u||ba(_.h,u))){if(!u.L&&ba(_.h,u)&&_.I==3){try{var w=_.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)nr(_),vi(_);else break e;gs(_),Dt(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=da(b(_.Va,_),6e3));_a(_.h)<=1&&_.ta&&(_.ta=void 0)}else Aa(_,11)}else if((u.L||_.g==u)&&nr(_),!R(p))for(G=_.Ba.g.parse(p),p=0;p<G.length;p++){let et=G[p];const _t=et[0];if(!(_t<=_.K))if(_.K=_t,et=et[1],_.I==2)if(et[0]=="c"){_.M=et[1],_.ba=et[2];const Ln=et[3];Ln!=null&&(_.ka=Ln,_.j.info("VER="+_.ka));const Ca=et[4];Ca!=null&&(_.za=Ca,_.j.info("SVER="+_.za));const ta=et[5];ta!=null&&typeof ta=="number"&&ta>0&&(w=1.5*ta,_.O=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const na=u.g;if(na){const ys=na.g?na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var Y=w.h;Y.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sl(Y,Y.h),Y.h=null))}if(w.G){const ar=na.g?na.g.getResponseHeader("X-HTTP-Session-Id"):null;ar&&(w.wa=ar,rt(w.J,w.G,ar))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),w=_;var fe=u;if(w.na=Fo(w,w.L?w.ba:null,w.W),fe.L){rl(w.h,fe);var je=fe,At=w.O;At&&(je.H=At),je.D&&(ya(je),ga(je)),w.g=fe}else zo(w);_.i.length>0&&wa(_)}else et[0]!="stop"&&et[0]!="close"||Aa(_,7);else _.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Aa(_,7):pl(_):et[0]!="noop"&&_.l&&_.l.qa(et),_.A=0)}}fa(4)}catch{}}var Vt=class{constructor(u,p){this.g=u,this.map=p}};function al(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function il(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _a(u){return u.h?1:u.g?u.g.size:0}function ba(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function sl(u,p){u.g?u.g.add(p):u.h=p}function rl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}al.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ll(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.G);return p}return L(u.i)}var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(u,p){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const w=u[_].indexOf("=");let G,Y=null;w>=0?(G=u[_].substring(0,w),Y=u[_].substring(w+1)):G=u[_],p(G,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Sn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Sn?(this.l=u.l,Qt(this,u.j),this.o=u.o,this.g=u.g,fi(this,u.u),this.h=u.h,ol(this,Bo(u.i)),this.m=u.m):u&&(p=String(u).match(Vo))?(this.l=!1,Qt(this,p[1]||"",!0),this.o=xa(p[2]||""),this.g=xa(p[3]||"",!0),fi(this,p[4]),this.h=xa(p[5]||"",!0),ol(this,p[6]||"",!0),this.m=xa(p[7]||"")):(this.l=!1,this.i=new di(null,this.l))}Sn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(us(p,$s,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(us(p,$s,!0),"@"),u.push(Ua(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(us(_,_.charAt(0)=="/"?cl:jo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",us(_,ko)),u.join("")},Sn.prototype.resolve=function(u){const p=jt(this);let _=!!u.j;_?Qt(p,u.j):_=!!u.o,_?p.o=u.o:_=!!u.g,_?p.g=u.g:_=u.u!=null;var w=u.h;if(_)fi(p,u.u);else if(_=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var G=p.h.lastIndexOf("/");G!=-1&&(w=p.h.slice(0,G+1)+w)}if(G=w,G==".."||G==".")w="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){w=G.lastIndexOf("/",0)==0,G=G.split("/");const Y=[];for(let fe=0;fe<G.length;){const je=G[fe++];je=="."?w&&fe==G.length&&Y.push(""):je==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&fe==G.length&&Y.push("")):(Y.push(je),w=!0)}w=Y.join("/")}else w=G}return _?p.h=w:_=u.i.toString()!=="",_?ol(p,Bo(u.i)):_=!!u.m,_&&(p.m=u.m),p};function jt(u){return new Sn(u)}function Qt(u,p,_){u.j=_?xa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fi(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function ol(u,p,_){p instanceof di?(u.i=p,Js(u.i,u.l)):(_||(p=us(p,hi)),u.i=new di(p,u.l))}function rt(u,p,_){u.i.set(p,_)}function cs(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,mn),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $s=/[#\/\?@]/g,jo=/[#\?:]/g,cl=/[#\?]/g,hi=/[#\?@]/g,ko=/#/g;function di(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function pn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ks(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=di.prototype,r.add=function(u,p){pn(this),this.i=null,u=mi(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Lo(u,p){pn(u),p=mi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ul(u,p){return pn(u),p=mi(u,p),u.g.has(p)}r.forEach=function(u,p){pn(this),this.g.forEach(function(_,w){_.forEach(function(G){u.call(p,G,w,this)},this)},this)};function fl(u,p){pn(u);let _=[];if(typeof p=="string")ul(u,p)&&(_=_.concat(u.g.get(mi(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)_=_.concat(u[p]);return _}r.set=function(u,p){return pn(this),this.i=null,u=mi(this,u),ul(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=fl(this,u),u.length>0?String(u[0]):p):p};function Zs(u,p,_){Lo(u,p),_.length>0&&(u.i=null,u.g.set(mi(u,p),L(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var _=p[w];const G=Ua(_);_=fl(this,_);for(let Y=0;Y<_.length;Y++){let fe=G;_[Y]!==""&&(fe+="="+Ua(_[Y])),u.push(fe)}}return this.i=u.join("&")};function Bo(u){const p=new di;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function mi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Js(u,p){p&&!u.j&&(pn(u),u.i=null,u.g.forEach(function(_,w){const G=w.toLowerCase();w!=G&&(Lo(this,w),Zs(this,G,_))},u)),u.j=p}function Jn(u,p){const _=new Kn;if(h.Image){const w=new Image;w.onload=x(jn,_,"TestLoadImage: loaded",!0,p,w),w.onerror=x(jn,_,"TestLoadImage: error",!1,p,w),w.onabort=x(jn,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=x(jn,_,"TestLoadImage: timeout",!1,p,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function hl(u,p){const _=new Kn,w=new AbortController,G=setTimeout(()=>{w.abort(),jn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(Y=>{clearTimeout(G),Y.ok?jn(_,"TestPingServer: ok",!0,p):jn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(G),jn(_,"TestPingServer: error",!1,p)})}function jn(u,p,_,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(_)}catch{}}function pi(){this.g=new is}function Ea(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ea,ui),Ea.prototype.g=function(){return new fs(this.i,this.h)};function fs(u,p){at.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(fs,at),r=fs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ws(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ws(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?gi(this):Wn(this),this.readyState==3&&Ws(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,gi(this))},r.Na=function(u){this.g&&(this.response=u,gi(this))},r.ga=function(){this.g&&gi(this)};function gi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Wn(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function kn(u){let p="";return Be(u,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function hs(u,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=kn(_),typeof u=="string"?_!=null&&Ua(_):rt(u,p,_))}function ct(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ct,at);var Ta=/^https?$/i,dl=["POST","PUT"];r=ct.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=A(b(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(Y){ds(this,Y);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)_.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())_.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(dl,p,void 0)>=0)||w||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of _)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){ds(this,Y)}};function ds(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,ml(u),za(u)}function ml(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,$e(this,"complete"),$e(this,"abort"),za(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),ct.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},r.Xa=function(){ms(this)};function ms(u){if(u.h&&typeof c<"u"){if(u.v&&ea(u)==4)setTimeout(u.Ca.bind(u),0);else if($e(u,"readystatechange"),ea(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=Y===0){let fe=String(u.D).match(Vo)[1]||null;!fe&&h.self&&h.self.location&&(fe=h.self.location.protocol.slice(0,-1)),w=!Ta.test(fe?fe.toLowerCase():"")}_=w}if(_)$e(u,"complete"),$e(u,"success");else{u.o=6;try{var G=ea(u)>2?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.ca()+"]",ml(u)}}finally{za(u)}}}}function za(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,p||$e(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ea(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ea(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Hs(p)}};function Zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Pa(u){const p={};u=(u.g&&ea(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(R(u[w]))continue;var _=Io(u[w]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=p[G]||[];p[G]=Y,Y.push(_)}P(p,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function yi(u){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,u),this.Za=Sa("retryDelaySeedMs",1e4,u),this.Ta=Sa("forwardChannelMaxRetries",2,u),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new al(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=yi.prototype,r.ka=8,r.I=1,r.connect=function(u,p,_,w){Dt(0),this.W=u,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.J=Fo(this,null,this.W),wa(this)};function pl(u){if(er(u),u.I==3){var p=u.V++,_=jt(u.J);if(rt(_,"SID",u.M),rt(_,"RID",p),rt(_,"TYPE","terminate"),ps(u,_),p=new $n(u,u.j,p),p.M=2,p.A=cs(jt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.A,_=!0),_||(p.g=Qo(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ga(p)}Ho(u)}function vi(u){u.g&&(yl(u),u.g.cancel(),u.g=null)}function er(u){vi(u),u.v&&(h.clearTimeout(u.v),u.v=null),nr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function wa(u){if(!il(u.h)&&!u.m){u.m=!0;var p=u.Ea;ce||S(),re||(ce(),re=!0),M.add(p,u),u.D=0}}function tr(u,p){return _a(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=da(b(u.Ea,u,p),qo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const G=new $n(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=O(Y),ue(Y,this.U)):Y=this.U),this.u!==null||this.R||(G.J=Y,Y=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Uo(this,G,p),_=jt(this.J),rt(_,"RID",u),rt(_,"CVER",22),this.G&&rt(_,"X-HTTP-Session-Id",this.G),ps(this,_),Y&&(this.R?p="headers="+Ua(kn(Y))+"&"+p:this.u&&hs(_,this.u,Y)),sl(this.h,G),this.Ra&&rt(_,"TYPE","init"),this.S?(rt(_,"$req",p),rt(_,"SID","null"),G.U=!0,pa(G,_,null)):pa(G,_,p),this.I=2}}else this.I==3&&(u?gl(this,u):this.i.length==0||il(this.h)||gl(this))};function gl(u,p){var _;p?_=p.l:_=u.V++;const w=jt(u.J);rt(w,"SID",u.M),rt(w,"RID",_),rt(w,"AID",u.K),ps(u,w),u.u&&u.o&&hs(w,u.u,u.o),_=new $n(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Uo(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),sl(u.h,_),pa(_,w,p)}function ps(u,p){u.H&&Be(u.H,function(_,w){rt(p,w,_)}),u.l&&Be({},function(_,w){rt(p,w,_)})}function Uo(u,p,_){_=Math.min(u.i.length,_);const w=u.l?b(u.l.Ka,u.l,u):null;e:{var G=u.i;let je=-1;for(;;){const At=["count="+_];je==-1?_>0?(je=G[0].g,At.push("ofs="+je)):je=0:At.push("ofs="+je);let et=!0;for(let _t=0;_t<_;_t++){var Y=G[_t].g;const Ln=G[_t].map;if(Y-=je,Y<0)je=Math.max(0,G[_t].g-100),et=!1;else try{Y="req"+Y+"_"||"";try{var fe=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Ca,ta]of fe){let na=ta;m(ta)&&(na=ua(ta)),At.push(Y+Ca+"="+encodeURIComponent(na))}}catch(Ca){throw At.push(Y+"type="+encodeURIComponent("_badmap")),Ca}}catch{w&&w(Ln)}}if(et){fe=At.join("&");break e}}fe=void 0}return u=u.i.splice(0,_),p.G=u,fe}function zo(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;ce||S(),re||(ce(),re=!0),M.add(p,u),u.A=0}}function gs(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=da(b(u.Da,u),qo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Po(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=da(b(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),vi(this),Po(this))};function yl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Po(u){u.g=new $n(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=jt(u.na);rt(p,"RID","rpc"),rt(p,"SID",u.M),rt(p,"AID",u.K),rt(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(p,"TO",u.ia),rt(p,"TYPE","xmlhttp"),ps(u,p),u.u&&u.o&&hs(p,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=cs(jt(p)),_.u=null,_.R=!0,Xs(_,u)}r.Va=function(){this.C!=null&&(this.C=null,vi(this),gs(this),Dt(19))};function nr(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Go(u,p){var _=null;if(u.g==p){nr(u),yl(u),u.g=null;var w=2}else if(ba(u.h,p))_=p.G,rl(u.h,p),w=1;else return;if(u.I!=0){if(p.o)if(w==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var G=u.D;w=Qs(),$e(w,new ha(w,_)),wa(u)}else zo(u);else if(G=p.m,G==3||G==0&&p.X>0||!(w==1&&tr(u,p)||w==2&&gs(u)))switch(_&&_.length>0&&(p=u.h,p.i=p.i.concat(_)),G){case 1:Aa(u,5);break;case 4:Aa(u,10);break;case 3:Aa(u,6);break;default:Aa(u,2)}}}function qo(u,p){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*p}function Aa(u,p){if(u.j.info("Error code "+p),p==2){var _=b(u.bb,u),w=u.Ua;const G=!w;w=new Sn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qt(w,"https"),cs(w),G?Jn(w.toString(),_):hl(w.toString(),_)}else Dt(2);u.I=0,u.l&&u.l.pa(p),Ho(u),er(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Ho(u){if(u.I=0,u.ja=[],u.l){const p=ll(u.h);(p.length!=0||u.i.length!=0)&&(j(u.ja,p),j(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Fo(u,p,_){var w=_ instanceof Sn?jt(_):new Sn(_);if(w.g!="")p&&(w.g=p+"."+w.g),fi(w,w.u);else{var G=h.location;w=G.protocol,p=p?p+"."+G.hostname:G.hostname,G=+G.port;const Y=new Sn(null);w&&Qt(Y,w),p&&(Y.g=p),G&&fi(Y,G),_&&(Y.h=_),w=Y}return _=u.G,p=u.wa,_&&p&&rt(w,_,p),rt(w,"VER",u.ka),ps(u,w),w}function Qo(u,p,_){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new ct(new Ea({ab:_})):new ct(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xo(){}r=Xo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function _i(){}_i.prototype.g=function(u,p){return new hn(u,p)};function hn(u,p){at.call(this),this.g=new yi(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!R(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ga(this)}E(hn,at),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){pl(this.g)},hn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=ua(u),u=_);p.i.push(new Vt(p.Ya++,u)),p.I==3&&wa(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,hn.Z.N.call(this)};function Yo(u){$t.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}E(Yo,$t);function Ko(){On.call(this),this.status=1}E(Ko,On);function Ga(u){this.g=u}E(Ga,Xo),Ga.prototype.ra=function(){$e(this.g,"a")},Ga.prototype.qa=function(u){$e(this.g,new Yo(u))},Ga.prototype.pa=function(u){$e(this.g,new Ko)},Ga.prototype.oa=function(){$e(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Bv=function(){return new _i},Lv=function(){return Qs()},kv=wt,Ed={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,ou=ls,tl.COMPLETE="complete",jv=tl,Fs.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",at.prototype.listen=at.prototype.J,no=Fs,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,Vv=ct}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore",_y="4.9.2";class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let $r="12.3.0";const Bs=new Cv("@firebase/firestore");function Or(){return Bs.logLevel}function ve(r,...t){if(Bs.logLevel<=Ke.DEBUG){const a=t.map(Fd);Bs.debug(`Firestore (${$r}): ${r}`,...a)}}function li(r,...t){if(Bs.logLevel<=Ke.ERROR){const a=t.map(Fd);Bs.error(`Firestore (${$r}): ${r}`,...a)}}function qr(r,...t){if(Bs.logLevel<=Ke.WARN){const a=t.map(Fd);Bs.warn(`Firestore (${$r}): ${r}`,...a)}}function Fd(r){if(typeof r=="string")return r;try{return(function(a){return JSON.stringify(a)})(r)}catch{return r}}function Me(r,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,Uv(r,s,a)}function Uv(r,t,a){let s=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(a!==void 0)try{s+=" CONTEXT: "+JSON.stringify(a)}catch{s+=" CONTEXT: "+a}throw li(s),new Error(s)}function st(r,t,a,s){let o="Unexpected state";typeof a=="string"?o=a:s=a,r||Uv(t,o,s)}function De(r,t){return r}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Kr{constructor(t,a){super(t,a),this.code=t,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yi{constructor(){this.promise=new Promise(((t,a)=>{this.resolve=t,this.reject=a}))}}class zv{constructor(t,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,a){t.enqueueRetryable((()=>a(on.UNAUTHENTICATED)))}shutdown(){}}class HT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,a){this.changeListener=a,t.enqueueRetryable((()=>a(this.token.user)))}shutdown(){this.changeListener=null}}class FT{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,a){st(this.o===void 0,42304);let s=this.i;const o=v=>this.i!==s?(s=this.i,a(v)):Promise.resolve();let c=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Yi,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const v=c;t.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},m=v=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((v=>m(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Yi)}}),0),h()}getToken(){const t=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then((s=>this.i!==t?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new zv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return st(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class QT{constructor(t,a,s){this.P=t,this.T=a,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XT{constructor(t,a,s){this.P=t,this.T=a,this.I=s}getToken(){return Promise.resolve(new QT(this.P,this.T,this.I))}start(t,a){t.enqueueRetryable((()=>a(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class by{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YT{constructor(t,a){this.V=a,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,AT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,a){st(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?a(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new by(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((a=>a?(st(typeof a.token=="string",44558,{tokenResult:a}),this.m=a.token,new by(a.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function KT(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(a);else for(let s=0;s<r;s++)a[s]=Math.floor(256*Math.random());return a}class Qd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=KT(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<a&&(s+=t.charAt(o[c]%62))}return s}}function He(r,t){return r<t?-1:r>t?1:0}function Td(r,t){const a=Math.min(r.length,t.length);for(let s=0;s<a;s++){const o=r.charAt(s),c=t.charAt(s);if(o!==c)return sd(o)===sd(c)?He(o,c):sd(o)?1:-1}return He(r.length,t.length)}const $T=55296,ZT=57343;function sd(r){const t=r.charCodeAt(0);return t>=$T&&t<=ZT}function Hr(r,t,a){return r.length===t.length&&r.every(((s,o)=>a(s,t[o])))}const xy="__name__";class Oa{constructor(t,a,s){a===void 0?a=0:a>t.length&&Me(637,{offset:a,range:t.length}),s===void 0?s=t.length-a:s>t.length-a&&Me(1746,{length:s,range:t.length-a}),this.segments=t,this.offset=a,this.len=s}get length(){return this.len}isEqual(t){return Oa.comparator(this,t)===0}child(t){const a=this.segments.slice(this.offset,this.limit());return t instanceof Oa?t.forEach((s=>{a.push(s)})):a.push(t),this.construct(a)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}forEach(t){for(let a=this.offset,s=this.limit();a<s;a++)t(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,a){const s=Math.min(t.length,a.length);for(let o=0;o<s;o++){const c=Oa.compareSegments(t.get(o),a.get(o));if(c!==0)return c}return He(t.length,a.length)}static compareSegments(t,a){const s=Oa.isNumericId(t),o=Oa.isNumericId(a);return s&&!o?-1:!s&&o?1:s&&o?Oa.extractNumericId(t).compare(Oa.extractNumericId(a)):Td(t,a)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xi.fromString(t.substring(4,t.length-2))}}class pt extends Oa{construct(t,a,s){return new pt(t,a,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const a=[];for(const s of t){if(s.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);a.push(...s.split("/").filter((o=>o.length>0)))}return new pt(a)}static emptyPath(){return new pt([])}}const JT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Oa{construct(t,a,s){return new sn(t,a,s)}static isValidIdentifier(t){return JT.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xy}static keyField(){return new sn([xy])}static fromServerFormat(t){const a=[];let s="",o=0;const c=()=>{if(s.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(s),s=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=v,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(c(),o++)}if(c(),h)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(a)}static emptyPath(){return new sn([])}}class we{constructor(t){this.path=t}static fromPath(t){return new we(pt.fromString(t))}static fromName(t){return new we(pt.fromString(t).popFirst(5))}static empty(){return new we(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,a){return pt.comparator(t.path,a.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new we(new pt(t.slice()))}}function Pv(r,t,a){if(!a)throw new pe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function WT(r,t,a,s){if(t===!0&&s===!0)throw new pe(te.INVALID_ARGUMENT,`${r} and ${a} cannot be used together.`)}function Ey(r){if(!we.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ty(r){if(we.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Vu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Me(12329,{type:typeof r})}function xu(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Vu(r);throw new pe(te.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${a}`)}}return r}function e2(r,t){if(t<=0)throw new pe(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}function Gt(r,t){const a={typeString:r};return t&&(a.value=t),a}function To(r,t){if(!Gv(r))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let a;for(const s in t)if(t[s]){const o=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){a=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){a=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){a=`Expected '${s}' field to equal '${c.value}'`;break}}if(a)throw new pe(te.INVALID_ARGUMENT,a);return!0}const Sy=-62135596800,wy=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(t){return dt.fromMillis(t.getTime())}static fromMillis(t){const a=Math.floor(t/1e3),s=Math.floor((t-1e3*a)*wy);return new dt(a,s)}constructor(t,a){if(this.seconds=t,this.nanoseconds=a,a<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(t<Sy)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wy}_compareTo(t){return this.seconds===t.seconds?He(this.nanoseconds,t.nanoseconds):He(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(To(t,dt._jsonSchema))return new dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Sy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Gt("string",dt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};class Ie{static fromTimestamp(t){return new Ie(t)}static min(){return new Ie(new dt(0,0))}static max(){return new Ie(new dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const go=-1;function t2(r,t){const a=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new dt(a+1,0):new dt(a,s));return new $i(o,we.empty(),t)}function n2(r){return new $i(r.readTime,r.key,go)}class $i{constructor(t,a,s){this.readTime=t,this.documentKey=a,this.largestBatchId=s}static min(){return new $i(Ie.min(),we.empty(),go)}static max(){return new $i(Ie.max(),we.empty(),go)}}function a2(r,t){let a=r.readTime.compareTo(t.readTime);return a!==0?a:(a=we.comparator(r.documentKey,t.documentKey),a!==0?a:He(r.largestBatchId,t.largestBatchId))}const i2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Zr(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==i2)throw r;ve("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)}),(a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)}))}catch(t){return this.next(void 0,t)}next(t,a){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(t,this.result):new ne(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(a,c).next(s,o)}}))}toPromise(){return new Promise(((t,a)=>{this.next(t,a)}))}wrapUserFunction(t){try{const a=t();return a instanceof ne?a:ne.resolve(a)}catch(a){return ne.reject(a)}}wrapSuccess(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.resolve(a)}wrapFailure(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.reject(a)}static resolve(t){return new ne(((a,s)=>{a(t)}))}static reject(t){return new ne(((a,s)=>{s(t)}))}static waitFor(t){return new ne(((a,s)=>{let o=0,c=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++c,h&&c===o&&a()}),(v=>s(v)))})),h=!0,c===o&&a()}))}static or(t){let a=ne.resolve(!1);for(const s of t)a=a.next((o=>o?ne.resolve(o):s()));return a}static forEach(t,a){const s=[];return t.forEach(((o,c)=>{s.push(a.call(this,o,c))})),this.waitFor(s)}static mapArray(t,a){return new ne(((s,o)=>{const c=t.length,h=new Array(c);let m=0;for(let v=0;v<c;v++){const b=v;a(t[b]).next((x=>{h[b]=x,++m,m===c&&s(h)}),(x=>o(x)))}}))}static doWhile(t,a){return new ne(((s,o)=>{const c=()=>{t()===!0?a().next((()=>{c()}),o):s()};c()}))}}function r2(r){const t=r.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function Jr(r){return r.name==="IndexedDbTransactionError"}class ju{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>a.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ju.ce=-1;const Xd=-1;function ku(r){return r==null}function Eu(r){return r===0&&1/r==-1/0}function l2(r){return typeof r=="number"&&Number.isInteger(r)&&!Eu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const qv="";function o2(r){let t="";for(let a=0;a<r.length;a++)t.length>0&&(t=Ay(t)),t=c2(r.get(a),t);return Ay(t)}function c2(r,t){let a=t;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":a+="";break;case qv:a+="";break;default:a+=c}}return a}function Ay(r){return r+qv+""}function Cy(r){let t=0;for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t++;return t}function zs(r,t){for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t(a,r[a])}function Hv(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class xt{constructor(t,a){this.comparator=t,this.root=a||an.EMPTY}insert(t,a){return new xt(this.comparator,this.root.insert(t,a,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let a=this.root;for(;!a.isEmpty();){const s=this.comparator(t,a.key);if(s===0)return a.value;s<0?a=a.left:s>0&&(a=a.right)}return null}indexOf(t){let a=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return a+s.left.size;o<0?s=s.left:(a+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((a,s)=>(t(a,s),!1)))}toString(){const t=[];return this.inorderTraversal(((a,s)=>(t.push(`${a}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nu(this.root,t,this.comparator,!1)}getReverseIterator(){return new nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nu(this.root,t,this.comparator,!0)}}class nu{constructor(t,a,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=a?s(t.key,a):1,a&&o&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const a={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,a,s,o,c){this.key=t,this.value=a,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=c??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,a,s,o,c){return new an(t??this.key,a??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,a,s){let o=this;const c=s(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,a,s),null):c===0?o.copy(null,a,null,null,null):o.copy(null,null,null,null,o.right.insert(t,a,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,a){let s,o=this;if(a(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,a),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),a(t,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,a))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,a)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Me(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(t,a,s,o,c){return this}insert(t,a,s){return new an(t,a)}remove(t,a){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((a,s)=>(t(a),!1)))}forEachInRange(t,a){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;a(o.key)}}forEachWhile(t,a){let s;for(s=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const a=this.data.getIteratorFrom(t);return a.hasNext()?a.getNext().key:null}getIterator(){return new Ny(this.data.getIterator())}getIteratorFrom(t){return new Ny(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let a=this;return a.size<t.size&&(a=t,t=this),t.forEach((s=>{a=a.add(s)})),a}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const a=this.data.getIterator(),s=t.data.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((a=>{t.push(a)})),t}toString(){const t=[];return this.forEach((a=>t.push(a))),"SortedSet("+t.toString()+")"}copy(t){const a=new Ht(this.comparator);return a.data=t,a}}class Ny{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ra{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new ra([])}unionWith(t){let a=new Ht(sn.comparator);for(const s of this.fields)a=a.add(s);for(const s of t)a=a.add(s);return new ra(a.toArray())}covers(t){for(const a of this.fields)if(a.isPrefixOf(t))return!0;return!1}isEqual(t){return Hr(this.fields,t.fields,((a,s)=>a.isEqual(s)))}}class Fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const a=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Fv("Invalid base64 string: "+c):c}})(t);return new rn(a)}static fromUint8Array(t){const a=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(t);return new rn(a)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(a){return btoa(a)})(this.binaryString)}toUint8Array(){return(function(a){const s=new Uint8Array(a.length);for(let o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return He(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const u2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(r){if(st(!!r,39018),typeof r=="string"){let t=0;const a=u2.exec(r);if(st(!!a,46558,{timestamp:r}),a[1]){let o=a[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ji(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}const Qv="server_timestamp",Xv="__type__",Yv="__previous_value__",Kv="__local_write_time__";function Yd(r){return(r?.mapValue?.fields||{})[Xv]?.stringValue===Qv}function Lu(r){const t=r.mapValue.fields[Yv];return Yd(t)?Lu(t):t}function yo(r){const t=Zi(r.mapValue.fields[Kv].timestampValue);return new dt(t.seconds,t.nanos)}class f2{constructor(t,a,s,o,c,h,m,v,b,x){this.databaseId=t,this.appId=a,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=x}}const Tu="(default)";class vo{constructor(t,a){this.projectId=t,this.database=a||Tu}static empty(){return new vo("","")}get isDefaultDatabase(){return this.database===Tu}isEqual(t){return t instanceof vo&&t.projectId===this.projectId&&t.database===this.database}}const $v="__type__",h2="__max__",au={mapValue:{}},Zv="__vector__",Su="value";function Wi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yd(r)?4:m2(r)?9007199254740991:d2(r)?10:11:Me(28295,{value:r})}function Ba(r,t){if(r===t)return!0;const a=Wi(r);if(a!==Wi(t))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return yo(r).isEqual(yo(t));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Zi(o.timestampValue),m=Zi(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,c){return Ji(o.bytesValue).isEqual(Ji(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(r,t);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Rt(o.doubleValue),m=Rt(c.doubleValue);return h===m?Eu(h)===Eu(m):isNaN(h)&&isNaN(m)}return!1})(r,t);case 9:return Hr(r.arrayValue.values||[],t.arrayValue.values||[],Ba);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Cy(h)!==Cy(m))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(m[v]===void 0||!Ba(h[v],m[v])))return!1;return!0})(r,t);default:return Me(52216,{left:r})}}function _o(r,t){return(r.values||[]).find((a=>Ba(a,t)))!==void 0}function Fr(r,t){if(r===t)return 0;const a=Wi(r),s=Wi(t);if(a!==s)return He(a,s);switch(a){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,t.booleanValue);case 2:return(function(c,h){const m=Rt(c.integerValue||c.doubleValue),v=Rt(h.integerValue||h.doubleValue);return m<v?-1:m>v?1:m===v?0:isNaN(m)?isNaN(v)?0:-1:1})(r,t);case 3:return Ry(r.timestampValue,t.timestampValue);case 4:return Ry(yo(r),yo(t));case 5:return Td(r.stringValue,t.stringValue);case 6:return(function(c,h){const m=Ji(c),v=Ji(h);return m.compareTo(v)})(r.bytesValue,t.bytesValue);case 7:return(function(c,h){const m=c.split("/"),v=h.split("/");for(let b=0;b<m.length&&b<v.length;b++){const x=He(m[b],v[b]);if(x!==0)return x}return He(m.length,v.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,h){const m=He(Rt(c.latitude),Rt(h.latitude));return m!==0?m:He(Rt(c.longitude),Rt(h.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return My(r.arrayValue,t.arrayValue);case 10:return(function(c,h){const m=c.fields||{},v=h.fields||{},b=m[Su]?.arrayValue,x=v[Su]?.arrayValue,E=He(b?.values?.length||0,x?.values?.length||0);return E!==0?E:My(b,x)})(r.mapValue,t.mapValue);case 11:return(function(c,h){if(c===au.mapValue&&h===au.mapValue)return 0;if(c===au.mapValue)return 1;if(h===au.mapValue)return-1;const m=c.fields||{},v=Object.keys(m),b=h.fields||{},x=Object.keys(b);v.sort(),x.sort();for(let E=0;E<v.length&&E<x.length;++E){const A=Td(v[E],x[E]);if(A!==0)return A;const L=Fr(m[v[E]],b[x[E]]);if(L!==0)return L}return He(v.length,x.length)})(r.mapValue,t.mapValue);default:throw Me(23264,{he:a})}}function Ry(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return He(r,t);const a=Zi(r),s=Zi(t),o=He(a.seconds,s.seconds);return o!==0?o:He(a.nanos,s.nanos)}function My(r,t){const a=r.values||[],s=t.values||[];for(let o=0;o<a.length&&o<s.length;++o){const c=Fr(a[o],s[o]);if(c)return c}return He(a.length,s.length)}function Qr(r){return Sd(r)}function Sd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(a){const s=Zi(a);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(a){return Ji(a).toBase64()})(r.bytesValue):"referenceValue"in r?(function(a){return we.fromName(a).toString()})(r.referenceValue):"geoPointValue"in r?(function(a){return`geo(${a.latitude},${a.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(a){let s="[",o=!0;for(const c of a.values||[])o?o=!1:s+=",",s+=Sd(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(a){const s=Object.keys(a.fields||{}).sort();let o="{",c=!0;for(const h of s)c?c=!1:o+=",",o+=`${h}:${Sd(a.fields[h])}`;return o+"}"})(r.mapValue):Me(61005,{value:r})}function cu(r){switch(Wi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lu(r);return t?16+cu(t):16;case 5:return 2*r.stringValue.length;case 6:return Ji(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+cu(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return zs(s.fields,((c,h)=>{o+=c.length+cu(h)})),o})(r.mapValue);default:throw Me(13486,{value:r})}}function Iy(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function wd(r){return!!r&&"integerValue"in r}function Kd(r){return!!r&&"arrayValue"in r}function Dy(r){return!!r&&"nullValue"in r}function Oy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uu(r){return!!r&&"mapValue"in r}function d2(r){return(r?.mapValue?.fields||{})[$v]?.stringValue===Zv}function lo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return zs(r.mapValue.fields,((a,s)=>t.mapValue.fields[a]=lo(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let a=0;a<(r.arrayValue.values||[]).length;++a)t.arrayValue.values[a]=lo(r.arrayValue.values[a]);return t}return{...r}}function m2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===h2}class Qn{constructor(t){this.value=t}static empty(){return new Qn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let a=this.value;for(let s=0;s<t.length-1;++s)if(a=(a.mapValue.fields||{})[t.get(s)],!uu(a))return null;return a=(a.mapValue.fields||{})[t.lastSegment()],a||null}}set(t,a){this.getFieldsMap(t.popLast())[t.lastSegment()]=lo(a)}setAll(t){let a=sn.emptyPath(),s={},o=[];t.forEach(((h,m)=>{if(!a.isImmediateParentOf(m)){const v=this.getFieldsMap(a);this.applyChanges(v,s,o),s={},o=[],a=m.popLast()}h?s[m.lastSegment()]=lo(h):o.push(m.lastSegment())}));const c=this.getFieldsMap(a);this.applyChanges(c,s,o)}delete(t){const a=this.field(t.popLast());uu(a)&&a.mapValue.fields&&delete a.mapValue.fields[t.lastSegment()]}isEqual(t){return Ba(this.value,t.value)}getFieldsMap(t){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=a.mapValue.fields[t.get(s)];uu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},a.mapValue.fields[t.get(s)]=o),a=o}return a.mapValue.fields}applyChanges(t,a,s){zs(a,((o,c)=>t[o]=c));for(const o of s)delete t[o]}clone(){return new Qn(lo(this.value))}}function Jv(r){const t=[];return zs(r.fields,((a,s)=>{const o=new sn([a]);if(uu(s)){const c=Jv(s.mapValue).fields;if(c.length===0)t.push(o);else for(const h of c)t.push(o.child(h))}else t.push(o)})),new ra(t)}class cn{constructor(t,a,s,o,c,h,m){this.key=t,this.documentType=a,this.version=s,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Ie.min(),Ie.min(),Ie.min(),Qn.empty(),0)}static newFoundDocument(t,a,s,o){return new cn(t,1,a,Ie.min(),s,o,0)}static newNoDocument(t,a){return new cn(t,2,a,Ie.min(),Ie.min(),Qn.empty(),0)}static newUnknownDocument(t,a){return new cn(t,3,a,Ie.min(),Ie.min(),Qn.empty(),2)}convertToFoundDocument(t,a){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wu{constructor(t,a){this.position=t,this.inclusive=a}}function Vy(r,t,a){let s=0;for(let o=0;o<r.position.length;o++){const c=t[o],h=r.position[o];if(c.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),a.key):s=Fr(h,a.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function jy(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let a=0;a<r.position.length;a++)if(!Ba(r.position[a],t.position[a]))return!1;return!0}class bo{constructor(t,a="asc"){this.field=t,this.dir=a}}function p2(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class Wv{}class Pt extends Wv{constructor(t,a,s){super(),this.field=t,this.op=a,this.value=s}static create(t,a,s){return t.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(t,a,s):new y2(t,a,s):a==="array-contains"?new b2(t,s):a==="in"?new x2(t,s):a==="not-in"?new E2(t,s):a==="array-contains-any"?new T2(t,s):new Pt(t,a,s)}static createKeyFieldInFilter(t,a,s){return a==="in"?new v2(t,s):new _2(t,s)}matches(t){const a=t.data.field(this.field);return this.op==="!="?a!==null&&a.nullValue===void 0&&this.matchesComparison(Fr(a,this.value)):a!==null&&Wi(this.value)===Wi(a)&&this.matchesComparison(Fr(a,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class la extends Wv{constructor(t,a){super(),this.filters=t,this.op=a,this.Pe=null}static create(t,a){return new la(t,a)}matches(t){return e_(this)?this.filters.find((a=>!a.matches(t)))===void 0:this.filters.find((a=>a.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,a)=>t.concat(a.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function e_(r){return r.op==="and"}function t_(r){return g2(r)&&e_(r)}function g2(r){for(const t of r.filters)if(t instanceof la)return!1;return!0}function Ad(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+Qr(r.value);if(t_(r))return r.filters.map((t=>Ad(t))).join(",");{const t=r.filters.map((a=>Ad(a))).join(",");return`${r.op}(${t})`}}function n_(r,t){return r instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&Ba(s.value,o.value)})(r,t):r instanceof la?(function(s,o){return o instanceof la&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,h,m)=>c&&n_(h,o.filters[m])),!0):!1})(r,t):void Me(19439)}function a_(r){return r instanceof Pt?(function(a){return`${a.field.canonicalString()} ${a.op} ${Qr(a.value)}`})(r):r instanceof la?(function(a){return a.op.toString()+" {"+a.getFilters().map(a_).join(" ,")+"}"})(r):"Filter"}class y2 extends Pt{constructor(t,a,s){super(t,a,s),this.key=we.fromName(s.referenceValue)}matches(t){const a=we.comparator(t.key,this.key);return this.matchesComparison(a)}}class v2 extends Pt{constructor(t,a){super(t,"in",a),this.keys=i_("in",a)}matches(t){return this.keys.some((a=>a.isEqual(t.key)))}}class _2 extends Pt{constructor(t,a){super(t,"not-in",a),this.keys=i_("not-in",a)}matches(t){return!this.keys.some((a=>a.isEqual(t.key)))}}function i_(r,t){return(t.arrayValue?.values||[]).map((a=>we.fromName(a.referenceValue)))}class b2 extends Pt{constructor(t,a){super(t,"array-contains",a)}matches(t){const a=t.data.field(this.field);return Kd(a)&&_o(a.arrayValue,this.value)}}class x2 extends Pt{constructor(t,a){super(t,"in",a)}matches(t){const a=t.data.field(this.field);return a!==null&&_o(this.value.arrayValue,a)}}class E2 extends Pt{constructor(t,a){super(t,"not-in",a)}matches(t){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=t.data.field(this.field);return a!==null&&a.nullValue===void 0&&!_o(this.value.arrayValue,a)}}class T2 extends Pt{constructor(t,a){super(t,"array-contains-any",a)}matches(t){const a=t.data.field(this.field);return!(!Kd(a)||!a.arrayValue.values)&&a.arrayValue.values.some((s=>_o(this.value.arrayValue,s)))}}class S2{constructor(t,a=null,s=[],o=[],c=null,h=null,m=null){this.path=t,this.collectionGroup=a,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function ky(r,t=null,a=[],s=[],o=null,c=null,h=null){return new S2(r,t,a,s,o,c,h)}function $d(r){const t=De(r);if(t.Te===null){let a=t.path.canonicalString();t.collectionGroup!==null&&(a+="|cg:"+t.collectionGroup),a+="|f:",a+=t.filters.map((s=>Ad(s))).join(","),a+="|ob:",a+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ku(t.limit)||(a+="|l:",a+=t.limit),t.startAt&&(a+="|lb:",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Qr(s))).join(",")),t.endAt&&(a+="|ub:",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Qr(s))).join(",")),t.Te=a}return t.Te}function Zd(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<r.orderBy.length;a++)if(!p2(r.orderBy[a],t.orderBy[a]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let a=0;a<r.filters.length;a++)if(!n_(r.filters[a],t.filters[a]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!jy(r.startAt,t.startAt)&&jy(r.endAt,t.endAt)}function Cd(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Wr{constructor(t,a=null,s=[],o=[],c=null,h="F",m=null,v=null){this.path=t,this.collectionGroup=a,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function w2(r,t,a,s,o,c,h,m){return new Wr(r,t,a,s,o,c,h,m)}function s_(r){return new Wr(r)}function Ly(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function r_(r){return r.collectionGroup!==null}function oo(r){const t=De(r);if(t.Ie===null){t.Ie=[];const a=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),a.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ht(sn.comparator);return h.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(m=m.add(b.field))}))})),m})(t).forEach((c=>{a.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new bo(c,s))})),a.has(sn.keyField().canonicalString())||t.Ie.push(new bo(sn.keyField(),s))}return t.Ie}function Va(r){const t=De(r);return t.Ee||(t.Ee=A2(t,oo(r))),t.Ee}function A2(r,t){if(r.limitType==="F")return ky(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new bo(o.field,c)}));const a=r.endAt?new wu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new wu(r.startAt.position,r.startAt.inclusive):null;return ky(r.path,r.collectionGroup,t,r.filters,r.limit,a,s)}}function Nd(r,t){const a=r.filters.concat([t]);return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),a,r.limit,r.limitType,r.startAt,r.endAt)}function Au(r,t,a){return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,a,r.startAt,r.endAt)}function Bu(r,t){return Zd(Va(r),Va(t))&&r.limitType===t.limitType}function l_(r){return`${$d(Va(r))}|lt:${r.limitType}`}function Vr(r){return`Query(target=${(function(a){let s=a.path.canonicalString();return a.collectionGroup!==null&&(s+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(s+=`, filters: [${a.filters.map((o=>a_(o))).join(", ")}]`),ku(a.limit)||(s+=", limit: "+a.limit),a.orderBy.length>0&&(s+=`, orderBy: [${a.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),a.startAt&&(s+=", startAt: ",s+=a.startAt.inclusive?"b:":"a:",s+=a.startAt.position.map((o=>Qr(o))).join(",")),a.endAt&&(s+=", endAt: ",s+=a.endAt.inclusive?"a:":"b:",s+=a.endAt.position.map((o=>Qr(o))).join(",")),`Target(${s})`})(Va(r))}; limitType=${r.limitType})`}function Uu(r,t){return t.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):we.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,o){for(const c of oo(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(h,m,v){const b=Vy(h,m,v);return h.inclusive?b<=0:b<0})(s.startAt,oo(s),o)||s.endAt&&!(function(h,m,v){const b=Vy(h,m,v);return h.inclusive?b>=0:b>0})(s.endAt,oo(s),o))})(r,t)}function C2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function o_(r){return(t,a)=>{let s=!1;for(const o of oo(r)){const c=N2(o,t,a);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function N2(r,t,a){const s=r.field.isKeyField()?we.comparator(t.key,a.key):(function(c,h,m){const v=h.data.field(c),b=m.data.field(c);return v!==null&&b!==null?Fr(v,b):Me(42886)})(r.field,t,a);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:r.dir})}}class Ps{constructor(t,a){this.mapKeyFn=t,this.equalsFn=a,this.inner={},this.innerSize=0}get(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,t))return c}}has(t){return this.get(t)!==void 0}set(t,a){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,a]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return void(o[c]=[t,a]);o.push([t,a]),this.innerSize++}delete(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[a]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){zs(this.inner,((a,s)=>{for(const[o,c]of s)t(o,c)}))}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}const R2=new xt(we.comparator);function oi(){return R2}const c_=new xt(we.comparator);function ao(...r){let t=c_;for(const a of r)t=t.insert(a.key,a);return t}function u_(r){let t=c_;return r.forEach(((a,s)=>t=t.insert(a,s.overlayedDocument))),t}function ks(){return co()}function f_(){return co()}function co(){return new Ps((r=>r.toString()),((r,t)=>r.isEqual(t)))}const M2=new xt(we.comparator),I2=new Ht(we.comparator);function Fe(...r){let t=I2;for(const a of r)t=t.add(a);return t}const D2=new Ht(He);function O2(){return D2}function Jd(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(t)?"-0":t}}function h_(r){return{integerValue:""+r}}function V2(r,t){return l2(t)?h_(t):Jd(r,t)}class zu{constructor(){this._=void 0}}function j2(r,t,a){return r instanceof Cu?(function(o,c){const h={fields:{[Xv]:{stringValue:Qv},[Kv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Yd(c)&&(c=Lu(c)),c&&(h.fields[Yv]=c),{mapValue:h}})(a,t):r instanceof xo?m_(r,t):r instanceof Eo?p_(r,t):(function(o,c){const h=d_(o,c),m=By(h)+By(o.Ae);return wd(h)&&wd(o.Ae)?h_(m):Jd(o.serializer,m)})(r,t)}function k2(r,t,a){return r instanceof xo?m_(r,t):r instanceof Eo?p_(r,t):a}function d_(r,t){return r instanceof Nu?(function(s){return wd(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Cu extends zu{}class xo extends zu{constructor(t){super(),this.elements=t}}function m_(r,t){const a=g_(t);for(const s of r.elements)a.some((o=>Ba(o,s)))||a.push(s);return{arrayValue:{values:a}}}class Eo extends zu{constructor(t){super(),this.elements=t}}function p_(r,t){let a=g_(t);for(const s of r.elements)a=a.filter((o=>!Ba(o,s)));return{arrayValue:{values:a}}}class Nu extends zu{constructor(t,a){super(),this.serializer=t,this.Ae=a}}function By(r){return Rt(r.integerValue||r.doubleValue)}function g_(r){return Kd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function L2(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof xo&&o instanceof xo||s instanceof Eo&&o instanceof Eo?Hr(s.elements,o.elements,Ba):s instanceof Nu&&o instanceof Nu?Ba(s.Ae,o.Ae):s instanceof Cu&&o instanceof Cu})(r.transform,t.transform)}class B2{constructor(t,a){this.version=t,this.transformResults=a}}class si{constructor(t,a){this.updateTime=t,this.exists=a}static none(){return new si}static exists(t){return new si(void 0,t)}static updateTime(t){return new si(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fu(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Pu{}function y_(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new __(r.key,si.none()):new So(r.key,r.data,si.none());{const a=r.data,s=Qn.empty();let o=new Ht(sn.comparator);for(let c of t.fields)if(!o.has(c)){let h=a.field(c);h===null&&c.length>1&&(c=c.popLast(),h=a.field(c)),h===null?s.delete(c):s.set(c,h),o=o.add(c)}return new Gs(r.key,s,new ra(o.toArray()),si.none())}}function U2(r,t,a){r instanceof So?(function(o,c,h){const m=o.value.clone(),v=zy(o.fieldTransforms,c,h.transformResults);m.setAll(v),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,t,a):r instanceof Gs?(function(o,c,h){if(!fu(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=zy(o.fieldTransforms,c,h.transformResults),v=c.data;v.setAll(v_(o)),v.setAll(m),c.convertToFoundDocument(h.version,v).setHasCommittedMutations()})(r,t,a):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,a)}function uo(r,t,a,s){return r instanceof So?(function(c,h,m,v){if(!fu(c.precondition,h))return m;const b=c.value.clone(),x=Py(c.fieldTransforms,v,h);return b.setAll(x),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),null})(r,t,a,s):r instanceof Gs?(function(c,h,m,v){if(!fu(c.precondition,h))return m;const b=Py(c.fieldTransforms,v,h),x=h.data;return x.setAll(v_(c)),x.setAll(b),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(r,t,a,s):(function(c,h,m){return fu(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,t,a)}function z2(r,t){let a=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),c=d_(s.transform,o||null);c!=null&&(a===null&&(a=Qn.empty()),a.set(s.field,c))}return a||null}function Uy(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Hr(s,o,((c,h)=>L2(c,h)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class So extends Pu{constructor(t,a,s,o=[]){super(),this.key=t,this.value=a,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends Pu{constructor(t,a,s,o,c=[]){super(),this.key=t,this.data=a,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function v_(r){const t=new Map;return r.fieldMask.fields.forEach((a=>{if(!a.isEmpty()){const s=r.data.field(a);t.set(a,s)}})),t}function zy(r,t,a){const s=new Map;st(r.length===a.length,32656,{Re:a.length,Ve:r.length});for(let o=0;o<a.length;o++){const c=r[o],h=c.transform,m=t.data.field(c.field);s.set(c.field,k2(h,m,a[o]))}return s}function Py(r,t,a){const s=new Map;for(const o of r){const c=o.transform,h=a.data.field(o.field);s.set(o.field,j2(c,h,t))}return s}class __ extends Pu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P2 extends Pu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class G2{constructor(t,a,s,o){this.batchId=t,this.localWriteTime=a,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,a){const s=a.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(t.key)&&U2(c,t,s[o])}}applyToLocalView(t,a){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(a=uo(s,t,a,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(a=uo(s,t,a,this.localWriteTime));return a}applyToLocalDocumentSet(t,a){const s=f_();return this.mutations.forEach((o=>{const c=t.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=a.has(o.key)?null:m;const v=y_(h,m);v!==null&&s.set(o.key,v),h.isValidDocument()||h.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((t,a)=>t.add(a.key)),Fe())}isEqual(t){return this.batchId===t.batchId&&Hr(this.mutations,t.mutations,((a,s)=>Uy(a,s)))&&Hr(this.baseMutations,t.baseMutations,((a,s)=>Uy(a,s)))}}class Wd{constructor(t,a,s,o){this.batch=t,this.commitVersion=a,this.mutationResults=s,this.docVersions=o}static from(t,a,s){st(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return M2})();const c=t.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new Wd(t,a,s,o)}}class q2{constructor(t,a){this.largestBatchId=t,this.mutation=a}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class H2{constructor(t,a){this.count=t,this.unchangedNames=a}}var zt,Xe;function F2(r){switch(r){case te.OK:return Me(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Me(15467,{code:r})}}function b_(r){if(r===void 0)return li("GRPC error has no .code"),te.UNKNOWN;switch(r){case zt.OK:return te.OK;case zt.CANCELLED:return te.CANCELLED;case zt.UNKNOWN:return te.UNKNOWN;case zt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case zt.INTERNAL:return te.INTERNAL;case zt.UNAVAILABLE:return te.UNAVAILABLE;case zt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case zt.NOT_FOUND:return te.NOT_FOUND;case zt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case zt.ABORTED:return te.ABORTED;case zt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case zt.DATA_LOSS:return te.DATA_LOSS;default:return Me(39323,{code:r})}}(Xe=zt||(zt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function Q2(){return new TextEncoder}const X2=new Xi([4294967295,4294967295],0);function Gy(r){const t=Q2().encode(r),a=new Ov;return a.update(t),new Uint8Array(a.digest())}function qy(r){const t=new DataView(r.buffer),a=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Xi([a,s],0),new Xi([o,c],0)]}class em{constructor(t,a,s){if(this.bitmap=t,this.padding=a,this.hashCount=s,a<0||a>=8)throw new io(`Invalid padding: ${a}`);if(s<0)throw new io(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${s}`);if(t.length===0&&a!==0)throw new io(`Invalid padding when bitmap length is 0: ${a}`);this.ge=8*t.length-a,this.pe=Xi.fromNumber(this.ge)}ye(t,a,s){let o=t.add(a.multiply(Xi.fromNumber(s)));return o.compare(X2)===1&&(o=new Xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const a=Gy(t),[s,o]=qy(a);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);if(!this.we(h))return!1}return!0}static create(t,a,s){const o=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),h=new em(c,o,a);return s.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const a=Gy(t),[s,o]=qy(a);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);this.Se(h)}}Se(t){const a=Math.floor(t/8),s=t%8;this.bitmap[a]|=1<<s}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gu{constructor(t,a,s,o,c){this.snapshotVersion=t,this.targetChanges=a,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,a,s){const o=new Map;return o.set(t,wo.createSynthesizedTargetChangeForCurrentChange(t,a,s)),new Gu(Ie.min(),o,new xt(He),oi(),Fe())}}class wo{constructor(t,a,s,o,c){this.resumeToken=t,this.current=a,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,a,s){return new wo(s,a,Fe(),Fe(),Fe())}}class hu{constructor(t,a,s,o){this.be=t,this.removedTargetIds=a,this.key=s,this.De=o}}class x_{constructor(t,a){this.targetId=t,this.Ce=a}}class E_{constructor(t,a,s=rn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=a,this.resumeToken=s,this.cause=o}}class Hy{constructor(){this.ve=0,this.Fe=Fy(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Fe(),a=Fe(),s=Fe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:t=t.add(o);break;case 2:a=a.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:c})}})),new wo(this.Me,this.xe,t,a,s)}qe(){this.Oe=!1,this.Fe=Fy()}Qe(t,a){this.Oe=!0,this.Fe=this.Fe.insert(t,a)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Y2{constructor(t){this.Ge=t,this.ze=new Map,this.je=oi(),this.Je=iu(),this.He=iu(),this.Ye=new xt(He)}Ze(t){for(const a of t.be)t.De&&t.De.isFoundDocument()?this.Xe(a,t.De):this.et(a,t.key,t.De);for(const a of t.removedTargetIds)this.et(a,t.key,t.De)}tt(t){this.forEachTarget(t,(a=>{const s=this.nt(a);switch(t.state){case 0:this.rt(a)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(a);break;case 3:this.rt(a)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(a)&&(this.it(a),s.Le(t.resumeToken));break;default:Me(56790,{state:t.state})}}))}forEachTarget(t,a){t.targetIds.length>0?t.targetIds.forEach(a):this.ze.forEach(((s,o)=>{this.rt(o)&&a(o)}))}st(t){const a=t.targetId,s=t.Ce.count,o=this.ot(a);if(o){const c=o.target;if(Cd(c))if(s===0){const h=new we(c.path);this.et(a,h,cn.newNoDocument(h,Ie.min()))}else st(s===1,20013,{expectedCount:s});else{const h=this._t(a);if(h!==s){const m=this.ut(t),v=m?this.ct(m,t,h):1;if(v!==0){this.it(a);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(a,b)}}}}}ut(t){const a=t.Ce.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=a;let h,m;try{h=Ji(s).toUint8Array()}catch(v){if(v instanceof Fv)return qr("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{m=new em(h,o,c)}catch(v){return qr(v instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return m.ge===0?null:m}ct(t,a,s){return a.Ce.count===s-this.Pt(t,a.targetId)?0:2}Pt(t,a){const s=this.Ge.getRemoteKeysForTarget(a);let o=0;return s.forEach((c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.et(a,c,null),o++)})),o}Tt(t){const a=new Map;this.ze.forEach(((c,h)=>{const m=this.ot(h);if(m){if(c.current&&Cd(m.target)){const v=new we(m.target.path);this.It(v).has(h)||this.Et(h,v)||this.et(h,v,cn.newNoDocument(v,t))}c.Be&&(a.set(h,c.ke()),c.qe())}}));let s=Fe();this.He.forEach(((c,h)=>{let m=!0;h.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(t)));const o=new Gu(t,a,this.Ye,this.je,s);return this.je=oi(),this.Je=iu(),this.He=iu(),this.Ye=new xt(He),o}Xe(t,a){if(!this.rt(t))return;const s=this.Et(t,a.key)?2:0;this.nt(t).Qe(a.key,s),this.je=this.je.insert(a.key,a),this.Je=this.Je.insert(a.key,this.It(a.key).add(t)),this.He=this.He.insert(a.key,this.dt(a.key).add(t))}et(t,a,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,a)?o.Qe(a,1):o.$e(a),this.He=this.He.insert(a,this.dt(a).delete(t)),this.He=this.He.insert(a,this.dt(a).add(t)),s&&(this.je=this.je.insert(a,s))}removeTarget(t){this.ze.delete(t)}_t(t){const a=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+a.addedDocuments.size-a.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let a=this.ze.get(t);return a||(a=new Hy,this.ze.set(t,a)),a}dt(t){let a=this.He.get(t);return a||(a=new Ht(He),this.He=this.He.insert(t,a)),a}It(t){let a=this.Je.get(t);return a||(a=new Ht(He),this.Je=this.Je.insert(t,a)),a}rt(t){const a=this.ot(t)!==null;return a||ve("WatchChangeAggregator","Detected inactive target",t),a}ot(t){const a=this.ze.get(t);return a&&a.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Hy),this.Ge.getRemoteKeysForTarget(t).forEach((a=>{this.et(t,a,null)}))}Et(t,a){return this.Ge.getRemoteKeysForTarget(t).has(a)}}function iu(){return new xt(we.comparator)}function Fy(){return new xt(we.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},$2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z2={and:"AND",or:"OR"};class J2{constructor(t,a){this.databaseId=t,this.useProto3Json=a}}function Rd(r,t){return r.useProto3Json||ku(t)?t:{value:t}}function Ru(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function T_(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function W2(r,t){return Ru(r,t.toTimestamp())}function ja(r){return st(!!r,49232),Ie.fromTimestamp((function(a){const s=Zi(a);return new dt(s.seconds,s.nanos)})(r))}function tm(r,t){return Md(r,t).canonicalString()}function Md(r,t){const a=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?a:a.child(t)}function S_(r){const t=pt.fromString(r);return st(R_(t),10190,{key:t.toString()}),t}function Id(r,t){return tm(r.databaseId,t.path)}function rd(r,t){const a=S_(t);if(a.get(1)!==r.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+r.databaseId.projectId);if(a.get(3)!==r.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+r.databaseId.database);return new we(A_(a))}function w_(r,t){return tm(r.databaseId,t)}function eS(r){const t=S_(r);return t.length===4?pt.emptyPath():A_(t)}function Dd(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function A_(r){return st(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Qy(r,t,a){return{name:Id(r,t),fields:a.value.mapValue.fields}}function tS(r,t){let a;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Me(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=(function(b,x){return b.useProto3Json?(st(x===void 0||typeof x=="string",58123),rn.fromBase64String(x||"")):(st(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),rn.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(b){const x=b.code===void 0?te.UNKNOWN:b_(b.code);return new pe(x,b.message||"")})(h);a=new E_(s,o,c,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=rd(r,s.document.name),c=ja(s.document.updateTime),h=s.document.createTime?ja(s.document.createTime):Ie.min(),m=new Qn({mapValue:{fields:s.document.fields}}),v=cn.newFoundDocument(o,c,h,m),b=s.targetIds||[],x=s.removedTargetIds||[];a=new hu(b,x,v.key,v)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=rd(r,s.document),c=s.readTime?ja(s.readTime):Ie.min(),h=cn.newNoDocument(o,c),m=s.removedTargetIds||[];a=new hu([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=rd(r,s.document),c=s.removedTargetIds||[];a=new hu([],c,o,null)}else{if(!("filter"in t))return Me(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,h=new H2(o,c),m=s.targetId;a=new x_(m,h)}}return a}function nS(r,t){let a;if(t instanceof So)a={update:Qy(r,t.key,t.value)};else if(t instanceof __)a={delete:Id(r,t.key)};else if(t instanceof Gs)a={update:Qy(r,t.key,t.data),updateMask:fS(t.fieldMask)};else{if(!(t instanceof P2))return Me(16599,{Vt:t.type});a={verify:Id(r,t.key)}}return t.fieldTransforms.length>0&&(a.updateTransforms=t.fieldTransforms.map((s=>(function(c,h){const m=h.transform;if(m instanceof Cu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof xo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Eo)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Nu)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Me(20930,{transform:h.transform})})(0,s)))),t.precondition.isNone||(a.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:W2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)})(r,t.precondition)),a}function aS(r,t){return r&&r.length>0?(st(t!==void 0,14353),r.map((a=>(function(o,c){let h=o.updateTime?ja(o.updateTime):ja(c);return h.isEqual(Ie.min())&&(h=ja(c)),new B2(h,o.transformResults||[])})(a,t)))):[]}function iS(r,t){return{documents:[w_(r,t.path)]}}function sS(r,t){const a={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),a.structuredQuery.from=[{collectionId:s.lastSegment()}]),a.parent=w_(r,o);const c=(function(b){if(b.length!==0)return N_(la.create(b,"and"))})(t.filters);c&&(a.structuredQuery.where=c);const h=(function(b){if(b.length!==0)return b.map((x=>(function(A){return{field:jr(A.field),direction:oS(A.dir)}})(x)))})(t.orderBy);h&&(a.structuredQuery.orderBy=h);const m=Rd(r,t.limit);return m!==null&&(a.structuredQuery.limit=m),t.startAt&&(a.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(a.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:a,parent:o}}function rS(r){let t=eS(r.parent);const a=r.structuredQuery,s=a.from?a.from.length:0;let o=null;if(s>0){st(s===1,65062);const x=a.from[0];x.allDescendants?o=x.collectionId:t=t.child(x.collectionId)}let c=[];a.where&&(c=(function(E){const A=C_(E);return A instanceof la&&t_(A)?A.getFilters():[A]})(a.where));let h=[];a.orderBy&&(h=(function(E){return E.map((A=>(function(j){return new bo(kr(j.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(a.orderBy));let m=null;a.limit&&(m=(function(E){let A;return A=typeof E=="object"?E.value:E,ku(A)?null:A})(a.limit));let v=null;a.startAt&&(v=(function(E){const A=!!E.before,L=E.values||[];return new wu(L,A)})(a.startAt));let b=null;return a.endAt&&(b=(function(E){const A=!E.before,L=E.values||[];return new wu(L,A)})(a.endAt)),w2(t,o,h,c,m,"F",v,b)}function lS(r,t){const a=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(t.purpose);return a==null?null:{"goog-listen-tags":a}}function C_(r){return r.unaryFilter!==void 0?(function(a){switch(a.unaryFilter.op){case"IS_NAN":const s=kr(a.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=kr(a.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=kr(a.unaryFilter.field);return Pt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=kr(a.unaryFilter.field);return Pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(r):r.fieldFilter!==void 0?(function(a){return Pt.create(kr(a.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(a.fieldFilter.op),a.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(a){return la.create(a.compositeFilter.filters.map((s=>C_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(a.compositeFilter.op))})(r):Me(30097,{filter:r})}function oS(r){return K2[r]}function cS(r){return $2[r]}function uS(r){return Z2[r]}function jr(r){return{fieldPath:r.canonicalString()}}function kr(r){return sn.fromServerFormat(r.fieldPath)}function N_(r){return r instanceof Pt?(function(a){if(a.op==="=="){if(Oy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NAN"}};if(Dy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(Oy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NOT_NAN"}};if(Dy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(a.field),op:cS(a.op),value:a.value}}})(r):r instanceof la?(function(a){const s=a.getFilters().map((o=>N_(o)));return s.length===1?s[0]:{compositeFilter:{op:uS(a.op),filters:s}}})(r):Me(54877,{filter:r})}function fS(r){const t=[];return r.fields.forEach((a=>t.push(a.canonicalString()))),{fieldPaths:t}}function R_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Hi{constructor(t,a,s,o,c=Ie.min(),h=Ie.min(),m=rn.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=a,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(t){return new Hi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,a){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class hS{constructor(t){this.yt=t}}function dS(r){const t=rS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Au(t,t.limit,"L"):t}class mS{constructor(){this.Cn=new pS}addToCollectionParentIndex(t,a){return this.Cn.add(a),ne.resolve()}getCollectionParents(t,a){return ne.resolve(this.Cn.getEntries(a))}addFieldIndex(t,a){return ne.resolve()}deleteFieldIndex(t,a){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,a){return ne.resolve()}getDocumentsMatchingTarget(t,a){return ne.resolve(null)}getIndexType(t,a){return ne.resolve(0)}getFieldIndexes(t,a){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,a){return ne.resolve($i.min())}getMinOffsetFromCollectionGroup(t,a){return ne.resolve($i.min())}updateCollectionGroup(t,a,s){return ne.resolve()}updateIndexEntries(t,a){return ne.resolve()}}class pS{constructor(){this.index={}}add(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a]||new Ht(pt.comparator),c=!o.has(s);return this.index[a]=o.add(s),c}has(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ht(pt.comparator)).toArray()}}const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M_=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,a,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=a,this.maximumSequenceNumbersToCollect=s}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(M_,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xr(0)}static cr(){return new Xr(-1)}}const Yy="LruGarbageCollector",gS=1048576;function Ky([r,t],[a,s]){const o=He(r,a);return o===0?He(t,s):o}class yS{constructor(t){this.Ir=t,this.buffer=new Ht(Ky),this.Er=0}dr(){return++this.Er}Ar(t){const a=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(a);else{const s=this.buffer.last();Ky(a,s)<0&&(this.buffer=this.buffer.delete(s).add(a))}}get maxValue(){return this.buffer.last()[0]}}class vS{constructor(t,a,s){this.garbageCollector=t,this.asyncQueue=a,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ve(Yy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){Jr(a)?ve(Yy,"Ignoring IndexedDB error during garbage collection: ",a):await Zr(a)}await this.Vr(3e5)}))}}class _S{constructor(t,a){this.mr=t,this.params=a}calculateTargetCount(t,a){return this.mr.gr(t).next((s=>Math.floor(a/100*s)))}nthSequenceNumber(t,a){if(a===0)return ne.resolve(ju.ce);const s=new yS(a);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,a,s){return this.mr.removeTargets(t,a,s)}removeOrphanedDocuments(t,a){return this.mr.removeOrphanedDocuments(t,a)}collect(t,a){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Xy)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.yr(t,a)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,a){let s,o,c,h,m,v,b;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(t,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(t,s,a)))).next((E=>(c=E,v=Date.now(),this.removeOrphanedDocuments(t,s)))).next((E=>(b=Date.now(),Or()<=Ke.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(v-m)+`ms
	Removed ${E} documents in `+(b-v)+`ms
Total Duration: ${b-x}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function bS(r,t){return new _S(r,t)}class xS{constructor(){this.changes=new Ps((t=>t.toString()),((t,a)=>t.isEqual(a))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,a){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(a))}getEntry(t,a){this.assertNotApplied();const s=this.changes.get(a);return s!==void 0?ne.resolve(s):this.getFromCache(t,a)}getEntries(t,a){return this.getAllFromCache(t,a)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ES{constructor(t,a){this.overlayedDocument=t,this.mutatedFields=a}}class TS{constructor(t,a,s,o){this.remoteDocumentCache=t,this.mutationQueue=a,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,a){let s=null;return this.documentOverlayCache.getOverlay(t,a).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,a)))).next((o=>(s!==null&&uo(s.mutation,o,ra.empty(),dt.now()),o)))}getDocuments(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.getLocalViewOfDocuments(t,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(t,a,s=Fe()){const o=ks();return this.populateOverlays(t,o,a).next((()=>this.computeViews(t,a,o,s).next((c=>{let h=ao();return c.forEach(((m,v)=>{h=h.insert(m,v.overlayedDocument)})),h}))))}getOverlayedDocuments(t,a){const s=ks();return this.populateOverlays(t,s,a).next((()=>this.computeViews(t,a,s,Fe())))}populateOverlays(t,a,s){const o=[];return s.forEach((c=>{a.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(t,o).next((c=>{c.forEach(((h,m)=>{a.set(h,m)}))}))}computeViews(t,a,s,o){let c=oi();const h=co(),m=(function(){return co()})();return a.forEach(((v,b)=>{const x=s.get(b.key);o.has(b.key)&&(x===void 0||x.mutation instanceof Gs)?c=c.insert(b.key,b):x!==void 0?(h.set(b.key,x.mutation.getFieldMask()),uo(x.mutation,b,x.mutation.getFieldMask(),dt.now())):h.set(b.key,ra.empty())})),this.recalculateAndSaveOverlays(t,c).next((v=>(v.forEach(((b,x)=>h.set(b,x))),a.forEach(((b,x)=>m.set(b,new ES(x,h.get(b)??null)))),m)))}recalculateAndSaveOverlays(t,a){const s=co();let o=new xt(((h,m)=>h-m)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,a).next((h=>{for(const m of h)m.keys().forEach((v=>{const b=a.get(v);if(b===null)return;let x=s.get(v)||ra.empty();x=m.applyToLocalView(b,x),s.set(v,x);const E=(o.get(m.batchId)||Fe()).add(v);o=o.insert(m.batchId,E)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),b=v.key,x=v.value,E=f_();x.forEach((A=>{if(!c.has(A)){const L=y_(a.get(A),s.get(A));L!==null&&E.set(A,L),c=c.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(t,b,E))}return ne.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,a,s,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(a)?this.getDocumentsMatchingDocumentQuery(t,a.path):r_(a)?this.getDocumentsMatchingCollectionGroupQuery(t,a,s,o):this.getDocumentsMatchingCollectionQuery(t,a,s,o)}getNextDocuments(t,a,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,a,s,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,a,s.largestBatchId,o-c.size):ne.resolve(ks());let m=go,v=c;return h.next((b=>ne.forEach(b,((x,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(x)?ne.resolve():this.remoteDocumentCache.getEntry(t,x).next((A=>{v=v.insert(x,A)}))))).next((()=>this.populateOverlays(t,b,c))).next((()=>this.computeViews(t,v,b,Fe()))).next((x=>({batchId:m,changes:u_(x)})))))}))}getDocumentsMatchingDocumentQuery(t,a){return this.getDocument(t,new we(a)).next((s=>{let o=ao();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,a,s,o){const c=a.collectionGroup;let h=ao();return this.indexManager.getCollectionParents(t,c).next((m=>ne.forEach(m,(v=>{const b=(function(E,A){return new Wr(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(a,v.child(c));return this.getDocumentsMatchingCollectionQuery(t,b,s,o).next((x=>{x.forEach(((E,A)=>{h=h.insert(E,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,a,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(t,a.path,s.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,a,s,c,o)))).next((h=>{c.forEach(((v,b)=>{const x=b.getKey();h.get(x)===null&&(h=h.insert(x,cn.newInvalidDocument(x)))}));let m=ao();return h.forEach(((v,b)=>{const x=c.get(v);x!==void 0&&uo(x.mutation,b,ra.empty(),dt.now()),Uu(a,b)&&(m=m.insert(v,b))})),m}))}}class SS{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,a){return ne.resolve(this.Lr.get(a))}saveBundleMetadata(t,a){return this.Lr.set(a.id,(function(o){return{id:o.id,version:o.version,createTime:ja(o.createTime)}})(a)),ne.resolve()}getNamedQuery(t,a){return ne.resolve(this.kr.get(a))}saveNamedQuery(t,a){return this.kr.set(a.name,(function(o){return{name:o.name,query:dS(o.bundledQuery),readTime:ja(o.readTime)}})(a)),ne.resolve()}}class wS{constructor(){this.overlays=new xt(we.comparator),this.qr=new Map}getOverlay(t,a){return ne.resolve(this.overlays.get(a))}getOverlays(t,a){const s=ks();return ne.forEach(a,(o=>this.getOverlay(t,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(t,a,s){return s.forEach(((o,c)=>{this.St(t,a,c)})),ne.resolve()}removeOverlaysForBatchId(t,a,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(t,a,s){const o=ks(),c=a.length+1,h=new we(a.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const v=m.getNext().value,b=v.getKey();if(!a.isPrefixOf(b.path))break;b.path.length===c&&v.largestBatchId>s&&o.set(v.getKey(),v)}return ne.resolve(o)}getOverlaysForCollectionGroup(t,a,s,o){let c=new xt(((b,x)=>b-x));const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===a&&b.largestBatchId>s){let x=c.get(b.largestBatchId);x===null&&(x=ks(),c=c.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=ks(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,x)=>m.set(b,x))),!(m.size()>=o)););return ne.resolve(m)}St(t,a,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new q2(a,s));let c=this.qr.get(a);c===void 0&&(c=Fe(),this.qr.set(a,c)),this.qr.set(a,c.add(s.key))}}class AS{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,a){return this.sessionToken=a,ne.resolve()}}class nm{constructor(){this.Qr=new Ht(Yt.$r),this.Ur=new Ht(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,a){const s=new Yt(t,a);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,a){t.forEach((s=>this.addReference(s,a)))}removeReference(t,a){this.Gr(new Yt(t,a))}zr(t,a){t.forEach((s=>this.removeReference(s,a)))}jr(t){const a=new we(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1),c=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const a=new we(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1);let c=Fe();return this.Ur.forEachInRange([s,o],(h=>{c=c.add(h.key)})),c}containsKey(t){const a=new Yt(t,0),s=this.Qr.firstAfterOrEqual(a);return s!==null&&t.isEqual(s.key)}}class Yt{constructor(t,a){this.key=t,this.Yr=a}static $r(t,a){return we.comparator(t.key,a.key)||He(t.Yr,a.Yr)}static Kr(t,a){return He(t.Yr,a.Yr)||we.comparator(t.key,a.key)}}class CS{constructor(t,a){this.indexManager=t,this.referenceDelegate=a,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Yt.$r)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,a,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new G2(c,a,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(t,a){return ne.resolve(this.Xr(a))}getNextMutationBatchAfterBatchId(t,a){const s=a+1,o=this.ei(s),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Xd:this.tr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,a){const s=new Yt(a,0),o=new Yt(a,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);c.push(m)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,a){let s=new Ht(He);return a.forEach((o=>{const c=new Yt(o,0),h=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,a){const s=a.path,o=s.length+1;let c=s;we.isDocumentKey(c)||(c=c.child(""));const h=new Yt(new we(c),0);let m=new Ht(He);return this.Zr.forEachWhile((v=>{const b=v.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(m=m.add(v.Yr)),!0)}),h),ne.resolve(this.ti(m))}ti(t){const a=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&a.push(o)})),a}removeMutationBatch(t,a){st(this.ni(a.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(a.mutations,(o=>{const c=new Yt(o.key,a.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,a){const s=new Yt(a,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(a.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}ni(t,a){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const a=this.ei(t);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}class NS{constructor(t){this.ri=t,this.docs=(function(){return new xt(we.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,a){const s=a.key,o=this.docs.get(s),c=o?o.size:0,h=this.ri(a);return this.docs=this.docs.insert(s,{document:a.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const a=this.docs.get(t);a&&(this.docs=this.docs.remove(t),this.size-=a.size)}getEntry(t,a){const s=this.docs.get(a);return ne.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(a))}getEntries(t,a){let s=oi();return a.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():cn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(t,a,s,o){let c=oi();const h=a.path,m=new we(h.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:b,value:{document:x}}=v.getNext();if(!h.isPrefixOf(b.path))break;b.path.length>h.length+1||a2(n2(x),s)<=0||(o.has(x.key)||Uu(a,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(t,a,s,o){Me(9500)}ii(t,a){return ne.forEach(this.docs,(s=>a(s)))}newChangeBuffer(t){return new RS(this)}getSize(t){return ne.resolve(this.size)}}class RS extends xS{constructor(t){super(),this.Nr=t}applyChanges(t){const a=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?a.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),ne.waitFor(a)}getFromCache(t,a){return this.Nr.getEntry(t,a)}getAllFromCache(t,a){return this.Nr.getEntries(t,a)}}class MS{constructor(t){this.persistence=t,this.si=new Ps((a=>$d(a)),Zd),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new nm,this.targetCount=0,this.ai=Xr.ur()}forEachTarget(t,a){return this.si.forEach(((s,o)=>a(o))),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,a,s){return s&&(this.lastRemoteSnapshotVersion=s),a>this.oi&&(this.oi=a),ne.resolve()}Pr(t){this.si.set(t.target,t);const a=t.targetId;a>this.highestTargetId&&(this.ai=new Xr(a),this.highestTargetId=a),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,a){return this.Pr(a),this.targetCount+=1,ne.resolve()}updateTargetData(t,a){return this.Pr(a),ne.resolve()}removeTargetData(t,a){return this.si.delete(a.target),this._i.jr(a.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,a,s){let o=0;const c=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=a&&s.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,a){const s=this.si.get(a)||null;return ne.resolve(s)}addMatchingKeys(t,a,s){return this._i.Wr(a,s),ne.resolve()}removeMatchingKeys(t,a,s){this._i.zr(a,s);const o=this.persistence.referenceDelegate,c=[];return o&&a.forEach((h=>{c.push(o.markPotentiallyOrphaned(t,h))})),ne.waitFor(c)}removeMatchingKeysForTargetId(t,a){return this._i.jr(a),ne.resolve()}getMatchingKeysForTargetId(t,a){const s=this._i.Hr(a);return ne.resolve(s)}containsKey(t,a){return ne.resolve(this._i.containsKey(a))}}class I_{constructor(t,a){this.ui={},this.overlays={},this.ci=new ju(0),this.li=!1,this.li=!0,this.hi=new AS,this.referenceDelegate=t(this),this.Pi=new MS(this),this.indexManager=new mS,this.remoteDocumentCache=(function(o){return new NS(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new hS(a),this.Ii=new SS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let a=this.overlays[t.toKey()];return a||(a=new wS,this.overlays[t.toKey()]=a),a}getMutationQueue(t,a){let s=this.ui[t.toKey()];return s||(s=new CS(a,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,a,s){ve("MemoryPersistence","Starting transaction:",t);const o=new IS(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(t,a){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,a))))}}class IS extends s2{constructor(t){super(),this.currentSequenceNumber=t}}class am{constructor(t){this.persistence=t,this.Ri=new nm,this.Vi=null}static mi(t){return new am(t)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(t,a,s){return this.Ri.addReference(s,a),this.fi.delete(s.toString()),ne.resolve()}removeReference(t,a,s){return this.Ri.removeReference(s,a),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(t,a){return this.fi.add(a.toString()),ne.resolve()}removeTarget(t,a){this.Ri.jr(a.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,a.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,a)))}Ei(){this.Vi=new Set}di(t){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=we.fromPath(s);return this.gi(t,o).next((c=>{c||a.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,a.apply(t))))}updateLimboDocument(t,a){return this.gi(t,a).next((s=>{s?this.fi.delete(a.toString()):this.fi.add(a.toString())}))}Ti(t){return 0}gi(t,a){return ne.or([()=>ne.resolve(this.Ri.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(t,a),()=>this.persistence.Ai(t,a)])}}class Mu{constructor(t,a){this.persistence=t,this.pi=new Ps((s=>o2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=bS(this,a)}static mi(t,a){return new Mu(t,a)}Ei(){}di(t){return ne.resolve()}forEachTarget(t,a){return this.persistence.getTargetCache().forEachTarget(t,a)}gr(t){const a=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>a.next((o=>s+o))))}wr(t){let a=0;return this.pr(t,(s=>{a++})).next((()=>a))}pr(t,a){return ne.forEach(this.pi,((s,o)=>this.br(t,s,o).next((c=>c?ne.resolve():a(o)))))}removeTargets(t,a,s){return this.persistence.getTargetCache().removeTargets(t,a,s)}removeOrphanedDocuments(t,a){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,a).next((m=>{m||(s++,c.removeEntry(h,Ie.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,a){return this.pi.set(a,t.currentSequenceNumber),ne.resolve()}removeTarget(t,a){const s=a.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),ne.resolve()}removeReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,a){return this.pi.set(a,t.currentSequenceNumber),ne.resolve()}Ti(t){let a=t.key.toString().length;return t.isFoundDocument()&&(a+=cu(t.data.value)),a}br(t,a,s){return ne.or([()=>this.persistence.Ai(t,a),()=>this.persistence.getTargetCache().containsKey(t,a),()=>{const o=this.pi.get(a);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class im{constructor(t,a,s,o){this.targetId=t,this.fromCache=a,this.Es=s,this.ds=o}static As(t,a){let s=Fe(),o=Fe();for(const c of a.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new im(t,a.fromCache,s,o)}}class DS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class OS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return TE()?8:r2(xE())>0?6:4})()}initialize(t,a){this.ps=t,this.indexManager=a,this.Rs=!0}getDocumentsMatchingQuery(t,a,s,o){const c={result:null};return this.ys(t,a).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(t,a,o,s).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new DS;return this.Ss(t,a,h).next((m=>{if(c.result=m,this.Vs)return this.bs(t,a,h,m.size)}))})).next((()=>c.result))}bs(t,a,s,o){return s.documentReadCount<this.fs?(Or()<=Ke.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Vr(a),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Or()<=Ke.DEBUG&&ve("QueryEngine","Query:",Vr(a),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Or()<=Ke.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Vr(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Va(a))):ne.resolve())}ys(t,a){if(Ly(a))return ne.resolve(null);let s=Va(a);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(a.limit!==null&&o===1&&(a=Au(a,null,"F"),s=Va(a)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const h=Fe(...c);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,s).next((v=>{const b=this.Ds(a,m);return this.Cs(a,b,h,v.readTime)?this.ys(t,Au(a,null,"F")):this.vs(t,b,a,v)}))))})))))}ws(t,a,s,o){return Ly(a)||o.isEqual(Ie.min())?ne.resolve(null):this.ps.getDocuments(t,s).next((c=>{const h=this.Ds(a,c);return this.Cs(a,h,s,o)?ne.resolve(null):(Or()<=Ke.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vr(a)),this.vs(t,h,a,t2(o,go)).next((m=>m)))}))}Ds(t,a){let s=new Ht(o_(t));return a.forEach(((o,c)=>{Uu(t,c)&&(s=s.add(c))})),s}Cs(t,a,s,o){if(t.limit===null)return!1;if(s.size!==a.size)return!0;const c=t.limitType==="F"?a.last():a.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(t,a,s){return Or()<=Ke.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Vr(a)),this.ps.getDocumentsMatchingQuery(t,a,$i.min(),s)}vs(t,a,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((c=>(a.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const sm="LocalStore",VS=3e8;class jS{constructor(t,a,s,o){this.persistence=t,this.Fs=a,this.serializer=o,this.Ms=new xt(He),this.xs=new Ps((c=>$d(c)),Zd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(a=>t.collect(a,this.Ms)))}}function kS(r,t,a,s){return new jS(r,t,a,s)}async function D_(r,t){const a=De(r);return await a.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return a.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,a.Bs(t),a.mutationQueue.getAllMutationBatches(s)))).next((c=>{const h=[],m=[];let v=Fe();for(const b of o){h.push(b.batchId);for(const x of b.mutations)v=v.add(x.key)}for(const b of c){m.push(b.batchId);for(const x of b.mutations)v=v.add(x.key)}return a.localDocuments.getDocuments(s,v).next((b=>({Ls:b,removedBatchIds:h,addedBatchIds:m})))}))}))}function LS(r,t){const a=De(r);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),c=a.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,v,b,x){const E=b.batch,A=E.keys();let L=ne.resolve();return A.forEach((j=>{L=L.next((()=>x.getEntry(v,j))).next((F=>{const U=b.docVersions.get(j);st(U!==null,48541),F.version.compareTo(U)<0&&(E.applyToRemoteDocument(F,b),F.isValidDocument()&&(F.setReadTime(b.commitVersion),x.addEntry(F)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(v,E)))})(a,s,t,c).next((()=>c.apply(s))).next((()=>a.mutationQueue.performConsistencyCheck(s))).next((()=>a.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let v=Fe();for(let b=0;b<m.mutationResults.length;++b)m.mutationResults[b].transformResults.length>0&&(v=v.add(m.batch.mutations[b].key));return v})(t)))).next((()=>a.localDocuments.getDocuments(s,o)))}))}function O_(r){const t=De(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(a=>t.Pi.getLastRemoteSnapshotVersion(a)))}function BS(r,t){const a=De(r),s=t.snapshotVersion;let o=a.Ms;return a.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=a.Ns.newChangeBuffer({trackRemovals:!0});o=a.Ms;const m=[];t.targetChanges.forEach(((x,E)=>{const A=o.get(E);if(!A)return;m.push(a.Pi.removeMatchingKeys(c,x.removedDocuments,E).next((()=>a.Pi.addMatchingKeys(c,x.addedDocuments,E))));let L=A.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(E)!==null?L=L.withResumeToken(rn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):x.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(x.resumeToken,s)),o=o.insert(E,L),(function(F,U,V){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=VS?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(A,L,x)&&m.push(a.Pi.updateTargetData(c,L))}));let v=oi(),b=Fe();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&m.push(a.persistence.referenceDelegate.updateLimboDocument(c,x))})),m.push(US(c,h,t.documentUpdates).next((x=>{v=x.ks,b=x.qs}))),!s.isEqual(Ie.min())){const x=a.Pi.getLastRemoteSnapshotVersion(c).next((E=>a.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(x)}return ne.waitFor(m).next((()=>h.apply(c))).next((()=>a.localDocuments.getLocalViewOfDocuments(c,v,b))).next((()=>v))})).then((c=>(a.Ms=o,c)))}function US(r,t,a){let s=Fe(),o=Fe();return a.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let h=oi();return a.forEach(((m,v)=>{const b=c.get(m);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Ie.min())?(t.removeEntry(m,v.readTime),h=h.insert(m,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(v),h=h.insert(m,v)):ve(sm,"Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",v.version)})),{ks:h,qs:o}}))}function zS(r,t){const a=De(r);return a.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Xd),a.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function PS(r,t){const a=De(r);return a.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return a.Pi.getTargetData(s,t).next((c=>c?(o=c,ne.resolve(o)):a.Pi.allocateTargetId(s).next((h=>(o=new Hi(t,h,"TargetPurposeListen",s.currentSequenceNumber),a.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=a.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(a.Ms=a.Ms.insert(s.targetId,s),a.xs.set(t,s.targetId)),s}))}async function Od(r,t,a){const s=De(r),o=s.Ms.get(t),c=a?"readwrite":"readwrite-primary";try{a||await s.persistence.runTransaction("Release target",c,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Jr(h))throw h;ve(sm,`Failed to update sequence numbers for target ${t}: ${h}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function $y(r,t,a){const s=De(r);let o=Ie.min(),c=Fe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(v,b,x){const E=De(v),A=E.xs.get(x);return A!==void 0?ne.resolve(E.Ms.get(A)):E.Pi.getTargetData(b,x)})(s,h,Va(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((v=>{c=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,t,a?o:Ie.min(),a?c:Fe()))).next((m=>(GS(s,C2(t),m),{documents:m,Qs:c})))))}function GS(r,t,a){let s=r.Os.get(t)||Ie.min();a.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Zy{constructor(){this.activeTargetIds=O2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qS{constructor(){this.Mo=new Zy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,a,s){}addLocalQueryTarget(t,a=!0){return a&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,a,s){this.xo[t]=a}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Zy,Promise.resolve()}handleUserChange(t,a,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class HS{Oo(t){}shutdown(){}}const Jy="ConnectivityMonitor";class Wy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Jy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ve(Jy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let su=null;function Vd(){return su===null?su=(function(){return 268435456+Math.round(2147483648*Math.random())})():su++,"0x"+su.toString(16)}const ld="RestConnection",FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const a=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=a+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Tu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,a,s,o,c){const h=Vd(),m=this.zo(t,a.toUriEncodedString());ve(ld,`Sending RPC '${t}' ${h}:`,m,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,c);const{host:b}=new URL(m),x=qd(b);return this.Jo(t,m,v,s,x).then((E=>(ve(ld,`Received RPC '${t}' ${h}: `,E),E)),(E=>{throw qr(ld,`RPC '${t}' ${h} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(t,a,s,o,c,h){return this.Go(t,a,s,o,c)}jo(t,a,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$r})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach(((o,c)=>t[c]=o)),s&&s.headers.forEach(((o,c)=>t[c]=o))}zo(t,a){const s=FS[t];return`${this.Uo}/v1/${a}:${s}`}terminate(){}}class XS{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const ln="WebChannelConnection";class YS extends QS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,a,s,o,c){const h=Vd();return new Promise(((m,v)=>{const b=new Vv;b.setWithCredentials(!0),b.listenOnce(jv.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case ou.NO_ERROR:const E=b.getResponseJson();ve(ln,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(E)),m(E);break;case ou.TIMEOUT:ve(ln,`RPC '${t}' ${h} timed out`),v(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ou.HTTP_ERROR:const A=b.getStatus();if(ve(ln,`RPC '${t}' ${h} failed with status:`,A,"response text:",b.getResponseText()),A>0){let L=b.getResponseJson();Array.isArray(L)&&(L=L[0]);const j=L?.error;if(j&&j.status&&j.message){const F=(function(V){const W=V.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN})(j.status);v(new pe(F,j.message))}else v(new pe(te.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:t,streamId:h,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{ve(ln,`RPC '${t}' ${h} completed.`)}}));const x=JSON.stringify(o);ve(ln,`RPC '${t}' ${h} sending request:`,o),b.send(a,"POST",x,s,15)}))}T_(t,a,s){const o=Vd(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=Bv(),m=Lv(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,a,s),v.encodeInitMessageHeaders=!0;const x=c.join("");ve(ln,`Creating RPC '${t}' stream ${o}: ${x}`,v);const E=h.createWebChannel(x,v);this.I_(E);let A=!1,L=!1;const j=new XS({Yo:U=>{L?ve(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,U):(A||(ve(ln,`Opening RPC '${t}' stream ${o} transport.`),E.open(),A=!0),ve(ln,`RPC '${t}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),F=(U,V,W)=>{U.listen(V,($=>{try{W($)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return F(E,no.EventType.OPEN,(()=>{L||(ve(ln,`RPC '${t}' stream ${o} transport opened.`),j.o_())})),F(E,no.EventType.CLOSE,(()=>{L||(L=!0,ve(ln,`RPC '${t}' stream ${o} transport closed`),j.a_(),this.E_(E))})),F(E,no.EventType.ERROR,(U=>{L||(L=!0,qr(ln,`RPC '${t}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),j.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),F(E,no.EventType.MESSAGE,(U=>{if(!L){const V=U.data[0];st(!!V,16349);const W=V,$=W?.error||W[0]?.error;if($){ve(ln,`RPC '${t}' stream ${o} received error:`,$);const ie=$.status;let ce=(function(S){const C=zt[S];if(C!==void 0)return b_(C)})(ie),re=$.message;ce===void 0&&(ce=te.INTERNAL,re="Unknown error status: "+ie+" with message "+$.message),L=!0,j.a_(new pe(ce,re)),E.close()}else ve(ln,`RPC '${t}' stream ${o} received:`,V),j.u_(V)}})),F(m,kv.STAT_EVENT,(U=>{U.stat===Ed.PROXY?ve(ln,`RPC '${t}' stream ${o} detected buffering proxy`):U.stat===Ed.NOPROXY&&ve(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((a=>a===t))}}function od(){return typeof document<"u"?document:null}function qu(r){return new J2(r,!0)}class V_{constructor(t,a,s=1e3,o=1.5,c=6e4){this.Mi=t,this.timerId=a,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const a=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,a-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${a} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ev="PersistentStream";class j_{constructor(t,a,s,o,c,h,m,v){this.Mi=t,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V_(t,a)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,a){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():a&&a.code===te.RESOURCE_EXHAUSTED?(li(a.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):a&&a.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(a)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),a=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===a&&this.G_(s,o)}),(s=>{t((()=>{const o=new pe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,a){const s=this.W_(this.D_);this.stream=this.j_(t,a),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ve(ev,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return a=>{this.Mi.enqueueAndForget((()=>this.D_===t?a():(ve(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KS extends j_{constructor(t,a,s,o,c,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,s,o,h),this.serializer=c}j_(t,a){return this.connection.T_("Listen",t,a)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const a=tS(this.serializer,t),s=(function(c){if(!("targetChange"in c))return Ie.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?ja(h.readTime):Ie.min()})(t);return this.listener.H_(a,s)}Y_(t){const a={};a.database=Dd(this.serializer),a.addTarget=(function(c,h){let m;const v=h.target;if(m=Cd(v)?{documents:iS(c,v)}:{query:sS(c,v).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=T_(c,h.resumeToken);const b=Rd(c,h.expectedCount);b!==null&&(m.expectedCount=b)}else if(h.snapshotVersion.compareTo(Ie.min())>0){m.readTime=Ru(c,h.snapshotVersion.toTimestamp());const b=Rd(c,h.expectedCount);b!==null&&(m.expectedCount=b)}return m})(this.serializer,t);const s=lS(this.serializer,t);s&&(a.labels=s),this.q_(a)}Z_(t){const a={};a.database=Dd(this.serializer),a.removeTarget=t,this.q_(a)}}class $S extends j_{constructor(t,a,s,o,c,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,s,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,a){return this.connection.T_("Write",t,a)}J_(t){return st(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,st(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){st(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const a=aS(t.writeResults,t.commitTime),s=ja(t.commitTime);return this.listener.na(s,a)}ra(){const t={};t.database=Dd(this.serializer),this.q_(t)}ea(t){const a={streamToken:this.lastStreamToken,writes:t.map((s=>nS(this.serializer,s)))};this.q_(a)}}class ZS{}class JS extends ZS{constructor(t,a,s,o){super(),this.authCredentials=t,this.appCheckCredentials=a,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,a,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(t,Md(a,s),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(te.UNKNOWN,c.toString())}))}Ho(t,a,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Md(a,s),o,h,m,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(te.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WS{constructor(t,a){this.asyncQueue=t,this.onlineStateHandler=a,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const a=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(a),this.aa=!1):ve("OnlineStateTracker",a)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Us="RemoteStore";class ew{constructor(t,a,s,o,c){this.localStore=t,this.datastore=a,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{qs(this)&&(ve(Us,"Restarting streams for network reachability change."),await(async function(v){const b=De(v);b.Ea.add(4),await Ao(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Hu(b)})(this))}))})),this.Ra=new WS(s,o)}}async function Hu(r){if(qs(r))for(const t of r.da)await t(!0)}async function Ao(r){for(const t of r.da)await t(!1)}function k_(r,t){const a=De(r);a.Ia.has(t.targetId)||(a.Ia.set(t.targetId,t),cm(a)?om(a):el(a).O_()&&lm(a,t))}function rm(r,t){const a=De(r),s=el(a);a.Ia.delete(t),s.O_()&&L_(a,t),a.Ia.size===0&&(s.O_()?s.L_():qs(a)&&a.Ra.set("Unknown"))}function lm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ie.min())>0){const a=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(a)}el(r).Y_(t)}function L_(r,t){r.Va.Ue(t),el(r).Z_(t)}function om(r){r.Va=new Y2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),el(r).start(),r.Ra.ua()}function cm(r){return qs(r)&&!el(r).x_()&&r.Ia.size>0}function qs(r){return De(r).Ea.size===0}function B_(r){r.Va=void 0}async function tw(r){r.Ra.set("Online")}async function nw(r){r.Ia.forEach(((t,a)=>{lm(r,t)}))}async function aw(r,t){B_(r),cm(r)?(r.Ra.ha(t),om(r)):r.Ra.set("Unknown")}async function iw(r,t,a){if(r.Ra.set("Online"),t instanceof E_&&t.state===2&&t.cause)try{await(async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){ve(Us,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Iu(r,s)}else if(t instanceof hu?r.Va.Ze(t):t instanceof x_?r.Va.st(t):r.Va.tt(t),!a.isEqual(Ie.min()))try{const s=await O_(r.localStore);a.compareTo(s)>=0&&await(function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const x=c.Ia.get(b);x&&c.Ia.set(b,x.withResumeToken(v.resumeToken,h))}})),m.targetMismatches.forEach(((v,b)=>{const x=c.Ia.get(v);if(!x)return;c.Ia.set(v,x.withResumeToken(rn.EMPTY_BYTE_STRING,x.snapshotVersion)),L_(c,v);const E=new Hi(x.target,v,b,x.sequenceNumber);lm(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(r,a)}catch(s){ve(Us,"Failed to raise snapshot:",s),await Iu(r,s)}}async function Iu(r,t,a){if(!Jr(t))throw t;r.Ea.add(1),await Ao(r),r.Ra.set("Offline"),a||(a=()=>O_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve(Us,"Retrying IndexedDB access"),await a(),r.Ea.delete(1),await Hu(r)}))}function U_(r,t){return t().catch((a=>Iu(r,a,t)))}async function Fu(r){const t=De(r),a=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xd;for(;sw(t);)try{const o=await zS(t.localStore,s);if(o===null){t.Ta.length===0&&a.L_();break}s=o.batchId,rw(t,o)}catch(o){await Iu(t,o)}z_(t)&&P_(t)}function sw(r){return qs(r)&&r.Ta.length<10}function rw(r,t){r.Ta.push(t);const a=es(r);a.O_()&&a.X_&&a.ea(t.mutations)}function z_(r){return qs(r)&&!es(r).x_()&&r.Ta.length>0}function P_(r){es(r).start()}async function lw(r){es(r).ra()}async function ow(r){const t=es(r);for(const a of r.Ta)t.ea(a.mutations)}async function cw(r,t,a){const s=r.Ta.shift(),o=Wd.from(s,t,a);await U_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Fu(r)}async function uw(r,t){t&&es(r).X_&&await(async function(s,o){if((function(h){return F2(h)&&h!==te.ABORTED})(o.code)){const c=s.Ta.shift();es(s).B_(),await U_(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Fu(s)}})(r,t),z_(r)&&P_(r)}async function tv(r,t){const a=De(r);a.asyncQueue.verifyOperationInProgress(),ve(Us,"RemoteStore received new credentials");const s=qs(a);a.Ea.add(3),await Ao(a),s&&a.Ra.set("Unknown"),await a.remoteSyncer.handleCredentialChange(t),a.Ea.delete(3),await Hu(a)}async function fw(r,t){const a=De(r);t?(a.Ea.delete(2),await Hu(a)):t||(a.Ea.add(2),await Ao(a),a.Ra.set("Unknown"))}function el(r){return r.ma||(r.ma=(function(a,s,o){const c=De(a);return c.sa(),new KS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:tw.bind(null,r),t_:nw.bind(null,r),r_:aw.bind(null,r),H_:iw.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),cm(r)?om(r):r.Ra.set("Unknown")):(await r.ma.stop(),B_(r))}))),r.ma}function es(r){return r.fa||(r.fa=(function(a,s,o){const c=De(a);return c.sa(),new $S(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:lw.bind(null,r),r_:uw.bind(null,r),ta:ow.bind(null,r),na:cw.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Fu(r)):(await r.fa.stop(),r.Ta.length>0&&(ve(Us,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class um{constructor(t,a,s,o,c){this.asyncQueue=t,this.timerId=a,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,a,s,o,c){const h=Date.now()+s,m=new um(t,a,h,o,c);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fm(r,t){if(li("AsyncQueue",`${t}: ${r}`),Jr(r))return new pe(te.UNAVAILABLE,`${t}: ${r}`);throw r}class Ur{static emptySet(t){return new Ur(t.comparator)}constructor(t){this.comparator=t?(a,s)=>t(a,s)||we.comparator(a.key,s.key):(a,s)=>we.comparator(a.key,s.key),this.keyedMap=ao(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const a=this.keyedMap.get(t);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((a,s)=>(t(a),!1)))}add(t){const a=this.delete(t.key);return a.copy(a.keyedMap.insert(t.key,t),a.sortedSet.insert(t,null))}delete(t){const a=this.get(t);return a?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(a)):this}isEqual(t){if(!(t instanceof Ur)||this.size!==t.size)return!1;const a=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((a=>{t.push(a.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,a){const s=new Ur;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=a,s}}class nv{constructor(){this.ga=new xt(we.comparator)}track(t){const a=t.doc.key,s=this.ga.get(a);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(a,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(a,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(a,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(a):t.type===1&&s.type===2?this.ga=this.ga.insert(a,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):Me(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(a,t)}ya(){const t=[];return this.ga.inorderTraversal(((a,s)=>{t.push(s)})),t}}class Yr{constructor(t,a,s,o,c,h,m,v,b){this.query=t,this.docs=a,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(t,a,s,o,c){const h=[];return a.forEach((m=>{h.push({type:0,doc:m})})),new Yr(t,a,Ur.emptySet(a),h,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const a=this.docChanges,s=t.docChanges;if(a.length!==s.length)return!1;for(let o=0;o<a.length;o++)if(a[o].type!==s[o].type||!a[o].doc.isEqual(s[o].doc))return!1;return!0}}class hw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class dw{constructor(){this.queries=av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(a,s){const o=De(a),c=o.queries;o.queries=av(),c.forEach(((h,m)=>{for(const v of m.Sa)v.onError(s)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function av(){return new Ps((r=>l_(r)),Bu)}async function mw(r,t){const a=De(r);let s=3;const o=t.query;let c=a.queries.get(o);c?!c.ba()&&t.Da()&&(s=2):(c=new hw,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await a.onListen(o,!0);break;case 1:c.wa=await a.onListen(o,!1);break;case 2:await a.onFirstRemoteStoreListen(o)}}catch(h){const m=fm(h,`Initialization of query '${Vr(t.query)}' failed`);return void t.onError(m)}a.queries.set(o,c),c.Sa.push(t),t.va(a.onlineState),c.wa&&t.Fa(c.wa)&&hm(a)}async function pw(r,t){const a=De(r),s=t.query;let o=3;const c=a.queries.get(s);if(c){const h=c.Sa.indexOf(t);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=t.Da()?0:1:!c.ba()&&t.Da()&&(o=2))}switch(o){case 0:return a.queries.delete(s),a.onUnlisten(s,!0);case 1:return a.queries.delete(s),a.onUnlisten(s,!1);case 2:return a.onLastRemoteStoreUnlisten(s);default:return}}function gw(r,t){const a=De(r);let s=!1;for(const o of t){const c=o.query,h=a.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&hm(a)}function yw(r,t,a){const s=De(r),o=s.queries.get(t);if(o)for(const c of o.Sa)c.onError(a);s.queries.delete(t)}function hm(r){r.Ca.forEach((t=>{t.next()}))}var jd,iv;(iv=jd||(jd={})).Ma="default",iv.Cache="cache";class vw{constructor(t,a,s){this.query=t,this.xa=a,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Yr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let a=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),a=!0):this.La(t,this.onlineState)&&(this.ka(t),a=!0),this.Na=t,a}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let a=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),a=!0),a}La(t,a){if(!t.fromCache||!this.Da())return!0;const s=a!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||a==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const a=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}ka(t){t=Yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==jd.Cache}}class G_{constructor(t){this.key=t}}class q_{constructor(t){this.key=t}}class _w{constructor(t,a){this.query=t,this.Ya=a,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=o_(t),this.tu=new Ur(this.eu)}get nu(){return this.Ya}ru(t,a){const s=a?a.iu:new nv,o=a?a.tu:this.tu;let c=a?a.mutatedKeys:this.mutatedKeys,h=o,m=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((x,E)=>{const A=o.get(x),L=Uu(this.query,E)?E:null,j=!!A&&this.mutatedKeys.has(A.key),F=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let U=!1;A&&L?A.data.isEqual(L.data)?j!==F&&(s.track({type:3,doc:L}),U=!0):this.su(A,L)||(s.track({type:2,doc:L}),U=!0,(v&&this.eu(L,v)>0||b&&this.eu(L,b)<0)&&(m=!0)):!A&&L?(s.track({type:0,doc:L}),U=!0):A&&!L&&(s.track({type:1,doc:A}),U=!0,(v||b)&&(m=!0)),U&&(L?(h=h.add(L),c=F?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:h,iu:s,Cs:m,mutatedKeys:c}}su(t,a){return t.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(t,a,s,o){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((x,E)=>(function(L,j){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:U})}};return F(L)-F(j)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(s),o=o??!1;const m=a&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,b=v!==this.Za;return this.Za=v,h.length!==0||b?{snapshot:new Yr(this.query,t.tu,c,h,t.mutatedKeys,v===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((a=>this.Ya=this.Ya.add(a))),t.modifiedDocuments.forEach((a=>{})),t.removedDocuments.forEach((a=>this.Ya=this.Ya.delete(a))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const a=[];return t.forEach((s=>{this.Xa.has(s)||a.push(new q_(s))})),this.Xa.forEach((s=>{t.has(s)||a.push(new G_(s))})),a}cu(t){this.Ya=t.Qs,this.Xa=Fe();const a=this.ru(t.documents);return this.applyChanges(a,!0)}lu(){return Yr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dm="SyncEngine";class bw{constructor(t,a,s){this.query=t,this.targetId=a,this.view=s}}class xw{constructor(t){this.key=t,this.hu=!1}}class Ew{constructor(t,a,s,o,c,h){this.localStore=t,this.remoteStore=a,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ps((m=>l_(m)),Bu),this.Iu=new Map,this.Eu=new Set,this.du=new xt(we.comparator),this.Au=new Map,this.Ru=new nm,this.Vu={},this.mu=new Map,this.fu=Xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Tw(r,t,a=!0){const s=K_(r);let o;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await H_(s,t,a,!0),o}async function Sw(r,t){const a=K_(r);await H_(a,t,!0,!1)}async function H_(r,t,a,s){const o=await PS(r.localStore,Va(t)),c=o.targetId,h=r.sharedClientState.addLocalQueryTarget(c,a);let m;return s&&(m=await ww(r,t,c,h==="current",o.resumeToken)),r.isPrimaryClient&&a&&k_(r.remoteStore,o),m}async function ww(r,t,a,s,o){r.pu=(E,A,L)=>(async function(F,U,V,W){let $=U.view.ru(V);$.Cs&&($=await $y(F.localStore,U.query,!1).then((({documents:M})=>U.view.ru(M,$))));const ie=W&&W.targetChanges.get(U.targetId),ce=W&&W.targetMismatches.get(U.targetId)!=null,re=U.view.applyChanges($,F.isPrimaryClient,ie,ce);return rv(F,U.targetId,re.au),re.snapshot})(r,E,A,L);const c=await $y(r.localStore,t,!0),h=new _w(t,c.Qs),m=h.ru(c.documents),v=wo.createSynthesizedTargetChangeForCurrentChange(a,s&&r.onlineState!=="Offline",o),b=h.applyChanges(m,r.isPrimaryClient,v);rv(r,a,b.au);const x=new bw(t,a,h);return r.Tu.set(t,x),r.Iu.has(a)?r.Iu.get(a).push(t):r.Iu.set(a,[t]),b.snapshot}async function Aw(r,t,a){const s=De(r),o=s.Tu.get(t),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((h=>!Bu(h,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Od(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),a&&rm(s.remoteStore,o.targetId),kd(s,o.targetId)})).catch(Zr)):(kd(s,o.targetId),await Od(s.localStore,o.targetId,!0))}async function Cw(r,t){const a=De(r),s=a.Tu.get(t),o=a.Iu.get(s.targetId);a.isPrimaryClient&&o.length===1&&(a.sharedClientState.removeLocalQueryTarget(s.targetId),rm(a.remoteStore,s.targetId))}async function Nw(r,t,a){const s=jw(r);try{const o=await(function(h,m){const v=De(h),b=dt.now(),x=m.reduce(((L,j)=>L.add(j.key)),Fe());let E,A;return v.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let j=oi(),F=Fe();return v.Ns.getEntries(L,x).next((U=>{j=U,j.forEach(((V,W)=>{W.isValidDocument()||(F=F.add(V))}))})).next((()=>v.localDocuments.getOverlayedDocuments(L,j))).next((U=>{E=U;const V=[];for(const W of m){const $=z2(W,E.get(W.key).overlayedDocument);$!=null&&V.push(new Gs(W.key,$,Jv($.value.mapValue),si.exists(!0)))}return v.mutationQueue.addMutationBatch(L,b,V,m)})).next((U=>{A=U;const V=U.applyToLocalDocumentSet(E,F);return v.documentOverlayCache.saveOverlays(L,U.batchId,V)}))})).then((()=>({batchId:A.batchId,changes:u_(E)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,v){let b=h.Vu[h.currentUser.toKey()];b||(b=new xt(He)),b=b.insert(m,v),h.Vu[h.currentUser.toKey()]=b})(s,o.batchId,a),await Co(s,o.changes),await Fu(s.remoteStore)}catch(o){const c=fm(o,"Failed to persist write");a.reject(c)}}async function F_(r,t){const a=De(r);try{const s=await BS(a.localStore,t);t.targetChanges.forEach(((o,c)=>{const h=a.Au.get(c);h&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?st(h.hu,14607):o.removedDocuments.size>0&&(st(h.hu,42227),h.hu=!1))})),await Co(a,s,t)}catch(s){await Zr(s)}}function sv(r,t,a){const s=De(r);if(s.isPrimaryClient&&a===0||!s.isPrimaryClient&&a===1){const o=[];s.Tu.forEach(((c,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const v=De(h);v.onlineState=m;let b=!1;v.queries.forEach(((x,E)=>{for(const A of E.Sa)A.va(m)&&(b=!0)})),b&&hm(v)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Rw(r,t,a){const s=De(r);s.sharedClientState.updateQueryState(t,"rejected",a);const o=s.Au.get(t),c=o&&o.key;if(c){let h=new xt(we.comparator);h=h.insert(c,cn.newNoDocument(c,Ie.min()));const m=Fe().add(c),v=new Gu(Ie.min(),new Map,new xt(He),h,m);await F_(s,v),s.du=s.du.remove(c),s.Au.delete(t),mm(s)}else await Od(s.localStore,t,!1).then((()=>kd(s,t,a))).catch(Zr)}async function Mw(r,t){const a=De(r),s=t.batch.batchId;try{const o=await LS(a.localStore,t);X_(a,s,null),Q_(a,s),a.sharedClientState.updateMutationState(s,"acknowledged"),await Co(a,o)}catch(o){await Zr(o)}}async function Iw(r,t,a){const s=De(r);try{const o=await(function(h,m){const v=De(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let x;return v.mutationQueue.lookupMutationBatch(b,m).next((E=>(st(E!==null,37113),x=E.keys(),v.mutationQueue.removeMutationBatch(b,E)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,x,m))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,x))).next((()=>v.localDocuments.getDocuments(b,x)))}))})(s.localStore,t);X_(s,t,a),Q_(s,t),s.sharedClientState.updateMutationState(t,"rejected",a),await Co(s,o)}catch(o){await Zr(o)}}function Q_(r,t){(r.mu.get(t)||[]).forEach((a=>{a.resolve()})),r.mu.delete(t)}function X_(r,t,a){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(t);c&&(a?c.reject(a):c.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function kd(r,t,a=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),a&&r.Pu.yu(s,a);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||Y_(r,s)}))}function Y_(r,t){r.Eu.delete(t.path.canonicalString());const a=r.du.get(t);a!==null&&(rm(r.remoteStore,a),r.du=r.du.remove(t),r.Au.delete(a),mm(r))}function rv(r,t,a){for(const s of a)s instanceof G_?(r.Ru.addReference(s.key,t),Dw(r,s)):s instanceof q_?(ve(dm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||Y_(r,s.key)):Me(19791,{wu:s})}function Dw(r,t){const a=t.key,s=a.path.canonicalString();r.du.get(a)||r.Eu.has(s)||(ve(dm,"New document in limbo: "+a),r.Eu.add(s),mm(r))}function mm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const a=new we(pt.fromString(t)),s=r.fu.next();r.Au.set(s,new xw(a)),r.du=r.du.insert(a,s),k_(r.remoteStore,new Hi(Va(s_(a.path)),s,"TargetPurposeLimboResolution",ju.ce))}}async function Co(r,t,a){const s=De(r),o=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,v)=>{h.push(s.pu(v,t,a).then((b=>{if((b||a)&&s.isPrimaryClient){const x=b?!b.fromCache:a?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(b){o.push(b);const x=im.As(v.targetId,b);c.push(x)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(v,b){const x=De(v);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ne.forEach(b,(A=>ne.forEach(A.Es,(L=>x.persistence.referenceDelegate.addReference(E,A.targetId,L))).next((()=>ne.forEach(A.ds,(L=>x.persistence.referenceDelegate.removeReference(E,A.targetId,L)))))))))}catch(E){if(!Jr(E))throw E;ve(sm,"Failed to update sequence numbers: "+E)}for(const E of b){const A=E.targetId;if(!E.fromCache){const L=x.Ms.get(A),j=L.snapshotVersion,F=L.withLastLimboFreeSnapshotVersion(j);x.Ms=x.Ms.insert(A,F)}}})(s.localStore,c))}async function Ow(r,t){const a=De(r);if(!a.currentUser.isEqual(t)){ve(dm,"User change. New user:",t.toKey());const s=await D_(a.localStore,t);a.currentUser=t,(function(c,h){c.mu.forEach((m=>{m.forEach((v=>{v.reject(new pe(te.CANCELLED,h))}))})),c.mu.clear()})(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Co(a,s.Ls)}}function Vw(r,t){const a=De(r),s=a.Au.get(t);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const c=a.Iu.get(t);if(!c)return o;for(const h of c){const m=a.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function K_(r){const t=De(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=F_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rw.bind(null,t),t.Pu.H_=gw.bind(null,t.eventManager),t.Pu.yu=yw.bind(null,t.eventManager),t}function jw(r){const t=De(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Iw.bind(null,t),t}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,a){return null}Mu(t,a){return null}vu(t){return kS(this.persistence,new OS,t.initialUser,this.serializer)}Cu(t){return new I_(am.mi,this.serializer)}Du(t){return new qS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class kw extends Du{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,a){st(this.persistence.referenceDelegate instanceof Mu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new vS(s,t.asyncQueue,a)}Cu(t){const a=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new I_((s=>Mu.mi(s,a)),this.serializer)}}class Ld{async initialize(t,a){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ow.bind(null,this.syncEngine),await fw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dw})()}createDatastore(t){const a=qu(t.databaseInfo.databaseId),s=(function(c){return new YS(c)})(t.databaseInfo);return(function(c,h,m,v){return new JS(c,h,m,v)})(t.authCredentials,t.appCheckCredentials,s,a)}createRemoteStore(t){return(function(s,o,c,h,m){return new ew(s,o,c,h,m)})(this.localStore,this.datastore,t.asyncQueue,(a=>sv(this.syncEngine,a,0)),(function(){return Wy.v()?new Wy:new HS})())}createSyncEngine(t,a){return(function(o,c,h,m,v,b,x){const E=new Ew(o,c,h,m,v,b);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,a)}async terminate(){await(async function(a){const s=De(a);ve(Us,"RemoteStore shutting down."),s.Ea.add(5),await Ao(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ld.provider={build:()=>new Ld};class Lw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):li("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,a){setTimeout((()=>{this.muted||t(a)}),0)}}const ts="FirestoreClient";class Bw{constructor(t,a,s,o,c){this.authCredentials=t,this.appCheckCredentials=a,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async h=>{ve(ts,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ve(ts,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(a){const s=fm(a,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function cd(r,t){r.asyncQueue.verifyOperationInProgress(),ve(ts,"Initializing OfflineComponentProvider");const a=r.configuration;await t.initialize(a);let s=a.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await D_(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function lv(r,t){r.asyncQueue.verifyOperationInProgress();const a=await Uw(r);ve(ts,"Initializing OnlineComponentProvider"),await t.initialize(a,r.configuration),r.setCredentialChangeListener((s=>tv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>tv(t.remoteStore,o))),r._onlineComponents=t}async function Uw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ts,"Using user provided OfflineComponentProvider");try{await cd(r,r._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(a))throw a;qr("Error using user provided cache. Falling back to memory cache: "+a),await cd(r,new Du)}}else ve(ts,"Using default OfflineComponentProvider"),await cd(r,new kw(void 0));return r._offlineComponents}async function $_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ts,"Using user provided OnlineComponentProvider"),await lv(r,r._uninitializedComponentsProvider._online)):(ve(ts,"Using default OnlineComponentProvider"),await lv(r,new Ld))),r._onlineComponents}function zw(r){return $_(r).then((t=>t.syncEngine))}async function Pw(r){const t=await $_(r),a=t.eventManager;return a.onListen=Tw.bind(null,t.syncEngine),a.onUnlisten=Aw.bind(null,t.syncEngine),a.onFirstRemoteStoreListen=Sw.bind(null,t.syncEngine),a.onLastRemoteStoreUnlisten=Cw.bind(null,t.syncEngine),a}function Gw(r,t,a={}){const s=new Yi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,v,b){const x=new Lw({next:A=>{x.Nu(),h.enqueueAndForget((()=>pw(c,E))),A.fromCache&&v.source==="server"?b.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(A)},error:A=>b.reject(A)}),E=new vw(m,x,{includeMetadataChanges:!0,qa:!0});return mw(c,E)})(await Pw(r),r.asyncQueue,t,a,s))),s.promise}function Z_(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const ov=new Map;const J_="firestore.googleapis.com",cv=!0;class uv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J_,this.ssl=cv}else this.host=t.host,this.ssl=t.ssl??cv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=M_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gS)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}WT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z_(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qu{constructor(t,a,s,o){this._authCredentials=t,this._appCheckCredentials=a,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new qT;switch(s.type){case"firstParty":return new XT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(a){const s=ov.get(a);s&&(ve("ComponentProvider","Removing Datastore"),ov.delete(a),s.terminate())})(this),Promise.resolve()}}function qw(r,t,a,s={}){r=xu(r,Qu);const o=qd(t),c=r._getSettings(),h={...c,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${a}`;o&&(gE(`https://${m}`),bE("Firestore",!0)),c.host!==J_&&c.host!==m&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:m,ssl:o,emulatorOptions:s};if(!vu(v,h)&&(r._setSettings(v),s.mockUserToken)){let b,x;if(typeof s.mockUserToken=="string")b=s.mockUserToken,x=on.MOCK_USER;else{b=yE(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(E)}r._authCredentials=new HT(new zv(b,x))}}class ns{constructor(t,a,s){this.converter=a,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ns(this.firestore,t,this._query)}}class Kt{constructor(t,a,s){this.converter=a,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kt(this.firestore,t,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,a,s){if(To(a,Kt._jsonSchema))return new Kt(t,s||null,new we(pt.fromString(a.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Gt("string",Kt._jsonSchemaVersion),referencePath:Gt("string")};class Ki extends ns{constructor(t,a,s){super(t,a,s_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new we(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function Xu(r,t,...a){if(r=Gr(r),Pv("collection","path",t),r instanceof Qu){const s=pt.fromString(t,...a);return Ty(s),new Ki(r,null,s)}{if(!(r instanceof Kt||r instanceof Ki))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return Ty(s),new Ki(r.firestore,null,s)}}function Hw(r,t,...a){if(r=Gr(r),arguments.length===1&&(t=Qd.newId()),Pv("doc","path",t),r instanceof Qu){const s=pt.fromString(t,...a);return Ey(s),new Kt(r,null,new we(s))}{if(!(r instanceof Kt||r instanceof Ki))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return Ey(s),new Kt(r.firestore,r instanceof Ki?r.converter:null,new we(s))}}const fv="AsyncQueue";class hv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V_(this,"async_queue_retry"),this._c=()=>{const s=od();s&&ve(fv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const a=od();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const a=od();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const a=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(a.resolve,a.reject),a.promise))).then((()=>a.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Jr(t))throw t;ve(fv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const a=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",dv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=a,a}enqueueAfterDelay(t,a,s){this.uc(),this.oc.indexOf(t)>-1&&(a=0);const o=um.createAndSchedule(this,t,a,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const a of this.tc)if(a.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((a,s)=>a.targetTimeMs-s.targetTimeMs));for(const a of this.tc)if(a.skipDelay(),t!=="all"&&a.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const a=this.tc.indexOf(t);this.tc.splice(a,1)}}function dv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class pm extends Qu{constructor(t,a,s,o){super(t,a,s,o),this.type="firestore",this._queue=new hv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hv(t),this._firestoreClient=void 0,await t}}}function Fw(r,t){const a=typeof r=="object"?r:MT(),s=typeof r=="string"?r:Tu,o=wT(a,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=mE("firestore");c&&qw(o,...c)}return o}function W_(r){if(r._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Qw(r),r._firestoreClient}function Qw(r){const t=r._freezeSettings(),a=(function(o,c,h,m){return new f2(o,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Z_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new Bw(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Xn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xn(rn.fromBase64String(t))}catch(a){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(t){return new Xn(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(To(t,Xn._jsonSchema))return Xn.fromBase64String(t.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Gt("string",Xn._jsonSchemaVersion),bytes:Gt("string")};class gm{constructor(...t){for(let a=0;a<t.length;++a)if(t[a].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class eb{constructor(t){this._methodName=t}}class ka{constructor(t,a){if(!isFinite(t)||t<-90||t>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(a)||a<-180||a>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=t,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return He(this._lat,t._lat)||He(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ka._jsonSchemaVersion}}static fromJSON(t){if(To(t,ka._jsonSchema))return new ka(t.latitude,t.longitude)}}ka._jsonSchemaVersion="firestore/geoPoint/1.0",ka._jsonSchema={type:Gt("string",ka._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};class La{constructor(t){this._values=(t||[]).map((a=>a))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(To(t,La._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((a=>typeof a=="number")))return new La(t.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:Gt("string",La._jsonSchemaVersion),vectorValues:Gt("object")};const Xw=/^__.*__$/;class Yw{constructor(t,a,s){this.data=t,this.fieldMask=a,this.fieldTransforms=s}toMutation(t,a){return this.fieldMask!==null?new Gs(t,this.data,this.fieldMask,a,this.fieldTransforms):new So(t,this.data,a,this.fieldTransforms)}}function tb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:r})}}class ym{constructor(t,a,s,o,c,h){this.settings=t,this.databaseId=a,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ym({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.gc(t),s}yc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ou(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((a=>t.isPrefixOf(a)))!==void 0||this.fieldTransforms.find((a=>t.isPrefixOf(a.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(tb(this.Ac)&&Xw.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Kw{constructor(t,a,s){this.databaseId=t,this.ignoreUndefinedProperties=a,this.serializer=s||qu(t)}Cc(t,a,s,o=!1){return new ym({Ac:t,methodName:a,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nb(r){const t=r._freezeSettings(),a=qu(r._databaseId);return new Kw(r._databaseId,!!t.ignoreUndefinedProperties,a)}function $w(r,t,a,s,o,c={}){const h=r.Cc(c.merge||c.mergeFields?2:0,t,a,o);sb("Data must be an object, but it was:",h,s);const m=ab(s,h);let v,b;if(c.merge)v=new ra(h.fieldMask),b=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const E of c.mergeFields){const A=Jw(t,E,a);if(!h.contains(A))throw new pe(te.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);eA(x,A)||x.push(A)}v=new ra(x),b=h.fieldTransforms.filter((E=>v.covers(E.field)))}else v=null,b=h.fieldTransforms;return new Yw(new Qn(m),v,b)}function Zw(r,t,a,s=!1){return vm(a,r.Cc(s?4:3,t))}function vm(r,t){if(ib(r=Gr(r)))return sb("Unsupported field value:",t,r),ab(r,t);if(r instanceof eb)return(function(s,o){if(!tb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let h=0;for(const m of s){let v=vm(m,o.wc(h));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),h++}return{arrayValue:{values:c}}})(r,t)}return(function(s,o){if((s=Gr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return V2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=dt.fromDate(s);return{timestampValue:Ru(o.serializer,c)}}if(s instanceof dt){const c=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ru(o.serializer,c)}}if(s instanceof ka)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xn)return{bytesValue:T_(o.serializer,s._byteString)};if(s instanceof Kt){const c=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof La)return(function(h,m){return{mapValue:{fields:{[$v]:{stringValue:Zv},[Su]:{arrayValue:{values:h.toArray().map((b=>{if(typeof b!="number")throw m.Sc("VectorValues must only contain numeric values.");return Jd(m.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vu(s)}`)})(r,t)}function ab(r,t){const a={};return Hv(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zs(r,((s,o)=>{const c=vm(o,t.mc(s));c!=null&&(a[s]=c)})),{mapValue:{fields:a}}}function ib(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof ka||r instanceof Xn||r instanceof Kt||r instanceof eb||r instanceof La)}function sb(r,t,a){if(!ib(a)||!Gv(a)){const s=Vu(a);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Jw(r,t,a){if((t=Gr(t))instanceof gm)return t._internalPath;if(typeof t=="string")return rb(r,t);throw Ou("Field path arguments must be of type string or ",r,!1,void 0,a)}const Ww=new RegExp("[~\\*/\\[\\]]");function rb(r,t,a){if(t.search(Ww)>=0)throw Ou(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,a);try{return new gm(...t.split("."))._internalPath}catch{throw Ou(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,a)}}function Ou(r,t,a,s,o){const c=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;a&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(c||h)&&(v+=" (found",c&&(v+=` in field ${s}`),h&&(v+=` in document ${o}`),v+=")"),new pe(te.INVALID_ARGUMENT,m+r+v)}function eA(r,t){return r.some((a=>a.isEqual(t)))}class lb{constructor(t,a,s,o,c){this._firestore=t,this._userDataWriter=a,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new tA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const a=this._document.data.field(Yu("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a)}}}class tA extends lb{data(){return super.data()}}function Yu(r,t){return typeof t=="string"?rb(r,t):t instanceof gm?t._internalPath:t._delegate._internalPath}function nA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _m{}class bm extends _m{}function fo(r,t,...a){let s=[];t instanceof _m&&s.push(t),s=s.concat(a),(function(c){const h=c.filter((v=>v instanceof xm)).length,m=c.filter((v=>v instanceof Ku)).length;if(h>1||h>0&&m>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Ku extends bm{constructor(t,a,s){super(),this._field=t,this._op=a,this._value=s,this.type="where"}static _create(t,a,s){return new Ku(t,a,s)}_apply(t){const a=this._parse(t);return ob(t._query,a),new ns(t.firestore,t.converter,Nd(t._query,a))}_parse(t){const a=nb(t.firestore);return(function(c,h,m,v,b,x,E){let A;if(b.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){pv(E,x);const j=[];for(const F of E)j.push(mv(v,c,F));A={arrayValue:{values:j}}}else A=mv(v,c,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||pv(E,x),A=Zw(m,h,E,x==="in"||x==="not-in");return Pt.create(b,x,A)})(t._query,"where",a,t.firestore._databaseId,this._field,this._op,this._value)}}function ii(r,t,a){const s=t,o=Yu("where",r);return Ku._create(o,s,a)}class xm extends _m{constructor(t,a){super(),this.type=t,this._queryConstraints=a}static _create(t,a){return new xm(t,a)}_parse(t){const a=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return a.length===1?a[0]:la.create(a,this._getOperator())}_apply(t){const a=this._parse(t);return a.getFilters().length===0?t:((function(o,c){let h=o;const m=c.getFlattenedFilters();for(const v of m)ob(h,v),h=Nd(h,v)})(t._query,a),new ns(t.firestore,t.converter,Nd(t._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Em extends bm{constructor(t,a){super(),this._field=t,this._direction=a,this.type="orderBy"}static _create(t,a){return new Em(t,a)}_apply(t){const a=(function(o,c,h){if(o.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bo(c,h)})(t._query,this._field,this._direction);return new ns(t.firestore,t.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Wr(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,a))}}function Lr(r,t="asc"){const a=t,s=Yu("orderBy",r);return Em._create(s,a)}class Tm extends bm{constructor(t,a,s){super(),this.type=t,this._limit=a,this._limitType=s}static _create(t,a,s){return new Tm(t,a,s)}_apply(t){return new ns(t.firestore,t.converter,Au(t._query,this._limit,this._limitType))}}function du(r){return e2("limit",r),Tm._create("limit",r,"F")}function mv(r,t,a){if(typeof(a=Gr(a))=="string"){if(a==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r_(t)&&a.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const s=t.path.child(pt.fromString(a));if(!we.isDocumentKey(s))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Iy(r,new we(s))}if(a instanceof Kt)return Iy(r,a._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vu(a)}.`)}function pv(r,t){if(!Array.isArray(r)||r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ob(r,t){const a=(function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(a!==null)throw a===t.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${a.toString()}' filters.`)}class aA{convertValue(t,a="none"){switch(Wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,a);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,a);case 11:return this.convertObject(t.mapValue,a);case 10:return this.convertVectorValue(t.mapValue);default:throw Me(62114,{value:t})}}convertObject(t,a){return this.convertObjectMap(t.fields,a)}convertObjectMap(t,a="none"){const s={};return zs(t,((o,c)=>{s[o]=this.convertValue(c,a)})),s}convertVectorValue(t){const a=t.fields?.[Su].arrayValue?.values?.map((s=>Rt(s.doubleValue)));return new La(a)}convertGeoPoint(t){return new ka(Rt(t.latitude),Rt(t.longitude))}convertArray(t,a){return(t.values||[]).map((s=>this.convertValue(s,a)))}convertServerTimestamp(t,a){switch(a){case"previous":const s=Lu(t);return s==null?null:this.convertValue(s,a);case"estimate":return this.convertTimestamp(yo(t));default:return null}}convertTimestamp(t){const a=Zi(t);return new dt(a.seconds,a.nanos)}convertDocumentKey(t,a){const s=pt.fromString(t);st(R_(s),9688,{name:t});const o=new vo(s.get(1),s.get(3)),c=new we(s.popFirst(5));return o.isEqual(a)||li(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),c}}function iA(r,t,a){let s;return s=r?r.toFirestore(t):t,s}class ru{constructor(t,a){this.hasPendingWrites=t,this.fromCache=a}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zr extends lb{constructor(t,a,s,o,c,h){super(t,a,s,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const a=new mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,a={}){if(this._document){const s=this._document.data.field(Yu("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,a.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,a={};return a.type=zr._jsonSchemaVersion,a.bundle="",a.bundleSource="DocumentSnapshot",a.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?a:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),a.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),a)}}zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",zr._jsonSchema={type:Gt("string",zr._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class mu extends zr{data(t={}){return super.data(t)}}class Pr{constructor(t,a,s,o){this._firestore=t,this._userDataWriter=a,this._snapshot=o,this.metadata=new ru(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((a=>t.push(a))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,a){this._snapshot.docs.forEach((s=>{t.call(a,new mu(this._firestore,this._userDataWriter,s.key,s,new ru(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const a=!!t.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const v=new mu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ru(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const v=new mu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ru(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,x=-1;return m.type!==0&&(b=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),x=h.indexOf(m.doc.key)),{type:sA(m.type),doc:v,oldIndex:b,newIndex:x}}))}})(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const a=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(a.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function sA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:r})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:Gt("string",Pr._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class rA extends aA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xn(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,a)}}function Sm(r){r=xu(r,ns);const t=xu(r.firestore,pm),a=W_(t),s=new rA(t);return nA(r._query),Gw(a,r._query).then((o=>new Pr(t,s,r,o)))}function lA(r,t){const a=xu(r.firestore,pm),s=Hw(r),o=iA(r.converter,t);return oA(a,[$w(nb(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,si.exists(!1))]).then((()=>s))}function oA(r,t){return(function(s,o){const c=new Yi;return s.asyncQueue.enqueueAndForget((async()=>Nw(await zw(s),o,c))),c.promise})(W_(r),t)}(function(t,a=!0){(function(o){$r=o})(RT),bu(new mo("firestore",((s,{instanceIdentifier:o,options:c})=>{const h=s.getProvider("app").getImmediate(),m=new pm(new FT(s.getProvider("auth-internal")),new YT(h,s.getProvider("app-check-internal")),(function(b,x){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(b.options.projectId,x)})(h,o),h);return c={useFetchStreams:a,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Br(vy,_y,t),Br(vy,_y,"esm2020")})();const cA={apiKey:"AIzaSyBKsN2qQ7oc3l5MrNXpWtHnxLlMqM3PFSA",authDomain:"gugudan-e4c77.firebaseapp.com",projectId:"gugudan-e4c77",storageBucket:"gugudan-e4c77.firebasestorage.app",messagingSenderId:"798815663534",appId:"1:798815663534:web:9e4aacdbd8acfc36c6fc67"},uA=Mv(cA),$u=Fw(uA);function cb(){let r=localStorage.getItem("chromafall_player_id");return r||(r="player_"+Math.random().toString(36).substring(2,15)+Date.now().toString(36),localStorage.setItem("chromafall_player_id",r)),r}function ub(){return localStorage.getItem("chromafall_player_name")||"Player"}function fb(r){localStorage.setItem("chromafall_player_name",r)}async function fA(r){try{return(await lA(Xu($u,"rankings"),{...r,createdAt:dt.now()})).id}catch(t){return console.error("  :",t),null}}async function hA(r="all",t="classic",a=100){try{let s;const o=Xu($u,"rankings");if(r==="daily"){const m=new Date;m.setHours(0,0,0,0),s=fo(o,ii("gameMode","==",t),ii("createdAt",">=",dt.fromDate(m)),Lr("createdAt","desc"),Lr("score","desc"),du(a))}else if(r==="weekly"){const m=new Date;m.setDate(m.getDate()-7),m.setHours(0,0,0,0),s=fo(o,ii("gameMode","==",t),ii("createdAt",">=",dt.fromDate(m)),Lr("createdAt","desc"),Lr("score","desc"),du(a))}else s=fo(o,ii("gameMode","==",t),Lr("score","desc"),du(a));const c=await Sm(s),h=[];return c.forEach(m=>{h.push({id:m.id,...m.data()})}),(r==="daily"||r==="weekly")&&h.sort((m,v)=>v.score-m.score),h}catch(s){return console.error("  :",s),[]}}async function dA(r,t="classic"){try{const a=Xu($u,"rankings"),s=fo(a,ii("playerId","==",r),ii("gameMode","==",t),Lr("score","desc"),du(1)),o=await Sm(s);if(o.empty)return null;const c=o.docs[0];return{id:c.id,...c.data()}}catch(a){return console.error("    :",a),null}}async function mA(r,t="classic"){try{const a=await dA(r,t);if(!a)return-1;const s=Xu($u,"rankings"),o=fo(s,ii("gameMode","==",t),ii("score",">",a.score));return(await Sm(o)).size+1}catch(a){return console.error("   :",a),-1}}function pA({onRestart:r,onMainMenu:t,onContinue:a}){const{score:s,level:o,maxCombo:c,chainCount:h,gameTime:m,continues:v,statistics:b,gameMode:x}=Ye(),{currency:E,addPersonalBest:A}=Yn(),{playSound:L}=oa(),[j,F]=se.useState(!1),[U,V]=se.useState(!1),[W,$]=se.useState(ub()),[ie,ce]=se.useState(W==="Player"),[re,M]=se.useState(W),S=s>b.highScore-s,C=v<3,N=X=>{const oe=Math.floor(X/60),xe=X%60;return`${oe} ${xe}`},D=X=>X.toLocaleString(),B=async()=>{if(!(j||U||s===0)){re.trim()&&re!==W&&(fb(re.trim()),$(re.trim())),V(!0);try{await fA({playerId:cb(),playerName:re.trim()||W,score:s,level:o,maxCombo:c,maxChain:h,gameMode:x,playTime:m})&&(F(!0),L("rewardGet"))}catch(X){console.error("  :",X)}finally{V(!1),ce(!1)}}};se.useEffect(()=>{L("gameOver"),S&&s>0&&setTimeout(()=>{L("highScore"),Pd({particleCount:100,spread:70,origin:{y:.6}})},500),A("classic",s),s>0&&W!=="Player"&&B()},[]);const R=()=>s>=1e6?{grade:"S+",color:"text-purple-400"}:s>=5e5?{grade:"S",color:"text-yellow-400"}:s>=2e5?{grade:"A",color:"text-green-400"}:s>=1e5?{grade:"B",color:"text-blue-400"}:s>=5e4?{grade:"C",color:"text-gray-300"}:{grade:"D",color:"text-gray-500"},{grade:Ue,color:We}=R();return g.jsx(le.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(le.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,y:50},animate:{scale:1,y:0},transition:{delay:.2,type:"spring"},children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"GAME OVER"}),S&&s>0&&g.jsx(le.p,{className:"text-yellow-400 font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:"NEW HIGH SCORE!"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-gray-400 text-sm",children:"SCORE"}),g.jsx(le.p,{className:"text-4xl font-bold text-white",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:D(s)})]}),g.jsx(le.div,{className:`text-6xl font-bold ${We}`,initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.4,type:"spring"},children:Ue})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"LEVEL"}),g.jsx("p",{className:"text-xl font-bold text-game-accent",children:o})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX COMBO"}),g.jsxs("p",{className:"text-xl font-bold text-orange-400",children:["x",c]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX CHAIN"}),g.jsxs("p",{className:"text-xl font-bold text-purple-400",children:[h,""]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"TIME"}),g.jsx("p",{className:"text-xl font-bold text-gray-300",children:N(m)})]})]}),g.jsxs("div",{className:"space-y-3",children:[C&&a&&g.jsxs(le.button,{className:`w-full py-4 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white flex items-center justify-center gap-2\r
                         hover:from-green-400 hover:to-green-500 transition-all`,whileTap:{scale:.98},onClick:a,children:[g.jsx("span",{children:""}),g.jsx("span",{children:"  "}),g.jsxs("span",{className:"text-sm opacity-70",children:["(",3-v," )"]})]}),g.jsx(le.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:r,children:" "}),g.jsx(le.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:" "}),g.jsxs(le.button,{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white flex items-center justify-center gap-2\r
                       hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:()=>{L("rewardGet")},children:[g.jsx("span",{children:""}),g.jsx("span",{children:"   2"})]})]}),s>0&&!j&&g.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl border border-purple-500/30",children:[g.jsx("p",{className:"text-center text-sm text-gray-300 mb-2",children:" "}),ie?g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:re,onChange:X=>M(X.target.value),placeholder:" ",maxLength:12,className:"flex-1 bg-black/50 border border-purple-500 rounded-lg px-3 py-2 text-white text-sm",autoFocus:!0,onKeyDown:X=>X.key==="Enter"&&B()}),g.jsx("button",{onClick:B,disabled:U||!re.trim(),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:U?"...":""})]}):g.jsx("button",{onClick:B,disabled:U,className:"w-full py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:U?" ...":`${W} `})]}),j&&g.jsx("div",{className:"mt-4 p-3 bg-green-900/30 rounded-xl border border-green-500/30 text-center",children:g.jsx("span",{className:"text-green-400 font-bold",children:" !"})}),g.jsx("div",{className:"mt-4 text-center",children:g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>{const X=`ChromaFall ${D(s)} !  ${o},  ${c} !`;navigator.share?navigator.share({title:"ChromaFall",text:X}):(navigator.clipboard.writeText(X),alert("  !"))},children:"  "})})]})})}const gA=[{icon:"",name:"",desc:"   3x3    ",color:"from-red-500 to-orange-500"},{icon:"",name:"",desc:"       ",color:"from-yellow-400 to-yellow-600"},{icon:"",name:"",desc:"     +    ",color:"from-green-400 to-green-600"},{icon:"",name:"",desc:"2   ( )",color:"from-cyan-300 to-blue-500"},{icon:"",name:"",desc:" !      ",color:"from-gray-400 to-gray-600"},{icon:"",name:"",desc:"      ",color:"from-purple-400 to-pink-500"},{icon:"",name:"",desc:"      ",color:"from-pink-400 to-rose-500"},{icon:"2",name:"",desc:"   2 ",color:"from-amber-400 to-orange-500"},{icon:"",name:"",desc:"    ",color:"from-red-400 via-yellow-400 to-blue-400"}],yA=[{key:" ",desc:"  "},{key:"",desc:"  ( )"},{key:"Space",desc:"  (  + )"},{key:"Z / ",desc:"  ()"},{key:"P / ESC",desc:""}],vA=[" 4      ()","       "," (Space)     ","       ","    3!"];function _A({onClose:r}){const[t,a]=se.useState("blocks");return g.jsx(le.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(le.div,{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:s=>s.stopPropagation(),children:[g.jsxs("div",{className:"bg-gradient-to-r from-game-accent to-purple-600 p-4 flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),g.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30",children:""})]}),g.jsx("div",{className:"flex border-b border-gray-700",children:[{id:"blocks",label:" "},{id:"controls",label:""},{id:"tips",label:""}].map(s=>g.jsx("button",{onClick:()=>a(s.id),className:`flex-1 py-3 text-sm font-bold transition-colors ${t===s.id?"text-game-accent border-b-2 border-game-accent bg-game-accent/10":"text-gray-400 hover:text-white"}`,children:s.label},s.id))}),g.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:g.jsxs(un,{mode:"wait",children:[t==="blocks"&&g.jsx(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:gA.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center text-2xl`,children:s.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-white",children:s.name}),g.jsx("p",{className:"text-xs text-gray-400",children:s.desc})]})]},o))},"blocks"),t==="controls"&&g.jsxs(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[g.jsx("p",{className:"text-gray-400 text-sm mb-4",children:" &  "}),yA.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-4 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:"w-20 text-center",children:g.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded text-white font-mono text-sm",children:s.key})}),g.jsx("p",{className:"text-white flex-1",children:s.desc})]},o)),g.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:g.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",g.jsx("strong",{children:":"}),"      "]})})]},"controls"),t==="tips"&&g.jsxs(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[vA.map((s,o)=>g.jsx("div",{className:"bg-black/30 rounded-lg p-4 text-white",children:s},o)),g.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg border border-orange-500/30",children:[g.jsx("h4",{className:"font-bold text-orange-400 mb-2",children:"  "}),g.jsxs("p",{className:"text-sm text-gray-300",children:["     !     ",g.jsx("strong",{className:"text-orange-400",children:"3"})," !"]})]})]},"tips")]})})]})})}function bA({onResume:r,onRestart:t,onSettings:a,onMainMenu:s}){const{score:o,level:c,gameTime:h}=Ye(),{playSound:m}=oa(),[v,b]=se.useState(!1),x=A=>{m("buttonClick"),A()},E=A=>{const L=Math.floor(A/60),j=A%60;return`${L}:${j.toString().padStart(2,"0")}`};return g.jsxs(le.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsxs(le.div,{className:"bg-game-panel rounded-2xl p-6 max-w-xs w-full mx-4",initial:{scale:.8,y:-50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:20},children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:""}),g.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:o.toLocaleString()})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-game-accent font-bold",children:c})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:E(h)})]})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(le.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white text-lg hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(r),children:" "}),g.jsx(le.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(t),children:" "}),g.jsx(le.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(a),children:" "}),g.jsx(le.button,{className:`w-full py-3 bg-gradient-to-r from-purple-700 to-blue-700 rounded-xl font-bold text-white\r
                       hover:from-purple-600 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>{m("buttonClick"),b(!0)},children:" "}),g.jsx(le.button,{className:`w-full py-3 bg-red-900/50 rounded-xl font-bold text-red-300\r
                       hover:bg-red-800/50 transition-all`,whileTap:{scale:.98},onClick:()=>x(s),children:"  "})]})]}),g.jsx(un,{children:v&&g.jsx(_A,{onClose:()=>b(!1)})})]})}function gv({onClose:r}){const{settings:t,updateSettings:a}=Yn(),{playSound:s}=oa(),o=(h,m)=>{s("buttonClick"),a({[h]:m})},c=(h,m)=>{a({[h]:m})};return g.jsx(le.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(le.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4 max-h-[80vh] overflow-y-auto",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:h=>h.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors text-2xl",onClick:r,children:""})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.soundEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("soundEnabled",!t.soundEnabled),children:g.jsx(le.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.soundEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.soundEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.soundVolume,onChange:h=>c("soundVolume",parseFloat(h.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.soundVolume*100),"%"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.musicEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("musicEnabled",!t.musicEnabled),children:g.jsx(le.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.musicEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.musicEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.musicVolume,onChange:h=>c("musicVolume",parseFloat(h.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.musicVolume*100),"%"]})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.hapticEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("hapticEnabled",!t.hapticEnabled),children:g.jsx(le.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.hapticEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:"  "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.showGhostBlock?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("showGhostBlock",!t.showGhostBlock),children:g.jsx(le.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.showGhostBlock?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:" "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.colorBlindMode?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("colorBlindMode",!t.colorBlindMode),children:g.jsx(le.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.colorBlindMode?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:["swipe","buttons","both"].map(h=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.controlType===h?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({controlType:h})},children:[h==="swipe"&&"",h==="buttons"&&"",h==="both"&&" "]},h))})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:["auto","high","medium","low"].map(h=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.performanceMode===h?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({performanceMode:h})},children:[h==="auto"&&"",h==="high"&&"",h==="medium"&&"",h==="low"&&""]},h))})]}),g.jsx(le.button,{className:`w-full mt-6 py-3 bg-gray-700 rounded-xl font-bold text-white\r
                     hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:r,children:""})]})})}function xA({onNextLevel:r,onMainMenu:t}){const{score:a,puzzleLevel:s,movesRemaining:o,levelObjectives:c}=Ye(),h=o*100,m=a+h;return g.jsx(le.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(le.div,{className:"bg-gradient-to-b from-purple-900 to-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4 border-2 border-purple-500",initial:{scale:.5,y:50},animate:{scale:1,y:0},transition:{type:"spring",damping:15},children:[g.jsxs(le.div,{className:"text-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[g.jsx(le.div,{className:"text-6xl mb-2",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5,delay:.3},children:""}),g.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"PUZZLE CLEAR!"}),g.jsxs("p",{className:"text-purple-300 mt-1",children:["Level ",s," Complete"]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-4",children:[g.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:c.map((v,b)=>g.jsxs(le.div,{className:"flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+b*.1},children:[g.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:g.jsx("span",{className:"text-white text-xs",children:""})}),g.jsxs("span",{className:"text-gray-300 text-sm flex-1",children:[v.type==="score"&&` ${v.target.toLocaleString()}`,v.type==="clearBlocks"&&` ${v.target} `,v.type==="chains"&&`${v.target}`,v.type==="clearColor"&&`  ${v.target} `]}),g.jsxs("span",{className:"text-green-400 text-sm",children:[v.current,"/",v.target]})]},b))})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-gray-400 text-sm",children:""}),g.jsx("span",{className:"text-white font-mono",children:a.toLocaleString()})]}),o>0&&g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("span",{className:"text-gray-400 text-sm",children:["   (",o,")"]}),g.jsxs("span",{className:"text-yellow-400 font-mono",children:["+",h.toLocaleString()]})]}),g.jsx("div",{className:"border-t border-gray-700 pt-2 mt-2",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-purple-300 font-bold",children:" "}),g.jsx("span",{className:"text-2xl font-bold text-white font-mono",children:m.toLocaleString()})]})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs(le.button,{className:`w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl
                       font-bold text-white text-lg hover:from-purple-500 hover:to-pink-500 transition-all`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,children:[" Level ",s+1]}),g.jsx(le.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:"  "})]})]})})}function EA({onStartGame:r,onOpenShop:t,onOpenSettings:a,onOpenLeaderboard:s,onOpenBattlePass:o,onOpenDailyReward:c}){const{currency:h,playerName:m,playerLevel:v,streakInfo:b,checkDailyRewardAvailable:x}=Yn(),{playSound:E}=oa(),[A,L]=se.useState(!1),[j,F]=se.useState(!1);se.useEffect(()=>{F(x())},[x]);const U=V=>{E("buttonClick"),V()};return g.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col items-center justify-center text-white bg-[#050510]",children:[g.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-[#050510] to-[#050510]"}),[...Array(15)].map((V,W)=>g.jsx(le.div,{className:"absolute rounded-full blur-xl",style:{background:["#ff4757","#3742fa","#2ed573","#ffa502"][W%4],width:Math.random()*100+50,height:Math.random()*100+50,opacity:.1,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-100],x:[0,Math.random()*50-25],scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"easeInOut"}},W))]}),g.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>U(a),className:"w-10 h-10 rounded-full bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors",children:""}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-yellow-400 font-mono",children:h.coins.toLocaleString()})]}),g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-purple-400 font-mono",children:h.gems.toLocaleString()})]})]})]}),g.jsxs("div",{className:"z-10 w-full max-w-md px-6 flex flex-col items-center gap-8",children:[g.jsxs("div",{className:"text-center relative",children:[g.jsx(le.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},children:g.jsxs("h1",{className:"text-6xl md:text-7xl font-black italic tracking-tighter",style:{fontFamily:"var(--font-display)"},children:[g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300 neon-text",children:"CHROMA"}),g.jsx("br",{}),g.jsx("span",{className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]",children:"FALL"})]})}),g.jsx(le.p,{className:"text-gray-400 mt-2 tracking-widest text-sm uppercase",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Color Fusion Puzzle"})]}),g.jsxs(le.div,{className:"glass-panel w-full p-4 rounded-2xl flex items-center justify-between",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xl font-bold shadow-lg",children:m.charAt(0)}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-lg",children:m}),g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[g.jsxs("span",{className:"bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded",children:["Lv.",v]}),b.currentStreak>0&&g.jsxs("span",{className:"text-orange-400",children:[" ",b.currentStreak," "]})]})]})]}),j&&g.jsx("button",{onClick:()=>U(c),className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs font-bold px-3 py-1.5 rounded-full animate-bounce shadow-lg shadow-orange-500/30",children:"  "})]}),g.jsxs(le.div,{className:"w-full space-y-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[g.jsxs("button",{onClick:()=>U(()=>L(!0)),className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl font-bold text-xl text-white shadow-[0_0_20px_rgba(59,130,246,0.4)] hover:shadow-[0_0_30px_rgba(59,130,246,0.6)] hover:scale-[1.02] active:scale-[0.98] transition-all border border-white/10 group relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:animate-[shine_1s_infinite]"}),g.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[g.jsx("span",{className:"text-2xl",children:""})," GAME START"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsx(ud,{icon:"",label:"",onClick:()=>U(t),color:"bg-pink-600/20"}),g.jsx(ud,{icon:"",label:"",onClick:()=>U(s),color:"bg-yellow-600/20"}),g.jsx(ud,{icon:"",label:"",onClick:()=>U(o),color:"bg-green-600/20"})]})]})]}),g.jsx(un,{children:A&&g.jsx(le.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>L(!1),children:g.jsxs(le.div,{className:"w-full max-w-md bg-[#1a1a2e] border border-white/10 rounded-3xl overflow-hidden shadow-2xl",initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},onClick:V=>V.stopPropagation(),children:[g.jsxs("div",{className:"p-6 bg-gradient-to-b from-[#2a2a4e] to-[#1a1a2e]",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-6",style:{fontFamily:"var(--font-display)"},children:"SELECT MODE"}),g.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:Object.entries(bv).map(([V,W])=>g.jsxs("button",{onClick:()=>{U(()=>{L(!1),r(V)})},className:"w-full p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-left flex items-center gap-4 group",children:[g.jsx("span",{className:"text-3xl group-hover:scale-110 transition-transform",children:W.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:W.name}),W.hasTimeLimit&&g.jsx("span",{className:"text-xs text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:"TIME"})]}),g.jsx("p",{className:"text-sm text-gray-400",children:W.description})]}),g.jsx("span",{className:"text-gray-500 group-hover:text-white transition-colors",children:""})]},V))})]}),g.jsx("div",{className:"p-4 bg-[#151525]",children:g.jsx("button",{onClick:()=>L(!1),className:"w-full py-3 text-gray-400 font-bold hover:text-white transition-colors",children:""})})]})})})]})}function ud({icon:r,label:t,onClick:a,color:s}){return g.jsxs("button",{onClick:a,className:`flex flex-col items-center justify-center gap-2 py-4 rounded-xl border border-white/5 hover:border-white/20 transition-all active:scale-95 ${s} hover:brightness-125`,children:[g.jsx("span",{className:"text-2xl drop-shadow-md",children:r}),g.jsx("span",{className:"text-sm font-bold text-gray-200",children:t})]})}function TA({onClose:r}){const{claimDailyReward:t,dailyRewardDay:a,checkDailyRewardAvailable:s,streakInfo:o}=Yn(),{playSound:c}=oa(),[h,m]=se.useState(!1),[v,b]=se.useState(null),x=s(),E=()=>{if(!x||h)return;const A=t();A&&(c("rewardGet"),m(!0),b(A),Pd({particleCount:50,spread:60,origin:{y:.7}}))};return g.jsx(le.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(le.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:A=>A.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:" "}),g.jsx("div",{className:"text-center mb-6",children:g.jsxs("p",{className:"text-orange-400",children:[" ",o.currentStreak,"  "]})}),g.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:pd.map((A,L)=>{const j=L+1,F=j<(a||0)+1,U=j===(a||0)+1;return g.jsxs(le.div,{className:`relative p-2 rounded-lg text-center ${F?"bg-gray-700 opacity-50":U?"bg-gradient-to-b from-game-accent to-blue-600 ring-2 ring-yellow-400":"bg-gray-800"}`,animate:U&&x?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:1.5},children:[g.jsx("p",{className:"text-xs text-gray-400",children:"Day"}),g.jsx("p",{className:"text-lg font-bold text-white",children:j}),g.jsx("div",{className:"mt-1",children:A.reward.gems?g.jsxs("p",{className:"text-xs text-purple-400",children:["",A.reward.gems]}):g.jsxs("p",{className:"text-xs text-yellow-400",children:["",A.reward.coins]})}),F&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:""})})]},j)})}),h&&v?g.jsxs(le.div,{className:"text-center py-4",initial:{scale:0},animate:{scale:1},children:[g.jsx("p",{className:"text-xl font-bold text-green-400 mb-2",children:" !"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[v.coins&&g.jsxs("p",{className:"text-yellow-400",children:[" +",v.coins]}),v.gems&&g.jsxs("p",{className:"text-purple-400",children:[" +",v.gems]})]})]}):x?g.jsx(le.button,{className:`w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white text-lg hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:E,children:"  "}):g.jsxs("div",{className:"text-center py-4",children:[g.jsx("p",{className:"text-gray-400",children:"   "}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  !"})]}),g.jsx("button",{className:`w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                     hover:bg-gray-600 transition-all`,onClick:r,children:""})]})})}function SA({onClose:r}){const{currency:t,ownedSkins:a,ownedThemes:s,equippedSkinId:o,equippedThemeId:c,purchaseSkin:h,purchaseTheme:m,equipSkin:v,equipTheme:b}=Yn(),{playSound:x}=oa(),[E,A]=se.useState("skins"),L=V=>{h(V)&&x("purchaseSuccess")},j=V=>{m(V)&&x("purchaseSuccess")},F=V=>{x("buttonClick"),v(V)},U=V=>{x("buttonClick"),b(V)};return g.jsxs(le.div,{className:"fixed inset-0 bg-game-bg z-50 flex flex-col",initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"tween"},children:[g.jsxs("div",{className:"flex items-center justify-between p-4 bg-game-panel/80",children:[g.jsx("button",{className:"text-2xl text-gray-400 hover:text-white",onClick:r,children:""}),g.jsx("h1",{className:"text-xl font-bold text-white",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:t.coins.toLocaleString()})]}),g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-purple-400 font-bold text-sm",children:t.gems.toLocaleString()})]})]})]}),g.jsx("div",{className:"flex bg-game-panel/50",children:["skins","themes","gems"].map(V=>g.jsxs("button",{className:`flex-1 py-3 font-bold transition-colors ${E===V?"text-game-accent border-b-2 border-game-accent":"text-gray-400"}`,onClick:()=>{x("buttonClick"),A(V)},children:[V==="skins"&&" ",V==="themes"&&" ",V==="gems"&&" "]},V))}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g.jsxs(un,{mode:"wait",children:[E==="skins"&&g.jsx(le.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:md.map(V=>{const W=a.some(ce=>ce.id===V.id),$=o===V.id,ie=V.currency==="coins"?t.coins>=V.price:V.currency==="gems"?t.gems>=V.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 ${$?"ring-2 ring-game-accent":""}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("p",{className:"font-bold text-white",children:V.name}),g.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:Sx[V.rarity]},children:wx[V.rarity]})]}),g.jsx("div",{className:"bg-black/40 rounded-lg p-3 mb-3",children:g.jsx("div",{className:"flex gap-1.5 justify-center",children:(()=>{const ce=ho[V.id]||ho.classic;return ce.colors.slice(0,4).map((re,M)=>g.jsxs(le.div,{className:"relative overflow-hidden",style:{width:32,height:32,borderRadius:ce.borderRadius,background:ce.innerEffect==="glow"?`radial-gradient(circle at 30% 30%, ${re}dd, ${re}88 70%, ${re}44)`:ce.innerEffect==="glass"?`linear-gradient(145deg, ${re}ee, ${re}aa 50%, ${re}cc)`:ce.innerEffect==="gradient"?`linear-gradient(135deg, ${re}, ${re}88, ${re}cc)`:ce.innerEffect==="metallic"?`linear-gradient(145deg, ${re}ff, ${re}66 30%, ${re}cc 70%, ${re}ff)`:ce.innerEffect==="flat"?re:`linear-gradient(145deg, ${re}, ${re}dd)`,border:ce.borderWidth>0?`${ce.borderWidth}px ${ce.borderStyle} ${re}aa`:"none",boxShadow:ce.glowIntensity>0?`0 0 ${Math.round(ce.glowIntensity*15)}px ${re}, 0 0 ${Math.round(ce.glowIntensity*5)}px ${re}`:"0 2px 4px rgba(0,0,0,0.3)"},animate:ce.animation==="pulse"?{boxShadow:[`0 0 8px ${re}`,`0 0 20px ${re}`,`0 0 8px ${re}`]}:ce.animation==="fire"?{y:[0,-3,0,-1,0]}:ce.animation==="ice"?{opacity:[1,.7,1]}:ce.animation==="electric"?{x:[-2,2,-1,1,0]}:void 0,transition:ce.animation==="pulse"?{duration:1.2,repeat:1/0}:ce.animation==="fire"?{duration:.4,repeat:1/0}:ce.animation==="ice"?{duration:2.5,repeat:1/0}:ce.animation==="electric"?{duration:.15,repeat:1/0}:void 0,children:[(ce.innerEffect==="glossy"||ce.innerEffect==="glass")&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent rounded-inherit"}),ce.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30"}),ce.texture==="lines"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.2) 2px, rgba(255,255,255,0.2) 4px)"}}),ce.texture==="dots"&&g.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.5) 1px, transparent 1px)",backgroundSize:"6px 6px"}}),ce.texture==="cracks"&&g.jsx("div",{className:"absolute inset-0 opacity-25",style:{background:"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.3) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.2) 61%, transparent 62%)"}}),ce.texture==="circuit"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%)",backgroundSize:"8px 8px"}}),ce.animation==="shimmer"&&g.jsx(le.div,{className:"absolute inset-0",style:{background:"linear-gradient(110deg, transparent 25%, rgba(255,255,255,0.6) 50%, transparent 75%)"},animate:{x:["-150%","250%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:.5}})]},M))})()})}),g.jsxs("p",{className:"text-[10px] text-gray-400 mb-2 text-center",children:[V.id==="classic"&&"  ",V.id==="neon"&&"  + ",V.id==="candy"&&"  ",V.id==="pixel"&&"8  ",V.id==="galaxy"&&"  + ",V.id==="crystal"&&"  +  ",V.id==="holographic"&&" ",V.id==="animated_fire"&&"  ",V.id==="animated_ice"&&"  ",V.id==="animated_electric"&&"  "]}),W?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold ${$?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>F(V.id),disabled:$,children:$?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-1 ${ie||V.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>L(V.id),disabled:!ie&&V.currency!=="free",children:V.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[V.currency==="coins"?"":"",V.price," "]})})]},V.id)})},"skins"),E==="themes"&&g.jsx(le.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:gu.map(V=>{const W=s.some(ce=>ce.id===V.id),$=c===V.id,ie=V.currency==="coins"?t.coins>=V.price:V.currency==="gems"?t.gems>=V.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-3 ${$?"ring-2 ring-game-accent":""}`,children:[g.jsx("p",{className:"font-bold text-white mb-1 text-sm",children:V.name}),V.description&&g.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:V.description}),g.jsx("div",{className:"h-24 rounded-lg mb-2 p-2 overflow-hidden relative",style:{background:V.colors.backgroundGradient||V.colors.background,border:`1px solid ${V.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:g.jsxs("div",{className:"w-full h-full rounded relative",style:{backgroundColor:V.colors.panel,border:`1px solid ${V.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:[g.jsx("div",{className:"absolute top-2 left-2 w-12 h-1.5 rounded-full",style:{backgroundColor:V.colors.accent}}),g.jsxs("div",{className:"absolute top-5 left-2 flex flex-col gap-1",children:[g.jsx("div",{className:"w-8 h-1 rounded",style:{backgroundColor:V.colors.text||"#fff",opacity:.8}}),g.jsx("div",{className:"w-6 h-1 rounded",style:{backgroundColor:V.colors.textSecondary||"#888",opacity:.6}})]}),g.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-0.5",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#ff4757"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3742fa"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#2ed573"}})]}),g.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:V.colors.success||"#2ed573"}}),g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:V.colors.danger||"#ff4757"}})]})]})}),W?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm ${$?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>U(V.id),disabled:$,children:$?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm flex items-center justify-center gap-1 ${ie||V.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>j(V.id),disabled:!ie&&V.currency!=="free",children:V.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[V.currency==="coins"?"":"",V.price," "]})})]},V.id)})},"themes"),E==="gems"&&g.jsxs(le.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[Tx.map(V=>g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 flex items-center justify-between ${V.highlight?"ring-2 ring-yellow-400":""} ${V.bestValue?"ring-2 ring-purple-400":""}`,children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("p",{className:"font-bold text-white text-lg",children:[V.amount," "]}),V.bonusAmount>0&&g.jsxs("span",{className:"text-green-400 text-sm",children:["+",V.bonusAmount," "]})]}),g.jsx("p",{className:"text-sm text-gray-400",children:V.label})]})]}),g.jsxs("button",{className:`bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-xl\r
                               font-bold text-white hover:from-purple-400 hover:to-pink-400`,onClick:()=>{x("purchaseSuccess"),alert(`${V.amount+V.bonusAmount}   (   )`)},children:["$",V.price]})]},V.id)),g.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-white",children:" "}),g.jsx("p",{className:"text-sm text-green-200",children:"  50  "})]})]}),g.jsx("button",{className:`bg-white/20 px-6 py-3 rounded-xl font-bold text-white\r
                             hover:bg-white/30`,onClick:()=>{x("rewardGet"),alert("   50   ( SDK  )")},children:""})]})]},"gems")]})})]})}function wA({onClose:r}){const[t,a]=se.useState([]),[s,o]=se.useState(!0),[c,h]=se.useState("all"),[m,v]=se.useState("classic"),[b,x]=se.useState(-1),[E,A]=se.useState(ub()),[L,j]=se.useState(!1),[F,U]=se.useState(E),V=cb(),W=se.useCallback(async()=>{o(!0);try{const S=await hA(c,m,50);a(S);const C=await mA(V,m);x(C)}catch(S){console.error("  :",S)}finally{o(!1)}},[c,m,V]);se.useEffect(()=>{W()},[W]);const $=()=>{F.trim()&&(fb(F.trim()),A(F.trim())),j(!1)},ie=S=>S===1?"bg-gradient-to-r from-yellow-500 to-amber-600 text-black":S===2?"bg-gradient-to-r from-gray-300 to-gray-400 text-black":S===3?"bg-gradient-to-r from-orange-400 to-orange-600 text-black":"bg-white/10 text-white",ce=S=>S===1?"":S===2?"":S===3?"":S.toString(),re=S=>{const C=Math.floor(S/60),N=S%60;return`${C}:${N.toString().padStart(2,"0")}`},M=S=>{const C=S instanceof Date?S:S.toDate(),D=new Date().getTime()-C.getTime(),B=Math.floor(D/(1e3*60*60)),R=Math.floor(D/(1e3*60*60*24));return B<1?" ":B<24?`${B} `:R<7?`${R} `:C.toLocaleDateString("ko-KR")};return g.jsxs(le.div,{className:"fixed inset-0 bg-gradient-to-b from-[#0a0a20] via-[#1a1a40] to-[#0a0a20] z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"}),g.jsxs("div",{className:"relative h-full flex flex-col max-w-lg mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""}),g.jsx("h1",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500",children:"RANKING"}),g.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""})]}),g.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-2xl p-4 mb-4 border border-purple-500/30",children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-2xl",children:""}),g.jsxs("div",{children:[L?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:F,onChange:S=>U(S.target.value),maxLength:12,className:"bg-black/50 border border-purple-500 rounded px-2 py-1 text-white text-sm w-28",autoFocus:!0,onKeyDown:S=>S.key==="Enter"&&$()}),g.jsx("button",{onClick:$,className:"text-green-400 text-sm",children:""})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-white font-bold",children:E}),g.jsx("button",{onClick:()=>j(!0),className:"text-gray-400 text-xs hover:text-white",children:""})]}),g.jsx("div",{className:"text-gray-400 text-xs",children:b>0?` : ${b}`:" "})]})]})})}),g.jsx("div",{className:"flex gap-2 mb-3",children:g.jsx("div",{className:"flex bg-black/30 rounded-xl p-1 flex-1",children:["all","weekly","daily"].map(S=>g.jsx("button",{onClick:()=>h(S),className:`flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all ${c===S?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400"}`,children:S==="all"?"":S==="weekly"?"":""},S))})}),g.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:["classic","timeAttack","survival","puzzle"].map(S=>g.jsx("button",{onClick:()=>v(S),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all ${m===S?"bg-gradient-to-r from-orange-500 to-red-600 text-white":"bg-white/10 text-gray-400"}`,children:S==="classic"?"":S==="timeAttack"?"":S==="survival"?"":""},S))}),g.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-4",children:s?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-gray-400 text-sm",children:" ..."})]}):t.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("span",{className:"text-5xl",children:""}),g.jsx("span",{className:"text-gray-400 text-sm",children:"  "}),g.jsx("span",{className:"text-gray-500 text-xs",children:"  1 !"})]}):g.jsx(un,{children:t.map((S,C)=>{const N=C+1,D=S.playerId===V;return g.jsx(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:C*.03},className:`rounded-xl p-3 ${ie(N)} ${D?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-[#0a0a20]":""}`,children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-sm ${N<=3?"":"bg-black/20"}`,children:ce(N)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`font-bold truncate ${N<=3?"":"text-white"}`,children:S.playerName}),D&&g.jsx("span",{className:"text-[10px] bg-cyan-500 text-white px-1.5 py-0.5 rounded-full",children:"ME"})]}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-400"}`,children:["Lv.",S.level," | ",re(S.playTime)," |"," ",M(S.createdAt)]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:`font-black text-lg ${N<=3?"":"text-cyan-400"}`,children:S.score.toLocaleString()}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-500"}`,children:[S.maxCombo," ",S.maxChain,""]})]})]})},S.id||C)})})})]})]})}function AA({onClose:r}){const{wheelState:t,spinWheel:a,canSpinWheel:s,addCoins:o,addGems:c}=Yn(),{playSound:h}=oa(),[m,v]=se.useState(!1),[b,x]=se.useState(0),[E,A]=se.useState(null),L=se.useRef(null),j=s(),F=360/Os.length,U=V=>{if(m||V==="free"&&!j.free||V==="ad"&&!j.ad||V==="gem"&&!j.gem)return;v(!0),A(null),h("wheelSpin");const W=Math.random();let $=0,ie=Os[0];for(const C of Os)if($+=C.probability,W<=$){ie=C;break}const re=Os.findIndex(C=>C.id===ie.id)*F,M=5+Math.random()*3,S=b+M*360+(360-re);x(S),setTimeout(()=>{v(!1),A(ie.id);const C=ie.reward;C.coins&&o(C.coins),C.gems&&c(C.gems),ie.probability<.1?(h("jackpot"),Pd({particleCount:100,spread:70,origin:{y:.6}})):h("rewardGet"),a()},5e3)};return g.jsx(le.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(le.div,{className:"bg-game-panel rounded-2xl p-6 max-w-md w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:V=>V.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:" "}),g.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-6",children:[g.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-10",children:g.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-12 border-l-transparent border-r-transparent border-t-yellow-400"})}),g.jsx(le.div,{ref:L,className:"w-full h-full rounded-full overflow-hidden border-4 border-yellow-400",style:{background:`conic-gradient(${Os.map((V,W)=>`${V.color} ${W*F}deg ${(W+1)*F}deg`).join(", ")})`},animate:{rotate:b},transition:{duration:5,ease:[.25,.1,.25,1]},children:Os.map((V,W)=>{const $=W*F+F/2;return g.jsx("div",{className:"absolute text-xs font-bold text-white whitespace-nowrap",style:{top:"50%",left:"50%",transform:`rotate(${$}deg) translateY(-100px)`,transformOrigin:"center",textShadow:"1px 1px 2px black"},children:V.label},V.id)})}),g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-yellow-400 flex items-center justify-center text-2xl shadow-lg",children:""})]}),E&&!m&&g.jsx(le.div,{className:"text-center mb-4",initial:{scale:0},animate:{scale:1},children:g.jsxs("p",{className:"text-xl font-bold text-green-400",children:[Os.find(V=>V.id===E)?.label," !"]})}),g.jsxs("div",{className:"space-y-2",children:[j.free&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white hover:from-green-400 hover:to-green-500 disabled:opacity-50`,onClick:()=>U("free"),disabled:m,children:["   (",t.freeSpinsRemaining,")"]}),j.ad&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                         font-bold text-white hover:from-yellow-400 hover:to-orange-400 disabled:opacity-50`,onClick:()=>U("ad"),disabled:m,children:["    (",t.adSpinsRemaining,")"]}),j.gem&&g.jsx("button",{className:`w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl\r
                         font-bold text-white hover:from-purple-400 hover:to-pink-400 disabled:opacity-50`,onClick:()=>U("gem"),disabled:m,children:" 20  "}),!j.free&&!j.ad&&!j.gem&&g.jsx("p",{className:"text-center text-gray-400",children:"   "})]}),g.jsx("button",{className:"w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300",onClick:r,disabled:m,children:""})]})})}const CA={background:"#0a0a1a",backgroundGradient:"radial-gradient(circle at 50% 10%, #1a1a40 0%, #050510 60%)",panel:"#1a1a2e",panelBorder:"rgba(255,255,255,0.1)",accent:"#4a9eff",text:"#ffffff",textSecondary:"#888888",danger:"#ff4757",success:"#2ed573"};function NA(){const[r,t]=se.useState("menu"),[a,s]=se.useState(!1),[o,c]=se.useState(!1),[h,m]=se.useState(!1),[v,b]=se.useState(!1),[x,E]=se.useState(!1),[A,L]=se.useState(0),j=se.useRef(!1),F=Ye(),{gameStatus:U,startGame:V,pauseGame:W,resumeGame:$,resetGame:ie,continueGame:ce,incrementGameTime:re,endGame:M,nextPuzzleLevel:S,score:C,combo:N,chainCount:D,level:B,board:R,isFeverMode:Ue,feverGauge:We,gameTime:X,gameMode:oe}=F,{settings:xe,updateStreak:Be,equippedThemeId:P}=Yn(),O=se.useMemo(()=>gu.find(Ce=>Ce.id===P)?.colors||CA,[P]);se.useEffect(()=>{const ye=document.documentElement;ye.style.setProperty("--theme-bg",O.background),ye.style.setProperty("--theme-bg-gradient",O.backgroundGradient||O.background),ye.style.setProperty("--theme-panel",O.panel),ye.style.setProperty("--theme-panel-border",O.panelBorder||"rgba(255,255,255,0.1)"),ye.style.setProperty("--theme-accent",O.accent),ye.style.setProperty("--theme-text",O.text||"#ffffff"),ye.style.setProperty("--theme-text-secondary",O.textSecondary||"#888888"),ye.style.setProperty("--theme-danger",O.danger||"#ff4757"),ye.style.setProperty("--theme-success",O.success||"#2ed573"),document.body.style.background=O.backgroundGradient||O.background,document.body.style.backgroundColor=O.background},[O]);const{playSound:ae,stopBGM:ue}=oa(),ge=se.useRef(B);se.useEffect(()=>{Be()},[Be]),se.useEffect(()=>{B>ge.current&&U==="playing"&&(b(!0),ae("levelUp"),setTimeout(()=>b(!1),2e3)),ge.current=B},[B,U,ae]),se.useEffect(()=>{Ue&&!j.current&&U==="playing"&&(E(!0),ae("combo"),setTimeout(()=>E(!1),2e3)),j.current=Ue},[Ue,U,ae]),se.useEffect(()=>{if(U!=="playing"){L(0);return}let ye=0;for(let Ce=0;Ce<4;Ce++)for(let Oe=0;Oe<me.COLUMNS;Oe++)R[Ce]?.[Oe]!==null&&ye++;ye>=me.COLUMNS*2?L(2):ye>=me.COLUMNS?L(1):L(0)},[R,U]),se.useEffect(()=>{let ye=null;return U==="playing"&&(ye=window.setInterval(()=>re(),1e3)),()=>{ye&&clearInterval(ye)}},[U,re]),se.useEffect(()=>{if(U!=="playing")return;const ye=bv[oe];ye?.hasTimeLimit&&ye.timeLimit&&X>=ye.timeLimit&&M()},[U,oe,X,M]);const Te=se.useCallback(()=>{const ye=document.documentElement;ye.requestFullscreen?ye.requestFullscreen().catch(()=>{}):ye.webkitRequestFullscreen?ye.webkitRequestFullscreen():ye.msRequestFullscreen&&ye.msRequestFullscreen()},[]),_e=se.useCallback(ye=>{ae("buttonClick"),("ontouchstart"in window||navigator.maxTouchPoints>0)&&Te(),V(ye),t("game")},[V,ae,Te]),he=se.useCallback(()=>{ae("buttonClick"),ie(),ue(),t("menu")},[ie,ue,ae]),de=se.useCallback(()=>{ae("buttonClick"),ie(),V("classic")},[ie,V,ae]),Re=se.useCallback(()=>{ae("buttonClick"),ce()},[ce,ae]);return r==="menu"?g.jsxs(g.Fragment,{children:[g.jsx(EA,{onStartGame:_e,onOpenShop:()=>{ae("buttonClick"),t("shop")},onOpenSettings:()=>{ae("buttonClick"),s(!0)},onOpenLeaderboard:()=>{ae("buttonClick"),t("leaderboard")},onOpenBattlePass:()=>{ae("buttonClick"),alert("Coming Soon!")},onOpenDailyReward:()=>{ae("buttonClick"),c(!0)}}),g.jsxs(un,{children:[a&&g.jsx(gv,{onClose:()=>s(!1)}),o&&g.jsx(TA,{onClose:()=>c(!1)}),h&&g.jsx(AA,{onClose:()=>m(!1)})]})]}):r==="shop"?g.jsx(SA,{onClose:()=>t("menu")}):r==="leaderboard"?g.jsx(wA,{onClose:()=>t("menu")}):g.jsxs("div",{className:`fixed inset-0 bg-[#0a0a15] flex flex-col items-center overflow-hidden transition-colors duration-500
      ${A===2?"shadow-[inset_0_0_50px_rgba(255,0,0,0.3)]":""}
      ${Ue?"shadow-[inset_0_0_100px_rgba(255,100,0,0.3)]":""}`,children:[Ue&&g.jsx(le.div,{className:"absolute inset-0 pointer-events-none z-0",animate:{opacity:[.3,.5,.3]},transition:{duration:.5,repeat:1/0},style:{background:"radial-gradient(ellipse at center, rgba(255, 100, 0, 0.2) 0%, transparent 70%)"}}),A>0&&!Ue&&g.jsx("div",{className:`absolute inset-0 pointer-events-none z-0 animate-pulse ${A===2?"bg-red-900/10":"bg-transparent"}`}),g.jsx(un,{children:v&&g.jsxs(le.div,{initial:{scale:.5,opacity:0,y:100},animate:{scale:1,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-100},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx("h2",{className:"text-6xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-yellow-400 to-yellow-100 drop-shadow-[0_0_20px_rgba(255,215,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:"LEVEL UP!"}),g.jsxs("p",{className:"text-3xl text-white font-bold mt-2 neon-text",children:["Lv. ",B]})]})}),g.jsx(un,{children:x&&g.jsxs(le.div,{initial:{scale:0,rotate:-10,opacity:0},animate:{scale:1,rotate:0,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx(le.h2,{className:"text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-orange-600 via-red-500 to-yellow-400 drop-shadow-[0_0_30px_rgba(255,100,0,0.8)]",style:{fontFamily:"var(--font-display)"},animate:{scale:[1,1.1,1]},transition:{duration:.3,repeat:1/0},children:" FEVER! "}),g.jsx("p",{className:"text-2xl text-yellow-300 font-bold mt-2",children:"x3 SCORE MULTIPLIER!"})]})}),g.jsxs("div",{className:"w-full max-w-2xl px-4 py-2 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>{ae("buttonClick"),U==="playing"?W():$()},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:U==="paused"?"":""}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[10px] text-gray-400 font-bold tracking-widest",children:"LEVEL"}),g.jsx("div",{className:"text-xl font-black text-cyan-400 font-mono leading-none",children:B})]}),g.jsx("button",{onClick:()=>{ae("buttonClick"),s(!0)},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:""})]}),g.jsxs("div",{className:"flex-1 w-full max-w-4xl flex justify-center items-start gap-1 md:gap-4 px-1 md:px-2 py-1 overflow-hidden",children:[g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-48 items-stretch z-10",children:g.jsx(aE,{})}),g.jsxs("div",{className:"flex flex-col items-center relative z-20",children:[g.jsx("div",{className:"flex md:hidden justify-end w-full max-w-[280px] mb-1 px-1",children:g.jsx(sy,{cellSize:18,maxBlocks:3})}),g.jsx(Wx,{}),g.jsxs("div",{className:"md:hidden flex justify-around w-full max-w-[280px] mt-1 py-1 px-2 bg-black/30 rounded-lg",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"SCORE"}),g.jsx("div",{className:"text-sm font-mono font-bold text-white leading-none",children:C.toLocaleString()})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"COMBO"}),g.jsxs("div",{className:`text-sm font-mono font-bold leading-none ${N>1?"text-orange-400":"text-gray-600"}`,children:["x",N]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"CHAIN"}),g.jsx("div",{className:`text-sm font-mono font-bold leading-none ${D>0?"text-cyan-400":"text-gray-600"}`,children:D})]})]}),g.jsx("div",{className:"mt-1 w-full max-w-[300px]",children:g.jsx(nE,{})})]}),g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-32 items-center z-10",children:g.jsx(sy,{cellSize:28,maxBlocks:5})})]}),g.jsx("div",{className:"w-full max-w-lg pb-safe z-30",children:(xe.controlType==="buttons"||xe.controlType==="both")&&g.jsx(tE,{visible:U==="playing"})}),g.jsxs(un,{children:[U==="paused"&&g.jsx(bA,{onResume:$,onRestart:de,onSettings:()=>s(!0),onMainMenu:he}),U==="gameover"&&g.jsx(pA,{onRestart:de,onMainMenu:he,onContinue:Re}),U==="levelComplete"&&oe==="puzzle"&&g.jsx(xA,{onNextLevel:()=>{ae("levelUp"),S()},onMainMenu:he}),a&&g.jsx(gv,{onClose:()=>s(!1)})]})]})}Y1.createRoot(document.getElementById("root")).render(g.jsx(se.StrictMode,{children:g.jsx(NA,{})}));
