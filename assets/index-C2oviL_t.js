import{r as re,j as p,m as ae,A as un}from"./animations-BJOS7rFy.js";import{r as U1,a as B1}from"./vendor-DlBnNAMw.js";import{c as dv}from"./state-ChBe2EGv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();var Qf={exports:{}},eo={},Yf={exports:{}},Xf={};var q0;function z1(){return q0||(q0=1,(function(r){function t(X,se){var be=X.length;X.push(se);e:for(;0<be;){var Le=be-1>>>1,U=X[Le];if(0<o(U,se))X[Le]=se,X[be]=U,be=Le;else break e}}function i(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var se=X[0],be=X.pop();if(be!==se){X[0]=be;e:for(var Le=0,U=X.length,V=U>>>1;Le<V;){var le=2*(Le+1)-1,ce=X[le],ge=le+1,Ee=X[ge];if(0>o(ce,be))ge<U&&0>o(Ee,ce)?(X[Le]=Ee,X[ge]=be,Le=ge):(X[Le]=ce,X[le]=be,Le=le);else if(ge<U&&0>o(Ee,be))X[Le]=Ee,X[ge]=be,Le=ge;else break e}}return se}function o(X,se){var be=X.sortIndex-se.sortIndex;return be!==0?be:X.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var v=[],b=[],x=1,E=null,C=3,z=!1,B=!1,P=!1,j=!1,O=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function oe(X){for(var se=i(b);se!==null;){if(se.callback===null)s(b);else if(se.startTime<=X)s(b),se.sortIndex=se.expirationTime,t(v,se);else break;se=i(b)}}function fe(X){if(P=!1,oe(X),!B)if(i(v)!==null)B=!0,ie||(ie=!0,k());else{var se=i(b);se!==null&&mt(fe,se.startTime-X)}}var ie=!1,R=-1,S=5,A=-1;function M(){return j?!0:!(r.unstable_now()-A<S)}function D(){if(j=!1,ie){var X=r.unstable_now();A=X;var se=!0;try{e:{B=!1,P&&(P=!1,Z(R),R=-1),z=!0;var be=C;try{t:{for(oe(X),E=i(v);E!==null&&!(E.expirationTime>X&&M());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,C=E.priorityLevel;var U=Le(E.expirationTime<=X);if(X=r.unstable_now(),typeof U=="function"){E.callback=U,oe(X),se=!0;break t}E===i(v)&&s(v),oe(X)}else s(v);E=i(v)}if(E!==null)se=!0;else{var V=i(b);V!==null&&mt(fe,V.startTime-X),se=!1}}break e}finally{E=null,C=be,z=!1}se=void 0}}finally{se?k():ie=!1}}}var k;if(typeof ne=="function")k=function(){ne(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Qe=N.port2;N.port1.onmessage=D,k=function(){Qe.postMessage(null)}}else k=function(){O(D,0)};function mt(X,se){R=O(function(){X(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(X){switch(C){case 1:case 2:case 3:var se=3;break;default:se=C}var be=C;C=se;try{return X()}finally{C=be}},r.unstable_requestPaint=function(){j=!0},r.unstable_runWithPriority=function(X,se){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var be=C;C=X;try{return se()}finally{C=be}},r.unstable_scheduleCallback=function(X,se,be){var Le=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Le+be:Le):be=Le,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=be+U,X={id:x++,callback:se,priorityLevel:X,startTime:be,expirationTime:U,sortIndex:-1},be>Le?(X.sortIndex=be,t(b,X),i(v)===null&&X===i(b)&&(P?(Z(R),R=-1):P=!0,mt(fe,be-Le))):(X.sortIndex=U,t(v,X),B||z||(B=!0,ie||(ie=!0,k()))),X},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(X){var se=C;return function(){var be=C;C=se;try{return X.apply(this,arguments)}finally{C=be}}}})(Xf)),Xf}var H0;function P1(){return H0||(H0=1,Yf.exports=z1()),Yf.exports}var F0;function G1(){if(F0)return eo;F0=1;var r=P1(),t=U1(),i=B1();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(u(e)!==e)throw Error(s(188))}function b(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,l=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return v(h),e;if(d===l)return v(h),n;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var y=!1,T=h.child;T;){if(T===a){y=!0,a=h,l=d;break}if(T===l){y=!0,l=h,a=d;break}T=T.sibling}if(!y){for(T=d.child;T;){if(T===a){y=!0,a=d,l=h;break}if(T===l){y=!0,l=d,a=h;break}T=T.sibling}if(!y)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var N=Symbol.for("react.client.reference");function Qe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case O:return"Profiler";case j:return"StrictMode";case fe:return"Suspense";case ie:return"SuspenseList";case A:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case ne:return e.displayName||"Context";case Z:return(e._context.displayName||"Context")+".Consumer";case oe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:Qe(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Qe(e(n))}catch{}}return null}var mt=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Le=[],U=-1;function V(e){return{current:e}}function le(e){0>U||(e.current=Le[U],Le[U]=null,U--)}function ce(e,n){U++,Le[U]=e.current,e.current=n}var ge=V(null),Ee=V(null),ve=V(null),ue=V(null);function de(e,n){switch(ce(ve,n),ce(Ee,e),ce(ge,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?f0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=f0(n),e=d0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(ge),ce(ge,e)}function Ae(){le(ge),le(Ee),le(ve)}function Ue(e){e.memoizedState!==null&&ce(ue,e);var n=ge.current,a=d0(n,e.type);n!==a&&(ce(Ee,e),ce(ge,a))}function Re(e){Ee.current===e&&(le(ge),le(Ee)),ue.current===e&&(le(ue),$l._currentValue=be)}var ke,De;function we(e){if(ke===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ke=n&&n[1]||"",De=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+e+De}var tt=!1;function St(e,n){if(!e||tt)return"";tt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var Q=K}Reflect.construct(e,[],W)}else{try{W.call()}catch(K){Q=K}e.call(W.prototype)}}else{try{throw Error()}catch(K){Q=K}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],T=d[1];if(y&&T){var I=y.split(`
`),F=T.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===F.length)for(l=I.length-1,h=F.length-1;1<=l&&0<=h&&I[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==F[h]){var $=`
`+I[l].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=l&&0<=h);break}}}finally{tt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?we(a):""}function vt(e,n){switch(e.tag){case 26:case 27:case 5:return we(e.type);case 16:return we("Lazy");case 13:return e.child!==n&&n!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return St(e.type,!1);case 11:return St(e.type.render,!1);case 1:return St(e.type,!0);case 31:return we("Activity");default:return""}}function Mt(e){try{var n="",a=null;do n+=vt(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var nt=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,hn=r.unstable_cancelCallback,as=r.unstable_shouldYield,ua=r.unstable_requestPaint,It=r.unstable_now,Dn=r.unstable_getCurrentPriorityLevel,ci=r.unstable_ImmediatePriority,it=r.unstable_UserBlockingPriority,ui=r.unstable_NormalPriority,Hs=r.unstable_LowPriority,ss=r.unstable_IdlePriority,ha=r.log,Fs=r.unstable_setDisableYieldValue,En=null,$t=null;function On(e){if(typeof ha=="function"&&Fs(e),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(En,e)}catch{}}var wt=Math.clz32?Math.clz32:No,Co=Math.log,Qs=Math.LN2;function No(e){return e>>>=0,e===0?32:31-(Co(e)/Qs|0)|0}var hi=256,rs=262144,Dt=4194304;function fi(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function di(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=fi(l):(y&=T,y!==0?h=fi(y):a||(a=T&~e,a!==0&&(h=fi(a))))):(T=l&~d,T!==0?h=fi(T):y!==0?h=fi(y):a||(a=l&~e,a!==0&&(h=fi(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function Kn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ku(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ro(){var e=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),e}function mi(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ls(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $u(e,n,a,l,h,d){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,I=e.expirationTimes,F=e.hiddenUpdates;for(a=y&~a;0<a;){var $=31-wt(a),W=1<<$;T[$]=0,I[$]=-1;var Q=F[$];if(Q!==null)for(F[$]=null,$=0;$<Q.length;$++){var K=Q[$];K!==null&&(K.lane&=-536870913)}a&=~W}l!==0&&os(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~n))}function os(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-wt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function tl(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-wt(a),h=1<<l;h&n|e[l]&n&&(e[l]|=n),a&=~h}}function nl(e,n){var a=n&-n;return a=(a&42)!==0?1:cs(a),(a&(e.suspendedLanes|n))!==0?0:a}function cs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Mo(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:L0(e.type))}function $n(e,n){var a=se.p;try{return se.p=e,n()}finally{se.p=a}}var Zn=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Zn,Ft="__reactProps$"+Zn,gi="__reactContainer$"+Zn,Ys="__reactEvents$"+Zn,Zu="__reactListeners$"+Zn,Io="__reactHandles$"+Zn,Do="__reactResources$"+Zn,pi="__reactMarker$"+Zn;function Xs(e){delete e[Ot],delete e[Ft],delete e[Ys],delete e[Zu],delete e[Io]}function yi(e){var n=e[Ot];if(n)return n;for(var a=e.parentNode;a;){if(n=a[gi]||a[Ot]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=b0(e);e!==null;){if(a=e[Ot])return a;e=b0(e)}return n}e=a,a=e.parentNode}return null}function Vn(e){if(e=e[Ot]||e[gi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Tn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function vi(e){var n=e[Do];return n||(n=e[Do]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(e){e[pi]=!0}var il=new Set,al={};function _i(e,n){bi(e,n),bi(e+"Capture",n)}function bi(e,n){for(al[e]=n,e=0;e<n.length;e++)il.add(n[e])}var sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},ll={};function Oo(e){return nt.call(ll,e)?!0:nt.call(rl,e)?!1:sl.test(e)?ll[e]=!0:(rl[e]=!0,!1)}function Ks(e,n,a){if(Oo(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Sn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function jt(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fa(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ol(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function st(e){if(!e._valueTracker){var n=fa(e)?"checked":"value";e._valueTracker=ol(e,n,""+e[n])}}function us(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=fa(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var hs=/[\n"\\]/g;function mn(e){return e.replace(hs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function $s(e,n,a,l,h,d,y,T){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?cl(e,y,Qt(n)):a!=null?cl(e,y,Qt(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Qt(T):e.removeAttribute("name")}function Vo(e,n,a,l,h,d,y,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){st(e);return}a=a!=null?""+Qt(a):"",n=n!=null?""+Qt(n):a,T||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),st(e)}function cl(e,n,a){n==="number"&&xi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function da(e,n,a,l){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Qt(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function jo(e,n,a){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Qt(a):""}function ma(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(mt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Qt(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),st(e)}function gn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Lo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||Lo.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function hl(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&ul(e,h,l)}else for(var d in n)n.hasOwnProperty(d)&&ul(e,d,n[d])}function Zs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ga=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(e){return ga.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jn(){}var fl=null;function jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pa=null,Ei=null;function fs(e){var n=Vn(e);if(n&&(e=n.stateNode)){var a=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if($s(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var h=l[Ft]||null;if(!h)throw Error(s(90));$s(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&us(l)}break e;case"textarea":jo(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&da(e,!!a.multiple,n,!1)}}}var Ws=!1;function ya(e,n,a){if(Ws)return e(n,a);Ws=!0;try{var l=e(n);return l}finally{if(Ws=!1,(pa!==null||Ei!==null)&&(Mc(),pa&&(n=pa,e=Ei,Ei=pa=null,fs(n),e)))for(n=0;n<e.length;n++)fs(e[n])}}function Wn(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Ft]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ds=!1;if(Ln)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){ds=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{ds=!1}var Ti=null,dl=null,ms=null;function ml(){if(ms)return ms;var e,n=dl,a=n.length,l,h="value"in Ti?Ti.value:Ti.textContent,d=h.length;for(e=0;e<a&&n[e]===h[e];e++);var y=a-e;for(l=1;l<=y&&n[a-l]===h[d-l];l++);return ms=h.slice(e,1<l?1-l:void 0)}function gs(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function ei(){return!1}function Zt(e){function n(a,l,h,d,y){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zi:ei,this.isPropagationStopped=ei,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),n}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Zt(Pi),va=E({},Pi,{view:0,detail:0}),gl=Zt(va),_a,er,wi,tr=E({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ba,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wi&&(wi&&e.type==="mousemove"?(_a=e.screenX-wi.screenX,er=e.screenY-wi.screenY):er=_a=0,wi=e),_a)},movementY:function(e){return"movementY"in e?e.movementY:er}}),pl=Zt(tr),ps=E({},tr,{dataTransfer:0}),Uo=Zt(ps),Bo=E({},va,{relatedTarget:0}),ys=Zt(Bo),yl=E({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),zo=Zt(yl),nr=E({},Pi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Po=Zt(nr),Go=E({},Pi,{data:0}),Ai=Zt(Go),qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ho={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Fo[e])?!!n[e]:!1}function ba(){return Qo}var fn=E({},va,{key:function(e){if(e.key){var n=qo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=gs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ho[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ba,charCode:function(e){return e.type==="keypress"?gs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yo=Zt(fn),Xo=E({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=Zt(Xo),c=E({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ba}),g=Zt(c),_=E({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Zt(_),q=E({},tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Zt(q),he=E({},Pi,{newState:0,oldState:0}),Oe=Zt(he),At=[9,13,27,32],We=Ln&&"CompositionEvent"in window,_t=null;Ln&&"documentMode"in document&&(_t=document.documentMode);var kn=Ln&&"TextEvent"in window&&!_t,Ci=Ln&&(!We||_t&&8<_t&&11>=_t),ti=" ",ni=!1;function vs(e,n){switch(e){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ir(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ar=!1;function ob(e,n){switch(e){case"compositionend":return ir(n);case"keypress":return n.which!==32?null:(ni=!0,ti);case"textInput":return e=n.data,e===ti&&ni?null:e;default:return null}}function cb(e,n){if(ar)return e==="compositionend"||!We&&vs(e,n)?(e=ml(),ms=dl=Ti=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ci&&n.locale!=="ko"?null:n.data;default:return null}}var ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ub[e.type]:n==="textarea"}function Sm(e,n,a,l){pa?Ei?Ei.push(l):Ei=[l]:pa=l,n=kc(n,"onChange"),0<n.length&&(a=new Si("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var vl=null,_l=null;function hb(e){r0(e,0)}function Ko(e){var n=Tn(e);if(us(n))return e}function wm(e,n){if(e==="change")return n}var Am=!1;if(Ln){var Ju;if(Ln){var Wu="oninput"in document;if(!Wu){var Cm=document.createElement("div");Cm.setAttribute("oninput","return;"),Wu=typeof Cm.oninput=="function"}Ju=Wu}else Ju=!1;Am=Ju&&(!document.documentMode||9<document.documentMode)}function Nm(){vl&&(vl.detachEvent("onpropertychange",Rm),_l=vl=null)}function Rm(e){if(e.propertyName==="value"&&Ko(_l)){var n=[];Sm(n,_l,e,jn(e)),ya(hb,n)}}function fb(e,n,a){e==="focusin"?(Nm(),vl=n,_l=a,vl.attachEvent("onpropertychange",Rm)):e==="focusout"&&Nm()}function db(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ko(_l)}function mb(e,n){if(e==="click")return Ko(n)}function gb(e,n){if(e==="input"||e==="change")return Ko(n)}function pb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var wn=typeof Object.is=="function"?Object.is:pb;function bl(e,n){if(wn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!nt.call(n,h)||!wn(e[h],n[h]))return!1}return!0}function Mm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Im(e,n){var a=Mm(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mm(a)}}function Dm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Dm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Om(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xi(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=xi(e.document)}return n}function eh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var yb=Ln&&"documentMode"in document&&11>=document.documentMode,sr=null,th=null,xl=null,nh=!1;function Vm(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||sr==null||sr!==xi(l)||(l=sr,"selectionStart"in l&&eh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),xl&&bl(xl,l)||(xl=l,l=kc(th,"onSelect"),0<l.length&&(n=new Si("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=sr)))}function _s(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var rr={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},ih={},jm={};Ln&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function bs(e){if(ih[e])return ih[e];if(!rr[e])return e;var n=rr[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in jm)return ih[e]=n[a];return e}var Lm=bs("animationend"),km=bs("animationiteration"),Um=bs("animationstart"),vb=bs("transitionrun"),_b=bs("transitionstart"),bb=bs("transitioncancel"),Bm=bs("transitionend"),zm=new Map,ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ah.push("scrollEnd");function ii(e,n){zm.set(e,n),_i(n,[e])}var $o=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Un=[],lr=0,sh=0;function Zo(){for(var e=lr,n=sh=lr=0;n<e;){var a=Un[n];Un[n++]=null;var l=Un[n];Un[n++]=null;var h=Un[n];Un[n++]=null;var d=Un[n];if(Un[n++]=null,l!==null&&h!==null){var y=l.pending;y===null?h.next=h:(h.next=y.next,y.next=h),l.pending=h}d!==0&&Pm(a,h,d)}}function Jo(e,n,a,l){Un[lr++]=e,Un[lr++]=n,Un[lr++]=a,Un[lr++]=l,sh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function rh(e,n,a,l){return Jo(e,n,a,l),Wo(e)}function xs(e,n){return Jo(e,null,null,n),Wo(e)}function Pm(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-wt(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=a|536870912),d):null}function Wo(e){if(50<ql)throw ql=0,pf=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var or={};function xb(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,a,l){return new xb(e,n,a,l)}function lh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qi(e,n){var a=e.alternate;return a===null?(a=An(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Gm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ec(e,n,a,l,h,d){var y=0;if(l=e,typeof e=="function")lh(e)&&(y=1);else if(typeof e=="string")y=A1(e,a,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case A:return e=An(31,a,n,h),e.elementType=A,e.lanes=d,e;case P:return Es(a.children,h,d,n);case j:y=8,h|=24;break;case O:return e=An(12,a,n,h|2),e.elementType=O,e.lanes=d,e;case fe:return e=An(13,a,n,h),e.elementType=fe,e.lanes=d,e;case ie:return e=An(19,a,n,h),e.elementType=ie,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ne:y=10;break e;case Z:y=9;break e;case oe:y=11;break e;case R:y=14;break e;case S:y=16,l=null;break e}y=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=An(y,a,n,h),n.elementType=e,n.type=l,n.lanes=d,n}function Es(e,n,a,l){return e=An(7,e,l,n),e.lanes=a,e}function oh(e,n,a){return e=An(6,e,null,n),e.lanes=a,e}function qm(e){var n=An(18,null,null,0);return n.stateNode=e,n}function ch(e,n,a){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Hm=new WeakMap;function Bn(e,n){if(typeof e=="object"&&e!==null){var a=Hm.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Mt(n)},Hm.set(e,n),n)}return{value:e,source:n,stack:Mt(n)}}var cr=[],ur=0,tc=null,El=0,zn=[],Pn=0,xa=null,Ni=1,Ri="";function Hi(e,n){cr[ur++]=El,cr[ur++]=tc,tc=e,El=n}function Fm(e,n,a){zn[Pn++]=Ni,zn[Pn++]=Ri,zn[Pn++]=xa,xa=e;var l=Ni;e=Ri;var h=32-wt(l)-1;l&=~(1<<h),a+=1;var d=32-wt(n)+h;if(30<d){var y=h-h%5;d=(l&(1<<y)-1).toString(32),l>>=y,h-=y,Ni=1<<32-wt(n)+h|a<<h|l,Ri=d+e}else Ni=1<<d|a<<h|l,Ri=e}function uh(e){e.return!==null&&(Hi(e,1),Fm(e,1,0))}function hh(e){for(;e===tc;)tc=cr[--ur],cr[ur]=null,El=cr[--ur],cr[ur]=null;for(;e===xa;)xa=zn[--Pn],zn[Pn]=null,Ri=zn[--Pn],zn[Pn]=null,Ni=zn[--Pn],zn[Pn]=null}function Qm(e,n){zn[Pn++]=Ni,zn[Pn++]=Ri,zn[Pn++]=xa,Ni=n.id,Ri=n.overflow,xa=e}var Jt=null,pt=null,Ye=!1,Ea=null,Gn=!1,fh=Error(s(519));function Ta(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Bn(n,e)),fh}function Ym(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[Ot]=e,n[Ft]=l,a){case"dialog":ze("cancel",n),ze("close",n);break;case"iframe":case"object":case"embed":ze("load",n);break;case"video":case"audio":for(a=0;a<Fl.length;a++)ze(Fl[a],n);break;case"source":ze("error",n);break;case"img":case"image":case"link":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"input":ze("invalid",n),Vo(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ze("invalid",n);break;case"textarea":ze("invalid",n),ma(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||u0(n.textContent,a)?(l.popover!=null&&(ze("beforetoggle",n),ze("toggle",n)),l.onScroll!=null&&ze("scroll",n),l.onScrollEnd!=null&&ze("scrollend",n),l.onClick!=null&&(n.onclick=Jn),n=!0):n=!1,n||Ta(e,!0)}function Xm(e){for(Jt=e.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Jt=Jt.return}}function hr(e){if(e!==Jt)return!1;if(!Ye)return Xm(e),Ye=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||If(e.type,e.memoizedProps)),a=!a),a&&pt&&Ta(e),Xm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));pt=_0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));pt=_0(e)}else n===27?(n=pt,ka(e.type)?(e=Lf,Lf=null,pt=e):pt=n):pt=Jt?Hn(e.stateNode.nextSibling):null;return!0}function Ts(){pt=Jt=null,Ye=!1}function dh(){var e=Ea;return e!==null&&(_n===null?_n=e:_n.push.apply(_n,e),Ea=null),e}function Tl(e){Ea===null?Ea=[e]:Ea.push(e)}var mh=V(null),Ss=null,Fi=null;function Sa(e,n,a){ce(mh,n._currentValue),n._currentValue=a}function Qi(e){e._currentValue=mh.current,le(mh)}function gh(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function ph(e,n,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var I=0;I<n.length;I++)if(T.context===n[I]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),gh(d.return,a,e),l||(y=null);break e}d=T.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(s(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),gh(y,a,e),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===e){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function fr(e,n,a,l){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var T=h.type;wn(h.pendingProps.value,y.value)||(e!==null?e.push(T):e=[T])}}else if(h===ue.current){if(y=h.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push($l):e=[$l])}h=h.return}e!==null&&ph(n,e,a,l),n.flags|=262144}function nc(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ws(e){Ss=e,Fi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Km(Ss,e)}function ic(e,n){return Ss===null&&ws(e),Km(e,n)}function Km(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Fi===null){if(e===null)throw Error(s(308));Fi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Fi=Fi.next=n;return a}var Eb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Tb=r.unstable_scheduleCallback,Sb=r.unstable_NormalPriority,Lt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yh(){return{controller:new Eb,data:new Map,refCount:0}}function Sl(e){e.refCount--,e.refCount===0&&Tb(Sb,function(){e.controller.abort()})}var wl=null,vh=0,dr=0,mr=null;function wb(e,n){if(wl===null){var a=wl=[];vh=0,dr=Ef(),mr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vh++,n.then($m,$m),n}function $m(){if(--vh===0&&wl!==null){mr!==null&&(mr.status="fulfilled");var e=wl;wl=null,dr=0,mr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ab(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Zm=X.S;X.S=function(e,n){Vp=It(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&wb(e,n),Zm!==null&&Zm(e,n)};var As=V(null);function _h(){var e=As.current;return e!==null?e:dt.pooledCache}function ac(e,n){n===null?ce(As,As.current):ce(As,n.pool)}function Jm(){var e=_h();return e===null?null:{parent:Lt._currentValue,pool:e}}var gr=Error(s(460)),bh=Error(s(474)),sc=Error(s(542)),rc={then:function(){}};function Wm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function eg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Jn,Jn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ng(e),e;default:if(typeof n.status=="string")n.then(Jn,Jn);else{if(e=dt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ng(e),e}throw Ns=n,gr}}function Cs(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ns=a,gr):a}}var Ns=null;function tg(){if(Ns===null)throw Error(s(459));var e=Ns;return Ns=null,e}function ng(e){if(e===gr||e===sc)throw Error(s(483))}var pr=null,Al=0;function lc(e){var n=Al;return Al+=1,pr===null&&(pr=[]),eg(pr,e,n)}function Cl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function oc(e,n){throw n.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ig(e){function n(G,L){if(e){var H=G.deletions;H===null?(G.deletions=[L],G.flags|=16):H.push(L)}}function a(G,L){if(!e)return null;for(;L!==null;)n(G,L),L=L.sibling;return null}function l(G){for(var L=new Map;G!==null;)G.key!==null?L.set(G.key,G):L.set(G.index,G),G=G.sibling;return L}function h(G,L){return G=qi(G,L),G.index=0,G.sibling=null,G}function d(G,L,H){return G.index=H,e?(H=G.alternate,H!==null?(H=H.index,H<L?(G.flags|=67108866,L):H):(G.flags|=67108866,L)):(G.flags|=1048576,L)}function y(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function T(G,L,H,J){return L===null||L.tag!==6?(L=oh(H,G.mode,J),L.return=G,L):(L=h(L,H),L.return=G,L)}function I(G,L,H,J){var Te=H.type;return Te===P?$(G,L,H.props.children,J,H.key):L!==null&&(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===S&&Cs(Te)===L.type)?(L=h(L,H.props),Cl(L,H),L.return=G,L):(L=ec(H.type,H.key,H.props,null,G.mode,J),Cl(L,H),L.return=G,L)}function F(G,L,H,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=ch(H,G.mode,J),L.return=G,L):(L=h(L,H.children||[]),L.return=G,L)}function $(G,L,H,J,Te){return L===null||L.tag!==7?(L=Es(H,G.mode,J,Te),L.return=G,L):(L=h(L,H),L.return=G,L)}function W(G,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=oh(""+L,G.mode,H),L.return=G,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case z:return H=ec(L.type,L.key,L.props,null,G.mode,H),Cl(H,L),H.return=G,H;case B:return L=ch(L,G.mode,H),L.return=G,L;case S:return L=Cs(L),W(G,L,H)}if(mt(L)||k(L))return L=Es(L,G.mode,H,null),L.return=G,L;if(typeof L.then=="function")return W(G,lc(L),H);if(L.$$typeof===ne)return W(G,ic(G,L),H);oc(G,L)}return null}function Q(G,L,H,J){var Te=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:T(G,L,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case z:return H.key===Te?I(G,L,H,J):null;case B:return H.key===Te?F(G,L,H,J):null;case S:return H=Cs(H),Q(G,L,H,J)}if(mt(H)||k(H))return Te!==null?null:$(G,L,H,J,null);if(typeof H.then=="function")return Q(G,L,lc(H),J);if(H.$$typeof===ne)return Q(G,L,ic(G,H),J);oc(G,H)}return null}function K(G,L,H,J,Te){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return G=G.get(H)||null,T(L,G,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case z:return G=G.get(J.key===null?H:J.key)||null,I(L,G,J,Te);case B:return G=G.get(J.key===null?H:J.key)||null,F(L,G,J,Te);case S:return J=Cs(J),K(G,L,H,J,Te)}if(mt(J)||k(J))return G=G.get(H)||null,$(L,G,J,Te,null);if(typeof J.then=="function")return K(G,L,H,lc(J),Te);if(J.$$typeof===ne)return K(G,L,H,ic(L,J),Te);oc(L,J)}return null}function _e(G,L,H,J){for(var Te=null,Ze=null,xe=L,je=L=0,Ge=null;xe!==null&&je<H.length;je++){xe.index>je?(Ge=xe,xe=null):Ge=xe.sibling;var Je=Q(G,xe,H[je],J);if(Je===null){xe===null&&(xe=Ge);break}e&&xe&&Je.alternate===null&&n(G,xe),L=d(Je,L,je),Ze===null?Te=Je:Ze.sibling=Je,Ze=Je,xe=Ge}if(je===H.length)return a(G,xe),Ye&&Hi(G,je),Te;if(xe===null){for(;je<H.length;je++)xe=W(G,H[je],J),xe!==null&&(L=d(xe,L,je),Ze===null?Te=xe:Ze.sibling=xe,Ze=xe);return Ye&&Hi(G,je),Te}for(xe=l(xe);je<H.length;je++)Ge=K(xe,G,je,H[je],J),Ge!==null&&(e&&Ge.alternate!==null&&xe.delete(Ge.key===null?je:Ge.key),L=d(Ge,L,je),Ze===null?Te=Ge:Ze.sibling=Ge,Ze=Ge);return e&&xe.forEach(function(Ga){return n(G,Ga)}),Ye&&Hi(G,je),Te}function Ce(G,L,H,J){if(H==null)throw Error(s(151));for(var Te=null,Ze=null,xe=L,je=L=0,Ge=null,Je=H.next();xe!==null&&!Je.done;je++,Je=H.next()){xe.index>je?(Ge=xe,xe=null):Ge=xe.sibling;var Ga=Q(G,xe,Je.value,J);if(Ga===null){xe===null&&(xe=Ge);break}e&&xe&&Ga.alternate===null&&n(G,xe),L=d(Ga,L,je),Ze===null?Te=Ga:Ze.sibling=Ga,Ze=Ga,xe=Ge}if(Je.done)return a(G,xe),Ye&&Hi(G,je),Te;if(xe===null){for(;!Je.done;je++,Je=H.next())Je=W(G,Je.value,J),Je!==null&&(L=d(Je,L,je),Ze===null?Te=Je:Ze.sibling=Je,Ze=Je);return Ye&&Hi(G,je),Te}for(xe=l(xe);!Je.done;je++,Je=H.next())Je=K(xe,G,je,Je.value,J),Je!==null&&(e&&Je.alternate!==null&&xe.delete(Je.key===null?je:Je.key),L=d(Je,L,je),Ze===null?Te=Je:Ze.sibling=Je,Ze=Je);return e&&xe.forEach(function(k1){return n(G,k1)}),Ye&&Hi(G,je),Te}function ht(G,L,H,J){if(typeof H=="object"&&H!==null&&H.type===P&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case z:e:{for(var Te=H.key;L!==null;){if(L.key===Te){if(Te=H.type,Te===P){if(L.tag===7){a(G,L.sibling),J=h(L,H.props.children),J.return=G,G=J;break e}}else if(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===S&&Cs(Te)===L.type){a(G,L.sibling),J=h(L,H.props),Cl(J,H),J.return=G,G=J;break e}a(G,L);break}else n(G,L);L=L.sibling}H.type===P?(J=Es(H.props.children,G.mode,J,H.key),J.return=G,G=J):(J=ec(H.type,H.key,H.props,null,G.mode,J),Cl(J,H),J.return=G,G=J)}return y(G);case B:e:{for(Te=H.key;L!==null;){if(L.key===Te)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(G,L.sibling),J=h(L,H.children||[]),J.return=G,G=J;break e}else{a(G,L);break}else n(G,L);L=L.sibling}J=ch(H,G.mode,J),J.return=G,G=J}return y(G);case S:return H=Cs(H),ht(G,L,H,J)}if(mt(H))return _e(G,L,H,J);if(k(H)){if(Te=k(H),typeof Te!="function")throw Error(s(150));return H=Te.call(H),Ce(G,L,H,J)}if(typeof H.then=="function")return ht(G,L,lc(H),J);if(H.$$typeof===ne)return ht(G,L,ic(G,H),J);oc(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(G,L.sibling),J=h(L,H),J.return=G,G=J):(a(G,L),J=oh(H,G.mode,J),J.return=G,G=J),y(G)):a(G,L)}return function(G,L,H,J){try{Al=0;var Te=ht(G,L,H,J);return pr=null,Te}catch(xe){if(xe===gr||xe===sc)throw xe;var Ze=An(29,xe,null,G.mode);return Ze.lanes=J,Ze.return=G,Ze}finally{}}}var Rs=ig(!0),ag=ig(!1),wa=!1;function xh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Wo(e),Pm(e,null,a),n}return Jo(e,l,n,a),Wo(e)}function Nl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,tl(e,a)}}function Th(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Sh=!1;function Rl(){if(Sh){var e=mr;if(e!==null)throw e}}function Ml(e,n,a,l){Sh=!1;var h=e.updateQueue;wa=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,F=I.next;I.next=null,y===null?d=F:y.next=F,y=I;var $=e.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==y&&(T===null?$.firstBaseUpdate=F:T.next=F,$.lastBaseUpdate=I))}if(d!==null){var W=h.baseState;y=0,$=F=I=null,T=d;do{var Q=T.lane&-536870913,K=Q!==T.lane;if(K?(Pe&Q)===Q:(l&Q)===Q){Q!==0&&Q===dr&&(Sh=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var _e=e,Ce=T;Q=n;var ht=a;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){W=_e.call(ht,W,Q);break e}W=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,Q=typeof _e=="function"?_e.call(ht,W,Q):_e,Q==null)break e;W=E({},W,Q);break e;case 2:wa=!0}}Q=T.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(F=$=K,I=W):$=$.next=K,y|=Q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);$===null&&(I=W),h.baseState=I,h.firstBaseUpdate=F,h.lastBaseUpdate=$,d===null&&(h.shared.lanes=0),Da|=y,e.lanes=y,e.memoizedState=W}}function sg(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function rg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sg(a[e],n)}var yr=V(null),cc=V(0);function lg(e,n){e=ta,ce(cc,e),ce(yr,n),ta=e|n.baseLanes}function wh(){ce(cc,ta),ce(yr,yr.current)}function Ah(){ta=cc.current,le(yr),le(cc)}var Cn=V(null),qn=null;function Na(e){var n=e.alternate;ce(Ct,Ct.current&1),ce(Cn,e),qn===null&&(n===null||yr.current!==null||n.memoizedState!==null)&&(qn=e)}function Ch(e){ce(Ct,Ct.current),ce(Cn,e),qn===null&&(qn=e)}function og(e){e.tag===22?(ce(Ct,Ct.current),ce(Cn,e),qn===null&&(qn=e)):Ra()}function Ra(){ce(Ct,Ct.current),ce(Cn,Cn.current)}function Nn(e){le(Cn),qn===e&&(qn=null),le(Ct)}var Ct=V(0);function uc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vf(a)||jf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Yi=0,Ve=null,ct=null,kt=null,hc=!1,vr=!1,Ms=!1,fc=0,Il=0,_r=null,Cb=0;function Et(){throw Error(s(321))}function Nh(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!wn(e[a],n[a]))return!1;return!0}function Rh(e,n,a,l,h,d){return Yi=d,Ve=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=e===null||e.memoizedState===null?Fg:Hh,Ms=!1,d=a(l,h),Ms=!1,vr&&(d=ug(n,a,l,h)),cg(e),d}function cg(e){X.H=Vl;var n=ct!==null&&ct.next!==null;if(Yi=0,kt=ct=Ve=null,hc=!1,Il=0,_r=null,n)throw Error(s(300));e===null||Ut||(e=e.dependencies,e!==null&&nc(e)&&(Ut=!0))}function ug(e,n,a,l){Ve=e;var h=0;do{if(vr&&(_r=null),Il=0,vr=!1,25<=h)throw Error(s(301));if(h+=1,kt=ct=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=Qg,d=n(a,l)}while(vr);return d}function Nb(){var e=X.H,n=e.useState()[0];return n=typeof n.then=="function"?Dl(n):n,e=e.useState()[0],(ct!==null?ct.memoizedState:null)!==e&&(Ve.flags|=1024),n}function Mh(){var e=fc!==0;return fc=0,e}function Ih(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Dh(e){if(hc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}hc=!1}Yi=0,kt=ct=Ve=null,vr=!1,Il=fc=0,_r=null}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ve.memoizedState=kt=e:kt=kt.next=e,kt}function Nt(){if(ct===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var n=kt===null?Ve.memoizedState:kt.next;if(n!==null)kt=n,ct=e;else{if(e===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},kt===null?Ve.memoizedState=kt=e:kt=kt.next=e}return kt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(e){var n=Il;return Il+=1,_r===null&&(_r=[]),e=eg(_r,e,n),n=Ve,(kt===null?n.memoizedState:kt.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?Fg:Hh),e}function mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Dl(e);if(e.$$typeof===ne)return Wt(e)}throw Error(s(438,String(e)))}function Oh(e){var n=null,a=Ve.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=dc(),Ve.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=M;return n.index++,a}function Xi(e,n){return typeof n=="function"?n(e):n}function gc(e){var n=Nt();return Vh(n,ct,e)}function Vh(e,n,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}n.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var T=y=null,I=null,F=n,$=!1;do{var W=F.lane&-536870913;if(W!==F.lane?(Pe&W)===W:(Yi&W)===W){var Q=F.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),W===dr&&($=!0);else if((Yi&Q)===Q){F=F.next,Q===dr&&($=!0);continue}else W={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(T=I=W,y=d):I=I.next=W,Ve.lanes|=Q,Da|=Q;W=F.action,Ms&&a(d,W),d=F.hasEagerState?F.eagerState:a(d,W)}else Q={lane:W,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(T=I=Q,y=d):I=I.next=Q,Ve.lanes|=W,Da|=W;F=F.next}while(F!==null&&F!==n);if(I===null?y=d:I.next=T,!wn(d,e.memoizedState)&&(Ut=!0,$&&(a=mr,a!==null)))throw a;e.memoizedState=d,e.baseState=y,e.baseQueue=I,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function jh(e){var n=Nt(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do d=e(d,y.action),y=y.next;while(y!==h);wn(d,n.memoizedState)||(Ut=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function hg(e,n,a){var l=Ve,h=Nt(),d=Ye;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=n();var y=!wn((ct||h).memoizedState,a);if(y&&(h.memoizedState=a,Ut=!0),h=h.queue,Uh(mg.bind(null,l,h,e),[e]),h.getSnapshot!==n||y||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,br(9,{destroy:void 0},dg.bind(null,l,h,a,n),null),dt===null)throw Error(s(349));d||(Yi&127)!==0||fg(l,n,a)}return a}function fg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Ve.updateQueue,n===null?(n=dc(),Ve.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function dg(e,n,a,l){n.value=a,n.getSnapshot=l,gg(n)&&pg(e)}function mg(e,n,a){return a(function(){gg(n)&&pg(e)})}function gg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!wn(e,a)}catch{return!0}}function pg(e){var n=xs(e,2);n!==null&&bn(n,e,2)}function Lh(e){var n=dn();if(typeof e=="function"){var a=e;if(e=a(),Ms){On(!0);try{a()}finally{On(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:e},n}function yg(e,n,a,l){return e.baseState=a,Vh(e,ct,typeof l=="function"?l:Xi)}function Rb(e,n,a,l,h){if(vc(e))throw Error(s(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,vg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function vg(e,n){var a=n.action,l=n.payload,h=e.state;if(n.isTransition){var d=X.T,y={};X.T=y;try{var T=a(h,l),I=X.S;I!==null&&I(y,T),_g(e,n,T)}catch(F){kh(e,n,F)}finally{d!==null&&y.types!==null&&(d.types=y.types),X.T=d}}else try{d=a(h,l),_g(e,n,d)}catch(F){kh(e,n,F)}}function _g(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){bg(e,n,l)},function(l){return kh(e,n,l)}):bg(e,n,a)}function bg(e,n,a){n.status="fulfilled",n.value=a,xg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,vg(e,a)))}function kh(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,xg(n),n=n.next;while(n!==l)}e.action=null}function xg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Eg(e,n){return n}function Tg(e,n){if(Ye){var a=dt.formState;if(a!==null){e:{var l=Ve;if(Ye){if(pt){t:{for(var h=pt,d=Gn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Hn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){pt=Hn(h.nextSibling),l=h.data==="F!";break e}}Ta(l)}l=!1}l&&(n=a[0])}}return a=dn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:n},a.queue=l,a=Gg.bind(null,Ve,l),l.dispatch=a,l=Lh(!1),d=qh.bind(null,Ve,!1,l.queue),l=dn(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,a=Rb.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=e,[n,a,!1]}function Sg(e){var n=Nt();return wg(n,ct,e)}function wg(e,n,a){if(n=Vh(e,n,Eg)[0],e=gc(Xi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Dl(n)}catch(y){throw y===gr?sc:y}else l=n;n=Nt();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Ve.flags|=2048,br(9,{destroy:void 0},Mb.bind(null,h,a),null)),[l,d,e]}function Mb(e,n){e.action=n}function Ag(e){var n=Nt(),a=ct;if(a!==null)return wg(n,a,e);Nt(),n=n.memoizedState,a=Nt();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function br(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=Ve.updateQueue,n===null&&(n=dc(),Ve.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Cg(){return Nt().memoizedState}function pc(e,n,a,l){var h=dn();Ve.flags|=e,h.memoizedState=br(1|n,{destroy:void 0},a,l===void 0?null:l)}function yc(e,n,a,l){var h=Nt();l=l===void 0?null:l;var d=h.memoizedState.inst;ct!==null&&l!==null&&Nh(l,ct.memoizedState.deps)?h.memoizedState=br(n,d,a,l):(Ve.flags|=e,h.memoizedState=br(1|n,d,a,l))}function Ng(e,n){pc(8390656,8,e,n)}function Uh(e,n){yc(2048,8,e,n)}function Ib(e){Ve.flags|=4;var n=Ve.updateQueue;if(n===null)n=dc(),Ve.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Rg(e){var n=Nt().memoizedState;return Ib({ref:n,nextImpl:e}),function(){if((et&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Mg(e,n){return yc(4,2,e,n)}function Ig(e,n){return yc(4,4,e,n)}function Dg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Og(e,n,a){a=a!=null?a.concat([e]):null,yc(4,4,Dg.bind(null,n,e),a)}function Bh(){}function Vg(e,n){var a=Nt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Nh(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function jg(e,n){var a=Nt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Nh(n,l[1]))return l[0];if(l=e(),Ms){On(!0);try{e()}finally{On(!1)}}return a.memoizedState=[l,n],l}function zh(e,n,a){return a===void 0||(Yi&1073741824)!==0&&(Pe&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Lp(),Ve.lanes|=e,Da|=e,a)}function Lg(e,n,a,l){return wn(a,n)?a:yr.current!==null?(e=zh(e,a,l),wn(e,n)||(Ut=!0),e):(Yi&42)===0||(Yi&1073741824)!==0&&(Pe&261930)===0?(Ut=!0,e.memoizedState=a):(e=Lp(),Ve.lanes|=e,Da|=e,n)}function kg(e,n,a,l,h){var d=se.p;se.p=d!==0&&8>d?d:8;var y=X.T,T={};X.T=T,qh(e,!1,n,a);try{var I=h(),F=X.S;if(F!==null&&F(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=Ab(I,l);Ol(e,n,$,In(e))}else Ol(e,n,l,In(e))}catch(W){Ol(e,n,{then:function(){},status:"rejected",reason:W},In())}finally{se.p=d,y!==null&&T.types!==null&&(y.types=T.types),X.T=y}}function Db(){}function Ph(e,n,a,l){if(e.tag!==5)throw Error(s(476));var h=Ug(e).queue;kg(e,h,n,be,a===null?Db:function(){return Bg(e),a(l)})}function Ug(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:be},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Bg(e){var n=Ug(e);n.next===null&&(n=e.alternate.memoizedState),Ol(e,n.next.queue,{},In())}function Gh(){return Wt($l)}function zg(){return Nt().memoizedState}function Pg(){return Nt().memoizedState}function Ob(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=In();e=Aa(a);var l=Ca(n,e,a);l!==null&&(bn(l,n,a),Nl(l,n,a)),n={cache:yh()},e.payload=n;return}n=n.return}}function Vb(e,n,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vc(e)?qg(n,a):(a=rh(e,n,a,l),a!==null&&(bn(a,e,l),Hg(a,n,l)))}function Gg(e,n,a){var l=In();Ol(e,n,a,l)}function Ol(e,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vc(e))qg(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,T=d(y,a);if(h.hasEagerState=!0,h.eagerState=T,wn(T,y))return Jo(e,n,h,0),dt===null&&Zo(),!1}catch{}finally{}if(a=rh(e,n,h,l),a!==null)return bn(a,e,l),Hg(a,n,l),!0}return!1}function qh(e,n,a,l){if(l={lane:2,revertLane:Ef(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vc(e)){if(n)throw Error(s(479))}else n=rh(e,a,l,2),n!==null&&bn(n,e,2)}function vc(e){var n=e.alternate;return e===Ve||n!==null&&n===Ve}function qg(e,n){vr=hc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Hg(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,tl(e,a)}}var Vl={readContext:Wt,use:mc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Vl.useEffectEvent=Et;var Fg={readContext:Wt,use:mc,useCallback:function(e,n){return dn().memoizedState=[e,n===void 0?null:n],e},useContext:Wt,useEffect:Ng,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,pc(4194308,4,Dg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return pc(4194308,4,e,n)},useInsertionEffect:function(e,n){pc(4,2,e,n)},useMemo:function(e,n){var a=dn();n=n===void 0?null:n;var l=e();if(Ms){On(!0);try{e()}finally{On(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=dn();if(a!==void 0){var h=a(n);if(Ms){On(!0);try{a(n)}finally{On(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=Vb.bind(null,Ve,e),[l.memoizedState,e]},useRef:function(e){var n=dn();return e={current:e},n.memoizedState=e},useState:function(e){e=Lh(e);var n=e.queue,a=Gg.bind(null,Ve,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Bh,useDeferredValue:function(e,n){var a=dn();return zh(a,e,n)},useTransition:function(){var e=Lh(!1);return e=kg.bind(null,Ve,e.queue,!0,!1),dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=Ve,h=dn();if(Ye){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),dt===null)throw Error(s(349));(Pe&127)!==0||fg(l,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Ng(mg.bind(null,l,d,e),[e]),l.flags|=2048,br(9,{destroy:void 0},dg.bind(null,l,d,a,n),null),a},useId:function(){var e=dn(),n=dt.identifierPrefix;if(Ye){var a=Ri,l=Ni;a=(l&~(1<<32-wt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=fc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Cb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gh,useFormState:Tg,useActionState:Tg,useOptimistic:function(e){var n=dn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=qh.bind(null,Ve,!0,a),a.dispatch=n,[e,n]},useMemoCache:Oh,useCacheRefresh:function(){return dn().memoizedState=Ob.bind(null,Ve)},useEffectEvent:function(e){var n=dn(),a={impl:e};return n.memoizedState=a,function(){if((et&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Hh={readContext:Wt,use:mc,useCallback:Vg,useContext:Wt,useEffect:Uh,useImperativeHandle:Og,useInsertionEffect:Mg,useLayoutEffect:Ig,useMemo:jg,useReducer:gc,useRef:Cg,useState:function(){return gc(Xi)},useDebugValue:Bh,useDeferredValue:function(e,n){var a=Nt();return Lg(a,ct.memoizedState,e,n)},useTransition:function(){var e=gc(Xi)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:hg,useId:zg,useHostTransitionStatus:Gh,useFormState:Sg,useActionState:Sg,useOptimistic:function(e,n){var a=Nt();return yg(a,ct,e,n)},useMemoCache:Oh,useCacheRefresh:Pg};Hh.useEffectEvent=Rg;var Qg={readContext:Wt,use:mc,useCallback:Vg,useContext:Wt,useEffect:Uh,useImperativeHandle:Og,useInsertionEffect:Mg,useLayoutEffect:Ig,useMemo:jg,useReducer:jh,useRef:Cg,useState:function(){return jh(Xi)},useDebugValue:Bh,useDeferredValue:function(e,n){var a=Nt();return ct===null?zh(a,e,n):Lg(a,ct.memoizedState,e,n)},useTransition:function(){var e=jh(Xi)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:hg,useId:zg,useHostTransitionStatus:Gh,useFormState:Ag,useActionState:Ag,useOptimistic:function(e,n){var a=Nt();return ct!==null?yg(a,ct,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Oh,useCacheRefresh:Pg};Qg.useEffectEvent=Rg;function Fh(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:E({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Qh={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=In(),h=Aa(l);h.payload=n,a!=null&&(h.callback=a),n=Ca(e,h,l),n!==null&&(bn(n,e,l),Nl(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=In(),h=Aa(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ca(e,h,l),n!==null&&(bn(n,e,l),Nl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=In(),l=Aa(a);l.tag=2,n!=null&&(l.callback=n),n=Ca(e,l,a),n!==null&&(bn(n,e,a),Nl(n,e,a))}};function Yg(e,n,a,l,h,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):n.prototype&&n.prototype.isPureReactComponent?!bl(a,l)||!bl(h,d):!0}function Xg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Qh.enqueueReplaceState(n,n.state,null)}function Is(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=E({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Kg(e){$o(e)}function $g(e){console.error(e)}function Zg(e){$o(e)}function _c(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Jg(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Yh(e,n,a){return a=Aa(a),a.tag=3,a.payload={element:null},a.callback=function(){_c(e,n)},a}function Wg(e){return e=Aa(e),e.tag=3,e}function ep(e,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Jg(n,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Jg(n,a,l),typeof h!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function jb(e,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&fr(n,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?Ic():a.alternate===null&&Tt===0&&(Tt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===rc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),_f(e,l,h)),!1;case 22:return a.flags|=65536,l===rc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),_f(e,l,h)),!1}throw Error(s(435,a.tag))}return _f(e,l,h),Ic(),!1}if(Ye)return n=Cn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==fh&&(e=Error(s(422),{cause:l}),Tl(Bn(e,a)))):(l!==fh&&(n=Error(s(423),{cause:l}),Tl(Bn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Bn(l,a),h=Yh(e.stateNode,l,h),Th(e,h),Tt!==4&&(Tt=2)),!1;var d=Error(s(520),{cause:l});if(d=Bn(d,a),Gl===null?Gl=[d]:Gl.push(d),Tt!==4&&(Tt=2),n===null)return!0;l=Bn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Yh(a.stateNode,l,e),Th(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Oa===null||!Oa.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Wg(h),ep(h,e,a,l),Th(a,h),!1}a=a.return}while(a!==null);return!1}var Xh=Error(s(461)),Ut=!1;function en(e,n,a,l){n.child=e===null?ag(n,null,a,l):Rs(n,e.child,a,l)}function tp(e,n,a,l,h){a=a.render;var d=n.ref;if("ref"in l){var y={};for(var T in l)T!=="ref"&&(y[T]=l[T])}else y=l;return ws(n),l=Rh(e,n,a,y,d,h),T=Mh(),e!==null&&!Ut?(Ih(e,n,h),Ki(e,n,h)):(Ye&&T&&uh(n),n.flags|=1,en(e,n,l,h),n.child)}function np(e,n,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!lh(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,ip(e,n,d,l,h)):(e=ec(a.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!nf(e,h)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:bl,a(y,l)&&e.ref===n.ref)return Ki(e,n,h)}return n.flags|=1,e=qi(d,l),e.ref=n.ref,e.return=n,n.child=e}function ip(e,n,a,l,h){if(e!==null){var d=e.memoizedProps;if(bl(d,l)&&e.ref===n.ref)if(Ut=!1,n.pendingProps=l=d,nf(e,h))(e.flags&131072)!==0&&(Ut=!0);else return n.lanes=e.lanes,Ki(e,n,h)}return Kh(e,n,a,l,h)}function ap(e,n,a,l){var h=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=n.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,n.child=null;return sp(e,n,d,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ac(n,d!==null?d.cachePool:null),d!==null?lg(n,d):wh(),og(n);else return l=n.lanes=536870912,sp(e,n,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(ac(n,d.cachePool),lg(n,d),Ra(),n.memoizedState=null):(e!==null&&ac(n,null),wh(),Ra());return en(e,n,h,a),n.child}function jl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sp(e,n,a,l,h){var d=_h();return d=d===null?null:{parent:Lt._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&ac(n,null),wh(),og(n),e!==null&&fr(e,n,l,!0),n.childLanes=h,null}function bc(e,n){return n=Ec({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function rp(e,n,a){return Rs(n,e.child,null,a),e=bc(n,n.pendingProps),e.flags|=2,Nn(n),n.memoizedState=null,e}function Lb(e,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ye){if(l.mode==="hidden")return e=bc(n,l),n.lanes=536870912,jl(null,e);if(Ch(n),(e=pt)?(e=v0(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:xa!==null?{id:Ni,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=qm(e),a.return=n,n.child=a,Jt=n,pt=null)):e=null,e===null)throw Ta(n);return n.lanes=536870912,null}return bc(n,l)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(Ch(n),h)if(n.flags&256)n.flags&=-257,n=rp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Ut||fr(e,n,a,!1),h=(a&e.childLanes)!==0,Ut||h){if(l=dt,l!==null&&(y=nl(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,xs(e,y),bn(l,e,y),Xh;Ic(),n=rp(e,n,a)}else e=d.treeContext,pt=Hn(y.nextSibling),Jt=n,Ye=!0,Ea=null,Gn=!1,e!==null&&Qm(n,e),n=bc(n,l),n.flags|=4096;return n}return e=qi(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function xc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Kh(e,n,a,l,h){return ws(n),a=Rh(e,n,a,l,void 0,h),l=Mh(),e!==null&&!Ut?(Ih(e,n,h),Ki(e,n,h)):(Ye&&l&&uh(n),n.flags|=1,en(e,n,a,h),n.child)}function lp(e,n,a,l,h,d){return ws(n),n.updateQueue=null,a=ug(n,l,a,h),cg(e),l=Mh(),e!==null&&!Ut?(Ih(e,n,d),Ki(e,n,d)):(Ye&&l&&uh(n),n.flags|=1,en(e,n,a,d),n.child)}function op(e,n,a,l,h){if(ws(n),n.stateNode===null){var d=or,y=a.contextType;typeof y=="object"&&y!==null&&(d=Wt(y)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Qh,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},xh(n),y=a.contextType,d.context=typeof y=="object"&&y!==null?Wt(y):or,d.state=n.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Fh(n,a,y,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Qh.enqueueReplaceState(d,d.state,null),Ml(n,l,d,h),Rl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,I=Is(a,T);d.props=I;var F=d.context,$=a.contextType;y=or,typeof $=="object"&&$!==null&&(y=Wt($));var W=a.getDerivedStateFromProps;$=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||F!==y)&&Xg(n,d,l,y),wa=!1;var Q=n.memoizedState;d.state=Q,Ml(n,l,d,h),Rl(),F=n.memoizedState,T||Q!==F||wa?(typeof W=="function"&&(Fh(n,a,W,l),F=n.memoizedState),(I=wa||Yg(n,a,I,l,Q,F,y))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),d.props=l,d.state=F,d.context=y,l=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,Eh(e,n),y=n.memoizedProps,$=Is(a,y),d.props=$,W=n.pendingProps,Q=d.context,F=a.contextType,I=or,typeof F=="object"&&F!==null&&(I=Wt(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==W||Q!==I)&&Xg(n,d,l,I),wa=!1,Q=n.memoizedState,d.state=Q,Ml(n,l,d,h),Rl();var K=n.memoizedState;y!==W||Q!==K||wa||e!==null&&e.dependencies!==null&&nc(e.dependencies)?(typeof T=="function"&&(Fh(n,a,T,l),K=n.memoizedState),($=wa||Yg(n,a,$,l,Q,K,I)||e!==null&&e.dependencies!==null&&nc(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),d.props=l,d.state=K,d.context=I,l=$):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,xc(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Rs(n,e.child,null,h),n.child=Rs(n,null,a,h)):en(e,n,a,h),n.memoizedState=d.state,e=n.child):e=Ki(e,n,h),e}function cp(e,n,a,l){return Ts(),n.flags|=256,en(e,n,a,l),n.child}var $h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zh(e){return{baseLanes:e,cachePool:Jm()}}function Jh(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Mn),e}function up(e,n,a){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),y&&(h=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ye){if(h?Na(n):Ra(),(e=pt)?(e=v0(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:xa!==null?{id:Ni,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=qm(e),a.return=n,n.child=a,Jt=n,pt=null)):e=null,e===null)throw Ta(n);return jf(e)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(Ra(),h=n.mode,T=Ec({mode:"hidden",children:T},h),l=Es(l,h,a,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=Zh(a),l.childLanes=Jh(e,y,a),n.memoizedState=$h,jl(null,l)):(Na(n),Wh(n,T))}var I=e.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(d)n.flags&256?(Na(n),n.flags&=-257,n=ef(e,n,a)):n.memoizedState!==null?(Ra(),n.child=e.child,n.flags|=128,n=null):(Ra(),T=l.fallback,h=n.mode,l=Ec({mode:"visible",children:l.children},h),T=Es(T,h,a,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,Rs(n,e.child,null,a),l=n.child,l.memoizedState=Zh(a),l.childLanes=Jh(e,y,a),n.memoizedState=$h,n=jl(null,l));else if(Na(n),jf(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var F=y.dgst;y=F,l=Error(s(419)),l.stack="",l.digest=y,Tl({value:l,source:null,stack:null}),n=ef(e,n,a)}else if(Ut||fr(e,n,a,!1),y=(a&e.childLanes)!==0,Ut||y){if(y=dt,y!==null&&(l=nl(y,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,xs(e,l),bn(y,e,l),Xh;Vf(T)||Ic(),n=ef(e,n,a)}else Vf(T)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,pt=Hn(T.nextSibling),Jt=n,Ye=!0,Ea=null,Gn=!1,e!==null&&Qm(n,e),n=Wh(n,l.children),n.flags|=4096);return n}return h?(Ra(),T=l.fallback,h=n.mode,I=e.child,F=I.sibling,l=qi(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,F!==null?T=qi(F,T):(T=Es(T,h,a,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,jl(null,l),l=n.child,T=e.child.memoizedState,T===null?T=Zh(a):(h=T.cachePool,h!==null?(I=Lt._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=Jm(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=Jh(e,y,a),n.memoizedState=$h,jl(e.child,l)):(Na(n),a=e.child,e=a.sibling,a=qi(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=a,n.memoizedState=null,a)}function Wh(e,n){return n=Ec({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ec(e,n){return e=An(22,e,null,n),e.lanes=0,e}function ef(e,n,a){return Rs(n,e.child,null,a),e=Wh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function hp(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),gh(e.return,n,a)}function tf(e,n,a,l,h,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=h,y.treeForkCount=d)}function fp(e,n,a){var l=n.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var y=Ct.current,T=(y&2)!==0;if(T?(y=y&1|2,n.flags|=128):y&=1,ce(Ct,y),en(e,n,l,a),l=Ye?El:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hp(e,a,n);else if(e.tag===19)hp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&uc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),tf(n,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&uc(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}tf(n,!0,a,null,d,l);break;case"together":tf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ki(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Da|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(fr(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=qi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=qi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function nf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&nc(e)))}function kb(e,n,a){switch(n.tag){case 3:de(n,n.stateNode.containerInfo),Sa(n,Lt,e.memoizedState.cache),Ts();break;case 27:case 5:Ue(n);break;case 4:de(n,n.stateNode.containerInfo);break;case 10:Sa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ch(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Na(n),n.flags|=128,null):(a&n.child.childLanes)!==0?up(e,n,a):(Na(n),e=Ki(e,n,a),e!==null?e.sibling:null);Na(n);break;case 19:var h=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(fr(e,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return fp(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ce(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,ap(e,n,a,n.pendingProps);case 24:Sa(n,Lt,e.memoizedState.cache)}return Ki(e,n,a)}function dp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ut=!0;else{if(!nf(e,a)&&(n.flags&128)===0)return Ut=!1,kb(e,n,a);Ut=(e.flags&131072)!==0}else Ut=!1,Ye&&(n.flags&1048576)!==0&&Fm(n,El,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=Cs(n.elementType),n.type=e,typeof e=="function")lh(e)?(l=Is(e,l),n.tag=1,n=op(null,n,e,l,a)):(n.tag=0,n=Kh(null,n,e,l,a));else{if(e!=null){var h=e.$$typeof;if(h===oe){n.tag=11,n=tp(null,n,e,l,a);break e}else if(h===R){n.tag=14,n=np(null,n,e,l,a);break e}}throw n=Qe(e)||e,Error(s(306,n,""))}}return n;case 0:return Kh(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=Is(l,n.pendingProps),op(e,n,l,h,a);case 3:e:{if(de(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,Eh(e,n),Ml(n,l,null,a);var y=n.memoizedState;if(l=y.cache,Sa(n,Lt,l),l!==d.cache&&ph(n,[Lt],a,!0),Rl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=cp(e,n,l,a);break e}else if(l!==h){h=Bn(Error(s(424)),n),Tl(h),n=cp(e,n,l,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(pt=Hn(e.firstChild),Jt=n,Ye=!0,Ea=null,Gn=!0,a=ag(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ts(),l===h){n=Ki(e,n,a);break e}en(e,n,l,a)}n=n.child}return n;case 26:return xc(e,n),e===null?(a=S0(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ye||(a=n.type,e=n.pendingProps,l=Uc(ve.current).createElement(a),l[Ot]=n,l[Ft]=e,tn(l,a,e),Vt(l),n.stateNode=l):n.memoizedState=S0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ue(n),e===null&&Ye&&(l=n.stateNode=x0(n.type,n.pendingProps,ve.current),Jt=n,Gn=!0,h=pt,ka(n.type)?(Lf=h,pt=Hn(l.firstChild)):pt=h),en(e,n,n.pendingProps.children,a),xc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ye&&((h=l=pt)&&(l=d1(l,n.type,n.pendingProps,Gn),l!==null?(n.stateNode=l,Jt=n,pt=Hn(l.firstChild),Gn=!1,h=!0):h=!1),h||Ta(n)),Ue(n),h=n.type,d=n.pendingProps,y=e!==null?e.memoizedProps:null,l=d.children,If(h,d)?l=null:y!==null&&If(h,y)&&(n.flags|=32),n.memoizedState!==null&&(h=Rh(e,n,Nb,null,null,a),$l._currentValue=h),xc(e,n),en(e,n,l,a),n.child;case 6:return e===null&&Ye&&((e=a=pt)&&(a=m1(a,n.pendingProps,Gn),a!==null?(n.stateNode=a,Jt=n,pt=null,e=!0):e=!1),e||Ta(n)),null;case 13:return up(e,n,a);case 4:return de(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Rs(n,null,l,a):en(e,n,l,a),n.child;case 11:return tp(e,n,n.type,n.pendingProps,a);case 7:return en(e,n,n.pendingProps,a),n.child;case 8:return en(e,n,n.pendingProps.children,a),n.child;case 12:return en(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Sa(n,n.type,l.value),en(e,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ws(n),h=Wt(h),l=l(h),n.flags|=1,en(e,n,l,a),n.child;case 14:return np(e,n,n.type,n.pendingProps,a);case 15:return ip(e,n,n.type,n.pendingProps,a);case 19:return fp(e,n,a);case 31:return Lb(e,n,a);case 22:return ap(e,n,a,n.pendingProps);case 24:return ws(n),l=Wt(Lt),e===null?(h=_h(),h===null&&(h=dt,d=yh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:l,cache:h},xh(n),Sa(n,Lt,h)):((e.lanes&a)!==0&&(Eh(e,n),Ml(n,null,null,a),Rl()),h=e.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Sa(n,Lt,l)):(l=d.cache,Sa(n,Lt,l),l!==h.cache&&ph(n,[Lt],a,!0))),en(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function $i(e){e.flags|=4}function af(e,n,a,l,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(zp())e.flags|=8192;else throw Ns=rc,bh}else e.flags&=-16777217}function mp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!R0(n))if(zp())e.flags|=8192;else throw Ns=rc,bh}function Tc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ro():536870912,e.lanes|=n,Sr|=n)}function Ll(e,n){if(!Ye)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function Ub(e,n,a){var l=n.pendingProps;switch(hh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(n),null;case 1:return yt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Qi(Lt),Ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(hr(n)?$i(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dh())),yt(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?($i(n),d!==null?(yt(n),mp(n,d)):(yt(n),af(n,h,null,l,a))):d?d!==e.memoizedState?($i(n),yt(n),mp(n,d)):(yt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&$i(n),yt(n),af(n,h,e,l,a)),null;case 27:if(Re(n),a=ve.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$i(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}e=ge.current,hr(n)?Ym(n):(e=x0(h,l,a),n.stateNode=e,$i(n))}return yt(n),null;case 5:if(Re(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$i(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}if(d=ge.current,hr(n))Ym(n);else{var y=Uc(ve.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(h,{is:l.is}):y.createElement(h)}}d[Ot]=n,d[Ft]=l;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=d;e:switch(tn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$i(n)}}return yt(n),af(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&$i(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ve.current,hr(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ot]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||u0(e.nodeValue,a)),e||Ta(n,!0)}else e=Uc(e).createTextNode(l),e[Ot]=n,n.stateNode=e}return yt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=hr(n),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ot]=n}else Ts(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),e=!1}else a=dh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Nn(n),n):(Nn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return yt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=hr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ot]=n}else Ts(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),h=!1}else h=dh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Nn(n),n):(Nn(n),null)}return Nn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Tc(n,n.updateQueue),yt(n),null);case 4:return Ae(),e===null&&Af(n.stateNode.containerInfo),yt(n),null;case 10:return Qi(n.type),yt(n),null;case 19:if(le(Ct),l=n.memoizedState,l===null)return yt(n),null;if(h=(n.flags&128)!==0,d=l.rendering,d===null)if(h)Ll(l,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=uc(e),d!==null){for(n.flags|=128,Ll(l,!1),e=d.updateQueue,n.updateQueue=e,Tc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Gm(a,e),a=a.sibling;return ce(Ct,Ct.current&1|2),Ye&&Hi(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&It()>Nc&&(n.flags|=128,h=!0,Ll(l,!1),n.lanes=4194304)}else{if(!h)if(e=uc(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Tc(n,e),Ll(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ye)return yt(n),null}else 2*It()-l.renderingStartTime>Nc&&a!==536870912&&(n.flags|=128,h=!0,Ll(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=It(),e.sibling=null,a=Ct.current,ce(Ct,h?a&1|2:a&1),Ye&&Hi(n,l.treeForkCount),e):(yt(n),null);case 22:case 23:return Nn(n),Ah(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(yt(n),n.subtreeFlags&6&&(n.flags|=8192)):yt(n),a=n.updateQueue,a!==null&&Tc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&le(As),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Qi(Lt),yt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Bb(e,n){switch(hh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Qi(Lt),Ae(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Re(n),null;case 31:if(n.memoizedState!==null){if(Nn(n),n.alternate===null)throw Error(s(340));Ts()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Ts()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return le(Ct),null;case 4:return Ae(),null;case 10:return Qi(n.type),null;case 22:case 23:return Nn(n),Ah(),e!==null&&le(As),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Qi(Lt),null;case 25:return null;default:return null}}function gp(e,n){switch(hh(n),n.tag){case 3:Qi(Lt),Ae();break;case 26:case 27:case 5:Re(n);break;case 4:Ae();break;case 31:n.memoizedState!==null&&Nn(n);break;case 13:Nn(n);break;case 19:le(Ct);break;case 10:Qi(n.type);break;case 22:case 23:Nn(n),Ah(),e!==null&&le(As);break;case 24:Qi(Lt)}}function kl(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==h)}}catch(T){lt(n,n.return,T)}}function Ma(e,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var y=l.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,h=n;var I=a,F=T;try{F()}catch($){lt(h,I,$)}}}l=l.next}while(l!==d)}}catch($){lt(n,n.return,$)}}function pp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{rg(n,a)}catch(l){lt(e,e.return,l)}}}function yp(e,n,a){a.props=Is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){lt(e,n,l)}}function Ul(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){lt(e,n,h)}}function Mi(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){lt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(e,n,h)}else a.current=null}function vp(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){lt(e,e.return,h)}}function sf(e,n,a){try{var l=e.stateNode;l1(l,e.type,a,n),l[Ft]=n}catch(h){lt(e,e.return,h)}}function _p(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ka(e.type)||e.tag===4}function rf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lf(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Jn));else if(l!==4&&(l===27&&ka(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(lf(e,n,a),e=e.sibling;e!==null;)lf(e,n,a),e=e.sibling}function Sc(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&ka(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Sc(e,n,a),e=e.sibling;e!==null;)Sc(e,n,a),e=e.sibling}function bp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);tn(n,l,a),n[Ot]=e,n[Ft]=a}catch(d){lt(e,e.return,d)}}var Zi=!1,Bt=!1,of=!1,xp=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function zb(e,n){if(e=e.containerInfo,Rf=Fc,e=Om(e),eh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var y=0,T=-1,I=-1,F=0,$=0,W=e,Q=null;t:for(;;){for(var K;W!==a||h!==0&&W.nodeType!==3||(T=y+h),W!==d||l!==0&&W.nodeType!==3||(I=y+l),W.nodeType===3&&(y+=W.nodeValue.length),(K=W.firstChild)!==null;)Q=W,W=K;for(;;){if(W===e)break t;if(Q===a&&++F===h&&(T=y),Q===d&&++$===l&&(I=y),(K=W.nextSibling)!==null)break;W=Q,Q=W.parentNode}W=K}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mf={focusedElem:e,selectionRange:a},Fc=!1,Yt=n;Yt!==null;)if(n=Yt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Yt=e;else for(;Yt!==null;){switch(n=Yt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var _e=Is(a.type,h);e=l.getSnapshotBeforeUpdate(_e,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){lt(a,a.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Of(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Of(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Yt=e;break}Yt=n.return}}function Ep(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(e,a),l&4&&kl(5,a);break;case 1:if(Wi(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(y){lt(a,a.return,y)}else{var h=Is(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){lt(a,a.return,y)}}l&64&&pp(a),l&512&&Ul(a,a.return);break;case 3:if(Wi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{rg(e,n)}catch(y){lt(a,a.return,y)}}break;case 27:n===null&&l&4&&bp(a);case 26:case 5:Wi(e,a),n===null&&l&4&&vp(a),l&512&&Ul(a,a.return);break;case 12:Wi(e,a);break;case 31:Wi(e,a),l&4&&wp(e,a);break;case 13:Wi(e,a),l&4&&Ap(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Kb.bind(null,a),g1(e,a))));break;case 22:if(l=a.memoizedState!==null||Zi,!l){n=n!==null&&n.memoizedState!==null||Bt,h=Zi;var d=Bt;Zi=l,(Bt=n)&&!d?ea(e,a,(a.subtreeFlags&8772)!==0):Wi(e,a),Zi=h,Bt=d}break;case 30:break;default:Wi(e,a)}}function Tp(e){var n=e.alternate;n!==null&&(e.alternate=null,Tp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Xs(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,pn=!1;function Ji(e,n,a){for(a=a.child;a!==null;)Sp(e,n,a),a=a.sibling}function Sp(e,n,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(En,a)}catch{}switch(a.tag){case 26:Bt||Mi(a,n),Ji(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Bt||Mi(a,n);var l=bt,h=pn;ka(a.type)&&(bt=a.stateNode,pn=!1),Ji(e,n,a),Yl(a.stateNode),bt=l,pn=h;break;case 5:Bt||Mi(a,n);case 6:if(l=bt,h=pn,bt=null,Ji(e,n,a),bt=l,pn=h,bt!==null)if(pn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(a.stateNode)}catch(d){lt(a,n,d)}else try{bt.removeChild(a.stateNode)}catch(d){lt(a,n,d)}break;case 18:bt!==null&&(pn?(e=bt,p0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Dr(e)):p0(bt,a.stateNode));break;case 4:l=bt,h=pn,bt=a.stateNode.containerInfo,pn=!0,Ji(e,n,a),bt=l,pn=h;break;case 0:case 11:case 14:case 15:Ma(2,a,n),Bt||Ma(4,a,n),Ji(e,n,a);break;case 1:Bt||(Mi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&yp(a,n,l)),Ji(e,n,a);break;case 21:Ji(e,n,a);break;case 22:Bt=(l=Bt)||a.memoizedState!==null,Ji(e,n,a),Bt=l;break;default:Ji(e,n,a)}}function wp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Dr(e)}catch(a){lt(n,n.return,a)}}}function Ap(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Dr(e)}catch(a){lt(n,n.return,a)}}function Pb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new xp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new xp),n;default:throw Error(s(435,e.tag))}}function wc(e,n){var a=Pb(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=$b.bind(null,e,l);l.then(h,h)}})}function yn(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,y=n,T=y;e:for(;T!==null;){switch(T.tag){case 27:if(ka(T.type)){bt=T.stateNode,pn=!1;break e}break;case 5:bt=T.stateNode,pn=!1;break e;case 3:case 4:bt=T.stateNode.containerInfo,pn=!0;break e}T=T.return}if(bt===null)throw Error(s(160));Sp(d,y,h),bt=null,pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Cp(n,e),n=n.sibling}var ai=null;function Cp(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),vn(e),l&4&&(Ma(3,e,e.return),kl(3,e),Ma(5,e,e.return));break;case 1:yn(n,e),vn(e),l&512&&(Bt||a===null||Mi(a,a.return)),l&64&&Zi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ai;if(yn(n,e),vn(e),l&512&&(Bt||a===null||Mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[pi]||d[Ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[Ot]=e,Vt(d),l=d;break e;case"link":var y=C0("link","href",h).get(l+(a.href||""));if(y){for(var T=0;T<y.length;T++)if(d=y[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(T,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(y=C0("meta","content",h).get(l+(a.content||""))){for(T=0;T<y.length;T++)if(d=y[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(T,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ot]=e,Vt(d),l=d}e.stateNode=l}else N0(h,e.type,e.stateNode);else e.stateNode=A0(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?N0(h,e.type,e.stateNode):A0(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&sf(e,e.memoizedProps,a.memoizedProps)}break;case 27:yn(n,e),vn(e),l&512&&(Bt||a===null||Mi(a,a.return)),a!==null&&l&4&&sf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yn(n,e),vn(e),l&512&&(Bt||a===null||Mi(a,a.return)),e.flags&32){h=e.stateNode;try{gn(h,"")}catch(_e){lt(e,e.return,_e)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,sf(e,h,a!==null?a.memoizedProps:h)),l&1024&&(of=!0);break;case 6:if(yn(n,e),vn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(_e){lt(e,e.return,_e)}}break;case 3:if(Pc=null,h=ai,ai=Bc(n.containerInfo),yn(n,e),ai=h,vn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Dr(n.containerInfo)}catch(_e){lt(e,e.return,_e)}of&&(of=!1,Np(e));break;case 4:l=ai,ai=Bc(e.stateNode.containerInfo),yn(n,e),vn(e),ai=l;break;case 12:yn(n,e),vn(e);break;case 31:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 13:yn(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cc=It()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 22:h=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,F=Zi,$=Bt;if(Zi=F||h,Bt=$||I,yn(n,e),Bt=$,Zi=F,vn(e),l&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||I||Zi||Bt||Ds(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){I=a=n;try{if(d=I.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=I.stateNode;var W=I.memoizedProps.style,Q=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(_e){lt(I,I.return,_e)}}}else if(n.tag===6){if(a===null){I=n;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(_e){lt(I,I.return,_e)}}}else if(n.tag===18){if(a===null){I=n;try{var K=I.stateNode;h?y0(K,!0):y0(I.stateNode,!1)}catch(_e){lt(I,I.return,_e)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,wc(e,a))));break;case 19:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 30:break;case 21:break;default:yn(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(_p(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=rf(e);Sc(e,d,h);break;case 5:var y=a.stateNode;a.flags&32&&(gn(y,""),a.flags&=-33);var T=rf(e);Sc(e,T,y);break;case 3:case 4:var I=a.stateNode.containerInfo,F=rf(e);lf(e,F,I);break;default:throw Error(s(161))}}catch($){lt(e,e.return,$)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Np(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Np(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ep(e,n.alternate,n),n=n.sibling}function Ds(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ma(4,n,n.return),Ds(n);break;case 1:Mi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&yp(n,n.return,a),Ds(n);break;case 27:Yl(n.stateNode);case 26:case 5:Mi(n,n.return),Ds(n);break;case 22:n.memoizedState===null&&Ds(n);break;case 30:Ds(n);break;default:Ds(n)}e=e.sibling}}function ea(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:ea(h,d,a),kl(4,d);break;case 1:if(ea(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){lt(l,l.return,F)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)sg(I[h],T)}catch(F){lt(l,l.return,F)}}a&&y&64&&pp(d),Ul(d,d.return);break;case 27:bp(d);case 26:case 5:ea(h,d,a),a&&l===null&&y&4&&vp(d),Ul(d,d.return);break;case 12:ea(h,d,a);break;case 31:ea(h,d,a),a&&y&4&&wp(h,d);break;case 13:ea(h,d,a),a&&y&4&&Ap(h,d);break;case 22:d.memoizedState===null&&ea(h,d,a),Ul(d,d.return);break;case 30:break;default:ea(h,d,a)}n=n.sibling}}function cf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Sl(a))}function uf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e))}function si(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rp(e,n,a,l),n=n.sibling}function Rp(e,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:si(e,n,a,l),h&2048&&kl(9,n);break;case 1:si(e,n,a,l);break;case 3:si(e,n,a,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e)));break;case 12:if(h&2048){si(e,n,a,l),e=n.stateNode;try{var d=n.memoizedProps,y=d.id,T=d.onPostCommit;typeof T=="function"&&T(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){lt(n,n.return,I)}}else si(e,n,a,l);break;case 31:si(e,n,a,l);break;case 13:si(e,n,a,l);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?si(e,n,a,l):Bl(e,n):d._visibility&2?si(e,n,a,l):(d._visibility|=2,xr(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&cf(y,n);break;case 24:si(e,n,a,l),h&2048&&uf(n.alternate,n);break;default:si(e,n,a,l)}}function xr(e,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,y=n,T=a,I=l,F=y.flags;switch(y.tag){case 0:case 11:case 15:xr(d,y,T,I,h),kl(8,y);break;case 23:break;case 22:var $=y.stateNode;y.memoizedState!==null?$._visibility&2?xr(d,y,T,I,h):Bl(d,y):($._visibility|=2,xr(d,y,T,I,h)),h&&F&2048&&cf(y.alternate,y);break;case 24:xr(d,y,T,I,h),h&&F&2048&&uf(y.alternate,y);break;default:xr(d,y,T,I,h)}n=n.sibling}}function Bl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,h=l.flags;switch(l.tag){case 22:Bl(a,l),h&2048&&cf(l.alternate,l);break;case 24:Bl(a,l),h&2048&&uf(l.alternate,l);break;default:Bl(a,l)}n=n.sibling}}var zl=8192;function Er(e,n,a){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)Mp(e,n,a),e=e.sibling}function Mp(e,n,a){switch(e.tag){case 26:Er(e,n,a),e.flags&zl&&e.memoizedState!==null&&C1(a,ai,e.memoizedState,e.memoizedProps);break;case 5:Er(e,n,a);break;case 3:case 4:var l=ai;ai=Bc(e.stateNode.containerInfo),Er(e,n,a),ai=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,Er(e,n,a),zl=l):Er(e,n,a));break;default:Er(e,n,a)}}function Ip(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Pl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Yt=l,Op(l,e)}Ip(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dp(e),e=e.sibling}function Dp(e){switch(e.tag){case 0:case 11:case 15:Pl(e),e.flags&2048&&Ma(9,e,e.return);break;case 3:Pl(e);break;case 12:Pl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ac(e)):Pl(e);break;default:Pl(e)}}function Ac(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Yt=l,Op(l,e)}Ip(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ma(8,n,n.return),Ac(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(n));break;default:Ac(n)}e=e.sibling}}function Op(e,n){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:Ma(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Yt=l;else e:for(a=e;Yt!==null;){l=Yt;var h=l.sibling,d=l.return;if(Tp(l),l===a){Yt=null;break e}if(h!==null){h.return=d,Yt=h;break e}Yt=d}}}var Gb={getCacheForType:function(e){var n=Wt(Lt),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Wt(Lt).controller.signal}},qb=typeof WeakMap=="function"?WeakMap:Map,et=0,dt=null,Be=null,Pe=0,rt=0,Rn=null,Ia=!1,Tr=!1,hf=!1,ta=0,Tt=0,Da=0,Os=0,ff=0,Mn=0,Sr=0,Gl=null,_n=null,df=!1,Cc=0,Vp=0,Nc=1/0,Rc=null,Oa=null,qt=0,Va=null,wr=null,na=0,mf=0,gf=null,jp=null,ql=0,pf=null;function In(){return(et&2)!==0&&Pe!==0?Pe&-Pe:X.T!==null?Ef():Mo()}function Lp(){if(Mn===0)if((Pe&536870912)===0||Ye){var e=rs;rs<<=1,(rs&3932160)===0&&(rs=262144),Mn=e}else Mn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Mn}function bn(e,n,a){(e===dt&&(rt===2||rt===9)||e.cancelPendingCommit!==null)&&(Ar(e,0),ja(e,Pe,Mn,!1)),ls(e,a),((et&2)===0||e!==dt)&&(e===dt&&((et&2)===0&&(Os|=a),Tt===4&&ja(e,Pe,Mn,!1)),Ii(e))}function kp(e,n,a){if((et&6)!==0)throw Error(s(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Kn(e,n),h=l?Qb(e,n):vf(e,n,!0),d=l;do{if(h===0){Tr&&!l&&ja(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!Hb(a)){h=vf(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var T=e;h=Gl;var I=T.current.memoizedState.isDehydrated;if(I&&(Ar(T,y).flags|=256),y=vf(T,y,!1),y!==2){if(hf&&!I){T.errorRecoveryDisabledLanes|=d,Os|=d,h=4;break e}d=_n,_n=h,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){Ar(e,0),ja(e,n,0,!0);break}e:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:ja(l,n,Mn,!Ia);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=Cc+300-It(),10<h)){if(ja(l,n,Mn,!Ia),di(l,0,!0)!==0)break e;na=n,l.timeoutHandle=m0(Up.bind(null,l,a,_n,Rc,df,n,Mn,Os,Sr,Ia,d,"Throttled",-0,0),h);break e}Up(l,a,_n,Rc,df,n,Mn,Os,Sr,Ia,d,null,-0,0)}}break}while(!0);Ii(e)}function Up(e,n,a,l,h,d,y,T,I,F,$,W,Q,K){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Mp(n,d,W);var _e=(d&62914560)===d?Cc-It():(d&4194048)===d?Vp-It():0;if(_e=N1(W,_e),_e!==null){na=d,e.cancelPendingCommit=_e(Qp.bind(null,e,n,d,a,l,h,y,T,I,$,W,null,Q,K)),ja(e,d,y,!F);return}}Qp(e,n,d,a,l,h,y,T,I)}function Hb(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!wn(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ja(e,n,a,l){n&=~ff,n&=~Os,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var d=31-wt(h),y=1<<d;l[d]=-1,h&=~y}a!==0&&os(e,a,n)}function Mc(){return(et&6)===0?(Hl(0),!1):!0}function yf(){if(Be!==null){if(rt===0)var e=Be.return;else e=Be,Fi=Ss=null,Dh(e),pr=null,Al=0,e=Be;for(;e!==null;)gp(e.alternate,e),e=e.return;Be=null}}function Ar(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,u1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),na=0,yf(),dt=e,Be=a=qi(e.current,null),Pe=n,rt=0,Rn=null,Ia=!1,Tr=Kn(e,n),hf=!1,Sr=Mn=ff=Os=Da=Tt=0,_n=Gl=null,df=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-wt(l),d=1<<h;n|=e[h],l&=~d}return ta=n,Zo(),a}function Bp(e,n){Ve=null,X.H=Vl,n===gr||n===sc?(n=tg(),rt=3):n===bh?(n=tg(),rt=4):rt=n===Xh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Rn=n,Be===null&&(Tt=1,_c(e,Bn(n,e.current)))}function zp(){var e=Cn.current;return e===null?!0:(Pe&4194048)===Pe?qn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?e===qn:!1}function Pp(){var e=X.H;return X.H=Vl,e===null?Vl:e}function Gp(){var e=X.A;return X.A=Gb,e}function Ic(){Tt=4,Ia||(Pe&4194048)!==Pe&&Cn.current!==null||(Tr=!0),(Da&134217727)===0&&(Os&134217727)===0||dt===null||ja(dt,Pe,Mn,!1)}function vf(e,n,a){var l=et;et|=2;var h=Pp(),d=Gp();(dt!==e||Pe!==n)&&(Rc=null,Ar(e,n)),n=!1;var y=Tt;e:do try{if(rt!==0&&Be!==null){var T=Be,I=Rn;switch(rt){case 8:yf(),y=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(n=!0);var F=rt;if(rt=0,Rn=null,Cr(e,T,I,F),a&&Tr){y=0;break e}break;default:F=rt,rt=0,Rn=null,Cr(e,T,I,F)}}Fb(),y=Tt;break}catch($){Bp(e,$)}while(!0);return n&&e.shellSuspendCounter++,Fi=Ss=null,et=l,X.H=h,X.A=d,Be===null&&(dt=null,Pe=0,Zo()),y}function Fb(){for(;Be!==null;)qp(Be)}function Qb(e,n){var a=et;et|=2;var l=Pp(),h=Gp();dt!==e||Pe!==n?(Rc=null,Nc=It()+500,Ar(e,n)):Tr=Kn(e,n);e:do try{if(rt!==0&&Be!==null){n=Be;var d=Rn;t:switch(rt){case 1:rt=0,Rn=null,Cr(e,n,d,1);break;case 2:case 9:if(Wm(d)){rt=0,Rn=null,Hp(n);break}n=function(){rt!==2&&rt!==9||dt!==e||(rt=7),Ii(e)},d.then(n,n);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Wm(d)?(rt=0,Rn=null,Hp(n)):(rt=0,Rn=null,Cr(e,n,d,7));break;case 5:var y=null;switch(Be.tag){case 26:y=Be.memoizedState;case 5:case 27:var T=Be;if(y?R0(y):T.stateNode.complete){rt=0,Rn=null;var I=T.sibling;if(I!==null)Be=I;else{var F=T.return;F!==null?(Be=F,Dc(F)):Be=null}break t}}rt=0,Rn=null,Cr(e,n,d,5);break;case 6:rt=0,Rn=null,Cr(e,n,d,6);break;case 8:yf(),Tt=6;break e;default:throw Error(s(462))}}Yb();break}catch($){Bp(e,$)}while(!0);return Fi=Ss=null,X.H=l,X.A=h,et=a,Be!==null?0:(dt=null,Pe=0,Zo(),Tt)}function Yb(){for(;Be!==null&&!as();)qp(Be)}function qp(e){var n=dp(e.alternate,e,ta);e.memoizedProps=e.pendingProps,n===null?Dc(e):Be=n}function Hp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=lp(a,n,n.pendingProps,n.type,void 0,Pe);break;case 11:n=lp(a,n,n.pendingProps,n.type.render,n.ref,Pe);break;case 5:Dh(n);default:gp(a,n),n=Be=Gm(n,ta),n=dp(a,n,ta)}e.memoizedProps=e.pendingProps,n===null?Dc(e):Be=n}function Cr(e,n,a,l){Fi=Ss=null,Dh(n),pr=null,Al=0;var h=n.return;try{if(jb(e,h,n,a,Pe)){Tt=1,_c(e,Bn(a,e.current)),Be=null;return}}catch(d){if(h!==null)throw Be=h,d;Tt=1,_c(e,Bn(a,e.current)),Be=null;return}n.flags&32768?(Ye||l===1?e=!0:Tr||(Pe&536870912)!==0?e=!1:(Ia=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Fp(n,e)):Dc(n)}function Dc(e){var n=e;do{if((n.flags&32768)!==0){Fp(n,Ia);return}e=n.return;var a=Ub(n.alternate,n,ta);if(a!==null){Be=a;return}if(n=n.sibling,n!==null){Be=n;return}Be=n=e}while(n!==null);Tt===0&&(Tt=5)}function Fp(e,n){do{var a=Bb(e.alternate,e);if(a!==null){a.flags&=32767,Be=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Be=e;return}Be=e=a}while(e!==null);Tt=6,Be=null}function Qp(e,n,a,l,h,d,y,T,I){e.cancelPendingCommit=null;do Oc();while(qt!==0);if((et&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=sh,$u(e,a,d,y,T,I),e===dt&&(Be=dt=null,Pe=0),wr=n,Va=e,na=a,mf=d,gf=h,jp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Zb(ui,function(){return Zp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=se.p,se.p=2,y=et,et|=4;try{zb(e,n,a)}finally{et=y,se.p=h,X.T=l}}qt=1,Yp(),Xp(),Kp()}}function Yp(){if(qt===1){qt=0;var e=Va,n=wr,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=se.p;se.p=2;var h=et;et|=4;try{Cp(n,e);var d=Mf,y=Om(e.containerInfo),T=d.focusedElem,I=d.selectionRange;if(y!==T&&T&&T.ownerDocument&&Dm(T.ownerDocument.documentElement,T)){if(I!==null&&eh(T)){var F=I.start,$=I.end;if($===void 0&&($=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min($,T.value.length);else{var W=T.ownerDocument||document,Q=W&&W.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),_e=T.textContent.length,Ce=Math.min(I.start,_e),ht=I.end===void 0?Ce:Math.min(I.end,_e);!K.extend&&Ce>ht&&(y=ht,ht=Ce,Ce=y);var G=Im(T,Ce),L=Im(T,ht);if(G&&L&&(K.rangeCount!==1||K.anchorNode!==G.node||K.anchorOffset!==G.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=W.createRange();H.setStart(G.node,G.offset),K.removeAllRanges(),Ce>ht?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(W=[],K=T;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var J=W[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Fc=!!Rf,Mf=Rf=null}finally{et=h,se.p=l,X.T=a}}e.current=n,qt=2}}function Xp(){if(qt===2){qt=0;var e=Va,n=wr,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=se.p;se.p=2;var h=et;et|=4;try{Ep(e,n.alternate,n)}finally{et=h,se.p=l,X.T=a}}qt=3}}function Kp(){if(qt===4||qt===3){qt=0,ua();var e=Va,n=wr,a=na,l=jp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qt=5:(qt=0,wr=Va=null,$p(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Oa=null),Bi(a),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(En,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,h=se.p,se.p=2,X.T=null;try{for(var d=e.onRecoverableError,y=0;y<l.length;y++){var T=l[y];d(T.value,{componentStack:T.stack})}}finally{X.T=n,se.p=h}}(na&3)!==0&&Oc(),Ii(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===pf?ql++:(ql=0,pf=e):ql=0,Hl(0)}}function $p(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Sl(n)))}function Oc(){return Yp(),Xp(),Kp(),Zp()}function Zp(){if(qt!==5)return!1;var e=Va,n=mf;mf=0;var a=Bi(na),l=X.T,h=se.p;try{se.p=32>a?32:a,X.T=null,a=gf,gf=null;var d=Va,y=na;if(qt=0,wr=Va=null,na=0,(et&6)!==0)throw Error(s(331));var T=et;if(et|=4,Dp(d.current),Rp(d,d.current,y,a),et=T,Hl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(En,d)}catch{}return!0}finally{se.p=h,X.T=l,$p(e,n)}}function Jp(e,n,a){n=Bn(a,n),n=Yh(e.stateNode,n,2),e=Ca(e,n,2),e!==null&&(ls(e,2),Ii(e))}function lt(e,n,a){if(e.tag===3)Jp(e,e,a);else for(;n!==null;){if(n.tag===3){Jp(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Oa===null||!Oa.has(l))){e=Bn(a,e),a=Wg(2),l=Ca(n,a,2),l!==null&&(ep(a,l,n,e),ls(l,2),Ii(l));break}}n=n.return}}function _f(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new qb;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(hf=!0,h.add(a),e=Xb.bind(null,e,n,a),n.then(e,e))}function Xb(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,dt===e&&(Pe&a)===a&&(Tt===4||Tt===3&&(Pe&62914560)===Pe&&300>It()-Cc?(et&2)===0&&Ar(e,0):ff|=a,Sr===Pe&&(Sr=0)),Ii(e)}function Wp(e,n){n===0&&(n=Ro()),e=xs(e,n),e!==null&&(ls(e,n),Ii(e))}function Kb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Wp(e,a)}function $b(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),Wp(e,a)}function Zb(e,n){return $e(e,n)}var Vc=null,Nr=null,bf=!1,jc=!1,xf=!1,La=0;function Ii(e){e!==Nr&&e.next===null&&(Nr===null?Vc=Nr=e:Nr=Nr.next=e),jc=!0,bf||(bf=!0,Wb())}function Hl(e,n){if(!xf&&jc){xf=!0;do for(var a=!1,l=Vc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var y=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-wt(42|e)+1)-1,d&=h&~(y&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,i0(l,d))}else d=Pe,d=di(l,l===dt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Kn(l,d)||(a=!0,i0(l,d));l=l.next}while(a);xf=!1}}function Jb(){e0()}function e0(){jc=bf=!1;var e=0;La!==0&&c1()&&(e=La);for(var n=It(),a=null,l=Vc;l!==null;){var h=l.next,d=t0(l,n);d===0?(l.next=null,a===null?Vc=h:a.next=h,h===null&&(Nr=a)):(a=l,(e!==0||(d&3)!==0)&&(jc=!0)),l=h}qt!==0&&qt!==5||Hl(e),La!==0&&(La=0)}function t0(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-wt(d),T=1<<y,I=h[y];I===-1?((T&a)===0||(T&l)!==0)&&(h[y]=Ku(T,n)):I<=n&&(e.expiredLanes|=T),d&=~T}if(n=dt,a=Pe,a=di(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(rt===2||rt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&hn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Kn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&hn(l),Bi(a)){case 2:case 8:a=it;break;case 32:a=ui;break;case 268435456:a=ss;break;default:a=ui}return l=n0.bind(null,e),a=$e(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&hn(l),e.callbackPriority=2,e.callbackNode=null,2}function n0(e,n){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Oc()&&e.callbackNode!==a)return null;var l=Pe;return l=di(e,e===dt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(kp(e,l,n),t0(e,It()),e.callbackNode!=null&&e.callbackNode===a?n0.bind(null,e):null)}function i0(e,n){if(Oc())return null;kp(e,n,!0)}function Wb(){h1(function(){(et&6)!==0?$e(ci,Jb):e0()})}function Ef(){if(La===0){var e=dr;e===0&&(e=hi,hi<<=1,(hi&261888)===0&&(hi=256)),La=e}return La}function a0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Js(""+e)}function s0(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function e1(e,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var d=a0((h[Ft]||null).action),y=l.submitter;y&&(n=(n=y[Ft]||null)?a0(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var T=new Si("action","action",null,l,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(La!==0){var I=y?s0(h,y):new FormData(h);Ph(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=y?s0(h,y):new FormData(h),Ph(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var Tf=0;Tf<ah.length;Tf++){var Sf=ah[Tf],t1=Sf.toLowerCase(),n1=Sf[0].toUpperCase()+Sf.slice(1);ii(t1,"on"+n1)}ii(Lm,"onAnimationEnd"),ii(km,"onAnimationIteration"),ii(Um,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(vb,"onTransitionRun"),ii(_b,"onTransitionStart"),ii(bb,"onTransitionCancel"),ii(Bm,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function r0(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var y=l.length-1;0<=y;y--){var T=l[y],I=T.instance,F=T.currentTarget;if(T=T.listener,I!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=F;try{d(h)}catch($){$o($)}h.currentTarget=null,d=I}else for(y=0;y<l.length;y++){if(T=l[y],I=T.instance,F=T.currentTarget,T=T.listener,I!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=F;try{d(h)}catch($){$o($)}h.currentTarget=null,d=I}}}}function ze(e,n){var a=n[Ys];a===void 0&&(a=n[Ys]=new Set);var l=e+"__bubble";a.has(l)||(l0(n,e,2,!1),a.add(l))}function wf(e,n,a){var l=0;n&&(l|=4),l0(a,e,l,n)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Af(e){if(!e[Lc]){e[Lc]=!0,il.forEach(function(a){a!=="selectionchange"&&(i1.has(a)||wf(a,!1,e),wf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Lc]||(n[Lc]=!0,wf("selectionchange",!1,n))}}function l0(e,n,a,l){switch(L0(n)){case 2:var h=I1;break;case 8:h=D1;break;default:h=Pf}a=h.bind(null,n,a,e),h=void 0,!ds||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Cf(e,n,a,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var T=l.stateNode.containerInfo;if(T===h)break;if(y===4)for(y=l.return;y!==null;){var I=y.tag;if((I===3||I===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;T!==null;){if(y=yi(T),y===null)return;if(I=y.tag,I===5||I===6||I===26||I===27){l=d=y;continue e}T=T.parentNode}}l=l.return}ya(function(){var F=d,$=jn(a),W=[];e:{var Q=zm.get(e);if(Q!==void 0){var K=Si,_e=e;switch(e){case"keypress":if(gs(a)===0)break e;case"keydown":case"keyup":K=Yo;break;case"focusin":_e="focus",K=ys;break;case"focusout":_e="blur",K=ys;break;case"beforeblur":case"afterblur":K=ys;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=g;break;case Lm:case km:case Um:K=zo;break;case Bm:K=w;break;case"scroll":case"scrollend":K=gl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Po;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Gi;break;case"toggle":case"beforetoggle":K=Oe}var Ce=(n&4)!==0,ht=!Ce&&(e==="scroll"||e==="scrollend"),G=Ce?Q!==null?Q+"Capture":null:Q;Ce=[];for(var L=F,H;L!==null;){var J=L;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||G===null||(J=Wn(L,G),J!=null&&Ce.push(Ql(L,J,H))),ht)break;L=L.return}0<Ce.length&&(Q=new K(Q,_e,null,a,$),W.push({event:Q,listeners:Ce}))}}if((n&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&a!==fl&&(_e=a.relatedTarget||a.fromElement)&&(yi(_e)||_e[gi]))break e;if((K||Q)&&(Q=$.window===$?$:(Q=$.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(_e=a.relatedTarget||a.toElement,K=F,_e=_e?yi(_e):null,_e!==null&&(ht=u(_e),Ce=_e.tag,_e!==ht||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(K=null,_e=F),K!==_e)){if(Ce=pl,J="onMouseLeave",G="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=Gi,J="onPointerLeave",G="onPointerEnter",L="pointer"),ht=K==null?Q:Tn(K),H=_e==null?Q:Tn(_e),Q=new Ce(J,L+"leave",K,a,$),Q.target=ht,Q.relatedTarget=H,J=null,yi($)===F&&(Ce=new Ce(G,L+"enter",_e,a,$),Ce.target=H,Ce.relatedTarget=ht,J=Ce),ht=J,K&&_e)t:{for(Ce=a1,G=K,L=_e,H=0,J=G;J;J=Ce(J))H++;J=0;for(var Te=L;Te;Te=Ce(Te))J++;for(;0<H-J;)G=Ce(G),H--;for(;0<J-H;)L=Ce(L),J--;for(;H--;){if(G===L||L!==null&&G===L.alternate){Ce=G;break t}G=Ce(G),L=Ce(L)}Ce=null}else Ce=null;K!==null&&o0(W,Q,K,Ce,!1),_e!==null&&ht!==null&&o0(W,ht,_e,Ce,!0)}}e:{if(Q=F?Tn(F):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var Ze=wm;else if(Tm(Q))if(Am)Ze=gb;else{Ze=db;var xe=fb}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&Zs(F.elementType)&&(Ze=wm):Ze=mb;if(Ze&&(Ze=Ze(e,F))){Sm(W,Ze,a,$);break e}xe&&xe(e,Q,F),e==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&cl(Q,"number",Q.value)}switch(xe=F?Tn(F):window,e){case"focusin":(Tm(xe)||xe.contentEditable==="true")&&(sr=xe,th=F,xl=null);break;case"focusout":xl=th=sr=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Vm(W,a,$);break;case"selectionchange":if(yb)break;case"keydown":case"keyup":Vm(W,a,$)}var je;if(We)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else ar?vs(e,a)&&(Ge="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(Ci&&a.locale!=="ko"&&(ar||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&ar&&(je=ml()):(Ti=$,dl="value"in Ti?Ti.value:Ti.textContent,ar=!0)),xe=kc(F,Ge),0<xe.length&&(Ge=new Ai(Ge,e,null,a,$),W.push({event:Ge,listeners:xe}),je?Ge.data=je:(je=ir(a),je!==null&&(Ge.data=je)))),(je=kn?ob(e,a):cb(e,a))&&(Ge=kc(F,"onBeforeInput"),0<Ge.length&&(xe=new Ai("onBeforeInput","beforeinput",null,a,$),W.push({event:xe,listeners:Ge}),xe.data=je)),e1(W,e,F,a,$)}r0(W,n)})}function Ql(e,n,a){return{instance:e,listener:n,currentTarget:a}}function kc(e,n){for(var a=n+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Wn(e,a),h!=null&&l.unshift(Ql(e,h,d)),h=Wn(e,n),h!=null&&l.push(Ql(e,h,d))),e.tag===3)return l;e=e.return}return[]}function a1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function o0(e,n,a,l,h){for(var d=n._reactName,y=[];a!==null&&a!==l;){var T=a,I=T.alternate,F=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||F===null||(I=F,h?(F=Wn(a,d),F!=null&&y.unshift(Ql(a,F,I))):h||(F=Wn(a,d),F!=null&&y.push(Ql(a,F,I)))),a=a.return}y.length!==0&&e.push({event:n,listeners:y})}var s1=/\r\n?/g,r1=/\u0000|\uFFFD/g;function c0(e){return(typeof e=="string"?e:""+e).replace(s1,`
`).replace(r1,"")}function u0(e,n){return n=c0(n),c0(e)===n}function ut(e,n,a,l,h,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||gn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&gn(e,""+l);break;case"className":Sn(e,"class",l);break;case"tabIndex":Sn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(e,a,l);break;case"style":hl(e,l,d);break;case"data":if(n!=="object"){Sn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Js(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&ut(e,n,"name",h.name,h,null),ut(e,n,"formEncType",h.formEncType,h,null),ut(e,n,"formMethod",h.formMethod,h,null),ut(e,n,"formTarget",h.formTarget,h,null)):(ut(e,n,"encType",h.encType,h,null),ut(e,n,"method",h.method,h,null),ut(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Js(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"onScroll":l!=null&&ze("scroll",e);break;case"onScrollEnd":l!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Js(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ze("beforetoggle",e),ze("toggle",e),Ks(e,"popover",l);break;case"xlinkActuate":jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ks(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ko.get(a)||a,Ks(e,a,l))}}function Nf(e,n,a,l,h,d){switch(a){case"style":hl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?gn(e,l):(typeof l=="number"||typeof l=="bigint")&&gn(e,""+l);break;case"onScroll":l!=null&&ze("scroll",e);break;case"onScrollEnd":l!=null&&ze("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!al.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=e[Ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,h);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ks(e,a,l)}}}function tn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ut(e,n,d,y,a,null)}}h&&ut(e,n,"srcSet",a.srcSet,a,null),l&&ut(e,n,"src",a.src,a,null);return;case"input":ze("invalid",e);var T=d=y=h=null,I=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":y=$;break;case"checked":I=$;break;case"defaultChecked":F=$;break;case"value":d=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,n));break;default:ut(e,n,l,$,a,null)}}Vo(e,d,T,I,F,y,h,!1);return;case"select":ze("invalid",e),l=y=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":y=T;break;case"multiple":l=T;default:ut(e,n,h,T,a,null)}n=d,a=y,e.multiple=!!l,n!=null?da(e,!!l,n,!1):a!=null&&da(e,!!l,a,!0);return;case"textarea":ze("invalid",e),d=h=l=null;for(y in a)if(a.hasOwnProperty(y)&&(T=a[y],T!=null))switch(y){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:ut(e,n,y,T,a,null)}ma(e,l,h,d);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ut(e,n,I,l,a,null)}return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(l=0;l<Fl.length;l++)ze(Fl[l],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ut(e,n,F,l,a,null)}return;default:if(Zs(n)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&Nf(e,n,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ut(e,n,T,l,a,null))}function l1(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,T=null,I=null,F=null,$=null;for(K in a){var W=a[K];if(a.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=W;default:l.hasOwnProperty(K)||ut(e,n,K,null,l,W)}}for(var Q in l){var K=l[Q];if(W=a[Q],l.hasOwnProperty(Q)&&(K!=null||W!=null))switch(Q){case"type":d=K;break;case"name":h=K;break;case"checked":F=K;break;case"defaultChecked":$=K;break;case"value":y=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==W&&ut(e,n,Q,K,l,W)}}$s(e,y,T,I,F,$,d,h);return;case"select":K=y=T=Q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":K=I;default:l.hasOwnProperty(d)||ut(e,n,d,null,l,I)}for(h in l)if(d=l[h],I=a[h],l.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":Q=d;break;case"defaultValue":T=d;break;case"multiple":y=d;default:d!==I&&ut(e,n,h,d,l,I)}n=T,a=y,l=K,Q!=null?da(e,!!a,Q,!1):!!l!=!!a&&(n!=null?da(e,!!a,n,!0):da(e,!!a,a?[]:"",!1));return;case"textarea":K=Q=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ut(e,n,T,null,l,h)}for(y in l)if(h=l[y],d=a[y],l.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":Q=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ut(e,n,y,h,l,d)}jo(e,Q,K);return;case"option":for(var _e in a)if(Q=a[_e],a.hasOwnProperty(_e)&&Q!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:ut(e,n,_e,null,l,Q)}for(I in l)if(Q=l[I],K=a[I],l.hasOwnProperty(I)&&Q!==K&&(Q!=null||K!=null))switch(I){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ut(e,n,I,Q,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)Q=a[Ce],a.hasOwnProperty(Ce)&&Q!=null&&!l.hasOwnProperty(Ce)&&ut(e,n,Ce,null,l,Q);for(F in l)if(Q=l[F],K=a[F],l.hasOwnProperty(F)&&Q!==K&&(Q!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:ut(e,n,F,Q,l,K)}return;default:if(Zs(n)){for(var ht in a)Q=a[ht],a.hasOwnProperty(ht)&&Q!==void 0&&!l.hasOwnProperty(ht)&&Nf(e,n,ht,void 0,l,Q);for($ in l)Q=l[$],K=a[$],!l.hasOwnProperty($)||Q===K||Q===void 0&&K===void 0||Nf(e,n,$,Q,l,K);return}}for(var G in a)Q=a[G],a.hasOwnProperty(G)&&Q!=null&&!l.hasOwnProperty(G)&&ut(e,n,G,null,l,Q);for(W in l)Q=l[W],K=a[W],!l.hasOwnProperty(W)||Q===K||Q==null&&K==null||ut(e,n,W,Q,l,K)}function h0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,y=h.initiatorType,T=h.duration;if(d&&T&&h0(y)){for(y=0,T=h.responseEnd,l+=1;l<a.length;l++){var I=a[l],F=I.startTime;if(F>T)break;var $=I.transferSize,W=I.initiatorType;$&&h0(W)&&(I=I.responseEnd,y+=$*(I<T?1:(T-F)/(I-F)))}if(--l,n+=8*(d+y)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Rf=null,Mf=null;function Uc(e){return e.nodeType===9?e:e.ownerDocument}function f0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function If(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Df=null;function c1(){var e=window.event;return e&&e.type==="popstate"?e===Df?!1:(Df=e,!0):(Df=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,u1=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,h1=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(e){return g0.resolve(null).then(e).catch(f1)}:m0;function f1(e){setTimeout(function(){throw e})}function ka(e){return e==="head"}function p0(e,n){var a=n,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(h),Dr(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Yl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Yl(a);for(var d=a.firstChild;d;){var y=d.nextSibling,T=d.nodeName;d[pi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&Yl(e.ownerDocument.body);a=h}while(a);Dr(n)}function y0(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Of(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Of(a),Xs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function d1(e,n,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[pi])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function m1(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Hn(e.nextSibling),e===null))return null;return e}function v0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Hn(e.nextSibling),e===null))return null;return e}function Vf(e){return e.data==="$?"||e.data==="$~"}function jf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function g1(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Hn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Lf=null;function _0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Hn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function b0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function x0(e,n,a){switch(n=Uc(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Yl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Xs(e)}var Fn=new Map,E0=new Set;function Bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ia=se.d;se.d={f:p1,r:y1,D:v1,C:_1,L:b1,m:x1,X:T1,S:E1,M:S1};function p1(){var e=ia.f(),n=Mc();return e||n}function y1(e){var n=Vn(e);n!==null&&n.tag===5&&n.type==="form"?Bg(n):ia.r(e)}var Rr=typeof document>"u"?null:document;function T0(e,n,a){var l=Rr;if(l&&typeof n=="string"&&n){var h=mn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),E0.has(h)||(E0.add(h),e={rel:e,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function v1(e){ia.D(e),T0("dns-prefetch",e,null)}function _1(e,n){ia.C(e,n),T0("preconnect",e,n)}function b1(e,n,a){ia.L(e,n,a);var l=Rr;if(l&&e&&n){var h='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+mn(a.imageSizes)+'"]')):h+='[href="'+mn(e)+'"]';var d=h;switch(n){case"style":d=Mr(e);break;case"script":d=Ir(e)}Fn.has(d)||(e=E({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Fn.set(d,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(Xl(d))||n==="script"&&l.querySelector(Kl(d))||(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function x1(e,n){ia.m(e,n);var a=Rr;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+mn(l)+'"][href="'+mn(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ir(e)}if(!Fn.has(d)&&(e=E({rel:"modulepreload",href:e},n),Fn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Kl(d)))return}l=a.createElement("link"),tn(l,"link",e),Vt(l),a.head.appendChild(l)}}}function E1(e,n,a){ia.S(e,n,a);var l=Rr;if(l&&e){var h=vi(l).hoistableStyles,d=Mr(e);n=n||"default";var y=h.get(d);if(!y){var T={loading:0,preload:null};if(y=l.querySelector(Xl(d)))T.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Fn.get(d))&&kf(e,a);var I=y=l.createElement("link");Vt(I),tn(I,"link",e),I._p=new Promise(function(F,$){I.onload=F,I.onerror=$}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,zc(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:T},h.set(d,y)}}}function T1(e,n){ia.X(e,n);var a=Rr;if(a&&e){var l=vi(a).hoistableScripts,h=Ir(e),d=l.get(h);d||(d=a.querySelector(Kl(h)),d||(e=E({src:e,async:!0},n),(n=Fn.get(h))&&Uf(e,n),d=a.createElement("script"),Vt(d),tn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function S1(e,n){ia.M(e,n);var a=Rr;if(a&&e){var l=vi(a).hoistableScripts,h=Ir(e),d=l.get(h);d||(d=a.querySelector(Kl(h)),d||(e=E({src:e,async:!0,type:"module"},n),(n=Fn.get(h))&&Uf(e,n),d=a.createElement("script"),Vt(d),tn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function S0(e,n,a,l){var h=(h=ve.current)?Bc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Mr(a.href),a=vi(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Mr(a.href);var d=vi(h).hoistableStyles,y=d.get(e);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=h.querySelector(Xl(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Fn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(e,a),d||w1(h,e,a,y.state))),n&&l===null)throw Error(s(528,""));return y}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ir(a),a=vi(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Mr(e){return'href="'+mn(e)+'"'}function Xl(e){return'link[rel="stylesheet"]['+e+"]"}function w0(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function w1(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),tn(n,"link",a),Vt(n),e.head.appendChild(n))}function Ir(e){return'[src="'+mn(e)+'"]'}function Kl(e){return"script[async]"+e}function A0(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+mn(a.href)+'"]');if(l)return n.instance=l,Vt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Vt(l),tn(l,"style",h),zc(l,a.precedence,e),n.instance=l;case"stylesheet":h=Mr(a.href);var d=e.querySelector(Xl(h));if(d)return n.state.loading|=4,n.instance=d,Vt(d),d;l=w0(a),(h=Fn.get(h))&&kf(l,h),d=(e.ownerDocument||e).createElement("link"),Vt(d);var y=d;return y._p=new Promise(function(T,I){y.onload=T,y.onerror=I}),tn(d,"link",l),n.state.loading|=4,zc(d,a.precedence,e),n.instance=d;case"script":return d=Ir(a.src),(h=e.querySelector(Kl(d)))?(n.instance=h,Vt(h),h):(l=a,(h=Fn.get(d))&&(l=E({},a),Uf(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),Vt(h),tn(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,zc(l,a.precedence,e));return n.instance}function zc(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,y=0;y<l.length;y++){var T=l[y];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function kf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Uf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Pc=null;function C0(e,n,a){if(Pc===null){var l=new Map,h=Pc=new Map;h.set(a,l)}else h=Pc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[pi]||d[Ot]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=e+y;var T=l.get(y);T?T.push(d):l.set(y,[d])}}return l}function N0(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function A1(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function R0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function C1(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Mr(l.href),d=n.querySelector(Xl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Gc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Vt(d);return}d=n.ownerDocument||n,l=w0(l),(h=Fn.get(h))&&kf(l,h),d=d.createElement("link"),Vt(d);var y=d;y._p=new Promise(function(T,I){y.onload=T,y.onerror=I}),tn(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Gc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Bf=0;function N1(e,n){return e.stylesheets&&e.count===0&&Hc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Hc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Bf===0&&(Bf=62500*o1());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Hc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Bf?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qc=null;function Hc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qc=new Map,n.forEach(R1,e),qc=null,Gc.call(e))}function R1(e,n){if(!(n.state.loading&4)){var a=qc.get(e);if(a)var l=a.get(null);else{a=new Map,qc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}h=n.instance,y=h.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,h),a.set(y,h),this.count++,l=Gc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var $l={$$typeof:ne,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function M1(e,n,a,l,h,d,y,T,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function M0(e,n,a,l,h,d,y,T,I,F,$,W){return e=new M1(e,n,a,y,I,F,$,W,T),n=1,d===!0&&(n|=24),d=An(3,null,null,n),e.current=d,d.stateNode=e,n=yh(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},xh(d),e}function I0(e){return e?(e=or,e):or}function D0(e,n,a,l,h,d){h=I0(h),l.context===null?l.context=h:l.pendingContext=h,l=Aa(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ca(e,l,n),a!==null&&(bn(a,e,n),Nl(a,e,n))}function O0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function zf(e,n){O0(e,n),(e=e.alternate)&&O0(e,n)}function V0(e){if(e.tag===13||e.tag===31){var n=xs(e,67108864);n!==null&&bn(n,e,67108864),zf(e,67108864)}}function j0(e){if(e.tag===13||e.tag===31){var n=In();n=cs(n);var a=xs(e,n);a!==null&&bn(a,e,n),zf(e,n)}}var Fc=!0;function I1(e,n,a,l){var h=X.T;X.T=null;var d=se.p;try{se.p=2,Pf(e,n,a,l)}finally{se.p=d,X.T=h}}function D1(e,n,a,l){var h=X.T;X.T=null;var d=se.p;try{se.p=8,Pf(e,n,a,l)}finally{se.p=d,X.T=h}}function Pf(e,n,a,l){if(Fc){var h=Gf(l);if(h===null)Cf(e,n,l,Qc,a),k0(e,l);else if(V1(h,e,n,a,l))l.stopPropagation();else if(k0(e,l),n&4&&-1<O1.indexOf(e)){for(;h!==null;){var d=Vn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=fi(d.pendingLanes);if(y!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var I=1<<31-wt(y);T.entanglements[1]|=I,y&=~I}Ii(d),(et&6)===0&&(Nc=It()+500,Hl(0))}}break;case 31:case 13:T=xs(d,2),T!==null&&bn(T,d,2),Mc(),zf(d,2)}if(d=Gf(l),d===null&&Cf(e,n,l,Qc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Cf(e,n,l,null,a)}}function Gf(e){return e=jn(e),qf(e)}var Qc=null;function qf(e){if(Qc=null,e=yi(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Qc=e,null}function L0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case ci:return 2;case it:return 8;case ui:case Hs:return 32;case ss:return 268435456;default:return 32}default:return 32}}var Hf=!1,Ua=null,Ba=null,za=null,Zl=new Map,Jl=new Map,Pa=[],O1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k0(e,n){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(n.pointerId)}}function Wl(e,n,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Vn(n),n!==null&&V0(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function V1(e,n,a,l,h){switch(n){case"focusin":return Ua=Wl(Ua,e,n,a,l,h),!0;case"dragenter":return Ba=Wl(Ba,e,n,a,l,h),!0;case"mouseover":return za=Wl(za,e,n,a,l,h),!0;case"pointerover":var d=h.pointerId;return Zl.set(d,Wl(Zl.get(d)||null,e,n,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Jl.set(d,Wl(Jl.get(d)||null,e,n,a,l,h)),!0}return!1}function U0(e){var n=yi(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,$n(e.priority,function(){j0(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,$n(e.priority,function(){j0(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Gf(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);fl=l,a.target.dispatchEvent(l),fl=null}else return n=Vn(a),n!==null&&V0(n),e.blockedOn=a,!1;n.shift()}return!0}function B0(e,n,a){Yc(e)&&a.delete(n)}function j1(){Hf=!1,Ua!==null&&Yc(Ua)&&(Ua=null),Ba!==null&&Yc(Ba)&&(Ba=null),za!==null&&Yc(za)&&(za=null),Zl.forEach(B0),Jl.forEach(B0)}function Xc(e,n){e.blockedOn===n&&(e.blockedOn=null,Hf||(Hf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,j1)))}var Kc=null;function z0(e){Kc!==e&&(Kc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Kc===e&&(Kc=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(qf(l||a)===null)continue;break}var d=Vn(a);d!==null&&(e.splice(n,3),n-=3,Ph(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Dr(e){function n(I){return Xc(I,e)}Ua!==null&&Xc(Ua,e),Ba!==null&&Xc(Ba,e),za!==null&&Xc(za,e),Zl.forEach(n),Jl.forEach(n);for(var a=0;a<Pa.length;a++){var l=Pa[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Pa.length&&(a=Pa[0],a.blockedOn===null);)U0(a),a.blockedOn===null&&Pa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],y=h[Ft]||null;if(typeof d=="function")y||z0(a);else if(y){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[Ft]||null)T=y.formAction;else if(qf(h)!==null)continue}else T=y.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),z0(a)}}}function P0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Ff(e){this._internalRoot=e}$c.prototype.render=Ff.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=In();D0(a,l,e,n,null,null)},$c.prototype.unmount=Ff.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;D0(e.current,2,null,e,null,null),Mc(),n[gi]=null}};function $c(e){this._internalRoot=e}$c.prototype.unstable_scheduleHydration=function(e){if(e){var n=Mo();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Pa.length&&n!==0&&n<Pa[a].priority;a++);Pa.splice(a,0,e),a===0&&U0(e)}};var G0=t.version;if(G0!=="19.2.1")throw Error(s(527,G0,"19.2.1"));se.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var L1={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{En=Zc.inject(L1),$t=Zc}catch{}}return eo.createRoot=function(e,n){if(!o(e))throw Error(s(299));var a=!1,l="",h=Kg,d=$g,y=Zg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=M0(e,1,!1,null,null,a,l,null,h,d,y,P0),e[gi]=n.current,Af(e),new Ff(n)},eo.hydrateRoot=function(e,n,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=Kg,y=$g,T=Zg,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),n=M0(e,1,!0,n,a??null,l,h,I,d,y,T,P0),n.context=I0(null),a=n.current,l=In(),l=cs(l),h=Aa(l),h.callback=null,Ca(a,h,l),a=l,n.current.lanes=a,ls(n,a),Ii(n),e[gi]=n.current,Af(e),new $c(n)},eo.version="19.2.1",eo}var Q0;function q1(){if(Q0)return Qf.exports;Q0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Qf.exports=G1(),Qf.exports}var H1=q1();function F1(r,t){let i;try{i=r()}catch{return}return{getItem:o=>{var u;const f=v=>v===null?null:JSON.parse(v,void 0),m=(u=i.getItem(o))!=null?u:null;return m instanceof Promise?m.then(f):f(m)},setItem:(o,u)=>i.setItem(o,JSON.stringify(u,void 0)),removeItem:o=>i.removeItem(o)}}const cd=r=>t=>{try{const i=r(t);return i instanceof Promise?i:{then(s){return cd(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return cd(s)(i)}}}},Q1=(r,t)=>(i,s,o)=>{let u={storage:F1(()=>localStorage),partialize:P=>P,version:0,merge:(P,j)=>({...j,...P}),...t},f=!1;const m=new Set,v=new Set;let b=u.storage;if(!b)return r((...P)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),i(...P)},s,o);const x=()=>{const P=u.partialize({...s()});return b.setItem(u.name,{state:P,version:u.version})},E=o.setState;o.setState=(P,j)=>(E(P,j),x());const C=r((...P)=>(i(...P),x()),s,o);o.getInitialState=()=>C;let z;const B=()=>{var P,j;if(!b)return;f=!1,m.forEach(Z=>{var ne;return Z((ne=s())!=null?ne:C)});const O=((j=u.onRehydrateStorage)==null?void 0:j.call(u,(P=s())!=null?P:C))||void 0;return cd(b.getItem.bind(b))(u.name).then(Z=>{if(Z)if(typeof Z.version=="number"&&Z.version!==u.version){if(u.migrate){const ne=u.migrate(Z.state,Z.version);return ne instanceof Promise?ne.then(oe=>[!0,oe]):[!0,ne]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,Z.state];return[!1,void 0]}).then(Z=>{var ne;const[oe,fe]=Z;if(z=u.merge(fe,(ne=s())!=null?ne:C),i(z,!0),oe)return x()}).then(()=>{O?.(z,void 0),z=s(),f=!0,v.forEach(Z=>Z(z))}).catch(Z=>{O?.(void 0,Z)})};return o.persist={setOptions:P=>{u={...u,...P},P.storage&&(b=P.storage)},clearStorage:()=>{b?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>B(),hasHydrated:()=>f,onHydrate:P=>(m.add(P),()=>{m.delete(P)}),onFinishHydration:P=>(v.add(P),()=>{v.delete(P)})},u.skipHydration||B(),z||C},mv=Q1,nn=[];for(let r=0;r<256;++r)nn.push((r+256).toString(16).slice(1));function Y1(r,t=0){return(nn[r[t+0]]+nn[r[t+1]]+nn[r[t+2]]+nn[r[t+3]]+"-"+nn[r[t+4]]+nn[r[t+5]]+"-"+nn[r[t+6]]+nn[r[t+7]]+"-"+nn[r[t+8]]+nn[r[t+9]]+"-"+nn[r[t+10]]+nn[r[t+11]]+nn[r[t+12]]+nn[r[t+13]]+nn[r[t+14]]+nn[r[t+15]]).toLowerCase()}let Kf;const X1=new Uint8Array(16);function K1(){if(!Kf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Kf=crypto.getRandomValues.bind(crypto)}return Kf(X1)}const $1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y0={randomUUID:$1};function Z1(r,t,i){r=r||{};const s=r.random??r.rng?.()??K1();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Y1(s)}function Jc(r,t,i){return Y0.randomUUID&&!r?Y0.randomUUID():Z1(r)}const pe={COLUMNS:8,ROWS:16},$f={1:["red","blue","green","yellow","purple"],6:["red","blue","green","yellow","purple","cyan"],11:["red","blue","green","yellow","purple","cyan","pink"],16:["red","blue","green","yellow","purple","cyan","pink","orange"]},Ld={red:"#ff4757",blue:"#3742fa",green:"#2ed573",yellow:"#ffa502",purple:"#8854d0",cyan:"#00d2d3",pink:"#ff6b81",orange:"#ff7f50",rainbow:"linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff)"},J1={red:"#D55E00",blue:"#0072B2",green:"#009E73",yellow:"#F0E442",purple:"#CC79A7",cyan:"#56B4E9",pink:"#E69F00",orange:"#999999",rainbow:"linear-gradient(45deg, #D55E00, #0072B2, #009E73, #F0E442)"},W1={red:"striped",blue:"dotted",green:"crosshatch",yellow:"solid",purple:"diagonal",cyan:"grid",pink:"waves",orange:"circles",rainbow:"rainbow"},gv={normal:{name:"",icon:"",description:" ",baseChance:0,minLevel:1},bomb:{name:"",icon:"",description:" 3x3  ",baseChance:.08,minLevel:3,color:"#ff6b6b"},lightning:{name:"",icon:"",description:"    ",baseChance:.04,minLevel:5,color:"#ffd93d"},cross:{name:"",icon:"",description:"    ",baseChance:.06,minLevel:4,color:"#6bcb77"},frozen:{name:"",icon:"",description:"2  ",baseChance:.1,minLevel:2,color:"#74b9ff"},stone:{name:"",icon:"",description:" ,    ",baseChance:.05,minLevel:6,color:"#636e72"},multiplier:{name:"",icon:"",description:"      2",baseChance:.05,minLevel:4,color:"#fdcb6e"},shuffle:{name:"",icon:"",description:"   3x3   ",baseChance:.03,minLevel:8,color:"#a29bfe"},colorShift:{name:"",icon:"",description:"    ",baseChance:.04,minLevel:7,color:"#fd79a8"}},Ha={BASE_DROP_SPEED:600,SPEED_DECREASE_PER_LEVEL:40,MIN_DROP_SPEED:80,FUSION_ANIMATION_DURATION:180,CHAIN_DELAY:120,COMBO_TIMEOUT:2e3,SPECIAL_EFFECT_DURATION:300,GARBAGE_INTERVAL:40},Di={BASE_POINTS_PER_BLOCK:10,CHAIN_BONUS_MULTIPLIER:150,COMBO_BONUS:75,MASS_FUSION_THRESHOLD:6,MASS_FUSION_BONUS_PER_BLOCK:30,PERFECT_CLEAR_BONUS:15e3,LEVEL_UP_THRESHOLD:1e3,SPECIAL_BLOCK_BONUS:50,FEVER_MULTIPLIER:3},ao={MIN_BLOCKS_TO_FUSE:4,MIN_BLOCKS_LEVEL_10:5,MIN_BLOCKS_LEVEL_20:6,BOMB_RADIUS:1};function ex(r){return r>=20?ao.MIN_BLOCKS_LEVEL_20:r>=10?ao.MIN_BLOCKS_LEVEL_10:ao.MIN_BLOCKS_TO_FUSE}const js={GAUGE_PER_CHAIN:10,GAUGE_PER_COMBO:5,MAX_GAUGE:100,DECAY_RATE:2},sa={SPECIAL_CHANCE_PER_LEVEL:.012,MULTI_BLOCK_START_LEVEL:3,TRIPLE_BLOCK_START_LEVEL:7,GARBAGE_START_LEVEL:6,GARBAGE_ROWS_PER_INTERVAL:1,GARBAGE_MAX_ROWS:1,GARBAGE_INTERVAL_DECREASE:.3,GARBAGE_MIN_INTERVAL:20};function X0(r){return r>=30?8:r>=25?7:r>=20?6:r>=15?5:r>=10?4:r>=sa.TRIPLE_BLOCK_START_LEVEL?3:r>=sa.MULTI_BLOCK_START_LEVEL?2:1}const tx=[{offsets:[[0,0],[1,0]],name:"horizontal"},{offsets:[[0,0],[0,1]],name:"vertical"}],nx=[{offsets:[[0,0],[1,0],[2,0]],name:"line-h"},{offsets:[[0,0],[0,1],[0,2]],name:"line-v"},{offsets:[[0,0],[1,0],[1,1]],name:"L-right"},{offsets:[[0,0],[0,1],[1,1]],name:"L-left"},{offsets:[[1,0],[0,1],[1,1]],name:"L-up"},{offsets:[[0,0],[1,0],[0,1]],name:"corner"}],ix=[{offsets:[[0,0],[1,0],[2,0],[3,0]],name:"line-h4"},{offsets:[[0,0],[0,1],[0,2],[0,3]],name:"line-v4"},{offsets:[[0,0],[1,0],[0,1],[1,1]],name:"square"},{offsets:[[1,0],[0,1],[1,1],[2,1]],name:"T-down"},{offsets:[[0,0],[0,1],[1,1],[0,2]],name:"T-right"},{offsets:[[0,0],[1,0],[1,1],[2,1]],name:"zigzag"},{offsets:[[1,0],[0,1],[1,1],[1,2]],name:"plus"},{offsets:[[0,0],[1,0],[2,0],[1,1]],name:"arrow"}],ax=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0]],name:"line-h5"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2]],name:"L-big"},{offsets:[[0,0],[1,0],[2,0],[1,1],[1,2]],name:"T-long"},{offsets:[[1,0],[0,1],[1,1],[2,1],[1,2]],name:"cross"},{offsets:[[0,0],[1,0],[1,1],[2,1],[3,1]],name:"snake"},{offsets:[[0,0],[0,1],[1,1],[1,2],[2,2]],name:"stairs"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1]],name:"P-shape"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1]],name:"U-shape"}],sx=[{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1]],name:"rect-2x3"},{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0]],name:"line-h6"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"tree"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2],[0,3]],name:"L-huge"},{offsets:[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],name:"tower"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"H-shape"}],rx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0]],name:"line-h7"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],name:"diamond"},{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"arrow-big"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"window"},{offsets:[[1,0],[0,1],[1,1],[2,1],[3,1],[1,2],[1,3]],name:"anchor"}],lx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[0,1],[1,1],[2,1],[3,1]],name:"rect-2x4"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[3,1],[1,2],[2,2]],name:"bone"},{offsets:[[0,0],[1,0],[2,0],[0,1],[2,1],[0,2],[1,2],[2,2]],name:"frame"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2],[1,3]],name:"big-cross"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1],[3,1],[2,2],[3,2]],name:"zigzag-big"}];function ox(r){let t;switch(r){case 2:t=tx;break;case 3:t=nx;break;case 4:t=ix;break;case 5:t=ax;break;case 6:t=sx;break;case 7:t=rx;break;case 8:t=lx;break;default:return{offsets:[[0,0]],name:"single"}}return t[Math.floor(Math.random()*t.length)]}function cx(r){const t=Ha.GARBAGE_INTERVAL-(r-sa.GARBAGE_START_LEVEL)*sa.GARBAGE_INTERVAL_DECREASE;return Math.max(t,sa.GARBAGE_MIN_INTERVAL)}function K0(r){const t=[];return t.push({type:"score",target:r*500+(r-1)*200,current:0,completed:!1}),r>=3&&t.push({type:"clearBlocks",target:20+r*5,current:0,completed:!1}),r>=5&&t.push({type:"chains",target:Math.min(3+Math.floor(r/3),8),current:0,completed:!1}),r>=7&&t.push({type:"clearSpecial",target:3+Math.floor(r/4),current:0,completed:!1}),r>=10&&t.push({type:"clearStone",target:2+Math.floor(r/5),current:0,completed:!1}),t}const mu={getMovesForLevel:r=>Math.max(10,25-Math.floor(r/2)),getTargetScore:r=>500+r*300+Math.floor(r/3)*200,getTargetBlocks:r=>15+r*5,getColorCount:r=>r<=3?4:r<=6?5:r<=10?6:7};function $0(r){const t=[];if(t.push({type:"score",target:mu.getTargetScore(r),current:0,completed:!1}),r>=2&&t.push({type:"clearBlocks",target:mu.getTargetBlocks(r),current:0,completed:!1}),r>=5&&t.push({type:"chains",target:2+Math.floor(r/3),current:0,completed:!1}),r>=8){const i=["red","blue","green","yellow","purple"],s=i[r%i.length];t.push({type:"clearColor",target:10+r,current:0,color:s,completed:!1})}return t}const ux={colorBomb:{name:" ",description:"    ",icon:"",price:{coins:500,gems:20}},rowClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},columnClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},gravityShift:{name:" ",description:"  ",icon:"",price:{coins:600,gems:25}},timeSlow:{name:" ",description:"5 50%  ",icon:"",price:{coins:300,gems:10}},rainbowBlock:{name:" ",description:"    ",icon:"",price:{coins:800,gems:30}},scoreMultiplier:{name:" ",description:"30  2",icon:"",price:{coins:700,gems:28}},blockPreview:{name:"",description:"10  ",icon:"",price:{coins:200,gems:8}},undo:{name:"",description:" 3 ",icon:"",price:{coins:500,gems:20}},freeze:{name:"",description:"5   ",icon:"",price:{coins:400,gems:15}}},ud={down:{dx:0,dy:1},up:{dx:0,dy:-1},left:{dx:-1,dy:0},right:{dx:1,dy:0}},hx={down:"",up:"",left:"",right:""},fx=5,pv={classic:{name:"",description:" !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1},timeAttack:{name:"",description:"2   !",icon:"",hasTimeLimit:!0,timeLimit:120,hasLevelLimit:!1},puzzle:{name:"",description:"   ",icon:"",hasTimeLimit:!1,hasLevelLimit:!0,movesLimit:30},zen:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,noGameOver:!0},daily:{name:" ",description:"  !",icon:"",hasTimeLimit:!0,timeLimit:180,hasLevelLimit:!1},survival:{name:"",description:"  !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,speedIncrease:!0},challenge:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,hasObjectives:!0}},qa={SWIPE_THRESHOLD:30,FAST_SWIPE_VELOCITY:1e3,LONG_PRESS_DURATION:500,DOUBLE_TAP_DELAY:300},dx={light:[10],medium:[20],heavy:[30],success:[10,50,20],error:[30,50,30],selection:[5]};function kd(r){const t=Object.keys($f).map(Number).sort((i,s)=>s-i);for(const i of t)if(r>=i)return $f[i];return $f[1]}function Z0(r){const t=Ha.BASE_DROP_SPEED-(r-1)*Ha.SPEED_DECREASE_PER_LEVEL;return Math.max(t,Ha.MIN_DROP_SPEED)}function mx(r){return Di.LEVEL_UP_THRESHOLD*r+(r-1)*200}function gx(r){return Math.min(.3,.05+r*sa.SPECIAL_CHANCE_PER_LEVEL)}function J0(r){const t=Object.entries(gv).filter(([o,u])=>o!=="normal"&&r>=u.minLevel).map(([o,u])=>({type:o,chance:u.baseChance}));if(t.length===0)return"normal";const i=t.reduce((o,u)=>o+u.chance,0);let s=Math.random()*i;for(const{type:o,chance:u}of t)if(s-=u,s<=0)return o;return t[0].type}function px(r){const{blocksCleared:t,chainCount:i,comboCount:s,level:o,powerUpMultiplier:u,perfectClear:f,isFeverMode:m=!1,specialBlocksCleared:v=0}=r;let b=t*Di.BASE_POINTS_PER_BLOCK*o;const x=i>1?Math.pow(i,2.5)*Di.CHAIN_BONUS_MULTIPLIER:0,E=s*Di.COMBO_BONUS*(1+s*.1),C=t>=Di.MASS_FUSION_THRESHOLD?t*Di.MASS_FUSION_BONUS_PER_BLOCK*Math.floor(t/Di.MASS_FUSION_THRESHOLD):0,z=v*Di.SPECIAL_BLOCK_BONUS*o,B=f?Di.PERFECT_CLEAR_BONUS*o:0,P=m?Di.FEVER_MULTIPLIER:1;return Math.floor((b+x+E+C+z+B)*u*P)}const yx=[{id:"score_10k",name:"",description:"10,000 ",category:"score",target:1e4,reward:{gems:10},icon:""},{id:"score_50k",name:"",description:"50,000 ",category:"score",target:5e4,reward:{gems:25},icon:""},{id:"score_100k",name:"",description:"100,000 ",category:"score",target:1e5,reward:{gems:50},icon:""},{id:"score_500k",name:"",description:"500,000 ",category:"score",target:5e5,reward:{gems:100},icon:""},{id:"score_1m",name:"",description:"1,000,000 ",category:"score",target:1e6,reward:{gems:200,skin:"score_master"},icon:""},{id:"score_5m",name:"",description:"5,000,000 ",category:"score",target:5e6,reward:{gems:500},icon:""},{id:"score_10m",name:"",description:"10,000,000 ",category:"score",target:1e7,reward:{gems:1e3,skin:"mythic_legend"},icon:""},{id:"combo_10",name:" ",description:"10  ",category:"combo",target:10,reward:{gems:10},icon:""},{id:"combo_20",name:" ",description:"20  ",category:"combo",target:20,reward:{gems:25},icon:""},{id:"combo_30",name:" ",description:"30  ",category:"combo",target:30,reward:{gems:50},icon:""},{id:"combo_50",name:" ",description:"50  ",category:"combo",target:50,reward:{gems:100,skin:"combo_legend"},icon:""},{id:"combo_100",name:" ",description:"100  ",category:"combo",target:100,reward:{gems:300},icon:""},{id:"chain_5",name:" ",description:"5 ",category:"chain",target:5,reward:{gems:15},icon:""},{id:"chain_10",name:" ",description:"10 ",category:"chain",target:10,reward:{gems:50},icon:""},{id:"chain_15",name:" ",description:"15 ",category:"chain",target:15,reward:{gems:150,skin:"chain_master"},icon:""},{id:"chain_20",name:" ",description:"20 ",category:"chain",target:20,reward:{gems:300},icon:""},{id:"perfect_clear",name:"!",description:"  ",category:"special",target:1,reward:{gems:100},icon:""},{id:"comeback",name:" ",description:"  ",category:"special",target:1,reward:{gems:75},icon:""},{id:"speed_demon",name:" ",description:"1  50,000",category:"special",target:1,reward:{gems:100},icon:""},{id:"no_powerup",name:"",description:"   20",category:"special",target:1,reward:{gems:150},icon:""},{id:"all_colors",name:"",description:"5   ",category:"special",target:1,reward:{gems:50},icon:""},{id:"first_blood",name:" ",description:"  ",category:"special",target:1,reward:{gems:5},icon:""},{id:"marathon",name:"",description:"30  ",category:"special",target:1,reward:{gems:80},icon:""},{id:"games_10",name:"",description:"10 ",category:"play",target:10,reward:{coins:500},icon:""},{id:"games_100",name:"",description:"100 ",category:"play",target:100,reward:{gems:50},icon:""},{id:"games_500",name:"",description:"500 ",category:"play",target:500,reward:{gems:200},icon:""},{id:"games_1000",name:"",description:"1000 ",category:"play",target:1e3,reward:{gems:500},icon:""},{id:"time_1h",name:"",description:" 1 ",category:"play",target:3600,reward:{coins:1e3},icon:""},{id:"time_10h",name:"",description:" 10 ",category:"play",target:36e3,reward:{gems:100},icon:""},{id:"time_100h",name:" ",description:" 100 ",category:"play",target:36e4,reward:{gems:1e3,skin:"veteran"},icon:""},{id:"secret_gravity",name:"???",description:"   ",category:"hidden",target:1,reward:{gems:50},icon:""},{id:"secret_lucky",name:"???",description:" 3  ",category:"hidden",target:1,reward:{gems:100},icon:""},{id:"secret_developer",name:"???",description:"  ",category:"hidden",target:1,reward:{gems:200},icon:""}];function vx(){return yx.map(r=>({...r,current:0,completed:!1,claimed:!1}))}const ho={classic:{colors:["#ff4757","#3742fa","#2ed573","#ffa502","#8854d0"],borderRadius:"4px",borderWidth:0,borderStyle:"none",innerEffect:"glossy",animation:"none",glowIntensity:0,texture:"none"},neon:{colors:["#ff0080","#00ffff","#39ff14","#ffff00","#bf00ff"],borderRadius:"2px",borderWidth:2,borderStyle:"solid",innerEffect:"glow",animation:"pulse",glowIntensity:.8,texture:"none"},candy:{colors:["#ff6b9d","#a855f7","#4ade80","#fbbf24","#fb923c"],borderRadius:"50%",borderWidth:3,borderStyle:"solid",innerEffect:"glass",animation:"none",glowIntensity:.2,texture:"none"},pixel:{colors:["#dc2626","#2563eb","#16a34a","#ca8a04","#7c3aed"],borderRadius:"0px",borderWidth:3,borderStyle:"solid",innerEffect:"flat",animation:"none",glowIntensity:0,texture:"lines"},galaxy:{colors:["#8b5cf6","#ec4899","#06b6d4","#f43f5e","#3b82f6"],borderRadius:"6px",borderWidth:1,borderStyle:"solid",innerEffect:"gradient",animation:"shimmer",glowIntensity:.5,texture:"dots"},crystal:{colors:["#f0abfc","#a5f3fc","#bbf7d0","#fef08a","#fecaca"],borderRadius:"8px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.6,texture:"cracks"},holographic:{colors:["#f472b6","#c084fc","#60a5fa","#34d399","#fbbf24"],borderRadius:"4px",borderWidth:1,borderStyle:"solid",innerEffect:"metallic",animation:"shimmer",glowIntensity:.7,texture:"lines"},animated_fire:{colors:["#ef4444","#f97316","#eab308","#dc2626","#fb923c"],borderRadius:"4px",borderWidth:0,borderStyle:"none",innerEffect:"glow",animation:"fire",particleEffect:!0,glowIntensity:.9,texture:"noise"},animated_ice:{colors:["#38bdf8","#67e8f9","#a5f3fc","#22d3ee","#0ea5e9"],borderRadius:"2px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"ice",particleEffect:!0,glowIntensity:.6,texture:"cracks"},animated_electric:{colors:["#facc15","#a3e635","#22d3ee","#e879f9","#fbbf24"],borderRadius:"4px",borderWidth:2,borderStyle:"solid",innerEffect:"glow",animation:"electric",particleEffect:!0,glowIntensity:1,texture:"circuit"}};Object.fromEntries(Object.entries(ho).map(([r,t])=>[r,t.colors]));const hd=[{id:"classic",name:"",price:0,currency:"free",rarity:"common",owned:!0,equipped:!0},{id:"neon",name:"",price:1e3,currency:"coins",rarity:"common",owned:!1,equipped:!1},{id:"candy",name:"",price:2e3,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"pixel",name:"",price:2500,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"galaxy",name:"",price:100,currency:"gems",rarity:"rare",owned:!1,equipped:!1},{id:"crystal",name:"",price:200,currency:"gems",rarity:"epic",owned:!1,equipped:!1},{id:"holographic",name:"",price:500,currency:"gems",rarity:"legendary",owned:!1,equipped:!1},{id:"animated_fire",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_ice",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_electric",name:"",price:1e3,currency:"gems",rarity:"mythic",owned:!1,equipped:!1,animated:!0}],fd=[{id:"dark",name:"",price:0,currency:"free",owned:!0,equipped:!0,colors:{background:"#0a0a1a",panel:"#1a1a2e",accent:"#4a9eff"}},{id:"light",name:"",price:500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#f0f0f5",panel:"#ffffff",accent:"#3742fa"}},{id:"ocean",name:"",price:1500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#0a1628",panel:"#162d50",accent:"#00d2d3"}},{id:"forest",name:"",price:150,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0a1a0a",panel:"#1a2e1a",accent:"#2ed573"}},{id:"sunset",name:"",price:200,currency:"gems",owned:!1,equipped:!1,colors:{background:"#1a0a1a",panel:"#2e1a2e",accent:"#ff6b81"}},{id:"space",name:"",price:300,currency:"gems",owned:!1,equipped:!1,colors:{background:"#050510",panel:"#0a0a20",accent:"#8854d0"}},{id:"cyberpunk",name:"",price:500,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0d0d1a",panel:"#1a1a33",accent:"#ff00ff"}}],_x=[{id:"gems_100",amount:100,bonusAmount:0,price:1.99,label:""},{id:"gems_500",amount:500,bonusAmount:50,price:7.99,label:"",highlight:!0},{id:"gems_1200",amount:1200,bonusAmount:200,price:14.99,label:""},{id:"gems_2500",amount:2500,bonusAmount:500,price:27.99,label:""},{id:"gems_6500",amount:6500,bonusAmount:1500,price:54.99,label:" ",bestValue:!0}],Vs=[{id:"coins_50",reward:{coins:50},probability:.25,color:"#888888",label:"50 "},{id:"coins_100",reward:{coins:100},probability:.2,color:"#3742fa",label:"100 "},{id:"coins_200",reward:{coins:200},probability:.15,color:"#3742fa",label:"200 "},{id:"gems_5",reward:{gems:5},probability:.12,color:"#8854d0",label:"5 "},{id:"gems_10",reward:{gems:10},probability:.1,color:"#8854d0",label:"10 "},{id:"powerup",reward:{powerUp:{type:"colorBomb",count:1}},probability:.08,color:"#2ed573",label:""},{id:"gems_25",reward:{gems:25},probability:.05,color:"#ffd700",label:"25 "},{id:"gems_50",reward:{gems:50},probability:.03,color:"#ffd700",label:"50 "},{id:"gems_100",reward:{gems:100},probability:.015,color:"#ff4757",label:"100 !"},{id:"jackpot",reward:{gems:500,coins:5e3},probability:.005,color:"#ff00ff",label:"!"}],dd=[{day:1,reward:{coins:100}},{day:2,reward:{coins:150,powerUp:{type:"timeSlow",count:1}}},{day:3,reward:{coins:200}},{day:4,reward:{coins:250,gems:10}},{day:5,reward:{coins:300,powerUp:{type:"colorBomb",count:1}}},{day:6,reward:{coins:400,gems:20}},{day:7,reward:{coins:500,gems:50}}],bx={common:"#888888",uncommon:"#2ed573",rare:"#3742fa",epic:"#8854d0",legendary:"#ffd700",mythic:"#ff00ff"},xx={common:"",uncommon:"",rare:"",epic:"",legendary:"",mythic:""},Ex=[{id:"play_3_games",type:"games_played",target:3,desc:"3 ",reward:{xp:30,coins:100}},{id:"score_10k",type:"score",target:1e4,desc:"10,000 ",reward:{xp:40,coins:150}},{id:"combo_10",type:"combo",target:10,desc:"10  ",reward:{xp:50,coins:200}},{id:"chain_5",type:"chain",target:5,desc:"5 ",reward:{xp:50,gems:10}},{id:"use_powerup",type:"powerup_used",target:3,desc:" 3 ",reward:{xp:30,coins:100}},{id:"fuse_50",type:"blocks_fused",target:50,desc:"50  ",reward:{xp:35,coins:120}},{id:"level_10",type:"level_reached",target:10,desc:" 10 ",reward:{xp:45,coins:180}},{id:"play_classic",type:"mode_played",target:1,desc:"  ",reward:{xp:25,coins:80}},{id:"watch_ad",type:"ad_watched",target:1,desc:" ",reward:{xp:20,coins:50}},{id:"perfect_clear",type:"perfect_clear",target:1,desc:" ",reward:{xp:100,gems:20}}],Tx=[{id:"play_20_games",type:"games_played",target:20,desc:"20 ",reward:{xp:200,gems:50}},{id:"total_score_100k",type:"total_score",target:1e5,desc:" 100,000 ",reward:{xp:300,gems:100}},{id:"max_combo_30",type:"max_combo",target:30,desc:" 30  ",reward:{xp:250,gems:75}},{id:"chain_10",type:"max_chain",target:10,desc:"10 ",reward:{xp:300,gems:150}},{id:"reach_level_20",type:"max_level",target:20,desc:" 20 ",reward:{xp:200,gems:80}},{id:"fuse_500",type:"blocks_fused",target:500,desc:"500  ",reward:{xp:250,gems:90}},{id:"use_all_powerups",type:"unique_powerups",target:5,desc:"5  ",reward:{xp:180,gems:60}},{id:"gravity_all",type:"gravity_directions",target:4,desc:"   ",reward:{xp:150,gems:50}}];function Sx(){return[...Ex].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function wx(){return[...Tx].sort(()=>Math.random()-.5).slice(0,3).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function md(){return Array(pe.ROWS).fill(null).map(()=>Array(pe.COLUMNS).fill(null))}function yv(r){const t=kd(r);return t[Math.floor(Math.random()*t.length)]}function vv(r,t){if(t>0&&t%12===0)return J0(r);const i=gx(r);return Math.random()<i?J0(r):"normal"}function W0(r,t){const i=[],s=[];for(let o=0;o<r;o++)i.push(yv(t)),s.push(o===0?vv(t,0):"normal");return{colors:i,specialTypes:s}}const Ax={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,specialBlocksUsed:0,levelsCompleted:0},Cx={dailyMissions:Sx(),weeklyMissions:wx()},ey={board:md(),currentBlock:null,currentBlocks:[],nextBlocks:[],nextSpecialTypes:[],holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"ready",gameMode:"classic",powerUps:[],activePowerUp:null,gravityDirection:"down",gameTime:0,statistics:Ax,continues:0,adWatchedThisGame:!1,missionProgress:Cx,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:[],feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,specialBlockChance:.05,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:1,movesRemaining:0,puzzleLevel:1,puzzleCompleted:!1,currentShapeOffsets:[],basePosition:{x:0,y:0}},qe=dv()(mv((r,t)=>({...ey,blocksPlaced:0,startGame:(i="classic")=>{const u=i==="puzzle"?1:X0(1),{colors:f,specialTypes:m}=W0(5+u,1);let v=[];i==="challenge"?v=K0(1):i==="puzzle"&&(v=$0(1));const b=i==="puzzle"?mu.getMovesForLevel(1):0;r({board:md(),currentBlock:null,currentBlocks:[],nextBlocks:f,nextSpecialTypes:m,holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"playing",gameMode:i,activePowerUp:null,gravityDirection:"down",gameTime:0,continues:0,adWatchedThisGame:!1,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:v,feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,blocksPlaced:0,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:u,movesRemaining:b,puzzleLevel:1,puzzleCompleted:!1}),setTimeout(()=>t().spawnBlock(),100)},pauseGame:()=>{t().gameStatus==="playing"&&r({gameStatus:"paused"})},resumeGame:()=>{t().gameStatus==="paused"&&r({gameStatus:"playing"})},endGame:()=>{const{score:i,statistics:s,combo:o,chainCount:u}=t();r({gameStatus:"gameover",statistics:{...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+i,highScore:Math.max(s.highScore,i),maxCombo:Math.max(s.maxCombo,o),maxChain:Math.max(s.maxChain,u)}})},resetGame:()=>{r({...ey,statistics:t().statistics,powerUps:t().powerUps,missionProgress:t().missionProgress})},spawnBlock:()=>{const{nextBlocks:i,nextSpecialTypes:s,level:o,gravityDirection:u,board:f,blocksPlaced:m}=t(),v=X0(o);if(i.length<v)return;const x=ox(v).offsets,E=Math.min(...x.map(ie=>ie[0])),C=Math.max(...x.map(ie=>ie[0])),z=Math.min(...x.map(ie=>ie[1])),B=Math.max(...x.map(ie=>ie[1])),P=C-E+1,j=B-z+1;let O,Z;switch(u){case"down":O=Math.floor((pe.COLUMNS-P)/2),Z=0;break;case"up":O=Math.floor((pe.COLUMNS-P)/2),Z=pe.ROWS-1-j+1;break;case"left":O=pe.COLUMNS-P,Z=Math.floor((pe.ROWS-j)/2);break;case"right":O=0,Z=Math.floor((pe.ROWS-j)/2);break}const ne=[];for(let ie=0;ie<x.length;ie++){const[R,S]=x[ie],A=i[ie]||i[0],M=s[ie]||"normal",D=O+R,k=Z+S;D<0||D>=pe.COLUMNS||k<0||k>=pe.ROWS||f[k][D]===null&&ne.push({id:Jc(),color:A,x:D,y:k,targetY:k,specialType:M})}if(ne.length===0){t().endGame();return}if(u==="down"){let ie=0;for(let R=0;R<pe.COLUMNS;R++)f[0][R]!==null&&ie++,f[1][R]!==null&&ie++;if(ie>=pe.COLUMNS){t().endGame();return}}const oe=[...i.slice(v)],fe=[...s.slice(v)];for(let ie=0;ie<v;ie++)oe.push(yv(o)),fe.push(vv(o,m+ie+1));r({currentBlock:ne[0]||null,currentBlocks:ne,nextBlocks:oe,nextSpecialTypes:fe,canHold:!0,blocksPlaced:m+v,fallingBlockCount:v,currentShapeOffsets:x,basePosition:{x:O,y:Z}})},moveBlock:i=>{const{currentBlocks:s,board:o,gravityDirection:u}=t();if(s.length===0)return;const f=[],m=new Set;for(const v of s){let b=v.x,x=v.y;if(u==="down"||u==="up"?b=i==="left"?v.x-1:v.x+1:x=i==="left"?v.y-1:v.y+1,b<0||b>=pe.COLUMNS||x<0||x>=pe.ROWS||o[x][b]!==null)return;f.push({...v,x:b,y:x}),m.add(`${b},${x}`)}r({currentBlock:f[0]||null,currentBlocks:f})},rotateBlock:()=>{const{currentBlocks:i,board:s}=t();if(i.length<=1)return;const o=i[0],u=[];let f=!0;for(let m=0;m<i.length;m++){const v=i[m],b=v.x-o.x,x=v.y-o.y,E=o.x-x,C=o.y+b;if(E<0||E>=pe.COLUMNS||C<0||C>=pe.ROWS){f=!1;break}if(s[C]?.[E]!==null){f=!1;break}u.push({...v,x:E,y:C})}if(!f){const m=[[-1,0],[1,0],[-2,0],[2,0],[0,-1],[0,1]];for(const[v,b]of m){const x=[];let E=!0;for(let C=0;C<i.length;C++){const z=i[C],B=z.x-o.x,P=z.y-o.y,j=o.x-P+v,O=o.y+B+b;if(j<0||j>=pe.COLUMNS||O<0||O>=pe.ROWS||s[O]?.[j]!==null){E=!1;break}x.push({...z,x:j,y:O})}if(E&&x.length===i.length){u.length=0,u.push(...x),f=!0;break}}}if(f&&u.length===i.length){const m=u[0],v=u.map(b=>[b.x-m.x,b.y-m.y]);r({currentBlock:u[0]||null,currentBlocks:u,currentShapeOffsets:v,basePosition:{x:m.x,y:m.y}})}},softDrop:()=>{const{currentBlocks:i,board:s,gravityDirection:o}=t();if(i.length===0)return;const{dx:u,dy:f}=ud[o];let m=!1;new Set(i.map(b=>`${b.x},${b.y}`));for(const b of i){const x=b.x+u,E=b.y+f;if(x<0||x>=pe.COLUMNS||E<0||E>=pe.ROWS){m=!0;break}if(s[E]?.[x]!==null){m=!0;break}}if(m){t().placeBlock();return}const v=i.map(b=>({...b,x:b.x+u,y:b.y+f}));r({currentBlock:v[0]||null,currentBlocks:v})},hardDrop:()=>{const{currentBlocks:i,board:s,gravityDirection:o}=t();if(i.length===0)return;const{dx:u,dy:f}=ud[o],m=new Set,v=s.map(E=>[...E]),b=[...i].sort((E,C)=>o==="down"?C.y-E.y:o==="up"?E.y-C.y:o==="right"?C.x-E.x:E.x-C.x),x=[];for(const E of b){let C=E.x,z=E.y;for(;;){const B=C+u,P=z+f;if(B<0||B>=pe.COLUMNS||P<0||P>=pe.ROWS||v[P]?.[B]!==null||m.has(`${B},${P}`))break;C=B,z=P}m.add(`${C},${z}`),x.push({...E,x:C,y:z}),v[z][C]={id:E.id||Jc(),color:E.color,x:C,y:z,specialType:E.specialType,frozenCount:E.specialType==="frozen"?2:void 0,createdAt:Date.now()}}r({currentBlock:x[0]||null,currentBlocks:x}),t().placeBlock()},doHoldBlock:()=>{const{currentBlock:i,holdBlock:s,holdSpecialType:o,canHold:u}=t();!i||!u||(s&&o!==null?r({holdBlock:i.color,holdSpecialType:i.specialType,currentBlock:{color:s,x:Math.floor(pe.COLUMNS/2),y:0,targetY:0,specialType:o},canHold:!1}):(r({holdBlock:i.color,holdSpecialType:i.specialType,currentBlock:null,canHold:!1}),t().spawnBlock()))},placeBlock:()=>{const{currentBlocks:i,board:s,garbagePending:o,gameMode:u}=t();if(i.length===0)return;let f=s.map(m=>[...m]);for(const m of i){const v={id:Jc(),color:m.color,x:m.x,y:m.y,specialType:m.specialType,frozenCount:m.specialType==="frozen"?2:void 0,createdAt:Date.now()};f[m.y][m.x]=v}r({board:f,currentBlock:null,currentBlocks:[]}),u==="puzzle"&&t().decrementMoves(),o>0&&u!=="puzzle"&&setTimeout(()=>{t().addGarbageRows(t().garbagePending)},100)},setGravityDirection:i=>{r({gravityDirection:i,isPowerUpSelecting:!1,selectedGravityDirection:null})},toggleGravitySelection:i=>{r({isPowerUpSelecting:i})},cycleGravity:()=>{const{gravityDirection:i}=t(),s=["down","right","up","left"],u=(s.indexOf(i)+1)%s.length;r({gravityDirection:s[u]})},addPowerUp:(i,s=1)=>{const{powerUps:o}=t(),u=o.findIndex(f=>f.type===i);if(u>=0){const f=[...o];f[u]={...f[u],count:f[u].count+s},r({powerUps:f})}else r({powerUps:[...o,{type:i,count:s}]})},usePowerUp:i=>{const{powerUps:s}=t(),o=s.findIndex(f=>f.type===i&&f.count>0);if(o<0)return;const u=[...s];u[o]={...u[o],count:u[o].count-1},u[o].count<=0&&u.splice(o,1),r({powerUps:u})},activatePowerUp:i=>{r({activePowerUp:i})},deactivatePowerUp:()=>{r({activePowerUp:null})},updateBoard:i=>{r({board:i})},addScore:i=>{const{score:s,activePowerUp:o,isFeverMode:u}=t();let f=o?.type==="scoreMultiplier"?2:1;u&&(f*=3),r({score:s+i*f}),t().checkLevelUp()},incrementCombo:()=>{const{combo:i,maxCombo:s}=t(),o=i+1;r({combo:o,maxCombo:Math.max(s,o),comboTimer:3}),t().addFeverGauge(js.GAUGE_PER_COMBO*o)},resetCombo:()=>{r({combo:0,comboTimer:0})},incrementChain:()=>{const{chainCount:i}=t(),s=i+1;r({chainCount:s}),t().addFeverGauge(js.GAUGE_PER_CHAIN*s)},resetChain:()=>{r({chainCount:0})},checkLevelUp:()=>{const{score:i,level:s,gameMode:o}=t(),u=mx(s);if(i>=u){const f=s+1,m=o==="challenge"?K0(f):t().levelObjectives;r({level:f,levelObjectives:m})}},addFeverGauge:i=>{const{feverGauge:s,isFeverMode:o}=t();if(o)return;const u=Math.min(js.MAX_GAUGE,s+i);r({feverGauge:u}),u>=js.MAX_GAUGE&&t().activateFeverMode()},activateFeverMode:()=>{r({isFeverMode:!0,feverGauge:js.MAX_GAUGE})},deactivateFeverMode:()=>{r({isFeverMode:!1,feverGauge:0})},updateLevelObjective:(i,s)=>{const{levelObjectives:o}=t(),u=o.map(f=>{if(f.type===i&&!f.completed){const m=f.current+s;return{...f,current:m,completed:m>=f.target}}return f});r({levelObjectives:u}),u.length>0&&u.every(f=>f.completed)&&r({gameStatus:"levelComplete"})},setDangerLevel:i=>{r({dangerLevel:i})},decrementBlocksUntilSpecial:()=>{const{blocksUntilSpecial:i}=t();i>0?r({blocksUntilSpecial:i-1}):r({blocksUntilSpecial:10+Math.floor(Math.random()*5)})},addGarbageRows:i=>{const s=o=>{if(o<=0){r({garbagePending:0});return}const{board:u,level:f}=t(),m=kd(f),v=u.map(E=>[...E]);for(let E=0;E<pe.ROWS-1;E++)v[E]=[...v[E+1]];const b=Math.floor(Math.random()*pe.COLUMNS),x=pe.ROWS-1;for(let E=0;E<pe.COLUMNS;E++)E===b?v[x][E]=null:v[x][E]={id:Jc(),color:m[Math.floor(Math.random()*m.length)],x:E,y:x,specialType:Math.random()<.15?"stone":"normal",createdAt:Date.now()};r({board:v});for(let E=0;E<pe.COLUMNS;E++)if(v[0][E]!==null){t().endGame();return}o>1?setTimeout(()=>s(o-1),300):r({garbagePending:0})};s(i)},incrementGarbageTimer:()=>{const{garbageTimer:i,level:s,garbagePending:o}=t();if(s<sa.GARBAGE_START_LEVEL)return;const u=cx(s),f=i+1;if(f>=u){const m=Math.min(sa.GARBAGE_ROWS_PER_INTERVAL+Math.floor(s/5),sa.GARBAGE_MAX_ROWS);r({garbageTimer:0,garbagePending:o+m})}else r({garbageTimer:f})},updateStatistics:i=>{const{statistics:s}=t();r({statistics:{...s,...i}})},updateMissionProgress:(i,s)=>{const{missionProgress:o}=t(),u=o.dailyMissions.map(m=>{if(m.type===i&&!m.completed){const v=m.current+s;return{...m,current:v,completed:v>=m.target}}return m}),f=o.weeklyMissions.map(m=>{if(m.type===i&&!m.completed){const v=m.current+s;return{...m,current:v,completed:v>=m.target}}return m});r({missionProgress:{dailyMissions:u,weeklyMissions:f}})},incrementGameTime:()=>{const{gameTime:i,comboTimer:s,feverGauge:o,isFeverMode:u}=t();if(s>0){const f=s-1;f<=0?t().resetCombo():r({comboTimer:f})}!u&&o>0&&r({feverGauge:Math.max(0,o-js.DECAY_RATE)}),t().incrementGarbageTimer(),r({gameTime:i+1})},continueGame:()=>{const{continues:i,board:s}=t(),o=s.map((u,f)=>f<4?Array(pe.COLUMNS).fill(null):u);r({board:o,gameStatus:"playing",continues:i+1}),t().spawnBlock()},decrementMoves:()=>{const{movesRemaining:i,gameMode:s}=t();if(s!=="puzzle")return;const o=i-1;r({movesRemaining:o}),o<=0&&t().checkPuzzleComplete()},nextPuzzleLevel:()=>{const{puzzleLevel:i}=t(),s=i+1,o=mu.getMovesForLevel(s),u=$0(s),{colors:f,specialTypes:m}=W0(6,1);r({board:md(),currentBlock:null,currentBlocks:[],nextBlocks:f,nextSpecialTypes:m,score:0,puzzleLevel:s,movesRemaining:o,levelObjectives:u,puzzleCompleted:!1,gameStatus:"playing",combo:0,chainCount:0}),setTimeout(()=>t().spawnBlock(),100)},checkPuzzleComplete:()=>{const{levelObjectives:i,gameMode:s,movesRemaining:o}=t();if(s!=="puzzle")return;i.every(f=>f.completed)?r({puzzleCompleted:!0,gameStatus:"levelComplete"}):o<=0&&t().endGame()}}),{name:"chromafall-game-storage",partialize:r=>({statistics:r.statistics,powerUps:r.powerUps,missionProgress:r.missionProgress})})),Nx={soundEnabled:!0,musicEnabled:!0,soundVolume:.7,musicVolume:.5,hapticEnabled:!0,showGhostBlock:!0,controlType:"both",colorBlindMode:!1,language:"ko",performanceMode:"auto"},Rx={coins:1e3,gems:50,lives:5,maxLives:5,lifeRegenTime:0},Mx={freeSpinsRemaining:1,adSpinsRemaining:3,lastFreeSpinTime:0,spinHistory:[],pityCounter:0},Ix={currentStreak:0,longestStreak:0,lastPlayDate:"",todayPlayed:!1},Dx={adsEnabled:!0,iapEnabled:!0,removeAds:!1,vipActive:!1,firstPurchaseBonus:!0},Xn=dv()(mv((r,t)=>({playerId:`player_${Date.now()}`,playerName:"",playerLevel:1,playerXP:0,avatarId:"default",settings:Nx,currency:Rx,achievements:vx(),ownedSkins:hd.filter(i=>i.owned),ownedThemes:fd.filter(i=>i.owned),equippedSkinId:"classic",equippedThemeId:"dark",dailyRewards:dd.map((i,s)=>({...i,claimed:!1})),lastDailyRewardClaim:"",dailyRewardDay:0,streakInfo:Ix,wheelState:Mx,monetizationConfig:Dx,purchaseHistory:[],personalBestScores:[],battlePassLevel:1,battlePassXP:0,battlePassPremium:!1,setPlayerName:i=>r({playerName:i}),addXP:i=>{const{playerXP:s,playerLevel:o}=t(),u=s+i,f=o*100;u>=f?r({playerXP:u-f,playerLevel:o+1}):r({playerXP:u})},updateSettings:i=>{const{settings:s}=t();r({settings:{...s,...i}})},addCoins:i=>{const{currency:s}=t();r({currency:{...s,coins:s.coins+i}})},spendCoins:i=>{const{currency:s}=t();return s.coins>=i?(r({currency:{...s,coins:s.coins-i}}),!0):!1},addGems:i=>{const{currency:s}=t();r({currency:{...s,gems:s.gems+i}})},spendGems:i=>{const{currency:s}=t();return s.gems>=i?(r({currency:{...s,gems:s.gems-i}}),!0):!1},addLife:i=>{const{currency:s}=t(),o=Math.min(s.lives+i,s.maxLives);r({currency:{...s,lives:o}})},useLife:()=>{const{currency:i}=t();return i.lives>0?(r({currency:{...i,lives:i.lives-1}}),!0):!1},updateAchievement:(i,s)=>{const{achievements:o}=t(),u=o.map(f=>{if(f.id===i){const m=Math.max(f.current,s);return{...f,current:m,completed:m>=f.target}}return f});r({achievements:u})},claimAchievement:i=>{const{achievements:s}=t(),o=s.find(u=>u.id===i);if(o&&o.completed&&!o.claimed){o.reward.coins&&t().addCoins(o.reward.coins),o.reward.gems&&t().addGems(o.reward.gems);const u=s.map(f=>f.id===i?{...f,claimed:!0}:f);r({achievements:u})}},purchaseSkin:i=>{const s=hd.find(f=>f.id===i);if(!s)return!1;const{currency:o,ownedSkins:u}=t();return u.some(f=>f.id===i)?!1:s.currency==="free"?(r({ownedSkins:[...u,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedSkins:[...u,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedSkins:[...u,{...s,owned:!0}]}),!0):!1},purchaseTheme:i=>{const s=fd.find(f=>f.id===i);if(!s)return!1;const{currency:o,ownedThemes:u}=t();return u.some(f=>f.id===i)?!1:s.currency==="free"?(r({ownedThemes:[...u,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedThemes:[...u,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedThemes:[...u,{...s,owned:!0}]}),!0):!1},equipSkin:i=>{const{ownedSkins:s}=t();s.some(o=>o.id===i)&&r({equippedSkinId:i})},equipTheme:i=>{const{ownedThemes:s}=t();s.some(o=>o.id===i)&&r({equippedThemeId:i})},claimDailyReward:()=>{const{dailyRewardDay:i,dailyRewards:s,lastDailyRewardClaim:o}=t(),u=new Date().toDateString();if(o===u)return null;const f=i%7+1,m=dd[f-1];return m.reward.coins&&t().addCoins(m.reward.coins),m.reward.gems&&t().addGems(m.reward.gems),r({dailyRewardDay:f,lastDailyRewardClaim:u}),m.reward},checkDailyRewardAvailable:()=>{const{lastDailyRewardClaim:i}=t(),s=new Date().toDateString();return i!==s},updateStreak:()=>{const{streakInfo:i}=t(),s=new Date().toDateString();if(i.lastPlayDate===s)return;const o=new Date(Date.now()-864e5).toDateString();let u=i.currentStreak;i.lastPlayDate===o?u+=1:i.lastPlayDate!==s&&(u=1),r({streakInfo:{currentStreak:u,longestStreak:Math.max(i.longestStreak,u),lastPlayDate:s,todayPlayed:!0}})},spinWheel:()=>{const{wheelState:i}=t(),{freeSpinsRemaining:s,adSpinsRemaining:o}=i;if(s<=0&&o<=0)return null;const u=["coins_50","coins_100","gems_5","gems_10","powerup"],f=u[Math.floor(Math.random()*u.length)];return r({wheelState:{...i,freeSpinsRemaining:s>0?s-1:s,adSpinsRemaining:s<=0?o-1:o,spinHistory:[...i.spinHistory,f],pityCounter:i.pityCounter+1}}),f},canSpinWheel:()=>{const{wheelState:i,currency:s}=t();return{free:i.freeSpinsRemaining>0,ad:i.adSpinsRemaining>0,gem:s.gems>=20}},addBattlePassXP:i=>{const{battlePassXP:s,battlePassLevel:o}=t(),u=100,f=s+i,m=Math.floor(f/u);r({battlePassXP:f%u,battlePassLevel:Math.min(o+m,50)})},purchaseBattlePassPremium:()=>{const{currency:i}=t();return i.gems>=499?(t().spendGems(499),r({battlePassPremium:!0}),!0):!1},addPersonalBest:(i,s)=>{const{personalBestScores:o}=t(),u=o.findIndex(f=>f.mode===i);if(u>=0){if(s>o[u].score){const f=[...o];f[u]={mode:i,score:s,date:new Date().toISOString()},r({personalBestScores:f})}}else r({personalBestScores:[...o,{mode:i,score:s,date:new Date().toISOString()}]})}}),{name:"chromafall-user-storage"}));function Ox(r,t,i,s){const o=[],u=new Set,f=[[t,i]];for(;f.length>0;){const[m,v]=f.shift(),b=`${m},${v}`;if(u.has(b)||m<0||m>=pe.COLUMNS||v<0||v>=pe.ROWS)continue;const x=r[v][m];x&&(x.color!==s&&x.color!=="rainbow"&&s!=="rainbow"||(u.add(b),o.push(x),f.push([m-1,v]),f.push([m+1,v]),f.push([m,v-1]),f.push([m,v+1])))}return o}function Vx(r,t){const i=[],s=new Set,o=ex(t);for(let u=0;u<pe.ROWS;u++)for(let f=0;f<pe.COLUMNS;f++){const m=r[u][f];if(!m)continue;const v=`${f},${u}`;if(s.has(v))continue;const b=Ox(r,f,u,m.color);b.length>=o&&(i.push(b),b.forEach(x=>s.add(`${x.x},${x.y}`)))}return i}function jx(r,t){const i=Array(pe.ROWS).fill(null).map(()=>Array(pe.COLUMNS).fill(null));if(t==="down")for(let s=0;s<pe.COLUMNS;s++){let o=pe.ROWS-1;for(let u=pe.ROWS-1;u>=0;u--)r[u][s]&&(i[o][s]={...r[u][s],y:o},o--)}else if(t==="up")for(let s=0;s<pe.COLUMNS;s++){let o=0;for(let u=0;u<pe.ROWS;u++)r[u][s]&&(i[o][s]={...r[u][s],y:o},o++)}else if(t==="left")for(let s=0;s<pe.ROWS;s++){let o=0;for(let u=0;u<pe.COLUMNS;u++)r[s][u]&&(i[s][o]={...r[s][u],x:o},o++)}else if(t==="right")for(let s=0;s<pe.ROWS;s++){let o=pe.COLUMNS-1;for(let u=pe.COLUMNS-1;u>=0;u--)r[s][u]&&(i[s][o]={...r[s][u],x:o},o--)}return i}function Lx(r){for(let t=0;t<pe.ROWS;t++)for(let i=0;i<pe.COLUMNS;i++)if(r[t][i])return!1;return!0}function kx(r,t,i){const s=r.map(m=>[...m]),o=[],u=[],f=new Set;for(const m of t){if(m.specialType==="normal")continue;const v=`${m.x},${m.y}`;if(f.has(v))continue;f.add(v);const b=[];switch(m.specialType){case"bomb":{for(let x=-1;x<=ao.BOMB_RADIUS;x++)for(let E=-1;E<=ao.BOMB_RADIUS;E++){const C=m.x+E,z=m.y+x;if(C>=0&&C<pe.COLUMNS&&z>=0&&z<pe.ROWS){const B=s[z][C];B&&!t.includes(B)&&(B.specialType==="frozen"&&(B.frozenCount||2)>1?s[z][C]={...B,frozenCount:(B.frozenCount||2)-1}:(B.specialType,o.push(B),s[z][C]=null),b.push({x:C,y:z}))}}break}case"lightning":{for(let x=0;x<pe.ROWS;x++)for(let E=0;E<pe.COLUMNS;E++){const C=s[x][E];C&&C.color===m.color&&!t.includes(C)&&(C.specialType==="frozen"&&(C.frozenCount||2)>1?s[x][E]={...C,frozenCount:(C.frozenCount||2)-1}:C.specialType!=="stone"&&(o.push(C),s[x][E]=null),b.push({x:E,y:x}))}break}case"cross":{for(let x=0;x<pe.COLUMNS;x++){const E=s[m.y][x];E&&!t.includes(E)&&(E.specialType==="frozen"&&(E.frozenCount||2)>1?s[m.y][x]={...E,frozenCount:(E.frozenCount||2)-1}:E.specialType!=="stone"&&(o.push(E),s[m.y][x]=null),b.push({x,y:m.y}))}for(let x=0;x<pe.ROWS;x++){const E=s[x][m.x];E&&!t.includes(E)&&(E.specialType==="frozen"&&(E.frozenCount||2)>1?s[x][m.x]={...E,frozenCount:(E.frozenCount||2)-1}:E.specialType!=="stone"&&(o.push(E),s[x][m.x]=null),b.push({x:m.x,y:x}))}break}case"colorShift":{for(let x=-1;x<=1;x++)for(let E=-1;E<=1;E++){if(E===0&&x===0)continue;const C=m.x+E,z=m.y+x;if(C>=0&&C<pe.COLUMNS&&z>=0&&z<pe.ROWS){const B=s[z][C];B&&B.specialType!=="stone"&&B.specialType!=="frozen"&&(s[z][C]={...B,color:m.color},b.push({x:C,y:z}))}}break}case"shuffle":{const x=kd(i);for(let E=-1;E<=1;E++)for(let C=-1;C<=1;C++){if(C===0&&E===0)continue;const z=m.x+C,B=m.y+E;if(z>=0&&z<pe.COLUMNS&&B>=0&&B<pe.ROWS){const P=s[B][z];if(P&&P.specialType!=="stone"&&P.specialType!=="frozen"){const j=x[Math.floor(Math.random()*x.length)];s[B][z]={...P,color:j},b.push({x:z,y:B})}}}break}}b.length>0&&u.push({type:m.specialType,x:m.x,y:m.y,affectedBlocks:b})}return{additionalCleared:o,newBoard:s,effects:u}}function Ux(r,t){const i=r.map(u=>[...u]),s=[],o=new Set(t.map(u=>`${u.x},${u.y}`));for(let u=0;u<pe.ROWS;u++)for(let f=0;f<pe.COLUMNS;f++){const m=i[u][f];m?.specialType==="stone"&&[`${f-1},${u}`,`${f+1},${u}`,`${f},${u-1}`,`${f},${u+1}`].some(x=>o.has(x))&&(s.push(m),i[u][f]=null)}return{destroyedStones:s,newBoard:i}}function Bx(r,t){const i=t.map(o=>[...o]),s=[];for(const o of r)if(o.specialType==="frozen"){const u=o.frozenCount||2;u>1?i[o.y][o.x]={...o,frozenCount:u-1}:s.push(o)}else s.push(o);return{blocksToRemove:s,updatedBoard:i}}function zx(){const{board:r,currentBlock:t,currentBlocks:i,gameStatus:s,level:o,combo:u,chainCount:f,gravityDirection:m,activePowerUp:v,updateBoard:b,addScore:x,incrementCombo:E,resetCombo:C,incrementChain:z,resetChain:B,spawnBlock:P,softDrop:j,updateStatistics:O,updateMissionProgress:Z,updateLevelObjective:ne,checkPuzzleComplete:oe,gameMode:fe,statistics:ie}=qe(),{updateAchievement:R,addBattlePassXP:S}=Xn(),[A,M]=re.useState(!1),[D,k]=re.useState([]),[N,Qe]=re.useState(0),[mt,X]=re.useState([]),se=re.useRef(null),be=re.useRef(null),Le=re.useRef(0),U=re.useRef(!1),V=re.useRef(!1),le=v?.type==="timeSlow"?Z0(o)*2:Z0(o),ce=re.useCallback(async ve=>{const ue=Vx(ve,o);if(ue.length===0)return{result:null,newBoard:ve};let de=0,Ae=0;const Ue=[],Re=[];let ke=!1,De=ve.map(it=>[...it]);const we=ue.flat(),{blocksToRemove:tt,updatedBoard:St}=Bx(we,De);De=St;for(const it of tt)Ue.push({x:it.x,y:it.y,color:it.color}),De[it.y][it.x]=null,de++,it.specialType!=="normal"&&(Ae++,it.specialType==="multiplier"&&(ke=!0));k(Ue);const vt=kx(De,tt,o);De=vt.newBoard,de+=vt.additionalCleared.length,Re.push(...vt.effects);for(const it of vt.additionalCleared)Ue.push({x:it.x,y:it.y,color:it.color}),it.specialType!=="normal"&&Ae++;const Mt=Ux(De,[...tt,...vt.additionalCleared]);De=Mt.newBoard,de+=Mt.destroyedStones.length;for(const it of Mt.destroyedStones)Ue.push({x:it.x,y:it.y,color:it.color}),Ae++;Re.length>0&&X(Re);const nt=Lx(De),$e=(v?.type==="scoreMultiplier"?2:1)*(ke?2:1),hn=qe.getState().chainCount,as=qe.getState().combo,ua=qe.getState().isFeverMode,It=px({blocksCleared:de,chainCount:hn+1,comboCount:as,level:o,powerUpMultiplier:$e,perfectClear:nt,isFeverMode:ua,specialBlocksCleared:Ae}),Dn=qe.getState().addFeverGauge;Dn&&Dn(de*3+(hn+1)*10),await new Promise(it=>setTimeout(it,Ha.FUSION_ANIMATION_DURATION)),Re.length>0&&await new Promise(it=>setTimeout(it,Ha.SPECIAL_EFFECT_DURATION));const ci=jx(De,m);return k([]),X([]),{result:{clearedBlocks:[...tt,...vt.additionalCleared,...Mt.destroyedStones],score:It,chainCount:hn+1,isChainReaction:hn>0,specialEffects:Re},newBoard:ci}},[o,m,v]),ge=re.useCallback(async()=>{if(U.current)return;U.current=!0,M(!0);let ve=0,ue=0,de=0,Ae=qe.getState().board;for(B();;){const{result:Re,newBoard:ke}=await ce(Ae);if(!Re)break;Ae=ke,b(Ae),de++,ve+=Re.score,ue+=Re.clearedBlocks.length,z(),Qe(de),await new Promise(De=>setTimeout(De,Ha.CHAIN_DELAY))}if(ve>0){if(x(ve),E(),O({totalBlocksCleared:ie.totalBlocksCleared+ue,totalFusions:ie.totalFusions+1,maxChain:Math.max(ie.maxChain,de)}),Z("blocks_fused",ue),de>=5&&Z("chain",1),qe.getState().gameMode==="puzzle"){const ke=qe.getState();if(ne("score",ve),ne("clearBlocks",ue),de>0){const De=ke.levelObjectives.find(we=>we.type==="chains");De&&de>De.current&&ne("chains",de-De.current)}setTimeout(()=>{qe.getState().checkPuzzleComplete()},100)}R("chain_5",de),R("chain_10",de),R("chain_15",de),R("chain_20",de),S(Math.floor(ve/100)),be.current&&clearTimeout(be.current),be.current=window.setTimeout(()=>{C()},Ha.COMBO_TIMEOUT)}Qe(0),M(!1),U.current=!1,qe.getState().gameStatus==="playing"&&setTimeout(()=>{P()},50)},[ce,x,E,C,z,B,P,b,ie,O,Z,ne,R,S]);re.useEffect(()=>{i.length>0?V.current=!0:V.current&&s==="playing"&&!U.current&&(V.current=!1,ge())},[i,s,ge]),re.useEffect(()=>{if(s!=="playing"||A){se.current&&(clearInterval(se.current),se.current=null);return}Le.current=Date.now();const ve=()=>{const ue=Date.now(),de=qe.getState();de.currentBlocks.length>0&&!U.current&&ue-Le.current>=le&&(de.softDrop(),Le.current=ue)};return se.current=window.setInterval(ve,50),()=>{se.current&&(clearInterval(se.current),se.current=null)}},[s,le,A]),re.useEffect(()=>()=>{se.current&&clearInterval(se.current),be.current&&clearTimeout(be.current)},[]);const Ee=re.useCallback(()=>{if(i.length===0)return null;const{dx:ve,dy:ue}=ud[m];let de=1/0;for(const Ue of i){let Re=0,ke=Ue.x,De=Ue.y;for(;;){const we=ke+ve,tt=De+ue;if(we<0||we>=pe.COLUMNS||tt<0||tt>=pe.ROWS||r[tt]?.[we]!==null)break;Re++,ke=we,De=tt}de=Math.min(de,Re)}const Ae=i[0];return{x:Ae.x+ve*de,y:Ae.y+ue*de}},[i,r,m]);return{isProcessingFusion:A,fusionEffects:D,chainEffects:N,specialEffects:mt,getGhostPosition:Ee,dropSpeed:le}}function Px(r){const{gameStatus:t,moveBlock:i,softDrop:s,hardDrop:o,doHoldBlock:u,pauseGame:f,isPowerUpSelecting:m,setGravityDirection:v}=qe(),{settings:b}=Xn(),x=re.useRef({startX:0,startY:0,startTime:0,lastTapTime:0,isDragging:!1}),E=re.useRef(null),C=re.useCallback(j=>{!b.hapticEnabled||!navigator.vibrate||navigator.vibrate(dx[j])},[b.hapticEnabled]),z=re.useCallback(j=>{if(t!=="playing")return;const O=j.touches[0],Z=Date.now();x.current={startX:O.clientX,startY:O.clientY,startTime:Z,lastTapTime:x.current.lastTapTime,isDragging:!1},E.current=window.setTimeout(()=>{C("medium"),u(),x.current.isDragging=!0},qa.LONG_PRESS_DURATION)},[t,u,C]),B=re.useCallback(j=>{if(t!=="playing")return;const O=j.touches[0],{startX:Z,startY:ne,isDragging:oe}=x.current,fe=O.clientX-Z,ie=O.clientY-ne,R=Math.abs(fe),S=Math.abs(ie);if((R>10||S>10)&&E.current&&(clearTimeout(E.current),E.current=null),R>=qa.SWIPE_THRESHOLD||S>=qa.SWIPE_THRESHOLD){if(x.current.isDragging=!0,m){R>S?v(fe>0?"right":"left"):v(ie>0?"down":"up"),x.current.startX=O.clientX,x.current.startY=O.clientY;return}R>S&&R>=qa.SWIPE_THRESHOLD&&(fe>0?i("right"):i("left"),C("light"),x.current.startX=O.clientX),S>R&&S>=qa.SWIPE_THRESHOLD&&(ie>0&&(s(),C("light")),x.current.startY=O.clientY)}},[t,m,i,s,v,C]),P=re.useCallback(j=>{if(t!=="playing")return;E.current&&(clearTimeout(E.current),E.current=null);const{startX:O,startY:Z,startTime:ne,lastTapTime:oe,isDragging:fe}=x.current,ie=Date.now(),R=ie-ne;if(!fe&&R<qa.LONG_PRESS_DURATION){const S=j.changedTouches[0],A=Math.abs(S.clientX-O),M=Math.abs(S.clientY-Z);A<10&&M<10&&(ie-oe<qa.DOUBLE_TAP_DELAY?(C("medium"),o()):C("selection"),x.current.lastTapTime=ie)}if(fe){const A=j.changedTouches[0].clientY-Z,M=A/R*1e3;A>0&&M>qa.FAST_SWIPE_VELOCITY&&(C("heavy"),o())}x.current.isDragging=!1},[t,o,C]);return re.useEffect(()=>{const j=r.current;if(j)return j.addEventListener("touchstart",z,{passive:!0}),j.addEventListener("touchmove",B,{passive:!0}),j.addEventListener("touchend",P,{passive:!0}),()=>{j.removeEventListener("touchstart",z),j.removeEventListener("touchmove",B),j.removeEventListener("touchend",P),E.current&&clearTimeout(E.current)}},[r,z,B,P]),{triggerHaptic:C}}class Gx{audioContext=null;masterGain=null;musicGain=null;sfxGain=null;currentOscillators=[];constructor(){this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.musicGain=this.audioContext.createGain(),this.sfxGain=this.audioContext.createGain(),this.musicGain.connect(this.masterGain),this.sfxGain.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination)}catch{console.warn("Web Audio API not supported")}}resume(){this.audioContext?.state==="suspended"&&this.audioContext.resume()}setMusicVolume(t){this.musicGain&&(this.musicGain.gain.value=t)}setSfxVolume(t){this.sfxGain&&(this.sfxGain.gain.value=t)}playTone(t,i,s="sine",o=.3){if(!this.audioContext||!this.sfxGain)return;const u=this.audioContext.createOscillator(),f=this.audioContext.createGain();u.type=s,u.frequency.value=t,f.gain.setValueAtTime(o,this.audioContext.currentTime),f.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+i),u.connect(f),f.connect(this.sfxGain),u.start(),u.stop(this.audioContext.currentTime+i)}playSoundEffect(t){if(this.audioContext)switch(t){case"blockLand":this.playTone(200,.1,"triangle",.2);break;case"blockMove":this.playTone(400,.03,"sine",.1);break;case"blockRotate":this.playTone(600,.05,"sine",.15),setTimeout(()=>this.playTone(800,.05,"sine",.12),30);break;case"hardDrop":this.playTone(150,.08,"triangle",.25),setTimeout(()=>this.playTone(100,.1,"triangle",.2),50);break;case"fusion":this.playTone(440,.15,"sine",.3),setTimeout(()=>this.playTone(554,.15,"sine",.3),50),setTimeout(()=>this.playTone(659,.2,"sine",.3),100);break;case"chain":const i=330;for(let f=0;f<4;f++)setTimeout(()=>{this.playTone(i*Math.pow(1.2,f),.1,"sine",.25)},f*80);break;case"combo":this.playTone(523,.08,"square",.2),setTimeout(()=>this.playTone(659,.08,"square",.2),60);break;case"levelUp":[523,659,784,1047].forEach((f,m)=>{setTimeout(()=>this.playTone(f,.2,"sine",.3),m*100)});break;case"powerUpGet":this.playTone(880,.1,"sine",.3),setTimeout(()=>this.playTone(1100,.15,"sine",.3),80);break;case"powerUpUse":this.playTone(440,.1,"sawtooth",.2),setTimeout(()=>this.playTone(880,.2,"sawtooth",.3),100);break;case"gameOver":[440,415,392,370].forEach((f,m)=>{setTimeout(()=>this.playTone(f,.3,"sine",.25),m*200)});break;case"highScore":[523,659,784,880,1047].forEach((f,m)=>{setTimeout(()=>this.playTone(f,.2,"sine",.3),m*120)});break;case"achievement":this.playTone(659,.15,"sine",.3),setTimeout(()=>this.playTone(784,.15,"sine",.3),100),setTimeout(()=>this.playTone(1047,.25,"sine",.35),200);break;case"buttonClick":this.playTone(800,.05,"sine",.15);break;case"rewardGet":this.playTone(698,.1,"sine",.25),setTimeout(()=>this.playTone(880,.15,"sine",.3),80);break;case"purchaseSuccess":this.playTone(523,.1,"sine",.3),setTimeout(()=>this.playTone(659,.1,"sine",.3),100),setTimeout(()=>this.playTone(784,.2,"sine",.35),200);break;case"wheelSpin":this.playTone(300,.05,"triangle",.2);break;case"jackpot":for(let f=0;f<8;f++)setTimeout(()=>{this.playTone(440+f*100,.15,"sine",.3)},f*100);break}}startBGM(t=1){if(!this.audioContext||!this.musicGain)return;this.stopBGM();const s=60/(120+t*2),o=[261.63,293.66,329.63,392,440,523.25,587.33,659.25],f=setInterval(()=>{if(!this.audioContext||!this.musicGain)return;const m=this.audioContext.createOscillator(),v=this.audioContext.createGain();m.type="sine",m.frequency.value=o[0]/2,v.gain.setValueAtTime(.15,this.audioContext.currentTime),v.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s*.8),m.connect(v),v.connect(this.musicGain),m.start(),m.stop(this.audioContext.currentTime+s);const b=this.audioContext.createOscillator(),x=this.audioContext.createGain();b.type="triangle",b.frequency.value=o[Math.floor(Math.random()*o.length)],x.gain.setValueAtTime(.08,this.audioContext.currentTime),x.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s*.5),b.connect(x),x.connect(this.musicGain),b.start(),b.stop(this.audioContext.currentTime+s*.5),this.currentOscillators.push(m,b)},s*1e3);this.bgmInterval=f}stopBGM(){this.bgmInterval&&clearInterval(this.bgmInterval),this.currentOscillators.forEach(t=>{try{t.stop()}catch{}}),this.currentOscillators=[]}cleanup(){this.stopBGM(),this.audioContext&&this.audioContext.close()}}let Zf=null;function qx(){return Zf||(Zf=new Gx),Zf}function oi(){const{settings:r}=Xn(),t=re.useRef(null);re.useEffect(()=>{t.current=qx(),t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0);const u=()=>{t.current?.resume(),window.removeEventListener("click",u),window.removeEventListener("touchstart",u)};return window.addEventListener("click",u),window.addEventListener("touchstart",u),()=>{window.removeEventListener("click",u),window.removeEventListener("touchstart",u)}},[]),re.useEffect(()=>{t.current&&(t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0))},[r.soundEnabled,r.musicEnabled,r.soundVolume,r.musicVolume]);const i=re.useCallback(u=>{r.soundEnabled&&t.current&&t.current.playSoundEffect(u)},[r.soundEnabled]),s=re.useCallback((u=1)=>{r.musicEnabled&&t.current&&t.current.startBGM(u)},[r.musicEnabled]),o=re.useCallback(()=>{t.current?.stopBGM()},[]);return{playSound:i,startBGM:s,stopBGM:o}}const Hx={red:0,blue:1,green:2,yellow:3,purple:4,orange:3,cyan:1,pink:0,rainbow:0},ru=re.memo(function({color:t,size:i,isGhost:s=!1,isFusing:o=!1,isMatched:u=!1,specialType:f="normal",frozenCount:m=0}){const{settings:v,equippedSkinId:b}=Xn(),x=re.useMemo(()=>ho[b]||ho.classic,[b]),E=Hx[t]??0,C=x.colors[E]||x.colors[0],z=v.colorBlindMode?J1:Ld,B=v.colorBlindMode?z[t]:C,P=v.colorBlindMode?W1[t]:null,j=t==="rainbow",O=f!=="normal",Z=gv[f],ne=f==="frozen",oe=f==="stone";if(s)return p.jsx("div",{className:"absolute rounded-md box-border transition-all duration-75",style:{width:i-2,height:i-2,borderColor:B,borderWidth:"2px",borderStyle:"dashed",backgroundColor:`${B}15`,boxShadow:`0 0 10px ${B}40`}});if(oe)return p.jsxs(ae.div,{className:"absolute rounded-md overflow-hidden",style:{width:i-2,height:i-2,background:"linear-gradient(145deg, #6c757d, #495057)",border:"2px solid #343a40"},initial:!1,animate:{scale:o?[1,1.1,0]:1},transition:{scale:{duration:.3}},children:[p.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"}}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-lg",children:""})]});const fe=()=>{if(j)return"linear-gradient(135deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff)";if(ne)return`linear-gradient(145deg, ${B}90, ${B}60)`;switch(x.innerEffect){case"glow":return`radial-gradient(circle at 30% 30%, ${B}dd, ${B}88 70%, ${B}44)`;case"glass":return`linear-gradient(145deg, ${B}ee, ${B}aa 50%, ${B}cc)`;case"gradient":return`linear-gradient(135deg, ${B}, ${B}88, ${B}cc)`;case"flat":return B;case"metallic":return`linear-gradient(145deg, ${B}ff, ${B}66 30%, ${B}cc 70%, ${B}ff)`;case"matte":return`linear-gradient(180deg, ${B}ee, ${B}bb)`;default:return B}},ie=()=>{if(x.glowIntensity<=0)return"none";const M=Math.round(x.glowIntensity*20);return`0 0 ${M}px ${B}, 0 0 ${M*2}px ${B}66`},R=()=>{switch(x.texture){case"lines":return"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.1) 2px, rgba(255,255,255,0.1) 4px)";case"dots":return"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.2) 1px, transparent 1px)";case"circuit":return"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%)";case"cracks":return"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.2) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.15) 61%, transparent 62%)";case"noise":return`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`;default:return"none"}},S=()=>{const M={scale:o?[1,1.2,0]:u?[1,1.1,1]:1,filter:o?"brightness(1.5)":"brightness(1)",rotate:j?360:0};switch(x.animation){case"pulse":return{...M,boxShadow:[`0 0 5px ${B}`,`0 0 20px ${B}`,`0 0 5px ${B}`]};case"shimmer":return M;case"fire":return{...M,y:[0,-2,0,-1,0]};case"ice":return{...M,opacity:[1,.9,1]};case"electric":return{...M,x:[-1,1,-1,0]};default:return M}},A=()=>{const M={scale:{duration:o?.3:.2},rotate:{duration:3,repeat:1/0,ease:"linear"}};switch(x.animation){case"pulse":return{...M,boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}};case"fire":return{...M,y:{duration:.3,repeat:1/0,ease:"easeInOut"}};case"ice":return{...M,opacity:{duration:2,repeat:1/0,ease:"easeInOut"}};case"electric":return{...M,x:{duration:.1,repeat:1/0}};default:return M}};return p.jsxs(ae.div,{className:"absolute overflow-hidden block-3d",style:{width:i-2,height:i-2,borderRadius:x.borderRadius,background:fe(),opacity:o?.8:1,zIndex:o?10:1,border:ne?"2px solid #a5d8ff":O?`2px solid ${Z?.color||B}`:x.borderWidth>0?`${x.borderWidth}px ${x.borderStyle} ${B}88`:"none",boxShadow:O&&!ne?`0 0 8px ${Z?.color||B}60`:ie()},initial:!1,animate:S(),transition:A(),children:[x.innerEffect==="glossy"&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-transparent to-black/10 pointer-events-none"}),x.innerEffect==="glass"&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent pointer-events-none"}),x.innerEffect==="metallic"&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30 pointer-events-none"}),p.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius,border:x.innerEffect==="flat"?"none":"1px solid rgba(255,255,255,0.2)"}}),x.texture!=="none"&&p.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-50",style:{backgroundImage:R(),backgroundSize:x.texture==="dots"?"8px 8px":"100% 100%",borderRadius:x.borderRadius}}),x.animation==="shimmer"&&p.jsx(ae.div,{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(110deg, transparent 20%, rgba(255,255,255,0.4) 50%, transparent 80%)",borderRadius:x.borderRadius},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}}),x.animation==="fire"&&p.jsx(ae.div,{className:"absolute -inset-1 pointer-events-none",style:{background:`radial-gradient(ellipse at bottom, ${B}88 0%, transparent 70%)`,filter:"blur(2px)",borderRadius:x.borderRadius},animate:{opacity:[.5,.8,.5],scale:[1,1.1,1]},transition:{duration:.5,repeat:1/0}}),x.animation==="ice"&&p.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(200,230,255,0.2) 100%)",borderRadius:x.borderRadius}}),x.animation==="electric"&&p.jsx(ae.div,{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius},animate:{boxShadow:[`inset 0 0 5px ${B}`,`inset 0 0 15px ${B}, 0 0 10px ${B}`,`inset 0 0 5px ${B}`]},transition:{duration:.2,repeat:1/0}}),ne&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-200/50 to-blue-300/30"}),p.jsx(ae.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.4) 50%, transparent 60%)",backgroundSize:"200% 200%"},animate:{backgroundPosition:["0% 0%","200% 200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),m>0&&p.jsx("div",{className:"absolute bottom-0 right-0 bg-cyan-600 text-white text-xs font-bold px-1 rounded-tl",children:m})]}),O&&!ne&&Z?.icon&&p.jsx(ae.div,{className:"absolute inset-0 flex items-center justify-center text-base drop-shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:Z.icon}),o&&p.jsx(ae.div,{className:"absolute inset-0 rounded-md",style:{boxShadow:`0 0 20px 5px ${B}`}}),P&&p.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{background:Fx(P)}}),O&&!ne&&p.jsx(ae.div,{className:"absolute inset-0 rounded-md pointer-events-none",animate:{boxShadow:[`0 0 5px ${Z?.color||B}40`,`0 0 15px ${Z?.color||B}60`,`0 0 5px ${Z?.color||B}40`]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})});function Fx(r){switch(r){case"striped":return"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.3) 5px, rgba(0,0,0,0.3) 10px)";case"dotted":return"radial-gradient(circle, rgba(0,0,0,0.3) 2px, transparent 2.5px) 0 0 / 8px 8px";case"crosshatch":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px)";case"diagonal":return"repeating-linear-gradient(135deg, transparent, transparent 3px, rgba(255,255,255,0.5) 3px, rgba(255,255,255,0.5) 5px)";case"grid":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px)";case"waves":return"repeating-linear-gradient(45deg, transparent 0px, transparent 5px, rgba(255,255,255,0.3) 5px, rgba(255,255,255,0.3) 10px)";case"circles":return"radial-gradient(circle at 50% 50%, transparent 3px, rgba(255,255,255,0.3) 3px, rgba(255,255,255,0.3) 5px, transparent 5px)";default:return"none"}}function Qx({cellSize:r}){const t=re.useRef(null),{triggerHaptic:i}=Px(t),{playSound:s,startBGM:o,stopBGM:u}=oi(),{board:f,currentBlock:m,currentBlocks:v,gameStatus:b,level:x,gravityDirection:E,isPowerUpSelecting:C,garbagePending:z,garbageTimer:B}=qe(),{settings:P}=Xn(),{fusionEffects:j,chainEffects:O,specialEffects:Z,getGhostPosition:ne}=zx(),oe=re.useMemo(()=>{if(r)return r;if(typeof window<"u"){const S=window.innerWidth<768,A=Math.min(window.innerWidth-32,450),M=window.innerHeight-200,D=Math.floor(A/pe.COLUMNS),k=Math.floor(M/pe.ROWS);return Math.min(D,k,S?38:45)}return 40},[r]),fe=oe*pe.COLUMNS,ie=oe*pe.ROWS,R=re.useMemo(()=>P.showGhostBlock&&m?ne():null,[m,P.showGhostBlock,ne]);return re.useEffect(()=>{b==="playing"?o(x):u()},[b,x,o,u]),re.useEffect(()=>{j.length>0&&(s("fusion"),i("medium"))},[j,s,i]),re.useEffect(()=>{O>1&&(s("chain"),i("heavy"))},[O,s,i]),p.jsx("div",{className:"relative p-1 rounded-xl bg-gradient-to-b from-gray-800 to-gray-900 shadow-2xl border border-white/10",children:p.jsxs("div",{ref:t,className:"relative overflow-hidden rounded-lg bg-[#0a0a15] select-none touch-none",style:{width:fe,height:ie},children:[p.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:p.jsxs("svg",{width:"100%",height:"100%",children:[p.jsx("defs",{children:p.jsx("pattern",{id:"grid",width:oe,height:oe,patternUnits:"userSpaceOnUse",children:p.jsx("path",{d:`M ${oe} 0 L 0 0 0 ${oe}`,fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"})})}),p.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),E==="down"&&p.jsx("div",{className:"absolute top-0 left-0 right-0 pointer-events-none transition-opacity duration-500",style:{height:oe*3,background:"linear-gradient(to bottom, rgba(255, 50, 50, 0.15) 0%, transparent 100%)",borderBottom:"1px dashed rgba(255, 50, 50, 0.3)"}}),R&&m&&R.y!==m.y&&p.jsx("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:R.x*oe+1,top:R.y*oe+1,zIndex:0},children:p.jsx(ru,{color:m.color,size:oe,isGhost:!0})}),p.jsx(un,{children:f.map((S,A)=>S.map((M,D)=>{if(!M)return null;const k=j.some(N=>N.x===D&&N.y===A);return p.jsx(ae.div,{className:"absolute",style:{left:D*oe+1,top:A*oe+1,zIndex:10},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:p.jsx(ru,{color:M.color,size:oe,isFusing:k,specialType:M.specialType,frozenCount:M.frozenCount})},M.id)}))}),p.jsx(un,{children:v.map((S,A)=>p.jsx(ae.div,{className:"absolute pointer-events-none",style:{left:S.x*oe+1,top:S.y*oe+1,zIndex:20},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.05},children:p.jsx(ru,{color:S.color,size:oe,specialType:S.specialType})},S.id||`falling-${A}`))}),z>0&&p.jsx(ae.div,{className:"absolute bottom-0 left-0 right-0 flex justify-center items-center gap-1 py-1 bg-red-600/80 backdrop-blur-sm z-25",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:p.jsxs("span",{className:"text-white text-xs font-bold",children:[" GARBAGE INCOMING: ",z," ROW",z>1?"S":""]})}),p.jsx("div",{className:"absolute inset-0 pointer-events-none z-30",children:p.jsxs(un,{children:[j.map((S,A)=>p.jsx(ae.div,{className:"absolute rounded-full blur-md",style:{left:S.x*oe,top:S.y*oe,width:oe,height:oe,backgroundColor:Ld[S.color]||"#fff"},initial:{scale:.5,opacity:.8},animate:{scale:2.5,opacity:0},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"}},`fusion-${A}`)),O>1&&p.jsx(ae.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:.5,opacity:0,y:20},animate:{scale:1.2,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:p.jsxs("div",{className:"text-center",children:[p.jsxs("h2",{className:"text-5xl font-black italic text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-orange-500 drop-shadow-[0_0_15px_rgba(255,165,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:[O," CHAIN!"]}),p.jsx("p",{className:"text-white font-bold text-lg drop-shadow-md",children:"COMBO BOOSTER"})]})}),Z.map((S,A)=>p.jsxs(ae.div,{className:"absolute pointer-events-none",style:{left:S.x*oe,top:S.y*oe,width:oe,height:oe},initial:{scale:1,opacity:1},animate:{scale:2.5,opacity:0},transition:{duration:.5},children:[S.type==="bomb"&&p.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-orange-500 to-red-600 blur-md"}),S.type==="lightning"&&p.jsx("div",{className:"w-full h-full bg-yellow-400 blur-lg animate-pulse"}),S.type==="cross"&&p.jsxs("div",{className:"w-full h-full",children:[p.jsx("div",{className:"absolute inset-x-0 top-1/2 h-2 -translate-y-1/2 bg-green-400 blur-sm"}),p.jsx("div",{className:"absolute inset-y-0 left-1/2 w-2 -translate-x-1/2 bg-green-400 blur-sm"})]})]},`special-${A}`))]})}),p.jsx(un,{children:C&&p.jsx(ae.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-white font-bold text-xl mb-6 neon-text",children:"  "}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx("div",{}),p.jsx("button",{onClick:()=>qe.getState().setGravityDirection("up"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),p.jsx("div",{}),p.jsx("button",{onClick:()=>qe.getState().setGravityDirection("left"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),p.jsx("button",{onClick:()=>qe.getState().setGravityDirection("down"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),p.jsx("button",{onClick:()=>qe.getState().setGravityDirection("right"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""})]})]})})}),b==="paused"&&p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] z-30 flex items-center justify-center",children:p.jsx("h2",{className:"text-3xl font-bold text-white tracking-widest",style:{fontFamily:"var(--font-display)"},children:"PAUSED"})})]})})}function ty({cellSize:r=24,maxBlocks:t=fx}){const{nextBlocks:i,nextSpecialTypes:s}=qe(),o=i.slice(0,t),u=s?.slice(0,t)||[];return p.jsxs("div",{className:"glass-panel rounded-xl p-3 flex flex-col items-center min-w-[60px]",children:[p.jsx("h3",{className:"text-[10px] font-bold text-gray-400 mb-3 tracking-widest text-center",children:"NEXT"}),p.jsx("div",{className:"flex flex-col gap-3 items-center",children:o.map((f,m)=>p.jsxs(ae.div,{className:"relative",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:m*.1},style:{transform:`scale(${m===0?1:.8})`,opacity:m===0?1:.6,filter:m===0?"none":"grayscale(30%)"},children:[p.jsx(ru,{color:f,size:r,specialType:u[m]||"normal"}),m===0&&p.jsx("div",{className:"absolute -inset-2 rounded-full border border-white/20 animate-pulse pointer-events-none"})]},`next-${m}`))})]})}function Yx({visible:r=!0}){const{playSound:t}=oi(),i=re.useRef(null);re.useEffect(()=>{const m=new Set;let v=null,b=null,x=null;const E=()=>{v&&clearInterval(v),x&&clearTimeout(x),v=null,x=null,b=null},C=P=>{if(m.has(P.code)){P.preventDefault();return}m.add(P.code);const j=qe.getState();if(P.code==="Escape"||P.code==="KeyP"){j.gameStatus==="playing"?j.pauseGame():j.gameStatus==="paused"&&j.resumeGame();return}if(j.gameStatus==="playing"){if(j.isPowerUpSelecting){P.code==="ArrowUp"?j.setGravityDirection("up"):P.code==="ArrowDown"?j.setGravityDirection("down"):P.code==="ArrowLeft"?j.setGravityDirection("left"):P.code==="ArrowRight"&&j.setGravityDirection("right");return}if(P.code==="ArrowLeft"||P.code==="KeyA"){P.preventDefault(),E(),j.moveBlock("left"),b="left",x=window.setTimeout(()=>{b==="left"&&(v=window.setInterval(()=>qe.getState().moveBlock("left"),50))},250);return}if(P.code==="ArrowRight"||P.code==="KeyD"){P.preventDefault(),E(),j.moveBlock("right"),b="right",x=window.setTimeout(()=>{b==="right"&&(v=window.setInterval(()=>{qe.getState().moveBlock("right")},50))},250);return}if(P.code==="ArrowDown"||P.code==="KeyS"){P.preventDefault(),j.softDrop();return}if(P.code==="ArrowUp"||P.code==="KeyW"){P.preventDefault(),j.rotateBlock();return}if(P.code==="Space"){P.preventDefault(),j.hardDrop();return}}},z=P=>{m.delete(P.code),(P.code==="ArrowLeft"||P.code==="KeyA")&&b==="left"&&E(),(P.code==="ArrowRight"||P.code==="KeyD")&&b==="right"&&E()},B=()=>{m.clear(),E()};return window.addEventListener("keydown",C),window.addEventListener("keyup",z),window.addEventListener("blur",B),()=>{window.removeEventListener("keydown",C),window.removeEventListener("keyup",z),window.removeEventListener("blur",B),E()}},[]);const s=re.useCallback((m,v="buttonClick")=>{t(v),m()},[t]),o=re.useCallback(m=>{t("blockMove"),(()=>{qe.getState().moveBlock(m)})(),i.current&&clearInterval(i.current),i.current=window.setInterval(()=>{t("blockMove"),qe.getState().moveBlock(m)},80)},[t]),u=re.useCallback(()=>{i.current&&(clearInterval(i.current),i.current=null)},[]),f=qe(m=>m.currentBlocks);return r?p.jsx("div",{className:"w-full px-3 pb-4 pt-2 select-none touch-none",children:p.jsxs("div",{className:"flex justify-between items-center gap-3 max-w-md mx-auto",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Jf,{icon:"",onStart:()=>o("left"),onEnd:u}),p.jsx(Jf,{icon:"",onStart:()=>s(()=>qe.getState().softDrop(),"blockMove")}),p.jsx(Jf,{icon:"",onStart:()=>o("right"),onEnd:u})]}),p.jsxs(ae.button,{className:`w-14 h-14 rounded-2xl flex flex-col items-center justify-center
                     text-white font-bold shadow-lg border-b-4
                     active:border-b-0 active:translate-y-1 transition-all
                     ${f.length>1?"bg-gradient-to-br from-purple-500 to-indigo-600 border-purple-700":"bg-slate-700 border-slate-600 opacity-50"}`,whileTap:{scale:.9},onTouchStart:m=>{m.preventDefault(),s(()=>qe.getState().rotateBlock(),"blockRotate")},onMouseDown:()=>s(()=>qe.getState().rotateBlock(),"blockRotate"),children:[p.jsx("span",{className:"text-xl",children:""}),p.jsx("span",{className:"text-[8px] opacity-80",children:""})]}),p.jsxs(ae.button,{className:`w-20 h-14 rounded-2xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500\r
                     flex items-center justify-center gap-1 text-white font-bold\r
                     shadow-lg shadow-orange-500/30 border-b-4 border-orange-700\r
                     active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.95},onTouchStart:m=>{m.preventDefault(),s(()=>qe.getState().hardDrop(),"hardDrop")},onMouseDown:()=>s(()=>qe.getState().hardDrop(),"hardDrop"),children:[p.jsx("span",{className:"text-xl",children:""}),p.jsx("span",{className:"text-sm",children:"DROP"})]})]})}):null}function Jf({icon:r,onStart:t,onEnd:i}){return p.jsx(ae.button,{className:`w-14 h-14 rounded-2xl bg-slate-700/90 backdrop-blur\r
                 flex items-center justify-center text-white text-2xl font-bold\r
                 shadow-lg border-b-4 border-slate-600\r
                 active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.9},onTouchStart:s=>{s.preventDefault(),t()},onTouchEnd:s=>{s.preventDefault(),i?.()},onMouseDown:t,onMouseUp:i,onMouseLeave:i,children:r})}function Xx(){const{powerUps:r,gameStatus:t,usePowerUp:i,toggleGravitySelection:s,activatePowerUp:o}=qe(),{playSound:u}=oi(),f=m=>{if(t!=="playing")return;const v=r.find(b=>b.type===m);if(!(!v||v.count<=0)){if(u("powerUpUse"),m==="gravityShift"){s(!0),i(m);return}i(m),(m==="timeSlow"||m==="scoreMultiplier"||m==="freeze")&&(o({type:m,count:1,isActive:!0,remainingTime:m==="scoreMultiplier"?30:5}),setTimeout(()=>{qe.getState().deactivatePowerUp()},m==="scoreMultiplier"?3e4:5e3))}};return r.length===0?null:p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:p.jsx(un,{children:r.map(m=>{const v=ux[m.type];return p.jsxs(ae.button,{className:`relative flex flex-col items-center gap-1 p-2 bg-game-panel/80 rounded-lg\r
                         hover:bg-game-accent/30 active:scale-95 transition-all border border-white/10\r
                         disabled:opacity-50 disabled:cursor-not-allowed`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:()=>f(m.type),disabled:t!=="playing"||m.count<=0,title:`${v.name}: ${v.description}`,children:[p.jsx("span",{className:"text-2xl",children:v.icon}),p.jsx("span",{className:"text-xs text-gray-400",children:v.name}),p.jsx("span",{className:`absolute -top-1 -right-1 w-5 h-5 bg-game-accent rounded-full\r
                             text-xs font-bold flex items-center justify-center text-white`,children:m.count})]},m.type)})})})}function Kx(){const{score:r,level:t,combo:i,chainCount:s,gravityDirection:o,gameTime:u,activePowerUp:f,statistics:m,feverGauge:v,isFeverMode:b,gameMode:x,movesRemaining:E,puzzleLevel:C,levelObjectives:z}=qe(),B=x==="puzzle",P=O=>{const Z=Math.floor(O/60),ne=O%60;return`${Z}:${ne.toString().padStart(2,"0")}`},j=r>m.highScore&&r>0;return p.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[p.jsxs("div",{className:"glass-panel p-4 rounded-xl text-center relative overflow-hidden group",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"}),p.jsx("p",{className:"text-xs font-bold text-gray-400 tracking-wider mb-1",children:"SCORE"}),p.jsx(ae.p,{initial:{scale:1.1},animate:{scale:1},className:`text-2xl font-mono font-bold ${j?"text-yellow-400 neon-text":"text-white"}`,children:r.toLocaleString()},r),j&&p.jsx("span",{className:"absolute top-2 right-2 text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded font-bold animate-pulse",children:"NEW"})]}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:B?p.jsxs(p.Fragment,{children:[p.jsx(Wc,{label:"PUZZLE",value:`Lv.${C}`,color:"text-purple-400"}),p.jsx(Wc,{label:"MOVES",value:E,color:E<=5?"text-red-400":"text-yellow-400"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Wc,{label:"LEVEL",value:t,color:"text-cyan-400"}),p.jsx(Wc,{label:"TIME",value:P(u),color:"text-gray-300",font:"font-mono"})]})}),B&&z.length>0&&p.jsxs("div",{className:"glass-panel p-3 rounded-xl",children:[p.jsx("p",{className:"text-xs font-bold text-purple-300 mb-2",children:" OBJECTIVES"}),p.jsx("div",{className:"space-y-2",children:z.map((O,Z)=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${O.completed?"bg-green-500":"bg-gray-600"}`,children:O.completed?"":""}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between items-center text-xs",children:[p.jsxs("span",{className:"text-gray-300",children:[O.type==="score"&&"",O.type==="clearBlocks"&&" ",O.type==="chains"&&"",O.type==="clearColor"&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"w-3 h-3 rounded",style:{background:Ld[O.color]}})," "]})]}),p.jsxs("span",{className:O.completed?"text-green-400":"text-white",children:[O.current,"/",O.target]})]}),p.jsx("div",{className:"w-full bg-gray-700 h-1 rounded-full mt-1 overflow-hidden",children:p.jsx("div",{className:`h-full ${O.completed?"bg-green-500":"bg-purple-500"}`,style:{width:`${Math.min(100,O.current/O.target*100)}%`}})})]})]},Z))})]}),p.jsx(un,{children:(i>1||s>0)&&p.jsxs(ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex gap-2",children:[i>1&&p.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-orange-900/20 border-orange-500/30",children:[p.jsx("span",{className:"text-[10px] text-orange-300",children:"COMBO"}),p.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["x",i]})]}),s>0&&p.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-purple-900/20 border-purple-500/30",children:[p.jsx("span",{className:"text-[10px] text-purple-300",children:"CHAIN"}),p.jsx("span",{className:"text-lg font-bold text-purple-400",children:s})]})]})}),p.jsxs("div",{className:`glass-panel p-3 rounded-xl ${b?"border-2 border-orange-500 bg-orange-900/30":""}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:`text-xs font-bold ${b?"text-orange-300":"text-gray-400"}`,children:b?" FEVER MODE!":"FEVER GAUGE"}),p.jsxs("span",{className:`text-xs font-mono ${b?"text-orange-400":"text-gray-500"}`,children:[Math.floor(v||0),"%"]})]}),p.jsx("div",{className:"w-full bg-gray-700/50 h-3 rounded-full overflow-hidden",children:p.jsx(ae.div,{className:`h-full ${b?"bg-gradient-to-r from-orange-500 via-red-500 to-yellow-500":"bg-gradient-to-r from-orange-600 to-yellow-500"}`,initial:!1,animate:{width:`${Math.min(v||0,js.MAX_GAUGE)}%`},transition:{duration:.3},style:{boxShadow:b?"0 0 10px #ff6b00":"none"}})}),b&&p.jsx(ae.p,{className:"text-center text-xs text-orange-300 mt-1 font-bold",animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},children:"x3 SCORE MULTIPLIER!"})]}),p.jsxs("div",{className:"glass-panel p-3 rounded-xl flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-gray-400",children:"GRAVITY"}),p.jsx(ae.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},className:"text-xl bg-white/10 w-8 h-8 rounded flex items-center justify-center",children:hx[o]},o)]}),p.jsx(un,{children:f&&p.jsxs(ae.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"glass-panel p-3 rounded-xl border-l-4 border-blue-500 bg-blue-900/20",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("span",{className:"text-xs font-bold text-blue-300",children:"ACTIVE EFFECT"}),f.remainingTime&&p.jsxs("span",{className:"text-xs font-mono text-white",children:[f.remainingTime,"s"]})]}),p.jsxs("div",{className:"text-sm text-white font-medium flex items-center gap-2",children:[f.type==="timeSlow"&&" Time Slow",f.type==="scoreMultiplier"&&" x2 Score",f.type==="freeze"&&" Frozen"]}),f.remainingTime&&p.jsx("div",{className:"w-full bg-gray-700 h-1 mt-2 rounded-full overflow-hidden",children:p.jsx(ae.div,{className:"h-full bg-blue-400",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:f.remainingTime,ease:"linear"}})})]})})]})}function Wc({label:r,value:t,color:i,font:s=""}){return p.jsxs("div",{className:"glass-panel p-2 rounded-lg text-center flex flex-col justify-center min-h-[60px]",children:[p.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-0.5",children:r}),p.jsx("p",{className:`text-lg font-bold ${i} ${s}`,children:t})]})}var Ud={};(function r(t,i,s,o){var u=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),f=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=(function(){if(!t.OffscreenCanvas)return!1;try{var U=new OffscreenCanvas(1,1),V=U.getContext("2d");V.fillRect(0,0,1,1);var le=U.transferToImageBitmap();V.createPattern(le,"no-repeat")}catch{return!1}return!0})();function v(){}function b(U){var V=i.exports.Promise,le=V!==void 0?V:t.Promise;return typeof le=="function"?new le(U):(U(v,v),null)}var x=(function(U,V){return{transform:function(le){if(U)return le;if(V.has(le))return V.get(le);var ce=new OffscreenCanvas(le.width,le.height),ge=ce.getContext("2d");return ge.drawImage(le,0,0),V.set(le,ce),ce},clear:function(){V.clear()}}})(m,new Map),E=(function(){var U=Math.floor(16.666666666666668),V,le,ce={},ge=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(V=function(Ee){var ve=Math.random();return ce[ve]=requestAnimationFrame(function ue(de){ge===de||ge+U-1<de?(ge=de,delete ce[ve],Ee()):ce[ve]=requestAnimationFrame(ue)}),ve},le=function(Ee){ce[Ee]&&cancelAnimationFrame(ce[Ee])}):(V=function(Ee){return setTimeout(Ee,U)},le=function(Ee){return clearTimeout(Ee)}),{frame:V,cancel:le}})(),C=(function(){var U,V,le={};function ce(ge){function Ee(ve,ue){ge.postMessage({options:ve||{},callback:ue})}ge.init=function(ue){var de=ue.transferControlToOffscreen();ge.postMessage({canvas:de},[de])},ge.fire=function(ue,de,Ae){if(V)return Ee(ue,null),V;var Ue=Math.random().toString(36).slice(2);return V=b(function(Re){function ke(De){De.data.callback===Ue&&(delete le[Ue],ge.removeEventListener("message",ke),V=null,x.clear(),Ae(),Re())}ge.addEventListener("message",ke),Ee(ue,Ue),le[Ue]=ke.bind(null,{data:{callback:Ue}})}),V},ge.reset=function(){ge.postMessage({reset:!0});for(var ue in le)le[ue](),delete le[ue]}}return function(){if(U)return U;if(!s&&u){var ge=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{U=new Worker(URL.createObjectURL(new Blob([ge])))}catch(Ee){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Ee),null}ce(U)}return U}})(),z={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function B(U,V){return V?V(U):U}function P(U){return U!=null}function j(U,V,le){return B(U&&P(U[V])?U[V]:z[V],le)}function O(U){return U<0?0:Math.floor(U)}function Z(U,V){return Math.floor(Math.random()*(V-U))+U}function ne(U){return parseInt(U,16)}function oe(U){return U.map(fe)}function fe(U){var V=String(U).replace(/[^0-9a-f]/gi,"");return V.length<6&&(V=V[0]+V[0]+V[1]+V[1]+V[2]+V[2]),{r:ne(V.substring(0,2)),g:ne(V.substring(2,4)),b:ne(V.substring(4,6))}}function ie(U){var V=j(U,"origin",Object);return V.x=j(V,"x",Number),V.y=j(V,"y",Number),V}function R(U){U.width=document.documentElement.clientWidth,U.height=document.documentElement.clientHeight}function S(U){var V=U.getBoundingClientRect();U.width=V.width,U.height=V.height}function A(U){var V=document.createElement("canvas");return V.style.position="fixed",V.style.top="0px",V.style.left="0px",V.style.pointerEvents="none",V.style.zIndex=U,V}function M(U,V,le,ce,ge,Ee,ve,ue,de){U.save(),U.translate(V,le),U.rotate(Ee),U.scale(ce,ge),U.arc(0,0,1,ve,ue,de),U.restore()}function D(U){var V=U.angle*(Math.PI/180),le=U.spread*(Math.PI/180);return{x:U.x,y:U.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:U.startVelocity*.5+Math.random()*U.startVelocity,angle2D:-V+(.5*le-Math.random()*le),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:U.color,shape:U.shape,tick:0,totalTicks:U.ticks,decay:U.decay,drift:U.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:U.gravity*3,ovalScalar:.6,scalar:U.scalar,flat:U.flat}}function k(U,V){V.x+=Math.cos(V.angle2D)*V.velocity+V.drift,V.y+=Math.sin(V.angle2D)*V.velocity+V.gravity,V.velocity*=V.decay,V.flat?(V.wobble=0,V.wobbleX=V.x+10*V.scalar,V.wobbleY=V.y+10*V.scalar,V.tiltSin=0,V.tiltCos=0,V.random=1):(V.wobble+=V.wobbleSpeed,V.wobbleX=V.x+10*V.scalar*Math.cos(V.wobble),V.wobbleY=V.y+10*V.scalar*Math.sin(V.wobble),V.tiltAngle+=.1,V.tiltSin=Math.sin(V.tiltAngle),V.tiltCos=Math.cos(V.tiltAngle),V.random=Math.random()+2);var le=V.tick++/V.totalTicks,ce=V.x+V.random*V.tiltCos,ge=V.y+V.random*V.tiltSin,Ee=V.wobbleX+V.random*V.tiltCos,ve=V.wobbleY+V.random*V.tiltSin;if(U.fillStyle="rgba("+V.color.r+", "+V.color.g+", "+V.color.b+", "+(1-le)+")",U.beginPath(),f&&V.shape.type==="path"&&typeof V.shape.path=="string"&&Array.isArray(V.shape.matrix))U.fill(se(V.shape.path,V.shape.matrix,V.x,V.y,Math.abs(Ee-ce)*.1,Math.abs(ve-ge)*.1,Math.PI/10*V.wobble));else if(V.shape.type==="bitmap"){var ue=Math.PI/10*V.wobble,de=Math.abs(Ee-ce)*.1,Ae=Math.abs(ve-ge)*.1,Ue=V.shape.bitmap.width*V.scalar,Re=V.shape.bitmap.height*V.scalar,ke=new DOMMatrix([Math.cos(ue)*de,Math.sin(ue)*de,-Math.sin(ue)*Ae,Math.cos(ue)*Ae,V.x,V.y]);ke.multiplySelf(new DOMMatrix(V.shape.matrix));var De=U.createPattern(x.transform(V.shape.bitmap),"no-repeat");De.setTransform(ke),U.globalAlpha=1-le,U.fillStyle=De,U.fillRect(V.x-Ue/2,V.y-Re/2,Ue,Re),U.globalAlpha=1}else if(V.shape==="circle")U.ellipse?U.ellipse(V.x,V.y,Math.abs(Ee-ce)*V.ovalScalar,Math.abs(ve-ge)*V.ovalScalar,Math.PI/10*V.wobble,0,2*Math.PI):M(U,V.x,V.y,Math.abs(Ee-ce)*V.ovalScalar,Math.abs(ve-ge)*V.ovalScalar,Math.PI/10*V.wobble,0,2*Math.PI);else if(V.shape==="star")for(var we=Math.PI/2*3,tt=4*V.scalar,St=8*V.scalar,vt=V.x,Mt=V.y,nt=5,$e=Math.PI/nt;nt--;)vt=V.x+Math.cos(we)*St,Mt=V.y+Math.sin(we)*St,U.lineTo(vt,Mt),we+=$e,vt=V.x+Math.cos(we)*tt,Mt=V.y+Math.sin(we)*tt,U.lineTo(vt,Mt),we+=$e;else U.moveTo(Math.floor(V.x),Math.floor(V.y)),U.lineTo(Math.floor(V.wobbleX),Math.floor(ge)),U.lineTo(Math.floor(Ee),Math.floor(ve)),U.lineTo(Math.floor(ce),Math.floor(V.wobbleY));return U.closePath(),U.fill(),V.tick<V.totalTicks}function N(U,V,le,ce,ge){var Ee=V.slice(),ve=U.getContext("2d"),ue,de,Ae=b(function(Ue){function Re(){ue=de=null,ve.clearRect(0,0,ce.width,ce.height),x.clear(),ge(),Ue()}function ke(){s&&!(ce.width===o.width&&ce.height===o.height)&&(ce.width=U.width=o.width,ce.height=U.height=o.height),!ce.width&&!ce.height&&(le(U),ce.width=U.width,ce.height=U.height),ve.clearRect(0,0,ce.width,ce.height),Ee=Ee.filter(function(De){return k(ve,De)}),Ee.length?ue=E.frame(ke):Re()}ue=E.frame(ke),de=Re});return{addFettis:function(Ue){return Ee=Ee.concat(Ue),Ae},canvas:U,promise:Ae,reset:function(){ue&&E.cancel(ue),de&&de()}}}function Qe(U,V){var le=!U,ce=!!j(V||{},"resize"),ge=!1,Ee=j(V,"disableForReducedMotion",Boolean),ve=u&&!!j(V||{},"useWorker"),ue=ve?C():null,de=le?R:S,Ae=U&&ue?!!U.__confetti_initialized:!1,Ue=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Re;function ke(we,tt,St){for(var vt=j(we,"particleCount",O),Mt=j(we,"angle",Number),nt=j(we,"spread",Number),$e=j(we,"startVelocity",Number),hn=j(we,"decay",Number),as=j(we,"gravity",Number),ua=j(we,"drift",Number),It=j(we,"colors",oe),Dn=j(we,"ticks",Number),ci=j(we,"shapes"),it=j(we,"scalar"),ui=!!j(we,"flat"),Hs=ie(we),ss=vt,ha=[],Fs=U.width*Hs.x,En=U.height*Hs.y;ss--;)ha.push(D({x:Fs,y:En,angle:Mt,spread:nt,startVelocity:$e,color:It[ss%It.length],shape:ci[Z(0,ci.length)],ticks:Dn,decay:hn,gravity:as,drift:ua,scalar:it,flat:ui}));return Re?Re.addFettis(ha):(Re=N(U,ha,de,tt,St),Re.promise)}function De(we){var tt=Ee||j(we,"disableForReducedMotion",Boolean),St=j(we,"zIndex",Number);if(tt&&Ue)return b(function($e){$e()});le&&Re?U=Re.canvas:le&&!U&&(U=A(St),document.body.appendChild(U)),ce&&!Ae&&de(U);var vt={width:U.width,height:U.height};ue&&!Ae&&ue.init(U),Ae=!0,ue&&(U.__confetti_initialized=!0);function Mt(){if(ue){var $e={getBoundingClientRect:function(){if(!le)return U.getBoundingClientRect()}};de($e),ue.postMessage({resize:{width:$e.width,height:$e.height}});return}vt.width=vt.height=null}function nt(){Re=null,ce&&(ge=!1,t.removeEventListener("resize",Mt)),le&&U&&(document.body.contains(U)&&document.body.removeChild(U),U=null,Ae=!1)}return ce&&!ge&&(ge=!0,t.addEventListener("resize",Mt,!1)),ue?ue.fire(we,vt,nt):ke(we,vt,nt)}return De.reset=function(){ue&&ue.reset(),Re&&Re.reset()},De}var mt;function X(){return mt||(mt=Qe(null,{useWorker:!0,resize:!0})),mt}function se(U,V,le,ce,ge,Ee,ve){var ue=new Path2D(U),de=new Path2D;de.addPath(ue,new DOMMatrix(V));var Ae=new Path2D;return Ae.addPath(de,new DOMMatrix([Math.cos(ve)*ge,Math.sin(ve)*ge,-Math.sin(ve)*Ee,Math.cos(ve)*Ee,le,ce])),Ae}function be(U){if(!f)throw new Error("path confetti are not supported in this browser");var V,le;typeof U=="string"?V=U:(V=U.path,le=U.matrix);var ce=new Path2D(V),ge=document.createElement("canvas"),Ee=ge.getContext("2d");if(!le){for(var ve=1e3,ue=ve,de=ve,Ae=0,Ue=0,Re,ke,De=0;De<ve;De+=2)for(var we=0;we<ve;we+=2)Ee.isPointInPath(ce,De,we,"nonzero")&&(ue=Math.min(ue,De),de=Math.min(de,we),Ae=Math.max(Ae,De),Ue=Math.max(Ue,we));Re=Ae-ue,ke=Ue-de;var tt=10,St=Math.min(tt/Re,tt/ke);le=[St,0,0,St,-Math.round(Re/2+ue)*St,-Math.round(ke/2+de)*St]}return{type:"path",path:V,matrix:le}}function Le(U){var V,le=1,ce="#000000",ge='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof U=="string"?V=U:(V=U.text,le="scalar"in U?U.scalar:le,ge="fontFamily"in U?U.fontFamily:ge,ce="color"in U?U.color:ce);var Ee=10*le,ve=""+Ee+"px "+ge,ue=new OffscreenCanvas(Ee,Ee),de=ue.getContext("2d");de.font=ve;var Ae=de.measureText(V),Ue=Math.ceil(Ae.actualBoundingBoxRight+Ae.actualBoundingBoxLeft),Re=Math.ceil(Ae.actualBoundingBoxAscent+Ae.actualBoundingBoxDescent),ke=2,De=Ae.actualBoundingBoxLeft+ke,we=Ae.actualBoundingBoxAscent+ke;Ue+=ke+ke,Re+=ke+ke,ue=new OffscreenCanvas(Ue,Re),de=ue.getContext("2d"),de.font=ve,de.fillStyle=ce,de.fillText(V,De,we);var tt=1/le;return{type:"bitmap",bitmap:ue.transferToImageBitmap(),matrix:[tt,0,0,tt,-Ue*tt/2,-Re*tt/2]}}i.exports=function(){return X().apply(this,arguments)},i.exports.reset=function(){X().reset()},i.exports.create=Qe,i.exports.shapeFromPath=be,i.exports.shapeFromText=Le})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Ud,!1);const Bd=Ud.exports;Ud.exports.create;const $x=()=>{};var ny={};const _v=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},Zx=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const o=r[i++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[i++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[i++],f=r[i++],m=r[i++],v=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(v>>10)),t[s++]=String.fromCharCode(56320+(v&1023))}else{const u=r[i++],f=r[i++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,v=o+2<r.length,b=v?r[o+2]:0,x=u>>2,E=(u&3)<<4|m>>4;let C=(m&15)<<2|b>>6,z=b&63;v||(z=64,f||(C=64)),s.push(i[x],i[E],i[C],i[z])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(_v(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):Zx(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=i[r.charAt(o++)],m=o<r.length?i[r.charAt(o)]:0;++o;const b=o<r.length?i[r.charAt(o)]:64;++o;const E=o<r.length?i[r.charAt(o)]:64;if(++o,u==null||m==null||b==null||E==null)throw new Jx;const C=u<<2|m>>4;if(s.push(C),b!==64){const z=m<<4&240|b>>2;if(s.push(z),E!==64){const B=b<<6&192|E;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Jx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wx=function(r){const t=_v(r);return bv.encodeByteArray(t,!0)},gu=function(r){return Wx(r).replace(/\./g,"")},eE=function(r){try{return bv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nE=()=>tE().__FIREBASE_DEFAULTS__,iE=()=>{if(typeof process>"u"||typeof ny>"u")return;const r=ny.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&eE(r[1]);return t&&JSON.parse(t)},zd=()=>{try{return $x()||nE()||iE()||aE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sE=r=>zd()?.emulatorHosts?.[r],rE=r=>{const t=sE(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},xv=()=>zd()?.config;class lE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}function Pd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oE(r){return(await fetch(r,{credentials:"include"})).ok}function cE(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gu(JSON.stringify(i)),gu(JSON.stringify(f)),""].join(".")}const so={};function uE(){const r={prod:[],emulator:[]};for(const t of Object.keys(so))so[t]?r.emulator.push(t):r.prod.push(t);return r}function hE(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let iy=!1;function fE(r,t){if(typeof window>"u"||typeof document>"u"||!Pd(window.location.host)||so[r]===t||so[r]||iy)return;so[r]=t;function i(C){return`__firebase__banner__${C}`}const s="__firebase__banner",u=uE().prod.length>0;function f(){const C=document.getElementById(s);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function v(C,z){C.setAttribute("width","24"),C.setAttribute("id",z),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function b(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{iy=!0,f()},C}function x(C,z){C.setAttribute("id",z),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=hE(s),z=i("text"),B=document.getElementById(z)||document.createElement("span"),P=i("learnmore"),j=document.getElementById(P)||document.createElement("a"),O=i("preprendIcon"),Z=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ne=C.element;m(ne),x(j,P);const oe=b();v(Z,O),ne.append(Z,B,j,oe),document.body.appendChild(ne)}u?(B.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function dE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mE(){const r=zd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gE(){return!mE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pE(){try{return typeof indexedDB=="object"}catch{return!1}}function yE(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(i){t(i)}})}const vE="FirebaseError";class Kr extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=vE,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ev.prototype.create)}}class Ev{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?_E(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Kr(o,m,s)}}function _E(r,t){return r.replace(bE,(i,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const bE=/\{\$([^}]+)}/g;function pu(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const o of i){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(ay(u)&&ay(f)){if(!pu(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function ay(r){return r!==null&&typeof r=="object"}function Gr(r){return r&&r._delegate?r._delegate:r}class fo{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Ls="[DEFAULT]";class xE{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new lE;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(TE(t))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Ls){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ls){return this.instances.has(t)}getOptions(t=Ls){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const o of s)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:EE(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ls){return this.component?this.component.multipleInstances?t:Ls:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EE(r){return r===Ls?void 0:r}function TE(r){return r.instantiationMode==="EAGER"}class SE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new xE(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const wE={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},AE=Ke.INFO,CE={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},NE=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=CE[t];if(o)console[o](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tv{constructor(t){this.name=t,this._logLevel=AE,this._logHandler=NE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ke))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}const RE=(r,t)=>t.some(i=>r instanceof i);let sy,ry;function ME(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IE(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sv=new WeakMap,gd=new WeakMap,wv=new WeakMap,Wf=new WeakMap,Gd=new WeakMap;function DE(r){const t=new Promise((i,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{i(Qa(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Sv.set(i,r)}).catch(()=>{}),Gd.set(t,r),t}function OE(r){if(gd.has(r))return;const t=new Promise((i,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});gd.set(r,t)}let pd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return gd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||wv.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Qa(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function VE(r){pd=r(pd)}function jE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(ed(this),t,...i);return wv.set(s,t.sort?t.sort():[t]),Qa(s)}:IE().includes(r)?function(...t){return r.apply(ed(this),t),Qa(Sv.get(this))}:function(...t){return Qa(r.apply(ed(this),t))}}function LE(r){return typeof r=="function"?jE(r):(r instanceof IDBTransaction&&OE(r),RE(r,ME())?new Proxy(r,pd):r)}function Qa(r){if(r instanceof IDBRequest)return DE(r);if(Wf.has(r))return Wf.get(r);const t=LE(r);return t!==r&&(Wf.set(r,t),Gd.set(t,r)),t}const ed=r=>Gd.get(r);function kE(r,t,{blocked:i,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),m=Qa(f);return s&&f.addEventListener("upgradeneeded",v=>{s(Qa(f.result),v.oldVersion,v.newVersion,Qa(f.transaction),v)}),i&&f.addEventListener("blocked",v=>i(v.oldVersion,v.newVersion,v)),m.then(v=>{u&&v.addEventListener("close",()=>u()),o&&v.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const UE=["get","getKey","getAll","getAllKeys","count"],BE=["put","add","delete","clear"],td=new Map;function ly(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(td.get(t))return td.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,o=BE.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(o||UE.includes(i)))return;const u=async function(f,...m){const v=this.transaction(f,o?"readwrite":"readonly");let b=v.store;return s&&(b=b.index(m.shift())),(await Promise.all([b[i](...m),o&&v.done]))[0]};return td.set(t,u),u}VE(r=>({...r,get:(t,i,s)=>ly(t,i)||r.get(t,i,s),has:(t,i)=>!!ly(t,i)||r.has(t,i)}));class zE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(PE(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function PE(r){return r.getComponent()?.type==="VERSION"}const yd="@firebase/app",oy="0.14.6";const la=new Tv("@firebase/app"),GE="@firebase/app-compat",qE="@firebase/analytics-compat",HE="@firebase/analytics",FE="@firebase/app-check-compat",QE="@firebase/app-check",YE="@firebase/auth",XE="@firebase/auth-compat",KE="@firebase/database",$E="@firebase/data-connect",ZE="@firebase/database-compat",JE="@firebase/functions",WE="@firebase/functions-compat",eT="@firebase/installations",tT="@firebase/installations-compat",nT="@firebase/messaging",iT="@firebase/messaging-compat",aT="@firebase/performance",sT="@firebase/performance-compat",rT="@firebase/remote-config",lT="@firebase/remote-config-compat",oT="@firebase/storage",cT="@firebase/storage-compat",uT="@firebase/firestore",hT="@firebase/ai",fT="@firebase/firestore-compat",dT="firebase",mT="12.6.0";const vd="[DEFAULT]",gT={[yd]:"fire-core",[GE]:"fire-core-compat",[HE]:"fire-analytics",[qE]:"fire-analytics-compat",[QE]:"fire-app-check",[FE]:"fire-app-check-compat",[YE]:"fire-auth",[XE]:"fire-auth-compat",[KE]:"fire-rtdb",[$E]:"fire-data-connect",[ZE]:"fire-rtdb-compat",[JE]:"fire-fn",[WE]:"fire-fn-compat",[eT]:"fire-iid",[tT]:"fire-iid-compat",[nT]:"fire-fcm",[iT]:"fire-fcm-compat",[aT]:"fire-perf",[sT]:"fire-perf-compat",[rT]:"fire-rc",[lT]:"fire-rc-compat",[oT]:"fire-gcs",[cT]:"fire-gcs-compat",[uT]:"fire-fst",[fT]:"fire-fst-compat",[hT]:"fire-vertex","fire-js":"fire-js",[dT]:"fire-js-all"};const yu=new Map,pT=new Map,_d=new Map;function cy(r,t){try{r.container.addComponent(t)}catch(i){la.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function vu(r){const t=r.name;if(_d.has(t))return la.debug(`There were multiple attempts to register component ${t}.`),!1;_d.set(t,r);for(const i of yu.values())cy(i,r);for(const i of pT.values())cy(i,r);return!0}function yT(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function vT(r){return r==null?!1:r.settings!==void 0}const _T={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ya=new Ev("app","Firebase",_T);class bT{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ya.create("app-deleted",{appName:this._name})}}const xT=mT;function Av(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:vd,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Ya.create("bad-app-name",{appName:String(o)});if(i||(i=xv()),!i)throw Ya.create("no-options");const u=yu.get(o);if(u){if(pu(i,u.options)&&pu(s,u.config))return u;throw Ya.create("duplicate-app",{appName:o})}const f=new SE(o);for(const v of _d.values())f.addComponent(v);const m=new bT(i,s,f);return yu.set(o,m),m}function ET(r=vd){const t=yu.get(r);if(!t&&r===vd&&xv())return Av();if(!t)throw Ya.create("no-app",{appName:r});return t}function Ur(r,t,i){let s=gT[r]??r;i&&(s+=`-${i}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${t}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),la.warn(f.join(" "));return}vu(new fo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const TT="firebase-heartbeat-database",ST=1,mo="firebase-heartbeat-store";let nd=null;function Cv(){return nd||(nd=kE(TT,ST,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(mo)}catch(i){console.warn(i)}}}}).catch(r=>{throw Ya.create("idb-open",{originalErrorMessage:r.message})})),nd}async function wT(r){try{const i=(await Cv()).transaction(mo),s=await i.objectStore(mo).get(Nv(r));return await i.done,s}catch(t){if(t instanceof Kr)la.warn(t.message);else{const i=Ya.create("idb-get",{originalErrorMessage:t?.message});la.warn(i.message)}}}async function uy(r,t){try{const s=(await Cv()).transaction(mo,"readwrite");await s.objectStore(mo).put(t,Nv(r)),await s.done}catch(i){if(i instanceof Kr)la.warn(i.message);else{const s=Ya.create("idb-set",{originalErrorMessage:i?.message});la.warn(s.message)}}}function Nv(r){return`${r.name}!${r.options.appId}`}const AT=1024,CT=30;class NT{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new MT(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>CT){const o=IT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){la.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hy(),{heartbeatsToSend:i,unsentEntries:s}=RT(this._heartbeatsCache.heartbeats),o=gu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return la.warn(t),""}}}function hy(){return new Date().toISOString().substring(0,10)}function RT(r,t=AT){const i=[];let s=r.slice();for(const o of r){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),fy(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),fy(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class MT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pE()?yE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await wT(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return uy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return uy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function fy(r){return gu(JSON.stringify({version:2,heartbeats:r})).length}function IT(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}function DT(r){vu(new fo("platform-logger",t=>new zE(t),"PRIVATE")),vu(new fo("heartbeat",t=>new NT(t),"PRIVATE")),Ur(yd,oy,r),Ur(yd,oy,"esm2020"),Ur("fire-js","")}DT("");var OT="firebase",VT="12.6.0";Ur(OT,VT,"app");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xa,Rv;(function(){var r;function t(R,S){function A(){}A.prototype=S.prototype,R.F=S.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(M,D,k){for(var N=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)N[Qe-2]=arguments[Qe];return S.prototype[D].apply(M,N)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,i),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,S,A){A||(A=0);const M=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)M[D]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(D=0;D<16;++D)M[D]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=R.g[0],A=R.g[1],D=R.g[2];let k=R.g[3],N;N=S+(k^A&(D^k))+M[0]+3614090360&4294967295,S=A+(N<<7&4294967295|N>>>25),N=k+(D^S&(A^D))+M[1]+3905402710&4294967295,k=S+(N<<12&4294967295|N>>>20),N=D+(A^k&(S^A))+M[2]+606105819&4294967295,D=k+(N<<17&4294967295|N>>>15),N=A+(S^D&(k^S))+M[3]+3250441966&4294967295,A=D+(N<<22&4294967295|N>>>10),N=S+(k^A&(D^k))+M[4]+4118548399&4294967295,S=A+(N<<7&4294967295|N>>>25),N=k+(D^S&(A^D))+M[5]+1200080426&4294967295,k=S+(N<<12&4294967295|N>>>20),N=D+(A^k&(S^A))+M[6]+2821735955&4294967295,D=k+(N<<17&4294967295|N>>>15),N=A+(S^D&(k^S))+M[7]+4249261313&4294967295,A=D+(N<<22&4294967295|N>>>10),N=S+(k^A&(D^k))+M[8]+1770035416&4294967295,S=A+(N<<7&4294967295|N>>>25),N=k+(D^S&(A^D))+M[9]+2336552879&4294967295,k=S+(N<<12&4294967295|N>>>20),N=D+(A^k&(S^A))+M[10]+4294925233&4294967295,D=k+(N<<17&4294967295|N>>>15),N=A+(S^D&(k^S))+M[11]+2304563134&4294967295,A=D+(N<<22&4294967295|N>>>10),N=S+(k^A&(D^k))+M[12]+1804603682&4294967295,S=A+(N<<7&4294967295|N>>>25),N=k+(D^S&(A^D))+M[13]+4254626195&4294967295,k=S+(N<<12&4294967295|N>>>20),N=D+(A^k&(S^A))+M[14]+2792965006&4294967295,D=k+(N<<17&4294967295|N>>>15),N=A+(S^D&(k^S))+M[15]+1236535329&4294967295,A=D+(N<<22&4294967295|N>>>10),N=S+(D^k&(A^D))+M[1]+4129170786&4294967295,S=A+(N<<5&4294967295|N>>>27),N=k+(A^D&(S^A))+M[6]+3225465664&4294967295,k=S+(N<<9&4294967295|N>>>23),N=D+(S^A&(k^S))+M[11]+643717713&4294967295,D=k+(N<<14&4294967295|N>>>18),N=A+(k^S&(D^k))+M[0]+3921069994&4294967295,A=D+(N<<20&4294967295|N>>>12),N=S+(D^k&(A^D))+M[5]+3593408605&4294967295,S=A+(N<<5&4294967295|N>>>27),N=k+(A^D&(S^A))+M[10]+38016083&4294967295,k=S+(N<<9&4294967295|N>>>23),N=D+(S^A&(k^S))+M[15]+3634488961&4294967295,D=k+(N<<14&4294967295|N>>>18),N=A+(k^S&(D^k))+M[4]+3889429448&4294967295,A=D+(N<<20&4294967295|N>>>12),N=S+(D^k&(A^D))+M[9]+568446438&4294967295,S=A+(N<<5&4294967295|N>>>27),N=k+(A^D&(S^A))+M[14]+3275163606&4294967295,k=S+(N<<9&4294967295|N>>>23),N=D+(S^A&(k^S))+M[3]+4107603335&4294967295,D=k+(N<<14&4294967295|N>>>18),N=A+(k^S&(D^k))+M[8]+1163531501&4294967295,A=D+(N<<20&4294967295|N>>>12),N=S+(D^k&(A^D))+M[13]+2850285829&4294967295,S=A+(N<<5&4294967295|N>>>27),N=k+(A^D&(S^A))+M[2]+4243563512&4294967295,k=S+(N<<9&4294967295|N>>>23),N=D+(S^A&(k^S))+M[7]+1735328473&4294967295,D=k+(N<<14&4294967295|N>>>18),N=A+(k^S&(D^k))+M[12]+2368359562&4294967295,A=D+(N<<20&4294967295|N>>>12),N=S+(A^D^k)+M[5]+4294588738&4294967295,S=A+(N<<4&4294967295|N>>>28),N=k+(S^A^D)+M[8]+2272392833&4294967295,k=S+(N<<11&4294967295|N>>>21),N=D+(k^S^A)+M[11]+1839030562&4294967295,D=k+(N<<16&4294967295|N>>>16),N=A+(D^k^S)+M[14]+4259657740&4294967295,A=D+(N<<23&4294967295|N>>>9),N=S+(A^D^k)+M[1]+2763975236&4294967295,S=A+(N<<4&4294967295|N>>>28),N=k+(S^A^D)+M[4]+1272893353&4294967295,k=S+(N<<11&4294967295|N>>>21),N=D+(k^S^A)+M[7]+4139469664&4294967295,D=k+(N<<16&4294967295|N>>>16),N=A+(D^k^S)+M[10]+3200236656&4294967295,A=D+(N<<23&4294967295|N>>>9),N=S+(A^D^k)+M[13]+681279174&4294967295,S=A+(N<<4&4294967295|N>>>28),N=k+(S^A^D)+M[0]+3936430074&4294967295,k=S+(N<<11&4294967295|N>>>21),N=D+(k^S^A)+M[3]+3572445317&4294967295,D=k+(N<<16&4294967295|N>>>16),N=A+(D^k^S)+M[6]+76029189&4294967295,A=D+(N<<23&4294967295|N>>>9),N=S+(A^D^k)+M[9]+3654602809&4294967295,S=A+(N<<4&4294967295|N>>>28),N=k+(S^A^D)+M[12]+3873151461&4294967295,k=S+(N<<11&4294967295|N>>>21),N=D+(k^S^A)+M[15]+530742520&4294967295,D=k+(N<<16&4294967295|N>>>16),N=A+(D^k^S)+M[2]+3299628645&4294967295,A=D+(N<<23&4294967295|N>>>9),N=S+(D^(A|~k))+M[0]+4096336452&4294967295,S=A+(N<<6&4294967295|N>>>26),N=k+(A^(S|~D))+M[7]+1126891415&4294967295,k=S+(N<<10&4294967295|N>>>22),N=D+(S^(k|~A))+M[14]+2878612391&4294967295,D=k+(N<<15&4294967295|N>>>17),N=A+(k^(D|~S))+M[5]+4237533241&4294967295,A=D+(N<<21&4294967295|N>>>11),N=S+(D^(A|~k))+M[12]+1700485571&4294967295,S=A+(N<<6&4294967295|N>>>26),N=k+(A^(S|~D))+M[3]+2399980690&4294967295,k=S+(N<<10&4294967295|N>>>22),N=D+(S^(k|~A))+M[10]+4293915773&4294967295,D=k+(N<<15&4294967295|N>>>17),N=A+(k^(D|~S))+M[1]+2240044497&4294967295,A=D+(N<<21&4294967295|N>>>11),N=S+(D^(A|~k))+M[8]+1873313359&4294967295,S=A+(N<<6&4294967295|N>>>26),N=k+(A^(S|~D))+M[15]+4264355552&4294967295,k=S+(N<<10&4294967295|N>>>22),N=D+(S^(k|~A))+M[6]+2734768916&4294967295,D=k+(N<<15&4294967295|N>>>17),N=A+(k^(D|~S))+M[13]+1309151649&4294967295,A=D+(N<<21&4294967295|N>>>11),N=S+(D^(A|~k))+M[4]+4149444226&4294967295,S=A+(N<<6&4294967295|N>>>26),N=k+(A^(S|~D))+M[11]+3174756917&4294967295,k=S+(N<<10&4294967295|N>>>22),N=D+(S^(k|~A))+M[2]+718787259&4294967295,D=k+(N<<15&4294967295|N>>>17),N=A+(k^(D|~S))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+k&4294967295}s.prototype.v=function(R,S){S===void 0&&(S=R.length);const A=S-this.blockSize,M=this.C;let D=this.h,k=0;for(;k<S;){if(D==0)for(;k<=A;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<S;)if(M[D++]=R.charCodeAt(k++),D==this.blockSize){o(this,M),D=0;break}}else for(;k<S;)if(M[D++]=R[k++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)R[S++]=this.g[A]>>>M&255;return R};function u(R,S){var A=m;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=S(R)}function f(R,S){this.h=S;const A=[];let M=!0;for(let D=R.length-1;D>=0;D--){const k=R[D]|0;M&&k==S||(A[D]=k,M=!1)}this.g=A}var m={};function v(R){return-128<=R&&R<128?u(R,function(S){return new f([S|0],S<0?-1:0)}):new f([R|0],R<0?-1:0)}function b(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return j(b(-R));const S=[];let A=1;for(let M=0;R>=A;M++)S[M]=R/A|0,A*=4294967296;return new f(S,0)}function x(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return j(x(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=b(Math.pow(S,8));let M=E;for(let k=0;k<R.length;k+=8){var D=Math.min(8,R.length-k);const N=parseInt(R.substring(k,k+D),S);D<8?(D=b(Math.pow(S,D)),M=M.j(D).add(b(N))):(M=M.j(A),M=M.add(b(N)))}return M}var E=v(0),C=v(1),z=v(16777216);r=f.prototype,r.m=function(){if(P(this))return-j(this).m();let R=0,S=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);R+=(M>=0?M:4294967296+M)*S,S*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(B(this))return"0";if(P(this))return"-"+j(this).toString(R);const S=b(Math.pow(R,6));var A=this;let M="";for(;;){const D=oe(A,S).g;A=O(A,D.j(S));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=D,B(A))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function B(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function P(R){return R.h==-1}r.l=function(R){return R=O(this,R),P(R)?-1:B(R)?0:1};function j(R){const S=R.g.length,A=[];for(let M=0;M<S;M++)A[M]=~R.g[M];return new f(A,~R.h).add(C)}r.abs=function(){return P(this)?j(this):this},r.add=function(R){const S=Math.max(this.g.length,R.g.length),A=[];let M=0;for(let D=0;D<=S;D++){let k=M+(this.i(D)&65535)+(R.i(D)&65535),N=(k>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);M=N>>>16,k&=65535,N&=65535,A[D]=N<<16|k}return new f(A,A[A.length-1]&-2147483648?-1:0)};function O(R,S){return R.add(j(S))}r.j=function(R){if(B(this)||B(R))return E;if(P(this))return P(R)?j(this).j(j(R)):j(j(this).j(R));if(P(R))return j(this.j(j(R)));if(this.l(z)<0&&R.l(z)<0)return b(this.m()*R.m());const S=this.g.length+R.g.length,A=[];for(var M=0;M<2*S;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<R.g.length;D++){const k=this.i(M)>>>16,N=this.i(M)&65535,Qe=R.i(D)>>>16,mt=R.i(D)&65535;A[2*M+2*D]+=N*mt,Z(A,2*M+2*D),A[2*M+2*D+1]+=k*mt,Z(A,2*M+2*D+1),A[2*M+2*D+1]+=N*Qe,Z(A,2*M+2*D+1),A[2*M+2*D+2]+=k*Qe,Z(A,2*M+2*D+2)}for(R=0;R<S;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=S;R<2*S;R++)A[R]=0;return new f(A,0)};function Z(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function ne(R,S){this.g=R,this.h=S}function oe(R,S){if(B(S))throw Error("division by zero");if(B(R))return new ne(E,E);if(P(R))return S=oe(j(R),S),new ne(j(S.g),j(S.h));if(P(S))return S=oe(R,j(S)),new ne(j(S.g),S.h);if(R.g.length>30){if(P(R)||P(S))throw Error("slowDivide_ only works with positive integers.");for(var A=C,M=S;M.l(R)<=0;)A=fe(A),M=fe(M);var D=ie(A,1),k=ie(M,1);for(M=ie(M,2),A=ie(A,2);!B(M);){var N=k.add(M);N.l(R)<=0&&(D=D.add(A),k=N),M=ie(M,1),A=ie(A,1)}return S=O(R,D.j(S)),new ne(D,S)}for(D=E;R.l(S)>=0;){for(A=Math.max(1,Math.floor(R.m()/S.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=b(A),N=k.j(S);P(N)||N.l(R)>0;)A-=M,k=b(A),N=k.j(S);B(k)&&(k=C),D=D.add(k),R=O(R,N)}return new ne(D,R)}r.B=function(R){return oe(this,R).h},r.and=function(R){const S=Math.max(this.g.length,R.g.length),A=[];for(let M=0;M<S;M++)A[M]=this.i(M)&R.i(M);return new f(A,this.h&R.h)},r.or=function(R){const S=Math.max(this.g.length,R.g.length),A=[];for(let M=0;M<S;M++)A[M]=this.i(M)|R.i(M);return new f(A,this.h|R.h)},r.xor=function(R){const S=Math.max(this.g.length,R.g.length),A=[];for(let M=0;M<S;M++)A[M]=this.i(M)^R.i(M);return new f(A,this.h^R.h)};function fe(R){const S=R.g.length+1,A=[];for(let M=0;M<S;M++)A[M]=R.i(M)<<1|R.i(M-1)>>>31;return new f(A,R.h)}function ie(R,S){const A=S>>5;S%=32;const M=R.g.length-A,D=[];for(let k=0;k<M;k++)D[k]=S>0?R.i(k+A)>>>S|R.i(k+A+1)<<32-S:R.i(k+A);return new f(D,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Rv=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=x,Xa=f}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mv,to,Iv,lu,bd,Dv,Ov,Vv;(function(){var r,t=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=i(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var q=c[w];if(!(q in _))break e;_=_[q]}c=c[c.length-1],w=_[c],g=g(w),g!=w&&g!=null&&t(_,c,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(g){var _=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&_.push([w,g[w]]);return _}});var u=u||{},f=this||self;function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function b(c,g,_){return b=v,b.apply(null,arguments)}function x(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function E(c,g){function _(){}_.prototype=g.prototype,c.Z=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(w,q,Y){for(var he=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)he[Oe-2]=arguments[Oe];return g.prototype[q].apply(w,he)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function z(c){const g=c.length;if(g>0){const _=Array(g);for(let w=0;w<g;w++)_[w]=c[w];return _}return[]}function B(c,g){for(let w=1;w<arguments.length;w++){const q=arguments[w];var _=typeof q;if(_=_!="object"?_:q?Array.isArray(q)?"array":_:"null",_=="array"||_=="object"&&typeof q.length=="number"){_=c.length||0;const Y=q.length||0;c.length=_+Y;for(let he=0;he<Y;he++)c[_+he]=q[he]}else c.push(q)}}class P{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function j(c){f.setTimeout(()=>{throw c},0)}function O(){var c=R;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Z{constructor(){this.h=this.g=null}add(g,_){const w=ne.get();w.set(g,_),this.h?this.h.next=w:this.g=w,this.h=w}}var ne=new P(()=>new oe,c=>c.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ie=!1,R=new Z,S=()=>{const c=Promise.resolve(void 0);fe=()=>{c.then(A)}};function A(){for(var c;c=O();){try{c.h.call(c.g)}catch(_){j(_)}var g=ne;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}ie=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};f.addEventListener("test",_,g),f.removeEventListener("test",_,g)}catch{}return c})();function N(c){return/^[\s\xa0]*$/.test(c)}function Qe(c,g){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}E(Qe,D),Qe.prototype.init=function(c,g){const _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(_=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),X=0;function se(c,g,_,w,q){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!w,this.ha=q,this.key=++X,this.da=this.fa=!1}function be(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Le(c,g,_){for(const w in c)g.call(_,c[w],w,c)}function U(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function V(c){const g={};for(const _ in c)g[_]=c[_];return g}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(c,g){let _,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(_ in w)c[_]=w[_];for(let Y=0;Y<le.length;Y++)_=le[Y],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function ge(c){this.src=c,this.g={},this.h=0}ge.prototype.add=function(c,g,_,w,q){const Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);const he=ve(c,g,w,q);return he>-1?(g=c[he],_||(g.fa=!1)):(g=new se(g,this.src,Y,!!w,q),g.fa=_,c.push(g)),g};function Ee(c,g){const _=g.type;if(_ in c.g){var w=c.g[_],q=Array.prototype.indexOf.call(w,g,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(w,q,1),Y&&(be(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ve(c,g,_,w){for(let q=0;q<c.length;++q){const Y=c[q];if(!Y.da&&Y.listener==g&&Y.capture==!!_&&Y.ha==w)return q}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),de={};function Ae(c,g,_,w,q){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)Ae(c,g[Y],_,w,q);return null}return _=Mt(_),c&&c[mt]?c.J(g,_,m(w)?!!w.capture:!1,q):Ue(c,g,_,!1,w,q)}function Ue(c,g,_,w,q,Y){if(!g)throw Error("Invalid event type");const he=m(q)?!!q.capture:!!q;let Oe=St(c);if(Oe||(c[ue]=Oe=new ge(c)),_=Oe.add(g,_,w,he,Y),_.proxy)return _;if(w=Re(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)k||(q=he),q===void 0&&(q=!1),c.addEventListener(g.toString(),w,q);else if(c.attachEvent)c.attachEvent(we(g.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Re(){function c(_){return g.call(c.src,c.listener,_)}const g=tt;return c}function ke(c,g,_,w,q){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)ke(c,g[Y],_,w,q);else w=m(w)?!!w.capture:!!w,_=Mt(_),c&&c[mt]?(c=c.i,Y=String(g).toString(),Y in c.g&&(g=c.g[Y],_=ve(g,_,w,q),_>-1&&(be(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete c.g[Y],c.h--)))):c&&(c=St(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ve(g,_,w,q)),(_=c>-1?g[c]:null)&&De(_))}function De(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[mt])Ee(g.i,c);else{var _=c.type,w=c.proxy;g.removeEventListener?g.removeEventListener(_,w,c.capture):g.detachEvent?g.detachEvent(we(_),w):g.addListener&&g.removeListener&&g.removeListener(w),(_=St(g))?(Ee(_,c),_.h==0&&(_.src=null,g[ue]=null)):be(c)}}}function we(c){return c in de?de[c]:de[c]="on"+c}function tt(c,g){if(c.da)c=!0;else{g=new Qe(g,this);const _=c.listener,w=c.ha||c.src;c.fa&&De(c),c=_.call(w,g)}return c}function St(c){return c=c[ue],c instanceof ge?c:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(c){return typeof c=="function"?c:(c[vt]||(c[vt]=function(g){return c.handleEvent(g)}),c[vt])}function nt(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}E(nt,M),nt.prototype[mt]=!0,nt.prototype.removeEventListener=function(c,g,_,w){ke(this,c,g,_,w)};function $e(c,g){var _,w=c.G;if(w)for(_=[];w;w=w.G)_.push(w);if(c=c.M,w=g.type||g,typeof g=="string")g=new D(g,c);else if(g instanceof D)g.target=g.target||c;else{var q=g;g=new D(w,c),ce(g,q)}q=!0;let Y,he;if(_)for(he=_.length-1;he>=0;he--)Y=g.g=_[he],q=hn(Y,w,!0,g)&&q;if(Y=g.g=c,q=hn(Y,w,!0,g)&&q,q=hn(Y,w,!1,g)&&q,_)for(he=0;he<_.length;he++)Y=g.g=_[he],q=hn(Y,w,!1,g)&&q}nt.prototype.N=function(){if(nt.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const _=c.g[g];for(let w=0;w<_.length;w++)be(_[w]);delete c.g[g],c.h--}}this.G=null},nt.prototype.J=function(c,g,_,w){return this.i.add(String(c),g,!1,_,w)},nt.prototype.K=function(c,g,_,w){return this.i.add(String(c),g,!0,_,w)};function hn(c,g,_,w){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let q=!0;for(let Y=0;Y<g.length;++Y){const he=g[Y];if(he&&!he.da&&he.capture==_){const Oe=he.listener,At=he.ha||he.src;he.fa&&Ee(c.i,he),q=Oe.call(At,w)!==!1&&q}}return q&&!w.defaultPrevented}function as(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(c,g||0)}function ua(c){c.g=as(()=>{c.g=null,c.i&&(c.i=!1,ua(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class It extends M{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ua(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(c){M.call(this),this.h=c,this.g={}}E(Dn,M);var ci=[];function it(c){Le(c.g,function(g,_){this.g.hasOwnProperty(_)&&De(g)},c),c.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),it(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=f.JSON.stringify,Hs=f.JSON.parse,ss=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function ha(){}function Fs(){}var En={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){D.call(this,"d")}E($t,D);function On(){D.call(this,"c")}E(On,D);var wt={},Co=null;function Qs(){return Co=Co||new nt}wt.Ia="serverreachability";function No(c){D.call(this,wt.Ia,c)}E(No,D);function hi(c){const g=Qs();$e(g,new No(g))}wt.STAT_EVENT="statevent";function rs(c,g){D.call(this,wt.STAT_EVENT,c),this.stat=g}E(rs,D);function Dt(c){const g=Qs();$e(g,new rs(g,c))}wt.Ja="timingevent";function fi(c,g){D.call(this,wt.Ja,c),this.size=g}E(fi,D);function di(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},g)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function Ku(c,g,_,w,q,Y){c.info(function(){if(c.g)if(Y){var he="",Oe=Y.split("&");for(let We=0;We<Oe.length;We++){var At=Oe[We].split("=");if(At.length>1){const _t=At[0];At=At[1];const kn=_t.split("_");he=kn.length>=2&&kn[1]=="type"?he+(_t+"="+At+"&"):he+(_t+"=redacted&")}}}else he=null;else he=Y;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+g+`
`+_+`
`+he})}function Ro(c,g,_,w,q,Y,he){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+g+`
`+_+`
`+Y+" "+he})}function mi(c,g,_,w){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+$u(c,_)+(w?" "+w:"")})}function ls(c,g){c.info(function(){return"TIMEOUT: "+g})}Kn.prototype.info=function(){};function $u(c,g){if(!c.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(c=0;c<Y.length;c++)if(Array.isArray(Y[c])){var _=Y[c];if(!(_.length<2)){var w=_[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let he=1;he<w.length;he++)w[he]=""}}}}return ui(Y)}catch{return g}}var os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function cs(){}E(cs,ha),cs.prototype.g=function(){return new XMLHttpRequest},nl=new cs;function Bi(c){return encodeURIComponent(String(c))}function Mo(c){var g=1;c=c.split(":");const _=[];for(;g>0&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function $n(c,g,_,w){this.j=c,this.i=g,this.l=_,this.S=w||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ot={},Ft={};function gi(c,g,_){c.M=1,c.A=us(jt(g)),c.u=_,c.R=!0,Ys(c,null)}function Ys(c,g){c.F=Date.now(),pi(c),c.B=jt(c.A);var _=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),Zs(_.i,"t",w),c.C=0,_=c.j.L,c.h=new Zn,c.g=Fo(c.j,_?g:null,!c.u),c.P>0&&(c.O=new It(b(c.Y,c,c.g),c.P)),g=c.V,_=c.g,w=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(ci[0]=q.toString()),q=ci);for(let Y=0;Y<q.length;Y++){const he=Ae(_,q[Y],w||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),hi(),Ku(c.i,c.v,c.B,c.l,c.S,c.u)}$n.prototype.ba=function(c){c=c.target;const g=this.O;g&&ei(c)==3?g.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{const Oe=ei(this.g),At=this.g.ya(),We=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Oe!=4||At==7||(At==8||We<=0?hi(3):hi(2)),yi(this);var g=this.g.ca();this.X=g;var _=Zu(this);if(this.o=g==200,Ro(this.i,this.v,this.B,this.l,this.S,Oe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(w)){var Y=w;break t}}Y=null}if(c=Y)mi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vi(this,c);else{this.o=!1,this.m=3,Dt(12),Tn(this),Vn(this);break e}}if(this.R){c=!0;let _t;for(;!this.K&&this.C<_.length;)if(_t=Do(this,_),_t==Ft){Oe==4&&(this.m=4,Dt(14),c=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Dt(15),mi(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else mi(this.i,this.l,_t,null),vi(this,_t);if(Io(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||_.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)mi(this.i,this.l,_,"[Invalid Chunked Response]"),Tn(this),Vn(this);else if(_.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),yl(he),he.P=!0,Dt(11))}}else mi(this.i,this.l,_,null),vi(this,_);Oe==4&&Tn(this),this.o&&!this.K&&(Oe==4?Po(this.j,this):(this.o=!1,pi(this)))}else Pi(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Tn(this),Vn(this)}}}catch{}finally{}};function Zu(c){if(!Io(c))return c.g.la();const g=Zt(c.g);if(g==="")return"";let _="";const w=g.length,q=ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Tn(c),Vn(c),"";c.h.i=new f.TextDecoder}for(let Y=0;Y<w;Y++)c.h.h=!0,_+=c.h.i.decode(g[Y],{stream:!(q&&Y==w-1)});return g.length=0,c.h.g+=_,c.C=0,c.h.g}function Io(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Do(c,g){var _=c.C,w=g.indexOf(`
`,_);return w==-1?Ft:(_=Number(g.substring(_,w)),isNaN(_)?Ot:(w+=1,w+_>g.length?Ft:(g=g.slice(w,w+_),c.C=w+_,g)))}$n.prototype.cancel=function(){this.K=!0,Tn(this)};function pi(c){c.T=Date.now()+c.H,Xs(c,c.H)}function Xs(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=di(b(c.aa,c),g)}function yi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}$n.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ls(this.i,this.B),this.M!=2&&(hi(),Dt(17)),Tn(this),this.m=2,Vn(this)):Xs(this,this.T-c)};function Vn(c){c.j.I==0||c.K||Po(c.j,c)}function Tn(c){yi(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,it(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function vi(c,g){try{var _=c.j;if(_.I!=0&&(_.g==c||bi(_.h,c))){if(!c.L&&bi(_.h,c)&&_.I==3){try{var w=_.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)nr(_),_a(_);else break e;ys(_),Dt(18)}}else _.xa=q[1],0<_.xa-_.K&&q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=di(b(_.Va,_),6e3));_i(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ai(_,11)}else if((c.L||_.g==c)&&nr(_),!N(g))for(q=_.Ba.g.parse(g),g=0;g<q.length;g++){let We=q[g];const _t=We[0];if(!(_t<=_.K))if(_.K=_t,We=We[1],_.I==2)if(We[0]=="c"){_.M=We[1],_.ba=We[2];const kn=We[3];kn!=null&&(_.ka=kn,_.j.info("VER="+_.ka));const Ci=We[4];Ci!=null&&(_.za=Ci,_.j.info("SVER="+_.za));const ti=We[5];ti!=null&&typeof ti=="number"&&ti>0&&(w=1.5*ti,_.O=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const ni=c.g;if(ni){const vs=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vs){var Y=w.h;Y.g||vs.indexOf("spdy")==-1&&vs.indexOf("quic")==-1&&vs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sl(Y,Y.h),Y.h=null))}if(w.G){const ir=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;ir&&(w.wa=ir,st(w.J,w.G,ir))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),w=_;var he=c;if(w.na=Ho(w,w.L?w.ba:null,w.W),he.L){rl(w.h,he);var Oe=he,At=w.O;At&&(Oe.H=At),Oe.D&&(yi(Oe),pi(Oe)),w.g=he}else Bo(w);_.i.length>0&&wi(_)}else We[0]!="stop"&&We[0]!="close"||Ai(_,7);else _.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Ai(_,7):gl(_):We[0]!="noop"&&_.l&&_.l.qa(We),_.A=0)}}hi(4)}catch{}}var Vt=class{constructor(c,g){this.g=c,this.map=g}};function il(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function al(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _i(c){return c.h?1:c.g?c.g.size:0}function bi(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function sl(c,g){c.g?c.g.add(g):c.h=g}function rl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}il.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ll(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.G);return g}return z(c.i)}var Oo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(c,g){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const w=c[_].indexOf("=");let q,Y=null;w>=0?(q=c[_].substring(0,w),Y=c[_].substring(w+1)):q=c[_],g(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Sn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof Sn?(this.l=c.l,Qt(this,c.j),this.o=c.o,this.g=c.g,fa(this,c.u),this.h=c.h,ol(this,ko(c.i)),this.m=c.m):c&&(g=String(c).match(Oo))?(this.l=!1,Qt(this,g[1]||"",!0),this.o=xi(g[2]||""),this.g=xi(g[3]||"",!0),fa(this,g[4]),this.h=xi(g[5]||"",!0),ol(this,g[6]||"",!0),this.m=xi(g[7]||"")):(this.l=!1,this.i=new ma(null,this.l))}Sn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(hs(g,$s,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(hs(g,$s,!0),"@"),c.push(Bi(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(hs(_,_.charAt(0)=="/"?cl:Vo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",hs(_,jo)),c.join("")},Sn.prototype.resolve=function(c){const g=jt(this);let _=!!c.j;_?Qt(g,c.j):_=!!c.o,_?g.o=c.o:_=!!c.g,_?g.g=c.g:_=c.u!=null;var w=c.h;if(_)fa(g,c.u);else if(_=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=g.h.lastIndexOf("/");q!=-1&&(w=g.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let he=0;he<q.length;){const Oe=q[he++];Oe=="."?w&&he==q.length&&Y.push(""):Oe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&he==q.length&&Y.push("")):(Y.push(Oe),w=!0)}w=Y.join("/")}else w=q}return _?g.h=w:_=c.i.toString()!=="",_?ol(g,ko(c.i)):_=!!c.m,_&&(g.m=c.m),g};function jt(c){return new Sn(c)}function Qt(c,g,_){c.j=_?xi(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function fa(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function ol(c,g,_){g instanceof ma?(c.i=g,Js(c.i,c.l)):(_||(g=hs(g,da)),c.i=new ma(g,c.l))}function st(c,g,_){c.i.set(g,_)}function us(c){return st(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function xi(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function hs(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,mn),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $s=/[#\/\?@]/g,Vo=/[#\?:]/g,cl=/[#\?]/g,da=/[#\?@]/g,jo=/#/g;function ma(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function gn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ks(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=ma.prototype,r.add=function(c,g){gn(this),this.i=null,c=ga(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Lo(c,g){gn(c),g=ga(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function ul(c,g){return gn(c),g=ga(c,g),c.g.has(g)}r.forEach=function(c,g){gn(this),this.g.forEach(function(_,w){_.forEach(function(q){c.call(g,q,w,this)},this)},this)};function hl(c,g){gn(c);let _=[];if(typeof g=="string")ul(c,g)&&(_=_.concat(c.g.get(ga(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)_=_.concat(c[g]);return _}r.set=function(c,g){return gn(this),this.i=null,c=ga(this,c),ul(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=hl(this,c),c.length>0?String(c[0]):g):g};function Zs(c,g,_){Lo(c,g),_.length>0&&(c.i=null,c.g.set(ga(c,g),z(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var _=g[w];const q=Bi(_);_=hl(this,_);for(let Y=0;Y<_.length;Y++){let he=q;_[Y]!==""&&(he+="="+Bi(_[Y])),c.push(he)}}return this.i=c.join("&")};function ko(c){const g=new ma;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function ga(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Js(c,g){g&&!c.j&&(gn(c),c.i=null,c.g.forEach(function(_,w){const q=w.toLowerCase();w!=q&&(Lo(this,w),Zs(this,q,_))},c)),c.j=g}function Jn(c,g){const _=new Kn;if(f.Image){const w=new Image;w.onload=x(jn,_,"TestLoadImage: loaded",!0,g,w),w.onerror=x(jn,_,"TestLoadImage: error",!1,g,w),w.onabort=x(jn,_,"TestLoadImage: abort",!1,g,w),w.ontimeout=x(jn,_,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else g(!1)}function fl(c,g){const _=new Kn,w=new AbortController,q=setTimeout(()=>{w.abort(),jn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:w.signal}).then(Y=>{clearTimeout(q),Y.ok?jn(_,"TestPingServer: ok",!0,g):jn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),jn(_,"TestPingServer: error",!1,g)})}function jn(c,g,_,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(_)}catch{}}function pa(){this.g=new ss}function Ei(c){this.i=c.Sb||null,this.h=c.ab||!1}E(Ei,ha),Ei.prototype.g=function(){return new fs(this.i,this.h)};function fs(c,g){nt.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(fs,nt),r=fs.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Wn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ws(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ws(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?ya(this):Wn(this),this.readyState==3&&Ws(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,ya(this))},r.Na=function(c){this.g&&(this.response=c,ya(this))},r.ga=function(){this.g&&ya(this)};function ya(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Wn(c)}r.setRequestHeader=function(c,g){this.A.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ln(c){let g="";return Le(c,function(_,w){g+=w,g+=":",g+=_,g+=`\r
`}),g}function ds(c,g,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Ln(_),typeof c=="string"?_!=null&&Bi(_):st(c,g,_))}function ot(c){nt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ot,nt);var Ti=/^https?$/i,dl=["POST","PUT"];r=ot.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,g,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=C(b(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Y){ms(this,Y);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)_.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())_.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(dl,g,void 0)>=0)||w||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of _)this.g.setRequestHeader(Y,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Y){ms(this,Y)}};function ms(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,ml(c),zi(c)}function ml(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,$e(this,"complete"),$e(this,"abort"),zi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?gs(this):this.Xa())},r.Xa=function(){gs(this)};function gs(c){if(c.h&&typeof u<"u"){if(c.v&&ei(c)==4)setTimeout(c.Ca.bind(c),0);else if($e(c,"readystatechange"),ei(c)==4){c.h=!1;try{const Y=c.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var w;if(w=Y===0){let he=String(c.D).match(Oo)[1]||null;!he&&f.self&&f.self.location&&(he=f.self.location.protocol.slice(0,-1)),w=!Ti.test(he?he.toLowerCase():"")}_=w}if(_)$e(c,"complete"),$e(c,"success");else{c.o=6;try{var q=ei(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",ml(c)}}finally{zi(c)}}}}function zi(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,g||$e(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ei(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Hs(g)}};function Zt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pi(c){const g={};c=(c.g&&ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(N(c[w]))continue;var _=Mo(c[w]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=g[q]||[];g[q]=Y,Y.push(_)}U(g,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function va(c){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,c),this.Za=Si("retryDelaySeedMs",1e4,c),this.Ta=Si("forwardChannelMaxRetries",2,c),this.va=Si("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new il(c&&c.concurrentRequestLimit),this.Ba=new pa,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=va.prototype,r.ka=8,r.I=1,r.connect=function(c,g,_,w){Dt(0),this.W=c,this.H=g||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.J=Ho(this,null,this.W),wi(this)};function gl(c){if(er(c),c.I==3){var g=c.V++,_=jt(c.J);if(st(_,"SID",c.M),st(_,"RID",g),st(_,"TYPE","terminate"),ps(c,_),g=new $n(c,c.j,g),g.M=2,g.A=us(jt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=g.A,_=!0),_||(g.g=Fo(g.j,null),g.g.ea(g.A)),g.F=Date.now(),pi(g)}qo(c)}function _a(c){c.g&&(yl(c),c.g.cancel(),c.g=null)}function er(c){_a(c),c.v&&(f.clearTimeout(c.v),c.v=null),nr(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function wi(c){if(!al(c.h)&&!c.m){c.m=!0;var g=c.Ea;fe||S(),ie||(fe(),ie=!0),R.add(g,c),c.D=0}}function tr(c,g){return _i(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=di(b(c.Ea,c,g),Go(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new $n(this,this.j,c);let Y=this.o;if(this.U&&(Y?(Y=V(Y),ce(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Uo(this,q,g),_=jt(this.J),st(_,"RID",c),st(_,"CVER",22),this.G&&st(_,"X-HTTP-Session-Id",this.G),ps(this,_),Y&&(this.R?g="headers="+Bi(Ln(Y))+"&"+g:this.u&&ds(_,this.u,Y)),sl(this.h,q),this.Ra&&st(_,"TYPE","init"),this.S?(st(_,"$req",g),st(_,"SID","null"),q.U=!0,gi(q,_,null)):gi(q,_,g),this.I=2}}else this.I==3&&(c?pl(this,c):this.i.length==0||al(this.h)||pl(this))};function pl(c,g){var _;g?_=g.l:_=c.V++;const w=jt(c.J);st(w,"SID",c.M),st(w,"RID",_),st(w,"AID",c.K),ps(c,w),c.u&&c.o&&ds(w,c.u,c.o),_=new $n(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Uo(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),sl(c.h,_),gi(_,w,g)}function ps(c,g){c.H&&Le(c.H,function(_,w){st(g,w,_)}),c.l&&Le({},function(_,w){st(g,w,_)})}function Uo(c,g,_){_=Math.min(c.i.length,_);const w=c.l?b(c.l.Ka,c.l,c):null;e:{var q=c.i;let Oe=-1;for(;;){const At=["count="+_];Oe==-1?_>0?(Oe=q[0].g,At.push("ofs="+Oe)):Oe=0:At.push("ofs="+Oe);let We=!0;for(let _t=0;_t<_;_t++){var Y=q[_t].g;const kn=q[_t].map;if(Y-=Oe,Y<0)Oe=Math.max(0,q[_t].g-100),We=!1;else try{Y="req"+Y+"_"||"";try{var he=kn instanceof Map?kn:Object.entries(kn);for(const[Ci,ti]of he){let ni=ti;m(ti)&&(ni=ui(ti)),At.push(Y+Ci+"="+encodeURIComponent(ni))}}catch(Ci){throw At.push(Y+"type="+encodeURIComponent("_badmap")),Ci}}catch{w&&w(kn)}}if(We){he=At.join("&");break e}}he=void 0}return c=c.i.splice(0,_),g.G=c,he}function Bo(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;fe||S(),ie||(fe(),ie=!0),R.add(g,c),c.A=0}}function ys(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=di(b(c.Da,c),Go(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=di(b(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),_a(this),zo(this))};function yl(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function zo(c){c.g=new $n(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=jt(c.na);st(g,"RID","rpc"),st(g,"SID",c.M),st(g,"AID",c.K),st(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&st(g,"TO",c.ia),st(g,"TYPE","xmlhttp"),ps(c,g),c.u&&c.o&&ds(g,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=us(jt(g)),_.u=null,_.R=!0,Ys(_,c)}r.Va=function(){this.C!=null&&(this.C=null,_a(this),ys(this),Dt(19))};function nr(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Po(c,g){var _=null;if(c.g==g){nr(c),yl(c),c.g=null;var w=2}else if(bi(c.h,g))_=g.G,rl(c.h,g),w=1;else return;if(c.I!=0){if(g.o)if(w==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var q=c.D;w=Qs(),$e(w,new fi(w,_)),wi(c)}else Bo(c);else if(q=g.m,q==3||q==0&&g.X>0||!(w==1&&tr(c,g)||w==2&&ys(c)))switch(_&&_.length>0&&(g=c.h,g.i=g.i.concat(_)),q){case 1:Ai(c,5);break;case 4:Ai(c,10);break;case 3:Ai(c,6);break;default:Ai(c,2)}}}function Go(c,g){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*g}function Ai(c,g){if(c.j.info("Error code "+g),g==2){var _=b(c.bb,c),w=c.Ua;const q=!w;w=new Sn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Qt(w,"https"),us(w),q?Jn(w.toString(),_):fl(w.toString(),_)}else Dt(2);c.I=0,c.l&&c.l.pa(g),qo(c),er(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function qo(c){if(c.I=0,c.ja=[],c.l){const g=ll(c.h);(g.length!=0||c.i.length!=0)&&(B(c.ja,g),B(c.ja,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.oa()}}function Ho(c,g,_){var w=_ instanceof Sn?jt(_):new Sn(_);if(w.g!="")g&&(w.g=g+"."+w.g),fa(w,w.u);else{var q=f.location;w=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;const Y=new Sn(null);w&&Qt(Y,w),g&&(Y.g=g),q&&fa(Y,q),_&&(Y.h=_),w=Y}return _=c.G,g=c.wa,_&&g&&st(w,_,g),st(w,"VER",c.ka),ps(c,w),w}function Fo(c,g,_){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new ot(new Ei({ab:_})):new ot(c.ma),g.Fa(c.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}r=Qo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ba(){}ba.prototype.g=function(c,g){return new fn(c,g)};function fn(c,g){nt.call(this),this.g=new va(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!N(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Gi(this)}E(fn,nt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){gl(this.g)},fn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=ui(c),c=_);g.i.push(new Vt(g.Ya++,c)),g.I==3&&wi(g)},fn.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,fn.Z.N.call(this)};function Yo(c){$t.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}E(Yo,$t);function Xo(){On.call(this),this.status=1}E(Xo,On);function Gi(c){this.g=c}E(Gi,Qo),Gi.prototype.ra=function(){$e(this.g,"a")},Gi.prototype.qa=function(c){$e(this.g,new Yo(c))},Gi.prototype.pa=function(c){$e(this.g,new Xo)},Gi.prototype.oa=function(){$e(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Vv=function(){return new ba},Ov=function(){return Qs()},Dv=wt,bd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,lu=os,tl.COMPLETE="complete",Iv=tl,Fs.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",nt.prototype.listen=nt.prototype.J,to=Fs,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Mv=ot}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore",gy="4.9.2";class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let $r="12.3.0";const Us=new Tv("@firebase/firestore");function Or(){return Us.logLevel}function ye(r,...t){if(Us.logLevel<=Ke.DEBUG){const i=t.map(qd);Us.debug(`Firestore (${$r}): ${r}`,...i)}}function oa(r,...t){if(Us.logLevel<=Ke.ERROR){const i=t.map(qd);Us.error(`Firestore (${$r}): ${r}`,...i)}}function qr(r,...t){if(Us.logLevel<=Ke.WARN){const i=t.map(qd);Us.warn(`Firestore (${$r}): ${r}`,...i)}}function qd(r){if(typeof r=="string")return r;try{return(function(i){return JSON.stringify(i)})(r)}catch{return r}}function Ne(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,jv(r,s,i)}function jv(r,t,i){let s=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw oa(s),new Error(s)}function at(r,t,i,s){let o="Unexpected state";typeof i=="string"?o=i:s=i,r||jv(t,o,s)}function Ie(r,t){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Kr{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ka{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}class Lv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(on.UNAUTHENTICATED)))}shutdown(){}}class LT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class kT{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){at(this.o===void 0,42304);let s=this.i;const o=v=>this.i!==s?(s=this.i,i(v)):Promise.resolve();let u=new Ka;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ka,t.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const v=u;t.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},m=v=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>m(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ka)}}),0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((s=>this.i!==t?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(at(typeof s.accessToken=="string",31837,{l:s}),new Lv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return at(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class UT{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BT{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new UT(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class py{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zT{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){at(this.o===void 0,3512);const s=u=>{u.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ye("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new py(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(at(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new py(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function PT(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}class Hd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=PT(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<i&&(s+=t.charAt(o[u]%62))}return s}}function He(r,t){return r<t?-1:r>t?1:0}function xd(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return id(o)===id(u)?He(o,u):id(o)?1:-1}return He(r.length,t.length)}const GT=55296,qT=57343;function id(r){const t=r.charCodeAt(0);return t>=GT&&t<=qT}function Hr(r,t,i){return r.length===t.length&&r.every(((s,o)=>i(s,t[o])))}const yy="__name__";class Oi{constructor(t,i,s){i===void 0?i=0:i>t.length&&Ne(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&Ne(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach((s=>{i.push(s)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let o=0;o<s;o++){const u=Oi.compareSegments(t.get(o),i.get(o));if(u!==0)return u}return He(t.length,i.length)}static compareSegments(t,i){const s=Oi.isNumericId(t),o=Oi.isNumericId(i);return s&&!o?-1:!s&&o?1:s&&o?Oi.extractNumericId(t).compare(Oi.extractNumericId(i)):xd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xa.fromString(t.substring(4,t.length-2))}}class gt extends Oi{construct(t,i,s){return new gt(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new me(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter((o=>o.length>0)))}return new gt(i)}static emptyPath(){return new gt([])}}const HT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Oi{construct(t,i,s){return new sn(t,i,s)}static isValidIdentifier(t){return HT.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yy}static keyField(){return new sn([yy])}static fromServerFormat(t){const i=[];let s="",o=0;const u=()=>{if(s.length===0)throw new me(ee.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new me(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new me(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=v,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new me(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(i)}static emptyPath(){return new sn([])}}class Se{constructor(t){this.path=t}static fromPath(t){return new Se(gt.fromString(t))}static fromName(t){return new Se(gt.fromString(t).popFirst(5))}static empty(){return new Se(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return gt.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Se(new gt(t.slice()))}}function kv(r,t,i){if(!i)throw new me(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function FT(r,t,i,s){if(t===!0&&s===!0)throw new me(ee.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function vy(r){if(!Se.isDocumentKey(r))throw new me(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _y(r){if(Se.isDocumentKey(r))throw new me(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Uv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Du(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Ne(12329,{type:typeof r})}function _u(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new me(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Du(r);throw new me(ee.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}function QT(r,t){if(t<=0)throw new me(ee.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}function Gt(r,t){const i={typeString:r};return t&&(i.value=t),i}function Eo(r,t){if(!Uv(r))throw new me(ee.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){i=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${s}' field to equal '${u.value}'`;break}}if(i)throw new me(ee.INVALID_ARGUMENT,i);return!0}const by=-62135596800,xy=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(t){return ft.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*xy);return new ft(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new me(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new me(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<by)throw new me(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new me(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xy}_compareTo(t){return this.seconds===t.seconds?He(this.nanoseconds,t.nanoseconds):He(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Eo(t,ft._jsonSchema))return new ft(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-by;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Gt("string",ft._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};class Me{static fromTimestamp(t){return new Me(t)}static min(){return new Me(new ft(0,0))}static max(){return new Me(new ft(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const go=-1;function YT(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(s===1e9?new ft(i+1,0):new ft(i,s));return new Za(o,Se.empty(),t)}function XT(r){return new Za(r.readTime,r.key,go)}class Za{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new Za(Me.min(),Se.empty(),go)}static max(){return new Za(Me.max(),Se.empty(),go)}}function KT(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=Se.comparator(r.documentKey,t.documentKey),i!==0?i:He(r.largestBatchId,t.largestBatchId))}const $T="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Zr(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==$T)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class te{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new te(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(s,o)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof te?i:te.resolve(i)}catch(i){return te.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):te.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):te.reject(i)}static resolve(t){return new te(((i,s)=>{i(t)}))}static reject(t){return new te(((i,s)=>{s(t)}))}static waitFor(t){return new te(((i,s)=>{let o=0,u=0,f=!1;t.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&i()}),(v=>s(v)))})),f=!0,u===o&&i()}))}static or(t){let i=te.resolve(!1);for(const s of t)i=i.next((o=>o?te.resolve(o):s()));return i}static forEach(t,i){const s=[];return t.forEach(((o,u)=>{s.push(i.call(this,o,u))})),this.waitFor(s)}static mapArray(t,i){return new te(((s,o)=>{const u=t.length,f=new Array(u);let m=0;for(let v=0;v<u;v++){const b=v;i(t[b]).next((x=>{f[b]=x,++m,m===u&&s(f)}),(x=>o(x)))}}))}static doWhile(t,i){return new te(((s,o)=>{const u=()=>{t()===!0?i().next((()=>{u()}),o):s()};u()}))}}function JT(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Jr(r){return r.name==="IndexedDbTransactionError"}class Ou{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ou.ce=-1;const Fd=-1;function Vu(r){return r==null}function bu(r){return r===0&&1/r==-1/0}function WT(r){return typeof r=="number"&&Number.isInteger(r)&&!bu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Bv="";function eS(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=Ey(t)),t=tS(r.get(i),t);return Ey(t)}function tS(r,t){let i=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":i+="";break;case Bv:i+="";break;default:i+=u}}return i}function Ey(r){return r+Bv+""}function Ty(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function zs(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function zv(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class xt{constructor(t,i){this.comparator=t,this.root=i||an.EMPTY}insert(t,i){return new xt(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return i+s.left.size;o<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,s)=>(t(i,s),!1)))}toString(){const t=[];return this.inorderTraversal(((i,s)=>(t.push(`${i}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tu(this.root,t,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tu(this.root,t,this.comparator,!0)}}class tu{constructor(t,i,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?s(t.key,i):1,i&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,i,s,o,u){this.key=t,this.value=i,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=u??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,o,u){return new an(t??this.key,i??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,s),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ne(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(t,i,s,o,u){return this}insert(t,i,s){return new an(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,s)=>(t(i),!1)))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(t){return new Sy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((s=>{i=i.add(s)})),i}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Ht(this.comparator);return i.data=t,i}}class Sy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ri{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new ri([])}unionWith(t){let i=new Ht(sn.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new ri(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Hr(this.fields,t.fields,((i,s)=>i.isEqual(s)))}}class Pv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Pv("Invalid base64 string: "+u):u}})(t);return new rn(i)}static fromUint8Array(t){const i=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(t);return new rn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return He(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const nS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(r){if(at(!!r,39018),typeof r=="string"){let t=0;const i=nS.exec(r);if(at(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Wa(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}const Gv="server_timestamp",qv="__type__",Hv="__previous_value__",Fv="__local_write_time__";function Qd(r){return(r?.mapValue?.fields||{})[qv]?.stringValue===Gv}function ju(r){const t=r.mapValue.fields[Hv];return Qd(t)?ju(t):t}function po(r){const t=Ja(r.mapValue.fields[Fv].timestampValue);return new ft(t.seconds,t.nanos)}class iS{constructor(t,i,s,o,u,f,m,v,b,x){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=x}}const xu="(default)";class yo{constructor(t,i){this.projectId=t,this.database=i||xu}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database===xu}isEqual(t){return t instanceof yo&&t.projectId===this.projectId&&t.database===this.database}}const Qv="__type__",aS="__max__",nu={mapValue:{}},Yv="__vector__",Eu="value";function es(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Qd(r)?4:rS(r)?9007199254740991:sS(r)?10:11:Ne(28295,{value:r})}function Ui(r,t){if(r===t)return!0;const i=es(r);if(i!==es(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return po(r).isEqual(po(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Ja(o.timestampValue),m=Ja(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,u){return Wa(o.bytesValue).isEqual(Wa(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,u){return Rt(o.geoPointValue.latitude)===Rt(u.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(u.geoPointValue.longitude)})(r,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Rt(o.integerValue)===Rt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Rt(o.doubleValue),m=Rt(u.doubleValue);return f===m?bu(f)===bu(m):isNaN(f)&&isNaN(m)}return!1})(r,t);case 9:return Hr(r.arrayValue.values||[],t.arrayValue.values||[],Ui);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Ty(f)!==Ty(m))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(m[v]===void 0||!Ui(f[v],m[v])))return!1;return!0})(r,t);default:return Ne(52216,{left:r})}}function vo(r,t){return(r.values||[]).find((i=>Ui(i,t)))!==void 0}function Fr(r,t){if(r===t)return 0;const i=es(r),s=es(t);if(i!==s)return He(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,t.booleanValue);case 2:return(function(u,f){const m=Rt(u.integerValue||u.doubleValue),v=Rt(f.integerValue||f.doubleValue);return m<v?-1:m>v?1:m===v?0:isNaN(m)?isNaN(v)?0:-1:1})(r,t);case 3:return wy(r.timestampValue,t.timestampValue);case 4:return wy(po(r),po(t));case 5:return xd(r.stringValue,t.stringValue);case 6:return(function(u,f){const m=Wa(u),v=Wa(f);return m.compareTo(v)})(r.bytesValue,t.bytesValue);case 7:return(function(u,f){const m=u.split("/"),v=f.split("/");for(let b=0;b<m.length&&b<v.length;b++){const x=He(m[b],v[b]);if(x!==0)return x}return He(m.length,v.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,f){const m=He(Rt(u.latitude),Rt(f.latitude));return m!==0?m:He(Rt(u.longitude),Rt(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Ay(r.arrayValue,t.arrayValue);case 10:return(function(u,f){const m=u.fields||{},v=f.fields||{},b=m[Eu]?.arrayValue,x=v[Eu]?.arrayValue,E=He(b?.values?.length||0,x?.values?.length||0);return E!==0?E:Ay(b,x)})(r.mapValue,t.mapValue);case 11:return(function(u,f){if(u===nu.mapValue&&f===nu.mapValue)return 0;if(u===nu.mapValue)return 1;if(f===nu.mapValue)return-1;const m=u.fields||{},v=Object.keys(m),b=f.fields||{},x=Object.keys(b);v.sort(),x.sort();for(let E=0;E<v.length&&E<x.length;++E){const C=xd(v[E],x[E]);if(C!==0)return C;const z=Fr(m[v[E]],b[x[E]]);if(z!==0)return z}return He(v.length,x.length)})(r.mapValue,t.mapValue);default:throw Ne(23264,{he:i})}}function wy(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return He(r,t);const i=Ja(r),s=Ja(t),o=He(i.seconds,s.seconds);return o!==0?o:He(i.nanos,s.nanos)}function Ay(r,t){const i=r.values||[],s=t.values||[];for(let o=0;o<i.length&&o<s.length;++o){const u=Fr(i[o],s[o]);if(u)return u}return He(i.length,s.length)}function Qr(r){return Ed(r)}function Ed(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const s=Ja(i);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return Wa(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return Se.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let s="[",o=!0;for(const u of i.values||[])o?o=!1:s+=",",s+=Ed(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(i){const s=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Ed(i.fields[f])}`;return o+"}"})(r.mapValue):Ne(61005,{value:r})}function ou(r){switch(es(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ju(r);return t?16+ou(t):16;case 5:return 2*r.stringValue.length;case 6:return Wa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+ou(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return zs(s.fields,((u,f)=>{o+=u.length+ou(f)})),o})(r.mapValue);default:throw Ne(13486,{value:r})}}function Cy(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Td(r){return!!r&&"integerValue"in r}function Yd(r){return!!r&&"arrayValue"in r}function Ny(r){return!!r&&"nullValue"in r}function Ry(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function cu(r){return!!r&&"mapValue"in r}function sS(r){return(r?.mapValue?.fields||{})[Qv]?.stringValue===Yv}function ro(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return zs(r.mapValue.fields,((i,s)=>t.mapValue.fields[i]=ro(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=ro(r.arrayValue.values[i]);return t}return{...r}}function rS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===aS}class Qn{constructor(t){this.value=t}static empty(){return new Qn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!cu(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=ro(i)}setAll(t){let i=sn.emptyPath(),s={},o=[];t.forEach(((f,m)=>{if(!i.isImmediateParentOf(m)){const v=this.getFieldsMap(i);this.applyChanges(v,s,o),s={},o=[],i=m.popLast()}f?s[m.lastSegment()]=ro(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,s,o)}delete(t){const i=this.field(t.popLast());cu(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ui(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=i.mapValue.fields[t.get(s)];cu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,s){zs(i,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new Qn(ro(this.value))}}function Xv(r){const t=[];return zs(r.fields,((i,s)=>{const o=new sn([i]);if(cu(s)){const u=Xv(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)})),new ri(t)}class cn{constructor(t,i,s,o,u,f,m){this.key=t,this.documentType=i,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Me.min(),Me.min(),Me.min(),Qn.empty(),0)}static newFoundDocument(t,i,s,o){return new cn(t,1,i,Me.min(),s,o,0)}static newNoDocument(t,i){return new cn(t,2,i,Me.min(),Me.min(),Qn.empty(),0)}static newUnknownDocument(t,i){return new cn(t,3,i,Me.min(),Me.min(),Qn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tu{constructor(t,i){this.position=t,this.inclusive=i}}function My(r,t,i){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=Se.comparator(Se.fromName(f.referenceValue),i.key):s=Fr(f,i.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Iy(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ui(r.position[i],t.position[i]))return!1;return!0}class _o{constructor(t,i="asc"){this.field=t,this.dir=i}}function lS(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class Kv{}class Pt extends Kv{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new cS(t,i,s):i==="array-contains"?new fS(t,s):i==="in"?new dS(t,s):i==="not-in"?new mS(t,s):i==="array-contains-any"?new gS(t,s):new Pt(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new uS(t,s):new hS(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Fr(i,this.value)):i!==null&&es(this.value)===es(i)&&this.matchesComparison(Fr(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends Kv{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new li(t,i)}matches(t){return $v(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $v(r){return r.op==="and"}function Zv(r){return oS(r)&&$v(r)}function oS(r){for(const t of r.filters)if(t instanceof li)return!1;return!0}function Sd(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+Qr(r.value);if(Zv(r))return r.filters.map((t=>Sd(t))).join(",");{const t=r.filters.map((i=>Sd(i))).join(",");return`${r.op}(${t})`}}function Jv(r,t){return r instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&Ui(s.value,o.value)})(r,t):r instanceof li?(function(s,o){return o instanceof li&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&Jv(f,o.filters[m])),!0):!1})(r,t):void Ne(19439)}function Wv(r){return r instanceof Pt?(function(i){return`${i.field.canonicalString()} ${i.op} ${Qr(i.value)}`})(r):r instanceof li?(function(i){return i.op.toString()+" {"+i.getFilters().map(Wv).join(" ,")+"}"})(r):"Filter"}class cS extends Pt{constructor(t,i,s){super(t,i,s),this.key=Se.fromName(s.referenceValue)}matches(t){const i=Se.comparator(t.key,this.key);return this.matchesComparison(i)}}class uS extends Pt{constructor(t,i){super(t,"in",i),this.keys=e_("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class hS extends Pt{constructor(t,i){super(t,"not-in",i),this.keys=e_("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function e_(r,t){return(t.arrayValue?.values||[]).map((i=>Se.fromName(i.referenceValue)))}class fS extends Pt{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Yd(i)&&vo(i.arrayValue,this.value)}}class dS extends Pt{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&vo(this.value.arrayValue,i)}}class mS extends Pt{constructor(t,i){super(t,"not-in",i)}matches(t){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!vo(this.value.arrayValue,i)}}class gS extends Pt{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Yd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((s=>vo(this.value.arrayValue,s)))}}class pS{constructor(t,i=null,s=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Dy(r,t=null,i=[],s=[],o=null,u=null,f=null){return new pS(r,t,i,s,o,u,f)}function Xd(r){const t=Ie(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((s=>Sd(s))).join(","),i+="|ob:",i+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Vu(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Qr(s))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Qr(s))).join(",")),t.Te=i}return t.Te}function Kd(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!lS(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!Jv(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Iy(r.startAt,t.startAt)&&Iy(r.endAt,t.endAt)}function wd(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Wr{constructor(t,i=null,s=[],o=[],u=null,f="F",m=null,v=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yS(r,t,i,s,o,u,f,m){return new Wr(r,t,i,s,o,u,f,m)}function t_(r){return new Wr(r)}function Oy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function n_(r){return r.collectionGroup!==null}function lo(r){const t=Ie(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),i.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(sn.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(m=m.add(b.field))}))})),m})(t).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new _o(u,s))})),i.has(sn.keyField().canonicalString())||t.Ie.push(new _o(sn.keyField(),s))}return t.Ie}function Vi(r){const t=Ie(r);return t.Ee||(t.Ee=vS(t,lo(r))),t.Ee}function vS(r,t){if(r.limitType==="F")return Dy(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new _o(o.field,u)}));const i=r.endAt?new Tu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Tu(r.startAt.position,r.startAt.inclusive):null;return Dy(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function Ad(r,t){const i=r.filters.concat([t]);return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Su(r,t,i){return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function Lu(r,t){return Kd(Vi(r),Vi(t))&&r.limitType===t.limitType}function i_(r){return`${Xd(Vi(r))}|lt:${r.limitType}`}function Vr(r){return`Query(target=${(function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map((o=>Wv(o))).join(", ")}]`),Vu(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map((o=>Qr(o))).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map((o=>Qr(o))).join(",")),`Target(${s})`})(Vi(r))}; limitType=${r.limitType})`}function ku(r,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Se.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,t)&&(function(s,o){for(const u of lo(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(f,m,v){const b=My(f,m,v);return f.inclusive?b<=0:b<0})(s.startAt,lo(s),o)||s.endAt&&!(function(f,m,v){const b=My(f,m,v);return f.inclusive?b>=0:b>0})(s.endAt,lo(s),o))})(r,t)}function _S(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function a_(r){return(t,i)=>{let s=!1;for(const o of lo(r)){const u=bS(o,t,i);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function bS(r,t,i){const s=r.field.isKeyField()?Se.comparator(t.key,i.key):(function(u,f,m){const v=f.data.field(u),b=m.data.field(u);return v!==null&&b!==null?Fr(v,b):Ne(42886)})(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ne(19790,{direction:r.dir})}}class Ps{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[i]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){zs(this.inner,((i,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return zv(this.inner)}size(){return this.innerSize}}const xS=new xt(Se.comparator);function ca(){return xS}const s_=new xt(Se.comparator);function no(...r){let t=s_;for(const i of r)t=t.insert(i.key,i);return t}function r_(r){let t=s_;return r.forEach(((i,s)=>t=t.insert(i,s.overlayedDocument))),t}function ks(){return oo()}function l_(){return oo()}function oo(){return new Ps((r=>r.toString()),((r,t)=>r.isEqual(t)))}const ES=new xt(Se.comparator),TS=new Ht(Se.comparator);function Fe(...r){let t=TS;for(const i of r)t=t.add(i);return t}const SS=new Ht(He);function wS(){return SS}function $d(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(t)?"-0":t}}function o_(r){return{integerValue:""+r}}function AS(r,t){return WT(t)?o_(t):$d(r,t)}class Uu{constructor(){this._=void 0}}function CS(r,t,i){return r instanceof wu?(function(o,u){const f={fields:{[qv]:{stringValue:Gv},[Fv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Qd(u)&&(u=ju(u)),u&&(f.fields[Hv]=u),{mapValue:f}})(i,t):r instanceof bo?u_(r,t):r instanceof xo?h_(r,t):(function(o,u){const f=c_(o,u),m=Vy(f)+Vy(o.Ae);return Td(f)&&Td(o.Ae)?o_(m):$d(o.serializer,m)})(r,t)}function NS(r,t,i){return r instanceof bo?u_(r,t):r instanceof xo?h_(r,t):i}function c_(r,t){return r instanceof Au?(function(s){return Td(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class wu extends Uu{}class bo extends Uu{constructor(t){super(),this.elements=t}}function u_(r,t){const i=f_(t);for(const s of r.elements)i.some((o=>Ui(o,s)))||i.push(s);return{arrayValue:{values:i}}}class xo extends Uu{constructor(t){super(),this.elements=t}}function h_(r,t){let i=f_(t);for(const s of r.elements)i=i.filter((o=>!Ui(o,s)));return{arrayValue:{values:i}}}class Au extends Uu{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function Vy(r){return Rt(r.integerValue||r.doubleValue)}function f_(r){return Yd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function RS(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof bo&&o instanceof bo||s instanceof xo&&o instanceof xo?Hr(s.elements,o.elements,Ui):s instanceof Au&&o instanceof Au?Ui(s.Ae,o.Ae):s instanceof wu&&o instanceof wu})(r.transform,t.transform)}class MS{constructor(t,i){this.version=t,this.transformResults=i}}class ra{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new ra}static exists(t){return new ra(void 0,t)}static updateTime(t){return new ra(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function uu(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Bu{}function d_(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new g_(r.key,ra.none()):new To(r.key,r.data,ra.none());{const i=r.data,s=Qn.empty();let o=new Ht(sn.comparator);for(let u of t.fields)if(!o.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Gs(r.key,s,new ri(o.toArray()),ra.none())}}function IS(r,t,i){r instanceof To?(function(o,u,f){const m=o.value.clone(),v=Ly(o.fieldTransforms,u,f.transformResults);m.setAll(v),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,t,i):r instanceof Gs?(function(o,u,f){if(!uu(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Ly(o.fieldTransforms,u,f.transformResults),v=u.data;v.setAll(m_(o)),v.setAll(m),u.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,t,i):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,i)}function co(r,t,i,s){return r instanceof To?(function(u,f,m,v){if(!uu(u.precondition,f))return m;const b=u.value.clone(),x=ky(u.fieldTransforms,v,f);return b.setAll(x),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null})(r,t,i,s):r instanceof Gs?(function(u,f,m,v){if(!uu(u.precondition,f))return m;const b=ky(u.fieldTransforms,v,f),x=f.data;return x.setAll(m_(u)),x.setAll(b),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(r,t,i,s):(function(u,f,m){return uu(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,t,i)}function DS(r,t){let i=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=c_(s.transform,o||null);u!=null&&(i===null&&(i=Qn.empty()),i.set(s.field,u))}return i||null}function jy(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Hr(s,o,((u,f)=>RS(u,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class To extends Bu{constructor(t,i,s,o=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends Bu{constructor(t,i,s,o,u=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function m_(r){const t=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}})),t}function Ly(r,t,i){const s=new Map;at(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let o=0;o<i.length;o++){const u=r[o],f=u.transform,m=t.data.field(u.field);s.set(u.field,NS(f,m,i[o]))}return s}function ky(r,t,i){const s=new Map;for(const o of r){const u=o.transform,f=i.data.field(o.field);s.set(o.field,CS(u,f,t))}return s}class g_ extends Bu{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OS extends Bu{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VS{constructor(t,i,s,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&IS(u,t,s[o])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=co(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=co(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=l_();return this.mutations.forEach((o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(o.key)?null:m;const v=d_(f,m);v!==null&&s.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(Me.min())})),s}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Fe())}isEqual(t){return this.batchId===t.batchId&&Hr(this.mutations,t.mutations,((i,s)=>jy(i,s)))&&Hr(this.baseMutations,t.baseMutations,((i,s)=>jy(i,s)))}}class Zd{constructor(t,i,s,o){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=o}static from(t,i,s){at(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return ES})();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Zd(t,i,s,o)}}class jS{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class LS{constructor(t,i){this.count=t,this.unchangedNames=i}}var zt,Xe;function kS(r){switch(r){case ee.OK:return Ne(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ne(15467,{code:r})}}function p_(r){if(r===void 0)return oa("GRPC error has no .code"),ee.UNKNOWN;switch(r){case zt.OK:return ee.OK;case zt.CANCELLED:return ee.CANCELLED;case zt.UNKNOWN:return ee.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ee.INTERNAL;case zt.UNAVAILABLE:return ee.UNAVAILABLE;case zt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case zt.NOT_FOUND:return ee.NOT_FOUND;case zt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case zt.ABORTED:return ee.ABORTED;case zt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case zt.DATA_LOSS:return ee.DATA_LOSS;default:return Ne(39323,{code:r})}}(Xe=zt||(zt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function US(){return new TextEncoder}const BS=new Xa([4294967295,4294967295],0);function Uy(r){const t=US().encode(r),i=new Rv;return i.update(t),new Uint8Array(i.digest())}function By(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Xa([i,s],0),new Xa([o,u],0)]}class Jd{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new io(`Invalid padding: ${i}`);if(s<0)throw new io(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new io(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Xa.fromNumber(this.ge)}ye(t,i,s){let o=t.add(i.multiply(Xa.fromNumber(s)));return o.compare(BS)===1&&(o=new Xa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Uy(t),[s,o]=By(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(t,i,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Jd(u,o,i);return s.forEach((m=>f.insert(m))),f}insert(t){if(this.ge===0)return;const i=Uy(t),[s,o]=By(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zu{constructor(t,i,s,o,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const o=new Map;return o.set(t,So.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new zu(Me.min(),o,new xt(He),ca(),Fe())}}class So{constructor(t,i,s,o,u){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new So(s,i,Fe(),Fe(),Fe())}}class hu{constructor(t,i,s,o){this.be=t,this.removedTargetIds=i,this.key=s,this.De=o}}class y_{constructor(t,i){this.targetId=t,this.Ce=i}}class v_{constructor(t,i,s=rn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=o}}class zy{constructor(){this.ve=0,this.Fe=Py(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Fe(),i=Fe(),s=Fe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:s=s.add(o);break;default:Ne(38017,{changeType:u})}})),new So(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=Py()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zS{constructor(t){this.Ge=t,this.ze=new Map,this.je=ca(),this.Je=iu(),this.He=iu(),this.Ye=new xt(He)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:Ne(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((s,o)=>{this.rt(o)&&i(o)}))}st(t){const i=t.targetId,s=t.Ce.count,o=this.ot(i);if(o){const u=o.target;if(wd(u))if(s===0){const f=new Se(u.path);this.et(i,f,cn.newNoDocument(f,Me.min()))}else at(s===1,20013,{expectedCount:s});else{const f=this._t(i);if(f!==s){const m=this.ut(t),v=m?this.ct(m,t,f):1;if(v!==0){this.it(i);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,b)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=i;let f,m;try{f=Wa(s).toUint8Array()}catch(v){if(v instanceof Pv)return qr("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{m=new Jd(f,o,u)}catch(v){return qr(v instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return m.ge===0?null:m}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(i,u,null),o++)})),o}Tt(t){const i=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&wd(m.target)){const v=new Se(m.target.path);this.It(v).has(f)||this.Et(f,v)||this.et(f,v,cn.newNoDocument(v,t))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let s=Fe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const o=new zu(t,i,this.Ye,this.je,s);return this.je=ca(),this.Je=iu(),this.He=iu(),this.Ye=new xt(He),o}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new zy,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Ht(He),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Ht(He),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||ye("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zy),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function iu(){return new xt(Se.comparator)}function Py(){return new xt(Se.comparator)}const PS={asc:"ASCENDING",desc:"DESCENDING"},GS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qS={and:"AND",or:"OR"};class HS{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Cd(r,t){return r.useProto3Json||Vu(t)?t:{value:t}}function Cu(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function __(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function FS(r,t){return Cu(r,t.toTimestamp())}function ji(r){return at(!!r,49232),Me.fromTimestamp((function(i){const s=Ja(i);return new ft(s.seconds,s.nanos)})(r))}function Wd(r,t){return Nd(r,t).canonicalString()}function Nd(r,t){const i=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?i:i.child(t)}function b_(r){const t=gt.fromString(r);return at(w_(t),10190,{key:t.toString()}),t}function Rd(r,t){return Wd(r.databaseId,t.path)}function ad(r,t){const i=b_(t);if(i.get(1)!==r.databaseId.projectId)throw new me(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new me(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Se(E_(i))}function x_(r,t){return Wd(r.databaseId,t)}function QS(r){const t=b_(r);return t.length===4?gt.emptyPath():E_(t)}function Md(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function E_(r){return at(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Gy(r,t,i){return{name:Rd(r,t),fields:i.value.mapValue.fields}}function YS(r,t){let i;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Ne(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(b,x){return b.useProto3Json?(at(x===void 0||typeof x=="string",58123),rn.fromBase64String(x||"")):(at(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),rn.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&(function(b){const x=b.code===void 0?ee.UNKNOWN:p_(b.code);return new me(x,b.message||"")})(f);i=new v_(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=ad(r,s.document.name),u=ji(s.document.updateTime),f=s.document.createTime?ji(s.document.createTime):Me.min(),m=new Qn({mapValue:{fields:s.document.fields}}),v=cn.newFoundDocument(o,u,f,m),b=s.targetIds||[],x=s.removedTargetIds||[];i=new hu(b,x,v.key,v)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=ad(r,s.document),u=s.readTime?ji(s.readTime):Me.min(),f=cn.newNoDocument(o,u),m=s.removedTargetIds||[];i=new hu([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=ad(r,s.document),u=s.removedTargetIds||[];i=new hu([],u,o,null)}else{if(!("filter"in t))return Ne(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new LS(o,u),m=s.targetId;i=new y_(m,f)}}return i}function XS(r,t){let i;if(t instanceof To)i={update:Gy(r,t.key,t.value)};else if(t instanceof g_)i={delete:Rd(r,t.key)};else if(t instanceof Gs)i={update:Gy(r,t.key,t.data),updateMask:i2(t.fieldMask)};else{if(!(t instanceof OS))return Ne(16599,{Vt:t.type});i={verify:Rd(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof wu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof bo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Au)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ne(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(i.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:FS(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne(27497)})(r,t.precondition)),i}function KS(r,t){return r&&r.length>0?(at(t!==void 0,14353),r.map((i=>(function(o,u){let f=o.updateTime?ji(o.updateTime):ji(u);return f.isEqual(Me.min())&&(f=ji(u)),new MS(f,o.transformResults||[])})(i,t)))):[]}function $S(r,t){return{documents:[x_(r,t.path)]}}function ZS(r,t){const i={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=x_(r,o);const u=(function(b){if(b.length!==0)return S_(li.create(b,"and"))})(t.filters);u&&(i.structuredQuery.where=u);const f=(function(b){if(b.length!==0)return b.map((x=>(function(C){return{field:jr(C.field),direction:e2(C.dir)}})(x)))})(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=Cd(r,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:i,parent:o}}function JS(r){let t=QS(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let o=null;if(s>0){at(s===1,65062);const x=i.from[0];x.allDescendants?o=x.collectionId:t=t.child(x.collectionId)}let u=[];i.where&&(u=(function(E){const C=T_(E);return C instanceof li&&Zv(C)?C.getFilters():[C]})(i.where));let f=[];i.orderBy&&(f=(function(E){return E.map((C=>(function(B){return new _o(Lr(B.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(C)))})(i.orderBy));let m=null;i.limit&&(m=(function(E){let C;return C=typeof E=="object"?E.value:E,Vu(C)?null:C})(i.limit));let v=null;i.startAt&&(v=(function(E){const C=!!E.before,z=E.values||[];return new Tu(z,C)})(i.startAt));let b=null;return i.endAt&&(b=(function(E){const C=!E.before,z=E.values||[];return new Tu(z,C)})(i.endAt)),yS(t,o,f,u,m,"F",v,b)}function WS(r,t){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function T_(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Lr(i.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Lr(i.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Lr(i.unaryFilter.field);return Pt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Lr(i.unaryFilter.field);return Pt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Pt.create(Lr(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return li.create(i.compositeFilter.filters.map((s=>T_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(i.compositeFilter.op))})(r):Ne(30097,{filter:r})}function e2(r){return PS[r]}function t2(r){return GS[r]}function n2(r){return qS[r]}function jr(r){return{fieldPath:r.canonicalString()}}function Lr(r){return sn.fromServerFormat(r.fieldPath)}function S_(r){return r instanceof Pt?(function(i){if(i.op==="=="){if(Ry(i.value))return{unaryFilter:{field:jr(i.field),op:"IS_NAN"}};if(Ny(i.value))return{unaryFilter:{field:jr(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Ry(i.value))return{unaryFilter:{field:jr(i.field),op:"IS_NOT_NAN"}};if(Ny(i.value))return{unaryFilter:{field:jr(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(i.field),op:t2(i.op),value:i.value}}})(r):r instanceof li?(function(i){const s=i.getFilters().map((o=>S_(o)));return s.length===1?s[0]:{compositeFilter:{op:n2(i.op),filters:s}}})(r):Ne(54877,{filter:r})}function i2(r){const t=[];return r.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function w_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Fa{constructor(t,i,s,o,u=Me.min(),f=Me.min(),m=rn.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(t){return new Fa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class a2{constructor(t){this.yt=t}}function s2(r){const t=JS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Su(t,t.limit,"L"):t}class r2{constructor(){this.Cn=new l2}addToCollectionParentIndex(t,i){return this.Cn.add(i),te.resolve()}getCollectionParents(t,i){return te.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return te.resolve()}deleteFieldIndex(t,i){return te.resolve()}deleteAllFieldIndexes(t){return te.resolve()}createTargetIndexes(t,i){return te.resolve()}getDocumentsMatchingTarget(t,i){return te.resolve(null)}getIndexType(t,i){return te.resolve(0)}getFieldIndexes(t,i){return te.resolve([])}getNextCollectionGroupToUpdate(t){return te.resolve(null)}getMinOffset(t,i){return te.resolve(Za.min())}getMinOffsetFromCollectionGroup(t,i){return te.resolve(Za.min())}updateCollectionGroup(t,i,s){return te.resolve()}updateIndexEntries(t,i){return te.resolve()}}class l2{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),o=this.index[i]||new Ht(gt.comparator),u=!o.has(s);return this.index[i]=o.add(s),u}has(t){const i=t.lastSegment(),s=t.popLast(),o=this.index[i];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ht(gt.comparator)).toArray()}}const qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A_=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(A_,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Yr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Yr(0)}static cr(){return new Yr(-1)}}const Hy="LruGarbageCollector",o2=1048576;function Fy([r,t],[i,s]){const o=He(r,i);return o===0?He(t,s):o}class c2{constructor(t){this.Ir=t,this.buffer=new Ht(Fy),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();Fy(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class u2{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ye(Hy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Jr(i)?ye(Hy,"Ignoring IndexedDB error during garbage collection: ",i):await Zr(i)}await this.Vr(3e5)}))}}class h2{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((s=>Math.floor(i/100*s)))}nthSequenceNumber(t,i){if(i===0)return te.resolve(Ou.ce);const s=new c2(i);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(qy)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qy):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,o,u,f,m,v,b;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(t,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(t,s,i)))).next((E=>(u=E,v=Date.now(),this.removeOrphanedDocuments(t,s)))).next((E=>(b=Date.now(),Or()<=Ke.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-x}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(v-m)+`ms
	Removed ${E} documents in `+(b-v)+`ms
Total Duration: ${b-x}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function f2(r,t){return new h2(r,t)}class d2{constructor(){this.changes=new Ps((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?te.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class m2{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class g2{constructor(t,i,s,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,i)))).next((o=>(s!==null&&co(s.mutation,o,ri.empty(),ft.now()),o)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((s=>this.getLocalViewOfDocuments(t,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(t,i,s=Fe()){const o=ks();return this.populateOverlays(t,o,i).next((()=>this.computeViews(t,i,o,s).next((u=>{let f=no();return u.forEach(((m,v)=>{f=f.insert(m,v.overlayedDocument)})),f}))))}getOverlayedDocuments(t,i){const s=ks();return this.populateOverlays(t,s,i).next((()=>this.computeViews(t,i,s,Fe())))}populateOverlays(t,i,s){const o=[];return s.forEach((u=>{i.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((f,m)=>{i.set(f,m)}))}))}computeViews(t,i,s,o){let u=ca();const f=oo(),m=(function(){return oo()})();return i.forEach(((v,b)=>{const x=s.get(b.key);o.has(b.key)&&(x===void 0||x.mutation instanceof Gs)?u=u.insert(b.key,b):x!==void 0?(f.set(b.key,x.mutation.getFieldMask()),co(x.mutation,b,x.mutation.getFieldMask(),ft.now())):f.set(b.key,ri.empty())})),this.recalculateAndSaveOverlays(t,u).next((v=>(v.forEach(((b,x)=>f.set(b,x))),i.forEach(((b,x)=>m.set(b,new m2(x,f.get(b)??null)))),m)))}recalculateAndSaveOverlays(t,i){const s=oo();let o=new xt(((f,m)=>f-m)),u=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((f=>{for(const m of f)m.keys().forEach((v=>{const b=i.get(v);if(b===null)return;let x=s.get(v)||ri.empty();x=m.applyToLocalView(b,x),s.set(v,x);const E=(o.get(m.batchId)||Fe()).add(v);o=o.insert(m.batchId,E)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),b=v.key,x=v.value,E=l_();x.forEach((C=>{if(!u.has(C)){const z=d_(i.get(C),s.get(C));z!==null&&E.set(C,z),u=u.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(t,b,E))}return te.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,i,s,o){return(function(f){return Se.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):n_(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,o):this.getDocumentsMatchingCollectionQuery(t,i,s,o)}getNextDocuments(t,i,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,o-u.size):te.resolve(ks());let m=go,v=u;return f.next((b=>te.forEach(b,((x,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(x)?te.resolve():this.remoteDocumentCache.getEntry(t,x).next((C=>{v=v.insert(x,C)}))))).next((()=>this.populateOverlays(t,b,u))).next((()=>this.computeViews(t,v,b,Fe()))).next((x=>({batchId:m,changes:r_(x)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Se(i)).next((s=>{let o=no();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,i,s,o){const u=i.collectionGroup;let f=no();return this.indexManager.getCollectionParents(t,u).next((m=>te.forEach(m,(v=>{const b=(function(E,C){return new Wr(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(i,v.child(u));return this.getDocumentsMatchingCollectionQuery(t,b,s,o).next((x=>{x.forEach(((E,C)=>{f=f.insert(E,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,i,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,u,o)))).next((f=>{u.forEach(((v,b)=>{const x=b.getKey();f.get(x)===null&&(f=f.insert(x,cn.newInvalidDocument(x)))}));let m=no();return f.forEach(((v,b)=>{const x=u.get(v);x!==void 0&&co(x.mutation,b,ri.empty(),ft.now()),ku(i,b)&&(m=m.insert(v,b))})),m}))}}class p2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return te.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:ji(o.createTime)}})(i)),te.resolve()}getNamedQuery(t,i){return te.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:s2(o.bundledQuery),readTime:ji(o.readTime)}})(i)),te.resolve()}}class y2{constructor(){this.overlays=new xt(Se.comparator),this.qr=new Map}getOverlay(t,i){return te.resolve(this.overlays.get(i))}getOverlays(t,i){const s=ks();return te.forEach(i,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,i,s){return s.forEach(((o,u)=>{this.St(t,i,u)})),te.resolve()}removeOverlaysForBatchId(t,i,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(t,i,s){const o=ks(),u=i.length+1,f=new Se(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const v=m.getNext().value,b=v.getKey();if(!i.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>s&&o.set(v.getKey(),v)}return te.resolve(o)}getOverlaysForCollectionGroup(t,i,s,o){let u=new xt(((b,x)=>b-x));const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===i&&b.largestBatchId>s){let x=u.get(b.largestBatchId);x===null&&(x=ks(),u=u.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=ks(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,x)=>m.set(b,x))),!(m.size()>=o)););return te.resolve(m)}St(t,i,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new jS(i,s));let u=this.qr.get(i);u===void 0&&(u=Fe(),this.qr.set(i,u)),this.qr.set(i,u.add(s.key))}}class v2{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return te.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,te.resolve()}}class em{constructor(){this.Qr=new Ht(Xt.$r),this.Ur=new Ht(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new Xt(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach((s=>this.addReference(s,i)))}removeReference(t,i){this.Gr(new Xt(t,i))}zr(t,i){t.forEach((s=>this.removeReference(s,i)))}jr(t){const i=new Se(new gt([])),s=new Xt(i,t),o=new Xt(i,t+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new Se(new gt([])),s=new Xt(i,t),o=new Xt(i,t+1);let u=Fe();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(t){const i=new Xt(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class Xt{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return Se.comparator(t.key,i.key)||He(t.Yr,i.Yr)}static Kr(t,i){return He(t.Yr,i.Yr)||Se.comparator(t.key,i.key)}}class _2{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Xt.$r)}checkEmpty(t){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new VS(u,i,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return te.resolve(f)}lookupMutationBatch(t,i){return te.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,o=this.ei(s),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Fd:this.tr-1)}getAllMutationBatches(t){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new Xt(i,0),o=new Xt(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new Ht(He);return i.forEach((o=>{const u=new Xt(o,0),f=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,o=s.length+1;let u=s;Se.isDocumentKey(u)||(u=u.child(""));const f=new Xt(new Se(u),0);let m=new Ht(He);return this.Zr.forEachWhile((v=>{const b=v.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(m=m.add(v.Yr)),!0)}),f),te.resolve(this.ti(m))}ti(t){const i=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&i.push(o)})),i}removeMutationBatch(t,i){at(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(i.mutations,(o=>{const u=new Xt(o.key,i.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,i){const s=new Xt(i,0),o=this.Zr.firstAfterOrEqual(s);return te.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,te.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class b2{constructor(t){this.ri=t,this.docs=(function(){return new xt(Se.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return te.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(i))}getEntries(t,i){let s=ca();return i.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():cn.newInvalidDocument(o))})),te.resolve(s)}getDocumentsMatchingQuery(t,i,s,o){let u=ca();const f=i.path,m=new Se(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:b,value:{document:x}}=v.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||KT(XT(x),s)<=0||(o.has(x.key)||ku(i,x))&&(u=u.insert(x.key,x.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(t,i,s,o){Ne(9500)}ii(t,i){return te.forEach(this.docs,(s=>i(s)))}newChangeBuffer(t){return new x2(this)}getSize(t){return te.resolve(this.size)}}class x2 extends d2{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),te.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}class E2{constructor(t){this.persistence=t,this.si=new Ps((i=>Xd(i)),Kd),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new em,this.targetCount=0,this.ai=Yr.ur()}forEachTarget(t,i){return this.si.forEach(((s,o)=>i(o))),te.resolve()}getLastRemoteSnapshotVersion(t){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return te.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),te.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new Yr(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,te.resolve()}updateTargetData(t,i){return this.Pr(i),te.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,te.resolve()}removeTargets(t,i,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=i&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),te.waitFor(u).next((()=>o))}getTargetCount(t){return te.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return te.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),te.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach((f=>{u.push(o.markPotentiallyOrphaned(t,f))})),te.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),te.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return te.resolve(s)}containsKey(t,i){return te.resolve(this._i.containsKey(i))}}class C_{constructor(t,i){this.ui={},this.overlays={},this.ci=new Ou(0),this.li=!1,this.li=!0,this.hi=new v2,this.referenceDelegate=t(this),this.Pi=new E2(this),this.indexManager=new r2,this.remoteDocumentCache=(function(o){return new b2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new a2(i),this.Ii=new p2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new y2,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new _2(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){ye("MemoryPersistence","Starting transaction:",t);const o=new T2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,i){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,i))))}}class T2 extends ZT{constructor(t){super(),this.currentSequenceNumber=t}}class tm{constructor(t){this.persistence=t,this.Ri=new em,this.Vi=null}static mi(t){return new tm(t)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),te.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),te.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const o=Se.fromPath(s);return this.gi(t,o).next((u=>{u||i.removeEntry(o,Me.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return te.or([()=>te.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Nu{constructor(t,i){this.persistence=t,this.pi=new Ps((s=>eS(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=f2(this,i)}static mi(t,i){return new Nu(t,i)}Ei(){}di(t){return te.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>i.next((o=>s+o))))}wr(t){let i=0;return this.pr(t,(s=>{i++})).next((()=>i))}pr(t,i){return te.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?te.resolve():i(o)))))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(f=>this.br(t,f,i).next((m=>{m||(s++,u.removeEntry(f,Me.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),te.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),te.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),te.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),te.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=ou(t.data.value)),i}br(t,i,s){return te.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.pi.get(i);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class nm{constructor(t,i,s,o){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=o}static As(t,i){let s=Fe(),o=Fe();for(const u of i.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new nm(t,i.fromCache,s,o)}}class S2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class w2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return gE()?8:JT(dE())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,o){const u={result:null};return this.ys(t,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,i,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new S2;return this.Ss(t,i,f).next((m=>{if(u.result=m,this.Vs)return this.bs(t,i,f,m.size)}))})).next((()=>u.result))}bs(t,i,s,o){return s.documentReadCount<this.fs?(Or()<=Ke.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Vr(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Or()<=Ke.DEBUG&&ye("QueryEngine","Query:",Vr(i),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Or()<=Ke.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Vr(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vi(i))):te.resolve())}ys(t,i){if(Oy(i))return te.resolve(null);let s=Vi(i);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=Su(i,null,"F"),s=Vi(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const f=Fe(...u);return this.ps.getDocuments(t,f).next((m=>this.indexManager.getMinOffset(t,s).next((v=>{const b=this.Ds(i,m);return this.Cs(i,b,f,v.readTime)?this.ys(t,Su(i,null,"F")):this.vs(t,b,i,v)}))))})))))}ws(t,i,s,o){return Oy(i)||o.isEqual(Me.min())?te.resolve(null):this.ps.getDocuments(t,s).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,s,o)?te.resolve(null):(Or()<=Ke.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vr(i)),this.vs(t,f,i,YT(o,go)).next((m=>m)))}))}Ds(t,i){let s=new Ht(a_(t));return i.forEach(((o,u)=>{ku(t,u)&&(s=s.add(u))})),s}Cs(t,i,s,o){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,i,s){return Or()<=Ke.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Vr(i)),this.ps.getDocumentsMatchingQuery(t,i,Za.min(),s)}vs(t,i,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const im="LocalStore",A2=3e8;class C2{constructor(t,i,s,o){this.persistence=t,this.Fs=i,this.serializer=o,this.Ms=new xt(He),this.xs=new Ps((u=>Xd(u)),Kd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new g2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function N2(r,t,i,s){return new C2(r,t,i,s)}async function N_(r,t){const i=Ie(r);return await i.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return i.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,i.Bs(t),i.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let v=Fe();for(const b of o){f.push(b.batchId);for(const x of b.mutations)v=v.add(x.key)}for(const b of u){m.push(b.batchId);for(const x of b.mutations)v=v.add(x.key)}return i.localDocuments.getDocuments(s,v).next((b=>({Ls:b,removedBatchIds:f,addedBatchIds:m})))}))}))}function R2(r,t){const i=Ie(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,v,b,x){const E=b.batch,C=E.keys();let z=te.resolve();return C.forEach((B=>{z=z.next((()=>x.getEntry(v,B))).next((P=>{const j=b.docVersions.get(B);at(j!==null,48541),P.version.compareTo(j)<0&&(E.applyToRemoteDocument(P,b),P.isValidDocument()&&(P.setReadTime(b.commitVersion),x.addEntry(P)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(v,E)))})(i,s,t,u).next((()=>u.apply(s))).next((()=>i.mutationQueue.performConsistencyCheck(s))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let v=Fe();for(let b=0;b<m.mutationResults.length;++b)m.mutationResults[b].transformResults.length>0&&(v=v.add(m.batch.mutations[b].key));return v})(t)))).next((()=>i.localDocuments.getDocuments(s,o)))}))}function R_(r){const t=Ie(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function M2(r,t){const i=Ie(r),s=t.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const m=[];t.targetChanges.forEach(((x,E)=>{const C=o.get(E);if(!C)return;m.push(i.Pi.removeMatchingKeys(u,x.removedDocuments,E).next((()=>i.Pi.addMatchingKeys(u,x.addedDocuments,E))));let z=C.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?z=z.withResumeToken(rn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):x.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(x.resumeToken,s)),o=o.insert(E,z),(function(P,j,O){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=A2?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(C,z,x)&&m.push(i.Pi.updateTargetData(u,z))}));let v=ca(),b=Fe();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,x))})),m.push(I2(u,f,t.documentUpdates).next((x=>{v=x.ks,b=x.qs}))),!s.isEqual(Me.min())){const x=i.Pi.getLastRemoteSnapshotVersion(u).next((E=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(x)}return te.waitFor(m).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,v,b))).next((()=>v))})).then((u=>(i.Ms=o,u)))}function I2(r,t,i){let s=Fe(),o=Fe();return i.forEach((u=>s=s.add(u))),t.getEntries(r,s).next((u=>{let f=ca();return i.forEach(((m,v)=>{const b=u.get(m);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Me.min())?(t.removeEntry(m,v.readTime),f=f.insert(m,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(v),f=f.insert(m,v)):ye(im,"Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",v.version)})),{ks:f,qs:o}}))}function D2(r,t){const i=Ie(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Fd),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function O2(r,t){const i=Ie(r);return i.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return i.Pi.getTargetData(s,t).next((u=>u?(o=u,te.resolve(o)):i.Pi.allocateTargetId(s).next((f=>(o=new Fa(t,f,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=i.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s}))}async function Id(r,t,i){const s=Ie(r),o=s.Ms.get(t),u=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Jr(f))throw f;ye(im,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function Qy(r,t,i){const s=Ie(r);let o=Me.min(),u=Fe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,b,x){const E=Ie(v),C=E.xs.get(x);return C!==void 0?te.resolve(E.Ms.get(C)):E.Pi.getTargetData(b,x)})(s,f,Vi(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((v=>{u=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,i?o:Me.min(),i?u:Fe()))).next((m=>(V2(s,_S(t),m),{documents:m,Qs:u})))))}function V2(r,t,i){let s=r.Os.get(t)||Me.min();i.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(t,s)}class Yy{constructor(){this.activeTargetIds=wS()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class j2{constructor(){this.Mo=new Yy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Yy,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class L2{Oo(t){}shutdown(){}}const Xy="ConnectivityMonitor";class Ky{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(Xy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ye(Xy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let au=null;function Dd(){return au===null?au=(function(){return 268435456+Math.round(2147483648*Math.random())})():au++,"0x"+au.toString(16)}const sd="RestConnection",k2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===xu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,i,s,o,u){const f=Dd(),m=this.zo(t,i.toUriEncodedString());ye(sd,`Sending RPC '${t}' ${f}:`,m,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,u);const{host:b}=new URL(m),x=Pd(b);return this.Jo(t,m,v,s,x).then((E=>(ye(sd,`Received RPC '${t}' ${f}: `,E),E)),(E=>{throw qr(sd,`RPC '${t}' ${f} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(t,i,s,o,u,f){return this.Go(t,i,s,o,u)}jo(t,i,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$r})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,i){const s=k2[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}class B2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const ln="WebChannelConnection";class z2 extends U2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,o,u){const f=Dd();return new Promise(((m,v)=>{const b=new Mv;b.setWithCredentials(!0),b.listenOnce(Iv.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case lu.NO_ERROR:const E=b.getResponseJson();ye(ln,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(E)),m(E);break;case lu.TIMEOUT:ye(ln,`RPC '${t}' ${f} timed out`),v(new me(ee.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:const C=b.getStatus();if(ye(ln,`RPC '${t}' ${f} failed with status:`,C,"response text:",b.getResponseText()),C>0){let z=b.getResponseJson();Array.isArray(z)&&(z=z[0]);const B=z?.error;if(B&&B.status&&B.message){const P=(function(O){const Z=O.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Z)>=0?Z:ee.UNKNOWN})(B.status);v(new me(P,B.message))}else v(new me(ee.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new me(ee.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:t,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{ye(ln,`RPC '${t}' ${f} completed.`)}}));const x=JSON.stringify(o);ye(ln,`RPC '${t}' ${f} sending request:`,o),b.send(i,"POST",x,s,15)}))}T_(t,i,s){const o=Dd(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Vv(),m=Ov(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,i,s),v.encodeInitMessageHeaders=!0;const x=u.join("");ye(ln,`Creating RPC '${t}' stream ${o}: ${x}`,v);const E=f.createWebChannel(x,v);this.I_(E);let C=!1,z=!1;const B=new B2({Yo:j=>{z?ye(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,j):(C||(ye(ln,`Opening RPC '${t}' stream ${o} transport.`),E.open(),C=!0),ye(ln,`RPC '${t}' stream ${o} sending:`,j),E.send(j))},Zo:()=>E.close()}),P=(j,O,Z)=>{j.listen(O,(ne=>{try{Z(ne)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return P(E,to.EventType.OPEN,(()=>{z||(ye(ln,`RPC '${t}' stream ${o} transport opened.`),B.o_())})),P(E,to.EventType.CLOSE,(()=>{z||(z=!0,ye(ln,`RPC '${t}' stream ${o} transport closed`),B.a_(),this.E_(E))})),P(E,to.EventType.ERROR,(j=>{z||(z=!0,qr(ln,`RPC '${t}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),B.a_(new me(ee.UNAVAILABLE,"The operation could not be completed")))})),P(E,to.EventType.MESSAGE,(j=>{if(!z){const O=j.data[0];at(!!O,16349);const Z=O,ne=Z?.error||Z[0]?.error;if(ne){ye(ln,`RPC '${t}' stream ${o} received error:`,ne);const oe=ne.status;let fe=(function(S){const A=zt[S];if(A!==void 0)return p_(A)})(oe),ie=ne.message;fe===void 0&&(fe=ee.INTERNAL,ie="Unknown error status: "+oe+" with message "+ne.message),z=!0,B.a_(new me(fe,ie)),E.close()}else ye(ln,`RPC '${t}' stream ${o} received:`,O),B.u_(O)}})),P(m,Dv.STAT_EVENT,(j=>{j.stat===bd.PROXY?ye(ln,`RPC '${t}' stream ${o} detected buffering proxy`):j.stat===bd.NOPROXY&&ye(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function rd(){return typeof document<"u"?document:null}function Pu(r){return new HS(r,!0)}class M_{constructor(t,i,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-s);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $y="PersistentStream";class I_{constructor(t,i,s,o,u,f,m,v){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M_(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===ee.RESOURCE_EXHAUSTED?(oa(i.toString()),oa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===i&&this.G_(s,o)}),(s=>{t((()=>{const o=new me(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ye($y,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(ye($y,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class P2 extends I_{constructor(t,i,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,o,f),this.serializer=u}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=YS(this.serializer,t),s=(function(u){if(!("targetChange"in u))return Me.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Me.min():f.readTime?ji(f.readTime):Me.min()})(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=Md(this.serializer),i.addTarget=(function(u,f){let m;const v=f.target;if(m=wd(v)?{documents:$S(u,v)}:{query:ZS(u,v).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=__(u,f.resumeToken);const b=Cd(u,f.expectedCount);b!==null&&(m.expectedCount=b)}else if(f.snapshotVersion.compareTo(Me.min())>0){m.readTime=Cu(u,f.snapshotVersion.toTimestamp());const b=Cd(u,f.expectedCount);b!==null&&(m.expectedCount=b)}return m})(this.serializer,t);const s=WS(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=Md(this.serializer),i.removeTarget=t,this.q_(i)}}class G2 extends I_{constructor(t,i,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return at(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,at(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){at(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=KS(t.writeResults,t.commitTime),s=ji(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=Md(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((s=>XS(this.serializer,s)))};this.q_(i)}}class q2{}class H2 extends q2{constructor(t,i,s,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,Nd(i,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ee.UNKNOWN,u.toString())}))}Ho(t,i,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(t,Nd(i,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class F2{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oa(i),this.aa=!1):ye("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bs="RemoteStore";class Q2{constructor(t,i,s,o,u){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{qs(this)&&(ye(Bs,"Restarting streams for network reachability change."),await(async function(v){const b=Ie(v);b.Ea.add(4),await wo(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Gu(b)})(this))}))})),this.Ra=new F2(s,o)}}async function Gu(r){if(qs(r))for(const t of r.da)await t(!0)}async function wo(r){for(const t of r.da)await t(!1)}function D_(r,t){const i=Ie(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),lm(i)?rm(i):el(i).O_()&&sm(i,t))}function am(r,t){const i=Ie(r),s=el(i);i.Ia.delete(t),s.O_()&&O_(i,t),i.Ia.size===0&&(s.O_()?s.L_():qs(i)&&i.Ra.set("Unknown"))}function sm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Me.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}el(r).Y_(t)}function O_(r,t){r.Va.Ue(t),el(r).Z_(t)}function rm(r){r.Va=new zS({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),el(r).start(),r.Ra.ua()}function lm(r){return qs(r)&&!el(r).x_()&&r.Ia.size>0}function qs(r){return Ie(r).Ea.size===0}function V_(r){r.Va=void 0}async function Y2(r){r.Ra.set("Online")}async function X2(r){r.Ia.forEach(((t,i)=>{sm(r,t)}))}async function K2(r,t){V_(r),lm(r)?(r.Ra.ha(t),rm(r)):r.Ra.set("Unknown")}async function $2(r,t,i){if(r.Ra.set("Online"),t instanceof v_&&t.state===2&&t.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){ye(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Ru(r,s)}else if(t instanceof hu?r.Va.Ze(t):t instanceof y_?r.Va.st(t):r.Va.tt(t),!i.isEqual(Me.min()))try{const s=await R_(r.localStore);i.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const x=u.Ia.get(b);x&&u.Ia.set(b,x.withResumeToken(v.resumeToken,f))}})),m.targetMismatches.forEach(((v,b)=>{const x=u.Ia.get(v);if(!x)return;u.Ia.set(v,x.withResumeToken(rn.EMPTY_BYTE_STRING,x.snapshotVersion)),O_(u,v);const E=new Fa(x.target,v,b,x.sequenceNumber);sm(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(r,i)}catch(s){ye(Bs,"Failed to raise snapshot:",s),await Ru(r,s)}}async function Ru(r,t,i){if(!Jr(t))throw t;r.Ea.add(1),await wo(r),r.Ra.set("Offline"),i||(i=()=>R_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Bs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Gu(r)}))}function j_(r,t){return t().catch((i=>Ru(r,i,t)))}async function qu(r){const t=Ie(r),i=ts(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Fd;for(;Z2(t);)try{const o=await D2(t.localStore,s);if(o===null){t.Ta.length===0&&i.L_();break}s=o.batchId,J2(t,o)}catch(o){await Ru(t,o)}L_(t)&&k_(t)}function Z2(r){return qs(r)&&r.Ta.length<10}function J2(r,t){r.Ta.push(t);const i=ts(r);i.O_()&&i.X_&&i.ea(t.mutations)}function L_(r){return qs(r)&&!ts(r).x_()&&r.Ta.length>0}function k_(r){ts(r).start()}async function W2(r){ts(r).ra()}async function ew(r){const t=ts(r);for(const i of r.Ta)t.ea(i.mutations)}async function tw(r,t,i){const s=r.Ta.shift(),o=Zd.from(s,t,i);await j_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await qu(r)}async function nw(r,t){t&&ts(r).X_&&await(async function(s,o){if((function(f){return kS(f)&&f!==ee.ABORTED})(o.code)){const u=s.Ta.shift();ts(s).B_(),await j_(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await qu(s)}})(r,t),L_(r)&&k_(r)}async function Zy(r,t){const i=Ie(r);i.asyncQueue.verifyOperationInProgress(),ye(Bs,"RemoteStore received new credentials");const s=qs(i);i.Ea.add(3),await wo(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await Gu(i)}async function iw(r,t){const i=Ie(r);t?(i.Ea.delete(2),await Gu(i)):t||(i.Ea.add(2),await wo(i),i.Ra.set("Unknown"))}function el(r){return r.ma||(r.ma=(function(i,s,o){const u=Ie(i);return u.sa(),new P2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Y2.bind(null,r),t_:X2.bind(null,r),r_:K2.bind(null,r),H_:$2.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),lm(r)?rm(r):r.Ra.set("Unknown")):(await r.ma.stop(),V_(r))}))),r.ma}function ts(r){return r.fa||(r.fa=(function(i,s,o){const u=Ie(i);return u.sa(),new G2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:W2.bind(null,r),r_:nw.bind(null,r),ta:ew.bind(null,r),na:tw.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await qu(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Bs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class om{constructor(t,i,s,o,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,o,u){const f=Date.now()+s,m=new om(t,i,f,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ee.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cm(r,t){if(oa("AsyncQueue",`${t}: ${r}`),Jr(r))return new me(ee.UNAVAILABLE,`${t}: ${r}`);throw r}class Br{static emptySet(t){return new Br(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||Se.comparator(i.key,s.key):(i,s)=>Se.comparator(i.key,s.key),this.keyedMap=no(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,s)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Br)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new Br;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}class Jy{constructor(){this.ga=new xt(Se.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Ne(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,s)=>{t.push(s)})),t}}class Xr{constructor(t,i,s,o,u,f,m,v,b){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(t,i,s,o,u){const f=[];return i.forEach((m=>{f.push({type:0,doc:m})})),new Xr(t,i,Br.emptySet(i),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Lu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==s[o].type||!i[o].doc.isEqual(s[o].doc))return!1;return!0}}class aw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class sw{constructor(){this.queries=Wy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const o=Ie(i),u=o.queries;o.queries=Wy(),u.forEach(((f,m)=>{for(const v of m.Sa)v.onError(s)}))})(this,new me(ee.ABORTED,"Firestore shutting down"))}}function Wy(){return new Ps((r=>i_(r)),Lu)}async function rw(r,t){const i=Ie(r);let s=3;const o=t.query;let u=i.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new aw,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await i.onListen(o,!0);break;case 1:u.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=cm(f,`Initialization of query '${Vr(t.query)}' failed`);return void t.onError(m)}i.queries.set(o,u),u.Sa.push(t),t.va(i.onlineState),u.wa&&t.Fa(u.wa)&&um(i)}async function lw(r,t){const i=Ie(r),s=t.query;let o=3;const u=i.queries.get(s);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function ow(r,t){const i=Ie(r);let s=!1;for(const o of t){const u=o.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&um(i)}function cw(r,t,i){const s=Ie(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(i);s.queries.delete(t)}function um(r){r.Ca.forEach((t=>{t.next()}))}var Od,ev;(ev=Od||(Od={})).Ma="default",ev.Cache="cache";class uw{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Xr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Xr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Od.Cache}}class U_{constructor(t){this.key=t}}class B_{constructor(t){this.key=t}}class hw{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=a_(t),this.tu=new Br(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new Jy,o=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((x,E)=>{const C=o.get(x),z=ku(this.query,E)?E:null,B=!!C&&this.mutatedKeys.has(C.key),P=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let j=!1;C&&z?C.data.isEqual(z.data)?B!==P&&(s.track({type:3,doc:z}),j=!0):this.su(C,z)||(s.track({type:2,doc:z}),j=!0,(v&&this.eu(z,v)>0||b&&this.eu(z,b)<0)&&(m=!0)):!C&&z?(s.track({type:0,doc:z}),j=!0):C&&!z&&(s.track({type:1,doc:C}),j=!0,(v||b)&&(m=!0)),j&&(z?(f=f.add(z),u=P?u.add(x):u.delete(x)):(f=f.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const x=this.query.limitType==="F"?f.last():f.first();f=f.delete(x.key),u=u.delete(x.key),s.track({type:1,doc:x})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((x,E)=>(function(z,B){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:j})}};return P(z)-P(B)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(s),o=o??!1;const m=i&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,b=v!==this.Za;return this.Za=v,f.length!==0||b?{snapshot:new Xr(this.query,t.tu,u,f,t.mutatedKeys,v===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const i=[];return t.forEach((s=>{this.Xa.has(s)||i.push(new B_(s))})),this.Xa.forEach((s=>{t.has(s)||i.push(new U_(s))})),i}cu(t){this.Ya=t.Qs,this.Xa=Fe();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Xr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hm="SyncEngine";class fw{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class dw{constructor(t){this.key=t,this.hu=!1}}class mw{constructor(t,i,s,o,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ps((m=>i_(m)),Lu),this.Iu=new Map,this.Eu=new Set,this.du=new xt(Se.comparator),this.Au=new Map,this.Ru=new em,this.Vu={},this.mu=new Map,this.fu=Yr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gw(r,t,i=!0){const s=F_(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await z_(s,t,i,!0),o}async function pw(r,t){const i=F_(r);await z_(i,t,!0,!1)}async function z_(r,t,i,s){const o=await O2(r.localStore,Vi(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,i);let m;return s&&(m=await yw(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&i&&D_(r.remoteStore,o),m}async function yw(r,t,i,s,o){r.pu=(E,C,z)=>(async function(P,j,O,Z){let ne=j.view.ru(O);ne.Cs&&(ne=await Qy(P.localStore,j.query,!1).then((({documents:R})=>j.view.ru(R,ne))));const oe=Z&&Z.targetChanges.get(j.targetId),fe=Z&&Z.targetMismatches.get(j.targetId)!=null,ie=j.view.applyChanges(ne,P.isPrimaryClient,oe,fe);return nv(P,j.targetId,ie.au),ie.snapshot})(r,E,C,z);const u=await Qy(r.localStore,t,!0),f=new hw(t,u.Qs),m=f.ru(u.documents),v=So.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",o),b=f.applyChanges(m,r.isPrimaryClient,v);nv(r,i,b.au);const x=new fw(t,i,f);return r.Tu.set(t,x),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),b.snapshot}async function vw(r,t,i){const s=Ie(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!Lu(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Id(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),i&&am(s.remoteStore,o.targetId),Vd(s,o.targetId)})).catch(Zr)):(Vd(s,o.targetId),await Id(s.localStore,o.targetId,!0))}async function _w(r,t){const i=Ie(r),s=i.Tu.get(t),o=i.Iu.get(s.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),am(i.remoteStore,s.targetId))}async function bw(r,t,i){const s=Cw(r);try{const o=await(function(f,m){const v=Ie(f),b=ft.now(),x=m.reduce(((z,B)=>z.add(B.key)),Fe());let E,C;return v.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let B=ca(),P=Fe();return v.Ns.getEntries(z,x).next((j=>{B=j,B.forEach(((O,Z)=>{Z.isValidDocument()||(P=P.add(O))}))})).next((()=>v.localDocuments.getOverlayedDocuments(z,B))).next((j=>{E=j;const O=[];for(const Z of m){const ne=DS(Z,E.get(Z.key).overlayedDocument);ne!=null&&O.push(new Gs(Z.key,ne,Xv(ne.value.mapValue),ra.exists(!0)))}return v.mutationQueue.addMutationBatch(z,b,O,m)})).next((j=>{C=j;const O=j.applyToLocalDocumentSet(E,P);return v.documentOverlayCache.saveOverlays(z,j.batchId,O)}))})).then((()=>({batchId:C.batchId,changes:r_(E)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,v){let b=f.Vu[f.currentUser.toKey()];b||(b=new xt(He)),b=b.insert(m,v),f.Vu[f.currentUser.toKey()]=b})(s,o.batchId,i),await Ao(s,o.changes),await qu(s.remoteStore)}catch(o){const u=cm(o,"Failed to persist write");i.reject(u)}}async function P_(r,t){const i=Ie(r);try{const s=await M2(i.localStore,t);t.targetChanges.forEach(((o,u)=>{const f=i.Au.get(u);f&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?at(f.hu,14607):o.removedDocuments.size>0&&(at(f.hu,42227),f.hu=!1))})),await Ao(i,s,t)}catch(s){await Zr(s)}}function tv(r,t,i){const s=Ie(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const v=Ie(f);v.onlineState=m;let b=!1;v.queries.forEach(((x,E)=>{for(const C of E.Sa)C.va(m)&&(b=!0)})),b&&um(v)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function xw(r,t,i){const s=Ie(r);s.sharedClientState.updateQueryState(t,"rejected",i);const o=s.Au.get(t),u=o&&o.key;if(u){let f=new xt(Se.comparator);f=f.insert(u,cn.newNoDocument(u,Me.min()));const m=Fe().add(u),v=new zu(Me.min(),new Map,new xt(He),f,m);await P_(s,v),s.du=s.du.remove(u),s.Au.delete(t),fm(s)}else await Id(s.localStore,t,!1).then((()=>Vd(s,t,i))).catch(Zr)}async function Ew(r,t){const i=Ie(r),s=t.batch.batchId;try{const o=await R2(i.localStore,t);q_(i,s,null),G_(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Ao(i,o)}catch(o){await Zr(o)}}async function Tw(r,t,i){const s=Ie(r);try{const o=await(function(f,m){const v=Ie(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let x;return v.mutationQueue.lookupMutationBatch(b,m).next((E=>(at(E!==null,37113),x=E.keys(),v.mutationQueue.removeMutationBatch(b,E)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,x,m))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,x))).next((()=>v.localDocuments.getDocuments(b,x)))}))})(s.localStore,t);q_(s,t,i),G_(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await Ao(s,o)}catch(o){await Zr(o)}}function G_(r,t){(r.mu.get(t)||[]).forEach((i=>{i.resolve()})),r.mu.delete(t)}function q_(r,t,i){const s=Ie(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(i?u.reject(i):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function Vd(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||H_(r,s)}))}function H_(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(am(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),fm(r))}function nv(r,t,i){for(const s of i)s instanceof U_?(r.Ru.addReference(s.key,t),Sw(r,s)):s instanceof B_?(ye(hm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||H_(r,s.key)):Ne(19791,{wu:s})}function Sw(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(ye(hm,"New document in limbo: "+i),r.Eu.add(s),fm(r))}function fm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new Se(gt.fromString(t)),s=r.fu.next();r.Au.set(s,new dw(i)),r.du=r.du.insert(i,s),D_(r.remoteStore,new Fa(Vi(t_(i.path)),s,"TargetPurposeLimboResolution",Ou.ce))}}async function Ao(r,t,i){const s=Ie(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,v)=>{f.push(s.pu(v,t,i).then((b=>{if((b||i)&&s.isPrimaryClient){const x=b?!b.fromCache:i?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(b){o.push(b);const x=nm.As(v.targetId,b);u.push(x)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(v,b){const x=Ie(v);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(b,(C=>te.forEach(C.Es,(z=>x.persistence.referenceDelegate.addReference(E,C.targetId,z))).next((()=>te.forEach(C.ds,(z=>x.persistence.referenceDelegate.removeReference(E,C.targetId,z)))))))))}catch(E){if(!Jr(E))throw E;ye(im,"Failed to update sequence numbers: "+E)}for(const E of b){const C=E.targetId;if(!E.fromCache){const z=x.Ms.get(C),B=z.snapshotVersion,P=z.withLastLimboFreeSnapshotVersion(B);x.Ms=x.Ms.insert(C,P)}}})(s.localStore,u))}async function ww(r,t){const i=Ie(r);if(!i.currentUser.isEqual(t)){ye(hm,"User change. New user:",t.toKey());const s=await N_(i.localStore,t);i.currentUser=t,(function(u,f){u.mu.forEach((m=>{m.forEach((v=>{v.reject(new me(ee.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ao(i,s.Ls)}}function Aw(r,t){const i=Ie(r),s=i.Au.get(t);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const u=i.Iu.get(t);if(!u)return o;for(const f of u){const m=i.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function F_(r){const t=Ie(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=P_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xw.bind(null,t),t.Pu.H_=ow.bind(null,t.eventManager),t.Pu.yu=cw.bind(null,t.eventManager),t}function Cw(r){const t=Ie(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ew.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tw.bind(null,t),t}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return N2(this.persistence,new w2,t.initialUser,this.serializer)}Cu(t){return new C_(tm.mi,this.serializer)}Du(t){return new j2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class Nw extends Mu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){at(this.persistence.referenceDelegate instanceof Nu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new u2(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new C_((s=>Nu.mi(s,i)),this.serializer)}}class jd{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ww.bind(null,this.syncEngine),await iw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new sw})()}createDatastore(t){const i=Pu(t.databaseInfo.databaseId),s=(function(u){return new z2(u)})(t.databaseInfo);return(function(u,f,m,v){return new H2(u,f,m,v)})(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return(function(s,o,u,f,m){return new Q2(s,o,u,f,m)})(this.localStore,this.datastore,t.asyncQueue,(i=>tv(this.syncEngine,i,0)),(function(){return Ky.v()?new Ky:new L2})())}createSyncEngine(t,i){return(function(o,u,f,m,v,b,x){const E=new mw(o,u,f,m,v,b);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const s=Ie(i);ye(Bs,"RemoteStore shutting down."),s.Ea.add(5),await wo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jd.provider={build:()=>new jd};class Rw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):oa("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}const ns="FirestoreClient";class Mw{constructor(t,i,s,o,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Hd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{ye(ns,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ye(ns,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=cm(i,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function ld(r,t){r.asyncQueue.verifyOperationInProgress(),ye(ns,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await N_(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function iv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await Iw(r);ye(ns,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener((s=>Zy(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Zy(t.remoteStore,o))),r._onlineComponents=t}async function Iw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(ns,"Using user provided OfflineComponentProvider");try{await ld(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;qr("Error using user provided cache. Falling back to memory cache: "+i),await ld(r,new Mu)}}else ye(ns,"Using default OfflineComponentProvider"),await ld(r,new Nw(void 0));return r._offlineComponents}async function Q_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(ns,"Using user provided OnlineComponentProvider"),await iv(r,r._uninitializedComponentsProvider._online)):(ye(ns,"Using default OnlineComponentProvider"),await iv(r,new jd))),r._onlineComponents}function Dw(r){return Q_(r).then((t=>t.syncEngine))}async function Ow(r){const t=await Q_(r),i=t.eventManager;return i.onListen=gw.bind(null,t.syncEngine),i.onUnlisten=vw.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=pw.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=_w.bind(null,t.syncEngine),i}function Vw(r,t,i={}){const s=new Ka;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,v,b){const x=new Rw({next:C=>{x.Nu(),f.enqueueAndForget((()=>lw(u,E))),C.fromCache&&v.source==="server"?b.reject(new me(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(C)},error:C=>b.reject(C)}),E=new uw(m,x,{includeMetadataChanges:!0,qa:!0});return rw(u,E)})(await Ow(r),r.asyncQueue,t,i,s))),s.promise}function Y_(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const av=new Map;const X_="firestore.googleapis.com",sv=!0;class rv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new me(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X_,this.ssl=sv}else this.host=t.host,this.ssl=t.ssl??sv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=A_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<o2)throw new me(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}FT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y_(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hu{constructor(t,i,s,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new me(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new jT;switch(s.type){case"firstParty":return new BT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const s=av.get(i);s&&(ye("ComponentProvider","Removing Datastore"),av.delete(i),s.terminate())})(this),Promise.resolve()}}function jw(r,t,i,s={}){r=_u(r,Hu);const o=Pd(t),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${i}`;o&&(oE(`https://${m}`),fE("Firestore",!0)),u.host!==X_&&u.host!==m&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:m,ssl:o,emulatorOptions:s};if(!pu(v,f)&&(r._setSettings(v),s.mockUserToken)){let b,x;if(typeof s.mockUserToken=="string")b=s.mockUserToken,x=on.MOCK_USER;else{b=cE(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new me(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(E)}r._authCredentials=new LT(new Lv(b,x))}}class is{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new is(this.firestore,t,this._query)}}class Kt{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kt(this.firestore,t,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(Eo(i,Kt._jsonSchema))return new Kt(t,s||null,new Se(gt.fromString(i.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Gt("string",Kt._jsonSchemaVersion),referencePath:Gt("string")};class $a extends is{constructor(t,i,s){super(t,i,t_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new Se(t))}withConverter(t){return new $a(this.firestore,t,this._path)}}function Fu(r,t,...i){if(r=Gr(r),kv("collection","path",t),r instanceof Hu){const s=gt.fromString(t,...i);return _y(s),new $a(r,null,s)}{if(!(r instanceof Kt||r instanceof $a))throw new me(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(t,...i));return _y(s),new $a(r.firestore,null,s)}}function Lw(r,t,...i){if(r=Gr(r),arguments.length===1&&(t=Hd.newId()),kv("doc","path",t),r instanceof Hu){const s=gt.fromString(t,...i);return vy(s),new Kt(r,null,new Se(s))}{if(!(r instanceof Kt||r instanceof $a))throw new me(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(t,...i));return vy(s),new Kt(r.firestore,r instanceof $a?r.converter:null,new Se(s))}}const lv="AsyncQueue";class ov{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M_(this,"async_queue_retry"),this._c=()=>{const s=rd();s&&ye(lv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=rd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=rd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ka;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Jr(t))throw t;ye(lv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,oa("INTERNAL UNHANDLED ERROR: ",cv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const o=om.createAndSchedule(this,t,i,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:cv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,s)=>i.targetTimeMs-s.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function cv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class dm extends Hu{constructor(t,i,s,o){super(t,i,s,o),this.type="firestore",this._queue=new ov,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ov(t),this._firestoreClient=void 0,await t}}}function kw(r,t){const i=typeof r=="object"?r:ET(),s=typeof r=="string"?r:xu,o=yT(i,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=rE("firestore");u&&jw(o,...u)}return o}function K_(r){if(r._terminated)throw new me(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Uw(r),r._firestoreClient}function Uw(r){const t=r._freezeSettings(),i=(function(o,u,f,m){return new iS(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Y_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new Mw(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class Yn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yn(rn.fromBase64String(t))}catch(i){throw new me(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Yn(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Eo(t,Yn._jsonSchema))return Yn.fromBase64String(t.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Gt("string",Yn._jsonSchemaVersion),bytes:Gt("string")};class mm{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new me(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class $_{constructor(t){this._methodName=t}}class Li{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new me(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new me(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return He(this._lat,t._lat)||He(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(t){if(Eo(t,Li._jsonSchema))return new Li(t.latitude,t.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Gt("string",Li._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};class ki{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Eo(t,ki._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new ki(t.vectorValues);throw new me(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Gt("string",ki._jsonSchemaVersion),vectorValues:Gt("object")};const Bw=/^__.*__$/;class zw{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new Gs(t,this.data,this.fieldMask,i,this.fieldTransforms):new To(t,this.data,i,this.fieldTransforms)}}function Z_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:r})}}class gm{constructor(t,i,s,o,u,f){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new gm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Iu(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Z_(this.Ac)&&Bw.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Pw{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||Pu(t)}Cc(t,i,s,o=!1){return new gm({Ac:t,methodName:i,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J_(r){const t=r._freezeSettings(),i=Pu(r._databaseId);return new Pw(r._databaseId,!!t.ignoreUndefinedProperties,i)}function Gw(r,t,i,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,t,i,o);tb("Data must be an object, but it was:",f,s);const m=W_(s,f);let v,b;if(u.merge)v=new ri(f.fieldMask),b=f.fieldTransforms;else if(u.mergeFields){const x=[];for(const E of u.mergeFields){const C=Hw(t,E,i);if(!f.contains(C))throw new me(ee.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Qw(x,C)||x.push(C)}v=new ri(x),b=f.fieldTransforms.filter((E=>v.covers(E.field)))}else v=null,b=f.fieldTransforms;return new zw(new Qn(m),v,b)}function qw(r,t,i,s=!1){return pm(i,r.Cc(s?4:3,t))}function pm(r,t){if(eb(r=Gr(r)))return tb("Unsupported field value:",t,r),W_(r,t);if(r instanceof $_)return(function(s,o){if(!Z_(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let v=pm(m,o.wc(f));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),f++}return{arrayValue:{values:u}}})(r,t)}return(function(s,o){if((s=Gr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return AS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ft.fromDate(s);return{timestampValue:Cu(o.serializer,u)}}if(s instanceof ft){const u=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Cu(o.serializer,u)}}if(s instanceof Li)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:__(o.serializer,s._byteString)};if(s instanceof Kt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wd(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ki)return(function(f,m){return{mapValue:{fields:{[Qv]:{stringValue:Yv},[Eu]:{arrayValue:{values:f.toArray().map((b=>{if(typeof b!="number")throw m.Sc("VectorValues must only contain numeric values.");return $d(m.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Du(s)}`)})(r,t)}function W_(r,t){const i={};return zv(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zs(r,((s,o)=>{const u=pm(o,t.mc(s));u!=null&&(i[s]=u)})),{mapValue:{fields:i}}}function eb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ft||r instanceof Li||r instanceof Yn||r instanceof Kt||r instanceof $_||r instanceof ki)}function tb(r,t,i){if(!eb(i)||!Uv(i)){const s=Du(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Hw(r,t,i){if((t=Gr(t))instanceof mm)return t._internalPath;if(typeof t=="string")return nb(r,t);throw Iu("Field path arguments must be of type string or ",r,!1,void 0,i)}const Fw=new RegExp("[~\\*/\\[\\]]");function nb(r,t,i){if(t.search(Fw)>=0)throw Iu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new mm(...t.split("."))._internalPath}catch{throw Iu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Iu(r,t,i,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||f)&&(v+=" (found",u&&(v+=` in field ${s}`),f&&(v+=` in document ${o}`),v+=")"),new me(ee.INVALID_ARGUMENT,m+r+v)}function Qw(r,t){return r.some((i=>i.isEqual(t)))}class ib{constructor(t,i,s,o,u){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Yw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Qu("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Yw extends ib{data(){return super.data()}}function Qu(r,t){return typeof t=="string"?nb(r,t):t instanceof mm?t._internalPath:t._delegate._internalPath}function Xw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ym{}class vm extends ym{}function uo(r,t,...i){let s=[];t instanceof ym&&s.push(t),s=s.concat(i),(function(u){const f=u.filter((v=>v instanceof _m)).length,m=u.filter((v=>v instanceof Yu)).length;if(f>1||f>0&&m>0)throw new me(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Yu extends vm{constructor(t,i,s){super(),this._field=t,this._op=i,this._value=s,this.type="where"}static _create(t,i,s){return new Yu(t,i,s)}_apply(t){const i=this._parse(t);return ab(t._query,i),new is(t.firestore,t.converter,Ad(t._query,i))}_parse(t){const i=J_(t.firestore);return(function(u,f,m,v,b,x,E){let C;if(b.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new me(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){hv(E,x);const B=[];for(const P of E)B.push(uv(v,u,P));C={arrayValue:{values:B}}}else C=uv(v,u,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||hv(E,x),C=qw(m,f,E,x==="in"||x==="not-in");return Pt.create(b,x,C)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function aa(r,t,i){const s=t,o=Qu("where",r);return Yu._create(o,s,i)}class _m extends ym{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new _m(t,i)}_parse(t){const i=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return i.length===1?i[0]:li.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const v of m)ab(f,v),f=Ad(f,v)})(t._query,i),new is(t.firestore,t.converter,Ad(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bm extends vm{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new bm(t,i)}_apply(t){const i=(function(o,u,f){if(o.startAt!==null)throw new me(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(u,f)})(t._query,this._field,this._direction);return new is(t.firestore,t.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Wr(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,i))}}function kr(r,t="asc"){const i=t,s=Qu("orderBy",r);return bm._create(s,i)}class xm extends vm{constructor(t,i,s){super(),this.type=t,this._limit=i,this._limitType=s}static _create(t,i,s){return new xm(t,i,s)}_apply(t){return new is(t.firestore,t.converter,Su(t._query,this._limit,this._limitType))}}function fu(r){return QT("limit",r),xm._create("limit",r,"F")}function uv(r,t,i){if(typeof(i=Gr(i))=="string"){if(i==="")throw new me(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n_(t)&&i.indexOf("/")!==-1)throw new me(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const s=t.path.child(gt.fromString(i));if(!Se.isDocumentKey(s))throw new me(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cy(r,new Se(s))}if(i instanceof Kt)return Cy(r,i._key);throw new me(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Du(i)}.`)}function hv(r,t){if(!Array.isArray(r)||r.length===0)throw new me(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ab(r,t){const i=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new me(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new me(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class Kw{convertValue(t,i="none"){switch(es(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Wa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Ne(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return zs(t,((o,u)=>{s[o]=this.convertValue(u,i)})),s}convertVectorValue(t){const i=t.fields?.[Eu].arrayValue?.values?.map((s=>Rt(s.doubleValue)));return new ki(i)}convertGeoPoint(t){return new Li(Rt(t.latitude),Rt(t.longitude))}convertArray(t,i){return(t.values||[]).map((s=>this.convertValue(s,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const s=ju(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(po(t));default:return null}}convertTimestamp(t){const i=Ja(t);return new ft(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=gt.fromString(t);at(w_(s),9688,{name:t});const o=new yo(s.get(1),s.get(3)),u=new Se(s.popFirst(5));return o.isEqual(i)||oa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}function $w(r,t,i){let s;return s=r?r.toFirestore(t):t,s}class su{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zr extends ib{constructor(t,i,s,o,u,f){super(t,i,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(Qu("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=zr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",zr._jsonSchema={type:Gt("string",zr._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class du extends zr{data(t={}){return super.data(t)}}class Pr{constructor(t,i,s,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((s=>{t.call(i,new du(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new me(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const v=new du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const v=new du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,x=-1;return m.type!==0&&(b=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),x=f.indexOf(m.doc.key)),{type:Zw(m.type),doc:v,oldIndex:b,newIndex:x}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Hd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Zw(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:r})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:Gt("string",Pr._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Jw extends Kw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,i)}}function Em(r){r=_u(r,is);const t=_u(r.firestore,dm),i=K_(t),s=new Jw(t);return Xw(r._query),Vw(i,r._query).then((o=>new Pr(t,s,r,o)))}function Ww(r,t){const i=_u(r.firestore,dm),s=Lw(r),o=$w(r.converter,t);return eA(i,[Gw(J_(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,ra.exists(!1))]).then((()=>s))}function eA(r,t){return(function(s,o){const u=new Ka;return s.asyncQueue.enqueueAndForget((async()=>bw(await Dw(s),o,u))),u.promise})(K_(r),t)}(function(t,i=!0){(function(o){$r=o})(xT),vu(new fo("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new dm(new kT(s.getProvider("auth-internal")),new zT(f,s.getProvider("app-check-internal")),(function(b,x){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new me(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(b.options.projectId,x)})(f,o),f);return u={useFetchStreams:i,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ur(my,gy,t),Ur(my,gy,"esm2020")})();const tA={apiKey:"AIzaSyBKsN2qQ7oc3l5MrNXpWtHnxLlMqM3PFSA",authDomain:"gugudan-e4c77.firebaseapp.com",projectId:"gugudan-e4c77",storageBucket:"gugudan-e4c77.firebasestorage.app",messagingSenderId:"798815663534",appId:"1:798815663534:web:9e4aacdbd8acfc36c6fc67"},nA=Av(tA),Xu=kw(nA);function sb(){let r=localStorage.getItem("chromafall_player_id");return r||(r="player_"+Math.random().toString(36).substring(2,15)+Date.now().toString(36),localStorage.setItem("chromafall_player_id",r)),r}function rb(){return localStorage.getItem("chromafall_player_name")||"Player"}function lb(r){localStorage.setItem("chromafall_player_name",r)}async function iA(r){try{return(await Ww(Fu(Xu,"rankings"),{...r,createdAt:ft.now()})).id}catch(t){return console.error("  :",t),null}}async function aA(r="all",t="classic",i=100){try{let s;const o=Fu(Xu,"rankings");if(r==="daily"){const m=new Date;m.setHours(0,0,0,0),s=uo(o,aa("gameMode","==",t),aa("createdAt",">=",ft.fromDate(m)),kr("createdAt","desc"),kr("score","desc"),fu(i))}else if(r==="weekly"){const m=new Date;m.setDate(m.getDate()-7),m.setHours(0,0,0,0),s=uo(o,aa("gameMode","==",t),aa("createdAt",">=",ft.fromDate(m)),kr("createdAt","desc"),kr("score","desc"),fu(i))}else s=uo(o,aa("gameMode","==",t),kr("score","desc"),fu(i));const u=await Em(s),f=[];return u.forEach(m=>{f.push({id:m.id,...m.data()})}),(r==="daily"||r==="weekly")&&f.sort((m,v)=>v.score-m.score),f}catch(s){return console.error("  :",s),[]}}async function sA(r,t="classic"){try{const i=Fu(Xu,"rankings"),s=uo(i,aa("playerId","==",r),aa("gameMode","==",t),kr("score","desc"),fu(1)),o=await Em(s);if(o.empty)return null;const u=o.docs[0];return{id:u.id,...u.data()}}catch(i){return console.error("    :",i),null}}async function rA(r,t="classic"){try{const i=await sA(r,t);if(!i)return-1;const s=Fu(Xu,"rankings"),o=uo(s,aa("gameMode","==",t),aa("score",">",i.score));return(await Em(o)).size+1}catch(i){return console.error("   :",i),-1}}function lA({onRestart:r,onMainMenu:t,onContinue:i}){const{score:s,level:o,maxCombo:u,chainCount:f,gameTime:m,continues:v,statistics:b,gameMode:x}=qe(),{currency:E,addPersonalBest:C}=Xn(),{playSound:z}=oi(),[B,P]=re.useState(!1),[j,O]=re.useState(!1),[Z,ne]=re.useState(rb()),[oe,fe]=re.useState(Z==="Player"),[ie,R]=re.useState(Z),S=s>b.highScore-s,A=v<3,M=X=>{const se=Math.floor(X/60),be=X%60;return`${se} ${be}`},D=X=>X.toLocaleString(),k=async()=>{if(!(B||j||s===0)){ie.trim()&&ie!==Z&&(lb(ie.trim()),ne(ie.trim())),O(!0);try{await iA({playerId:sb(),playerName:ie.trim()||Z,score:s,level:o,maxCombo:u,maxChain:f,gameMode:x,playTime:m})&&(P(!0),z("rewardGet"))}catch(X){console.error("  :",X)}finally{O(!1),fe(!1)}}};re.useEffect(()=>{z("gameOver"),S&&s>0&&setTimeout(()=>{z("highScore"),Bd({particleCount:100,spread:70,origin:{y:.6}})},500),C("classic",s),s>0&&Z!=="Player"&&k()},[]);const N=()=>s>=1e6?{grade:"S+",color:"text-purple-400"}:s>=5e5?{grade:"S",color:"text-yellow-400"}:s>=2e5?{grade:"A",color:"text-green-400"}:s>=1e5?{grade:"B",color:"text-blue-400"}:s>=5e4?{grade:"C",color:"text-gray-300"}:{grade:"D",color:"text-gray-500"},{grade:Qe,color:mt}=N();return p.jsx(ae.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(ae.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,y:50},animate:{scale:1,y:0},transition:{delay:.2,type:"spring"},children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"GAME OVER"}),S&&s>0&&p.jsx(ae.p,{className:"text-yellow-400 font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:"NEW HIGH SCORE!"})]}),p.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-gray-400 text-sm",children:"SCORE"}),p.jsx(ae.p,{className:"text-4xl font-bold text-white",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:D(s)})]}),p.jsx(ae.div,{className:`text-6xl font-bold ${mt}`,initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.4,type:"spring"},children:Qe})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[p.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[p.jsx("p",{className:"text-gray-400 text-xs",children:"LEVEL"}),p.jsx("p",{className:"text-xl font-bold text-game-accent",children:o})]}),p.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[p.jsx("p",{className:"text-gray-400 text-xs",children:"MAX COMBO"}),p.jsxs("p",{className:"text-xl font-bold text-orange-400",children:["x",u]})]}),p.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[p.jsx("p",{className:"text-gray-400 text-xs",children:"MAX CHAIN"}),p.jsxs("p",{className:"text-xl font-bold text-purple-400",children:[f,""]})]}),p.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[p.jsx("p",{className:"text-gray-400 text-xs",children:"TIME"}),p.jsx("p",{className:"text-xl font-bold text-gray-300",children:M(m)})]})]}),p.jsxs("div",{className:"space-y-3",children:[A&&i&&p.jsxs(ae.button,{className:`w-full py-4 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white flex items-center justify-center gap-2\r
                         hover:from-green-400 hover:to-green-500 transition-all`,whileTap:{scale:.98},onClick:i,children:[p.jsx("span",{children:""}),p.jsx("span",{children:"  "}),p.jsxs("span",{className:"text-sm opacity-70",children:["(",3-v," )"]})]}),p.jsx(ae.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:r,children:" "}),p.jsx(ae.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:" "}),p.jsxs(ae.button,{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white flex items-center justify-center gap-2\r
                       hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:()=>{z("rewardGet")},children:[p.jsx("span",{children:""}),p.jsx("span",{children:"   2"})]})]}),s>0&&!B&&p.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl border border-purple-500/30",children:[p.jsx("p",{className:"text-center text-sm text-gray-300 mb-2",children:" "}),oe?p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:ie,onChange:X=>R(X.target.value),placeholder:" ",maxLength:12,className:"flex-1 bg-black/50 border border-purple-500 rounded-lg px-3 py-2 text-white text-sm",autoFocus:!0,onKeyDown:X=>X.key==="Enter"&&k()}),p.jsx("button",{onClick:k,disabled:j||!ie.trim(),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:j?"...":""})]}):p.jsx("button",{onClick:k,disabled:j,className:"w-full py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:j?" ...":`${Z} `})]}),B&&p.jsx("div",{className:"mt-4 p-3 bg-green-900/30 rounded-xl border border-green-500/30 text-center",children:p.jsx("span",{className:"text-green-400 font-bold",children:" !"})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>{const X=`ChromaFall ${D(s)} !  ${o},  ${u} !`;navigator.share?navigator.share({title:"ChromaFall",text:X}):(navigator.clipboard.writeText(X),alert("  !"))},children:"  "})})]})})}const oA=[{icon:"",name:"",desc:"   3x3    ",color:"from-red-500 to-orange-500"},{icon:"",name:"",desc:"       ",color:"from-yellow-400 to-yellow-600"},{icon:"",name:"",desc:"     +    ",color:"from-green-400 to-green-600"},{icon:"",name:"",desc:"2   ( )",color:"from-cyan-300 to-blue-500"},{icon:"",name:"",desc:" !      ",color:"from-gray-400 to-gray-600"},{icon:"",name:"",desc:"      ",color:"from-purple-400 to-pink-500"},{icon:"",name:"",desc:"      ",color:"from-pink-400 to-rose-500"},{icon:"2",name:"",desc:"   2 ",color:"from-amber-400 to-orange-500"},{icon:"",name:"",desc:"    ",color:"from-red-400 via-yellow-400 to-blue-400"}],cA=[{key:" ",desc:"  "},{key:"",desc:"  ( )"},{key:"Space",desc:"  (  + )"},{key:"Z / ",desc:"  ()"},{key:"P / ESC",desc:""}],uA=[" 4      ()","       "," (Space)     ","       ","    3!"];function hA({onClose:r}){const[t,i]=re.useState("blocks");return p.jsx(ae.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:p.jsxs(ae.div,{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:s=>s.stopPropagation(),children:[p.jsxs("div",{className:"bg-gradient-to-r from-game-accent to-purple-600 p-4 flex justify-between items-center",children:[p.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),p.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30",children:""})]}),p.jsx("div",{className:"flex border-b border-gray-700",children:[{id:"blocks",label:" "},{id:"controls",label:""},{id:"tips",label:""}].map(s=>p.jsx("button",{onClick:()=>i(s.id),className:`flex-1 py-3 text-sm font-bold transition-colors ${t===s.id?"text-game-accent border-b-2 border-game-accent bg-game-accent/10":"text-gray-400 hover:text-white"}`,children:s.label},s.id))}),p.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:p.jsxs(un,{mode:"wait",children:[t==="blocks"&&p.jsx(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:oA.map((s,o)=>p.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[p.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center text-2xl`,children:s.icon}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"font-bold text-white",children:s.name}),p.jsx("p",{className:"text-xs text-gray-400",children:s.desc})]})]},o))},"blocks"),t==="controls"&&p.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[p.jsx("p",{className:"text-gray-400 text-sm mb-4",children:" &  "}),cA.map((s,o)=>p.jsxs("div",{className:"flex items-center gap-4 bg-black/30 rounded-lg p-3",children:[p.jsx("div",{className:"w-20 text-center",children:p.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded text-white font-mono text-sm",children:s.key})}),p.jsx("p",{className:"text-white flex-1",children:s.desc})]},o)),p.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:p.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",p.jsx("strong",{children:":"}),"      "]})})]},"controls"),t==="tips"&&p.jsxs(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[uA.map((s,o)=>p.jsx("div",{className:"bg-black/30 rounded-lg p-4 text-white",children:s},o)),p.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg border border-orange-500/30",children:[p.jsx("h4",{className:"font-bold text-orange-400 mb-2",children:"  "}),p.jsxs("p",{className:"text-sm text-gray-300",children:["     !     ",p.jsx("strong",{className:"text-orange-400",children:"3"})," !"]})]})]},"tips")]})})]})})}function fA({onResume:r,onRestart:t,onSettings:i,onMainMenu:s}){const{score:o,level:u,gameTime:f}=qe(),{playSound:m}=oi(),[v,b]=re.useState(!1),x=C=>{m("buttonClick"),C()},E=C=>{const z=Math.floor(C/60),B=C%60;return`${z}:${B.toString().padStart(2,"0")}`};return p.jsxs(ae.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsxs(ae.div,{className:"bg-game-panel rounded-2xl p-6 max-w-xs w-full mx-4",initial:{scale:.8,y:-50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:20},children:[p.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:""}),p.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 text-xs",children:""}),p.jsx("p",{className:"text-white font-bold",children:o.toLocaleString()})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 text-xs",children:""}),p.jsx("p",{className:"text-game-accent font-bold",children:u})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 text-xs",children:""}),p.jsx("p",{className:"text-white font-bold",children:E(f)})]})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(ae.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white text-lg hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(r),children:" "}),p.jsx(ae.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(t),children:" "}),p.jsx(ae.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(i),children:" "}),p.jsx(ae.button,{className:`w-full py-3 bg-gradient-to-r from-purple-700 to-blue-700 rounded-xl font-bold text-white\r
                       hover:from-purple-600 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>{m("buttonClick"),b(!0)},children:" "}),p.jsx(ae.button,{className:`w-full py-3 bg-red-900/50 rounded-xl font-bold text-red-300\r
                       hover:bg-red-800/50 transition-all`,whileTap:{scale:.98},onClick:()=>x(s),children:"  "})]})]}),p.jsx(un,{children:v&&p.jsx(hA,{onClose:()=>b(!1)})})]})}function fv({onClose:r}){const{settings:t,updateSettings:i}=Xn(),{playSound:s}=oi(),o=(f,m)=>{s("buttonClick"),i({[f]:m})},u=(f,m)=>{i({[f]:m})};return p.jsx(ae.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:p.jsxs(ae.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4 max-h-[80vh] overflow-y-auto",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:f=>f.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),p.jsx("button",{className:"text-gray-400 hover:text-white transition-colors text-2xl",onClick:r,children:""})]}),p.jsxs("div",{className:"space-y-4 mb-6",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:""}),p.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.soundEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("soundEnabled",!t.soundEnabled),children:p.jsx(ae.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.soundEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.soundEnabled&&p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.soundVolume,onChange:f=>u("soundVolume",parseFloat(f.target.value)),className:"flex-1 accent-game-accent"}),p.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.soundVolume*100),"%"]})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:""}),p.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.musicEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("musicEnabled",!t.musicEnabled),children:p.jsx(ae.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.musicEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.musicEnabled&&p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.musicVolume,onChange:f=>u("musicVolume",parseFloat(f.target.value)),className:"flex-1 accent-game-accent"}),p.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.musicVolume*100),"%"]})]})]}),p.jsxs("div",{className:"space-y-4 mb-6",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:""}),p.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.hapticEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("hapticEnabled",!t.hapticEnabled),children:p.jsx(ae.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.hapticEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:"  "}),p.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.showGhostBlock?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("showGhostBlock",!t.showGhostBlock),children:p.jsx(ae.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.showGhostBlock?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:" "}),p.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.colorBlindMode?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("colorBlindMode",!t.colorBlindMode),children:p.jsx(ae.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.colorBlindMode?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),p.jsxs("div",{className:"space-y-4 mb-6",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:["swipe","buttons","both"].map(f=>p.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.controlType===f?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),i({controlType:f})},children:[f==="swipe"&&"",f==="buttons"&&"",f==="both"&&" "]},f))})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:["auto","high","medium","low"].map(f=>p.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.performanceMode===f?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),i({performanceMode:f})},children:[f==="auto"&&"",f==="high"&&"",f==="medium"&&"",f==="low"&&""]},f))})]}),p.jsx(ae.button,{className:`w-full mt-6 py-3 bg-gray-700 rounded-xl font-bold text-white\r
                     hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:r,children:""})]})})}function dA({onNextLevel:r,onMainMenu:t}){const{score:i,puzzleLevel:s,movesRemaining:o,levelObjectives:u}=qe(),f=o*100,m=i+f;return p.jsx(ae.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(ae.div,{className:"bg-gradient-to-b from-purple-900 to-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4 border-2 border-purple-500",initial:{scale:.5,y:50},animate:{scale:1,y:0},transition:{type:"spring",damping:15},children:[p.jsxs(ae.div,{className:"text-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[p.jsx(ae.div,{className:"text-6xl mb-2",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5,delay:.3},children:""}),p.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"PUZZLE CLEAR!"}),p.jsxs("p",{className:"text-purple-300 mt-1",children:["Level ",s," Complete"]})]}),p.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-4",children:[p.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"OBJECTIVES"}),p.jsx("div",{className:"space-y-2",children:u.map((v,b)=>p.jsxs(ae.div,{className:"flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+b*.1},children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:p.jsx("span",{className:"text-white text-xs",children:""})}),p.jsxs("span",{className:"text-gray-300 text-sm flex-1",children:[v.type==="score"&&` ${v.target.toLocaleString()}`,v.type==="clearBlocks"&&` ${v.target} `,v.type==="chains"&&`${v.target}`,v.type==="clearColor"&&`  ${v.target} `]}),p.jsxs("span",{className:"text-green-400 text-sm",children:[v.current,"/",v.target]})]},b))})]}),p.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-gray-400 text-sm",children:""}),p.jsx("span",{className:"text-white font-mono",children:i.toLocaleString()})]}),o>0&&p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("span",{className:"text-gray-400 text-sm",children:["   (",o,")"]}),p.jsxs("span",{className:"text-yellow-400 font-mono",children:["+",f.toLocaleString()]})]}),p.jsx("div",{className:"border-t border-gray-700 pt-2 mt-2",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-purple-300 font-bold",children:" "}),p.jsx("span",{className:"text-2xl font-bold text-white font-mono",children:m.toLocaleString()})]})})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs(ae.button,{className:`w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl
                       font-bold text-white text-lg hover:from-purple-500 hover:to-pink-500 transition-all`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,children:[" Level ",s+1]}),p.jsx(ae.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:"  "})]})]})})}function mA({onStartGame:r,onOpenShop:t,onOpenSettings:i,onOpenLeaderboard:s,onOpenBattlePass:o,onOpenDailyReward:u}){const{currency:f,playerName:m,playerLevel:v,streakInfo:b,checkDailyRewardAvailable:x}=Xn(),{playSound:E}=oi(),[C,z]=re.useState(!1),[B,P]=re.useState(!1);re.useEffect(()=>{P(x())},[x]);const j=O=>{E("buttonClick"),O()};return p.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col items-center justify-center text-white bg-[#050510]",children:[p.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-[#050510] to-[#050510]"}),[...Array(15)].map((O,Z)=>p.jsx(ae.div,{className:"absolute rounded-full blur-xl",style:{background:["#ff4757","#3742fa","#2ed573","#ffa502"][Z%4],width:Math.random()*100+50,height:Math.random()*100+50,opacity:.1,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-100],x:[0,Math.random()*50-25],scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"easeInOut"}},Z))]}),p.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20",children:[p.jsx("button",{onClick:()=>j(i),className:"w-10 h-10 rounded-full bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors",children:""}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[p.jsx("span",{className:"text-lg",children:""}),p.jsx("span",{className:"font-bold text-yellow-400 font-mono",children:f.coins.toLocaleString()})]}),p.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[p.jsx("span",{className:"text-lg",children:""}),p.jsx("span",{className:"font-bold text-purple-400 font-mono",children:f.gems.toLocaleString()})]})]})]}),p.jsxs("div",{className:"z-10 w-full max-w-md px-6 flex flex-col items-center gap-8",children:[p.jsxs("div",{className:"text-center relative",children:[p.jsx(ae.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},children:p.jsxs("h1",{className:"text-6xl md:text-7xl font-black italic tracking-tighter",style:{fontFamily:"var(--font-display)"},children:[p.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300 neon-text",children:"CHROMA"}),p.jsx("br",{}),p.jsx("span",{className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]",children:"FALL"})]})}),p.jsx(ae.p,{className:"text-gray-400 mt-2 tracking-widest text-sm uppercase",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Color Fusion Puzzle"})]}),p.jsxs(ae.div,{className:"glass-panel w-full p-4 rounded-2xl flex items-center justify-between",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xl font-bold shadow-lg",children:m.charAt(0)}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-lg",children:m}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[p.jsxs("span",{className:"bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded",children:["Lv.",v]}),b.currentStreak>0&&p.jsxs("span",{className:"text-orange-400",children:[" ",b.currentStreak," "]})]})]})]}),B&&p.jsx("button",{onClick:()=>j(u),className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs font-bold px-3 py-1.5 rounded-full animate-bounce shadow-lg shadow-orange-500/30",children:"  "})]}),p.jsxs(ae.div,{className:"w-full space-y-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[p.jsxs("button",{onClick:()=>j(()=>z(!0)),className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl font-bold text-xl text-white shadow-[0_0_20px_rgba(59,130,246,0.4)] hover:shadow-[0_0_30px_rgba(59,130,246,0.6)] hover:scale-[1.02] active:scale-[0.98] transition-all border border-white/10 group relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:animate-[shine_1s_infinite]"}),p.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:""})," GAME START"]})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(od,{icon:"",label:"",onClick:()=>j(t),color:"bg-pink-600/20"}),p.jsx(od,{icon:"",label:"",onClick:()=>j(s),color:"bg-yellow-600/20"}),p.jsx(od,{icon:"",label:"",onClick:()=>j(o),color:"bg-green-600/20"})]})]})]}),p.jsx(un,{children:C&&p.jsx(ae.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>z(!1),children:p.jsxs(ae.div,{className:"w-full max-w-md bg-[#1a1a2e] border border-white/10 rounded-3xl overflow-hidden shadow-2xl",initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},onClick:O=>O.stopPropagation(),children:[p.jsxs("div",{className:"p-6 bg-gradient-to-b from-[#2a2a4e] to-[#1a1a2e]",children:[p.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-6",style:{fontFamily:"var(--font-display)"},children:"SELECT MODE"}),p.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:Object.entries(pv).map(([O,Z])=>p.jsxs("button",{onClick:()=>{j(()=>{z(!1),r(O)})},className:"w-full p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-left flex items-center gap-4 group",children:[p.jsx("span",{className:"text-3xl group-hover:scale-110 transition-transform",children:Z.icon}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h3",{className:"font-bold text-white text-lg",children:Z.name}),Z.hasTimeLimit&&p.jsx("span",{className:"text-xs text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:"TIME"})]}),p.jsx("p",{className:"text-sm text-gray-400",children:Z.description})]}),p.jsx("span",{className:"text-gray-500 group-hover:text-white transition-colors",children:""})]},O))})]}),p.jsx("div",{className:"p-4 bg-[#151525]",children:p.jsx("button",{onClick:()=>z(!1),className:"w-full py-3 text-gray-400 font-bold hover:text-white transition-colors",children:""})})]})})})]})}function od({icon:r,label:t,onClick:i,color:s}){return p.jsxs("button",{onClick:i,className:`flex flex-col items-center justify-center gap-2 py-4 rounded-xl border border-white/5 hover:border-white/20 transition-all active:scale-95 ${s} hover:brightness-125`,children:[p.jsx("span",{className:"text-2xl drop-shadow-md",children:r}),p.jsx("span",{className:"text-sm font-bold text-gray-200",children:t})]})}function gA({onClose:r}){const{claimDailyReward:t,dailyRewardDay:i,checkDailyRewardAvailable:s,streakInfo:o}=Xn(),{playSound:u}=oi(),[f,m]=re.useState(!1),[v,b]=re.useState(null),x=s(),E=()=>{if(!x||f)return;const C=t();C&&(u("rewardGet"),m(!0),b(C),Bd({particleCount:50,spread:60,origin:{y:.7}}))};return p.jsx(ae.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:p.jsxs(ae.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:C=>C.stopPropagation(),children:[p.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:" "}),p.jsx("div",{className:"text-center mb-6",children:p.jsxs("p",{className:"text-orange-400",children:[" ",o.currentStreak,"  "]})}),p.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:dd.map((C,z)=>{const B=z+1,P=B<(i||0)+1,j=B===(i||0)+1;return p.jsxs(ae.div,{className:`relative p-2 rounded-lg text-center ${P?"bg-gray-700 opacity-50":j?"bg-gradient-to-b from-game-accent to-blue-600 ring-2 ring-yellow-400":"bg-gray-800"}`,animate:j&&x?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:1.5},children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Day"}),p.jsx("p",{className:"text-lg font-bold text-white",children:B}),p.jsx("div",{className:"mt-1",children:C.reward.gems?p.jsxs("p",{className:"text-xs text-purple-400",children:["",C.reward.gems]}):p.jsxs("p",{className:"text-xs text-yellow-400",children:["",C.reward.coins]})}),P&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:""})})]},B)})}),f&&v?p.jsxs(ae.div,{className:"text-center py-4",initial:{scale:0},animate:{scale:1},children:[p.jsx("p",{className:"text-xl font-bold text-green-400 mb-2",children:" !"}),p.jsxs("div",{className:"flex justify-center gap-4",children:[v.coins&&p.jsxs("p",{className:"text-yellow-400",children:[" +",v.coins]}),v.gems&&p.jsxs("p",{className:"text-purple-400",children:[" +",v.gems]})]})]}):x?p.jsx(ae.button,{className:`w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white text-lg hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:E,children:"  "}):p.jsxs("div",{className:"text-center py-4",children:[p.jsx("p",{className:"text-gray-400",children:"   "}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  !"})]}),p.jsx("button",{className:`w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                     hover:bg-gray-600 transition-all`,onClick:r,children:""})]})})}function pA({onClose:r}){const{currency:t,ownedSkins:i,ownedThemes:s,equippedSkinId:o,equippedThemeId:u,purchaseSkin:f,purchaseTheme:m,equipSkin:v,equipTheme:b}=Xn(),{playSound:x}=oi(),[E,C]=re.useState("skins"),z=O=>{f(O)&&x("purchaseSuccess")},B=O=>{m(O)&&x("purchaseSuccess")},P=O=>{x("buttonClick"),v(O)},j=O=>{x("buttonClick"),b(O)};return p.jsxs(ae.div,{className:"fixed inset-0 bg-game-bg z-50 flex flex-col",initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"tween"},children:[p.jsxs("div",{className:"flex items-center justify-between p-4 bg-game-panel/80",children:[p.jsx("button",{className:"text-2xl text-gray-400 hover:text-white",onClick:r,children:""}),p.jsx("h1",{className:"text-xl font-bold text-white",children:""}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[p.jsx("span",{children:""}),p.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:t.coins.toLocaleString()})]}),p.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[p.jsx("span",{children:""}),p.jsx("span",{className:"text-purple-400 font-bold text-sm",children:t.gems.toLocaleString()})]})]})]}),p.jsx("div",{className:"flex bg-game-panel/50",children:["skins","themes","gems"].map(O=>p.jsxs("button",{className:`flex-1 py-3 font-bold transition-colors ${E===O?"text-game-accent border-b-2 border-game-accent":"text-gray-400"}`,onClick:()=>{x("buttonClick"),C(O)},children:[O==="skins"&&" ",O==="themes"&&" ",O==="gems"&&" "]},O))}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:p.jsxs(un,{mode:"wait",children:[E==="skins"&&p.jsx(ae.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:hd.map(O=>{const Z=i.some(fe=>fe.id===O.id),ne=o===O.id,oe=O.currency==="coins"?t.coins>=O.price:O.currency==="gems"?t.gems>=O.price:!0;return p.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 ${ne?"ring-2 ring-game-accent":""}`,children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("p",{className:"font-bold text-white",children:O.name}),p.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:bx[O.rarity]},children:xx[O.rarity]})]}),p.jsx("div",{className:"flex gap-1 mb-3 justify-center",children:(()=>{const fe=ho[O.id]||ho.classic;return fe.colors.map((ie,R)=>p.jsxs(ae.div,{className:"relative overflow-hidden",style:{width:24,height:24,borderRadius:fe.borderRadius,background:fe.innerEffect==="glow"?`radial-gradient(circle at 30% 30%, ${ie}dd, ${ie}88 70%, ${ie}44)`:fe.innerEffect==="glass"?`linear-gradient(145deg, ${ie}ee, ${ie}aa 50%, ${ie}cc)`:fe.innerEffect==="gradient"?`linear-gradient(135deg, ${ie}, ${ie}88, ${ie}cc)`:fe.innerEffect==="metallic"?`linear-gradient(145deg, ${ie}ff, ${ie}66 30%, ${ie}cc 70%, ${ie}ff)`:ie,border:fe.borderWidth>0?`${fe.borderWidth}px ${fe.borderStyle} ${ie}88`:"none",boxShadow:fe.glowIntensity>0?`0 0 ${Math.round(fe.glowIntensity*12)}px ${ie}`:"none"},animate:fe.animation==="pulse"?{boxShadow:[`0 0 5px ${ie}`,`0 0 15px ${ie}`,`0 0 5px ${ie}`]}:fe.animation==="fire"?{y:[0,-2,0]}:fe.animation==="ice"?{opacity:[1,.8,1]}:fe.animation==="electric"?{x:[-1,1,-1,0]}:void 0,transition:fe.animation==="pulse"?{duration:1,repeat:1/0}:fe.animation==="fire"?{duration:.3,repeat:1/0}:fe.animation==="ice"?{duration:2,repeat:1/0}:fe.animation==="electric"?{duration:.15,repeat:1/0}:void 0,children:[(fe.innerEffect==="glossy"||fe.innerEffect==="glass")&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-transparent to-transparent"}),fe.animation==="shimmer"&&p.jsx(ae.div,{className:"absolute inset-0",style:{background:"linear-gradient(110deg, transparent 30%, rgba(255,255,255,0.5) 50%, transparent 70%)"},animate:{x:["-100%","200%"]},transition:{duration:1.5,repeat:1/0,ease:"linear"}})]},R))})()}),p.jsxs("p",{className:"text-[10px] text-gray-400 mb-2 text-center",children:[O.id==="classic"&&"  ",O.id==="neon"&&"  + ",O.id==="candy"&&"  ",O.id==="pixel"&&"8  ",O.id==="galaxy"&&"  + ",O.id==="crystal"&&"  +  ",O.id==="holographic"&&" ",O.id==="animated_fire"&&"  ",O.id==="animated_ice"&&"  ",O.id==="animated_electric"&&"  "]}),Z?p.jsx("button",{className:`w-full py-2 rounded-lg font-bold ${ne?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>P(O.id),disabled:ne,children:ne?"":""}):p.jsx("button",{className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-1 ${oe||O.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>z(O.id),disabled:!oe&&O.currency!=="free",children:O.currency==="free"?"  ":p.jsxs(p.Fragment,{children:[O.currency==="coins"?"":"",O.price," "]})})]},O.id)})},"skins"),E==="themes"&&p.jsx(ae.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:fd.map(O=>{const Z=s.some(fe=>fe.id===O.id),ne=u===O.id,oe=O.currency==="coins"?t.coins>=O.price:O.currency==="gems"?t.gems>=O.price:!0;return p.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 ${ne?"ring-2 ring-game-accent":""}`,children:[p.jsx("p",{className:"font-bold text-white mb-2",children:O.name}),p.jsx("div",{className:"h-20 rounded-lg mb-3 p-2",style:{backgroundColor:O.colors.background},children:p.jsx("div",{className:"w-full h-full rounded",style:{backgroundColor:O.colors.panel},children:p.jsx("div",{className:"w-1/3 h-2 rounded mt-2 ml-2",style:{backgroundColor:O.colors.accent}})})}),Z?p.jsx("button",{className:`w-full py-2 rounded-lg font-bold ${ne?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>j(O.id),disabled:ne,children:ne?"":""}):p.jsx("button",{className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-1 ${oe||O.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>B(O.id),disabled:!oe&&O.currency!=="free",children:O.currency==="free"?"  ":p.jsxs(p.Fragment,{children:[O.currency==="coins"?"":"",O.price," "]})})]},O.id)})},"themes"),E==="gems"&&p.jsxs(ae.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[_x.map(O=>p.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 flex items-center justify-between ${O.highlight?"ring-2 ring-yellow-400":""} ${O.bestValue?"ring-2 ring-purple-400":""}`,children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-4xl",children:""}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("p",{className:"font-bold text-white text-lg",children:[O.amount," "]}),O.bonusAmount>0&&p.jsxs("span",{className:"text-green-400 text-sm",children:["+",O.bonusAmount," "]})]}),p.jsx("p",{className:"text-sm text-gray-400",children:O.label})]})]}),p.jsxs("button",{className:`bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-xl\r
                               font-bold text-white hover:from-purple-400 hover:to-pink-400`,onClick:()=>{x("purchaseSuccess"),alert(`${O.amount+O.bonusAmount}   (   )`)},children:["$",O.price]})]},O.id)),p.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-4xl",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-white",children:" "}),p.jsx("p",{className:"text-sm text-green-200",children:"  50  "})]})]}),p.jsx("button",{className:`bg-white/20 px-6 py-3 rounded-xl font-bold text-white\r
                             hover:bg-white/30`,onClick:()=>{x("rewardGet"),alert("   50   ( SDK  )")},children:""})]})]},"gems")]})})]})}function yA({onClose:r}){const[t,i]=re.useState([]),[s,o]=re.useState(!0),[u,f]=re.useState("all"),[m,v]=re.useState("classic"),[b,x]=re.useState(-1),[E,C]=re.useState(rb()),[z,B]=re.useState(!1),[P,j]=re.useState(E),O=sb(),Z=re.useCallback(async()=>{o(!0);try{const S=await aA(u,m,50);i(S);const A=await rA(O,m);x(A)}catch(S){console.error("  :",S)}finally{o(!1)}},[u,m,O]);re.useEffect(()=>{Z()},[Z]);const ne=()=>{P.trim()&&(lb(P.trim()),C(P.trim())),B(!1)},oe=S=>S===1?"bg-gradient-to-r from-yellow-500 to-amber-600 text-black":S===2?"bg-gradient-to-r from-gray-300 to-gray-400 text-black":S===3?"bg-gradient-to-r from-orange-400 to-orange-600 text-black":"bg-white/10 text-white",fe=S=>S===1?"":S===2?"":S===3?"":S.toString(),ie=S=>{const A=Math.floor(S/60),M=S%60;return`${A}:${M.toString().padStart(2,"0")}`},R=S=>{const A=S instanceof Date?S:S.toDate(),D=new Date().getTime()-A.getTime(),k=Math.floor(D/(1e3*60*60)),N=Math.floor(D/(1e3*60*60*24));return k<1?" ":k<24?`${k} `:N<7?`${N} `:A.toLocaleDateString("ko-KR")};return p.jsxs(ae.div,{className:"fixed inset-0 bg-gradient-to-b from-[#0a0a20] via-[#1a1a40] to-[#0a0a20] z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"}),p.jsxs("div",{className:"relative h-full flex flex-col max-w-lg mx-auto px-4 py-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""}),p.jsx("h1",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500",children:"RANKING"}),p.jsx("button",{onClick:Z,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""})]}),p.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-2xl p-4 mb-4 border border-purple-500/30",children:p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-2xl",children:""}),p.jsxs("div",{children:[z?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:P,onChange:S=>j(S.target.value),maxLength:12,className:"bg-black/50 border border-purple-500 rounded px-2 py-1 text-white text-sm w-28",autoFocus:!0,onKeyDown:S=>S.key==="Enter"&&ne()}),p.jsx("button",{onClick:ne,className:"text-green-400 text-sm",children:""})]}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-white font-bold",children:E}),p.jsx("button",{onClick:()=>B(!0),className:"text-gray-400 text-xs hover:text-white",children:""})]}),p.jsx("div",{className:"text-gray-400 text-xs",children:b>0?` : ${b}`:" "})]})]})})}),p.jsx("div",{className:"flex gap-2 mb-3",children:p.jsx("div",{className:"flex bg-black/30 rounded-xl p-1 flex-1",children:["all","weekly","daily"].map(S=>p.jsx("button",{onClick:()=>f(S),className:`flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all ${u===S?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400"}`,children:S==="all"?"":S==="weekly"?"":""},S))})}),p.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:["classic","timeAttack","survival","puzzle"].map(S=>p.jsx("button",{onClick:()=>v(S),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all ${m===S?"bg-gradient-to-r from-orange-500 to-red-600 text-white":"bg-white/10 text-gray-400"}`,children:S==="classic"?"":S==="timeAttack"?"":S==="survival"?"":""},S))}),p.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-4",children:s?p.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[p.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),p.jsx("span",{className:"text-gray-400 text-sm",children:" ..."})]}):t.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[p.jsx("span",{className:"text-5xl",children:""}),p.jsx("span",{className:"text-gray-400 text-sm",children:"  "}),p.jsx("span",{className:"text-gray-500 text-xs",children:"  1 !"})]}):p.jsx(un,{children:t.map((S,A)=>{const M=A+1,D=S.playerId===O;return p.jsx(ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:A*.03},className:`rounded-xl p-3 ${oe(M)} ${D?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-[#0a0a20]":""}`,children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-sm ${M<=3?"":"bg-black/20"}`,children:fe(M)}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`font-bold truncate ${M<=3?"":"text-white"}`,children:S.playerName}),D&&p.jsx("span",{className:"text-[10px] bg-cyan-500 text-white px-1.5 py-0.5 rounded-full",children:"ME"})]}),p.jsxs("div",{className:`text-xs ${M<=3?"opacity-70":"text-gray-400"}`,children:["Lv.",S.level," | ",ie(S.playTime)," |"," ",R(S.createdAt)]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:`font-black text-lg ${M<=3?"":"text-cyan-400"}`,children:S.score.toLocaleString()}),p.jsxs("div",{className:`text-xs ${M<=3?"opacity-70":"text-gray-500"}`,children:[S.maxCombo," ",S.maxChain,""]})]})]})},S.id||A)})})})]})]})}function vA({onClose:r}){const{wheelState:t,spinWheel:i,canSpinWheel:s,addCoins:o,addGems:u}=Xn(),{playSound:f}=oi(),[m,v]=re.useState(!1),[b,x]=re.useState(0),[E,C]=re.useState(null),z=re.useRef(null),B=s(),P=360/Vs.length,j=O=>{if(m||O==="free"&&!B.free||O==="ad"&&!B.ad||O==="gem"&&!B.gem)return;v(!0),C(null),f("wheelSpin");const Z=Math.random();let ne=0,oe=Vs[0];for(const A of Vs)if(ne+=A.probability,Z<=ne){oe=A;break}const ie=Vs.findIndex(A=>A.id===oe.id)*P,R=5+Math.random()*3,S=b+R*360+(360-ie);x(S),setTimeout(()=>{v(!1),C(oe.id);const A=oe.reward;A.coins&&o(A.coins),A.gems&&u(A.gems),oe.probability<.1?(f("jackpot"),Bd({particleCount:100,spread:70,origin:{y:.6}})):f("rewardGet"),i()},5e3)};return p.jsx(ae.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:p.jsxs(ae.div,{className:"bg-game-panel rounded-2xl p-6 max-w-md w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:O=>O.stopPropagation(),children:[p.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:" "}),p.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-6",children:[p.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-10",children:p.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-12 border-l-transparent border-r-transparent border-t-yellow-400"})}),p.jsx(ae.div,{ref:z,className:"w-full h-full rounded-full overflow-hidden border-4 border-yellow-400",style:{background:`conic-gradient(${Vs.map((O,Z)=>`${O.color} ${Z*P}deg ${(Z+1)*P}deg`).join(", ")})`},animate:{rotate:b},transition:{duration:5,ease:[.25,.1,.25,1]},children:Vs.map((O,Z)=>{const ne=Z*P+P/2;return p.jsx("div",{className:"absolute text-xs font-bold text-white whitespace-nowrap",style:{top:"50%",left:"50%",transform:`rotate(${ne}deg) translateY(-100px)`,transformOrigin:"center",textShadow:"1px 1px 2px black"},children:O.label},O.id)})}),p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-yellow-400 flex items-center justify-center text-2xl shadow-lg",children:""})]}),E&&!m&&p.jsx(ae.div,{className:"text-center mb-4",initial:{scale:0},animate:{scale:1},children:p.jsxs("p",{className:"text-xl font-bold text-green-400",children:[Vs.find(O=>O.id===E)?.label," !"]})}),p.jsxs("div",{className:"space-y-2",children:[B.free&&p.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white hover:from-green-400 hover:to-green-500 disabled:opacity-50`,onClick:()=>j("free"),disabled:m,children:["   (",t.freeSpinsRemaining,")"]}),B.ad&&p.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                         font-bold text-white hover:from-yellow-400 hover:to-orange-400 disabled:opacity-50`,onClick:()=>j("ad"),disabled:m,children:["    (",t.adSpinsRemaining,")"]}),B.gem&&p.jsx("button",{className:`w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl\r
                         font-bold text-white hover:from-purple-400 hover:to-pink-400 disabled:opacity-50`,onClick:()=>j("gem"),disabled:m,children:" 20  "}),!B.free&&!B.ad&&!B.gem&&p.jsx("p",{className:"text-center text-gray-400",children:"   "})]}),p.jsx("button",{className:"w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300",onClick:r,disabled:m,children:""})]})})}function _A(){const[r,t]=re.useState("menu"),[i,s]=re.useState(!1),[o,u]=re.useState(!1),[f,m]=re.useState(!1),[v,b]=re.useState(!1),[x,E]=re.useState(!1),[C,z]=re.useState(0),B=re.useRef(!1),P=qe(),{gameStatus:j,startGame:O,pauseGame:Z,resumeGame:ne,resetGame:oe,continueGame:fe,incrementGameTime:ie,endGame:R,nextPuzzleLevel:S,score:A,combo:M,chainCount:D,level:k,board:N,isFeverMode:Qe,feverGauge:mt,gameTime:X,gameMode:se}=P,{settings:be,updateStreak:Le}=Xn(),{playSound:U,stopBGM:V}=oi(),le=re.useRef(k);re.useEffect(()=>{Le()},[Le]),re.useEffect(()=>{k>le.current&&j==="playing"&&(b(!0),U("levelUp"),setTimeout(()=>b(!1),2e3)),le.current=k},[k,j,U]),re.useEffect(()=>{Qe&&!B.current&&j==="playing"&&(E(!0),U("combo"),setTimeout(()=>E(!1),2e3)),B.current=Qe},[Qe,j,U]),re.useEffect(()=>{if(j!=="playing"){z(0);return}let ue=0;for(let de=0;de<4;de++)for(let Ae=0;Ae<pe.COLUMNS;Ae++)N[de]?.[Ae]!==null&&ue++;ue>=pe.COLUMNS*2?z(2):ue>=pe.COLUMNS?z(1):z(0)},[N,j]),re.useEffect(()=>{let ue=null;return j==="playing"&&(ue=window.setInterval(()=>ie(),1e3)),()=>{ue&&clearInterval(ue)}},[j,ie]),re.useEffect(()=>{if(j!=="playing")return;const ue=pv[se];ue?.hasTimeLimit&&ue.timeLimit&&X>=ue.timeLimit&&R()},[j,se,X,R]);const ce=re.useCallback(ue=>{U("buttonClick"),O(ue),t("game")},[O,U]),ge=re.useCallback(()=>{U("buttonClick"),oe(),V(),t("menu")},[oe,V,U]),Ee=re.useCallback(()=>{U("buttonClick"),oe(),O("classic")},[oe,O,U]),ve=re.useCallback(()=>{U("buttonClick"),fe()},[fe,U]);return r==="menu"?p.jsxs(p.Fragment,{children:[p.jsx(mA,{onStartGame:ce,onOpenShop:()=>{U("buttonClick"),t("shop")},onOpenSettings:()=>{U("buttonClick"),s(!0)},onOpenLeaderboard:()=>{U("buttonClick"),t("leaderboard")},onOpenBattlePass:()=>{U("buttonClick"),alert("Coming Soon!")},onOpenDailyReward:()=>{U("buttonClick"),u(!0)}}),p.jsxs(un,{children:[i&&p.jsx(fv,{onClose:()=>s(!1)}),o&&p.jsx(gA,{onClose:()=>u(!1)}),f&&p.jsx(vA,{onClose:()=>m(!1)})]})]}):r==="shop"?p.jsx(pA,{onClose:()=>t("menu")}):r==="leaderboard"?p.jsx(yA,{onClose:()=>t("menu")}):p.jsxs("div",{className:`fixed inset-0 bg-[#0a0a15] flex flex-col items-center overflow-hidden transition-colors duration-500
      ${C===2?"shadow-[inset_0_0_50px_rgba(255,0,0,0.3)]":""}
      ${Qe?"shadow-[inset_0_0_100px_rgba(255,100,0,0.3)]":""}`,children:[Qe&&p.jsx(ae.div,{className:"absolute inset-0 pointer-events-none z-0",animate:{opacity:[.3,.5,.3]},transition:{duration:.5,repeat:1/0},style:{background:"radial-gradient(ellipse at center, rgba(255, 100, 0, 0.2) 0%, transparent 70%)"}}),C>0&&!Qe&&p.jsx("div",{className:`absolute inset-0 pointer-events-none z-0 animate-pulse ${C===2?"bg-red-900/10":"bg-transparent"}`}),p.jsx(un,{children:v&&p.jsxs(ae.div,{initial:{scale:.5,opacity:0,y:100},animate:{scale:1,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-100},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[p.jsx("h2",{className:"text-6xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-yellow-400 to-yellow-100 drop-shadow-[0_0_20px_rgba(255,215,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:"LEVEL UP!"}),p.jsxs("p",{className:"text-3xl text-white font-bold mt-2 neon-text",children:["Lv. ",k]})]})}),p.jsx(un,{children:x&&p.jsxs(ae.div,{initial:{scale:0,rotate:-10,opacity:0},animate:{scale:1,rotate:0,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[p.jsx(ae.h2,{className:"text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-orange-600 via-red-500 to-yellow-400 drop-shadow-[0_0_30px_rgba(255,100,0,0.8)]",style:{fontFamily:"var(--font-display)"},animate:{scale:[1,1.1,1]},transition:{duration:.3,repeat:1/0},children:" FEVER! "}),p.jsx("p",{className:"text-2xl text-yellow-300 font-bold mt-2",children:"x3 SCORE MULTIPLIER!"})]})}),p.jsxs("div",{className:"w-full max-w-2xl px-4 py-2 flex justify-between items-center z-20",children:[p.jsx("button",{onClick:()=>{U("buttonClick"),j==="playing"?Z():ne()},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:j==="paused"?"":""}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-[10px] text-gray-400 font-bold tracking-widest",children:"LEVEL"}),p.jsx("div",{className:"text-xl font-black text-cyan-400 font-mono leading-none",children:k})]}),p.jsx("button",{onClick:()=>{U("buttonClick"),s(!0)},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:""})]}),p.jsxs("div",{className:"flex-1 w-full max-w-4xl flex justify-center items-start gap-1 md:gap-4 px-1 md:px-2 py-1 overflow-hidden",children:[p.jsx("div",{className:"hidden md:flex flex-col gap-3 w-48 items-stretch z-10",children:p.jsx(Kx,{})}),p.jsxs("div",{className:"flex flex-col items-center relative z-20",children:[p.jsx("div",{className:"flex md:hidden justify-end w-full max-w-[280px] mb-1 px-1",children:p.jsx(ty,{cellSize:18,maxBlocks:3})}),p.jsx(Qx,{}),p.jsxs("div",{className:"md:hidden flex justify-around w-full max-w-[280px] mt-1 py-1 px-2 bg-black/30 rounded-lg",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"SCORE"}),p.jsx("div",{className:"text-sm font-mono font-bold text-white leading-none",children:A.toLocaleString()})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"COMBO"}),p.jsxs("div",{className:`text-sm font-mono font-bold leading-none ${M>1?"text-orange-400":"text-gray-600"}`,children:["x",M]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"CHAIN"}),p.jsx("div",{className:`text-sm font-mono font-bold leading-none ${D>0?"text-cyan-400":"text-gray-600"}`,children:D})]})]}),p.jsx("div",{className:"mt-1 w-full max-w-[300px]",children:p.jsx(Xx,{})})]}),p.jsx("div",{className:"hidden md:flex flex-col gap-3 w-32 items-center z-10",children:p.jsx(ty,{cellSize:28,maxBlocks:5})})]}),p.jsx("div",{className:"w-full max-w-lg pb-safe z-30",children:(be.controlType==="buttons"||be.controlType==="both")&&p.jsx(Yx,{visible:j==="playing"})}),p.jsxs(un,{children:[j==="paused"&&p.jsx(fA,{onResume:ne,onRestart:Ee,onSettings:()=>s(!0),onMainMenu:ge}),j==="gameover"&&p.jsx(lA,{onRestart:Ee,onMainMenu:ge,onContinue:ve}),j==="levelComplete"&&se==="puzzle"&&p.jsx(dA,{onNextLevel:()=>{U("levelUp"),S()},onMainMenu:ge}),i&&p.jsx(fv,{onClose:()=>s(!1)})]})]})}H1.createRoot(document.getElementById("root")).render(p.jsx(re.StrictMode,{children:p.jsx(_A,{})}));
