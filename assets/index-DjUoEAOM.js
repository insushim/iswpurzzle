import{r as re,j as g,m as ie,A as un}from"./animations-BJOS7rFy.js";import{r as Q_,a as X_}from"./vendor-DlBnNAMw.js";import{c as gv}from"./state-ChBe2EGv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Gh={exports:{}},Jl={},qh={exports:{}},Hh={};var Ug;function Y_(){return Ug||(Ug=1,(function(r){function t(X,oe){var xe=X.length;X.push(oe);e:for(;0<xe;){var Le=xe-1>>>1,z=X[Le];if(0<o(z,oe))X[Le]=oe,X[xe]=z,xe=Le;else break e}}function a(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var oe=X[0],xe=X.pop();if(xe!==oe){X[0]=xe;e:for(var Le=0,z=X.length,j=z>>>1;Le<j;){var ae=2*(Le+1)-1,ue=X[ae],ge=ae+1,Te=X[ge];if(0>o(ue,xe))ge<z&&0>o(Te,ue)?(X[Le]=Te,X[ge]=xe,Le=ge):(X[Le]=ue,X[ae]=xe,Le=ae);else if(ge<z&&0>o(Te,xe))X[Le]=Te,X[ge]=xe,Le=ge;else break e}}return oe}function o(X,oe){var xe=X.sortIndex-oe.sortIndex;return xe!==0?xe:X.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],b=[],x=1,T=null,S=3,I=!1,V=!1,q=!1,U=!1,k=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function se(X){for(var oe=a(b);oe!==null;){if(oe.callback===null)s(b);else if(oe.startTime<=X)s(b),oe.sortIndex=oe.expirationTime,t(p,oe);else break;oe=a(b)}}function ce(X){if(q=!1,se(X),!V)if(a(p)!==null)V=!0,le||(le=!0,B());else{var oe=a(b);oe!==null&&tt(ce,oe.startTime-X)}}var le=!1,M=-1,w=5,C=-1;function N(){return U?!0:!(r.unstable_now()-C<w)}function O(){if(U=!1,le){var X=r.unstable_now();C=X;var oe=!0;try{e:{V=!1,q&&(q=!1,W(M),M=-1),I=!0;var xe=S;try{t:{for(se(X),T=a(p);T!==null&&!(T.expirationTime>X&&N());){var Le=T.callback;if(typeof Le=="function"){T.callback=null,S=T.priorityLevel;var z=Le(T.expirationTime<=X);if(X=r.unstable_now(),typeof z=="function"){T.callback=z,se(X),oe=!0;break t}T===a(p)&&s(p),se(X)}else s(p);T=a(p)}if(T!==null)oe=!0;else{var j=a(b);j!==null&&tt(ce,j.startTime-X),oe=!1}}break e}finally{T=null,S=xe,I=!1}oe=void 0}}finally{oe?B():le=!1}}}var B;if(typeof $=="function")B=function(){$(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Be=R.port2;R.port1.onmessage=O,B=function(){Be.postMessage(null)}}else B=function(){k(O,0)};function tt(X,oe){M=k(function(){X(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(X){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var xe=S;S=oe;try{return X()}finally{S=xe}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var xe=S;S=X;try{return oe()}finally{S=xe}},r.unstable_scheduleCallback=function(X,oe,xe){var Le=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Le+xe:Le):xe=Le,X){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=xe+z,X={id:x++,callback:oe,priorityLevel:X,startTime:xe,expirationTime:z,sortIndex:-1},xe>Le?(X.sortIndex=xe,t(b,X),a(p)===null&&X===a(b)&&(q?(W(M),M=-1):q=!0,tt(ce,xe-Le))):(X.sortIndex=z,t(p,X),V||I||(V=!0,le||(le=!0,B()))),X},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(X){var oe=S;return function(){var xe=S;S=oe;try{return X.apply(this,arguments)}finally{S=xe}}}})(Hh)),Hh}var zg;function K_(){return zg||(zg=1,qh.exports=Y_()),qh.exports}var Pg;function $_(){if(Pg)return Jl;Pg=1;var r=K_(),t=Q_(),a=X_();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function b(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,l=n;;){var f=i.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===i)return p(f),e;if(d===l)return p(f),n;d=d.sibling}throw Error(s(188))}if(i.return!==l.return)i=f,l=d;else{for(var v=!1,E=f.child;E;){if(E===i){v=!0,i=f,l=d;break}if(E===l){v=!0,l=f,i=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===i){v=!0,i=d,l=f;break}if(E===l){v=!0,l=d,i=f;break}E=E.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),$=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function B(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case k:return"Profiler";case U:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case $:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case se:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:Be(e.type)||"Memo";case w:n=e._payload,e=e._init;try{return Be(e(n))}catch{}}return null}var tt=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Le=[],z=-1;function j(e){return{current:e}}function ae(e){0>z||(e.current=Le[z],Le[z]=null,z--)}function ue(e,n){z++,Le[z]=e.current,e.current=n}var ge=j(null),Te=j(null),Ce=j(null),he=j(null);function be(e,n){switch(ue(Ce,n),ue(Te,e),ue(ge,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?og(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=og(n),e=cg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(ge),ue(ge,e)}function ye(){ae(ge),ae(Te),ae(Ce)}function de(e){e.memoizedState!==null&&ue(he,e);var n=ge.current,i=cg(n,e.type);n!==i&&(ue(Te,e),ue(ge,i))}function Ne(e){Te.current===e&&(ae(ge),ae(Te)),he.current===e&&(ae(he),Yl._currentValue=xe)}var Ie,Ge;function Se(e){if(Ie===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Ie=n&&n[1]||"",Ge=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+e+Ge}var dt=!1;function st(e,n){if(!e||dt)return"";dt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Q=K}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(K){Q=K}e.call(ee.prototype)}}else{try{throw Error()}catch(K){Q=K}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var D=v.split(`
`),F=E.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===F.length)for(l=D.length-1,f=F.length-1;1<=l&&0<=f&&D[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==F[f]){var Z=`
`+D[l].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=l&&0<=f);break}}}finally{dt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Se(i):""}function Gt(e,n){switch(e.tag){case 26:case 27:case 5:return Se(e.type);case 16:return Se("Lazy");case 13:return e.child!==n&&n!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return Se("Activity");default:return""}}function Tt(e){try{var n="",i=null;do n+=Gt(e,i),i=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var $e=Object.prototype.hasOwnProperty,Je=r.unstable_scheduleCallback,In=r.unstable_cancelCallback,ua=r.unstable_shouldYield,ci=r.unstable_requestPaint,Mt=r.unstable_now,Yn=r.unstable_getCurrentPriorityLevel,Kn=r.unstable_ImmediatePriority,Ua=r.unstable_UserBlockingPriority,Ze=r.unstable_NormalPriority,qs=r.unstable_LowPriority,as=r.unstable_IdlePriority,ui=r.log,Hs=r.unstable_setDisableYieldValue,xn=null,$t=null;function Dn(e){if(typeof ui=="function"&&Hs(e),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(xn,e)}catch{}}var wt=Math.clz32?Math.clz32:Ao,wo=Math.log,Fs=Math.LN2;function Ao(e){return e>>>=0,e===0?32:31-(wo(e)/Fs|0)|0}var fa=256,is=262144,It=4194304;function ha(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function da(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?f=ha(l):(v&=E,v!==0?f=ha(v):i||(i=E&~e,i!==0&&(f=ha(i))))):(E=l&~d,E!==0?f=ha(E):v!==0?f=ha(v):i||(i=l&~e,i!==0&&(f=ha(i)))),f===0?0:n!==0&&n!==f&&(n&d)===0&&(d=f&-f,i=n&-n,d>=i||d===32&&(i&4194048)!==0)?n:f}function $n(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Fu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(){var e=It;return It<<=1,(It&62914560)===0&&(It=4194304),e}function ma(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function ss(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qu(e,n,i,l,f,d){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var E=e.entanglements,D=e.expirationTimes,F=e.hiddenUpdates;for(i=v&~i;0<i;){var Z=31-wt(i),ee=1<<Z;E[Z]=0,D[Z]=-1;var Q=F[Z];if(Q!==null)for(F[Z]=null,Z=0;Z<Q.length;Z++){var K=Q[Z];K!==null&&(K.lane&=-536870913)}i&=~ee}l!==0&&rs(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~n))}function rs(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-wt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function Wr(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-wt(i),f=1<<l;f&n|e[l]&n&&(e[l]|=n),i&=~f}}function el(e,n){var i=n&-n;return i=(i&42)!==0?1:ls(i),(i&(e.suspendedLanes|n))!==0?0:i}function ls(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function za(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function No(){var e=oe.p;return e!==0?e:(e=window.event,e===void 0?32:Dg(e.type))}function Zn(e,n){var i=oe.p;try{return oe.p=e,n()}finally{oe.p=i}}var Jn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Jn,Ft="__reactProps$"+Jn,pa="__reactContainer$"+Jn,Qs="__reactEvents$"+Jn,Xu="__reactListeners$"+Jn,Ro="__reactHandles$"+Jn,Mo="__reactResources$"+Jn,ga="__reactMarker$"+Jn;function Xs(e){delete e[Dt],delete e[Ft],delete e[Qs],delete e[Xu],delete e[Ro]}function ya(e){var n=e[Dt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[pa]||i[Dt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=gg(e);e!==null;){if(i=e[Dt])return i;e=gg(e)}return n}e=i,i=e.parentNode}return null}function On(e){if(e=e[Dt]||e[pa]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Tn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function va(e){var n=e[Mo];return n||(n=e[Mo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ot(e){e[ga]=!0}var tl=new Set,nl={};function ba(e,n){_a(e,n),_a(e+"Capture",n)}function _a(e,n){for(nl[e]=n,e=0;e<n.length;e++)tl.add(n[e])}var al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},sl={};function Io(e){return $e.call(sl,e)?!0:$e.call(il,e)?!1:al.test(e)?sl[e]=!0:(il[e]=!0,!1)}function Ys(e,n,i){if(Io(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function En(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function Vt(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rl(e,n,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(v){i=""+v,d.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function rt(e){if(!e._valueTracker){var n=fi(e)?"checked":"value";e._valueTracker=rl(e,n,""+e[n])}}function os(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=fi(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cs=/[\n"\\]/g;function dn(e){return e.replace(cs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ks(e,n,i,l,f,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ll(e,v,Qt(n)):i!=null?ll(e,v,Qt(i)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Qt(E):e.removeAttribute("name")}function Do(e,n,i,l,f,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){rt(e);return}i=i!=null?""+Qt(i):"",n=n!=null?""+Qt(n):i,E||n===e.value||(e.value=n),e.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),rt(e)}function ll(e,n,i){n==="number"&&xa(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hi(e,n,i,l){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Qt(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Oo(e,n,i){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Qt(i):""}function di(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(s(92));if(tt(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Qt(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),rt(e)}function mn(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ol(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||Vo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function cl(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&i[f]!==l&&ol(e,f,l)}else for(var d in n)n.hasOwnProperty(d)&&ol(e,d,n[d])}function $s(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(e){return mi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Wn(){}var ul=null;function Vn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Ta=null;function us(e){var n=On(e);if(n&&(e=n.stateNode)){var i=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ks(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+dn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var f=l[Ft]||null;if(!f)throw Error(s(90));Ks(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&os(l)}break e;case"textarea":Oo(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&hi(e,!!i.multiple,n,!1)}}}var Js=!1;function gi(e,n,i){if(Js)return e(n,i);Js=!0;try{var l=e(n);return l}finally{if(Js=!1,(pi!==null||Ta!==null)&&(Nc(),pi&&(n=pi,e=Ta,Ta=pi=null,us(n),e)))for(n=0;n<e.length;n++)us(e[n])}}function ea(e,n){var i=e.stateNode;if(i===null)return null;var l=i[Ft]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=!1;if(jn)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){fs=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{fs=!1}var Ea=null,fl=null,hs=null;function hl(){if(hs)return hs;var e,n=fl,i=n.length,l,f="value"in Ea?Ea.value:Ea.textContent,d=f.length;for(e=0;e<i&&n[e]===f[e];e++);var v=i-e;for(l=1;l<=v&&n[i-l]===f[d-l];l++);return hs=f.slice(e,1<l?1-l:void 0)}function ds(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Pa(){return!0}function ta(){return!1}function Zt(e){function n(i,l,f,d,v){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Pa:ta,this.isPropagationStopped=ta,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),n}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Zt(Ga),yi=T({},Ga,{view:0,detail:0}),dl=Zt(yi),vi,Ws,wa,er=T({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(vi=e.screenX-wa.screenX,Ws=e.screenY-wa.screenY):Ws=vi=0,wa=e),vi)},movementY:function(e){return"movementY"in e?e.movementY:Ws}}),ml=Zt(er),ms=T({},er,{dataTransfer:0}),ko=Zt(ms),Lo=T({},yi,{relatedTarget:0}),ps=Zt(Lo),pl=T({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Bo=Zt(pl),tr=T({},Ga,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uo=Zt(tr),zo=T({},Ga,{data:0}),Aa=Zt(zo),Po={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ho(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=qo[e])?!!n[e]:!1}function bi(){return Ho}var fn=T({},yi,{key:function(e){if(e.key){var n=Po[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Go[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bi,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fo=Zt(fn),Qo=T({},er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=Zt(Qo),u=T({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bi}),y=Zt(u),_=T({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Zt(_),G=T({},er,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Zt(G),fe=T({},Ga,{newState:0,oldState:0}),Ve=Zt(fe),At=[9,13,27,32],nt=jn&&"CompositionEvent"in window,bt=null;jn&&"documentMode"in document&&(bt=document.documentMode);var kn=jn&&"TextEvent"in window&&!bt,Ca=jn&&(!nt||bt&&8<bt&&11>=bt),na=" ",aa=!1;function gs(e,n){switch(e){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ar=!1;function gb(e,n){switch(e){case"compositionend":return nr(n);case"keypress":return n.which!==32?null:(aa=!0,na);case"textInput":return e=n.data,e===na&&aa?null:e;default:return null}}function yb(e,n){if(ar)return e==="compositionend"||!nt&&gs(e,n)?(e=hl(),hs=fl=Ea=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ca&&n.locale!=="ko"?null:n.data;default:return null}}var vb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!vb[e.type]:n==="textarea"}function _m(e,n,i,l){pi?Ta?Ta.push(l):Ta=[l]:pi=l,n=jc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var gl=null,yl=null;function bb(e){ng(e,0)}function Xo(e){var n=Tn(e);if(os(n))return e}function xm(e,n){if(e==="change")return n}var Tm=!1;if(jn){var Yu;if(jn){var Ku="oninput"in document;if(!Ku){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),Ku=typeof Em.oninput=="function"}Yu=Ku}else Yu=!1;Tm=Yu&&(!document.documentMode||9<document.documentMode)}function Sm(){gl&&(gl.detachEvent("onpropertychange",wm),yl=gl=null)}function wm(e){if(e.propertyName==="value"&&Xo(yl)){var n=[];_m(n,yl,e,Vn(e)),gi(bb,n)}}function _b(e,n,i){e==="focusin"?(Sm(),gl=n,yl=i,gl.attachEvent("onpropertychange",wm)):e==="focusout"&&Sm()}function xb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xo(yl)}function Tb(e,n){if(e==="click")return Xo(n)}function Eb(e,n){if(e==="input"||e==="change")return Xo(n)}function Sb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Sn=typeof Object.is=="function"?Object.is:Sb;function vl(e,n){if(Sn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!$e.call(n,f)||!Sn(e[f],n[f]))return!1}return!0}function Am(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cm(e,n){var i=Am(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Am(i)}}function Nm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Nm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Rm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xa(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=xa(e.document)}return n}function $u(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var wb=jn&&"documentMode"in document&&11>=document.documentMode,ir=null,Zu=null,bl=null,Ju=!1;function Mm(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ju||ir==null||ir!==xa(l)||(l=ir,"selectionStart"in l&&$u(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),bl&&vl(bl,l)||(bl=l,l=jc(Zu,"onSelect"),0<l.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=ir)))}function ys(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var sr={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionrun:ys("Transition","TransitionRun"),transitionstart:ys("Transition","TransitionStart"),transitioncancel:ys("Transition","TransitionCancel"),transitionend:ys("Transition","TransitionEnd")},Wu={},Im={};jn&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function vs(e){if(Wu[e])return Wu[e];if(!sr[e])return e;var n=sr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Im)return Wu[e]=n[i];return e}var Dm=vs("animationend"),Om=vs("animationiteration"),Vm=vs("animationstart"),Ab=vs("transitionrun"),Cb=vs("transitionstart"),Nb=vs("transitioncancel"),jm=vs("transitionend"),km=new Map,ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ef.push("scrollEnd");function ia(e,n){km.set(e,n),ba(n,[e])}var Yo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ln=[],rr=0,tf=0;function Ko(){for(var e=rr,n=tf=rr=0;n<e;){var i=Ln[n];Ln[n++]=null;var l=Ln[n];Ln[n++]=null;var f=Ln[n];Ln[n++]=null;var d=Ln[n];if(Ln[n++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&Lm(i,f,d)}}function $o(e,n,i,l){Ln[rr++]=e,Ln[rr++]=n,Ln[rr++]=i,Ln[rr++]=l,tf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function nf(e,n,i,l){return $o(e,n,i,l),Zo(e)}function bs(e,n){return $o(e,null,null,n),Zo(e)}function Lm(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var f=!1,d=e.return;d!==null;)d.childLanes|=i,l=d.alternate,l!==null&&(l.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&n!==null&&(f=31-wt(i),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[n]:l.push(n),n.lane=i|536870912),d):null}function Zo(e){if(50<Pl)throw Pl=0,hh=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var lr={};function Rb(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(e,n,i,l){return new Rb(e,n,i,l)}function af(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ha(e,n){var i=e.alternate;return i===null?(i=wn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Bm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Jo(e,n,i,l,f,d){var v=0;if(l=e,typeof e=="function")af(e)&&(v=1);else if(typeof e=="string")v=V_(e,i,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=wn(31,i,n,f),e.elementType=C,e.lanes=d,e;case q:return _s(i.children,f,d,n);case U:v=8,f|=24;break;case k:return e=wn(12,i,n,f|2),e.elementType=k,e.lanes=d,e;case ce:return e=wn(13,i,n,f),e.elementType=ce,e.lanes=d,e;case le:return e=wn(19,i,n,f),e.elementType=le,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:v=10;break e;case W:v=9;break e;case se:v=11;break e;case M:v=14;break e;case w:v=16,l=null;break e}v=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=wn(v,i,n,f),n.elementType=e,n.type=l,n.lanes=d,n}function _s(e,n,i,l){return e=wn(7,e,l,n),e.lanes=i,e}function sf(e,n,i){return e=wn(6,e,null,n),e.lanes=i,e}function Um(e){var n=wn(18,null,null,0);return n.stateNode=e,n}function rf(e,n,i){return n=wn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var zm=new WeakMap;function Bn(e,n){if(typeof e=="object"&&e!==null){var i=zm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Tt(n)},zm.set(e,n),n)}return{value:e,source:n,stack:Tt(n)}}var or=[],cr=0,Wo=null,_l=0,Un=[],zn=0,_i=null,Na=1,Ra="";function Fa(e,n){or[cr++]=_l,or[cr++]=Wo,Wo=e,_l=n}function Pm(e,n,i){Un[zn++]=Na,Un[zn++]=Ra,Un[zn++]=_i,_i=e;var l=Na;e=Ra;var f=32-wt(l)-1;l&=~(1<<f),i+=1;var d=32-wt(n)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Na=1<<32-wt(n)+f|i<<f|l,Ra=d+e}else Na=1<<d|i<<f|l,Ra=e}function lf(e){e.return!==null&&(Fa(e,1),Pm(e,1,0))}function of(e){for(;e===Wo;)Wo=or[--cr],or[cr]=null,_l=or[--cr],or[cr]=null;for(;e===_i;)_i=Un[--zn],Un[zn]=null,Ra=Un[--zn],Un[zn]=null,Na=Un[--zn],Un[zn]=null}function Gm(e,n){Un[zn++]=Na,Un[zn++]=Ra,Un[zn++]=_i,Na=n.id,Ra=n.overflow,_i=e}var Jt=null,yt=null,Xe=!1,xi=null,Pn=!1,cf=Error(s(519));function Ti(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(Bn(n,e)),cf}function qm(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[Dt]=e,n[Ft]=l,i){case"dialog":ze("cancel",n),ze("close",n);break;case"iframe":case"object":case"embed":ze("load",n);break;case"video":case"audio":for(i=0;i<ql.length;i++)ze(ql[i],n);break;case"source":ze("error",n);break;case"img":case"image":case"link":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"input":ze("invalid",n),Do(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ze("invalid",n);break;case"textarea":ze("invalid",n),di(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||rg(n.textContent,i)?(l.popover!=null&&(ze("beforetoggle",n),ze("toggle",n)),l.onScroll!=null&&ze("scroll",n),l.onScrollEnd!=null&&ze("scrollend",n),l.onClick!=null&&(n.onclick=Wn),n=!0):n=!1,n||Ti(e,!0)}function Hm(e){for(Jt=e.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Jt=Jt.return}}function ur(e){if(e!==Jt)return!1;if(!Xe)return Hm(e),Xe=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ch(e.type,e.memoizedProps)),i=!i),i&&yt&&Ti(e),Hm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));yt=pg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));yt=pg(e)}else n===27?(n=yt,ki(e.type)?(e=Dh,Dh=null,yt=e):yt=n):yt=Jt?qn(e.stateNode.nextSibling):null;return!0}function xs(){yt=Jt=null,Xe=!1}function uf(){var e=xi;return e!==null&&(vn===null?vn=e:vn.push.apply(vn,e),xi=null),e}function xl(e){xi===null?xi=[e]:xi.push(e)}var ff=j(null),Ts=null,Qa=null;function Ei(e,n,i){ue(ff,n._currentValue),n._currentValue=i}function Xa(e){e._currentValue=ff.current,ae(ff)}function hf(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function df(e,n,i,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=f;for(var D=0;D<n.length;D++)if(E.context===n[D]){d.lanes|=i,E=d.alternate,E!==null&&(E.lanes|=i),hf(d.return,i,e),l||(v=null);break e}d=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=i,d=v.alternate,d!==null&&(d.lanes|=i),hf(v,i,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function fr(e,n,i,l){e=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=f.type;Sn(f.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(f===he.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Yl):e=[Yl])}f=f.return}e!==null&&df(n,e,i,l),n.flags|=262144}function ec(e){for(e=e.firstContext;e!==null;){if(!Sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Es(e){Ts=e,Qa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Fm(Ts,e)}function tc(e,n){return Ts===null&&Es(e),Fm(e,n)}function Fm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Qa===null){if(e===null)throw Error(s(308));Qa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Qa=Qa.next=n;return i}var Mb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Ib=r.unstable_scheduleCallback,Db=r.unstable_NormalPriority,jt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mf(){return{controller:new Mb,data:new Map,refCount:0}}function Tl(e){e.refCount--,e.refCount===0&&Ib(Db,function(){e.controller.abort()})}var El=null,pf=0,hr=0,dr=null;function Ob(e,n){if(El===null){var i=El=[];pf=0,hr=vh(),dr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return pf++,n.then(Qm,Qm),n}function Qm(){if(--pf===0&&El!==null){dr!==null&&(dr.status="fulfilled");var e=El;El=null,hr=0,dr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Vb(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var Xm=X.S;X.S=function(e,n){Mp=Mt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ob(e,n),Xm!==null&&Xm(e,n)};var Ss=j(null);function gf(){var e=Ss.current;return e!==null?e:mt.pooledCache}function nc(e,n){n===null?ue(Ss,Ss.current):ue(Ss,n.pool)}function Ym(){var e=gf();return e===null?null:{parent:jt._currentValue,pool:e}}var mr=Error(s(460)),yf=Error(s(474)),ac=Error(s(542)),ic={then:function(){}};function Km(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $m(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Wn,Wn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jm(e),e;default:if(typeof n.status=="string")n.then(Wn,Wn);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jm(e),e}throw As=n,mr}}function ws(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(As=i,mr):i}}var As=null;function Zm(){if(As===null)throw Error(s(459));var e=As;return As=null,e}function Jm(e){if(e===mr||e===ac)throw Error(s(483))}var pr=null,Sl=0;function sc(e){var n=Sl;return Sl+=1,pr===null&&(pr=[]),$m(pr,e,n)}function wl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function rc(e,n){throw n.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Wm(e){function n(P,L){if(e){var H=P.deletions;H===null?(P.deletions=[L],P.flags|=16):H.push(L)}}function i(P,L){if(!e)return null;for(;L!==null;)n(P,L),L=L.sibling;return null}function l(P){for(var L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function f(P,L){return P=Ha(P,L),P.index=0,P.sibling=null,P}function d(P,L,H){return P.index=H,e?(H=P.alternate,H!==null?(H=H.index,H<L?(P.flags|=67108866,L):H):(P.flags|=67108866,L)):(P.flags|=1048576,L)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,L,H,J){return L===null||L.tag!==6?(L=sf(H,P.mode,J),L.return=P,L):(L=f(L,H),L.return=P,L)}function D(P,L,H,J){var we=H.type;return we===q?Z(P,L,H.props.children,J,H.key):L!==null&&(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&ws(we)===L.type)?(L=f(L,H.props),wl(L,H),L.return=P,L):(L=Jo(H.type,H.key,H.props,null,P.mode,J),wl(L,H),L.return=P,L)}function F(P,L,H,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=rf(H,P.mode,J),L.return=P,L):(L=f(L,H.children||[]),L.return=P,L)}function Z(P,L,H,J,we){return L===null||L.tag!==7?(L=_s(H,P.mode,J,we),L.return=P,L):(L=f(L,H),L.return=P,L)}function ee(P,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=sf(""+L,P.mode,H),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return H=Jo(L.type,L.key,L.props,null,P.mode,H),wl(H,L),H.return=P,H;case V:return L=rf(L,P.mode,H),L.return=P,L;case w:return L=ws(L),ee(P,L,H)}if(tt(L)||B(L))return L=_s(L,P.mode,H,null),L.return=P,L;if(typeof L.then=="function")return ee(P,sc(L),H);if(L.$$typeof===$)return ee(P,tc(P,L),H);rc(P,L)}return null}function Q(P,L,H,J){var we=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:E(P,L,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===we?D(P,L,H,J):null;case V:return H.key===we?F(P,L,H,J):null;case w:return H=ws(H),Q(P,L,H,J)}if(tt(H)||B(H))return we!==null?null:Z(P,L,H,J,null);if(typeof H.then=="function")return Q(P,L,sc(H),J);if(H.$$typeof===$)return Q(P,L,tc(P,H),J);rc(P,H)}return null}function K(P,L,H,J,we){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return P=P.get(H)||null,E(L,P,""+J,we);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case I:return P=P.get(J.key===null?H:J.key)||null,D(L,P,J,we);case V:return P=P.get(J.key===null?H:J.key)||null,F(L,P,J,we);case w:return J=ws(J),K(P,L,H,J,we)}if(tt(J)||B(J))return P=P.get(H)||null,Z(L,P,J,we,null);if(typeof J.then=="function")return K(P,L,H,sc(J),we);if(J.$$typeof===$)return K(P,L,H,tc(L,J),we);rc(L,J)}return null}function _e(P,L,H,J){for(var we=null,We=null,Ee=L,ke=L=0,He=null;Ee!==null&&ke<H.length;ke++){Ee.index>ke?(He=Ee,Ee=null):He=Ee.sibling;var et=Q(P,Ee,H[ke],J);if(et===null){Ee===null&&(Ee=He);break}e&&Ee&&et.alternate===null&&n(P,Ee),L=d(et,L,ke),We===null?we=et:We.sibling=et,We=et,Ee=He}if(ke===H.length)return i(P,Ee),Xe&&Fa(P,ke),we;if(Ee===null){for(;ke<H.length;ke++)Ee=ee(P,H[ke],J),Ee!==null&&(L=d(Ee,L,ke),We===null?we=Ee:We.sibling=Ee,We=Ee);return Xe&&Fa(P,ke),we}for(Ee=l(Ee);ke<H.length;ke++)He=K(Ee,P,ke,H[ke],J),He!==null&&(e&&He.alternate!==null&&Ee.delete(He.key===null?ke:He.key),L=d(He,L,ke),We===null?we=He:We.sibling=He,We=He);return e&&Ee.forEach(function(Pi){return n(P,Pi)}),Xe&&Fa(P,ke),we}function Re(P,L,H,J){if(H==null)throw Error(s(151));for(var we=null,We=null,Ee=L,ke=L=0,He=null,et=H.next();Ee!==null&&!et.done;ke++,et=H.next()){Ee.index>ke?(He=Ee,Ee=null):He=Ee.sibling;var Pi=Q(P,Ee,et.value,J);if(Pi===null){Ee===null&&(Ee=He);break}e&&Ee&&Pi.alternate===null&&n(P,Ee),L=d(Pi,L,ke),We===null?we=Pi:We.sibling=Pi,We=Pi,Ee=He}if(et.done)return i(P,Ee),Xe&&Fa(P,ke),we;if(Ee===null){for(;!et.done;ke++,et=H.next())et=ee(P,et.value,J),et!==null&&(L=d(et,L,ke),We===null?we=et:We.sibling=et,We=et);return Xe&&Fa(P,ke),we}for(Ee=l(Ee);!et.done;ke++,et=H.next())et=K(Ee,P,ke,et.value,J),et!==null&&(e&&et.alternate!==null&&Ee.delete(et.key===null?ke:et.key),L=d(et,L,ke),We===null?we=et:We.sibling=et,We=et);return e&&Ee.forEach(function(F_){return n(P,F_)}),Xe&&Fa(P,ke),we}function ht(P,L,H,J){if(typeof H=="object"&&H!==null&&H.type===q&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:e:{for(var we=H.key;L!==null;){if(L.key===we){if(we=H.type,we===q){if(L.tag===7){i(P,L.sibling),J=f(L,H.props.children),J.return=P,P=J;break e}}else if(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&ws(we)===L.type){i(P,L.sibling),J=f(L,H.props),wl(J,H),J.return=P,P=J;break e}i(P,L);break}else n(P,L);L=L.sibling}H.type===q?(J=_s(H.props.children,P.mode,J,H.key),J.return=P,P=J):(J=Jo(H.type,H.key,H.props,null,P.mode,J),wl(J,H),J.return=P,P=J)}return v(P);case V:e:{for(we=H.key;L!==null;){if(L.key===we)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){i(P,L.sibling),J=f(L,H.children||[]),J.return=P,P=J;break e}else{i(P,L);break}else n(P,L);L=L.sibling}J=rf(H,P.mode,J),J.return=P,P=J}return v(P);case w:return H=ws(H),ht(P,L,H,J)}if(tt(H))return _e(P,L,H,J);if(B(H)){if(we=B(H),typeof we!="function")throw Error(s(150));return H=we.call(H),Re(P,L,H,J)}if(typeof H.then=="function")return ht(P,L,sc(H),J);if(H.$$typeof===$)return ht(P,L,tc(P,H),J);rc(P,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(i(P,L.sibling),J=f(L,H),J.return=P,P=J):(i(P,L),J=sf(H,P.mode,J),J.return=P,P=J),v(P)):i(P,L)}return function(P,L,H,J){try{Sl=0;var we=ht(P,L,H,J);return pr=null,we}catch(Ee){if(Ee===mr||Ee===ac)throw Ee;var We=wn(29,Ee,null,P.mode);return We.lanes=J,We.return=P,We}finally{}}}var Cs=Wm(!0),e0=Wm(!1),Si=!1;function vf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=Zo(e),Lm(e,null,i),n}return $o(e,l,n,i),Zo(e)}function Al(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Wr(e,i)}}function _f(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,i=i.next}while(i!==null);d===null?f=d=n:d=d.next=n}else f=d=n;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var xf=!1;function Cl(){if(xf){var e=dr;if(e!==null)throw e}}function Nl(e,n,i,l){xf=!1;var f=e.updateQueue;Si=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,F=D.next;D.next=null,v===null?d=F:v.next=F,v=D;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==v&&(E===null?Z.firstBaseUpdate=F:E.next=F,Z.lastBaseUpdate=D))}if(d!==null){var ee=f.baseState;v=0,Z=F=D=null,E=d;do{var Q=E.lane&-536870913,K=Q!==E.lane;if(K?(qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===hr&&(xf=!0),Z!==null&&(Z=Z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var _e=e,Re=E;Q=n;var ht=i;switch(Re.tag){case 1:if(_e=Re.payload,typeof _e=="function"){ee=_e.call(ht,ee,Q);break e}ee=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Re.payload,Q=typeof _e=="function"?_e.call(ht,ee,Q):_e,Q==null)break e;ee=T({},ee,Q);break e;case 2:Si=!0}}Q=E.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?(F=Z=K,D=ee):Z=Z.next=K,v|=Q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;K=E,E=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Z===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=Z,d===null&&(f.shared.lanes=0),Ii|=v,e.lanes=v,e.memoizedState=ee}}function t0(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function n0(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)t0(i[e],n)}var gr=j(null),lc=j(0);function a0(e,n){e=ni,ue(lc,e),ue(gr,n),ni=e|n.baseLanes}function Tf(){ue(lc,ni),ue(gr,gr.current)}function Ef(){ni=lc.current,ae(gr),ae(lc)}var An=j(null),Gn=null;function Ci(e){var n=e.alternate;ue(Ct,Ct.current&1),ue(An,e),Gn===null&&(n===null||gr.current!==null||n.memoizedState!==null)&&(Gn=e)}function Sf(e){ue(Ct,Ct.current),ue(An,e),Gn===null&&(Gn=e)}function i0(e){e.tag===22?(ue(Ct,Ct.current),ue(An,e),Gn===null&&(Gn=e)):Ni()}function Ni(){ue(Ct,Ct.current),ue(An,An.current)}function Cn(e){ae(An),Gn===e&&(Gn=null),ae(Ct)}var Ct=j(0);function oc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Mh(i)||Ih(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ya=0,je=null,ut=null,kt=null,cc=!1,yr=!1,Ns=!1,uc=0,Rl=0,vr=null,jb=0;function Et(){throw Error(s(321))}function wf(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!Sn(e[i],n[i]))return!1;return!0}function Af(e,n,i,l,f,d){return Ya=d,je=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=e===null||e.memoizedState===null?P0:Pf,Ns=!1,d=i(l,f),Ns=!1,yr&&(d=r0(n,i,l,f)),s0(e),d}function s0(e){X.H=Dl;var n=ut!==null&&ut.next!==null;if(Ya=0,kt=ut=je=null,cc=!1,Rl=0,vr=null,n)throw Error(s(300));e===null||Lt||(e=e.dependencies,e!==null&&ec(e)&&(Lt=!0))}function r0(e,n,i,l){je=e;var f=0;do{if(yr&&(vr=null),Rl=0,yr=!1,25<=f)throw Error(s(301));if(f+=1,kt=ut=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=G0,d=n(i,l)}while(yr);return d}function kb(){var e=X.H,n=e.useState()[0];return n=typeof n.then=="function"?Ml(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(je.flags|=1024),n}function Cf(){var e=uc!==0;return uc=0,e}function Nf(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Rf(e){if(cc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}cc=!1}Ya=0,kt=ut=je=null,yr=!1,Rl=uc=0,vr=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?je.memoizedState=kt=e:kt=kt.next=e,kt}function Nt(){if(ut===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=kt===null?je.memoizedState:kt.next;if(n!==null)kt=n,ut=e;else{if(e===null)throw je.alternate===null?Error(s(467)):Error(s(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},kt===null?je.memoizedState=kt=e:kt=kt.next=e}return kt}function fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(e){var n=Rl;return Rl+=1,vr===null&&(vr=[]),e=$m(vr,e,n),n=je,(kt===null?n.memoizedState:kt.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?P0:Pf),e}function hc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ml(e);if(e.$$typeof===$)return Wt(e)}throw Error(s(438,String(e)))}function Mf(e){var n=null,i=je.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=fc(),je.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=N;return n.index++,i}function Ka(e,n){return typeof n=="function"?n(e):n}function dc(e){var n=Nt();return If(n,ut,e)}function If(e,n,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}n.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{n=f.next;var E=v=null,D=null,F=n,Z=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(qe&ee)===ee:(Ya&ee)===ee){var Q=F.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===hr&&(Z=!0);else if((Ya&Q)===Q){F=F.next,Q===hr&&(Z=!0);continue}else ee={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(E=D=ee,v=d):D=D.next=ee,je.lanes|=Q,Ii|=Q;ee=F.action,Ns&&i(d,ee),d=F.hasEagerState?F.eagerState:i(d,ee)}else Q={lane:ee,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(E=D=Q,v=d):D=D.next=Q,je.lanes|=ee,Ii|=ee;F=F.next}while(F!==null&&F!==n);if(D===null?v=d:D.next=E,!Sn(d,e.memoizedState)&&(Lt=!0,Z&&(i=dr,i!==null)))throw i;e.memoizedState=d,e.baseState=v,e.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Df(e){var n=Nt(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,f=i.pending,d=n.memoizedState;if(f!==null){i.pending=null;var v=f=f.next;do d=e(d,v.action),v=v.next;while(v!==f);Sn(d,n.memoizedState)||(Lt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),i.lastRenderedState=d}return[d,l]}function l0(e,n,i){var l=je,f=Nt(),d=Xe;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=n();var v=!Sn((ut||f).memoizedState,i);if(v&&(f.memoizedState=i,Lt=!0),f=f.queue,jf(u0.bind(null,l,f,e),[e]),f.getSnapshot!==n||v||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,br(9,{destroy:void 0},c0.bind(null,l,f,i,n),null),mt===null)throw Error(s(349));d||(Ya&127)!==0||o0(l,n,i)}return i}function o0(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=je.updateQueue,n===null?(n=fc(),je.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function c0(e,n,i,l){n.value=i,n.getSnapshot=l,f0(n)&&h0(e)}function u0(e,n,i){return i(function(){f0(n)&&h0(e)})}function f0(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!Sn(e,i)}catch{return!0}}function h0(e){var n=bs(e,2);n!==null&&bn(n,e,2)}function Of(e){var n=hn();if(typeof e=="function"){var i=e;if(e=i(),Ns){Dn(!0);try{i()}finally{Dn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:e},n}function d0(e,n,i,l){return e.baseState=i,If(e,ut,typeof l=="function"?l:Ka)}function Lb(e,n,i,l,f){if(gc(e))throw Error(s(485));if(e=n.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};X.T!==null?i(!0):d.isTransition=!1,l(d),i=n.pending,i===null?(d.next=n.pending=d,m0(n,d)):(d.next=i.next,n.pending=i.next=d)}}function m0(e,n){var i=n.action,l=n.payload,f=e.state;if(n.isTransition){var d=X.T,v={};X.T=v;try{var E=i(f,l),D=X.S;D!==null&&D(v,E),p0(e,n,E)}catch(F){Vf(e,n,F)}finally{d!==null&&v.types!==null&&(d.types=v.types),X.T=d}}else try{d=i(f,l),p0(e,n,d)}catch(F){Vf(e,n,F)}}function p0(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){g0(e,n,l)},function(l){return Vf(e,n,l)}):g0(e,n,i)}function g0(e,n,i){n.status="fulfilled",n.value=i,y0(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,m0(e,i)))}function Vf(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,y0(n),n=n.next;while(n!==l)}e.action=null}function y0(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function v0(e,n){return n}function b0(e,n){if(Xe){var i=mt.formState;if(i!==null){e:{var l=je;if(Xe){if(yt){t:{for(var f=yt,d=Pn;f.nodeType!==8;){if(!d){f=null;break t}if(f=qn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){yt=qn(f.nextSibling),l=f.data==="F!";break e}}Ti(l)}l=!1}l&&(n=i[0])}}return i=hn(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v0,lastRenderedState:n},i.queue=l,i=B0.bind(null,je,l),l.dispatch=i,l=Of(!1),d=zf.bind(null,je,!1,l.queue),l=hn(),f={state:n,dispatch:null,action:e,pending:null},l.queue=f,i=Lb.bind(null,je,f,d,i),f.dispatch=i,l.memoizedState=e,[n,i,!1]}function _0(e){var n=Nt();return x0(n,ut,e)}function x0(e,n,i){if(n=If(e,n,v0)[0],e=dc(Ka)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Ml(n)}catch(v){throw v===mr?ac:v}else l=n;n=Nt();var f=n.queue,d=f.dispatch;return i!==n.memoizedState&&(je.flags|=2048,br(9,{destroy:void 0},Bb.bind(null,f,i),null)),[l,d,e]}function Bb(e,n){e.action=n}function T0(e){var n=Nt(),i=ut;if(i!==null)return x0(n,i,e);Nt(),n=n.memoizedState,i=Nt();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function br(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=je.updateQueue,n===null&&(n=fc(),je.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function E0(){return Nt().memoizedState}function mc(e,n,i,l){var f=hn();je.flags|=e,f.memoizedState=br(1|n,{destroy:void 0},i,l===void 0?null:l)}function pc(e,n,i,l){var f=Nt();l=l===void 0?null:l;var d=f.memoizedState.inst;ut!==null&&l!==null&&wf(l,ut.memoizedState.deps)?f.memoizedState=br(n,d,i,l):(je.flags|=e,f.memoizedState=br(1|n,d,i,l))}function S0(e,n){mc(8390656,8,e,n)}function jf(e,n){pc(2048,8,e,n)}function Ub(e){je.flags|=4;var n=je.updateQueue;if(n===null)n=fc(),je.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function w0(e){var n=Nt().memoizedState;return Ub({ref:n,nextImpl:e}),function(){if((at&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function A0(e,n){return pc(4,2,e,n)}function C0(e,n){return pc(4,4,e,n)}function N0(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function R0(e,n,i){i=i!=null?i.concat([e]):null,pc(4,4,N0.bind(null,n,e),i)}function kf(){}function M0(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&wf(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function I0(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&wf(n,l[1]))return l[0];if(l=e(),Ns){Dn(!0);try{e()}finally{Dn(!1)}}return i.memoizedState=[l,n],l}function Lf(e,n,i){return i===void 0||(Ya&1073741824)!==0&&(qe&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Dp(),je.lanes|=e,Ii|=e,i)}function D0(e,n,i,l){return Sn(i,n)?i:gr.current!==null?(e=Lf(e,i,l),Sn(e,n)||(Lt=!0),e):(Ya&42)===0||(Ya&1073741824)!==0&&(qe&261930)===0?(Lt=!0,e.memoizedState=i):(e=Dp(),je.lanes|=e,Ii|=e,n)}function O0(e,n,i,l,f){var d=oe.p;oe.p=d!==0&&8>d?d:8;var v=X.T,E={};X.T=E,zf(e,!1,n,i);try{var D=f(),F=X.S;if(F!==null&&F(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=Vb(D,l);Il(e,n,Z,Mn(e))}else Il(e,n,l,Mn(e))}catch(ee){Il(e,n,{then:function(){},status:"rejected",reason:ee},Mn())}finally{oe.p=d,v!==null&&E.types!==null&&(v.types=E.types),X.T=v}}function zb(){}function Bf(e,n,i,l){if(e.tag!==5)throw Error(s(476));var f=V0(e).queue;O0(e,f,n,xe,i===null?zb:function(){return j0(e),i(l)})}function V0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:xe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function j0(e){var n=V0(e);n.next===null&&(n=e.alternate.memoizedState),Il(e,n.next.queue,{},Mn())}function Uf(){return Wt(Yl)}function k0(){return Nt().memoizedState}function L0(){return Nt().memoizedState}function Pb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Mn();e=wi(i);var l=Ai(n,e,i);l!==null&&(bn(l,n,i),Al(l,n,i)),n={cache:mf()},e.payload=n;return}n=n.return}}function Gb(e,n,i){var l=Mn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},gc(e)?U0(n,i):(i=nf(e,n,i,l),i!==null&&(bn(i,e,l),z0(i,n,l)))}function B0(e,n,i){var l=Mn();Il(e,n,i,l)}function Il(e,n,i,l){var f={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(gc(e))U0(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var v=n.lastRenderedState,E=d(v,i);if(f.hasEagerState=!0,f.eagerState=E,Sn(E,v))return $o(e,n,f,0),mt===null&&Ko(),!1}catch{}finally{}if(i=nf(e,n,f,l),i!==null)return bn(i,e,l),z0(i,n,l),!0}return!1}function zf(e,n,i,l){if(l={lane:2,revertLane:vh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gc(e)){if(n)throw Error(s(479))}else n=nf(e,i,l,2),n!==null&&bn(n,e,2)}function gc(e){var n=e.alternate;return e===je||n!==null&&n===je}function U0(e,n){yr=cc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function z0(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Wr(e,i)}}var Dl={readContext:Wt,use:hc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Dl.useEffectEvent=Et;var P0={readContext:Wt,use:hc,useCallback:function(e,n){return hn().memoizedState=[e,n===void 0?null:n],e},useContext:Wt,useEffect:S0,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,mc(4194308,4,N0.bind(null,n,e),i)},useLayoutEffect:function(e,n){return mc(4194308,4,e,n)},useInsertionEffect:function(e,n){mc(4,2,e,n)},useMemo:function(e,n){var i=hn();n=n===void 0?null:n;var l=e();if(Ns){Dn(!0);try{e()}finally{Dn(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=hn();if(i!==void 0){var f=i(n);if(Ns){Dn(!0);try{i(n)}finally{Dn(!1)}}}else f=n;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Gb.bind(null,je,e),[l.memoizedState,e]},useRef:function(e){var n=hn();return e={current:e},n.memoizedState=e},useState:function(e){e=Of(e);var n=e.queue,i=B0.bind(null,je,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:kf,useDeferredValue:function(e,n){var i=hn();return Lf(i,e,n)},useTransition:function(){var e=Of(!1);return e=O0.bind(null,je,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=je,f=hn();if(Xe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),mt===null)throw Error(s(349));(qe&127)!==0||o0(l,n,i)}f.memoizedState=i;var d={value:i,getSnapshot:n};return f.queue=d,S0(u0.bind(null,l,d,e),[e]),l.flags|=2048,br(9,{destroy:void 0},c0.bind(null,l,d,i,n),null),i},useId:function(){var e=hn(),n=mt.identifierPrefix;if(Xe){var i=Ra,l=Na;i=(l&~(1<<32-wt(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=uc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=jb++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Uf,useFormState:b0,useActionState:b0,useOptimistic:function(e){var n=hn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=zf.bind(null,je,!0,i),i.dispatch=n,[e,n]},useMemoCache:Mf,useCacheRefresh:function(){return hn().memoizedState=Pb.bind(null,je)},useEffectEvent:function(e){var n=hn(),i={impl:e};return n.memoizedState=i,function(){if((at&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Pf={readContext:Wt,use:hc,useCallback:M0,useContext:Wt,useEffect:jf,useImperativeHandle:R0,useInsertionEffect:A0,useLayoutEffect:C0,useMemo:I0,useReducer:dc,useRef:E0,useState:function(){return dc(Ka)},useDebugValue:kf,useDeferredValue:function(e,n){var i=Nt();return D0(i,ut.memoizedState,e,n)},useTransition:function(){var e=dc(Ka)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Ml(e),n]},useSyncExternalStore:l0,useId:k0,useHostTransitionStatus:Uf,useFormState:_0,useActionState:_0,useOptimistic:function(e,n){var i=Nt();return d0(i,ut,e,n)},useMemoCache:Mf,useCacheRefresh:L0};Pf.useEffectEvent=w0;var G0={readContext:Wt,use:hc,useCallback:M0,useContext:Wt,useEffect:jf,useImperativeHandle:R0,useInsertionEffect:A0,useLayoutEffect:C0,useMemo:I0,useReducer:Df,useRef:E0,useState:function(){return Df(Ka)},useDebugValue:kf,useDeferredValue:function(e,n){var i=Nt();return ut===null?Lf(i,e,n):D0(i,ut.memoizedState,e,n)},useTransition:function(){var e=Df(Ka)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Ml(e),n]},useSyncExternalStore:l0,useId:k0,useHostTransitionStatus:Uf,useFormState:T0,useActionState:T0,useOptimistic:function(e,n){var i=Nt();return ut!==null?d0(i,ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:L0};G0.useEffectEvent=w0;function Gf(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:T({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var qf={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Mn(),f=wi(l);f.payload=n,i!=null&&(f.callback=i),n=Ai(e,f,l),n!==null&&(bn(n,e,l),Al(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Mn(),f=wi(l);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Ai(e,f,l),n!==null&&(bn(n,e,l),Al(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Mn(),l=wi(i);l.tag=2,n!=null&&(l.callback=n),n=Ai(e,l,i),n!==null&&(bn(n,e,i),Al(n,e,i))}};function q0(e,n,i,l,f,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):n.prototype&&n.prototype.isPureReactComponent?!vl(i,l)||!vl(f,d):!0}function H0(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&qf.enqueueReplaceState(n,n.state,null)}function Rs(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=T({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function F0(e){Yo(e)}function Q0(e){console.error(e)}function X0(e){Yo(e)}function yc(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Y0(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hf(e,n,i){return i=wi(i),i.tag=3,i.payload={element:null},i.callback=function(){yc(e,n)},i}function K0(e){return e=wi(e),e.tag=3,e}function $0(e,n,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Y0(n,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Y0(n,i,l),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function qb(e,n,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&fr(n,i,f,!0),i=An.current,i!==null){switch(i.tag){case 31:case 13:return Gn===null?Rc():i.alternate===null&&St===0&&(St=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===ic?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),ph(e,l,f)),!1;case 22:return i.flags|=65536,l===ic?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),ph(e,l,f)),!1}throw Error(s(435,i.tag))}return ph(e,l,f),Rc(),!1}if(Xe)return n=An.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==cf&&(e=Error(s(422),{cause:l}),xl(Bn(e,i)))):(l!==cf&&(n=Error(s(423),{cause:l}),xl(Bn(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Bn(l,i),f=Hf(e.stateNode,l,f),_f(e,f),St!==4&&(St=2)),!1;var d=Error(s(520),{cause:l});if(d=Bn(d,i),zl===null?zl=[d]:zl.push(d),St!==4&&(St=2),n===null)return!0;l=Bn(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=Hf(i.stateNode,l,e),_f(i,e),!1;case 1:if(n=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Di===null||!Di.has(d))))return i.flags|=65536,f&=-f,i.lanes|=f,f=K0(f),$0(f,e,i,l),_f(i,f),!1}i=i.return}while(i!==null);return!1}var Ff=Error(s(461)),Lt=!1;function en(e,n,i,l){n.child=e===null?e0(n,null,i,l):Cs(n,e.child,i,l)}function Z0(e,n,i,l,f){i=i.render;var d=n.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Es(n),l=Af(e,n,i,v,d,f),E=Cf(),e!==null&&!Lt?(Nf(e,n,f),$a(e,n,f)):(Xe&&E&&lf(n),n.flags|=1,en(e,n,l,f),n.child)}function J0(e,n,i,l,f){if(e===null){var d=i.type;return typeof d=="function"&&!af(d)&&d.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=d,W0(e,n,d,l,f)):(e=Jo(i.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!Wf(e,f)){var v=d.memoizedProps;if(i=i.compare,i=i!==null?i:vl,i(v,l)&&e.ref===n.ref)return $a(e,n,f)}return n.flags|=1,e=Ha(d,l),e.ref=n.ref,e.return=n,n.child=e}function W0(e,n,i,l,f){if(e!==null){var d=e.memoizedProps;if(vl(d,l)&&e.ref===n.ref)if(Lt=!1,n.pendingProps=l=d,Wf(e,f))(e.flags&131072)!==0&&(Lt=!0);else return n.lanes=e.lanes,$a(e,n,f)}return Qf(e,n,i,l,f)}function ep(e,n,i,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(l=n.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,n.child=null;return tp(e,n,d,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&nc(n,d!==null?d.cachePool:null),d!==null?a0(n,d):Tf(),i0(n);else return l=n.lanes=536870912,tp(e,n,d!==null?d.baseLanes|i:i,i,l)}else d!==null?(nc(n,d.cachePool),a0(n,d),Ni(),n.memoizedState=null):(e!==null&&nc(n,null),Tf(),Ni());return en(e,n,f,i),n.child}function Ol(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function tp(e,n,i,l,f){var d=gf();return d=d===null?null:{parent:jt._currentValue,pool:d},n.memoizedState={baseLanes:i,cachePool:d},e!==null&&nc(n,null),Tf(),i0(n),e!==null&&fr(e,n,l,!0),n.childLanes=f,null}function vc(e,n){return n=_c({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function np(e,n,i){return Cs(n,e.child,null,i),e=vc(n,n.pendingProps),e.flags|=2,Cn(n),n.memoizedState=null,e}function Hb(e,n,i){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Xe){if(l.mode==="hidden")return e=vc(n,l),n.lanes=536870912,Ol(null,e);if(Sf(n),(e=yt)?(e=mg(e,Pn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_i!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Um(e),i.return=n,n.child=i,Jt=n,yt=null)):e=null,e===null)throw Ti(n);return n.lanes=536870912,null}return vc(n,l)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(Sf(n),f)if(n.flags&256)n.flags&=-257,n=np(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Lt||fr(e,n,i,!1),f=(i&e.childLanes)!==0,Lt||f){if(l=mt,l!==null&&(v=el(l,i),v!==0&&v!==d.retryLane))throw d.retryLane=v,bs(e,v),bn(l,e,v),Ff;Rc(),n=np(e,n,i)}else e=d.treeContext,yt=qn(v.nextSibling),Jt=n,Xe=!0,xi=null,Pn=!1,e!==null&&Gm(n,e),n=vc(n,l),n.flags|=4096;return n}return e=Ha(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function bc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Qf(e,n,i,l,f){return Es(n),i=Af(e,n,i,l,void 0,f),l=Cf(),e!==null&&!Lt?(Nf(e,n,f),$a(e,n,f)):(Xe&&l&&lf(n),n.flags|=1,en(e,n,i,f),n.child)}function ap(e,n,i,l,f,d){return Es(n),n.updateQueue=null,i=r0(n,l,i,f),s0(e),l=Cf(),e!==null&&!Lt?(Nf(e,n,d),$a(e,n,d)):(Xe&&l&&lf(n),n.flags|=1,en(e,n,i,d),n.child)}function ip(e,n,i,l,f){if(Es(n),n.stateNode===null){var d=lr,v=i.contextType;typeof v=="object"&&v!==null&&(d=Wt(v)),d=new i(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=qf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},vf(n),v=i.contextType,d.context=typeof v=="object"&&v!==null?Wt(v):lr,d.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Gf(n,i,v,l),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&qf.enqueueReplaceState(d,d.state,null),Nl(n,l,d,f),Cl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var E=n.memoizedProps,D=Rs(i,E);d.props=D;var F=d.context,Z=i.contextType;v=lr,typeof Z=="object"&&Z!==null&&(v=Wt(Z));var ee=i.getDerivedStateFromProps;Z=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||F!==v)&&H0(n,d,l,v),Si=!1;var Q=n.memoizedState;d.state=Q,Nl(n,l,d,f),Cl(),F=n.memoizedState,E||Q!==F||Si?(typeof ee=="function"&&(Gf(n,i,ee,l),F=n.memoizedState),(D=Si||q0(n,i,D,l,Q,F,v))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),d.props=l,d.state=F,d.context=v,l=D):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,bf(e,n),v=n.memoizedProps,Z=Rs(i,v),d.props=Z,ee=n.pendingProps,Q=d.context,F=i.contextType,D=lr,typeof F=="object"&&F!==null&&(D=Wt(F)),E=i.getDerivedStateFromProps,(F=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ee||Q!==D)&&H0(n,d,l,D),Si=!1,Q=n.memoizedState,d.state=Q,Nl(n,l,d,f),Cl();var K=n.memoizedState;v!==ee||Q!==K||Si||e!==null&&e.dependencies!==null&&ec(e.dependencies)?(typeof E=="function"&&(Gf(n,i,E,l),K=n.memoizedState),(Z=Si||q0(n,i,Z,l,Q,K,D)||e!==null&&e.dependencies!==null&&ec(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,D)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),d.props=l,d.state=K,d.context=D,l=Z):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,bc(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Cs(n,e.child,null,f),n.child=Cs(n,null,i,f)):en(e,n,i,f),n.memoizedState=d.state,e=n.child):e=$a(e,n,f),e}function sp(e,n,i,l){return xs(),n.flags|=256,en(e,n,i,l),n.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(e){return{baseLanes:e,cachePool:Ym()}}function Kf(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Rn),e}function rp(e,n,i){var l=n.pendingProps,f=!1,d=(n.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),v&&(f=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Xe){if(f?Ci(n):Ni(),(e=yt)?(e=mg(e,Pn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_i!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Um(e),i.return=n,n.child=i,Jt=n,yt=null)):e=null,e===null)throw Ti(n);return Ih(e)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Ni(),f=n.mode,E=_c({mode:"hidden",children:E},f),l=_s(l,f,i,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=Yf(i),l.childLanes=Kf(e,v,i),n.memoizedState=Xf,Ol(null,l)):(Ci(n),$f(n,E))}var D=e.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(d)n.flags&256?(Ci(n),n.flags&=-257,n=Zf(e,n,i)):n.memoizedState!==null?(Ni(),n.child=e.child,n.flags|=128,n=null):(Ni(),E=l.fallback,f=n.mode,l=_c({mode:"visible",children:l.children},f),E=_s(E,f,i,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,Cs(n,e.child,null,i),l=n.child,l.memoizedState=Yf(i),l.childLanes=Kf(e,v,i),n.memoizedState=Xf,n=Ol(null,l));else if(Ci(n),Ih(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var F=v.dgst;v=F,l=Error(s(419)),l.stack="",l.digest=v,xl({value:l,source:null,stack:null}),n=Zf(e,n,i)}else if(Lt||fr(e,n,i,!1),v=(i&e.childLanes)!==0,Lt||v){if(v=mt,v!==null&&(l=el(v,i),l!==0&&l!==D.retryLane))throw D.retryLane=l,bs(e,l),bn(v,e,l),Ff;Mh(E)||Rc(),n=Zf(e,n,i)}else Mh(E)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,yt=qn(E.nextSibling),Jt=n,Xe=!0,xi=null,Pn=!1,e!==null&&Gm(n,e),n=$f(n,l.children),n.flags|=4096);return n}return f?(Ni(),E=l.fallback,f=n.mode,D=e.child,F=D.sibling,l=Ha(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?E=Ha(F,E):(E=_s(E,f,i,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,Ol(null,l),l=n.child,E=e.child.memoizedState,E===null?E=Yf(i):(f=E.cachePool,f!==null?(D=jt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Ym(),E={baseLanes:E.baseLanes|i,cachePool:f}),l.memoizedState=E,l.childLanes=Kf(e,v,i),n.memoizedState=Xf,Ol(e.child,l)):(Ci(n),i=e.child,e=i.sibling,i=Ha(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=i,n.memoizedState=null,i)}function $f(e,n){return n=_c({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function _c(e,n){return e=wn(22,e,null,n),e.lanes=0,e}function Zf(e,n,i){return Cs(n,e.child,null,i),e=$f(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function lp(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),hf(e.return,n,i)}function Jf(e,n,i,l,f,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f,treeForkCount:d}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=i,v.tailMode=f,v.treeForkCount=d)}function op(e,n,i){var l=n.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=Ct.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,ue(Ct,v),en(e,n,l,i),l=Xe?_l:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lp(e,i,n);else if(e.tag===19)lp(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&oc(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),Jf(n,!1,f,i,d,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&oc(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}Jf(n,!0,i,null,d,l);break;case"together":Jf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function $a(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ii|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(fr(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=Ha(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Ha(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Wf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ec(e)))}function Fb(e,n,i){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),Ei(n,jt,e.memoizedState.cache),xs();break;case 27:case 5:de(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:Ei(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Sf(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ci(n),n.flags|=128,null):(i&n.child.childLanes)!==0?rp(e,n,i):(Ci(n),e=$a(e,n,i),e!==null?e.sibling:null);Ci(n);break;case 19:var f=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(fr(e,n,i,!1),l=(i&n.childLanes)!==0),f){if(l)return op(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,ep(e,n,i,n.pendingProps);case 24:Ei(n,jt,e.memoizedState.cache)}return $a(e,n,i)}function cp(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Lt=!0;else{if(!Wf(e,i)&&(n.flags&128)===0)return Lt=!1,Fb(e,n,i);Lt=(e.flags&131072)!==0}else Lt=!1,Xe&&(n.flags&1048576)!==0&&Pm(n,_l,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=ws(n.elementType),n.type=e,typeof e=="function")af(e)?(l=Rs(e,l),n.tag=1,n=ip(null,n,e,l,i)):(n.tag=0,n=Qf(null,n,e,l,i));else{if(e!=null){var f=e.$$typeof;if(f===se){n.tag=11,n=Z0(null,n,e,l,i);break e}else if(f===M){n.tag=14,n=J0(null,n,e,l,i);break e}}throw n=Be(e)||e,Error(s(306,n,""))}}return n;case 0:return Qf(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,f=Rs(l,n.pendingProps),ip(e,n,l,f,i);case 3:e:{if(be(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;f=d.element,bf(e,n),Nl(n,l,null,i);var v=n.memoizedState;if(l=v.cache,Ei(n,jt,l),l!==d.cache&&df(n,[jt],i,!0),Cl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=sp(e,n,l,i);break e}else if(l!==f){f=Bn(Error(s(424)),n),xl(f),n=sp(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(yt=qn(e.firstChild),Jt=n,Xe=!0,xi=null,Pn=!0,i=e0(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(xs(),l===f){n=$a(e,n,i);break e}en(e,n,l,i)}n=n.child}return n;case 26:return bc(e,n),e===null?(i=_g(n.type,null,n.pendingProps,null))?n.memoizedState=i:Xe||(i=n.type,e=n.pendingProps,l=kc(Ce.current).createElement(i),l[Dt]=n,l[Ft]=e,tn(l,i,e),Ot(l),n.stateNode=l):n.memoizedState=_g(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return de(n),e===null&&Xe&&(l=n.stateNode=yg(n.type,n.pendingProps,Ce.current),Jt=n,Pn=!0,f=yt,ki(n.type)?(Dh=f,yt=qn(l.firstChild)):yt=f),en(e,n,n.pendingProps.children,i),bc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Xe&&((f=l=yt)&&(l=x_(l,n.type,n.pendingProps,Pn),l!==null?(n.stateNode=l,Jt=n,yt=qn(l.firstChild),Pn=!1,f=!0):f=!1),f||Ti(n)),de(n),f=n.type,d=n.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,Ch(f,d)?l=null:v!==null&&Ch(f,v)&&(n.flags|=32),n.memoizedState!==null&&(f=Af(e,n,kb,null,null,i),Yl._currentValue=f),bc(e,n),en(e,n,l,i),n.child;case 6:return e===null&&Xe&&((e=i=yt)&&(i=T_(i,n.pendingProps,Pn),i!==null?(n.stateNode=i,Jt=n,yt=null,e=!0):e=!1),e||Ti(n)),null;case 13:return rp(e,n,i);case 4:return be(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Cs(n,null,l,i):en(e,n,l,i),n.child;case 11:return Z0(e,n,n.type,n.pendingProps,i);case 7:return en(e,n,n.pendingProps,i),n.child;case 8:return en(e,n,n.pendingProps.children,i),n.child;case 12:return en(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,Ei(n,n.type,l.value),en(e,n,l.children,i),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,Es(n),f=Wt(f),l=l(f),n.flags|=1,en(e,n,l,i),n.child;case 14:return J0(e,n,n.type,n.pendingProps,i);case 15:return W0(e,n,n.type,n.pendingProps,i);case 19:return op(e,n,i);case 31:return Hb(e,n,i);case 22:return ep(e,n,i,n.pendingProps);case 24:return Es(n),l=Wt(jt),e===null?(f=gf(),f===null&&(f=mt,d=mf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=i),f=d),n.memoizedState={parent:l,cache:f},vf(n),Ei(n,jt,f)):((e.lanes&i)!==0&&(bf(e,n),Nl(n,null,null,i),Cl()),f=e.memoizedState,d=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Ei(n,jt,l)):(l=d.cache,Ei(n,jt,l),l!==f.cache&&df(n,[jt],i,!0))),en(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Za(e){e.flags|=4}function eh(e,n,i,l,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(kp())e.flags|=8192;else throw As=ic,yf}else e.flags&=-16777217}function up(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wg(n))if(kp())e.flags|=8192;else throw As=ic,yf}function xc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Co():536870912,e.lanes|=n,Er|=n)}function Vl(e,n){if(!Xe)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function vt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function Qb(e,n,i){var l=n.pendingProps;switch(of(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(n),null;case 1:return vt(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Xa(jt),ye(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ur(n)?Za(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,uf())),vt(n),null;case 26:var f=n.type,d=n.memoizedState;return e===null?(Za(n),d!==null?(vt(n),up(n,d)):(vt(n),eh(n,f,null,l,i))):d?d!==e.memoizedState?(Za(n),vt(n),up(n,d)):(vt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Za(n),vt(n),eh(n,f,e,l,i)),null;case 27:if(Ne(n),i=Ce.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Za(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return vt(n),null}e=ge.current,ur(n)?qm(n):(e=yg(f,l,i),n.stateNode=e,Za(n))}return vt(n),null;case 5:if(Ne(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Za(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return vt(n),null}if(d=ge.current,ur(n))qm(n);else{var v=kc(Ce.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[Dt]=n,d[Ft]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=d;e:switch(tn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Za(n)}}return vt(n),eh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Za(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=Ce.current,ur(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,f=Jt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Dt]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||rg(e.nodeValue,i)),e||Ti(n,!0)}else e=kc(e).createTextNode(l),e[Dt]=n,n.stateNode=e}return vt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(l=ur(n),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Dt]=n}else xs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;vt(n),e=!1}else i=uf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(Cn(n),n):(Cn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return vt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=ur(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Dt]=n}else xs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;vt(n),f=!1}else f=uf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Cn(n),n):(Cn(n),null)}return Cn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),xc(n,n.updateQueue),vt(n),null);case 4:return ye(),e===null&&Th(n.stateNode.containerInfo),vt(n),null;case 10:return Xa(n.type),vt(n),null;case 19:if(ae(Ct),l=n.memoizedState,l===null)return vt(n),null;if(f=(n.flags&128)!==0,d=l.rendering,d===null)if(f)Vl(l,!1);else{if(St!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=oc(e),d!==null){for(n.flags|=128,Vl(l,!1),e=d.updateQueue,n.updateQueue=e,xc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Bm(i,e),i=i.sibling;return ue(Ct,Ct.current&1|2),Xe&&Fa(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Mt()>Ac&&(n.flags|=128,f=!0,Vl(l,!1),n.lanes=4194304)}else{if(!f)if(e=oc(d),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,xc(n,e),Vl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Xe)return vt(n),null}else 2*Mt()-l.renderingStartTime>Ac&&i!==536870912&&(n.flags|=128,f=!0,Vl(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Mt(),e.sibling=null,i=Ct.current,ue(Ct,f?i&1|2:i&1),Xe&&Fa(n,l.treeForkCount),e):(vt(n),null);case 22:case 23:return Cn(n),Ef(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(vt(n),n.subtreeFlags&6&&(n.flags|=8192)):vt(n),i=n.updateQueue,i!==null&&xc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&ae(Ss),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Xa(jt),vt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Xb(e,n){switch(of(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Xa(jt),ye(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ne(n),null;case 31:if(n.memoizedState!==null){if(Cn(n),n.alternate===null)throw Error(s(340));xs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Cn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));xs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ae(Ct),null;case 4:return ye(),null;case 10:return Xa(n.type),null;case 22:case 23:return Cn(n),Ef(),e!==null&&ae(Ss),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Xa(jt),null;case 25:return null;default:return null}}function fp(e,n){switch(of(n),n.tag){case 3:Xa(jt),ye();break;case 26:case 27:case 5:Ne(n);break;case 4:ye();break;case 31:n.memoizedState!==null&&Cn(n);break;case 13:Cn(n);break;case 19:ae(Ct);break;case 10:Xa(n.type);break;case 22:case 23:Cn(n),Ef(),e!==null&&ae(Ss);break;case 24:Xa(jt)}}function jl(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&e)===e){l=void 0;var d=i.create,v=i.inst;l=d(),v.destroy=l}i=i.next}while(i!==f)}}catch(E){ot(n,n.return,E)}}function Ri(e,n,i){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=n;var D=i,F=E;try{F()}catch(Z){ot(f,D,Z)}}}l=l.next}while(l!==d)}}catch(Z){ot(n,n.return,Z)}}function hp(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{n0(n,i)}catch(l){ot(e,e.return,l)}}}function dp(e,n,i){i.props=Rs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){ot(e,n,l)}}function kl(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(f){ot(e,n,f)}}function Ma(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){ot(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){ot(e,n,f)}else i.current=null}function mp(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){ot(e,e.return,f)}}function th(e,n,i){try{var l=e.stateNode;p_(l,e.type,i,n),l[Ft]=n}catch(f){ot(e,e.return,f)}}function pp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ki(e.type)||e.tag===4}function nh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ah(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Wn));else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(ah(e,n,i),e=e.sibling;e!==null;)ah(e,n,i),e=e.sibling}function Tc(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Tc(e,n,i),e=e.sibling;e!==null;)Tc(e,n,i),e=e.sibling}function gp(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);tn(n,l,i),n[Dt]=e,n[Ft]=i}catch(d){ot(e,e.return,d)}}var Ja=!1,Bt=!1,ih=!1,yp=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Yb(e,n){if(e=e.containerInfo,wh=qc,e=Rm(e),$u(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var v=0,E=-1,D=-1,F=0,Z=0,ee=e,Q=null;t:for(;;){for(var K;ee!==i||f!==0&&ee.nodeType!==3||(E=v+f),ee!==d||l!==0&&ee.nodeType!==3||(D=v+l),ee.nodeType===3&&(v+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Q=ee,ee=K;for(;;){if(ee===e)break t;if(Q===i&&++F===f&&(E=v),Q===d&&++Z===l&&(D=v),(K=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=K}i=E===-1||D===-1?null:{start:E,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ah={focusedElem:e,selectionRange:i},qc=!1,Xt=n;Xt!==null;)if(n=Xt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Xt=e;else for(;Xt!==null;){switch(n=Xt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=n,f=d.memoizedProps,d=d.memoizedState,l=i.stateNode;try{var _e=Rs(i.type,f);e=l.getSnapshotBeforeUpdate(_e,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Re){ot(i,i.return,Re)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Rh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Xt=e;break}Xt=n.return}}function vp(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:ei(e,i),l&4&&jl(5,i);break;case 1:if(ei(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(v){ot(i,i.return,v)}else{var f=Rs(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ot(i,i.return,v)}}l&64&&hp(i),l&512&&kl(i,i.return);break;case 3:if(ei(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{n0(e,n)}catch(v){ot(i,i.return,v)}}break;case 27:n===null&&l&4&&gp(i);case 26:case 5:ei(e,i),n===null&&l&4&&mp(i),l&512&&kl(i,i.return);break;case 12:ei(e,i);break;case 31:ei(e,i),l&4&&xp(e,i);break;case 13:ei(e,i),l&4&&Tp(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=a_.bind(null,i),E_(e,i))));break;case 22:if(l=i.memoizedState!==null||Ja,!l){n=n!==null&&n.memoizedState!==null||Bt,f=Ja;var d=Bt;Ja=l,(Bt=n)&&!d?ti(e,i,(i.subtreeFlags&8772)!==0):ei(e,i),Ja=f,Bt=d}break;case 30:break;default:ei(e,i)}}function bp(e){var n=e.alternate;n!==null&&(e.alternate=null,bp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Xs(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _t=null,pn=!1;function Wa(e,n,i){for(i=i.child;i!==null;)_p(e,n,i),i=i.sibling}function _p(e,n,i){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(xn,i)}catch{}switch(i.tag){case 26:Bt||Ma(i,n),Wa(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Bt||Ma(i,n);var l=_t,f=pn;ki(i.type)&&(_t=i.stateNode,pn=!1),Wa(e,n,i),Fl(i.stateNode),_t=l,pn=f;break;case 5:Bt||Ma(i,n);case 6:if(l=_t,f=pn,_t=null,Wa(e,n,i),_t=l,pn=f,_t!==null)if(pn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(i.stateNode)}catch(d){ot(i,n,d)}else try{_t.removeChild(i.stateNode)}catch(d){ot(i,n,d)}break;case 18:_t!==null&&(pn?(e=_t,hg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ir(e)):hg(_t,i.stateNode));break;case 4:l=_t,f=pn,_t=i.stateNode.containerInfo,pn=!0,Wa(e,n,i),_t=l,pn=f;break;case 0:case 11:case 14:case 15:Ri(2,i,n),Bt||Ri(4,i,n),Wa(e,n,i);break;case 1:Bt||(Ma(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&dp(i,n,l)),Wa(e,n,i);break;case 21:Wa(e,n,i);break;case 22:Bt=(l=Bt)||i.memoizedState!==null,Wa(e,n,i),Bt=l;break;default:Wa(e,n,i)}}function xp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ir(e)}catch(i){ot(n,n.return,i)}}}function Tp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ir(e)}catch(i){ot(n,n.return,i)}}function Kb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new yp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new yp),n;default:throw Error(s(435,e.tag))}}function Ec(e,n){var i=Kb(e);n.forEach(function(l){if(!i.has(l)){i.add(l);var f=i_.bind(null,e,l);l.then(f,f)}})}function gn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],d=e,v=n,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ki(E.type)){_t=E.stateNode,pn=!1;break e}break;case 5:_t=E.stateNode,pn=!1;break e;case 3:case 4:_t=E.stateNode.containerInfo,pn=!0;break e}E=E.return}if(_t===null)throw Error(s(160));_p(d,v,f),_t=null,pn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Ep(n,e),n=n.sibling}var sa=null;function Ep(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(n,e),yn(e),l&4&&(Ri(3,e,e.return),jl(3,e),Ri(5,e,e.return));break;case 1:gn(n,e),yn(e),l&512&&(Bt||i===null||Ma(i,i.return)),l&64&&Ja&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=sa;if(gn(n,e),yn(e),l&512&&(Bt||i===null||Ma(i,i.return)),l&4){var d=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[ga]||d[Dt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),tn(d,l,i),d[Dt]=e,Ot(d),l=d;break e;case"link":var v=Eg("link","href",f).get(l+(i.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(E,1);break t}}d=f.createElement(l),tn(d,l,i),f.head.appendChild(d);break;case"meta":if(v=Eg("meta","content",f).get(l+(i.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(E,1);break t}}d=f.createElement(l),tn(d,l,i),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Dt]=e,Ot(d),l=d}e.stateNode=l}else Sg(f,e.type,e.stateNode);else e.stateNode=Tg(f,l,e.memoizedProps);else d!==l?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,l===null?Sg(f,e.type,e.stateNode):Tg(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&th(e,e.memoizedProps,i.memoizedProps)}break;case 27:gn(n,e),yn(e),l&512&&(Bt||i===null||Ma(i,i.return)),i!==null&&l&4&&th(e,e.memoizedProps,i.memoizedProps);break;case 5:if(gn(n,e),yn(e),l&512&&(Bt||i===null||Ma(i,i.return)),e.flags&32){f=e.stateNode;try{mn(f,"")}catch(_e){ot(e,e.return,_e)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,th(e,f,i!==null?i.memoizedProps:f)),l&1024&&(ih=!0);break;case 6:if(gn(n,e),yn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(_e){ot(e,e.return,_e)}}break;case 3:if(Uc=null,f=sa,sa=Lc(n.containerInfo),gn(n,e),sa=f,yn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Ir(n.containerInfo)}catch(_e){ot(e,e.return,_e)}ih&&(ih=!1,Sp(e));break;case 4:l=sa,sa=Lc(e.stateNode.containerInfo),gn(n,e),yn(e),sa=l;break;case 12:gn(n,e),yn(e);break;case 31:gn(n,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ec(e,l)));break;case 13:gn(n,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(wc=Mt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ec(e,l)));break;case 22:f=e.memoizedState!==null;var D=i!==null&&i.memoizedState!==null,F=Ja,Z=Bt;if(Ja=F||f,Bt=Z||D,gn(n,e),Bt=Z,Ja=F,yn(e),l&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||D||Ja||Bt||Ms(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){D=i=n;try{if(d=D.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=D.stateNode;var ee=D.memoizedProps.style,Q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(_e){ot(D,D.return,_e)}}}else if(n.tag===6){if(i===null){D=n;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(_e){ot(D,D.return,_e)}}}else if(n.tag===18){if(i===null){D=n;try{var K=D.stateNode;f?dg(K,!0):dg(D.stateNode,!1)}catch(_e){ot(D,D.return,_e)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Ec(e,i))));break;case 19:gn(n,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ec(e,l)));break;case 30:break;case 21:break;default:gn(n,e),yn(e)}}function yn(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(pp(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,d=nh(e);Tc(e,d,f);break;case 5:var v=i.stateNode;i.flags&32&&(mn(v,""),i.flags&=-33);var E=nh(e);Tc(e,E,v);break;case 3:case 4:var D=i.stateNode.containerInfo,F=nh(e);ah(e,F,D);break;default:throw Error(s(161))}}catch(Z){ot(e,e.return,Z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Sp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Sp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ei(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)vp(e,n.alternate,n),n=n.sibling}function Ms(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ri(4,n,n.return),Ms(n);break;case 1:Ma(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&dp(n,n.return,i),Ms(n);break;case 27:Fl(n.stateNode);case 26:case 5:Ma(n,n.return),Ms(n);break;case 22:n.memoizedState===null&&Ms(n);break;case 30:Ms(n);break;default:Ms(n)}e=e.sibling}}function ti(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=e,d=n,v=d.flags;switch(d.tag){case 0:case 11:case 15:ti(f,d,i),jl(4,d);break;case 1:if(ti(f,d,i),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ot(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var E=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)t0(D[f],E)}catch(F){ot(l,l.return,F)}}i&&v&64&&hp(d),kl(d,d.return);break;case 27:gp(d);case 26:case 5:ti(f,d,i),i&&l===null&&v&4&&mp(d),kl(d,d.return);break;case 12:ti(f,d,i);break;case 31:ti(f,d,i),i&&v&4&&xp(f,d);break;case 13:ti(f,d,i),i&&v&4&&Tp(f,d);break;case 22:d.memoizedState===null&&ti(f,d,i),kl(d,d.return);break;case 30:break;default:ti(f,d,i)}n=n.sibling}}function sh(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Tl(i))}function rh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Tl(e))}function ra(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wp(e,n,i,l),n=n.sibling}function wp(e,n,i,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:ra(e,n,i,l),f&2048&&jl(9,n);break;case 1:ra(e,n,i,l);break;case 3:ra(e,n,i,l),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Tl(e)));break;case 12:if(f&2048){ra(e,n,i,l),e=n.stateNode;try{var d=n.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){ot(n,n.return,D)}}else ra(e,n,i,l);break;case 31:ra(e,n,i,l);break;case 13:ra(e,n,i,l);break;case 23:break;case 22:d=n.stateNode,v=n.alternate,n.memoizedState!==null?d._visibility&2?ra(e,n,i,l):Ll(e,n):d._visibility&2?ra(e,n,i,l):(d._visibility|=2,_r(e,n,i,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&sh(v,n);break;case 24:ra(e,n,i,l),f&2048&&rh(n.alternate,n);break;default:ra(e,n,i,l)}}function _r(e,n,i,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,v=n,E=i,D=l,F=v.flags;switch(v.tag){case 0:case 11:case 15:_r(d,v,E,D,f),jl(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?_r(d,v,E,D,f):Ll(d,v):(Z._visibility|=2,_r(d,v,E,D,f)),f&&F&2048&&sh(v.alternate,v);break;case 24:_r(d,v,E,D,f),f&&F&2048&&rh(v.alternate,v);break;default:_r(d,v,E,D,f)}n=n.sibling}}function Ll(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,f=l.flags;switch(l.tag){case 22:Ll(i,l),f&2048&&sh(l.alternate,l);break;case 24:Ll(i,l),f&2048&&rh(l.alternate,l);break;default:Ll(i,l)}n=n.sibling}}var Bl=8192;function xr(e,n,i){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)Ap(e,n,i),e=e.sibling}function Ap(e,n,i){switch(e.tag){case 26:xr(e,n,i),e.flags&Bl&&e.memoizedState!==null&&j_(i,sa,e.memoizedState,e.memoizedProps);break;case 5:xr(e,n,i);break;case 3:case 4:var l=sa;sa=Lc(e.stateNode.containerInfo),xr(e,n,i),sa=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Bl,Bl=16777216,xr(e,n,i),Bl=l):xr(e,n,i));break;default:xr(e,n,i)}}function Cp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ul(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,Rp(l,e)}Cp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Np(e),e=e.sibling}function Np(e){switch(e.tag){case 0:case 11:case 15:Ul(e),e.flags&2048&&Ri(9,e,e.return);break;case 3:Ul(e);break;case 12:Ul(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Sc(e)):Ul(e);break;default:Ul(e)}}function Sc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,Rp(l,e)}Cp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ri(8,n,n.return),Sc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Sc(n));break;default:Sc(n)}e=e.sibling}}function Rp(e,n){for(;Xt!==null;){var i=Xt;switch(i.tag){case 0:case 11:case 15:Ri(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Xt=l;else e:for(i=e;Xt!==null;){l=Xt;var f=l.sibling,d=l.return;if(bp(l),l===i){Xt=null;break e}if(f!==null){f.return=d,Xt=f;break e}Xt=d}}}var $b={getCacheForType:function(e){var n=Wt(jt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Wt(jt).controller.signal}},Zb=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Ue=null,qe=0,lt=0,Nn=null,Mi=!1,Tr=!1,lh=!1,ni=0,St=0,Ii=0,Is=0,oh=0,Rn=0,Er=0,zl=null,vn=null,ch=!1,wc=0,Mp=0,Ac=1/0,Cc=null,Di=null,qt=0,Oi=null,Sr=null,ai=0,uh=0,fh=null,Ip=null,Pl=0,hh=null;function Mn(){return(at&2)!==0&&qe!==0?qe&-qe:X.T!==null?vh():No()}function Dp(){if(Rn===0)if((qe&536870912)===0||Xe){var e=is;is<<=1,(is&3932160)===0&&(is=262144),Rn=e}else Rn=536870912;return e=An.current,e!==null&&(e.flags|=32),Rn}function bn(e,n,i){(e===mt&&(lt===2||lt===9)||e.cancelPendingCommit!==null)&&(wr(e,0),Vi(e,qe,Rn,!1)),ss(e,i),((at&2)===0||e!==mt)&&(e===mt&&((at&2)===0&&(Is|=i),St===4&&Vi(e,qe,Rn,!1)),Ia(e))}function Op(e,n,i){if((at&6)!==0)throw Error(s(327));var l=!i&&(n&127)===0&&(n&e.expiredLanes)===0||$n(e,n),f=l?e_(e,n):mh(e,n,!0),d=l;do{if(f===0){Tr&&!l&&Vi(e,n,0,!1);break}else{if(i=e.current.alternate,d&&!Jb(i)){f=mh(e,n,!1),d=!1;continue}if(f===2){if(d=n,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var E=e;f=zl;var D=E.current.memoizedState.isDehydrated;if(D&&(wr(E,v).flags|=256),v=mh(E,v,!1),v!==2){if(lh&&!D){E.errorRecoveryDisabledLanes|=d,Is|=d,f=4;break e}d=vn,vn=f,d!==null&&(vn===null?vn=d:vn.push.apply(vn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){wr(e,0),Vi(e,n,0,!0);break}e:{switch(l=e,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Vi(l,n,Rn,!Mi);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=wc+300-Mt(),10<f)){if(Vi(l,n,Rn,!Mi),da(l,0,!0)!==0)break e;ai=n,l.timeoutHandle=ug(Vp.bind(null,l,i,vn,Cc,ch,n,Rn,Is,Er,Mi,d,"Throttled",-0,0),f);break e}Vp(l,i,vn,Cc,ch,n,Rn,Is,Er,Mi,d,null,-0,0)}}break}while(!0);Ia(e)}function Vp(e,n,i,l,f,d,v,E,D,F,Z,ee,Q,K){if(e.timeoutHandle=-1,ee=n.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Ap(n,d,ee);var _e=(d&62914560)===d?wc-Mt():(d&4194048)===d?Mp-Mt():0;if(_e=k_(ee,_e),_e!==null){ai=d,e.cancelPendingCommit=_e(Gp.bind(null,e,n,d,i,l,f,v,E,D,Z,ee,null,Q,K)),Vi(e,d,v,!F);return}}Gp(e,n,d,i,l,f,v,E,D)}function Jb(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Vi(e,n,i,l){n&=~oh,n&=~Is,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var f=n;0<f;){var d=31-wt(f),v=1<<d;l[d]=-1,f&=~v}i!==0&&rs(e,i,n)}function Nc(){return(at&6)===0?(Gl(0),!1):!0}function dh(){if(Ue!==null){if(lt===0)var e=Ue.return;else e=Ue,Qa=Ts=null,Rf(e),pr=null,Sl=0,e=Ue;for(;e!==null;)fp(e.alternate,e),e=e.return;Ue=null}}function wr(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,v_(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ai=0,dh(),mt=e,Ue=i=Ha(e.current,null),qe=n,lt=0,Nn=null,Mi=!1,Tr=$n(e,n),lh=!1,Er=Rn=oh=Is=Ii=St=0,vn=zl=null,ch=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var f=31-wt(l),d=1<<f;n|=e[f],l&=~d}return ni=n,Ko(),i}function jp(e,n){je=null,X.H=Dl,n===mr||n===ac?(n=Zm(),lt=3):n===yf?(n=Zm(),lt=4):lt=n===Ff?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Nn=n,Ue===null&&(St=1,yc(e,Bn(n,e.current)))}function kp(){var e=An.current;return e===null?!0:(qe&4194048)===qe?Gn===null:(qe&62914560)===qe||(qe&536870912)!==0?e===Gn:!1}function Lp(){var e=X.H;return X.H=Dl,e===null?Dl:e}function Bp(){var e=X.A;return X.A=$b,e}function Rc(){St=4,Mi||(qe&4194048)!==qe&&An.current!==null||(Tr=!0),(Ii&134217727)===0&&(Is&134217727)===0||mt===null||Vi(mt,qe,Rn,!1)}function mh(e,n,i){var l=at;at|=2;var f=Lp(),d=Bp();(mt!==e||qe!==n)&&(Cc=null,wr(e,n)),n=!1;var v=St;e:do try{if(lt!==0&&Ue!==null){var E=Ue,D=Nn;switch(lt){case 8:dh(),v=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(n=!0);var F=lt;if(lt=0,Nn=null,Ar(e,E,D,F),i&&Tr){v=0;break e}break;default:F=lt,lt=0,Nn=null,Ar(e,E,D,F)}}Wb(),v=St;break}catch(Z){jp(e,Z)}while(!0);return n&&e.shellSuspendCounter++,Qa=Ts=null,at=l,X.H=f,X.A=d,Ue===null&&(mt=null,qe=0,Ko()),v}function Wb(){for(;Ue!==null;)Up(Ue)}function e_(e,n){var i=at;at|=2;var l=Lp(),f=Bp();mt!==e||qe!==n?(Cc=null,Ac=Mt()+500,wr(e,n)):Tr=$n(e,n);e:do try{if(lt!==0&&Ue!==null){n=Ue;var d=Nn;t:switch(lt){case 1:lt=0,Nn=null,Ar(e,n,d,1);break;case 2:case 9:if(Km(d)){lt=0,Nn=null,zp(n);break}n=function(){lt!==2&&lt!==9||mt!==e||(lt=7),Ia(e)},d.then(n,n);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Km(d)?(lt=0,Nn=null,zp(n)):(lt=0,Nn=null,Ar(e,n,d,7));break;case 5:var v=null;switch(Ue.tag){case 26:v=Ue.memoizedState;case 5:case 27:var E=Ue;if(v?wg(v):E.stateNode.complete){lt=0,Nn=null;var D=E.sibling;if(D!==null)Ue=D;else{var F=E.return;F!==null?(Ue=F,Mc(F)):Ue=null}break t}}lt=0,Nn=null,Ar(e,n,d,5);break;case 6:lt=0,Nn=null,Ar(e,n,d,6);break;case 8:dh(),St=6;break e;default:throw Error(s(462))}}t_();break}catch(Z){jp(e,Z)}while(!0);return Qa=Ts=null,X.H=l,X.A=f,at=i,Ue!==null?0:(mt=null,qe=0,Ko(),St)}function t_(){for(;Ue!==null&&!ua();)Up(Ue)}function Up(e){var n=cp(e.alternate,e,ni);e.memoizedProps=e.pendingProps,n===null?Mc(e):Ue=n}function zp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=ap(i,n,n.pendingProps,n.type,void 0,qe);break;case 11:n=ap(i,n,n.pendingProps,n.type.render,n.ref,qe);break;case 5:Rf(n);default:fp(i,n),n=Ue=Bm(n,ni),n=cp(i,n,ni)}e.memoizedProps=e.pendingProps,n===null?Mc(e):Ue=n}function Ar(e,n,i,l){Qa=Ts=null,Rf(n),pr=null,Sl=0;var f=n.return;try{if(qb(e,f,n,i,qe)){St=1,yc(e,Bn(i,e.current)),Ue=null;return}}catch(d){if(f!==null)throw Ue=f,d;St=1,yc(e,Bn(i,e.current)),Ue=null;return}n.flags&32768?(Xe||l===1?e=!0:Tr||(qe&536870912)!==0?e=!1:(Mi=e=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),Pp(n,e)):Mc(n)}function Mc(e){var n=e;do{if((n.flags&32768)!==0){Pp(n,Mi);return}e=n.return;var i=Qb(n.alternate,n,ni);if(i!==null){Ue=i;return}if(n=n.sibling,n!==null){Ue=n;return}Ue=n=e}while(n!==null);St===0&&(St=5)}function Pp(e,n){do{var i=Xb(e.alternate,e);if(i!==null){i.flags&=32767,Ue=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=i}while(e!==null);St=6,Ue=null}function Gp(e,n,i,l,f,d,v,E,D){e.cancelPendingCommit=null;do Ic();while(qt!==0);if((at&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=tf,Qu(e,i,d,v,E,D),e===mt&&(Ue=mt=null,qe=0),Sr=n,Oi=e,ai=i,uh=d,fh=f,Ip=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s_(Ze,function(){return Xp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=oe.p,oe.p=2,v=at,at|=4;try{Yb(e,n,i)}finally{at=v,oe.p=f,X.T=l}}qt=1,qp(),Hp(),Fp()}}function qp(){if(qt===1){qt=0;var e=Oi,n=Sr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var l=oe.p;oe.p=2;var f=at;at|=4;try{Ep(n,e);var d=Ah,v=Rm(e.containerInfo),E=d.focusedElem,D=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Nm(E.ownerDocument.documentElement,E)){if(D!==null&&$u(E)){var F=D.start,Z=D.end;if(Z===void 0&&(Z=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min(Z,E.value.length);else{var ee=E.ownerDocument||document,Q=ee&&ee.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),_e=E.textContent.length,Re=Math.min(D.start,_e),ht=D.end===void 0?Re:Math.min(D.end,_e);!K.extend&&Re>ht&&(v=ht,ht=Re,Re=v);var P=Cm(E,Re),L=Cm(E,ht);if(P&&L&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ee.createRange();H.setStart(P.node,P.offset),K.removeAllRanges(),Re>ht?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ee=[],K=E;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var J=ee[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}qc=!!wh,Ah=wh=null}finally{at=f,oe.p=l,X.T=i}}e.current=n,qt=2}}function Hp(){if(qt===2){qt=0;var e=Oi,n=Sr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var l=oe.p;oe.p=2;var f=at;at|=4;try{vp(e,n.alternate,n)}finally{at=f,oe.p=l,X.T=i}}qt=3}}function Fp(){if(qt===4||qt===3){qt=0,ci();var e=Oi,n=Sr,i=ai,l=Ip;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qt=5:(qt=0,Sr=Oi=null,Qp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Di=null),za(i),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(xn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,f=oe.p,oe.p=2,X.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{X.T=n,oe.p=f}}(ai&3)!==0&&Ic(),Ia(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===hh?Pl++:(Pl=0,hh=e):Pl=0,Gl(0)}}function Qp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Tl(n)))}function Ic(){return qp(),Hp(),Fp(),Xp()}function Xp(){if(qt!==5)return!1;var e=Oi,n=uh;uh=0;var i=za(ai),l=X.T,f=oe.p;try{oe.p=32>i?32:i,X.T=null,i=fh,fh=null;var d=Oi,v=ai;if(qt=0,Sr=Oi=null,ai=0,(at&6)!==0)throw Error(s(331));var E=at;if(at|=4,Np(d.current),wp(d,d.current,v,i),at=E,Gl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(xn,d)}catch{}return!0}finally{oe.p=f,X.T=l,Qp(e,n)}}function Yp(e,n,i){n=Bn(i,n),n=Hf(e.stateNode,n,2),e=Ai(e,n,2),e!==null&&(ss(e,2),Ia(e))}function ot(e,n,i){if(e.tag===3)Yp(e,e,i);else for(;n!==null;){if(n.tag===3){Yp(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Di===null||!Di.has(l))){e=Bn(i,e),i=K0(2),l=Ai(n,i,2),l!==null&&($0(i,l,n,e),ss(l,2),Ia(l));break}}n=n.return}}function ph(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Zb;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(i)||(lh=!0,f.add(i),e=n_.bind(null,e,n,i),n.then(e,e))}function n_(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,mt===e&&(qe&i)===i&&(St===4||St===3&&(qe&62914560)===qe&&300>Mt()-wc?(at&2)===0&&wr(e,0):oh|=i,Er===qe&&(Er=0)),Ia(e)}function Kp(e,n){n===0&&(n=Co()),e=bs(e,n),e!==null&&(ss(e,n),Ia(e))}function a_(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Kp(e,i)}function i_(e,n){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),Kp(e,i)}function s_(e,n){return Je(e,n)}var Dc=null,Cr=null,gh=!1,Oc=!1,yh=!1,ji=0;function Ia(e){e!==Cr&&e.next===null&&(Cr===null?Dc=Cr=e:Cr=Cr.next=e),Oc=!0,gh||(gh=!0,l_())}function Gl(e,n){if(!yh&&Oc){yh=!0;do for(var i=!1,l=Dc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-wt(42|e)+1)-1,d&=f&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,Wp(l,d))}else d=qe,d=da(l,l===mt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(i=!0,Wp(l,d));l=l.next}while(i);yh=!1}}function r_(){$p()}function $p(){Oc=gh=!1;var e=0;ji!==0&&y_()&&(e=ji);for(var n=Mt(),i=null,l=Dc;l!==null;){var f=l.next,d=Zp(l,n);d===0?(l.next=null,i===null?Dc=f:i.next=f,f===null&&(Cr=i)):(i=l,(e!==0||(d&3)!==0)&&(Oc=!0)),l=f}qt!==0&&qt!==5||Gl(e),ji!==0&&(ji=0)}function Zp(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-wt(d),E=1<<v,D=f[v];D===-1?((E&i)===0||(E&l)!==0)&&(f[v]=Fu(E,n)):D<=n&&(e.expiredLanes|=E),d&=~E}if(n=mt,i=qe,i=da(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(lt===2||lt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&In(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||$n(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&In(l),za(i)){case 2:case 8:i=Ua;break;case 32:i=Ze;break;case 268435456:i=as;break;default:i=Ze}return l=Jp.bind(null,e),i=Je(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&In(l),e.callbackPriority=2,e.callbackNode=null,2}function Jp(e,n){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ic()&&e.callbackNode!==i)return null;var l=qe;return l=da(e,e===mt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Op(e,l,n),Zp(e,Mt()),e.callbackNode!=null&&e.callbackNode===i?Jp.bind(null,e):null)}function Wp(e,n){if(Ic())return null;Op(e,n,!0)}function l_(){b_(function(){(at&6)!==0?Je(Kn,r_):$p()})}function vh(){if(ji===0){var e=hr;e===0&&(e=fa,fa<<=1,(fa&261888)===0&&(fa=256)),ji=e}return ji}function eg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zs(""+e)}function tg(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function o_(e,n,i,l,f){if(n==="submit"&&i&&i.stateNode===f){var d=eg((f[Ft]||null).action),v=l.submitter;v&&(n=(n=v[Ft]||null)?eg(n.formAction):v.getAttribute("formAction"),n!==null&&(d=n,v=null));var E=new Sa("action","action",null,l,f);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ji!==0){var D=v?tg(f,v):new FormData(f);Bf(i,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(E.preventDefault(),D=v?tg(f,v):new FormData(f),Bf(i,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var bh=0;bh<ef.length;bh++){var _h=ef[bh],c_=_h.toLowerCase(),u_=_h[0].toUpperCase()+_h.slice(1);ia(c_,"on"+u_)}ia(Dm,"onAnimationEnd"),ia(Om,"onAnimationIteration"),ia(Vm,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(Ab,"onTransitionRun"),ia(Cb,"onTransitionStart"),ia(Nb,"onTransitionCancel"),ia(jm,"onTransitionEnd"),_a("onMouseEnter",["mouseout","mouseover"]),_a("onMouseLeave",["mouseout","mouseover"]),_a("onPointerEnter",["pointerout","pointerover"]),_a("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function ng(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var v=l.length-1;0<=v;v--){var E=l[v],D=E.instance,F=E.currentTarget;if(E=E.listener,D!==d&&f.isPropagationStopped())break e;d=E,f.currentTarget=F;try{d(f)}catch(Z){Yo(Z)}f.currentTarget=null,d=D}else for(v=0;v<l.length;v++){if(E=l[v],D=E.instance,F=E.currentTarget,E=E.listener,D!==d&&f.isPropagationStopped())break e;d=E,f.currentTarget=F;try{d(f)}catch(Z){Yo(Z)}f.currentTarget=null,d=D}}}}function ze(e,n){var i=n[Qs];i===void 0&&(i=n[Qs]=new Set);var l=e+"__bubble";i.has(l)||(ag(n,e,2,!1),i.add(l))}function xh(e,n,i){var l=0;n&&(l|=4),ag(i,e,l,n)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Th(e){if(!e[Vc]){e[Vc]=!0,tl.forEach(function(i){i!=="selectionchange"&&(f_.has(i)||xh(i,!1,e),xh(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Vc]||(n[Vc]=!0,xh("selectionchange",!1,n))}}function ag(e,n,i,l){switch(Dg(n)){case 2:var f=U_;break;case 8:f=z_;break;default:f=Lh}i=f.bind(null,n,i,e),f=void 0,!fs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Eh(e,n,i,l,f){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=ya(E),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=d=v;continue e}E=E.parentNode}}l=l.return}gi(function(){var F=d,Z=Vn(i),ee=[];e:{var Q=km.get(e);if(Q!==void 0){var K=Sa,_e=e;switch(e){case"keypress":if(ds(i)===0)break e;case"keydown":case"keyup":K=Fo;break;case"focusin":_e="focus",K=ps;break;case"focusout":_e="blur",K=ps;break;case"beforeblur":case"afterblur":K=ps;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case Dm:case Om:case Vm:K=Bo;break;case jm:K=A;break;case"scroll":case"scrollend":K=dl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Uo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=qa;break;case"toggle":case"beforetoggle":K=Ve}var Re=(n&4)!==0,ht=!Re&&(e==="scroll"||e==="scrollend"),P=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var L=F,H;L!==null;){var J=L;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||P===null||(J=ea(L,P),J!=null&&Re.push(Hl(L,J,H))),ht)break;L=L.return}0<Re.length&&(Q=new K(Q,_e,null,i,Z),ee.push({event:Q,listeners:Re}))}}if((n&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&i!==ul&&(_e=i.relatedTarget||i.fromElement)&&(ya(_e)||_e[pa]))break e;if((K||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(_e=i.relatedTarget||i.toElement,K=F,_e=_e?ya(_e):null,_e!==null&&(ht=c(_e),Re=_e.tag,_e!==ht||Re!==5&&Re!==27&&Re!==6)&&(_e=null)):(K=null,_e=F),K!==_e)){if(Re=ml,J="onMouseLeave",P="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(Re=qa,J="onPointerLeave",P="onPointerEnter",L="pointer"),ht=K==null?Q:Tn(K),H=_e==null?Q:Tn(_e),Q=new Re(J,L+"leave",K,i,Z),Q.target=ht,Q.relatedTarget=H,J=null,ya(Z)===F&&(Re=new Re(P,L+"enter",_e,i,Z),Re.target=H,Re.relatedTarget=ht,J=Re),ht=J,K&&_e)t:{for(Re=h_,P=K,L=_e,H=0,J=P;J;J=Re(J))H++;J=0;for(var we=L;we;we=Re(we))J++;for(;0<H-J;)P=Re(P),H--;for(;0<J-H;)L=Re(L),J--;for(;H--;){if(P===L||L!==null&&P===L.alternate){Re=P;break t}P=Re(P),L=Re(L)}Re=null}else Re=null;K!==null&&ig(ee,Q,K,Re,!1),_e!==null&&ht!==null&&ig(ee,ht,_e,Re,!0)}}e:{if(Q=F?Tn(F):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var We=xm;else if(bm(Q))if(Tm)We=Eb;else{We=xb;var Ee=_b}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&$s(F.elementType)&&(We=xm):We=Tb;if(We&&(We=We(e,F))){_m(ee,We,i,Z);break e}Ee&&Ee(e,Q,F),e==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&ll(Q,"number",Q.value)}switch(Ee=F?Tn(F):window,e){case"focusin":(bm(Ee)||Ee.contentEditable==="true")&&(ir=Ee,Zu=F,bl=null);break;case"focusout":bl=Zu=ir=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,Mm(ee,i,Z);break;case"selectionchange":if(wb)break;case"keydown":case"keyup":Mm(ee,i,Z)}var ke;if(nt)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ar?gs(e,i)&&(He="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(He="onCompositionStart");He&&(Ca&&i.locale!=="ko"&&(ar||He!=="onCompositionStart"?He==="onCompositionEnd"&&ar&&(ke=hl()):(Ea=Z,fl="value"in Ea?Ea.value:Ea.textContent,ar=!0)),Ee=jc(F,He),0<Ee.length&&(He=new Aa(He,e,null,i,Z),ee.push({event:He,listeners:Ee}),ke?He.data=ke:(ke=nr(i),ke!==null&&(He.data=ke)))),(ke=kn?gb(e,i):yb(e,i))&&(He=jc(F,"onBeforeInput"),0<He.length&&(Ee=new Aa("onBeforeInput","beforeinput",null,i,Z),ee.push({event:Ee,listeners:He}),Ee.data=ke)),o_(ee,e,F,i,Z)}ng(ee,n)})}function Hl(e,n,i){return{instance:e,listener:n,currentTarget:i}}function jc(e,n){for(var i=n+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ea(e,i),f!=null&&l.unshift(Hl(e,f,d)),f=ea(e,n),f!=null&&l.push(Hl(e,f,d))),e.tag===3)return l;e=e.return}return[]}function h_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ig(e,n,i,l,f){for(var d=n._reactName,v=[];i!==null&&i!==l;){var E=i,D=E.alternate,F=E.stateNode;if(E=E.tag,D!==null&&D===l)break;E!==5&&E!==26&&E!==27||F===null||(D=F,f?(F=ea(i,d),F!=null&&v.unshift(Hl(i,F,D))):f||(F=ea(i,d),F!=null&&v.push(Hl(i,F,D)))),i=i.return}v.length!==0&&e.push({event:n,listeners:v})}var d_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function sg(e){return(typeof e=="string"?e:""+e).replace(d_,`
`).replace(m_,"")}function rg(e,n){return n=sg(n),sg(e)===n}function ft(e,n,i,l,f,d){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||mn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&mn(e,""+l);break;case"className":En(e,"class",l);break;case"tabIndex":En(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(e,i,l);break;case"style":cl(e,l,d);break;case"data":if(n!=="object"){En(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Zs(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(n!=="input"&&ft(e,n,"name",f.name,f,null),ft(e,n,"formEncType",f.formEncType,f,null),ft(e,n,"formMethod",f.formMethod,f,null),ft(e,n,"formTarget",f.formTarget,f,null)):(ft(e,n,"encType",f.encType,f,null),ft(e,n,"method",f.method,f,null),ft(e,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Zs(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=Wn);break;case"onScroll":l!=null&&ze("scroll",e);break;case"onScrollEnd":l!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Zs(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":ze("beforetoggle",e),ze("toggle",e),Ys(e,"popover",l);break;case"xlinkActuate":Vt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ys(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=jo.get(i)||i,Ys(e,i,l))}}function Sh(e,n,i,l,f,d){switch(i){case"style":cl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?mn(e,l):(typeof l=="number"||typeof l=="bigint")&&mn(e,""+l);break;case"onScroll":l!=null&&ze("scroll",e);break;case"onScrollEnd":l!=null&&ze("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),d=e[Ft]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(n,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,f);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Ys(e,i,l)}}}function tn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var l=!1,f=!1,d;for(d in i)if(i.hasOwnProperty(d)){var v=i[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ft(e,n,d,v,i,null)}}f&&ft(e,n,"srcSet",i.srcSet,i,null),l&&ft(e,n,"src",i.src,i,null);return;case"input":ze("invalid",e);var E=d=v=f=null,D=null,F=null;for(l in i)if(i.hasOwnProperty(l)){var Z=i[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":v=Z;break;case"checked":D=Z;break;case"defaultChecked":F=Z;break;case"value":d=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,n));break;default:ft(e,n,l,Z,i,null)}}Do(e,d,E,D,F,v,f,!1);return;case"select":ze("invalid",e),l=v=d=null;for(f in i)if(i.hasOwnProperty(f)&&(E=i[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:ft(e,n,f,E,i,null)}n=d,i=v,e.multiple=!!l,n!=null?hi(e,!!l,n,!1):i!=null&&hi(e,!!l,i,!0);return;case"textarea":ze("invalid",e),d=f=l=null;for(v in i)if(i.hasOwnProperty(v)&&(E=i[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ft(e,n,v,E,i,null)}di(e,l,f,d);return;case"option":for(D in i)if(i.hasOwnProperty(D)&&(l=i[D],l!=null))switch(D){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(e,n,D,l,i,null)}return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(l=0;l<ql.length;l++)ze(ql[l],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in i)if(i.hasOwnProperty(F)&&(l=i[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ft(e,n,F,l,i,null)}return;default:if($s(n)){for(Z in i)i.hasOwnProperty(Z)&&(l=i[Z],l!==void 0&&Sh(e,n,Z,l,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(l=i[E],l!=null&&ft(e,n,E,l,i,null))}function p_(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,E=null,D=null,F=null,Z=null;for(K in i){var ee=i[K];if(i.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(K)||ft(e,n,K,null,l,ee)}}for(var Q in l){var K=l[Q];if(ee=i[Q],l.hasOwnProperty(Q)&&(K!=null||ee!=null))switch(Q){case"type":d=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":Z=K;break;case"value":v=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==ee&&ft(e,n,Q,K,l,ee)}}Ks(e,v,E,D,F,Z,d,f);return;case"select":K=v=E=Q=null;for(d in i)if(D=i[d],i.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":K=D;default:l.hasOwnProperty(d)||ft(e,n,d,null,l,D)}for(f in l)if(d=l[f],D=i[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":Q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==D&&ft(e,n,f,d,l,D)}n=E,i=v,l=K,Q!=null?hi(e,!!i,Q,!1):!!l!=!!i&&(n!=null?hi(e,!!i,n,!0):hi(e,!!i,i?[]:"",!1));return;case"textarea":K=Q=null;for(E in i)if(f=i[E],i.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ft(e,n,E,null,l,f)}for(v in l)if(f=l[v],d=i[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":Q=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&ft(e,n,v,f,l,d)}Oo(e,Q,K);return;case"option":for(var _e in i)if(Q=i[_e],i.hasOwnProperty(_e)&&Q!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:ft(e,n,_e,null,l,Q)}for(D in l)if(Q=l[D],K=i[D],l.hasOwnProperty(D)&&Q!==K&&(Q!=null||K!=null))switch(D){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ft(e,n,D,Q,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in i)Q=i[Re],i.hasOwnProperty(Re)&&Q!=null&&!l.hasOwnProperty(Re)&&ft(e,n,Re,null,l,Q);for(F in l)if(Q=l[F],K=i[F],l.hasOwnProperty(F)&&Q!==K&&(Q!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:ft(e,n,F,Q,l,K)}return;default:if($s(n)){for(var ht in i)Q=i[ht],i.hasOwnProperty(ht)&&Q!==void 0&&!l.hasOwnProperty(ht)&&Sh(e,n,ht,void 0,l,Q);for(Z in l)Q=l[Z],K=i[Z],!l.hasOwnProperty(Z)||Q===K||Q===void 0&&K===void 0||Sh(e,n,Z,Q,l,K);return}}for(var P in i)Q=i[P],i.hasOwnProperty(P)&&Q!=null&&!l.hasOwnProperty(P)&&ft(e,n,P,null,l,Q);for(ee in l)Q=l[ee],K=i[ee],!l.hasOwnProperty(ee)||Q===K||Q==null&&K==null||ft(e,n,ee,Q,l,K)}function lg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function g_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var f=i[l],d=f.transferSize,v=f.initiatorType,E=f.duration;if(d&&E&&lg(v)){for(v=0,E=f.responseEnd,l+=1;l<i.length;l++){var D=i[l],F=D.startTime;if(F>E)break;var Z=D.transferSize,ee=D.initiatorType;Z&&lg(ee)&&(D=D.responseEnd,v+=Z*(D<E?1:(E-F)/(D-F)))}if(--l,n+=8*(d+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wh=null,Ah=null;function kc(e){return e.nodeType===9?e:e.ownerDocument}function og(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ch(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Nh=null;function y_(){var e=window.event;return e&&e.type==="popstate"?e===Nh?!1:(Nh=e,!0):(Nh=null,!1)}var ug=typeof setTimeout=="function"?setTimeout:void 0,v_=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(e){return fg.resolve(null).then(e).catch(__)}:ug;function __(e){setTimeout(function(){throw e})}function ki(e){return e==="head"}function hg(e,n){var i=n,l=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(f),Ir(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Fl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Fl(i);for(var d=i.firstChild;d;){var v=d.nextSibling,E=d.nodeName;d[ga]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=v}}else i==="body"&&Fl(e.ownerDocument.body);i=f}while(i);Ir(n)}function dg(e,n){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function Rh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Rh(i),Xs(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function x_(e,n,i,l){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ga])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function T_(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=qn(e.nextSibling),e===null))return null;return e}function mg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qn(e.nextSibling),e===null))return null;return e}function Mh(e){return e.data==="$?"||e.data==="$~"}function Ih(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function E_(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Dh=null;function pg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return qn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function gg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function yg(e,n,i){switch(n=kc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Fl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Xs(e)}var Hn=new Map,vg=new Set;function Lc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ii=oe.d;oe.d={f:S_,r:w_,D:A_,C:C_,L:N_,m:R_,X:I_,S:M_,M:D_};function S_(){var e=ii.f(),n=Nc();return e||n}function w_(e){var n=On(e);n!==null&&n.tag===5&&n.type==="form"?j0(n):ii.r(e)}var Nr=typeof document>"u"?null:document;function bg(e,n,i){var l=Nr;if(l&&typeof n=="string"&&n){var f=dn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),vg.has(f)||(vg.add(f),e={rel:e,crossOrigin:i,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),tn(n,"link",e),Ot(n),l.head.appendChild(n)))}}function A_(e){ii.D(e),bg("dns-prefetch",e,null)}function C_(e,n){ii.C(e,n),bg("preconnect",e,n)}function N_(e,n,i){ii.L(e,n,i);var l=Nr;if(l&&e&&n){var f='link[rel="preload"][as="'+dn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+dn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+dn(i.imageSizes)+'"]')):f+='[href="'+dn(e)+'"]';var d=f;switch(n){case"style":d=Rr(e);break;case"script":d=Mr(e)}Hn.has(d)||(e=T({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Hn.set(d,e),l.querySelector(f)!==null||n==="style"&&l.querySelector(Ql(d))||n==="script"&&l.querySelector(Xl(d))||(n=l.createElement("link"),tn(n,"link",e),Ot(n),l.head.appendChild(n)))}}function R_(e,n){ii.m(e,n);var i=Nr;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Mr(e)}if(!Hn.has(d)&&(e=T({rel:"modulepreload",href:e},n),Hn.set(d,e),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Xl(d)))return}l=i.createElement("link"),tn(l,"link",e),Ot(l),i.head.appendChild(l)}}}function M_(e,n,i){ii.S(e,n,i);var l=Nr;if(l&&e){var f=va(l).hoistableStyles,d=Rr(e);n=n||"default";var v=f.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Ql(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Hn.get(d))&&Oh(e,i);var D=v=l.createElement("link");Ot(D),tn(D,"link",e),D._p=new Promise(function(F,Z){D.onload=F,D.onerror=Z}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Bc(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(d,v)}}}function I_(e,n){ii.X(e,n);var i=Nr;if(i&&e){var l=va(i).hoistableScripts,f=Mr(e),d=l.get(f);d||(d=i.querySelector(Xl(f)),d||(e=T({src:e,async:!0},n),(n=Hn.get(f))&&Vh(e,n),d=i.createElement("script"),Ot(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function D_(e,n){ii.M(e,n);var i=Nr;if(i&&e){var l=va(i).hoistableScripts,f=Mr(e),d=l.get(f);d||(d=i.querySelector(Xl(f)),d||(e=T({src:e,async:!0,type:"module"},n),(n=Hn.get(f))&&Vh(e,n),d=i.createElement("script"),Ot(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function _g(e,n,i,l){var f=(f=Ce.current)?Lc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Rr(i.href),i=va(f).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Rr(i.href);var d=va(f).hoistableStyles,v=d.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=f.querySelector(Ql(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Hn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Hn.set(e,i),d||O_(f,e,i,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Mr(i),i=va(f).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Rr(e){return'href="'+dn(e)+'"'}function Ql(e){return'link[rel="stylesheet"]['+e+"]"}function xg(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function O_(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),tn(n,"link",i),Ot(n),e.head.appendChild(n))}function Mr(e){return'[src="'+dn(e)+'"]'}function Xl(e){return"script[async]"+e}function Tg(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+dn(i.href)+'"]');if(l)return n.instance=l,Ot(l),l;var f=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ot(l),tn(l,"style",f),Bc(l,i.precedence,e),n.instance=l;case"stylesheet":f=Rr(i.href);var d=e.querySelector(Ql(f));if(d)return n.state.loading|=4,n.instance=d,Ot(d),d;l=xg(i),(f=Hn.get(f))&&Oh(l,f),d=(e.ownerDocument||e).createElement("link"),Ot(d);var v=d;return v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),tn(d,"link",l),n.state.loading|=4,Bc(d,i.precedence,e),n.instance=d;case"script":return d=Mr(i.src),(f=e.querySelector(Xl(d)))?(n.instance=f,Ot(f),f):(l=i,(f=Hn.get(d))&&(l=T({},i),Vh(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ot(f),tn(f,"link",l),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Bc(l,i.precedence,e));return n.instance}function Bc(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===n)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Oh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Vh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Uc=null;function Eg(e,n,i){if(Uc===null){var l=new Map,f=Uc=new Map;f.set(i,l)}else f=Uc,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var d=i[f];if(!(d[ga]||d[Dt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(n)||"";v=e+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function Sg(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function V_(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function wg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function j_(e,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Rr(l.href),d=n.querySelector(Ql(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=zc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=d,Ot(d);return}d=n.ownerDocument||n,l=xg(l),(f=Hn.get(f))&&Oh(l,f),d=d.createElement("link"),Ot(d);var v=d;v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),tn(d,"link",l),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=zc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var jh=0;function k_(e,n){return e.stylesheets&&e.count===0&&Gc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Gc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&jh===0&&(jh=62500*g_());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Gc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>jh?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pc=null;function Gc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pc=new Map,n.forEach(L_,e),Pc=null,zc.call(e))}function L_(e,n){if(!(n.state.loading&4)){var i=Pc.get(e);if(i)var l=i.get(null);else{i=new Map,Pc.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}f=n.instance,v=f.getAttribute("data-precedence"),d=i.get(v)||l,d===l&&i.set(null,f),i.set(v,f),this.count++,l=zc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var Yl={$$typeof:$,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function B_(e,n,i,l,f,d,v,E,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Ag(e,n,i,l,f,d,v,E,D,F,Z,ee){return e=new B_(e,n,i,v,D,F,Z,ee,E),n=1,d===!0&&(n|=24),d=wn(3,null,null,n),e.current=d,d.stateNode=e,n=mf(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:i,cache:n},vf(d),e}function Cg(e){return e?(e=lr,e):lr}function Ng(e,n,i,l,f,d){f=Cg(f),l.context===null?l.context=f:l.pendingContext=f,l=wi(n),l.payload={element:i},d=d===void 0?null:d,d!==null&&(l.callback=d),i=Ai(e,l,n),i!==null&&(bn(i,e,n),Al(i,e,n))}function Rg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function kh(e,n){Rg(e,n),(e=e.alternate)&&Rg(e,n)}function Mg(e){if(e.tag===13||e.tag===31){var n=bs(e,67108864);n!==null&&bn(n,e,67108864),kh(e,67108864)}}function Ig(e){if(e.tag===13||e.tag===31){var n=Mn();n=ls(n);var i=bs(e,n);i!==null&&bn(i,e,n),kh(e,n)}}var qc=!0;function U_(e,n,i,l){var f=X.T;X.T=null;var d=oe.p;try{oe.p=2,Lh(e,n,i,l)}finally{oe.p=d,X.T=f}}function z_(e,n,i,l){var f=X.T;X.T=null;var d=oe.p;try{oe.p=8,Lh(e,n,i,l)}finally{oe.p=d,X.T=f}}function Lh(e,n,i,l){if(qc){var f=Bh(l);if(f===null)Eh(e,n,l,Hc,i),Og(e,l);else if(G_(f,e,n,i,l))l.stopPropagation();else if(Og(e,l),n&4&&-1<P_.indexOf(e)){for(;f!==null;){var d=On(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=ha(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var D=1<<31-wt(v);E.entanglements[1]|=D,v&=~D}Ia(d),(at&6)===0&&(Ac=Mt()+500,Gl(0))}}break;case 31:case 13:E=bs(d,2),E!==null&&bn(E,d,2),Nc(),kh(d,2)}if(d=Bh(l),d===null&&Eh(e,n,l,Hc,i),d===f)break;f=d}f!==null&&l.stopPropagation()}else Eh(e,n,l,null,i)}}function Bh(e){return e=Vn(e),Uh(e)}var Hc=null;function Uh(e){if(Hc=null,e=ya(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=h(n),e!==null)return e;e=null}else if(i===31){if(e=m(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Hc=e,null}function Dg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yn()){case Kn:return 2;case Ua:return 8;case Ze:case qs:return 32;case as:return 268435456;default:return 32}default:return 32}}var zh=!1,Li=null,Bi=null,Ui=null,Kl=new Map,$l=new Map,zi=[],P_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Og(e,n){switch(e){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Kl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(n.pointerId)}}function Zl(e,n,i,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=On(n),n!==null&&Mg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function G_(e,n,i,l,f){switch(n){case"focusin":return Li=Zl(Li,e,n,i,l,f),!0;case"dragenter":return Bi=Zl(Bi,e,n,i,l,f),!0;case"mouseover":return Ui=Zl(Ui,e,n,i,l,f),!0;case"pointerover":var d=f.pointerId;return Kl.set(d,Zl(Kl.get(d)||null,e,n,i,l,f)),!0;case"gotpointercapture":return d=f.pointerId,$l.set(d,Zl($l.get(d)||null,e,n,i,l,f)),!0}return!1}function Vg(e){var n=ya(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=h(i),n!==null){e.blockedOn=n,Zn(e.priority,function(){Ig(i)});return}}else if(n===31){if(n=m(i),n!==null){e.blockedOn=n,Zn(e.priority,function(){Ig(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Bh(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);ul=l,i.target.dispatchEvent(l),ul=null}else return n=On(i),n!==null&&Mg(n),e.blockedOn=i,!1;n.shift()}return!0}function jg(e,n,i){Fc(e)&&i.delete(n)}function q_(){zh=!1,Li!==null&&Fc(Li)&&(Li=null),Bi!==null&&Fc(Bi)&&(Bi=null),Ui!==null&&Fc(Ui)&&(Ui=null),Kl.forEach(jg),$l.forEach(jg)}function Qc(e,n){e.blockedOn===n&&(e.blockedOn=null,zh||(zh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,q_)))}var Xc=null;function kg(e){Xc!==e&&(Xc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Xc===e&&(Xc=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],f=e[n+2];if(typeof l!="function"){if(Uh(l||i)===null)continue;break}var d=On(i);d!==null&&(e.splice(n,3),n-=3,Bf(d,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function Ir(e){function n(D){return Qc(D,e)}Li!==null&&Qc(Li,e),Bi!==null&&Qc(Bi,e),Ui!==null&&Qc(Ui,e),Kl.forEach(n),$l.forEach(n);for(var i=0;i<zi.length;i++){var l=zi[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<zi.length&&(i=zi[0],i.blockedOn===null);)Vg(i),i.blockedOn===null&&zi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],d=i[l+1],v=f[Ft]||null;if(typeof d=="function")v||kg(i);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Ft]||null)E=v.formAction;else if(Uh(f)!==null)continue}else E=v.action;typeof E=="function"?i[l+1]=E:(i.splice(l,3),l-=3),kg(i)}}}function Lg(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Ph(e){this._internalRoot=e}Yc.prototype.render=Ph.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,l=Mn();Ng(i,l,e,n,null,null)},Yc.prototype.unmount=Ph.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ng(e.current,2,null,e,null,null),Nc(),n[pa]=null}};function Yc(e){this._internalRoot=e}Yc.prototype.unstable_scheduleHydration=function(e){if(e){var n=No();e={blockedOn:null,target:e,priority:n};for(var i=0;i<zi.length&&n!==0&&n<zi[i].priority;i++);zi.splice(i,0,e),i===0&&Vg(e)}};var Bg=t.version;if(Bg!=="19.2.1")throw Error(s(527,Bg,"19.2.1"));oe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var H_={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{xn=Kc.inject(H_),$t=Kc}catch{}}return Jl.createRoot=function(e,n){if(!o(e))throw Error(s(299));var i=!1,l="",f=F0,d=Q0,v=X0;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Ag(e,1,!1,null,null,i,l,null,f,d,v,Lg),e[pa]=n.current,Th(e),new Ph(n)},Jl.hydrateRoot=function(e,n,i){if(!o(e))throw Error(s(299));var l=!1,f="",d=F0,v=Q0,E=X0,D=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(D=i.formState)),n=Ag(e,1,!0,n,i??null,l,f,D,d,v,E,Lg),n.context=Cg(null),i=n.current,l=Mn(),l=ls(l),f=wi(l),f.callback=null,Ai(i,f,l),i=l,n.current.lanes=i,ss(n,i),Ia(n),e[pa]=n.current,Th(e),new Yc(n)},Jl.version="19.2.1",Jl}var Gg;function Z_(){if(Gg)return Gh.exports;Gg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Gh.exports=$_(),Gh.exports}var J_=Z_();function W_(r,t){let a;try{a=r()}catch{return}return{getItem:o=>{var c;const h=p=>p===null?null:JSON.parse(p,void 0),m=(c=a.getItem(o))!=null?c:null;return m instanceof Promise?m.then(h):h(m)},setItem:(o,c)=>a.setItem(o,JSON.stringify(c,void 0)),removeItem:o=>a.removeItem(o)}}const sd=r=>t=>{try{const a=r(t);return a instanceof Promise?a:{then(s){return sd(s)(a)},catch(s){return this}}}catch(a){return{then(s){return this},catch(s){return sd(s)(a)}}}},ex=(r,t)=>(a,s,o)=>{let c={storage:W_(()=>localStorage),partialize:q=>q,version:0,merge:(q,U)=>({...U,...q}),...t},h=!1;const m=new Set,p=new Set;let b=c.storage;if(!b)return r((...q)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...q)},s,o);const x=()=>{const q=c.partialize({...s()});return b.setItem(c.name,{state:q,version:c.version})},T=o.setState;o.setState=(q,U)=>(T(q,U),x());const S=r((...q)=>(a(...q),x()),s,o);o.getInitialState=()=>S;let I;const V=()=>{var q,U;if(!b)return;h=!1,m.forEach(W=>{var $;return W(($=s())!=null?$:S)});const k=((U=c.onRehydrateStorage)==null?void 0:U.call(c,(q=s())!=null?q:S))||void 0;return sd(b.getItem.bind(b))(c.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==c.version){if(c.migrate){const $=c.migrate(W.state,W.version);return $ instanceof Promise?$.then(se=>[!0,se]):[!0,$]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var $;const[se,ce]=W;if(I=c.merge(ce,($=s())!=null?$:S),a(I,!0),se)return x()}).then(()=>{k?.(I,void 0),I=s(),h=!0,p.forEach(W=>W(I))}).catch(W=>{k?.(void 0,W)})};return o.persist={setOptions:q=>{c={...c,...q},q.storage&&(b=q.storage)},clearStorage:()=>{b?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>V(),hasHydrated:()=>h,onHydrate:q=>(m.add(q),()=>{m.delete(q)}),onFinishHydration:q=>(p.add(q),()=>{p.delete(q)})},c.skipHydration||V(),I||S},yv=ex,nn=[];for(let r=0;r<256;++r)nn.push((r+256).toString(16).slice(1));function tx(r,t=0){return(nn[r[t+0]]+nn[r[t+1]]+nn[r[t+2]]+nn[r[t+3]]+"-"+nn[r[t+4]]+nn[r[t+5]]+"-"+nn[r[t+6]]+nn[r[t+7]]+"-"+nn[r[t+8]]+nn[r[t+9]]+"-"+nn[r[t+10]]+nn[r[t+11]]+nn[r[t+12]]+nn[r[t+13]]+nn[r[t+14]]+nn[r[t+15]]).toLowerCase()}let Fh;const nx=new Uint8Array(16);function ax(){if(!Fh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fh=crypto.getRandomValues.bind(crypto)}return Fh(nx)}const ix=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qg={randomUUID:ix};function sx(r,t,a){r=r||{};const s=r.random??r.rng?.()??ax();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,tx(s)}function $c(r,t,a){return qg.randomUUID&&!r?qg.randomUUID():sx(r)}const me={COLUMNS:8,ROWS:16,CELL_SIZE:40},Qh={1:["red","blue","green","yellow","purple"],6:["red","blue","green","yellow","purple","cyan"],11:["red","blue","green","yellow","purple","cyan","pink"],16:["red","blue","green","yellow","purple","cyan","pink","orange"]},Od={red:"#ff4757",blue:"#3742fa",green:"#2ed573",yellow:"#ffa502",purple:"#8854d0",cyan:"#00d2d3",pink:"#ff6b81",orange:"#ff7f50",rainbow:"linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff)"},rx={red:"#D55E00",blue:"#0072B2",green:"#009E73",yellow:"#F0E442",purple:"#CC79A7",cyan:"#56B4E9",pink:"#E69F00",orange:"#999999",rainbow:"linear-gradient(45deg, #D55E00, #0072B2, #009E73, #F0E442)"},lx={red:"striped",blue:"dotted",green:"crosshatch",yellow:"solid",purple:"diagonal",cyan:"grid",pink:"waves",orange:"circles",rainbow:"rainbow"},vv={normal:{name:"",icon:"",description:" ",baseChance:0,minLevel:1},bomb:{name:"",icon:"",description:" 3x3  ",baseChance:.05,minLevel:3,color:"#ff6b6b"},lightning:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:5,color:"#ffd93d"},cross:{name:"",icon:"",description:"    ",baseChance:.04,minLevel:4,color:"#6bcb77"},frozen:{name:"",icon:"",description:"2  ",baseChance:.06,minLevel:2,color:"#74b9ff"},stone:{name:"",icon:"",description:" ,    ",baseChance:.03,minLevel:6,color:"#636e72"},multiplier:{name:"",icon:"",description:"      2",baseChance:.035,minLevel:4,color:"#fdcb6e"},shuffle:{name:"",icon:"",description:"   3x3   ",baseChance:.02,minLevel:8,color:"#a29bfe"},colorShift:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:7,color:"#fd79a8"}},qi={BASE_DROP_SPEED:1e3,SPEED_DECREASE_PER_LEVEL:20,MIN_DROP_SPEED:200,LOCK_DELAY:400,DAS_DELAY:120,ARR_RATE:30,SOFT_DROP_MULTIPLIER:15,FUSION_ANIMATION_DURATION:180,CHAIN_DELAY:120,COMBO_TIMEOUT:3e3,FEVER_DURATION:8e3,SPECIAL_EFFECT_DURATION:300,GARBAGE_INTERVAL:45,GARBAGE_WARNING_TIME:5},Da={BASE_POINTS_PER_BLOCK:10,CHAIN_BONUS_MULTIPLIER:150,COMBO_BONUS:75,MASS_FUSION_THRESHOLD:6,MASS_FUSION_BONUS_PER_BLOCK:30,PERFECT_CLEAR_BONUS:15e3,LEVEL_UP_THRESHOLD:1e3,SPECIAL_BLOCK_BONUS:50,FEVER_MULTIPLIER:3},rd={MIN_BLOCKS_TO_FUSE:4,BOMB_RADIUS:1};function ox(r){return rd.MIN_BLOCKS_TO_FUSE}const Os={GAUGE_PER_CHAIN:10,GAUGE_PER_COMBO:5,MAX_GAUGE:100,DECAY_RATE:2},ks={SPECIAL_CHANCE_PER_LEVEL:.004,GARBAGE_START_LEVEL:10,GARBAGE_ROWS_PER_INTERVAL:1,GARBAGE_MAX_ROWS:2,GARBAGE_INTERVAL_DECREASE:.3,GARBAGE_MIN_INTERVAL:20};function Hg(r){return r>=40?8:r>=35?7:r>=30?6:r>=25?5:r>=20?4:r>=10?3:r>=2?2:1}const cx=[{offsets:[[0,0],[1,0]],name:"horizontal"},{offsets:[[0,0],[0,1]],name:"vertical"}],ux=[{offsets:[[0,0],[1,0],[2,0]],name:"line-h"},{offsets:[[0,0],[0,1],[0,2]],name:"line-v"},{offsets:[[0,0],[1,0],[1,1]],name:"L-right"},{offsets:[[0,0],[0,1],[1,1]],name:"L-left"},{offsets:[[1,0],[0,1],[1,1]],name:"L-up"},{offsets:[[0,0],[1,0],[0,1]],name:"corner"}],fx=[{offsets:[[0,0],[1,0],[2,0],[3,0]],name:"line-h4"},{offsets:[[0,0],[0,1],[0,2],[0,3]],name:"line-v4"},{offsets:[[0,0],[1,0],[0,1],[1,1]],name:"square"},{offsets:[[1,0],[0,1],[1,1],[2,1]],name:"T-down"},{offsets:[[0,0],[0,1],[1,1],[0,2]],name:"T-right"},{offsets:[[0,0],[1,0],[1,1],[2,1]],name:"zigzag"},{offsets:[[1,0],[0,1],[1,1],[1,2]],name:"plus"},{offsets:[[0,0],[1,0],[2,0],[1,1]],name:"arrow"}],hx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0]],name:"line-h5"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2]],name:"L-big"},{offsets:[[0,0],[1,0],[2,0],[1,1],[1,2]],name:"T-long"},{offsets:[[1,0],[0,1],[1,1],[2,1],[1,2]],name:"cross"},{offsets:[[0,0],[1,0],[1,1],[2,1],[3,1]],name:"snake"},{offsets:[[0,0],[0,1],[1,1],[1,2],[2,2]],name:"stairs"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1]],name:"P-shape"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1]],name:"U-shape"}],dx=[{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1]],name:"rect-2x3"},{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0]],name:"line-h6"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"tree"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2],[0,3]],name:"L-huge"},{offsets:[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],name:"tower"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"H-shape"}],mx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0]],name:"line-h7"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],name:"diamond"},{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"arrow-big"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"window"},{offsets:[[1,0],[0,1],[1,1],[2,1],[3,1],[1,2],[1,3]],name:"anchor"}],px=[{offsets:[[0,0],[1,0],[2,0],[3,0],[0,1],[1,1],[2,1],[3,1]],name:"rect-2x4"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[3,1],[1,2],[2,2]],name:"bone"},{offsets:[[0,0],[1,0],[2,0],[0,1],[2,1],[0,2],[1,2],[2,2]],name:"frame"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2],[1,3]],name:"big-cross"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1],[3,1],[2,2],[3,2]],name:"zigzag-big"}];function gx(r){let t;switch(r){case 2:t=cx;break;case 3:t=ux;break;case 4:t=fx;break;case 5:t=hx;break;case 6:t=dx;break;case 7:t=mx;break;case 8:t=px;break;default:return{offsets:[[0,0]],name:"single"}}return t[Math.floor(Math.random()*t.length)]}function yx(r){const t=qi.GARBAGE_INTERVAL-(r-ks.GARBAGE_START_LEVEL)*ks.GARBAGE_INTERVAL_DECREASE;return Math.max(t,ks.GARBAGE_MIN_INTERVAL)}function Fg(r){const t=[];return t.push({type:"score",target:r*500+(r-1)*200,current:0,completed:!1}),r>=3&&t.push({type:"clearBlocks",target:20+r*5,current:0,completed:!1}),r>=5&&t.push({type:"chains",target:Math.min(3+Math.floor(r/3),8),current:0,completed:!1}),r>=7&&t.push({type:"clearSpecial",target:3+Math.floor(r/4),current:0,completed:!1}),r>=10&&t.push({type:"clearStone",target:2+Math.floor(r/5),current:0,completed:!1}),t}const fu={getMovesForLevel:r=>Math.max(10,25-Math.floor(r/2)),getTargetScore:r=>500+r*300+Math.floor(r/3)*200,getTargetBlocks:r=>15+r*5,getColorCount:r=>r<=3?4:r<=6?5:r<=10?6:7};function Qg(r){const t=[];if(t.push({type:"score",target:fu.getTargetScore(r),current:0,completed:!1}),r>=2&&t.push({type:"clearBlocks",target:fu.getTargetBlocks(r),current:0,completed:!1}),r>=5&&t.push({type:"chains",target:2+Math.floor(r/3),current:0,completed:!1}),r>=8){const a=["red","blue","green","yellow","purple"],s=a[r%a.length];t.push({type:"clearColor",target:10+r,current:0,color:s,completed:!1})}return t}const vx={colorBomb:{name:" ",description:"    ",icon:"",price:{coins:500,gems:20}},rowClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},columnClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},gravityShift:{name:" ",description:"  ",icon:"",price:{coins:600,gems:25}},timeSlow:{name:" ",description:"5 50%  ",icon:"",price:{coins:300,gems:10}},rainbowBlock:{name:" ",description:"    ",icon:"",price:{coins:800,gems:30}},scoreMultiplier:{name:" ",description:"30  2",icon:"",price:{coins:700,gems:28}},blockPreview:{name:"",description:"10  ",icon:"",price:{coins:200,gems:8}},undo:{name:"",description:" 3 ",icon:"",price:{coins:500,gems:20}},freeze:{name:"",description:"5   ",icon:"",price:{coins:400,gems:15}}},ld={down:{dx:0,dy:1},up:{dx:0,dy:-1},left:{dx:-1,dy:0},right:{dx:1,dy:0}},bx={down:"",up:"",left:"",right:""},_x=5,bv={classic:{name:"",description:" !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1},timeAttack:{name:"",description:"2   !",icon:"",hasTimeLimit:!0,timeLimit:120,hasLevelLimit:!1},puzzle:{name:"",description:"   ",icon:"",hasTimeLimit:!1,hasLevelLimit:!0,movesLimit:30},zen:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,noGameOver:!0},daily:{name:" ",description:"  !",icon:"",hasTimeLimit:!0,timeLimit:180,hasLevelLimit:!1},survival:{name:"",description:"  !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,speedIncrease:!0},challenge:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,hasObjectives:!0}},Gi={SWIPE_THRESHOLD:30,FAST_SWIPE_VELOCITY:1e3,LONG_PRESS_DURATION:500,DOUBLE_TAP_DELAY:300},xx={light:[10],medium:[20],heavy:[30],success:[10,50,20],error:[30,50,30],selection:[5]};function Vd(r){const t=Object.keys(Qh).map(Number).sort((a,s)=>s-a);for(const a of t)if(r>=a)return Qh[a];return Qh[1]}function Xg(r){const t=qi.BASE_DROP_SPEED-(r-1)*qi.SPEED_DECREASE_PER_LEVEL;return Math.max(t,qi.MIN_DROP_SPEED)}function Tx(r){return Da.LEVEL_UP_THRESHOLD*r+(r-1)*200}function Ex(r){return Math.min(.15,.05+r*ks.SPECIAL_CHANCE_PER_LEVEL)}function Yg(r){const t=Object.entries(vv).filter(([o,c])=>o!=="normal"&&r>=c.minLevel).map(([o,c])=>({type:o,chance:c.baseChance}));if(t.length===0)return"normal";const a=t.reduce((o,c)=>o+c.chance,0);let s=Math.random()*a;for(const{type:o,chance:c}of t)if(s-=c,s<=0)return o;return t[0].type}function Sx(r){const{blocksCleared:t,chainCount:a,comboCount:s,level:o,powerUpMultiplier:c,perfectClear:h,isFeverMode:m=!1,specialBlocksCleared:p=0}=r;let b=t*Da.BASE_POINTS_PER_BLOCK*o;const x=a>1?Math.pow(a,2.5)*Da.CHAIN_BONUS_MULTIPLIER:0,T=s*Da.COMBO_BONUS*(1+s*.1),S=t>=Da.MASS_FUSION_THRESHOLD?t*Da.MASS_FUSION_BONUS_PER_BLOCK*Math.floor(t/Da.MASS_FUSION_THRESHOLD):0,I=p*Da.SPECIAL_BLOCK_BONUS*o,V=h?Da.PERFECT_CLEAR_BONUS*o:0,q=m?Da.FEVER_MULTIPLIER:1;return Math.floor((b+x+T+S+I+V)*c*q)}const wx=[{id:"score_10k",name:"",description:"10,000 ",category:"score",target:1e4,reward:{gems:10},icon:""},{id:"score_50k",name:"",description:"50,000 ",category:"score",target:5e4,reward:{gems:25},icon:""},{id:"score_100k",name:"",description:"100,000 ",category:"score",target:1e5,reward:{gems:50},icon:""},{id:"score_500k",name:"",description:"500,000 ",category:"score",target:5e5,reward:{gems:100},icon:""},{id:"score_1m",name:"",description:"1,000,000 ",category:"score",target:1e6,reward:{gems:200,skin:"score_master"},icon:""},{id:"score_5m",name:"",description:"5,000,000 ",category:"score",target:5e6,reward:{gems:500},icon:""},{id:"score_10m",name:"",description:"10,000,000 ",category:"score",target:1e7,reward:{gems:1e3,skin:"mythic_legend"},icon:""},{id:"combo_10",name:" ",description:"10  ",category:"combo",target:10,reward:{gems:10},icon:""},{id:"combo_20",name:" ",description:"20  ",category:"combo",target:20,reward:{gems:25},icon:""},{id:"combo_30",name:" ",description:"30  ",category:"combo",target:30,reward:{gems:50},icon:""},{id:"combo_50",name:" ",description:"50  ",category:"combo",target:50,reward:{gems:100,skin:"combo_legend"},icon:""},{id:"combo_100",name:" ",description:"100  ",category:"combo",target:100,reward:{gems:300},icon:""},{id:"chain_5",name:" ",description:"5 ",category:"chain",target:5,reward:{gems:15},icon:""},{id:"chain_10",name:" ",description:"10 ",category:"chain",target:10,reward:{gems:50},icon:""},{id:"chain_15",name:" ",description:"15 ",category:"chain",target:15,reward:{gems:150,skin:"chain_master"},icon:""},{id:"chain_20",name:" ",description:"20 ",category:"chain",target:20,reward:{gems:300},icon:""},{id:"perfect_clear",name:"!",description:"  ",category:"special",target:1,reward:{gems:100},icon:""},{id:"comeback",name:" ",description:"  ",category:"special",target:1,reward:{gems:75},icon:""},{id:"speed_demon",name:" ",description:"1  50,000",category:"special",target:1,reward:{gems:100},icon:""},{id:"no_powerup",name:"",description:"   20",category:"special",target:1,reward:{gems:150},icon:""},{id:"all_colors",name:"",description:"5   ",category:"special",target:1,reward:{gems:50},icon:""},{id:"first_blood",name:" ",description:"  ",category:"special",target:1,reward:{gems:5},icon:""},{id:"marathon",name:"",description:"30  ",category:"special",target:1,reward:{gems:80},icon:""},{id:"games_10",name:"",description:"10 ",category:"play",target:10,reward:{coins:500},icon:""},{id:"games_100",name:"",description:"100 ",category:"play",target:100,reward:{gems:50},icon:""},{id:"games_500",name:"",description:"500 ",category:"play",target:500,reward:{gems:200},icon:""},{id:"games_1000",name:"",description:"1000 ",category:"play",target:1e3,reward:{gems:500},icon:""},{id:"time_1h",name:"",description:" 1 ",category:"play",target:3600,reward:{coins:1e3},icon:""},{id:"time_10h",name:"",description:" 10 ",category:"play",target:36e3,reward:{gems:100},icon:""},{id:"time_100h",name:" ",description:" 100 ",category:"play",target:36e4,reward:{gems:1e3,skin:"veteran"},icon:""},{id:"secret_gravity",name:"???",description:"   ",category:"hidden",target:1,reward:{gems:50},icon:""},{id:"secret_lucky",name:"???",description:" 3  ",category:"hidden",target:1,reward:{gems:100},icon:""},{id:"secret_developer",name:"???",description:"  ",category:"hidden",target:1,reward:{gems:200},icon:""}];function Ax(){return wx.map(r=>({...r,current:0,completed:!1,claimed:!1}))}const co={classic:{colors:["#ff6b7a","#5b6dff","#4ade80","#ffc532","#a578e8"],borderRadius:"6px",borderWidth:0,borderStyle:"none",innerEffect:"glossy",animation:"shimmer",glowIntensity:.15,texture:"none"},neon:{colors:["#ff2d92","#00f5ff","#4dff4d","#fff44f","#e040fb"],borderRadius:"4px",borderWidth:3,borderStyle:"solid",innerEffect:"glow",animation:"pulse",glowIntensity:1,texture:"circuit"},candy:{colors:["#ff85b3","#c084fc","#5eead4","#fcd34d","#fb7185"],borderRadius:"50%",borderWidth:4,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.4,texture:"dots"},pixel:{colors:["#ef4444","#3b82f6","#22c55e","#eab308","#8b5cf6"],borderRadius:"0px",borderWidth:4,borderStyle:"solid",innerEffect:"flat",animation:"none",glowIntensity:.1,texture:"lines"},galaxy:{colors:["#a78bfa","#f472b6","#22d3ee","#fb7185","#60a5fa"],borderRadius:"8px",borderWidth:2,borderStyle:"solid",innerEffect:"gradient",animation:"shimmer",particleEffect:!0,glowIntensity:.7,texture:"dots"},crystal:{colors:["#f5d0fe","#bae6fd","#bbf7d0","#fef9c3","#fecdd3"],borderRadius:"10px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.85,texture:"cracks"},holographic:{colors:["#f9a8d4","#d8b4fe","#93c5fd","#6ee7b7","#fde047"],borderRadius:"6px",borderWidth:2,borderStyle:"solid",innerEffect:"metallic",animation:"shimmer",glowIntensity:.9,texture:"lines"},animated_fire:{colors:["#ff3b3b","#ff7b00","#ffcc00","#ff5722","#ff8a50"],borderRadius:"6px",borderWidth:0,borderStyle:"none",innerEffect:"glow",animation:"fire",particleEffect:!0,glowIntensity:1,texture:"noise"},animated_ice:{colors:["#38bdf8","#7dd3fc","#bae6fd","#22d3ee","#06b6d4"],borderRadius:"4px",borderWidth:3,borderStyle:"solid",innerEffect:"glass",animation:"ice",particleEffect:!0,glowIntensity:.8,texture:"cracks"},animated_electric:{colors:["#fef08a","#bef264","#5eead4","#f0abfc","#fcd34d"],borderRadius:"6px",borderWidth:3,borderStyle:"solid",innerEffect:"glow",animation:"electric",particleEffect:!0,glowIntensity:1,texture:"circuit"}};Object.fromEntries(Object.entries(co).map(([r,t])=>[r,t.colors]));const od=[{id:"classic",name:"",price:0,currency:"free",rarity:"common",owned:!0,equipped:!0},{id:"neon",name:"",price:1e3,currency:"coins",rarity:"common",owned:!1,equipped:!1},{id:"candy",name:"",price:2e3,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"pixel",name:"",price:2500,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"galaxy",name:"",price:100,currency:"gems",rarity:"rare",owned:!1,equipped:!1},{id:"crystal",name:"",price:200,currency:"gems",rarity:"epic",owned:!1,equipped:!1},{id:"holographic",name:"",price:500,currency:"gems",rarity:"legendary",owned:!1,equipped:!1},{id:"animated_fire",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_ice",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_electric",name:"",price:1e3,currency:"gems",rarity:"mythic",owned:!1,equipped:!1,animated:!0}],hu=[{id:"dark",name:"",description:"  +  ",price:0,currency:"free",owned:!0,equipped:!0,colors:{background:"#050510",backgroundGradient:"radial-gradient(ellipse at 50% 0%, #1a1a4a 0%, #0a0a20 40%, #050510 70%), radial-gradient(circle at 80% 80%, #15152f 0%, transparent 40%)",panel:"#12122a",panelBorder:"rgba(100,120,255,0.15)",accent:"#6b8fff",text:"#ffffff",textSecondary:"#9ca3af",danger:"#ff5c6c",success:"#4ade80"}},{id:"light",name:"",description:"  +  ",price:500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#f0f4ff",backgroundGradient:"linear-gradient(180deg, #ffffff 0%, #e8f0ff 50%, #d0e0ff 100%), radial-gradient(circle at 70% 20%, rgba(255,200,100,0.2) 0%, transparent 40%)",panel:"rgba(255,255,255,0.95)",panelBorder:"rgba(100,130,200,0.2)",accent:"#4f6cff",text:"#1a1a3e",textSecondary:"#5c6b8a",danger:"#ef4444",success:"#22c55e"}},{id:"ocean",name:"",description:"  +   +  ",price:1500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#041525",backgroundGradient:"radial-gradient(ellipse at 50% 100%, #0a4a6a 0%, #062540 40%, #041525 70%), radial-gradient(circle at 30% 30%, rgba(0,200,255,0.1) 0%, transparent 40%)",panel:"rgba(10,60,90,0.8)",panelBorder:"rgba(34,211,238,0.35)",accent:"#22d3ee",text:"#e0f7ff",textSecondary:"#7dd3fc",danger:"#fb7185",success:"#34d399"}},{id:"forest",name:"",description:"  +  + ",price:150,currency:"gems",owned:!1,equipped:!1,colors:{background:"#071510",backgroundGradient:"radial-gradient(ellipse at 30% 80%, rgba(34,197,94,0.2) 0%, transparent 50%), radial-gradient(circle at 70% 30%, #0a2a15 0%, #071510 60%)",panel:"rgba(20,60,35,0.85)",panelBorder:"rgba(74,222,128,0.35)",accent:"#4ade80",text:"#ecfdf5",textSecondary:"#86efac",danger:"#fb923c",success:"#a3e635"}},{id:"sunset",name:"",description:"  +  ",price:200,currency:"gems",owned:!1,equipped:!1,colors:{background:"#15080f",backgroundGradient:"linear-gradient(180deg, #4a1832 0%, #2d1528 30%, #15080f 70%), radial-gradient(circle at 60% 20%, rgba(255,100,80,0.25) 0%, transparent 50%)",panel:"rgba(60,30,50,0.85)",panelBorder:"rgba(251,113,133,0.4)",accent:"#fb7185",text:"#fff1f2",textSecondary:"#fda4af",danger:"#ef4444",success:"#fdba74"}},{id:"space",name:"",description:" +  +  ",price:300,currency:"gems",owned:!1,equipped:!1,colors:{background:"#030308",backgroundGradient:"radial-gradient(ellipse at 20% 30%, rgba(139,92,246,0.25) 0%, transparent 40%), radial-gradient(ellipse at 80% 70%, rgba(236,72,153,0.15) 0%, transparent 40%), radial-gradient(circle at 50% 50%, #0a0a20 0%, #030308 70%)",panel:"rgba(20,15,40,0.9)",panelBorder:"rgba(168,85,247,0.45)",accent:"#a855f7",text:"#f5f3ff",textSecondary:"#c4b5fd",danger:"#f472b6",success:"#a78bfa"}},{id:"cyberpunk",name:"",description:"  +   + ",price:500,currency:"gems",owned:!1,equipped:!1,colors:{background:"#08080f",backgroundGradient:"linear-gradient(180deg, #0f0a1a 0%, #08080f 50%), radial-gradient(circle at 20% 80%, rgba(255,45,146,0.2) 0%, transparent 40%), radial-gradient(circle at 80% 20%, rgba(0,245,255,0.15) 0%, transparent 40%)",panel:"rgba(25,20,40,0.9)",panelBorder:"rgba(255,45,146,0.5)",accent:"#ff2d92",text:"#f8f0ff",textSecondary:"#e9d5ff",danger:"#ff3b3b",success:"#00f5aa"}},{id:"cherry",name:"",description:"  +  ",price:400,currency:"gems",owned:!1,equipped:!1,colors:{background:"#140a10",backgroundGradient:"radial-gradient(ellipse at 60% 30%, rgba(251,207,232,0.2) 0%, transparent 50%), radial-gradient(circle at 30% 70%, rgba(249,168,212,0.15) 0%, transparent 40%), linear-gradient(180deg, #1f1018 0%, #140a10 100%)",panel:"rgba(50,30,40,0.85)",panelBorder:"rgba(251,207,232,0.4)",accent:"#fbcfe8",text:"#fdf2f8",textSecondary:"#f9a8d4",danger:"#fb7185",success:"#fda4af"}},{id:"gold",name:"",description:"   +  ",price:800,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0d0a05",backgroundGradient:"radial-gradient(ellipse at 50% 30%, rgba(255,200,50,0.15) 0%, transparent 50%), radial-gradient(circle at 70% 70%, rgba(255,180,30,0.1) 0%, transparent 40%), linear-gradient(180deg, #1a1508 0%, #0d0a05 100%)",panel:"rgba(40,35,20,0.9)",panelBorder:"rgba(253,224,71,0.5)",accent:"#fde047",text:"#fefce8",textSecondary:"#fef08a",danger:"#fb923c",success:"#facc15"}}],Cx=[{id:"gems_100",amount:100,bonusAmount:0,price:1.99,label:""},{id:"gems_500",amount:500,bonusAmount:50,price:7.99,label:"",highlight:!0},{id:"gems_1200",amount:1200,bonusAmount:200,price:14.99,label:""},{id:"gems_2500",amount:2500,bonusAmount:500,price:27.99,label:""},{id:"gems_6500",amount:6500,bonusAmount:1500,price:54.99,label:" ",bestValue:!0}],Ds=[{id:"coins_50",reward:{coins:50},probability:.25,color:"#888888",label:"50 "},{id:"coins_100",reward:{coins:100},probability:.2,color:"#3742fa",label:"100 "},{id:"coins_200",reward:{coins:200},probability:.15,color:"#3742fa",label:"200 "},{id:"gems_5",reward:{gems:5},probability:.12,color:"#8854d0",label:"5 "},{id:"gems_10",reward:{gems:10},probability:.1,color:"#8854d0",label:"10 "},{id:"powerup",reward:{powerUp:{type:"colorBomb",count:1}},probability:.08,color:"#2ed573",label:""},{id:"gems_25",reward:{gems:25},probability:.05,color:"#ffd700",label:"25 "},{id:"gems_50",reward:{gems:50},probability:.03,color:"#ffd700",label:"50 "},{id:"gems_100",reward:{gems:100},probability:.015,color:"#ff4757",label:"100 !"},{id:"jackpot",reward:{gems:500,coins:5e3},probability:.005,color:"#ff00ff",label:"!"}],cd=[{day:1,reward:{coins:100}},{day:2,reward:{coins:150,powerUp:{type:"timeSlow",count:1}}},{day:3,reward:{coins:200}},{day:4,reward:{coins:250,gems:10}},{day:5,reward:{coins:300,powerUp:{type:"colorBomb",count:1}}},{day:6,reward:{coins:400,gems:20}},{day:7,reward:{coins:500,gems:50}}],Nx={common:"#888888",uncommon:"#2ed573",rare:"#3742fa",epic:"#8854d0",legendary:"#ffd700",mythic:"#ff00ff"},Rx={common:"",uncommon:"",rare:"",epic:"",legendary:"",mythic:""},Mx=[{id:"play_3_games",type:"games_played",target:3,desc:"3 ",reward:{xp:30,coins:100}},{id:"score_10k",type:"score",target:1e4,desc:"10,000 ",reward:{xp:40,coins:150}},{id:"combo_10",type:"combo",target:10,desc:"10  ",reward:{xp:50,coins:200}},{id:"chain_5",type:"chain",target:5,desc:"5 ",reward:{xp:50,gems:10}},{id:"use_powerup",type:"powerup_used",target:3,desc:" 3 ",reward:{xp:30,coins:100}},{id:"fuse_50",type:"blocks_fused",target:50,desc:"50  ",reward:{xp:35,coins:120}},{id:"level_10",type:"level_reached",target:10,desc:" 10 ",reward:{xp:45,coins:180}},{id:"play_classic",type:"mode_played",target:1,desc:"  ",reward:{xp:25,coins:80}},{id:"watch_ad",type:"ad_watched",target:1,desc:" ",reward:{xp:20,coins:50}},{id:"perfect_clear",type:"perfect_clear",target:1,desc:" ",reward:{xp:100,gems:20}}],Ix=[{id:"play_20_games",type:"games_played",target:20,desc:"20 ",reward:{xp:200,gems:50}},{id:"total_score_100k",type:"total_score",target:1e5,desc:" 100,000 ",reward:{xp:300,gems:100}},{id:"max_combo_30",type:"max_combo",target:30,desc:" 30  ",reward:{xp:250,gems:75}},{id:"chain_10",type:"max_chain",target:10,desc:"10 ",reward:{xp:300,gems:150}},{id:"reach_level_20",type:"max_level",target:20,desc:" 20 ",reward:{xp:200,gems:80}},{id:"fuse_500",type:"blocks_fused",target:500,desc:"500  ",reward:{xp:250,gems:90}},{id:"use_all_powerups",type:"unique_powerups",target:5,desc:"5  ",reward:{xp:180,gems:60}},{id:"gravity_all",type:"gravity_directions",target:4,desc:"   ",reward:{xp:150,gems:50}}];function Dx(){return[...Mx].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function Ox(){return[...Ix].sort(()=>Math.random()-.5).slice(0,3).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function ao(r){return Math.floor(100*Math.pow(1.15,r-1))}function Kg(r){let t=1,a=0;for(;a+ao(t)<=r;)a+=ao(t),t++;return t}function $g(r){let t=1,a=0;for(;a+ao(t)<=r;)a+=ao(t),t++;const s=r-a,o=ao(t);return{currentLevelXP:s,nextLevelXP:o,progress:s/o}}const Vx=[{id:"first_step",name:" ",description:"  ",condition:"games >= 1",icon:"",rarity:"common"},{id:"beginner",name:"",description:"10 ",condition:"games >= 10",icon:"",rarity:"common"},{id:"regular",name:"",description:"50 ",condition:"games >= 50",icon:"",rarity:"rare"},{id:"veteran",name:"",description:"100 ",condition:"games >= 100",icon:"",rarity:"epic"},{id:"legend",name:"",description:"500 ",condition:"games >= 500",icon:"",rarity:"legendary"},{id:"score_1k",name:"1 ",description:"1,000 ",condition:"highScore >= 1000",icon:"",rarity:"common"},{id:"score_5k",name:"5 ",description:"5,000 ",condition:"highScore >= 5000",icon:"",rarity:"rare"},{id:"score_10k",name:"",description:"10,000 ",condition:"highScore >= 10000",icon:"",rarity:"epic"},{id:"score_50k",name:" ",description:"50,000 ",condition:"highScore >= 50000",icon:"",rarity:"legendary"},{id:"score_100k",name:" ",description:"100,000 ",condition:"highScore >= 100000",icon:"",rarity:"mythic"},{id:"combo_5",name:" ",description:"5 ",condition:"maxCombo >= 5",icon:"",rarity:"common"},{id:"combo_10",name:" ",description:"10 ",condition:"maxCombo >= 10",icon:"",rarity:"rare"},{id:"combo_20",name:" ",description:"20 ",condition:"maxCombo >= 20",icon:"",rarity:"epic"},{id:"combo_50",name:" ",description:"50 ",condition:"maxCombo >= 50",icon:"",rarity:"legendary"},{id:"chain_3",name:" ",description:"3 ",condition:"maxChain >= 3",icon:"",rarity:"common"},{id:"chain_5",name:" ",description:"5 ",condition:"maxChain >= 5",icon:"",rarity:"rare"},{id:"chain_10",name:" ",description:"10 ",condition:"maxChain >= 10",icon:"",rarity:"epic"},{id:"chain_15",name:" ",description:"15 ",condition:"maxChain >= 15",icon:"",rarity:"legendary"},{id:"level_10",name:"10 ",description:" 10 ",condition:"maxLevel >= 10",icon:"",rarity:"common"},{id:"level_20",name:"20 ",description:" 20 ",condition:"maxLevel >= 20",icon:"",rarity:"rare"},{id:"level_30",name:"30 ",description:" 30 ",condition:"maxLevel >= 30",icon:"",rarity:"epic"},{id:"level_50",name:" ",description:" 50 ",condition:"maxLevel >= 50",icon:"",rarity:"legendary"},{id:"fever_master",name:" ",description:"  10 ",condition:"feverCount >= 10",icon:"",rarity:"rare"},{id:"speed_demon",name:" ",description:" 3  10,000",condition:"speedScore >= 10000",icon:"",rarity:"epic"},{id:"puzzle_solver",name:" ",description:"  20 ",condition:"puzzleLevel >= 20",icon:"",rarity:"epic"},{id:"perfectionist",name:"",description:" 10",condition:"perfectClears >= 10",icon:"",rarity:"legendary"},{id:"early_bird",name:"",description:" 6-9  ",condition:"special",icon:"",rarity:"rare"},{id:"night_owl",name:"",description:" 12-3  ",condition:"special",icon:"",rarity:"rare"},{id:"weekend_warrior",name:" ",description:" 10  ",condition:"special",icon:"",rarity:"rare"},{id:"streak_7",name:"7 ",description:"7  ",condition:"streak >= 7",icon:"",rarity:"epic"},{id:"streak_30",name:"30 ",description:"30  ",condition:"streak >= 30",icon:"",rarity:"legendary"}];function jx(r,t,a,s){const o=Math.floor(r/100),c=t*2,h=a*5,m=s*10;return o+c+h+m}function ud(){return Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null))}function _v(r){const t=Vd(r);return t[Math.floor(Math.random()*t.length)]}function xv(r,t){if(t>0&&t%20===0)return Yg(r);const a=Ex(r);return Math.random()<a?Yg(r):"normal"}function Zg(r,t){const a=[],s=[];for(let o=0;o<r;o++)a.push(_v(t)),s.push(o===0?xv(t,0):"normal");return{colors:a,specialTypes:s}}const kx={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,specialBlocksUsed:0,levelsCompleted:0},Lx={dailyMissions:Dx(),weeklyMissions:Ox()};let Wl=!1;const Jg={board:ud(),currentBlock:null,currentBlocks:[],nextBlocks:[],nextSpecialTypes:[],holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"ready",gameMode:"classic",powerUps:[],activePowerUp:null,gravityDirection:"down",gameTime:0,statistics:kx,continues:0,adWatchedThisGame:!1,missionProgress:Lx,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:[],feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,specialBlockChance:.05,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:1,movesRemaining:0,puzzleLevel:1,puzzleCompleted:!1,currentShapeOffsets:[],basePosition:{x:0,y:0}},Pe=gv()(yv((r,t)=>({...Jg,blocksPlaced:0,startGame:(a="classic")=>{Wl=!1;const s=1,o=1,c=a==="puzzle"?1:Hg(s),{colors:h,specialTypes:m}=Zg(5+c,s);let p=[];a==="challenge"?p=Fg(s):a==="puzzle"&&(p=Qg(o));const b=a==="puzzle"?fu.getMovesForLevel(o):0;r({board:ud(),currentBlock:null,currentBlocks:[],nextBlocks:h,nextSpecialTypes:m,holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:s,combo:0,maxCombo:0,chainCount:0,gameStatus:"playing",gameMode:a,activePowerUp:null,gravityDirection:"down",gameTime:0,continues:0,adWatchedThisGame:!1,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:p,feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,blocksPlaced:0,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:c,movesRemaining:b,puzzleLevel:o,puzzleCompleted:!1}),setTimeout(()=>t().spawnBlock(),100)},pauseGame:()=>{t().gameStatus==="playing"&&r({gameStatus:"paused"})},resumeGame:()=>{t().gameStatus==="paused"&&r({gameStatus:"playing"})},endGame:()=>{const{score:a,statistics:s,combo:o,chainCount:c}=t();r({gameStatus:"gameover",statistics:{...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a,highScore:Math.max(s.highScore,a),maxCombo:Math.max(s.maxCombo,o),maxChain:Math.max(s.maxChain,c)}})},resetGame:()=>{Wl=!1,r({...Jg,statistics:t().statistics,powerUps:t().powerUps,missionProgress:t().missionProgress})},spawnBlock:()=>{const{nextBlocks:a,nextSpecialTypes:s,level:o,gravityDirection:c,board:h,blocksPlaced:m,currentBlocks:p,gameStatus:b}=t();if(!(p.length>0)&&b==="playing"&&!Wl){Wl=!0;try{const x=Hg(o);let T=[...a],S=[...s];for(;T.length<10;)T.push(_v(o)),S.push(xv(o,m+T.length));if(T.length<1)return;const V=gx(x).offsets,q=Math.min(...V.map(N=>N[0])),U=Math.max(...V.map(N=>N[0])),k=Math.min(...V.map(N=>N[1])),W=Math.max(...V.map(N=>N[1])),$=U-q+1,se=W-k+1;let ce,le;switch(c){case"down":ce=Math.floor((me.COLUMNS-$)/2),le=0;break;case"up":ce=Math.floor((me.COLUMNS-$)/2),le=me.ROWS-1-se+1;break;case"left":ce=me.COLUMNS-$,le=Math.floor((me.ROWS-se)/2);break;case"right":ce=0,le=Math.floor((me.ROWS-se)/2);break}const M=[];for(let N=0;N<V.length;N++){const[O,B]=V[N],R=T[N]||T[0],Be=N===0&&S[0]||"normal",tt=ce+O,X=le+B;tt<0||tt>=me.COLUMNS||X<0||X>=me.ROWS||h[X][tt]===null&&M.push({id:$c(),color:R,x:tt,y:X,targetY:X,specialType:Be})}if(M.length===0){t().endGame();return}if(c==="down"){let N=0;for(let O=0;O<me.COLUMNS;O++)h[0][O]!==null&&N++,h[1][O]!==null&&N++;if(N>=me.COLUMNS){t().endGame();return}}const w=[...T.slice(x)],C=[...S.slice(x)];r({currentBlock:M[0]||null,currentBlocks:M,nextBlocks:w,nextSpecialTypes:C,canHold:!0,blocksPlaced:m+x,fallingBlockCount:x,currentShapeOffsets:V,basePosition:{x:ce,y:le}})}finally{Wl=!1}}},moveBlock:a=>{const{currentBlocks:s,board:o,gravityDirection:c}=t();if(s.length===0)return;const h=[],m=new Set;for(const p of s){let b=p.x,x=p.y;if(c==="down"||c==="up"?b=a==="left"?p.x-1:p.x+1:x=a==="left"?p.y-1:p.y+1,b<0||b>=me.COLUMNS||x<0||x>=me.ROWS||o[x][b]!==null)return;h.push({...p,x:b,y:x}),m.add(`${b},${x}`)}r({currentBlock:h[0]||null,currentBlocks:h})},rotateBlock:()=>{const{currentBlocks:a,board:s}=t();if(a.length<=1)return;const o=a[0],c=[];let h=!0;for(let m=0;m<a.length;m++){const p=a[m],b=p.x-o.x,x=p.y-o.y,T=o.x-x,S=o.y+b;if(T<0||T>=me.COLUMNS||S<0||S>=me.ROWS){h=!1;break}if(s[S]?.[T]!==null){h=!1;break}c.push({...p,x:T,y:S})}if(!h){const m=[[-1,0],[1,0],[-2,0],[2,0],[0,-1],[0,1]];for(const[p,b]of m){const x=[];let T=!0;for(let S=0;S<a.length;S++){const I=a[S],V=I.x-o.x,q=I.y-o.y,U=o.x-q+p,k=o.y+V+b;if(U<0||U>=me.COLUMNS||k<0||k>=me.ROWS||s[k]?.[U]!==null){T=!1;break}x.push({...I,x:U,y:k})}if(T&&x.length===a.length){c.length=0,c.push(...x),h=!0;break}}}if(h&&c.length===a.length){const m=c[0],p=c.map(b=>[b.x-m.x,b.y-m.y]);r({currentBlock:c[0]||null,currentBlocks:c,currentShapeOffsets:p,basePosition:{x:m.x,y:m.y}})}},softDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:h}=ld[o];let m=!1;new Set(a.map(b=>`${b.x},${b.y}`));for(const b of a){const x=b.x+c,T=b.y+h;if(x<0||x>=me.COLUMNS||T<0||T>=me.ROWS){m=!0;break}if(s[T]?.[x]!==null){m=!0;break}}if(m){t().placeBlock();return}const p=a.map(b=>({...b,x:b.x+c,y:b.y+h}));r({currentBlock:p[0]||null,currentBlocks:p})},hardDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:h}=ld[o],m=new Set,p=s.map(T=>[...T]),b=[...a].sort((T,S)=>o==="down"?S.y-T.y:o==="up"?T.y-S.y:o==="right"?S.x-T.x:T.x-S.x),x=[];for(const T of b){let S=T.x,I=T.y;for(;;){const V=S+c,q=I+h;if(V<0||V>=me.COLUMNS||q<0||q>=me.ROWS||p[q]?.[V]!==null||m.has(`${V},${q}`))break;S=V,I=q}m.add(`${S},${I}`),x.push({...T,x:S,y:I}),p[I][S]={id:T.id||$c(),color:T.color,x:S,y:I,specialType:T.specialType,frozenCount:T.specialType==="frozen"?2:void 0,createdAt:Date.now()}}r({currentBlock:x[0]||null,currentBlocks:x}),t().placeBlock()},doHoldBlock:()=>{const{currentBlock:a,holdBlock:s,holdSpecialType:o,canHold:c}=t();!a||!c||(s&&o!==null?r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:{color:s,x:Math.floor(me.COLUMNS/2),y:0,targetY:0,specialType:o},canHold:!1}):(r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:null,canHold:!1}),t().spawnBlock()))},placeBlock:()=>{const{currentBlocks:a,board:s,garbagePending:o,gameMode:c}=t();if(a.length===0)return;let h=s.map(m=>[...m]);for(const m of a){const p={id:$c(),color:m.color,x:m.x,y:m.y,specialType:m.specialType,frozenCount:m.specialType==="frozen"?2:void 0,createdAt:Date.now()};h[m.y][m.x]=p}r({board:h,currentBlock:null,currentBlocks:[]}),c==="puzzle"&&t().decrementMoves(),o>0&&c!=="puzzle"&&setTimeout(()=>{t().addGarbageRows(t().garbagePending)},100)},setGravityDirection:a=>{r({gravityDirection:a,isPowerUpSelecting:!1,selectedGravityDirection:null})},toggleGravitySelection:a=>{r({isPowerUpSelecting:a})},cycleGravity:()=>{const{gravityDirection:a}=t(),s=["down","right","up","left"],c=(s.indexOf(a)+1)%s.length;r({gravityDirection:s[c]})},addPowerUp:(a,s=1)=>{const{powerUps:o}=t(),c=o.findIndex(h=>h.type===a);if(c>=0){const h=[...o];h[c]={...h[c],count:h[c].count+s},r({powerUps:h})}else r({powerUps:[...o,{type:a,count:s}]})},usePowerUp:a=>{const{powerUps:s}=t(),o=s.findIndex(h=>h.type===a&&h.count>0);if(o<0)return;const c=[...s];c[o]={...c[o],count:c[o].count-1},c[o].count<=0&&c.splice(o,1),r({powerUps:c})},activatePowerUp:a=>{r({activePowerUp:a})},deactivatePowerUp:()=>{r({activePowerUp:null})},updateBoard:a=>{r({board:a})},addScore:a=>{const{score:s,activePowerUp:o,isFeverMode:c}=t();let h=o?.type==="scoreMultiplier"?2:1;c&&(h*=3),r({score:s+a*h}),t().checkLevelUp()},incrementCombo:()=>{const{combo:a,maxCombo:s}=t(),o=a+1;r({combo:o,maxCombo:Math.max(s,o),comboTimer:3}),t().addFeverGauge(Os.GAUGE_PER_COMBO*o)},resetCombo:()=>{r({combo:0,comboTimer:0})},incrementChain:()=>{const{chainCount:a}=t(),s=a+1;r({chainCount:s}),t().addFeverGauge(Os.GAUGE_PER_CHAIN*s)},resetChain:()=>{r({chainCount:0})},checkLevelUp:()=>{const{score:a,level:s,gameMode:o}=t(),c=Tx(s);if(a>=c){const h=s+1,m=o==="challenge"?Fg(h):t().levelObjectives;r({level:h,levelObjectives:m})}},addFeverGauge:a=>{const{feverGauge:s,isFeverMode:o}=t();if(o)return;const c=Math.min(Os.MAX_GAUGE,s+a);r({feverGauge:c}),c>=Os.MAX_GAUGE&&t().activateFeverMode()},activateFeverMode:()=>{r({isFeverMode:!0,feverGauge:Os.MAX_GAUGE})},deactivateFeverMode:()=>{r({isFeverMode:!1,feverGauge:0})},updateLevelObjective:(a,s)=>{const{levelObjectives:o}=t(),c=o.map(h=>{if(h.type===a&&!h.completed){const m=h.current+s;return{...h,current:m,completed:m>=h.target}}return h});r({levelObjectives:c}),c.length>0&&c.every(h=>h.completed)&&r({gameStatus:"levelComplete"})},setDangerLevel:a=>{r({dangerLevel:a})},decrementBlocksUntilSpecial:()=>{const{blocksUntilSpecial:a}=t();a>0?r({blocksUntilSpecial:a-1}):r({blocksUntilSpecial:10+Math.floor(Math.random()*5)})},addGarbageRows:a=>{const s=o=>{if(o<=0){r({garbagePending:0});return}const{board:c,level:h}=t(),m=Vd(h),p=Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null));for(let S=1;S<me.ROWS;S++)for(let I=0;I<me.COLUMNS;I++){const V=c[S][I];V&&(p[S-1][I]={...V,y:S-1})}const b=Math.floor(Math.random()*me.COLUMNS),x=me.ROWS-1;for(let S=0;S<me.COLUMNS;S++)S===b?p[x][S]=null:p[x][S]={id:$c(),color:m[Math.floor(Math.random()*m.length)],x:S,y:x,specialType:Math.random()<.1?"stone":"normal",createdAt:Date.now()};r({board:p});let T=!1;for(let S=0;S<me.COLUMNS;S++)if(p[0][S]!==null){T=!0;break}if(T){t().endGame();return}o>1?setTimeout(()=>s(o-1),300):r({garbagePending:0})};s(a)},incrementGarbageTimer:()=>{const{garbageTimer:a,level:s,garbagePending:o}=t();if(s<ks.GARBAGE_START_LEVEL)return;const c=yx(s),h=a+1;if(h>=c){const m=Math.min(ks.GARBAGE_ROWS_PER_INTERVAL+Math.floor(s/5),ks.GARBAGE_MAX_ROWS);r({garbageTimer:0,garbagePending:o+m})}else r({garbageTimer:h})},updateStatistics:a=>{const{statistics:s}=t();r({statistics:{...s,...a}})},updateMissionProgress:(a,s)=>{const{missionProgress:o}=t(),c=o.dailyMissions.map(m=>{if(m.type===a&&!m.completed){const p=m.current+s;return{...m,current:p,completed:p>=m.target}}return m}),h=o.weeklyMissions.map(m=>{if(m.type===a&&!m.completed){const p=m.current+s;return{...m,current:p,completed:p>=m.target}}return m});r({missionProgress:{dailyMissions:c,weeklyMissions:h}})},incrementGameTime:()=>{const{gameTime:a,comboTimer:s,feverGauge:o,isFeverMode:c}=t();if(s>0){const h=s-1;h<=0?t().resetCombo():r({comboTimer:h})}!c&&o>0&&r({feverGauge:Math.max(0,o-Os.DECAY_RATE)}),t().incrementGarbageTimer(),r({gameTime:a+1})},continueGame:()=>{const{continues:a,board:s}=t(),o=s.map((c,h)=>h<4?Array(me.COLUMNS).fill(null):c);r({board:o,gameStatus:"playing",continues:a+1}),t().spawnBlock()},decrementMoves:()=>{const{movesRemaining:a,gameMode:s}=t();if(s!=="puzzle")return;const o=a-1;r({movesRemaining:o}),o<=0&&t().checkPuzzleComplete()},nextPuzzleLevel:()=>{const{puzzleLevel:a}=t(),s=a+1,o=fu.getMovesForLevel(s),c=Qg(s),{colors:h,specialTypes:m}=Zg(6,1);r({board:ud(),currentBlock:null,currentBlocks:[],nextBlocks:h,nextSpecialTypes:m,score:0,puzzleLevel:s,movesRemaining:o,levelObjectives:c,puzzleCompleted:!1,gameStatus:"playing",combo:0,chainCount:0}),setTimeout(()=>t().spawnBlock(),100)},checkPuzzleComplete:()=>{const{levelObjectives:a,gameMode:s,movesRemaining:o}=t();if(s!=="puzzle")return;a.every(h=>h.completed)?r({puzzleCompleted:!0,gameStatus:"levelComplete"}):o<=0&&t().endGame()}}),{name:"chromafall-game-storage",partialize:r=>({statistics:r.statistics,powerUps:r.powerUps,missionProgress:r.missionProgress})})),Bx={soundEnabled:!0,musicEnabled:!0,soundVolume:.7,musicVolume:.5,hapticEnabled:!0,showGhostBlock:!0,controlType:"both",colorBlindMode:!1,language:"ko",performanceMode:"auto"},Ux={coins:1e3,gems:50,lives:5,maxLives:5,lifeRegenTime:0},zx={freeSpinsRemaining:1,adSpinsRemaining:3,lastFreeSpinTime:0,spinHistory:[],pityCounter:0},Px={currentStreak:0,longestStreak:0,lastPlayDate:"",todayPlayed:!1},Gx={adsEnabled:!0,iapEnabled:!0,removeAds:!1,vipActive:!1,firstPurchaseBonus:!0},qx={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,maxLevel:1,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,feverCount:0,puzzleLevel:1,speedScore:0},Xn=gv()(yv((r,t)=>({playerId:`player_${Date.now()}`,playerName:"",playerLevel:1,playerXP:0,totalXP:0,avatarId:"default",playerStats:qx,unlockedTitles:["first_step"],equippedTitleId:"",settings:Bx,currency:Ux,achievements:Ax(),ownedSkins:od.filter(a=>a.owned),ownedThemes:hu.filter(a=>a.owned),equippedSkinId:"classic",equippedThemeId:"dark",dailyRewards:cd.map((a,s)=>({...a,claimed:!1})),lastDailyRewardClaim:"",dailyRewardDay:0,streakInfo:Px,wheelState:zx,monetizationConfig:Gx,purchaseHistory:[],personalBestScores:[],battlePassLevel:1,battlePassXP:0,battlePassPremium:!1,setPlayerName:a=>r({playerName:a}),addXP:a=>{const{totalXP:s}=t(),o=s+a,c=Kg(o),h=$g(o);r({totalXP:o,playerLevel:c,playerXP:h.currentLevelXP})},processGameResult:a=>{const{playerStats:s,totalXP:o}=t(),c=jx(a.score,a.combo,a.chain,a.level),h={...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a.score,highScore:Math.max(s.highScore,a.score),maxCombo:Math.max(s.maxCombo,a.combo),maxChain:Math.max(s.maxChain,a.chain),maxLevel:Math.max(s.maxLevel,a.level)};a.mode==="timeAttack"?h.speedScore=Math.max(h.speedScore,a.score):a.mode==="puzzle"&&(h.puzzleLevel=Math.max(h.puzzleLevel,a.level));const m=o+c,p=Kg(m),b=$g(m),x=Math.floor(a.score/50),{currency:T}=t();return r({playerStats:h,totalXP:m,playerLevel:p,playerXP:b.currentLevelXP,currency:{...T,coins:T.coins+x}}),t().checkAndUnlockTitles(),c},checkAndUnlockTitles:()=>{const{playerStats:a,unlockedTitles:s,streakInfo:o}=t(),c=[];return Vx.forEach(h=>{if(s.includes(h.id))return;let m=!1;const p=h.condition;if(p.includes("games >=")){const b=parseInt(p.split(">=")[1]);m=a.totalGamesPlayed>=b}else if(p.includes("highScore >=")){const b=parseInt(p.split(">=")[1]);m=a.highScore>=b}else if(p.includes("maxCombo >=")){const b=parseInt(p.split(">=")[1]);m=a.maxCombo>=b}else if(p.includes("maxChain >=")){const b=parseInt(p.split(">=")[1]);m=a.maxChain>=b}else if(p.includes("maxLevel >=")){const b=parseInt(p.split(">=")[1]);m=a.maxLevel>=b}else if(p.includes("feverCount >=")){const b=parseInt(p.split(">=")[1]);m=a.feverCount>=b}else if(p.includes("speedScore >=")){const b=parseInt(p.split(">=")[1]);m=a.speedScore>=b}else if(p.includes("puzzleLevel >=")){const b=parseInt(p.split(">=")[1]);m=a.puzzleLevel>=b}else if(p.includes("perfectClears >=")){const b=parseInt(p.split(">=")[1]);m=a.perfectClears>=b}else if(p.includes("streak >=")){const b=parseInt(p.split(">=")[1]);m=o.currentStreak>=b}m&&c.push(h.id)}),c.length>0&&r({unlockedTitles:[...s,...c]}),c},equipTitle:a=>{const{unlockedTitles:s}=t();(s.includes(a)||a==="")&&r({equippedTitleId:a})},updatePlayerStats:a=>{const{playerStats:s}=t();r({playerStats:{...s,...a}})},updateSettings:a=>{const{settings:s}=t();r({settings:{...s,...a}})},addCoins:a=>{const{currency:s}=t();r({currency:{...s,coins:s.coins+a}})},spendCoins:a=>{const{currency:s}=t();return s.coins>=a?(r({currency:{...s,coins:s.coins-a}}),!0):!1},addGems:a=>{const{currency:s}=t();r({currency:{...s,gems:s.gems+a}})},spendGems:a=>{const{currency:s}=t();return s.gems>=a?(r({currency:{...s,gems:s.gems-a}}),!0):!1},addLife:a=>{const{currency:s}=t(),o=Math.min(s.lives+a,s.maxLives);r({currency:{...s,lives:o}})},useLife:()=>{const{currency:a}=t();return a.lives>0?(r({currency:{...a,lives:a.lives-1}}),!0):!1},updateAchievement:(a,s)=>{const{achievements:o}=t(),c=o.map(h=>{if(h.id===a){const m=Math.max(h.current,s);return{...h,current:m,completed:m>=h.target}}return h});r({achievements:c})},claimAchievement:a=>{const{achievements:s}=t(),o=s.find(c=>c.id===a);if(o&&o.completed&&!o.claimed){o.reward.coins&&t().addCoins(o.reward.coins),o.reward.gems&&t().addGems(o.reward.gems);const c=s.map(h=>h.id===a?{...h,claimed:!0}:h);r({achievements:c})}},purchaseSkin:a=>{const s=od.find(h=>h.id===a);if(!s)return!1;const{currency:o,ownedSkins:c}=t();return c.some(h=>h.id===a)?!1:s.currency==="free"?(r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):!1},purchaseTheme:a=>{const s=hu.find(h=>h.id===a);if(!s)return!1;const{currency:o,ownedThemes:c}=t();return c.some(h=>h.id===a)?!1:s.currency==="free"?(r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):!1},equipSkin:a=>{const{ownedSkins:s}=t();s.some(o=>o.id===a)&&r({equippedSkinId:a})},equipTheme:a=>{const{ownedThemes:s}=t();s.some(o=>o.id===a)&&r({equippedThemeId:a})},claimDailyReward:()=>{const{dailyRewardDay:a,dailyRewards:s,lastDailyRewardClaim:o}=t(),c=new Date().toDateString();if(o===c)return null;const h=a%7+1,m=cd[h-1];return m.reward.coins&&t().addCoins(m.reward.coins),m.reward.gems&&t().addGems(m.reward.gems),r({dailyRewardDay:h,lastDailyRewardClaim:c}),m.reward},checkDailyRewardAvailable:()=>{const{lastDailyRewardClaim:a}=t(),s=new Date().toDateString();return a!==s},updateStreak:()=>{const{streakInfo:a}=t(),s=new Date().toDateString();if(a.lastPlayDate===s)return;const o=new Date(Date.now()-864e5).toDateString();let c=a.currentStreak;a.lastPlayDate===o?c+=1:a.lastPlayDate!==s&&(c=1),r({streakInfo:{currentStreak:c,longestStreak:Math.max(a.longestStreak,c),lastPlayDate:s,todayPlayed:!0}})},spinWheel:()=>{const{wheelState:a}=t(),{freeSpinsRemaining:s,adSpinsRemaining:o}=a;if(s<=0&&o<=0)return null;const c=["coins_50","coins_100","gems_5","gems_10","powerup"],h=c[Math.floor(Math.random()*c.length)];return r({wheelState:{...a,freeSpinsRemaining:s>0?s-1:s,adSpinsRemaining:s<=0?o-1:o,spinHistory:[...a.spinHistory,h],pityCounter:a.pityCounter+1}}),h},canSpinWheel:()=>{const{wheelState:a,currency:s}=t();return{free:a.freeSpinsRemaining>0,ad:a.adSpinsRemaining>0,gem:s.gems>=20}},addBattlePassXP:a=>{const{battlePassXP:s,battlePassLevel:o}=t(),c=100,h=s+a,m=Math.floor(h/c);r({battlePassXP:h%c,battlePassLevel:Math.min(o+m,50)})},purchaseBattlePassPremium:()=>{const{currency:a}=t();return a.gems>=499?(t().spendGems(499),r({battlePassPremium:!0}),!0):!1},addPersonalBest:(a,s)=>{const{personalBestScores:o}=t(),c=o.findIndex(h=>h.mode===a);if(c>=0){if(s>o[c].score){const h=[...o];h[c]={mode:a,score:s,date:new Date().toISOString()},r({personalBestScores:h})}}else r({personalBestScores:[...o,{mode:a,score:s,date:new Date().toISOString()}]})}}),{name:"chromafall-user-storage"}));function Hx(r,t,a,s){const o=[],c=new Set,h=[[t,a]];for(;h.length>0;){const[m,p]=h.shift(),b=`${m},${p}`;if(c.has(b)||m<0||m>=me.COLUMNS||p<0||p>=me.ROWS)continue;const x=r[p][m];x&&(x.color!==s&&x.color!=="rainbow"&&s!=="rainbow"||(c.add(b),o.push(x),h.push([m-1,p]),h.push([m+1,p]),h.push([m,p-1]),h.push([m,p+1])))}return o}function Tv(r,t){const a=[],s=new Set,o=ox();for(let c=0;c<me.ROWS;c++)for(let h=0;h<me.COLUMNS;h++){const m=r[c][h];if(!m)continue;const p=`${h},${c}`;if(s.has(p))continue;const b=Hx(r,h,c,m.color);b.length>=o&&(a.push(b),b.forEach(x=>s.add(`${x.x},${x.y}`)))}return a}function Wg(r,t){return Tv(r)}function Fx(r,t){const a=Array(me.ROWS).fill(null).map(()=>Array(me.COLUMNS).fill(null));if(t==="down")for(let s=0;s<me.COLUMNS;s++){let o=me.ROWS-1;for(let c=me.ROWS-1;c>=0;c--)r[c][s]&&(a[o][s]={...r[c][s],y:o},o--)}else if(t==="up")for(let s=0;s<me.COLUMNS;s++){let o=0;for(let c=0;c<me.ROWS;c++)r[c][s]&&(a[o][s]={...r[c][s],y:o},o++)}else if(t==="left")for(let s=0;s<me.ROWS;s++){let o=0;for(let c=0;c<me.COLUMNS;c++)r[s][c]&&(a[s][o]={...r[s][c],x:o},o++)}else if(t==="right")for(let s=0;s<me.ROWS;s++){let o=me.COLUMNS-1;for(let c=me.COLUMNS-1;c>=0;c--)r[s][c]&&(a[s][o]={...r[s][c],x:o},o--)}return a}function Qx(r){for(let t=0;t<me.ROWS;t++)for(let a=0;a<me.COLUMNS;a++)if(r[t][a])return!1;return!0}function Xx(r,t,a){const s=r.map(m=>[...m]),o=[],c=[],h=new Set;for(const m of t){if(m.specialType==="normal")continue;const p=`${m.x},${m.y}`;if(h.has(p))continue;h.add(p);const b=[];switch(m.specialType){case"bomb":{for(let x=-1;x<=rd.BOMB_RADIUS;x++)for(let T=-1;T<=rd.BOMB_RADIUS;T++){const S=m.x+T,I=m.y+x;if(S>=0&&S<me.COLUMNS&&I>=0&&I<me.ROWS){const V=s[I][S];V&&!t.includes(V)&&(V.specialType==="frozen"&&(V.frozenCount||2)>1?s[I][S]={...V,frozenCount:(V.frozenCount||2)-1}:(V.specialType,o.push(V),s[I][S]=null),b.push({x:S,y:I}))}}break}case"lightning":{for(let x=0;x<me.ROWS;x++)for(let T=0;T<me.COLUMNS;T++){const S=s[x][T];S&&S.color===m.color&&!t.includes(S)&&(S.specialType==="frozen"&&(S.frozenCount||2)>1?s[x][T]={...S,frozenCount:(S.frozenCount||2)-1}:S.specialType!=="stone"&&(o.push(S),s[x][T]=null),b.push({x:T,y:x}))}break}case"cross":{for(let x=0;x<me.COLUMNS;x++){const T=s[m.y][x];T&&!t.includes(T)&&(T.specialType==="frozen"&&(T.frozenCount||2)>1?s[m.y][x]={...T,frozenCount:(T.frozenCount||2)-1}:T.specialType!=="stone"&&(o.push(T),s[m.y][x]=null),b.push({x,y:m.y}))}for(let x=0;x<me.ROWS;x++){const T=s[x][m.x];T&&!t.includes(T)&&(T.specialType==="frozen"&&(T.frozenCount||2)>1?s[x][m.x]={...T,frozenCount:(T.frozenCount||2)-1}:T.specialType!=="stone"&&(o.push(T),s[x][m.x]=null),b.push({x:m.x,y:x}))}break}case"colorShift":{for(let x=-1;x<=1;x++)for(let T=-1;T<=1;T++){if(T===0&&x===0)continue;const S=m.x+T,I=m.y+x;if(S>=0&&S<me.COLUMNS&&I>=0&&I<me.ROWS){const V=s[I][S];V&&V.specialType!=="stone"&&V.specialType!=="frozen"&&(s[I][S]={...V,color:m.color},b.push({x:S,y:I}))}}break}case"shuffle":{const x=Vd(a);for(let T=-1;T<=1;T++)for(let S=-1;S<=1;S++){if(S===0&&T===0)continue;const I=m.x+S,V=m.y+T;if(I>=0&&I<me.COLUMNS&&V>=0&&V<me.ROWS){const q=s[V][I];if(q&&q.specialType!=="stone"&&q.specialType!=="frozen"){const U=x[Math.floor(Math.random()*x.length)];s[V][I]={...q,color:U},b.push({x:I,y:V})}}}break}}b.length>0&&c.push({type:m.specialType,x:m.x,y:m.y,affectedBlocks:b})}return{additionalCleared:o,newBoard:s,effects:c}}function Yx(r,t){const a=r.map(c=>[...c]),s=[],o=new Set(t.map(c=>`${c.x},${c.y}`));for(let c=0;c<me.ROWS;c++)for(let h=0;h<me.COLUMNS;h++){const m=a[c][h];m?.specialType==="stone"&&[`${h-1},${c}`,`${h+1},${c}`,`${h},${c-1}`,`${h},${c+1}`].some(x=>o.has(x))&&(s.push(m),a[c][h]=null)}return{destroyedStones:s,newBoard:a}}function Kx(r,t){const a=t.map(o=>[...o]),s=[];for(const o of r)if(o.specialType==="frozen"){const c=o.frozenCount||2;c>1?a[o.y][o.x]={...o,frozenCount:c-1}:s.push(o)}else s.push(o);return{blocksToRemove:s,updatedBoard:a}}function $x(){const{board:r,currentBlock:t,currentBlocks:a,gameStatus:s,level:o,combo:c,chainCount:h,gravityDirection:m,activePowerUp:p,updateBoard:b,addScore:x,incrementCombo:T,resetCombo:S,incrementChain:I,resetChain:V,spawnBlock:q,softDrop:U,updateStatistics:k,updateMissionProgress:W,updateLevelObjective:$,checkPuzzleComplete:se,gameMode:ce,statistics:le}=Pe(),{updateAchievement:M,addBattlePassXP:w}=Xn(),[C,N]=re.useState(!1),[O,B]=re.useState([]),[R,Be]=re.useState(0),[tt,X]=re.useState([]),oe=re.useRef(null),xe=re.useRef(null),Le=re.useRef(0),z=re.useRef(!1),j=re.useRef(0),ae=re.useRef(0),ue=p?.type==="timeSlow"?Xg(o)*2:Xg(o),ge=re.useCallback(async he=>{const be=Tv(he);if(be.length===0)return{result:null,newBoard:he};let ye=0,de=0;const Ne=[],Ie=[];let Ge=!1,Se=he.map(Ze=>[...Ze]);const dt=be.flat(),{blocksToRemove:st,updatedBoard:Gt}=Kx(dt,Se);Se=Gt;for(const Ze of st)Ne.push({x:Ze.x,y:Ze.y,color:Ze.color}),Se[Ze.y][Ze.x]=null,ye++,Ze.specialType!=="normal"&&(de++,Ze.specialType==="multiplier"&&(Ge=!0));B(Ne);const Tt=Xx(Se,st,o);Se=Tt.newBoard,ye+=Tt.additionalCleared.length,Ie.push(...Tt.effects);for(const Ze of Tt.additionalCleared)Ne.push({x:Ze.x,y:Ze.y,color:Ze.color}),Ze.specialType!=="normal"&&de++;const $e=Yx(Se,[...st,...Tt.additionalCleared]);Se=$e.newBoard,ye+=$e.destroyedStones.length;for(const Ze of $e.destroyedStones)Ne.push({x:Ze.x,y:Ze.y,color:Ze.color}),de++;Ie.length>0&&X(Ie);const Je=Qx(Se),In=(p?.type==="scoreMultiplier"?2:1)*(Ge?2:1),ua=Pe.getState().chainCount,ci=Pe.getState().combo,Mt=Pe.getState().isFeverMode,Yn=Sx({blocksCleared:ye,chainCount:ua+1,comboCount:ci,level:o,powerUpMultiplier:In,perfectClear:Je,isFeverMode:Mt,specialBlocksCleared:de}),Kn=Pe.getState().addFeverGauge;Kn&&Kn(ye*3+(ua+1)*10),await new Promise(Ze=>setTimeout(Ze,qi.FUSION_ANIMATION_DURATION)),Ie.length>0&&await new Promise(Ze=>setTimeout(Ze,qi.SPECIAL_EFFECT_DURATION));const Ua=Fx(Se,m);return B([]),X([]),{result:{clearedBlocks:[...st,...Tt.additionalCleared,...$e.destroyedStones],score:Yn,chainCount:ua+1,isChainReaction:ua>0,specialEffects:Ie},newBoard:Ua}},[o,m,p]),Te=re.useCallback(async()=>{if(!z.current){z.current=!0,N(!0);try{let he=0,be=0,ye=0,de=Pe.getState().board;for(V();;){const{result:Ne,newBoard:Ie}=await ge(de);if(!Ne)break;de=Ie,b(de),ye++,he+=Ne.score,be+=Ne.clearedBlocks.length,I(),Be(ye),await new Promise(Ge=>setTimeout(Ge,qi.CHAIN_DELAY))}if(he>0){if(x(he),T(),k({totalBlocksCleared:le.totalBlocksCleared+be,totalFusions:le.totalFusions+1,maxChain:Math.max(le.maxChain,ye)}),W("blocks_fused",be),ye>=5&&W("chain",1),Pe.getState().gameMode==="puzzle"){const Ie=Pe.getState();if($("score",he),$("clearBlocks",be),ye>0){const Ge=Ie.levelObjectives.find(Se=>Se.type==="chains");Ge&&ye>Ge.current&&$("chains",ye-Ge.current)}setTimeout(()=>{Pe.getState().checkPuzzleComplete()},100)}M("chain_5",ye),M("chain_10",ye),M("chain_15",ye),M("chain_20",ye),w(Math.floor(he/100)),xe.current&&clearTimeout(xe.current),xe.current=window.setTimeout(()=>{S()},qi.COMBO_TIMEOUT)}}finally{Be(0),N(!1),z.current=!1,Pe.getState().gameStatus==="playing"&&setTimeout(()=>{q()},50)}}},[ge,x,T,S,I,V,q,b,le,k,W,$,M,w]);re.useEffect(()=>{const he=j.current,be=a.length;j.current=be,he>0&&be===0&&s==="playing"&&!z.current&&setTimeout(()=>{!z.current&&Pe.getState().gameStatus==="playing"&&Te()},50)},[a.length,s,Te]),re.useEffect(()=>{ae.current++;const he=ae.current;if(s==="playing"&&a.length===0&&!z.current){const ye=setTimeout(()=>{if(ae.current!==he||z.current||Pe.getState().currentBlocks.length>0)return;const de=Pe.getState().board;Wg(de).length>0&&Te()},100);return()=>clearTimeout(ye)}},[r,s,a.length,o,Te]),re.useEffect(()=>{if(s!=="playing"||C){oe.current&&(clearInterval(oe.current),oe.current=null);return}Le.current=Date.now();let he=Date.now();const be=()=>{const ye=Date.now(),de=Pe.getState();de.currentBlocks.length>0&&!z.current&&ye-Le.current>=ue&&(de.softDrop(),Le.current=ye),de.currentBlocks.length===0&&!z.current&&ye-he>=500&&(he=ye,Wg(de.board,de.level).length>0&&Te())};return oe.current=window.setInterval(be,50),()=>{oe.current&&(clearInterval(oe.current),oe.current=null)}},[s,ue,C,Te]),re.useEffect(()=>()=>{oe.current&&clearInterval(oe.current),xe.current&&clearTimeout(xe.current)},[]);const Ce=re.useCallback(()=>{if(a.length===0)return null;const{dx:he,dy:be}=ld[m];let ye=1/0;for(const Ne of a){let Ie=0,Ge=Ne.x,Se=Ne.y;for(;;){const dt=Ge+he,st=Se+be;if(dt<0||dt>=me.COLUMNS||st<0||st>=me.ROWS||r[st]?.[dt]!==null)break;Ie++,Ge=dt,Se=st}ye=Math.min(ye,Ie)}const de=a[0];return{x:de.x+he*ye,y:de.y+be*ye}},[a,r,m]);return{isProcessingFusion:C,fusionEffects:O,chainEffects:R,specialEffects:tt,getGhostPosition:Ce,dropSpeed:ue}}function Zx(r){const{gameStatus:t,moveBlock:a,softDrop:s,hardDrop:o,doHoldBlock:c,pauseGame:h,isPowerUpSelecting:m,setGravityDirection:p}=Pe(),{settings:b}=Xn(),x=re.useRef({startX:0,startY:0,startTime:0,lastTapTime:0,isDragging:!1}),T=re.useRef(null),S=re.useCallback(U=>{!b.hapticEnabled||!navigator.vibrate||navigator.vibrate(xx[U])},[b.hapticEnabled]),I=re.useCallback(U=>{if(t!=="playing")return;const k=U.touches[0],W=Date.now();x.current={startX:k.clientX,startY:k.clientY,startTime:W,lastTapTime:x.current.lastTapTime,isDragging:!1},T.current=window.setTimeout(()=>{S("medium"),c(),x.current.isDragging=!0},Gi.LONG_PRESS_DURATION)},[t,c,S]),V=re.useCallback(U=>{if(t!=="playing")return;const k=U.touches[0],{startX:W,startY:$,isDragging:se}=x.current,ce=k.clientX-W,le=k.clientY-$,M=Math.abs(ce),w=Math.abs(le);if((M>10||w>10)&&T.current&&(clearTimeout(T.current),T.current=null),M>=Gi.SWIPE_THRESHOLD||w>=Gi.SWIPE_THRESHOLD){if(x.current.isDragging=!0,m){M>w?p(ce>0?"right":"left"):p(le>0?"down":"up"),x.current.startX=k.clientX,x.current.startY=k.clientY;return}M>w&&M>=Gi.SWIPE_THRESHOLD&&(ce>0?a("right"):a("left"),S("light"),x.current.startX=k.clientX),w>M&&w>=Gi.SWIPE_THRESHOLD&&(le>0&&(s(),S("light")),x.current.startY=k.clientY)}},[t,m,a,s,p,S]),q=re.useCallback(U=>{if(t!=="playing")return;T.current&&(clearTimeout(T.current),T.current=null);const{startX:k,startY:W,startTime:$,lastTapTime:se,isDragging:ce}=x.current,le=Date.now(),M=le-$;if(!ce&&M<Gi.LONG_PRESS_DURATION){const w=U.changedTouches[0],C=Math.abs(w.clientX-k),N=Math.abs(w.clientY-W);C<10&&N<10&&(le-se<Gi.DOUBLE_TAP_DELAY?(S("medium"),o()):S("selection"),x.current.lastTapTime=le)}if(ce){const C=U.changedTouches[0].clientY-W,N=C/M*1e3;C>0&&N>Gi.FAST_SWIPE_VELOCITY&&(S("heavy"),o())}x.current.isDragging=!1},[t,o,S]);return re.useEffect(()=>{const U=r.current;if(U)return U.addEventListener("touchstart",I,{passive:!0}),U.addEventListener("touchmove",V,{passive:!0}),U.addEventListener("touchend",q,{passive:!0}),()=>{U.removeEventListener("touchstart",I),U.removeEventListener("touchmove",V),U.removeEventListener("touchend",q),T.current&&clearTimeout(T.current)}},[r,I,V,q]),{triggerHaptic:S}}class Jx{audioContext=null;masterGain=null;musicGain=null;sfxGain=null;currentOscillators=[];isFeverMode=!1;bgmInterval=null;ambientInterval=null;constructor(){this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.musicGain=this.audioContext.createGain(),this.sfxGain=this.audioContext.createGain();const t=this.audioContext.createDynamicsCompressor();t.threshold.value=-24,t.knee.value=30,t.ratio.value=12,t.attack.value=.003,t.release.value=.25,this.musicGain.connect(t),this.sfxGain.connect(t),t.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination)}catch{console.warn("Web Audio API not supported")}}resume(){this.audioContext?.state==="suspended"&&this.audioContext.resume()}setMusicVolume(t){this.musicGain&&(this.musicGain.gain.value=t)}setSfxVolume(t){this.sfxGain&&(this.sfxGain.gain.value=t)}createReverb(t=1){if(!this.audioContext)return null;const a=this.audioContext.createConvolver(),s=this.audioContext.sampleRate,o=s*t,c=this.audioContext.createBuffer(2,o,s);for(let h=0;h<2;h++){const m=c.getChannelData(h);for(let p=0;p<o;p++)m[p]=(Math.random()*2-1)*Math.pow(1-p/o,2)}return a.buffer=c,a}playChord(t,a,s="sine",o=.15){t.forEach((c,h)=>{setTimeout(()=>{this.playTone(c,a,s,o/t.length)},h*20)})}playTone(t,a,s="sine",o=.3){if(!this.audioContext||!this.sfxGain)return;const c=this.audioContext.createOscillator(),h=this.audioContext.createGain(),m=this.audioContext.createBiquadFilter();c.type=s,c.frequency.value=t;const p=this.audioContext.createOscillator(),b=this.audioContext.createGain();p.type=s,p.frequency.value=t*2,b.gain.value=o*.3,m.type="lowpass",m.frequency.value=Math.min(t*4,8e3),m.Q.value=1;const x=this.audioContext.currentTime;h.gain.setValueAtTime(0,x),h.gain.linearRampToValueAtTime(o,x+.02),h.gain.linearRampToValueAtTime(o*.7,x+.1),h.gain.setValueAtTime(o*.7,x+a*.8),h.gain.exponentialRampToValueAtTime(.01,x+a),c.connect(m),p.connect(b),b.connect(m),m.connect(h),h.connect(this.sfxGain),c.start(x),p.start(x),c.stop(x+a),p.stop(x+a)}playSoundEffect(t){if(this.audioContext)switch(t){case"blockLand":this.playTone(150,.15,"sine",.3),this.playTone(80,.2,"sine",.2),setTimeout(()=>this.playTone(100,.1,"sine",.15),50),this.playTone(400,.05,"triangle",.08);break;case"blockMove":this.playTone(800,.05,"sine",.1),this.playTone(1e3,.04,"sine",.06),this.playTone(600,.03,"triangle",.04);break;case"blockRotate":this.playTone(400,.08,"sine",.15),setTimeout(()=>this.playTone(600,.07,"sine",.14),25),setTimeout(()=>this.playTone(800,.06,"sine",.12),50),setTimeout(()=>this.playTone(1e3,.05,"triangle",.08),75),setTimeout(()=>this.playTone(1200,.1,"sine",.04),100);break;case"hardDrop":this.playTone(50,.2,"sine",.4),this.playTone(70,.18,"triangle",.35),this.playTone(100,.15,"sine",.25),setTimeout(()=>{this.playTone(80,.12,"triangle",.2),this.playTone(120,.1,"sine",.15),this.playTone(200,.08,"triangle",.1)},60),setTimeout(()=>this.playTone(60,.15,"sine",.1),150);break;case"fusion":[523,659,784,988,1175].forEach((p,b)=>{setTimeout(()=>{this.playTone(p,.3,"sine",.22),this.playTone(p*1.5,.25,"triangle",.12),this.playTone(p*2,.2,"sine",.06)},b*50)}),setTimeout(()=>{for(let p=0;p<8;p++)setTimeout(()=>{this.playTone(1500+Math.random()*2500,.12,"sine",.08),this.playTone(2e3+Math.random()*2e3,.08,"triangle",.05)},p*35)},200);break;case"chain":const s=349;for(let p=0;p<8;p++)setTimeout(()=>{const b=s*Math.pow(1.12,p);this.playChord([b,b*1.25,b*1.5],.15,"sine",.28),p>3&&this.playTone(b*2,.1,"triangle",.08)},p*60);setTimeout(()=>this.playTone(3e3,.2,"sine",.06),500);break;case"combo":this.playChord([523,659,784],.12,"sine",.2),setTimeout(()=>this.playChord([587,740,880],.12,"sine",.22),70),setTimeout(()=>this.playChord([659,831,988],.14,"sine",.24),140),setTimeout(()=>this.playTone(1175,.18,"sine",.22),200),setTimeout(()=>{for(let p=0;p<4;p++)setTimeout(()=>this.playTone(1800+p*300,.08,"sine",.06),p*25)},250);break;case"levelUp":[{notes:[523,659,784],delay:0,dur:.2},{notes:[587,740,880],delay:100,dur:.2},{notes:[659,831,988],delay:200,dur:.2},{notes:[784,988,1175],delay:300,dur:.25},{notes:[880,1100,1319],delay:420,dur:.3},{notes:[1047,1319,1568],delay:550,dur:.4}].forEach(({notes:p,delay:b,dur:x})=>{setTimeout(()=>{this.playChord(p,x,"sine",.28)},b)});for(let p=0;p<12;p++)setTimeout(()=>{this.playTone(1200+Math.random()*2500,.12,"sine",.1)},600+p*45);this.playTone(80,.3,"sine",.2),setTimeout(()=>this.playTone(60,.4,"sine",.15),550);break;case"powerUpGet":this.playTone(698,.1,"sine",.28),setTimeout(()=>this.playTone(880,.1,"sine",.3),50),setTimeout(()=>this.playTone(1047,.12,"sine",.32),100),setTimeout(()=>this.playTone(1319,.15,"sine",.3),150),setTimeout(()=>this.playTone(1568,.2,"sine",.25),210),setTimeout(()=>{for(let p=0;p<6;p++)setTimeout(()=>this.playTone(2e3+p*250,.1,"sine",.08),p*30)},280);break;case"powerUpUse":for(let p=0;p<12;p++)setTimeout(()=>{this.playTone(150+p*70,.06,"sawtooth",.18-p*.01)},p*25);setTimeout(()=>{this.playChord([784,988,1175],.35,"sine",.25),this.playTone(1568,.3,"triangle",.15)},320),setTimeout(()=>{for(let p=0;p<5;p++)setTimeout(()=>this.playTone(1500-p*200,.15,"sine",.08),p*50)},400);break;case"gameOver":const c=[{freq:523,dur:.35},{freq:494,dur:.35},{freq:440,dur:.35},{freq:392,dur:.5},{freq:349,dur:.6},{freq:330,dur:.8}];let h=0;c.forEach(({freq:p,dur:b})=>{setTimeout(()=>{this.playTone(p,b,"sine",.25),this.playTone(p*.5,b,"sine",.12),this.playTone(p*.75,b*.8,"sine",.08)},h),h+=b*380}),setTimeout(()=>{this.playTone(262,1.5,"sine",.08),this.playTone(330,1.5,"sine",.06)},h);break;case"highScore":[523,587,659,784,880,988,1047,1175,1319,1568].forEach((p,b)=>{setTimeout(()=>{this.playChord([p,p*1.25,p*1.5],.22,"sine",.28)},b*80)});for(let p=0;p<10;p++)setTimeout(()=>this.playTone(80,.08,"triangle",.2-p*.015),p*30);for(let p=0;p<25;p++)setTimeout(()=>{this.playTone(600+Math.random()*3500,.18,"sine",.12)},800+p*35);setTimeout(()=>{this.playChord([1568,1976,2349],.5,"sine",.2)},1700);break;case"achievement":this.playChord([659,831,988],.18,"sine",.28),setTimeout(()=>this.playChord([784,988,1175],.18,"sine",.3),100),setTimeout(()=>this.playChord([880,1100,1319],.22,"sine",.32),200),setTimeout(()=>this.playChord([1047,1319,1568],.35,"sine",.3),320),setTimeout(()=>{this.playTone(100,.15,"sine",.15);for(let p=0;p<5;p++)setTimeout(()=>this.playTone(1800+p*200,.1,"sine",.07),p*40)},400);break;case"buttonClick":this.playTone(1400,.04,"sine",.14),this.playTone(1e3,.035,"sine",.1),this.playTone(700,.03,"triangle",.06);break;case"rewardGet":this.playTone(784,.1,"sine",.25),setTimeout(()=>this.playTone(988,.1,"sine",.27),70),setTimeout(()=>this.playTone(1175,.12,"sine",.28),140),setTimeout(()=>this.playTone(1319,.15,"sine",.26),220),setTimeout(()=>{for(let p=0;p<10;p++)setTimeout(()=>{this.playTone(1800+p*180,.1,"sine",.12),p%2===0&&this.playTone(2500+p*100,.06,"triangle",.06)},p*35)},280);break;case"purchaseSuccess":this.playChord([523,659,784],.12,"sine",.28),setTimeout(()=>this.playChord([659,784,988],.12,"sine",.3),90),setTimeout(()=>this.playChord([784,988,1175],.15,"sine",.32),180),setTimeout(()=>this.playChord([988,1175,1480],.2,"sine",.28),280),setTimeout(()=>{for(let p=0;p<6;p++)setTimeout(()=>this.playTone(2200+p*150,.08,"sine",.08),p*40)},350);break;case"wheelSpin":this.playTone(500,.04,"sine",.18),this.playTone(600,.03,"triangle",.12);break;case"jackpot":for(let p=0;p<15;p++)setTimeout(()=>{this.playTone(250+p*80,.22,"sine",.28),this.playTone(250+p*80+250,.2,"sine",.18)},p*70);setTimeout(()=>{for(let p=0;p<8;p++)setTimeout(()=>{this.playTone(p%2===0?800:1200,.25,"sine",.2)},p*200)},1100),setTimeout(()=>{for(let p=0;p<30;p++)setTimeout(()=>{this.playTone(400+Math.random()*3e3,.22,"sine",.15)},p*45)},1200),setTimeout(()=>{this.playChord([1047,1319,1568,1976],.6,"sine",.25)},2600);break}}startBGM(t=1){if(!this.audioContext||!this.musicGain)return;this.stopBGM();const s=60/(110+t*5),o={melody:[523,587,659,784,880,988,1047,1175],bass:[131,147,165,196,220,247],chord:[[262,330,392],[294,370,440],[330,415,494],[349,440,523],[392,494,587],[440,523,659]]};let c=0,h=0;const m=[0,2,4,5,7,5,4,2],p=()=>{if(!this.audioContext||!this.musicGain)return;const b=this.audioContext.currentTime,x=this.isFeverMode;if(c%2===0){const T=this.audioContext.createOscillator(),S=this.audioContext.createGain();T.type="sine",T.frequency.value=o.bass[c%6],S.gain.setValueAtTime(x?.18:.12,b),S.gain.exponentialRampToValueAtTime(.01,b+s*.9),T.connect(S),S.connect(this.musicGain),T.start(b),T.stop(b+s),this.currentOscillators.push(T)}if(c%4===0){const T=this.audioContext.createOscillator(),S=this.audioContext.createGain();T.type="sine",T.frequency.setValueAtTime(x?80:60,b),T.frequency.exponentialRampToValueAtTime(30,b+.1),S.gain.setValueAtTime(x?.25:.18,b),S.gain.exponentialRampToValueAtTime(.01,b+.15),T.connect(S),S.connect(this.musicGain),T.start(b),T.stop(b+.2),this.currentOscillators.push(T)}if(c%(x?1:2)===0){const T=this.audioContext.createOscillator(),S=this.audioContext.createGain(),I=this.audioContext.createBiquadFilter();T.type="square",T.frequency.value=8e3,I.type="highpass",I.frequency.value=7e3,S.gain.setValueAtTime(.03,b),S.gain.exponentialRampToValueAtTime(.001,b+.05),T.connect(I),I.connect(S),S.connect(this.musicGain),T.start(b),T.stop(b+.08),this.currentOscillators.push(T)}if(c%2===0){const T=o.melody[m[h%m.length]],S=this.audioContext.createOscillator(),I=this.audioContext.createGain();S.type=x?"sawtooth":"triangle",S.frequency.value=T,I.gain.setValueAtTime(x?.12:.08,b),I.gain.exponentialRampToValueAtTime(.01,b+s*.7),S.connect(I),I.connect(this.musicGain),S.start(b),S.stop(b+s*.8),this.currentOscillators.push(S),h++}if(c%8===0&&o.chord[Math.floor(c/8)%o.chord.length].forEach(S=>{const I=this.audioContext.createOscillator(),V=this.audioContext.createGain();I.type="sine",I.frequency.value=S,V.gain.setValueAtTime(.04,b),V.gain.setValueAtTime(.04,b+s*6),V.gain.exponentialRampToValueAtTime(.001,b+s*7.5),I.connect(V),V.connect(this.musicGain),I.start(b),I.stop(b+s*8),this.currentOscillators.push(I)}),x&&c%1===0){const T=o.melody[c*3%o.melody.length],S=this.audioContext.createOscillator(),I=this.audioContext.createGain();S.type="sine",S.frequency.value=T,I.gain.setValueAtTime(.06,b),I.gain.exponentialRampToValueAtTime(.001,b+s*.4),S.connect(I),I.connect(this.musicGain),S.start(b),S.stop(b+s*.5),this.currentOscillators.push(S)}c++};this.bgmInterval=window.setInterval(p,s*1e3),this.startAmbient()}startAmbient(){if(!this.audioContext||!this.musicGain)return;const t=()=>{if(!this.audioContext||!this.musicGain)return;const a=this.audioContext.currentTime,s=100+Math.random()*100,o=this.audioContext.createOscillator(),c=this.audioContext.createGain(),h=this.audioContext.createBiquadFilter();o.type="sine",o.frequency.value=s,h.type="lowpass",h.frequency.value=200,c.gain.setValueAtTime(0,a),c.gain.linearRampToValueAtTime(.02,a+1),c.gain.setValueAtTime(.02,a+3),c.gain.linearRampToValueAtTime(0,a+4),o.connect(h),h.connect(c),c.connect(this.musicGain),o.start(a),o.stop(a+5)};this.ambientInterval=window.setInterval(t,5e3)}setFeverMode(t){this.isFeverMode=t}stopBGM(){this.bgmInterval&&(clearInterval(this.bgmInterval),this.bgmInterval=null),this.ambientInterval&&(clearInterval(this.ambientInterval),this.ambientInterval=null),this.currentOscillators.forEach(t=>{try{t.stop()}catch{}}),this.currentOscillators=[]}cleanup(){this.stopBGM(),this.audioContext&&this.audioContext.close()}}let Xh=null;function Wx(){return Xh||(Xh=new Jx),Xh}function ca(){const{settings:r}=Xn(),t=re.useRef(null);re.useEffect(()=>{t.current=Wx(),t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0);const c=()=>{t.current?.resume(),window.removeEventListener("click",c),window.removeEventListener("touchstart",c)};return window.addEventListener("click",c),window.addEventListener("touchstart",c),()=>{window.removeEventListener("click",c),window.removeEventListener("touchstart",c)}},[]),re.useEffect(()=>{t.current&&(t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0))},[r.soundEnabled,r.musicEnabled,r.soundVolume,r.musicVolume]);const a=re.useCallback(c=>{r.soundEnabled&&t.current&&t.current.playSoundEffect(c)},[r.soundEnabled]),s=re.useCallback((c=1)=>{r.musicEnabled&&t.current&&t.current.startBGM(c)},[r.musicEnabled]),o=re.useCallback(()=>{t.current?.stopBGM()},[]);return{playSound:a,startBGM:s,stopBGM:o}}const e2={red:0,blue:1,green:2,yellow:3,purple:4,orange:3,cyan:1,pink:0,rainbow:0},iu=re.memo(function({color:t,size:a,isGhost:s=!1,isFusing:o=!1,isMatched:c=!1,specialType:h="normal",frozenCount:m=0}){const{settings:p,equippedSkinId:b}=Xn(),x=re.useMemo(()=>co[b]||co.classic,[b]),T=e2[t]??0,S=x.colors[T]||x.colors[0],I=p.colorBlindMode?rx:Od,V=p.colorBlindMode?I[t]:S,q=p.colorBlindMode?lx[t]:null,U=t==="rainbow",k=h!=="normal",W=vv[h],$=h==="frozen",se=h==="stone";if(s)return g.jsx("div",{className:"absolute rounded-md box-border transition-all duration-75",style:{width:a-2,height:a-2,borderColor:V,borderWidth:"2px",borderStyle:"dashed",backgroundColor:`${V}15`,boxShadow:`0 0 10px ${V}40`}});if(se)return g.jsxs(ie.div,{className:"absolute rounded-md overflow-hidden",style:{width:a-2,height:a-2,background:"linear-gradient(145deg, #6c757d, #495057)",border:"2px solid #343a40"},initial:!1,animate:{scale:o?[1,1.1,0]:1},transition:{scale:{duration:.3}},children:[g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"}}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-lg",children:""})]});const ce=()=>{if(U)return"linear-gradient(135deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff)";if($)return`linear-gradient(145deg, ${V}90, ${V}60)`;switch(x.innerEffect){case"glow":return`radial-gradient(circle at 30% 30%, ${V}dd, ${V}88 70%, ${V}44)`;case"glass":return`linear-gradient(145deg, ${V}ee, ${V}aa 50%, ${V}cc)`;case"gradient":return`linear-gradient(135deg, ${V}, ${V}88, ${V}cc)`;case"flat":return V;case"metallic":return`linear-gradient(145deg, ${V}ff, ${V}66 30%, ${V}cc 70%, ${V}ff)`;case"matte":return`linear-gradient(180deg, ${V}ee, ${V}bb)`;default:return V}},le=()=>{if(x.glowIntensity<=0)return"none";const N=Math.round(x.glowIntensity*20);return`0 0 ${N}px ${V}, 0 0 ${N*2}px ${V}66`},M=()=>{switch(x.texture){case"lines":return"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.1) 2px, rgba(255,255,255,0.1) 4px)";case"dots":return"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.2) 1px, transparent 1px)";case"circuit":return"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%)";case"cracks":return"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.2) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.15) 61%, transparent 62%)";case"noise":return`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`;default:return"none"}},w=()=>{const N={scale:o?[1,1.2,0]:c?[1,1.1,1]:1,filter:o?"brightness(1.5)":"brightness(1)",rotate:U?360:0};switch(x.animation){case"pulse":return{...N,boxShadow:[`0 0 5px ${V}`,`0 0 20px ${V}`,`0 0 5px ${V}`]};case"shimmer":return N;case"fire":return{...N,y:[0,-2,0,-1,0]};case"ice":return{...N,opacity:[1,.9,1]};case"electric":return{...N,x:[-1,1,-1,0]};default:return N}},C=()=>{const N={scale:{duration:o?.3:.2},rotate:{duration:3,repeat:1/0,ease:"linear"}};switch(x.animation){case"pulse":return{...N,boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}};case"fire":return{...N,y:{duration:.3,repeat:1/0,ease:"easeInOut"}};case"ice":return{...N,opacity:{duration:2,repeat:1/0,ease:"easeInOut"}};case"electric":return{...N,x:{duration:.1,repeat:1/0}};default:return N}};return g.jsxs(ie.div,{className:"absolute overflow-hidden block-3d",style:{width:a-2,height:a-2,borderRadius:x.borderRadius,background:ce(),opacity:o?.8:1,zIndex:o?10:1,border:$?"2px solid #a5d8ff":k?`2px solid ${W?.color||V}`:x.borderWidth>0?`${x.borderWidth}px ${x.borderStyle} ${V}88`:"none",boxShadow:k&&!$?`0 0 8px ${W?.color||V}60`:le()},initial:!1,animate:w(),transition:C(),children:[x.innerEffect==="glossy"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-transparent to-black/10 pointer-events-none"}),x.innerEffect==="glass"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent pointer-events-none"}),x.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30 pointer-events-none"}),g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius,border:x.innerEffect==="flat"?"none":"1px solid rgba(255,255,255,0.2)"}}),x.texture!=="none"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-50",style:{backgroundImage:M(),backgroundSize:x.texture==="dots"?"8px 8px":"100% 100%",borderRadius:x.borderRadius}}),x.animation==="shimmer"&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(110deg, transparent 20%, rgba(255,255,255,0.4) 50%, transparent 80%)",borderRadius:x.borderRadius},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}}),x.animation==="fire"&&g.jsx(ie.div,{className:"absolute -inset-1 pointer-events-none",style:{background:`radial-gradient(ellipse at bottom, ${V}88 0%, transparent 70%)`,filter:"blur(2px)",borderRadius:x.borderRadius},animate:{opacity:[.5,.8,.5],scale:[1,1.1,1]},transition:{duration:.5,repeat:1/0}}),x.animation==="ice"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(200,230,255,0.2) 100%)",borderRadius:x.borderRadius}}),x.animation==="electric"&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius},animate:{boxShadow:[`inset 0 0 5px ${V}`,`inset 0 0 15px ${V}, 0 0 10px ${V}`,`inset 0 0 5px ${V}`]},transition:{duration:.2,repeat:1/0}}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-200/50 to-blue-300/30"}),g.jsx(ie.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.4) 50%, transparent 60%)",backgroundSize:"200% 200%"},animate:{backgroundPosition:["0% 0%","200% 200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),m>0&&g.jsx("div",{className:"absolute bottom-0 right-0 bg-cyan-600 text-white text-xs font-bold px-1 rounded-tl",children:m})]}),k&&!$&&W?.icon&&g.jsx(ie.div,{className:"absolute inset-0 flex items-center justify-center text-base drop-shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:W.icon}),o&&g.jsx(ie.div,{className:"absolute inset-0 rounded-md",style:{boxShadow:`0 0 20px 5px ${V}`}}),q&&g.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{background:t2(q)}}),k&&!$&&g.jsx(ie.div,{className:"absolute inset-0 rounded-md pointer-events-none",animate:{boxShadow:[`0 0 5px ${W?.color||V}40`,`0 0 15px ${W?.color||V}60`,`0 0 5px ${W?.color||V}40`]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})});function t2(r){switch(r){case"striped":return"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.3) 5px, rgba(0,0,0,0.3) 10px)";case"dotted":return"radial-gradient(circle, rgba(0,0,0,0.3) 2px, transparent 2.5px) 0 0 / 8px 8px";case"crosshatch":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px)";case"diagonal":return"repeating-linear-gradient(135deg, transparent, transparent 3px, rgba(255,255,255,0.5) 3px, rgba(255,255,255,0.5) 5px)";case"grid":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px)";case"waves":return"repeating-linear-gradient(45deg, transparent 0px, transparent 5px, rgba(255,255,255,0.3) 5px, rgba(255,255,255,0.3) 10px)";case"circles":return"radial-gradient(circle at 50% 50%, transparent 3px, rgba(255,255,255,0.3) 3px, rgba(255,255,255,0.3) 5px, transparent 5px)";default:return"none"}}function n2({cellSize:r}){const t=re.useRef(null),{triggerHaptic:a}=Zx(t),{playSound:s,startBGM:o,stopBGM:c}=ca(),{board:h,currentBlock:m,currentBlocks:p,gameStatus:b,level:x,gravityDirection:T,isPowerUpSelecting:S,garbagePending:I,garbageTimer:V}=Pe(),{settings:q}=Xn(),{fusionEffects:U,chainEffects:k,specialEffects:W,getGhostPosition:$}=$x(),se=re.useMemo(()=>{if(r)return r;if(typeof window<"u"){const w=window.innerWidth<768,C=Math.min(window.innerWidth-32,450),N=window.innerHeight-200,O=Math.floor(C/me.COLUMNS),B=Math.floor(N/me.ROWS);return Math.min(O,B,w?38:45)}return 40},[r]),ce=se*me.COLUMNS,le=se*me.ROWS,M=re.useMemo(()=>q.showGhostBlock&&m?$():null,[m,q.showGhostBlock,$]);return re.useEffect(()=>{b==="playing"?o(x):c()},[b,x,o,c]),re.useEffect(()=>{U.length>0&&(s("fusion"),a("medium"))},[U,s,a]),re.useEffect(()=>{k>1&&(s("chain"),a("heavy"))},[k,s,a]),g.jsx("div",{className:"relative p-1 rounded-xl bg-gradient-to-b from-gray-800 to-gray-900 shadow-2xl border border-white/10",children:g.jsxs("div",{ref:t,className:"relative overflow-hidden rounded-lg bg-[#0a0a15] select-none touch-none",style:{width:ce,height:le},children:[g.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:g.jsxs("svg",{width:"100%",height:"100%",children:[g.jsx("defs",{children:g.jsx("pattern",{id:"grid",width:se,height:se,patternUnits:"userSpaceOnUse",children:g.jsx("path",{d:`M ${se} 0 L 0 0 0 ${se}`,fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"})})}),g.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),T==="down"&&g.jsx("div",{className:"absolute top-0 left-0 right-0 pointer-events-none transition-opacity duration-500",style:{height:se*3,background:"linear-gradient(to bottom, rgba(255, 50, 50, 0.15) 0%, transparent 100%)",borderBottom:"1px dashed rgba(255, 50, 50, 0.3)"}}),M&&m&&M.y!==m.y&&g.jsx("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:M.x*se+1,top:M.y*se+1,zIndex:0},children:g.jsx(iu,{color:m.color,size:se,isGhost:!0})}),g.jsx(un,{children:h.map((w,C)=>w.map((N,O)=>{if(!N)return null;const B=U.some(R=>R.x===O&&R.y===C);return g.jsx(ie.div,{className:"absolute",style:{left:O*se+1,top:C*se+1,zIndex:10},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:g.jsx(iu,{color:N.color,size:se,isFusing:B,specialType:N.specialType,frozenCount:N.frozenCount})},N.id)}))}),g.jsx(un,{children:p.map((w,C)=>g.jsx(ie.div,{className:"absolute pointer-events-none",style:{left:w.x*se+1,top:w.y*se+1,zIndex:20},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.05},children:g.jsx(iu,{color:w.color,size:se,specialType:w.specialType})},w.id||`falling-${C}`))}),I>0&&g.jsx(ie.div,{className:"absolute bottom-0 left-0 right-0 flex justify-center items-center gap-1 py-1 bg-red-600/80 backdrop-blur-sm z-25",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:g.jsxs("span",{className:"text-white text-xs font-bold",children:[" GARBAGE INCOMING: ",I," ROW",I>1?"S":""]})}),g.jsx("div",{className:"absolute inset-0 pointer-events-none z-30",children:g.jsxs(un,{children:[U.map((w,C)=>g.jsx(ie.div,{className:"absolute rounded-full blur-md",style:{left:w.x*se,top:w.y*se,width:se,height:se,backgroundColor:Od[w.color]||"#fff"},initial:{scale:.5,opacity:.8},animate:{scale:2.5,opacity:0},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"}},`fusion-${C}`)),k>1&&g.jsx(ie.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:.5,opacity:0,y:20},animate:{scale:1.2,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:g.jsxs("div",{className:"text-center",children:[g.jsxs("h2",{className:"text-5xl font-black italic text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-orange-500 drop-shadow-[0_0_15px_rgba(255,165,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:[k," CHAIN!"]}),g.jsx("p",{className:"text-white font-bold text-lg drop-shadow-md",children:"COMBO BOOSTER"})]})}),W.map((w,C)=>g.jsxs(ie.div,{className:"absolute pointer-events-none",style:{left:w.x*se,top:w.y*se,width:se,height:se},initial:{scale:1,opacity:1},animate:{scale:2.5,opacity:0},transition:{duration:.5},children:[w.type==="bomb"&&g.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-orange-500 to-red-600 blur-md"}),w.type==="lightning"&&g.jsx("div",{className:"w-full h-full bg-yellow-400 blur-lg animate-pulse"}),w.type==="cross"&&g.jsxs("div",{className:"w-full h-full",children:[g.jsx("div",{className:"absolute inset-x-0 top-1/2 h-2 -translate-y-1/2 bg-green-400 blur-sm"}),g.jsx("div",{className:"absolute inset-y-0 left-1/2 w-2 -translate-x-1/2 bg-green-400 blur-sm"})]})]},`special-${C}`))]})}),g.jsx(un,{children:S&&g.jsx(ie.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-white font-bold text-xl mb-6 neon-text",children:"  "}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsx("div",{}),g.jsx("button",{onClick:()=>Pe.getState().setGravityDirection("up"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("div",{}),g.jsx("button",{onClick:()=>Pe.getState().setGravityDirection("left"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>Pe.getState().setGravityDirection("down"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>Pe.getState().setGravityDirection("right"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""})]})]})})}),b==="paused"&&g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] z-30 flex items-center justify-center",children:g.jsx("h2",{className:"text-3xl font-bold text-white tracking-widest",style:{fontFamily:"var(--font-display)"},children:"PAUSED"})})]})})}function ey({cellSize:r=28,maxBlocks:t=_x}){const{nextBlocks:a,nextSpecialTypes:s}=Pe(),o=a.slice(0,t),c=s?.slice(0,t)||[];return g.jsxs("div",{className:"glass-panel rounded-xl p-4 flex flex-col items-center min-w-[80px]",children:[g.jsx("h3",{className:"text-[10px] font-bold text-gray-400 mb-4 tracking-widest text-center",children:"NEXT"}),g.jsx("div",{className:"flex flex-col gap-4 items-center",children:o.map((h,m)=>{const p=m===0?r:Math.floor(r*.75);return g.jsxs(ie.div,{className:"relative flex items-center justify-center",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:m*.1},style:{width:r+8,height:r+8,opacity:m===0?1:.5,filter:m===0?"none":"grayscale(30%)"},children:[g.jsx(iu,{color:h,size:p,specialType:c[m]||"normal"}),m===0&&g.jsx("div",{className:"absolute -inset-1 rounded-lg border-2 border-white/30 animate-pulse pointer-events-none"})]},`next-${m}`)})})]})}const a2=150;function i2({visible:r=!0}){const{playSound:t}=ca(),a=re.useRef(null),s=re.useRef({}),o=re.useCallback((T,S)=>{const I=Date.now(),V=s.current[T]||0;return I-V<a2?!1:(s.current[T]=I,S(),!0)},[]);re.useEffect(()=>{const T=new Set;let S=null,I=null,V=null;const q=()=>{S&&clearInterval(S),V&&clearTimeout(V),S=null,V=null,I=null},U=$=>{if(T.has($.code)){$.preventDefault();return}T.add($.code);const se=Pe.getState();if($.code==="Escape"||$.code==="KeyP"){se.gameStatus==="playing"?se.pauseGame():se.gameStatus==="paused"&&se.resumeGame();return}if(se.gameStatus==="playing"){if(se.isPowerUpSelecting){$.code==="ArrowUp"?se.setGravityDirection("up"):$.code==="ArrowDown"?se.setGravityDirection("down"):$.code==="ArrowLeft"?se.setGravityDirection("left"):$.code==="ArrowRight"&&se.setGravityDirection("right");return}if($.code==="ArrowLeft"||$.code==="KeyA"){$.preventDefault(),q(),se.moveBlock("left"),I="left",V=window.setTimeout(()=>{I==="left"&&(S=window.setInterval(()=>Pe.getState().moveBlock("left"),50))},250);return}if($.code==="ArrowRight"||$.code==="KeyD"){$.preventDefault(),q(),se.moveBlock("right"),I="right",V=window.setTimeout(()=>{I==="right"&&(S=window.setInterval(()=>{Pe.getState().moveBlock("right")},50))},250);return}if($.code==="ArrowDown"||$.code==="KeyS"){$.preventDefault(),se.softDrop();return}if($.code==="ArrowUp"||$.code==="KeyW"){$.preventDefault(),se.rotateBlock();return}if($.code==="Space"){$.preventDefault(),se.hardDrop();return}}},k=$=>{T.delete($.code),($.code==="ArrowLeft"||$.code==="KeyA")&&I==="left"&&q(),($.code==="ArrowRight"||$.code==="KeyD")&&I==="right"&&q()},W=()=>{T.clear(),q()};return window.addEventListener("keydown",U),window.addEventListener("keyup",k),window.addEventListener("blur",W),()=>{window.removeEventListener("keydown",U),window.removeEventListener("keyup",k),window.removeEventListener("blur",W),q()}},[]);const c=re.useCallback(()=>{o("hardDrop",()=>{t("hardDrop"),Pe.getState().hardDrop()})},[t,o]),h=re.useCallback(()=>{o("rotate",()=>{t("blockRotate"),Pe.getState().rotateBlock()})},[t,o]),m=re.useCallback(()=>{o("softDrop",()=>{t("blockMove"),Pe.getState().softDrop()})},[t,o]),p=re.useCallback(T=>{t("blockMove"),Pe.getState().moveBlock(T),a.current&&clearInterval(a.current),a.timeout&&clearTimeout(a.timeout);const S=setTimeout(()=>{a.current=window.setInterval(()=>{Pe.getState().moveBlock(T)},80)},300);a.timeout=S},[t]),b=re.useCallback(()=>{a.timeout&&(clearTimeout(a.timeout),a.timeout=null),a.current&&(clearInterval(a.current),a.current=null)},[]),x=Pe(T=>T.currentBlocks);return r?g.jsx("div",{className:"w-full px-3 pb-4 pt-2 select-none touch-none",children:g.jsxs("div",{className:"flex justify-between items-center gap-3 max-w-md mx-auto",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Yh,{icon:"",onStart:()=>p("left"),onEnd:b}),g.jsx(Yh,{icon:"",onStart:m}),g.jsx(Yh,{icon:"",onStart:()=>p("right"),onEnd:b})]}),g.jsxs(ie.button,{className:`w-14 h-14 rounded-2xl flex flex-col items-center justify-center
                     text-white font-bold shadow-lg border-b-4
                     active:border-b-0 active:translate-y-1 transition-all
                     ${x.length>1?"bg-gradient-to-br from-purple-500 to-indigo-600 border-purple-700":"bg-slate-700 border-slate-600 opacity-50"}`,whileTap:{scale:.9},onTouchStart:T=>{T.preventDefault(),T.stopPropagation(),h()},children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-[8px] opacity-80",children:""})]}),g.jsxs(ie.button,{className:`w-20 h-14 rounded-2xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500\r
                     flex items-center justify-center gap-1 text-white font-bold\r
                     shadow-lg shadow-orange-500/30 border-b-4 border-orange-700\r
                     active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.95},onTouchStart:T=>{T.preventDefault(),T.stopPropagation(),c()},children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-sm",children:"DROP"})]})]})}):null}function Yh({icon:r,onStart:t,onEnd:a}){const s=re.useCallback(c=>{c.preventDefault(),c.stopPropagation(),t()},[t]),o=re.useCallback(c=>{c.preventDefault(),c.stopPropagation(),a?.()},[a]);return g.jsx(ie.button,{className:`w-14 h-14 rounded-2xl bg-slate-700/90 backdrop-blur\r
                 flex items-center justify-center text-white text-2xl font-bold\r
                 shadow-lg border-b-4 border-slate-600\r
                 active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.9},onTouchStart:s,onTouchEnd:o,onTouchCancel:o,children:r})}function s2(){const{powerUps:r,gameStatus:t,usePowerUp:a,toggleGravitySelection:s,activatePowerUp:o}=Pe(),{playSound:c}=ca(),h=m=>{if(t!=="playing")return;const p=r.find(b=>b.type===m);if(!(!p||p.count<=0)){if(c("powerUpUse"),m==="gravityShift"){s(!0),a(m);return}a(m),(m==="timeSlow"||m==="scoreMultiplier"||m==="freeze")&&(o({type:m,count:1,isActive:!0,remainingTime:m==="scoreMultiplier"?30:5}),setTimeout(()=>{Pe.getState().deactivatePowerUp()},m==="scoreMultiplier"?3e4:5e3))}};return r.length===0?null:g.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:g.jsx(un,{children:r.map(m=>{const p=vx[m.type];return g.jsxs(ie.button,{className:`relative flex flex-col items-center gap-1 p-2 bg-game-panel/80 rounded-lg\r
                         hover:bg-game-accent/30 active:scale-95 transition-all border border-white/10\r
                         disabled:opacity-50 disabled:cursor-not-allowed`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:()=>h(m.type),disabled:t!=="playing"||m.count<=0,title:`${p.name}: ${p.description}`,children:[g.jsx("span",{className:"text-2xl",children:p.icon}),g.jsx("span",{className:"text-xs text-gray-400",children:p.name}),g.jsx("span",{className:`absolute -top-1 -right-1 w-5 h-5 bg-game-accent rounded-full\r
                             text-xs font-bold flex items-center justify-center text-white`,children:m.count})]},m.type)})})})}function r2(){const{score:r,level:t,combo:a,chainCount:s,gravityDirection:o,gameTime:c,activePowerUp:h,statistics:m,feverGauge:p,isFeverMode:b,gameMode:x,movesRemaining:T,puzzleLevel:S,levelObjectives:I}=Pe(),V=x==="puzzle",q=k=>{const W=Math.floor(k/60),$=k%60;return`${W}:${$.toString().padStart(2,"0")}`},U=r>m.highScore&&r>0;return g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsxs("div",{className:"glass-panel p-4 rounded-xl text-center relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 tracking-wider mb-1",children:"SCORE"}),g.jsx(ie.p,{initial:{scale:1.1},animate:{scale:1},className:`text-2xl font-mono font-bold ${U?"text-yellow-400 neon-text":"text-white"}`,children:r.toLocaleString()},r),U&&g.jsx("span",{className:"absolute top-2 right-2 text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded font-bold animate-pulse",children:"NEW"})]}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:V?g.jsxs(g.Fragment,{children:[g.jsx(Zc,{label:"PUZZLE",value:`Lv.${S}`,color:"text-purple-400"}),g.jsx(Zc,{label:"MOVES",value:T,color:T<=5?"text-red-400":"text-yellow-400"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Zc,{label:"LEVEL",value:t,color:"text-cyan-400"}),g.jsx(Zc,{label:"TIME",value:q(c),color:"text-gray-300",font:"font-mono"})]})}),V&&I.length>0&&g.jsxs("div",{className:"glass-panel p-3 rounded-xl",children:[g.jsx("p",{className:"text-xs font-bold text-purple-300 mb-2",children:" OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:I.map((k,W)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${k.completed?"bg-green-500":"bg-gray-600"}`,children:k.completed?"":""}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center text-xs",children:[g.jsxs("span",{className:"text-gray-300",children:[k.type==="score"&&"",k.type==="clearBlocks"&&" ",k.type==="chains"&&"",k.type==="clearColor"&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"w-3 h-3 rounded",style:{background:Od[k.color]}})," "]})]}),g.jsxs("span",{className:k.completed?"text-green-400":"text-white",children:[k.current,"/",k.target]})]}),g.jsx("div",{className:"w-full bg-gray-700 h-1 rounded-full mt-1 overflow-hidden",children:g.jsx("div",{className:`h-full ${k.completed?"bg-green-500":"bg-purple-500"}`,style:{width:`${Math.min(100,k.current/k.target*100)}%`}})})]})]},W))})]}),g.jsx(un,{children:(a>1||s>0)&&g.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex gap-2",children:[a>1&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-orange-900/20 border-orange-500/30",children:[g.jsx("span",{className:"text-[10px] text-orange-300",children:"COMBO"}),g.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["x",a]})]}),s>0&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-purple-900/20 border-purple-500/30",children:[g.jsx("span",{className:"text-[10px] text-purple-300",children:"CHAIN"}),g.jsx("span",{className:"text-lg font-bold text-purple-400",children:s})]})]})}),g.jsxs("div",{className:`glass-panel p-3 rounded-xl ${b?"border-2 border-orange-500 bg-orange-900/30":""}`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:`text-xs font-bold ${b?"text-orange-300":"text-gray-400"}`,children:b?" FEVER MODE!":"FEVER GAUGE"}),g.jsxs("span",{className:`text-xs font-mono ${b?"text-orange-400":"text-gray-500"}`,children:[Math.floor(p||0),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-700/50 h-3 rounded-full overflow-hidden",children:g.jsx(ie.div,{className:`h-full ${b?"bg-gradient-to-r from-orange-500 via-red-500 to-yellow-500":"bg-gradient-to-r from-orange-600 to-yellow-500"}`,initial:!1,animate:{width:`${Math.min(p||0,Os.MAX_GAUGE)}%`},transition:{duration:.3},style:{boxShadow:b?"0 0 10px #ff6b00":"none"}})}),b&&g.jsx(ie.p,{className:"text-center text-xs text-orange-300 mt-1 font-bold",animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},children:"x3 SCORE MULTIPLIER!"})]}),g.jsxs("div",{className:"glass-panel p-3 rounded-xl flex items-center justify-between",children:[g.jsx("span",{className:"text-xs text-gray-400",children:"GRAVITY"}),g.jsx(ie.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},className:"text-xl bg-white/10 w-8 h-8 rounded flex items-center justify-center",children:bx[o]},o)]}),g.jsx(un,{children:h&&g.jsxs(ie.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"glass-panel p-3 rounded-xl border-l-4 border-blue-500 bg-blue-900/20",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-xs font-bold text-blue-300",children:"ACTIVE EFFECT"}),h.remainingTime&&g.jsxs("span",{className:"text-xs font-mono text-white",children:[h.remainingTime,"s"]})]}),g.jsxs("div",{className:"text-sm text-white font-medium flex items-center gap-2",children:[h.type==="timeSlow"&&" Time Slow",h.type==="scoreMultiplier"&&" x2 Score",h.type==="freeze"&&" Frozen"]}),h.remainingTime&&g.jsx("div",{className:"w-full bg-gray-700 h-1 mt-2 rounded-full overflow-hidden",children:g.jsx(ie.div,{className:"h-full bg-blue-400",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:h.remainingTime,ease:"linear"}})})]})})]})}function Zc({label:r,value:t,color:a,font:s=""}){return g.jsxs("div",{className:"glass-panel p-2 rounded-lg text-center flex flex-col justify-center min-h-[60px]",children:[g.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-0.5",children:r}),g.jsx("p",{className:`text-lg font-bold ${a} ${s}`,children:t})]})}var jd={};(function r(t,a,s,o){var c=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=(function(){if(!t.OffscreenCanvas)return!1;try{var z=new OffscreenCanvas(1,1),j=z.getContext("2d");j.fillRect(0,0,1,1);var ae=z.transferToImageBitmap();j.createPattern(ae,"no-repeat")}catch{return!1}return!0})();function p(){}function b(z){var j=a.exports.Promise,ae=j!==void 0?j:t.Promise;return typeof ae=="function"?new ae(z):(z(p,p),null)}var x=(function(z,j){return{transform:function(ae){if(z)return ae;if(j.has(ae))return j.get(ae);var ue=new OffscreenCanvas(ae.width,ae.height),ge=ue.getContext("2d");return ge.drawImage(ae,0,0),j.set(ae,ue),ue},clear:function(){j.clear()}}})(m,new Map),T=(function(){var z=Math.floor(16.666666666666668),j,ae,ue={},ge=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(j=function(Te){var Ce=Math.random();return ue[Ce]=requestAnimationFrame(function he(be){ge===be||ge+z-1<be?(ge=be,delete ue[Ce],Te()):ue[Ce]=requestAnimationFrame(he)}),Ce},ae=function(Te){ue[Te]&&cancelAnimationFrame(ue[Te])}):(j=function(Te){return setTimeout(Te,z)},ae=function(Te){return clearTimeout(Te)}),{frame:j,cancel:ae}})(),S=(function(){var z,j,ae={};function ue(ge){function Te(Ce,he){ge.postMessage({options:Ce||{},callback:he})}ge.init=function(he){var be=he.transferControlToOffscreen();ge.postMessage({canvas:be},[be])},ge.fire=function(he,be,ye){if(j)return Te(he,null),j;var de=Math.random().toString(36).slice(2);return j=b(function(Ne){function Ie(Ge){Ge.data.callback===de&&(delete ae[de],ge.removeEventListener("message",Ie),j=null,x.clear(),ye(),Ne())}ge.addEventListener("message",Ie),Te(he,de),ae[de]=Ie.bind(null,{data:{callback:de}})}),j},ge.reset=function(){ge.postMessage({reset:!0});for(var he in ae)ae[he](),delete ae[he]}}return function(){if(z)return z;if(!s&&c){var ge=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{z=new Worker(URL.createObjectURL(new Blob([ge])))}catch(Te){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Te),null}ue(z)}return z}})(),I={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function V(z,j){return j?j(z):z}function q(z){return z!=null}function U(z,j,ae){return V(z&&q(z[j])?z[j]:I[j],ae)}function k(z){return z<0?0:Math.floor(z)}function W(z,j){return Math.floor(Math.random()*(j-z))+z}function $(z){return parseInt(z,16)}function se(z){return z.map(ce)}function ce(z){var j=String(z).replace(/[^0-9a-f]/gi,"");return j.length<6&&(j=j[0]+j[0]+j[1]+j[1]+j[2]+j[2]),{r:$(j.substring(0,2)),g:$(j.substring(2,4)),b:$(j.substring(4,6))}}function le(z){var j=U(z,"origin",Object);return j.x=U(j,"x",Number),j.y=U(j,"y",Number),j}function M(z){z.width=document.documentElement.clientWidth,z.height=document.documentElement.clientHeight}function w(z){var j=z.getBoundingClientRect();z.width=j.width,z.height=j.height}function C(z){var j=document.createElement("canvas");return j.style.position="fixed",j.style.top="0px",j.style.left="0px",j.style.pointerEvents="none",j.style.zIndex=z,j}function N(z,j,ae,ue,ge,Te,Ce,he,be){z.save(),z.translate(j,ae),z.rotate(Te),z.scale(ue,ge),z.arc(0,0,1,Ce,he,be),z.restore()}function O(z){var j=z.angle*(Math.PI/180),ae=z.spread*(Math.PI/180);return{x:z.x,y:z.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:z.startVelocity*.5+Math.random()*z.startVelocity,angle2D:-j+(.5*ae-Math.random()*ae),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:z.color,shape:z.shape,tick:0,totalTicks:z.ticks,decay:z.decay,drift:z.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:z.gravity*3,ovalScalar:.6,scalar:z.scalar,flat:z.flat}}function B(z,j){j.x+=Math.cos(j.angle2D)*j.velocity+j.drift,j.y+=Math.sin(j.angle2D)*j.velocity+j.gravity,j.velocity*=j.decay,j.flat?(j.wobble=0,j.wobbleX=j.x+10*j.scalar,j.wobbleY=j.y+10*j.scalar,j.tiltSin=0,j.tiltCos=0,j.random=1):(j.wobble+=j.wobbleSpeed,j.wobbleX=j.x+10*j.scalar*Math.cos(j.wobble),j.wobbleY=j.y+10*j.scalar*Math.sin(j.wobble),j.tiltAngle+=.1,j.tiltSin=Math.sin(j.tiltAngle),j.tiltCos=Math.cos(j.tiltAngle),j.random=Math.random()+2);var ae=j.tick++/j.totalTicks,ue=j.x+j.random*j.tiltCos,ge=j.y+j.random*j.tiltSin,Te=j.wobbleX+j.random*j.tiltCos,Ce=j.wobbleY+j.random*j.tiltSin;if(z.fillStyle="rgba("+j.color.r+", "+j.color.g+", "+j.color.b+", "+(1-ae)+")",z.beginPath(),h&&j.shape.type==="path"&&typeof j.shape.path=="string"&&Array.isArray(j.shape.matrix))z.fill(oe(j.shape.path,j.shape.matrix,j.x,j.y,Math.abs(Te-ue)*.1,Math.abs(Ce-ge)*.1,Math.PI/10*j.wobble));else if(j.shape.type==="bitmap"){var he=Math.PI/10*j.wobble,be=Math.abs(Te-ue)*.1,ye=Math.abs(Ce-ge)*.1,de=j.shape.bitmap.width*j.scalar,Ne=j.shape.bitmap.height*j.scalar,Ie=new DOMMatrix([Math.cos(he)*be,Math.sin(he)*be,-Math.sin(he)*ye,Math.cos(he)*ye,j.x,j.y]);Ie.multiplySelf(new DOMMatrix(j.shape.matrix));var Ge=z.createPattern(x.transform(j.shape.bitmap),"no-repeat");Ge.setTransform(Ie),z.globalAlpha=1-ae,z.fillStyle=Ge,z.fillRect(j.x-de/2,j.y-Ne/2,de,Ne),z.globalAlpha=1}else if(j.shape==="circle")z.ellipse?z.ellipse(j.x,j.y,Math.abs(Te-ue)*j.ovalScalar,Math.abs(Ce-ge)*j.ovalScalar,Math.PI/10*j.wobble,0,2*Math.PI):N(z,j.x,j.y,Math.abs(Te-ue)*j.ovalScalar,Math.abs(Ce-ge)*j.ovalScalar,Math.PI/10*j.wobble,0,2*Math.PI);else if(j.shape==="star")for(var Se=Math.PI/2*3,dt=4*j.scalar,st=8*j.scalar,Gt=j.x,Tt=j.y,$e=5,Je=Math.PI/$e;$e--;)Gt=j.x+Math.cos(Se)*st,Tt=j.y+Math.sin(Se)*st,z.lineTo(Gt,Tt),Se+=Je,Gt=j.x+Math.cos(Se)*dt,Tt=j.y+Math.sin(Se)*dt,z.lineTo(Gt,Tt),Se+=Je;else z.moveTo(Math.floor(j.x),Math.floor(j.y)),z.lineTo(Math.floor(j.wobbleX),Math.floor(ge)),z.lineTo(Math.floor(Te),Math.floor(Ce)),z.lineTo(Math.floor(ue),Math.floor(j.wobbleY));return z.closePath(),z.fill(),j.tick<j.totalTicks}function R(z,j,ae,ue,ge){var Te=j.slice(),Ce=z.getContext("2d"),he,be,ye=b(function(de){function Ne(){he=be=null,Ce.clearRect(0,0,ue.width,ue.height),x.clear(),ge(),de()}function Ie(){s&&!(ue.width===o.width&&ue.height===o.height)&&(ue.width=z.width=o.width,ue.height=z.height=o.height),!ue.width&&!ue.height&&(ae(z),ue.width=z.width,ue.height=z.height),Ce.clearRect(0,0,ue.width,ue.height),Te=Te.filter(function(Ge){return B(Ce,Ge)}),Te.length?he=T.frame(Ie):Ne()}he=T.frame(Ie),be=Ne});return{addFettis:function(de){return Te=Te.concat(de),ye},canvas:z,promise:ye,reset:function(){he&&T.cancel(he),be&&be()}}}function Be(z,j){var ae=!z,ue=!!U(j||{},"resize"),ge=!1,Te=U(j,"disableForReducedMotion",Boolean),Ce=c&&!!U(j||{},"useWorker"),he=Ce?S():null,be=ae?M:w,ye=z&&he?!!z.__confetti_initialized:!1,de=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ne;function Ie(Se,dt,st){for(var Gt=U(Se,"particleCount",k),Tt=U(Se,"angle",Number),$e=U(Se,"spread",Number),Je=U(Se,"startVelocity",Number),In=U(Se,"decay",Number),ua=U(Se,"gravity",Number),ci=U(Se,"drift",Number),Mt=U(Se,"colors",se),Yn=U(Se,"ticks",Number),Kn=U(Se,"shapes"),Ua=U(Se,"scalar"),Ze=!!U(Se,"flat"),qs=le(Se),as=Gt,ui=[],Hs=z.width*qs.x,xn=z.height*qs.y;as--;)ui.push(O({x:Hs,y:xn,angle:Tt,spread:$e,startVelocity:Je,color:Mt[as%Mt.length],shape:Kn[W(0,Kn.length)],ticks:Yn,decay:In,gravity:ua,drift:ci,scalar:Ua,flat:Ze}));return Ne?Ne.addFettis(ui):(Ne=R(z,ui,be,dt,st),Ne.promise)}function Ge(Se){var dt=Te||U(Se,"disableForReducedMotion",Boolean),st=U(Se,"zIndex",Number);if(dt&&de)return b(function(Je){Je()});ae&&Ne?z=Ne.canvas:ae&&!z&&(z=C(st),document.body.appendChild(z)),ue&&!ye&&be(z);var Gt={width:z.width,height:z.height};he&&!ye&&he.init(z),ye=!0,he&&(z.__confetti_initialized=!0);function Tt(){if(he){var Je={getBoundingClientRect:function(){if(!ae)return z.getBoundingClientRect()}};be(Je),he.postMessage({resize:{width:Je.width,height:Je.height}});return}Gt.width=Gt.height=null}function $e(){Ne=null,ue&&(ge=!1,t.removeEventListener("resize",Tt)),ae&&z&&(document.body.contains(z)&&document.body.removeChild(z),z=null,ye=!1)}return ue&&!ge&&(ge=!0,t.addEventListener("resize",Tt,!1)),he?he.fire(Se,Gt,$e):Ie(Se,Gt,$e)}return Ge.reset=function(){he&&he.reset(),Ne&&Ne.reset()},Ge}var tt;function X(){return tt||(tt=Be(null,{useWorker:!0,resize:!0})),tt}function oe(z,j,ae,ue,ge,Te,Ce){var he=new Path2D(z),be=new Path2D;be.addPath(he,new DOMMatrix(j));var ye=new Path2D;return ye.addPath(be,new DOMMatrix([Math.cos(Ce)*ge,Math.sin(Ce)*ge,-Math.sin(Ce)*Te,Math.cos(Ce)*Te,ae,ue])),ye}function xe(z){if(!h)throw new Error("path confetti are not supported in this browser");var j,ae;typeof z=="string"?j=z:(j=z.path,ae=z.matrix);var ue=new Path2D(j),ge=document.createElement("canvas"),Te=ge.getContext("2d");if(!ae){for(var Ce=1e3,he=Ce,be=Ce,ye=0,de=0,Ne,Ie,Ge=0;Ge<Ce;Ge+=2)for(var Se=0;Se<Ce;Se+=2)Te.isPointInPath(ue,Ge,Se,"nonzero")&&(he=Math.min(he,Ge),be=Math.min(be,Se),ye=Math.max(ye,Ge),de=Math.max(de,Se));Ne=ye-he,Ie=de-be;var dt=10,st=Math.min(dt/Ne,dt/Ie);ae=[st,0,0,st,-Math.round(Ne/2+he)*st,-Math.round(Ie/2+be)*st]}return{type:"path",path:j,matrix:ae}}function Le(z){var j,ae=1,ue="#000000",ge='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof z=="string"?j=z:(j=z.text,ae="scalar"in z?z.scalar:ae,ge="fontFamily"in z?z.fontFamily:ge,ue="color"in z?z.color:ue);var Te=10*ae,Ce=""+Te+"px "+ge,he=new OffscreenCanvas(Te,Te),be=he.getContext("2d");be.font=Ce;var ye=be.measureText(j),de=Math.ceil(ye.actualBoundingBoxRight+ye.actualBoundingBoxLeft),Ne=Math.ceil(ye.actualBoundingBoxAscent+ye.actualBoundingBoxDescent),Ie=2,Ge=ye.actualBoundingBoxLeft+Ie,Se=ye.actualBoundingBoxAscent+Ie;de+=Ie+Ie,Ne+=Ie+Ie,he=new OffscreenCanvas(de,Ne),be=he.getContext("2d"),be.font=Ce,be.fillStyle=ue,be.fillText(j,Ge,Se);var dt=1/ae;return{type:"bitmap",bitmap:he.transferToImageBitmap(),matrix:[dt,0,0,dt,-de*dt/2,-Ne*dt/2]}}a.exports=function(){return X().apply(this,arguments)},a.exports.reset=function(){X().reset()},a.exports.create=Be,a.exports.shapeFromPath=xe,a.exports.shapeFromText=Le})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),jd,!1);const kd=jd.exports;jd.exports.create;const l2=()=>{};var ty={};const Ev=function(r){const t=[];let a=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[a++]=o:o<2048?(t[a++]=o>>6|192,t[a++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[a++]=o>>18|240,t[a++]=o>>12&63|128,t[a++]=o>>6&63|128,t[a++]=o&63|128):(t[a++]=o>>12|224,t[a++]=o>>6&63|128,t[a++]=o&63|128)}return t},o2=function(r){const t=[];let a=0,s=0;for(;a<r.length;){const o=r[a++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[a++];t[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[a++],h=r[a++],m=r[a++],p=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[a++],h=r[a++];t[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return t.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,b=p?r[o+2]:0,x=c>>2,T=(c&3)<<4|m>>4;let S=(m&15)<<2|b>>6,I=b&63;p||(I=64,h||(S=64)),s.push(a[x],a[T],a[S],a[I])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Ev(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):o2(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=a[r.charAt(o++)],m=o<r.length?a[r.charAt(o)]:0;++o;const b=o<r.length?a[r.charAt(o)]:64;++o;const T=o<r.length?a[r.charAt(o)]:64;if(++o,c==null||m==null||b==null||T==null)throw new c2;const S=c<<2|m>>4;if(s.push(S),b!==64){const I=m<<4&240|b>>2;if(s.push(I),T!==64){const V=b<<6&192|T;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class c2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u2=function(r){const t=Ev(r);return Sv.encodeByteArray(t,!0)},du=function(r){return u2(r).replace(/\./g,"")},f2=function(r){try{return Sv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const d2=()=>h2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof ty>"u")return;const r=ty.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},p2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&f2(r[1]);return t&&JSON.parse(t)},Ld=()=>{try{return l2()||d2()||m2()||p2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},g2=r=>Ld()?.emulatorHosts?.[r],y2=r=>{const t=g2(r);if(!t)return;const a=t.lastIndexOf(":");if(a<=0||a+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(a+1),10);return t[0]==="["?[t.substring(1,a-1),s]:[t.substring(0,a),s]},wv=()=>Ld()?.config;class v2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,s)=>{a?this.reject(a):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,s))}}}function Bd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function b2(r){return(await fetch(r,{credentials:"include"})).ok}function _2(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[du(JSON.stringify(a)),du(JSON.stringify(h)),""].join(".")}const io={};function x2(){const r={prod:[],emulator:[]};for(const t of Object.keys(io))io[t]?r.emulator.push(t):r.prod.push(t);return r}function T2(r){let t=document.getElementById(r),a=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),a=!0),{created:a,element:t}}let ny=!1;function E2(r,t){if(typeof window>"u"||typeof document>"u"||!Bd(window.location.host)||io[r]===t||io[r]||ny)return;io[r]=t;function a(S){return`__firebase__banner__${S}`}const s="__firebase__banner",c=x2().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function b(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{ny=!0,h()},S}function x(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=T2(s),I=a("text"),V=document.getElementById(I)||document.createElement("span"),q=a("learnmore"),U=document.getElementById(q)||document.createElement("a"),k=a("preprendIcon"),W=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;m($),x(U,q);const se=b();p(W,k),$.append(W,V,U,se),document.body.appendChild($)}c?(V.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function S2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w2(){const r=Ld()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A2(){return!w2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C2(){try{return typeof indexedDB=="object"}catch{return!1}}function N2(){return new Promise((r,t)=>{try{let a=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),a||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{a=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(a){t(a)}})}const R2="FirebaseError";class Xr extends Error{constructor(t,a,s){super(a),this.code=t,this.customData=s,this.name=R2,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Av.prototype.create)}}class Av{constructor(t,a,s){this.service=t,this.serviceName=a,this.errors=s}create(t,...a){const s=a[0]||{},o=`${this.service}/${t}`,c=this.errors[t],h=c?M2(c,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Xr(o,m,s)}}function M2(r,t){return r.replace(I2,(a,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const I2=/\{\$([^}]+)}/g;function mu(r,t){if(r===t)return!0;const a=Object.keys(r),s=Object.keys(t);for(const o of a){if(!s.includes(o))return!1;const c=r[o],h=t[o];if(ay(c)&&ay(h)){if(!mu(c,h))return!1}else if(c!==h)return!1}for(const o of s)if(!a.includes(o))return!1;return!0}function ay(r){return r!==null&&typeof r=="object"}function zr(r){return r&&r._delegate?r._delegate:r}class uo{constructor(t,a,s){this.name=t,this.instanceFactory=a,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Vs="[DEFAULT]";class D2{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const s=new v2;if(this.instancesDeferred.set(a,s),this.isInitialized(a)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:a});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){const a=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(V2(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:a});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&h.resolve(o)}return o}onInit(t,a){const s=this.normalizeInstanceIdentifier(a),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&t(c,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,a){const s=this.onInitCallbacks.get(a);if(s)for(const o of s)try{o(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:O2(t),options:a}),this.instances.set(t,s),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O2(r){return r===Vs?void 0:r}function V2(r){return r.instantiationMode==="EAGER"}class j2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new D2(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const k2={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},L2=Ke.INFO,B2={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},U2=(r,t,...a)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=B2[t];if(o)console[o](`[${s}]  ${r.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cv{constructor(t){this.name=t,this._logLevel=L2,this._logHandler=U2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ke))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?k2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}const z2=(r,t)=>t.some(a=>r instanceof a);let iy,sy;function P2(){return iy||(iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2(){return sy||(sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nv=new WeakMap,fd=new WeakMap,Rv=new WeakMap,Kh=new WeakMap,Ud=new WeakMap;function q2(r){const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{a(Fi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",h)});return t.then(a=>{a instanceof IDBCursor&&Nv.set(a,r)}).catch(()=>{}),Ud.set(t,r),t}function H2(r){if(fd.has(r))return;const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{a(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});fd.set(r,t)}let hd={get(r,t,a){if(r instanceof IDBTransaction){if(t==="done")return fd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Rv.get(r);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Fi(r[t])},set(r,t,a){return r[t]=a,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function F2(r){hd=r(hd)}function Q2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const s=r.call($h(this),t,...a);return Rv.set(s,t.sort?t.sort():[t]),Fi(s)}:G2().includes(r)?function(...t){return r.apply($h(this),t),Fi(Nv.get(this))}:function(...t){return Fi(r.apply($h(this),t))}}function X2(r){return typeof r=="function"?Q2(r):(r instanceof IDBTransaction&&H2(r),z2(r,P2())?new Proxy(r,hd):r)}function Fi(r){if(r instanceof IDBRequest)return q2(r);if(Kh.has(r))return Kh.get(r);const t=X2(r);return t!==r&&(Kh.set(r,t),Ud.set(t,r)),t}const $h=r=>Ud.get(r);function Y2(r,t,{blocked:a,upgrade:s,blocking:o,terminated:c}={}){const h=indexedDB.open(r,t),m=Fi(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Fi(h.result),p.oldVersion,p.newVersion,Fi(h.transaction),p)}),a&&h.addEventListener("blocked",p=>a(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const K2=["get","getKey","getAll","getAllKeys","count"],$2=["put","add","delete","clear"],Zh=new Map;function ry(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Zh.get(t))return Zh.get(t);const a=t.replace(/FromIndex$/,""),s=t!==a,o=$2.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(o||K2.includes(a)))return;const c=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let b=p.store;return s&&(b=b.index(m.shift())),(await Promise.all([b[a](...m),o&&p.done]))[0]};return Zh.set(t,c),c}F2(r=>({...r,get:(t,a,s)=>ry(t,a)||r.get(t,a,s),has:(t,a)=>!!ry(t,a)||r.has(t,a)}));class Z2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(J2(a)){const s=a.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(a=>a).join(" ")}}function J2(r){return r.getComponent()?.type==="VERSION"}const dd="@firebase/app",ly="0.14.6";const ri=new Cv("@firebase/app"),W2="@firebase/app-compat",eT="@firebase/analytics-compat",tT="@firebase/analytics",nT="@firebase/app-check-compat",aT="@firebase/app-check",iT="@firebase/auth",sT="@firebase/auth-compat",rT="@firebase/database",lT="@firebase/data-connect",oT="@firebase/database-compat",cT="@firebase/functions",uT="@firebase/functions-compat",fT="@firebase/installations",hT="@firebase/installations-compat",dT="@firebase/messaging",mT="@firebase/messaging-compat",pT="@firebase/performance",gT="@firebase/performance-compat",yT="@firebase/remote-config",vT="@firebase/remote-config-compat",bT="@firebase/storage",_T="@firebase/storage-compat",xT="@firebase/firestore",TT="@firebase/ai",ET="@firebase/firestore-compat",ST="firebase",wT="12.6.0";const md="[DEFAULT]",AT={[dd]:"fire-core",[W2]:"fire-core-compat",[tT]:"fire-analytics",[eT]:"fire-analytics-compat",[aT]:"fire-app-check",[nT]:"fire-app-check-compat",[iT]:"fire-auth",[sT]:"fire-auth-compat",[rT]:"fire-rtdb",[lT]:"fire-data-connect",[oT]:"fire-rtdb-compat",[cT]:"fire-fn",[uT]:"fire-fn-compat",[fT]:"fire-iid",[hT]:"fire-iid-compat",[dT]:"fire-fcm",[mT]:"fire-fcm-compat",[pT]:"fire-perf",[gT]:"fire-perf-compat",[yT]:"fire-rc",[vT]:"fire-rc-compat",[bT]:"fire-gcs",[_T]:"fire-gcs-compat",[xT]:"fire-fst",[ET]:"fire-fst-compat",[TT]:"fire-vertex","fire-js":"fire-js",[ST]:"fire-js-all"};const pu=new Map,CT=new Map,pd=new Map;function oy(r,t){try{r.container.addComponent(t)}catch(a){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,a)}}function gu(r){const t=r.name;if(pd.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;pd.set(t,r);for(const a of pu.values())oy(a,r);for(const a of CT.values())oy(a,r);return!0}function NT(r,t){const a=r.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),r.container.getProvider(t)}function RT(r){return r==null?!1:r.settings!==void 0}const MT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Av("app","Firebase",MT);class IT{constructor(t,a,s){this._isDeleted=!1,this._options={...t},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const DT=wT;function Mv(r,t={}){let a=r;typeof t!="object"&&(t={name:t});const s={name:md,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(a||(a=wv()),!a)throw Qi.create("no-options");const c=pu.get(o);if(c){if(mu(a,c.options)&&mu(s,c.config))return c;throw Qi.create("duplicate-app",{appName:o})}const h=new j2(o);for(const p of pd.values())h.addComponent(p);const m=new IT(a,s,h);return pu.set(o,m),m}function OT(r=md){const t=pu.get(r);if(!t&&r===md&&wv())return Mv();if(!t)throw Qi.create("no-app",{appName:r});return t}function kr(r,t,a){let s=AT[r]??r;a&&(s+=`-${a}`);const o=s.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(h.join(" "));return}gu(new uo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const VT="firebase-heartbeat-database",jT=1,fo="firebase-heartbeat-store";let Jh=null;function Iv(){return Jh||(Jh=Y2(VT,jT,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(fo)}catch(a){console.warn(a)}}}}).catch(r=>{throw Qi.create("idb-open",{originalErrorMessage:r.message})})),Jh}async function kT(r){try{const a=(await Iv()).transaction(fo),s=await a.objectStore(fo).get(Dv(r));return await a.done,s}catch(t){if(t instanceof Xr)ri.warn(t.message);else{const a=Qi.create("idb-get",{originalErrorMessage:t?.message});ri.warn(a.message)}}}async function cy(r,t){try{const s=(await Iv()).transaction(fo,"readwrite");await s.objectStore(fo).put(t,Dv(r)),await s.done}catch(a){if(a instanceof Xr)ri.warn(a.message);else{const s=Qi.create("idb-set",{originalErrorMessage:a?.message});ri.warn(s.message)}}}function Dv(r){return`${r.name}!${r.options.appId}`}const LT=1024,BT=30;class UT{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new PT(a),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=uy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>BT){const o=GT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ri.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=uy(),{heartbeatsToSend:a,unsentEntries:s}=zT(this._heartbeatsCache.heartbeats),o=du(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ri.warn(t),""}}}function uy(){return new Date().toISOString().substring(0,10)}function zT(r,t=LT){const a=[];let s=r.slice();for(const o of r){const c=a.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),fy(a)>t){c.dates.pop();break}}else if(a.push({agent:o.agent,dates:[o.date]}),fy(a)>t){a.pop();break}s=s.slice(1)}return{heartbeatsToSend:a,unsentEntries:s}}class PT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C2()?N2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await kT(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return cy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return cy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function fy(r){return du(JSON.stringify({version:2,heartbeats:r})).length}function GT(r){if(r.length===0)return-1;let t=0,a=r[0].date;for(let s=1;s<r.length;s++)r[s].date<a&&(a=r[s].date,t=s);return t}function qT(r){gu(new uo("platform-logger",t=>new Z2(t),"PRIVATE")),gu(new uo("heartbeat",t=>new UT(t),"PRIVATE")),kr(dd,ly,r),kr(dd,ly,"esm2020"),kr("fire-js","")}qT("");var HT="firebase",FT="12.6.0";kr(HT,FT,"app");var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xi,Ov;(function(){var r;function t(M,w){function C(){}C.prototype=w.prototype,M.F=w.prototype,M.prototype=new C,M.prototype.constructor=M,M.D=function(N,O,B){for(var R=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)R[Be-2]=arguments[Be];return w.prototype[O].apply(N,R)}}function a(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,a),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,w,C){C||(C=0);const N=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)N[O]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(O=0;O<16;++O)N[O]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=M.g[0],C=M.g[1],O=M.g[2];let B=M.g[3],R;R=w+(B^C&(O^B))+N[0]+3614090360&4294967295,w=C+(R<<7&4294967295|R>>>25),R=B+(O^w&(C^O))+N[1]+3905402710&4294967295,B=w+(R<<12&4294967295|R>>>20),R=O+(C^B&(w^C))+N[2]+606105819&4294967295,O=B+(R<<17&4294967295|R>>>15),R=C+(w^O&(B^w))+N[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(B^C&(O^B))+N[4]+4118548399&4294967295,w=C+(R<<7&4294967295|R>>>25),R=B+(O^w&(C^O))+N[5]+1200080426&4294967295,B=w+(R<<12&4294967295|R>>>20),R=O+(C^B&(w^C))+N[6]+2821735955&4294967295,O=B+(R<<17&4294967295|R>>>15),R=C+(w^O&(B^w))+N[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(B^C&(O^B))+N[8]+1770035416&4294967295,w=C+(R<<7&4294967295|R>>>25),R=B+(O^w&(C^O))+N[9]+2336552879&4294967295,B=w+(R<<12&4294967295|R>>>20),R=O+(C^B&(w^C))+N[10]+4294925233&4294967295,O=B+(R<<17&4294967295|R>>>15),R=C+(w^O&(B^w))+N[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(B^C&(O^B))+N[12]+1804603682&4294967295,w=C+(R<<7&4294967295|R>>>25),R=B+(O^w&(C^O))+N[13]+4254626195&4294967295,B=w+(R<<12&4294967295|R>>>20),R=O+(C^B&(w^C))+N[14]+2792965006&4294967295,O=B+(R<<17&4294967295|R>>>15),R=C+(w^O&(B^w))+N[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(O^B&(C^O))+N[1]+4129170786&4294967295,w=C+(R<<5&4294967295|R>>>27),R=B+(C^O&(w^C))+N[6]+3225465664&4294967295,B=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(B^w))+N[11]+643717713&4294967295,O=B+(R<<14&4294967295|R>>>18),R=C+(B^w&(O^B))+N[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^B&(C^O))+N[5]+3593408605&4294967295,w=C+(R<<5&4294967295|R>>>27),R=B+(C^O&(w^C))+N[10]+38016083&4294967295,B=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(B^w))+N[15]+3634488961&4294967295,O=B+(R<<14&4294967295|R>>>18),R=C+(B^w&(O^B))+N[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^B&(C^O))+N[9]+568446438&4294967295,w=C+(R<<5&4294967295|R>>>27),R=B+(C^O&(w^C))+N[14]+3275163606&4294967295,B=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(B^w))+N[3]+4107603335&4294967295,O=B+(R<<14&4294967295|R>>>18),R=C+(B^w&(O^B))+N[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^B&(C^O))+N[13]+2850285829&4294967295,w=C+(R<<5&4294967295|R>>>27),R=B+(C^O&(w^C))+N[2]+4243563512&4294967295,B=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(B^w))+N[7]+1735328473&4294967295,O=B+(R<<14&4294967295|R>>>18),R=C+(B^w&(O^B))+N[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(C^O^B)+N[5]+4294588738&4294967295,w=C+(R<<4&4294967295|R>>>28),R=B+(w^C^O)+N[8]+2272392833&4294967295,B=w+(R<<11&4294967295|R>>>21),R=O+(B^w^C)+N[11]+1839030562&4294967295,O=B+(R<<16&4294967295|R>>>16),R=C+(O^B^w)+N[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^B)+N[1]+2763975236&4294967295,w=C+(R<<4&4294967295|R>>>28),R=B+(w^C^O)+N[4]+1272893353&4294967295,B=w+(R<<11&4294967295|R>>>21),R=O+(B^w^C)+N[7]+4139469664&4294967295,O=B+(R<<16&4294967295|R>>>16),R=C+(O^B^w)+N[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^B)+N[13]+681279174&4294967295,w=C+(R<<4&4294967295|R>>>28),R=B+(w^C^O)+N[0]+3936430074&4294967295,B=w+(R<<11&4294967295|R>>>21),R=O+(B^w^C)+N[3]+3572445317&4294967295,O=B+(R<<16&4294967295|R>>>16),R=C+(O^B^w)+N[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^B)+N[9]+3654602809&4294967295,w=C+(R<<4&4294967295|R>>>28),R=B+(w^C^O)+N[12]+3873151461&4294967295,B=w+(R<<11&4294967295|R>>>21),R=O+(B^w^C)+N[15]+530742520&4294967295,O=B+(R<<16&4294967295|R>>>16),R=C+(O^B^w)+N[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(O^(C|~B))+N[0]+4096336452&4294967295,w=C+(R<<6&4294967295|R>>>26),R=B+(C^(w|~O))+N[7]+1126891415&4294967295,B=w+(R<<10&4294967295|R>>>22),R=O+(w^(B|~C))+N[14]+2878612391&4294967295,O=B+(R<<15&4294967295|R>>>17),R=C+(B^(O|~w))+N[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~B))+N[12]+1700485571&4294967295,w=C+(R<<6&4294967295|R>>>26),R=B+(C^(w|~O))+N[3]+2399980690&4294967295,B=w+(R<<10&4294967295|R>>>22),R=O+(w^(B|~C))+N[10]+4293915773&4294967295,O=B+(R<<15&4294967295|R>>>17),R=C+(B^(O|~w))+N[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~B))+N[8]+1873313359&4294967295,w=C+(R<<6&4294967295|R>>>26),R=B+(C^(w|~O))+N[15]+4264355552&4294967295,B=w+(R<<10&4294967295|R>>>22),R=O+(w^(B|~C))+N[6]+2734768916&4294967295,O=B+(R<<15&4294967295|R>>>17),R=C+(B^(O|~w))+N[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~B))+N[4]+4149444226&4294967295,w=C+(R<<6&4294967295|R>>>26),R=B+(C^(w|~O))+N[11]+3174756917&4294967295,B=w+(R<<10&4294967295|R>>>22),R=O+(w^(B|~C))+N[2]+718787259&4294967295,O=B+(R<<15&4294967295|R>>>17),R=C+(B^(O|~w))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+B&4294967295}s.prototype.v=function(M,w){w===void 0&&(w=M.length);const C=w-this.blockSize,N=this.C;let O=this.h,B=0;for(;B<w;){if(O==0)for(;B<=C;)o(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<w;)if(N[O++]=M.charCodeAt(B++),O==this.blockSize){o(this,N),O=0;break}}else for(;B<w;)if(N[O++]=M[B++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=w},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;w=this.o*8;for(var C=M.length-8;C<M.length;++C)M[C]=w&255,w/=256;for(this.v(M),M=Array(16),w=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)M[w++]=this.g[C]>>>N&255;return M};function c(M,w){var C=m;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=w(M)}function h(M,w){this.h=w;const C=[];let N=!0;for(let O=M.length-1;O>=0;O--){const B=M[O]|0;N&&B==w||(C[O]=B,N=!1)}this.g=C}var m={};function p(M){return-128<=M&&M<128?c(M,function(w){return new h([w|0],w<0?-1:0)}):new h([M|0],M<0?-1:0)}function b(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return U(b(-M));const w=[];let C=1;for(let N=0;M>=C;N++)w[N]=M/C|0,C*=4294967296;return new h(w,0)}function x(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return U(x(M.substring(1),w));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=b(Math.pow(w,8));let N=T;for(let B=0;B<M.length;B+=8){var O=Math.min(8,M.length-B);const R=parseInt(M.substring(B,B+O),w);O<8?(O=b(Math.pow(w,O)),N=N.j(O).add(b(R))):(N=N.j(C),N=N.add(b(R)))}return N}var T=p(0),S=p(1),I=p(16777216);r=h.prototype,r.m=function(){if(q(this))return-U(this).m();let M=0,w=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);M+=(N>=0?N:4294967296+N)*w,w*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V(this))return"0";if(q(this))return"-"+U(this).toString(M);const w=b(Math.pow(M,6));var C=this;let N="";for(;;){const O=se(C,w).g;C=k(C,O.j(w));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(M);if(C=O,V(C))return B+N;for(;B.length<6;)B="0"+B;N=B+N}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function V(M){if(M.h!=0)return!1;for(let w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function q(M){return M.h==-1}r.l=function(M){return M=k(this,M),q(M)?-1:V(M)?0:1};function U(M){const w=M.g.length,C=[];for(let N=0;N<w;N++)C[N]=~M.g[N];return new h(C,~M.h).add(S)}r.abs=function(){return q(this)?U(this):this},r.add=function(M){const w=Math.max(this.g.length,M.g.length),C=[];let N=0;for(let O=0;O<=w;O++){let B=N+(this.i(O)&65535)+(M.i(O)&65535),R=(B>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);N=R>>>16,B&=65535,R&=65535,C[O]=R<<16|B}return new h(C,C[C.length-1]&-2147483648?-1:0)};function k(M,w){return M.add(U(w))}r.j=function(M){if(V(this)||V(M))return T;if(q(this))return q(M)?U(this).j(U(M)):U(U(this).j(M));if(q(M))return U(this.j(U(M)));if(this.l(I)<0&&M.l(I)<0)return b(this.m()*M.m());const w=this.g.length+M.g.length,C=[];for(var N=0;N<2*w;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let O=0;O<M.g.length;O++){const B=this.i(N)>>>16,R=this.i(N)&65535,Be=M.i(O)>>>16,tt=M.i(O)&65535;C[2*N+2*O]+=R*tt,W(C,2*N+2*O),C[2*N+2*O+1]+=B*tt,W(C,2*N+2*O+1),C[2*N+2*O+1]+=R*Be,W(C,2*N+2*O+1),C[2*N+2*O+2]+=B*Be,W(C,2*N+2*O+2)}for(M=0;M<w;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=w;M<2*w;M++)C[M]=0;return new h(C,0)};function W(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function $(M,w){this.g=M,this.h=w}function se(M,w){if(V(w))throw Error("division by zero");if(V(M))return new $(T,T);if(q(M))return w=se(U(M),w),new $(U(w.g),U(w.h));if(q(w))return w=se(M,U(w)),new $(U(w.g),w.h);if(M.g.length>30){if(q(M)||q(w))throw Error("slowDivide_ only works with positive integers.");for(var C=S,N=w;N.l(M)<=0;)C=ce(C),N=ce(N);var O=le(C,1),B=le(N,1);for(N=le(N,2),C=le(C,2);!V(N);){var R=B.add(N);R.l(M)<=0&&(O=O.add(C),B=R),N=le(N,1),C=le(C,1)}return w=k(M,O.j(w)),new $(O,w)}for(O=T;M.l(w)>=0;){for(C=Math.max(1,Math.floor(M.m()/w.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),B=b(C),R=B.j(w);q(R)||R.l(M)>0;)C-=N,B=b(C),R=B.j(w);V(B)&&(B=S),O=O.add(B),M=k(M,R)}return new $(O,M)}r.B=function(M){return se(this,M).h},r.and=function(M){const w=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<w;N++)C[N]=this.i(N)&M.i(N);return new h(C,this.h&M.h)},r.or=function(M){const w=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<w;N++)C[N]=this.i(N)|M.i(N);return new h(C,this.h|M.h)},r.xor=function(M){const w=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<w;N++)C[N]=this.i(N)^M.i(N);return new h(C,this.h^M.h)};function ce(M){const w=M.g.length+1,C=[];for(let N=0;N<w;N++)C[N]=M.i(N)<<1|M.i(N-1)>>>31;return new h(C,M.h)}function le(M,w){const C=w>>5;w%=32;const N=M.g.length-C,O=[];for(let B=0;B<N;B++)O[B]=w>0?M.i(B+C)>>>w|M.i(B+C+1)<<32-w:M.i(B+C);return new h(O,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ov=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=b,h.fromString=x,Xi=h}).apply(typeof hy<"u"?hy:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vv,eo,jv,su,gd,kv,Lv,Bv;(function(){var r,t=Object.defineProperty;function a(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=a(this);function o(u,y){if(y)e:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var G=u[A];if(!(G in _))break e;_=_[G]}u=u[u.length-1],A=_[u],y=y(A),y!=A&&y!=null&&t(_,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});var c=c||{},h=this||self;function m(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,_){return u.call.apply(u.bind,arguments)}function b(u,y,_){return b=p,b.apply(null,arguments)}function x(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function T(u,y){function _(){}_.prototype=y.prototype,u.Z=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(A,G,Y){for(var fe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)fe[Ve-2]=arguments[Ve];return y.prototype[G].apply(A,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function I(u){const y=u.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=u[A];return _}return[]}function V(u,y){for(let A=1;A<arguments.length;A++){const G=arguments[A];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=u.length||0;const Y=G.length||0;u.length=_+Y;for(let fe=0;fe<Y;fe++)u[_+fe]=G[fe]}else u.push(G)}}class q{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(u){h.setTimeout(()=>{throw u},0)}function k(){var u=M;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,_){const A=$.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new q(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,le=!1,M=new W,w=()=>{const u=Promise.resolve(void 0);ce=()=>{u.then(C)}};function C(){for(var u;u=k();){try{u.h.call(u.g)}catch(_){U(_)}var y=$;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}le=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Be(u,y){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}T(Be,O),Be.prototype.init=function(u,y){const _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(_=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(u,y,_,A,G){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=G,this.key=++X,this.da=this.fa=!1}function xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Le(u,y,_){for(const A in u)y.call(_,u[A],A,u)}function z(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function j(u){const y={};for(const _ in u)y[_]=u[_];return y}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(u,y){let _,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(_ in A)u[_]=A[_];for(let Y=0;Y<ae.length;Y++)_=ae[Y],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function ge(u){this.src=u,this.g={},this.h=0}ge.prototype.add=function(u,y,_,A,G){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const fe=Ce(u,y,A,G);return fe>-1?(y=u[fe],_||(y.fa=!1)):(y=new oe(y,this.src,Y,!!A,G),y.fa=_,u.push(y)),y};function Te(u,y){const _=y.type;if(_ in u.g){var A=u.g[_],G=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=G>=0)&&Array.prototype.splice.call(A,G,1),Y&&(xe(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ce(u,y,_,A){for(let G=0;G<u.length;++G){const Y=u[G];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==A)return G}return-1}var he="closure_lm_"+(Math.random()*1e6|0),be={};function ye(u,y,_,A,G){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)ye(u,y[Y],_,A,G);return null}return _=Tt(_),u&&u[tt]?u.J(y,_,m(A)?!!A.capture:!1,G):de(u,y,_,!1,A,G)}function de(u,y,_,A,G,Y){if(!y)throw Error("Invalid event type");const fe=m(G)?!!G.capture:!!G;let Ve=st(u);if(Ve||(u[he]=Ve=new ge(u)),_=Ve.add(y,_,A,fe,Y),_.proxy)return _;if(A=Ne(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)B||(G=fe),G===void 0&&(G=!1),u.addEventListener(y.toString(),A,G);else if(u.attachEvent)u.attachEvent(Se(y.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ne(){function u(_){return y.call(u.src,u.listener,_)}const y=dt;return u}function Ie(u,y,_,A,G){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Ie(u,y[Y],_,A,G);else A=m(A)?!!A.capture:!!A,_=Tt(_),u&&u[tt]?(u=u.i,Y=String(y).toString(),Y in u.g&&(y=u.g[Y],_=Ce(y,_,A,G),_>-1&&(xe(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete u.g[Y],u.h--)))):u&&(u=st(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Ce(y,_,A,G)),(_=u>-1?y[u]:null)&&Ge(_))}function Ge(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[tt])Te(y.i,u);else{var _=u.type,A=u.proxy;y.removeEventListener?y.removeEventListener(_,A,u.capture):y.detachEvent?y.detachEvent(Se(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=st(y))?(Te(_,u),_.h==0&&(_.src=null,y[he]=null)):xe(u)}}}function Se(u){return u in be?be[u]:be[u]="on"+u}function dt(u,y){if(u.da)u=!0;else{y=new Be(y,this);const _=u.listener,A=u.ha||u.src;u.fa&&Ge(u),u=_.call(A,y)}return u}function st(u){return u=u[he],u instanceof ge?u:null}var Gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tt(u){return typeof u=="function"?u:(u[Gt]||(u[Gt]=function(y){return u.handleEvent(y)}),u[Gt])}function $e(){N.call(this),this.i=new ge(this),this.M=this,this.G=null}T($e,N),$e.prototype[tt]=!0,$e.prototype.removeEventListener=function(u,y,_,A){Ie(this,u,y,_,A)};function Je(u,y){var _,A=u.G;if(A)for(_=[];A;A=A.G)_.push(A);if(u=u.M,A=y.type||y,typeof y=="string")y=new O(y,u);else if(y instanceof O)y.target=y.target||u;else{var G=y;y=new O(A,u),ue(y,G)}G=!0;let Y,fe;if(_)for(fe=_.length-1;fe>=0;fe--)Y=y.g=_[fe],G=In(Y,A,!0,y)&&G;if(Y=y.g=u,G=In(Y,A,!0,y)&&G,G=In(Y,A,!1,y)&&G,_)for(fe=0;fe<_.length;fe++)Y=y.g=_[fe],G=In(Y,A,!1,y)&&G}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const _=u.g[y];for(let A=0;A<_.length;A++)xe(_[A]);delete u.g[y],u.h--}}this.G=null},$e.prototype.J=function(u,y,_,A){return this.i.add(String(u),y,!1,_,A)},$e.prototype.K=function(u,y,_,A){return this.i.add(String(u),y,!0,_,A)};function In(u,y,_,A){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let Y=0;Y<y.length;++Y){const fe=y[Y];if(fe&&!fe.da&&fe.capture==_){const Ve=fe.listener,At=fe.ha||fe.src;fe.fa&&Te(u.i,fe),G=Ve.call(At,A)!==!1&&G}}return G&&!A.defaultPrevented}function ua(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function ci(u){u.g=ua(()=>{u.g=null,u.i&&(u.i=!1,ci(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Mt extends N{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ci(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(u){N.call(this),this.h=u,this.g={}}T(Yn,N);var Kn=[];function Ua(u){Le(u.g,function(y,_){this.g.hasOwnProperty(_)&&Ge(y)},u),u.g={}}Yn.prototype.N=function(){Yn.Z.N.call(this),Ua(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=h.JSON.stringify,qs=h.JSON.parse,as=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ui(){}function Hs(){}var xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){O.call(this,"d")}T($t,O);function Dn(){O.call(this,"c")}T(Dn,O);var wt={},wo=null;function Fs(){return wo=wo||new $e}wt.Ia="serverreachability";function Ao(u){O.call(this,wt.Ia,u)}T(Ao,O);function fa(u){const y=Fs();Je(y,new Ao(y))}wt.STAT_EVENT="statevent";function is(u,y){O.call(this,wt.STAT_EVENT,u),this.stat=y}T(is,O);function It(u){const y=Fs();Je(y,new is(y,u))}wt.Ja="timingevent";function ha(u,y){O.call(this,wt.Ja,u),this.size=y}T(ha,O);function da(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function Fu(u,y,_,A,G,Y){u.info(function(){if(u.g)if(Y){var fe="",Ve=Y.split("&");for(let nt=0;nt<Ve.length;nt++){var At=Ve[nt].split("=");if(At.length>1){const bt=At[0];At=At[1];const kn=bt.split("_");fe=kn.length>=2&&kn[1]=="type"?fe+(bt+"="+At+"&"):fe+(bt+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+y+`
`+_+`
`+fe})}function Co(u,y,_,A,G,Y,fe){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+y+`
`+_+`
`+Y+" "+fe})}function ma(u,y,_,A){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Qu(u,_)+(A?" "+A:"")})}function ss(u,y){u.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function Qu(u,y){if(!u.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var _=Y[u];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var G=A[0];if(G!="noop"&&G!="stop"&&G!="close")for(let fe=1;fe<A.length;fe++)A[fe]=""}}}}return Ze(Y)}catch{return y}}var rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},el;function ls(){}T(ls,ui),ls.prototype.g=function(){return new XMLHttpRequest},el=new ls;function za(u){return encodeURIComponent(String(u))}function No(u){var y=1;u=u.split(":");const _=[];for(;y>0&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function Zn(u,y,_,A){this.j=u,this.i=y,this.l=_,this.S=A||1,this.V=new Yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var Dt={},Ft={};function pa(u,y,_){u.M=1,u.A=os(Vt(y)),u.u=_,u.R=!0,Qs(u,null)}function Qs(u,y){u.F=Date.now(),ga(u),u.B=Vt(u.A);var _=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),$s(_.i,"t",A),u.C=0,_=u.j.L,u.h=new Jn,u.g=qo(u.j,_?y:null,!u.u),u.P>0&&(u.O=new Mt(b(u.Y,u,u.g),u.P)),y=u.V,_=u.g,A=u.ba;var G="readystatechange";Array.isArray(G)||(G&&(Kn[0]=G.toString()),G=Kn);for(let Y=0;Y<G.length;Y++){const fe=ye(_,G[Y],A||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),fa(),Fu(u.i,u.v,u.B,u.l,u.S,u.u)}Zn.prototype.ba=function(u){u=u.target;const y=this.O;y&&ta(u)==3?y.j():this.Y(u)},Zn.prototype.Y=function(u){try{if(u==this.g)e:{const Ve=ta(this.g),At=this.g.ya(),nt=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Ve!=4||At==7||(At==8||nt<=0?fa(3):fa(2)),ya(this);var y=this.g.ca();this.X=y;var _=Xu(this);if(this.o=y==200,Co(this.i,this.v,this.B,this.l,this.S,Ve,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,G=this.g;if((A=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var Y=A;break t}}Y=null}if(u=Y)ma(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,va(this,u);else{this.o=!1,this.m=3,It(12),Tn(this),On(this);break e}}if(this.R){u=!0;let bt;for(;!this.K&&this.C<_.length;)if(bt=Mo(this,_),bt==Ft){Ve==4&&(this.m=4,It(14),u=!1),ma(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Dt){this.m=4,It(15),ma(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else ma(this.i,this.l,bt,null),va(this,bt);if(Ro(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||_.length!=0||this.h.h||(this.m=1,It(16),u=!1),this.o=this.o&&u,!u)ma(this.i,this.l,_,"[Invalid Chunked Response]"),Tn(this),On(this);else if(_.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),pl(fe),fe.P=!0,It(11))}}else ma(this.i,this.l,_,null),va(this,_);Ve==4&&Tn(this),this.o&&!this.K&&(Ve==4?Uo(this.j,this):(this.o=!1,ga(this)))}else Ga(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Tn(this),On(this)}}}catch{}finally{}};function Xu(u){if(!Ro(u))return u.g.la();const y=Zt(u.g);if(y==="")return"";let _="";const A=y.length,G=ta(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Tn(u),On(u),"";u.h.i=new h.TextDecoder}for(let Y=0;Y<A;Y++)u.h.h=!0,_+=u.h.i.decode(y[Y],{stream:!(G&&Y==A-1)});return y.length=0,u.h.g+=_,u.C=0,u.h.g}function Ro(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Mo(u,y){var _=u.C,A=y.indexOf(`
`,_);return A==-1?Ft:(_=Number(y.substring(_,A)),isNaN(_)?Dt:(A+=1,A+_>y.length?Ft:(y=y.slice(A,A+_),u.C=A+_,y)))}Zn.prototype.cancel=function(){this.K=!0,Tn(this)};function ga(u){u.T=Date.now()+u.H,Xs(u,u.H)}function Xs(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=da(b(u.aa,u),y)}function ya(u){u.D&&(h.clearTimeout(u.D),u.D=null)}Zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ss(this.i,this.B),this.M!=2&&(fa(),It(17)),Tn(this),this.m=2,On(this)):Xs(this,this.T-u)};function On(u){u.j.I==0||u.K||Uo(u.j,u)}function Tn(u){ya(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Ua(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function va(u,y){try{var _=u.j;if(_.I!=0&&(_.g==u||_a(_.h,u))){if(!u.L&&_a(_.h,u)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)tr(_),vi(_);else break e;ps(_),It(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=da(b(_.Va,_),6e3));ba(_.h)<=1&&_.ta&&(_.ta=void 0)}else Aa(_,11)}else if((u.L||_.g==u)&&tr(_),!R(y))for(G=_.Ba.g.parse(y),y=0;y<G.length;y++){let nt=G[y];const bt=nt[0];if(!(bt<=_.K))if(_.K=bt,nt=nt[1],_.I==2)if(nt[0]=="c"){_.M=nt[1],_.ba=nt[2];const kn=nt[3];kn!=null&&(_.ka=kn,_.j.info("VER="+_.ka));const Ca=nt[4];Ca!=null&&(_.za=Ca,_.j.info("SVER="+_.za));const na=nt[5];na!=null&&typeof na=="number"&&na>0&&(A=1.5*na,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const aa=u.g;if(aa){const gs=aa.g?aa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var Y=A.h;Y.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(al(Y,Y.h),Y.h=null))}if(A.G){const nr=aa.g?aa.g.getResponseHeader("X-HTTP-Session-Id"):null;nr&&(A.wa=nr,rt(A.J,A.G,nr))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var fe=u;if(A.na=Go(A,A.L?A.ba:null,A.W),fe.L){il(A.h,fe);var Ve=fe,At=A.O;At&&(Ve.H=At),Ve.D&&(ya(Ve),ga(Ve)),A.g=fe}else Lo(A);_.i.length>0&&wa(_)}else nt[0]!="stop"&&nt[0]!="close"||Aa(_,7);else _.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Aa(_,7):dl(_):nt[0]!="noop"&&_.l&&_.l.qa(nt),_.A=0)}}fa(4)}catch{}}var Ot=class{constructor(u,y){this.g=u,this.map=y}};function tl(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ba(u){return u.h?1:u.g?u.g.size:0}function _a(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function al(u,y){u.g?u.g.add(y):u.h=y}function il(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}tl.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.G);return y}return I(u.i)}var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ys(u,y){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const A=u[_].indexOf("=");let G,Y=null;A>=0?(G=u[_].substring(0,A),Y=u[_].substring(A+1)):G=u[_],y(G,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function En(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof En?(this.l=u.l,Qt(this,u.j),this.o=u.o,this.g=u.g,fi(this,u.u),this.h=u.h,rl(this,jo(u.i)),this.m=u.m):u&&(y=String(u).match(Io))?(this.l=!1,Qt(this,y[1]||"",!0),this.o=xa(y[2]||""),this.g=xa(y[3]||"",!0),fi(this,y[4]),this.h=xa(y[5]||"",!0),rl(this,y[6]||"",!0),this.m=xa(y[7]||"")):(this.l=!1,this.i=new di(null,this.l))}En.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(cs(y,Ks,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(cs(y,Ks,!0),"@"),u.push(za(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(cs(_,_.charAt(0)=="/"?ll:Do,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",cs(_,Oo)),u.join("")},En.prototype.resolve=function(u){const y=Vt(this);let _=!!u.j;_?Qt(y,u.j):_=!!u.o,_?y.o=u.o:_=!!u.g,_?y.g=u.g:_=u.u!=null;var A=u.h;if(_)fi(y,u.u);else if(_=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var G=y.h.lastIndexOf("/");G!=-1&&(A=y.h.slice(0,G+1)+A)}if(G=A,G==".."||G==".")A="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){A=G.lastIndexOf("/",0)==0,G=G.split("/");const Y=[];for(let fe=0;fe<G.length;){const Ve=G[fe++];Ve=="."?A&&fe==G.length&&Y.push(""):Ve==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&fe==G.length&&Y.push("")):(Y.push(Ve),A=!0)}A=Y.join("/")}else A=G}return _?y.h=A:_=u.i.toString()!=="",_?rl(y,jo(u.i)):_=!!u.m,_&&(y.m=u.m),y};function Vt(u){return new En(u)}function Qt(u,y,_){u.j=_?xa(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function fi(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function rl(u,y,_){y instanceof di?(u.i=y,Zs(u.i,u.l)):(_||(y=cs(y,hi)),u.i=new di(y,u.l))}function rt(u,y,_){u.i.set(y,_)}function os(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xa(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cs(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,dn),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function dn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ks=/[#\/\?@]/g,Do=/[#\?:]/g,ll=/[#\?]/g,hi=/[#\?@]/g,Oo=/#/g;function di(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function mn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ys(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=di.prototype,r.add=function(u,y){mn(this),this.i=null,u=mi(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function Vo(u,y){mn(u),y=mi(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ol(u,y){return mn(u),y=mi(u,y),u.g.has(y)}r.forEach=function(u,y){mn(this),this.g.forEach(function(_,A){_.forEach(function(G){u.call(y,G,A,this)},this)},this)};function cl(u,y){mn(u);let _=[];if(typeof y=="string")ol(u,y)&&(_=_.concat(u.g.get(mi(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)_=_.concat(u[y]);return _}r.set=function(u,y){return mn(this),this.i=null,u=mi(this,u),ol(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=cl(this,u),u.length>0?String(u[0]):y):y};function $s(u,y,_){Vo(u,y),_.length>0&&(u.i=null,u.g.set(mi(u,y),I(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const G=za(_);_=cl(this,_);for(let Y=0;Y<_.length;Y++){let fe=G;_[Y]!==""&&(fe+="="+za(_[Y])),u.push(fe)}}return this.i=u.join("&")};function jo(u){const y=new di;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function mi(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Zs(u,y){y&&!u.j&&(mn(u),u.i=null,u.g.forEach(function(_,A){const G=A.toLowerCase();A!=G&&(Vo(this,A),$s(this,G,_))},u)),u.j=y}function Wn(u,y){const _=new $n;if(h.Image){const A=new Image;A.onload=x(Vn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=x(Vn,_,"TestLoadImage: error",!1,y,A),A.onabort=x(Vn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=x(Vn,_,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else y(!1)}function ul(u,y){const _=new $n,A=new AbortController,G=setTimeout(()=>{A.abort(),Vn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:A.signal}).then(Y=>{clearTimeout(G),Y.ok?Vn(_,"TestPingServer: ok",!0,y):Vn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Vn(_,"TestPingServer: error",!1,y)})}function Vn(u,y,_,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(_)}catch{}}function pi(){this.g=new as}function Ta(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Ta,ui),Ta.prototype.g=function(){return new us(this.i,this.h)};function us(u,y){$e.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(us,$e),r=us.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,ea(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Js(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Js(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?gi(this):ea(this),this.readyState==3&&Js(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,gi(this))},r.Na=function(u){this.g&&(this.response=u,gi(this))},r.ga=function(){this.g&&gi(this)};function gi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ea(u)}r.setRequestHeader=function(u,y){this.A.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function ea(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function jn(u){let y="";return Le(u,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function fs(u,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=jn(_),typeof u=="string"?_!=null&&za(_):rt(u,y,_))}function ct(u){$e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ct,$e);var Ea=/^https?$/i,fl=["POST","PUT"];r=ct.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():el.g(),this.g.onreadystatechange=S(b(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){hs(this,Y);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)_.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())_.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(fl,y,void 0)>=0)||A||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of _)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){hs(this,Y)}};function hs(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,hl(u),Pa(u)}function hl(u){u.A||(u.A=!0,Je(u,"complete"),Je(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Je(this,"complete"),Je(this,"abort"),Pa(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pa(this,!0)),ct.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ds(this):this.Xa())},r.Xa=function(){ds(this)};function ds(u){if(u.h&&typeof c<"u"){if(u.v&&ta(u)==4)setTimeout(u.Ca.bind(u),0);else if(Je(u,"readystatechange"),ta(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=Y===0){let fe=String(u.D).match(Io)[1]||null;!fe&&h.self&&h.self.location&&(fe=h.self.location.protocol.slice(0,-1)),A=!Ea.test(fe?fe.toLowerCase():"")}_=A}if(_)Je(u,"complete"),Je(u,"success");else{u.o=6;try{var G=ta(u)>2?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.ca()+"]",hl(u)}}finally{Pa(u)}}}}function Pa(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,y||Je(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ta(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ta(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),qs(y)}};function Zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ga(u){const y={};u=(u.g&&ta(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(R(u[A]))continue;var _=No(u[A]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[G]||[];y[G]=Y,Y.push(_)}z(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function yi(u){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,u),this.Za=Sa("retryDelaySeedMs",1e4,u),this.Ta=Sa("forwardChannelMaxRetries",2,u),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new tl(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=yi.prototype,r.ka=8,r.I=1,r.connect=function(u,y,_,A){It(0),this.W=u,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Go(this,null,this.W),wa(this)};function dl(u){if(Ws(u),u.I==3){var y=u.V++,_=Vt(u.J);if(rt(_,"SID",u.M),rt(_,"RID",y),rt(_,"TYPE","terminate"),ms(u,_),y=new Zn(u,u.j,y),y.M=2,y.A=os(Vt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=qo(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ga(y)}Po(u)}function vi(u){u.g&&(pl(u),u.g.cancel(),u.g=null)}function Ws(u){vi(u),u.v&&(h.clearTimeout(u.v),u.v=null),tr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function wa(u){if(!nl(u.h)&&!u.m){u.m=!0;var y=u.Ea;ce||w(),le||(ce(),le=!0),M.add(y,u),u.D=0}}function er(u,y){return ba(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=da(b(u.Ea,u,y),zo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const G=new Zn(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=j(Y),ue(Y,this.U)):Y=this.U),this.u!==null||this.R||(G.J=Y,Y=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=ko(this,G,y),_=Vt(this.J),rt(_,"RID",u),rt(_,"CVER",22),this.G&&rt(_,"X-HTTP-Session-Id",this.G),ms(this,_),Y&&(this.R?y="headers="+za(jn(Y))+"&"+y:this.u&&fs(_,this.u,Y)),al(this.h,G),this.Ra&&rt(_,"TYPE","init"),this.S?(rt(_,"$req",y),rt(_,"SID","null"),G.U=!0,pa(G,_,null)):pa(G,_,y),this.I=2}}else this.I==3&&(u?ml(this,u):this.i.length==0||nl(this.h)||ml(this))};function ml(u,y){var _;y?_=y.l:_=u.V++;const A=Vt(u.J);rt(A,"SID",u.M),rt(A,"RID",_),rt(A,"AID",u.K),ms(u,A),u.u&&u.o&&fs(A,u.u,u.o),_=new Zn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),y&&(u.i=y.G.concat(u.i)),y=ko(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),al(u.h,_),pa(_,A,y)}function ms(u,y){u.H&&Le(u.H,function(_,A){rt(y,A,_)}),u.l&&Le({},function(_,A){rt(y,A,_)})}function ko(u,y,_){_=Math.min(u.i.length,_);const A=u.l?b(u.l.Ka,u.l,u):null;e:{var G=u.i;let Ve=-1;for(;;){const At=["count="+_];Ve==-1?_>0?(Ve=G[0].g,At.push("ofs="+Ve)):Ve=0:At.push("ofs="+Ve);let nt=!0;for(let bt=0;bt<_;bt++){var Y=G[bt].g;const kn=G[bt].map;if(Y-=Ve,Y<0)Ve=Math.max(0,G[bt].g-100),nt=!1;else try{Y="req"+Y+"_"||"";try{var fe=kn instanceof Map?kn:Object.entries(kn);for(const[Ca,na]of fe){let aa=na;m(na)&&(aa=Ze(na)),At.push(Y+Ca+"="+encodeURIComponent(aa))}}catch(Ca){throw At.push(Y+"type="+encodeURIComponent("_badmap")),Ca}}catch{A&&A(kn)}}if(nt){fe=At.join("&");break e}}fe=void 0}return u=u.i.splice(0,_),y.G=u,fe}function Lo(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;ce||w(),le||(ce(),le=!0),M.add(y,u),u.A=0}}function ps(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=da(b(u.Da,u),zo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Bo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=da(b(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),vi(this),Bo(this))};function pl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Bo(u){u.g=new Zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Vt(u.na);rt(y,"RID","rpc"),rt(y,"SID",u.M),rt(y,"AID",u.K),rt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(y,"TO",u.ia),rt(y,"TYPE","xmlhttp"),ms(u,y),u.u&&u.o&&fs(y,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=os(Vt(y)),_.u=null,_.R=!0,Qs(_,u)}r.Va=function(){this.C!=null&&(this.C=null,vi(this),ps(this),It(19))};function tr(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Uo(u,y){var _=null;if(u.g==y){tr(u),pl(u),u.g=null;var A=2}else if(_a(u.h,y))_=y.G,il(u.h,y),A=1;else return;if(u.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var G=u.D;A=Fs(),Je(A,new ha(A,_)),wa(u)}else Lo(u);else if(G=y.m,G==3||G==0&&y.X>0||!(A==1&&er(u,y)||A==2&&ps(u)))switch(_&&_.length>0&&(y=u.h,y.i=y.i.concat(_)),G){case 1:Aa(u,5);break;case 4:Aa(u,10);break;case 3:Aa(u,6);break;default:Aa(u,2)}}}function zo(u,y){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*y}function Aa(u,y){if(u.j.info("Error code "+y),y==2){var _=b(u.bb,u),A=u.Ua;const G=!A;A=new En(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qt(A,"https"),os(A),G?Wn(A.toString(),_):ul(A.toString(),_)}else It(2);u.I=0,u.l&&u.l.pa(y),Po(u),Ws(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Po(u){if(u.I=0,u.ja=[],u.l){const y=sl(u.h);(y.length!=0||u.i.length!=0)&&(V(u.ja,y),V(u.ja,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.oa()}}function Go(u,y,_){var A=_ instanceof En?Vt(_):new En(_);if(A.g!="")y&&(A.g=y+"."+A.g),fi(A,A.u);else{var G=h.location;A=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const Y=new En(null);A&&Qt(Y,A),y&&(Y.g=y),G&&fi(Y,G),_&&(Y.h=_),A=Y}return _=u.G,y=u.wa,_&&y&&rt(A,_,y),rt(A,"VER",u.ka),ms(u,A),A}function qo(u,y,_){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new ct(new Ta({ab:_})):new ct(u.ma),y.Fa(u.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ho(){}r=Ho.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function bi(){}bi.prototype.g=function(u,y){return new fn(u,y)};function fn(u,y){$e.call(this),this.g=new yi(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!R(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new qa(this)}T(fn,$e),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){dl(this.g)},fn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ze(u),u=_);y.i.push(new Ot(y.Ya++,u)),y.I==3&&wa(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,fn.Z.N.call(this)};function Fo(u){$t.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}T(Fo,$t);function Qo(){Dn.call(this),this.status=1}T(Qo,Dn);function qa(u){this.g=u}T(qa,Ho),qa.prototype.ra=function(){Je(this.g,"a")},qa.prototype.qa=function(u){Je(this.g,new Fo(u))},qa.prototype.pa=function(u){Je(this.g,new Qo)},qa.prototype.oa=function(){Je(this.g,"b")},bi.prototype.createWebChannel=bi.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Bv=function(){return new bi},Lv=function(){return Fs()},kv=wt,gd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,su=rs,Wr.COMPLETE="complete",jv=Wr,Hs.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",$e.prototype.listen=$e.prototype.J,eo=Hs,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,Vv=ct}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const dy="@firebase/firestore",my="4.9.2";class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let Yr="12.3.0";const Ls=new Cv("@firebase/firestore");function Dr(){return Ls.logLevel}function ve(r,...t){if(Ls.logLevel<=Ke.DEBUG){const a=t.map(zd);Ls.debug(`Firestore (${Yr}): ${r}`,...a)}}function li(r,...t){if(Ls.logLevel<=Ke.ERROR){const a=t.map(zd);Ls.error(`Firestore (${Yr}): ${r}`,...a)}}function Pr(r,...t){if(Ls.logLevel<=Ke.WARN){const a=t.map(zd);Ls.warn(`Firestore (${Yr}): ${r}`,...a)}}function zd(r){if(typeof r=="string")return r;try{return(function(a){return JSON.stringify(a)})(r)}catch{return r}}function Me(r,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,Uv(r,s,a)}function Uv(r,t,a){let s=`FIRESTORE (${Yr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(a!==void 0)try{s+=" CONTEXT: "+JSON.stringify(a)}catch{s+=" CONTEXT: "+a}throw li(s),new Error(s)}function it(r,t,a,s){let o="Unexpected state";typeof a=="string"?o=a:s=a,r||Uv(t,o,s)}function Oe(r,t){return r}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Xr{constructor(t,a){super(t,a),this.code=t,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yi{constructor(){this.promise=new Promise(((t,a)=>{this.resolve=t,this.reject=a}))}}class zv{constructor(t,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class QT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,a){t.enqueueRetryable((()=>a(on.UNAUTHENTICATED)))}shutdown(){}}class XT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,a){this.changeListener=a,t.enqueueRetryable((()=>a(this.token.user)))}shutdown(){this.changeListener=null}}class YT{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,a){it(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,a(p)):Promise.resolve();let c=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Yi,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=c;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Yi)}}),0),h()}getToken(){const t=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then((s=>this.i!==t?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new zv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return it(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class KT{constructor(t,a,s){this.P=t,this.T=a,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $T{constructor(t,a,s){this.P=t,this.T=a,this.I=s}getToken(){return Promise.resolve(new KT(this.P,this.T,this.I))}start(t,a){t.enqueueRetryable((()=>a(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class py{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZT{constructor(t,a){this.V=a,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,RT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,a){it(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?a(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new py(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((a=>a?(it(typeof a.token=="string",44558,{tokenResult:a}),this.m=a.token,new py(a.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function JT(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(a);else for(let s=0;s<r;s++)a[s]=Math.floor(256*Math.random());return a}class Pd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=JT(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<a&&(s+=t.charAt(o[c]%62))}return s}}function Fe(r,t){return r<t?-1:r>t?1:0}function yd(r,t){const a=Math.min(r.length,t.length);for(let s=0;s<a;s++){const o=r.charAt(s),c=t.charAt(s);if(o!==c)return Wh(o)===Wh(c)?Fe(o,c):Wh(o)?1:-1}return Fe(r.length,t.length)}const WT=55296,eE=57343;function Wh(r){const t=r.charCodeAt(0);return t>=WT&&t<=eE}function Gr(r,t,a){return r.length===t.length&&r.every(((s,o)=>a(s,t[o])))}const gy="__name__";class Oa{constructor(t,a,s){a===void 0?a=0:a>t.length&&Me(637,{offset:a,range:t.length}),s===void 0?s=t.length-a:s>t.length-a&&Me(1746,{length:s,range:t.length-a}),this.segments=t,this.offset=a,this.len=s}get length(){return this.len}isEqual(t){return Oa.comparator(this,t)===0}child(t){const a=this.segments.slice(this.offset,this.limit());return t instanceof Oa?t.forEach((s=>{a.push(s)})):a.push(t),this.construct(a)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}forEach(t){for(let a=this.offset,s=this.limit();a<s;a++)t(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,a){const s=Math.min(t.length,a.length);for(let o=0;o<s;o++){const c=Oa.compareSegments(t.get(o),a.get(o));if(c!==0)return c}return Fe(t.length,a.length)}static compareSegments(t,a){const s=Oa.isNumericId(t),o=Oa.isNumericId(a);return s&&!o?-1:!s&&o?1:s&&o?Oa.extractNumericId(t).compare(Oa.extractNumericId(a)):yd(t,a)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xi.fromString(t.substring(4,t.length-2))}}class pt extends Oa{construct(t,a,s){return new pt(t,a,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const a=[];for(const s of t){if(s.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);a.push(...s.split("/").filter((o=>o.length>0)))}return new pt(a)}static emptyPath(){return new pt([])}}const tE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Oa{construct(t,a,s){return new sn(t,a,s)}static isValidIdentifier(t){return tE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gy}static keyField(){return new sn([gy])}static fromServerFormat(t){const a=[];let s="",o=0;const c=()=>{if(s.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(s),s=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(c(),o++)}if(c(),h)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(a)}static emptyPath(){return new sn([])}}class Ae{constructor(t){this.path=t}static fromPath(t){return new Ae(pt.fromString(t))}static fromName(t){return new Ae(pt.fromString(t).popFirst(5))}static empty(){return new Ae(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,a){return pt.comparator(t.path,a.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ae(new pt(t.slice()))}}function Pv(r,t,a){if(!a)throw new pe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function nE(r,t,a,s){if(t===!0&&s===!0)throw new pe(te.INVALID_ARGUMENT,`${r} and ${a} cannot be used together.`)}function yy(r){if(!Ae.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vy(r){if(Ae.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Mu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Me(12329,{type:typeof r})}function yu(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Mu(r);throw new pe(te.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${a}`)}}return r}function aE(r,t){if(t<=0)throw new pe(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}function Pt(r,t){const a={typeString:r};return t&&(a.value=t),a}function _o(r,t){if(!Gv(r))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let a;for(const s in t)if(t[s]){const o=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){a=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){a=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){a=`Expected '${s}' field to equal '${c.value}'`;break}}if(a)throw new pe(te.INVALID_ARGUMENT,a);return!0}const by=-62135596800,_y=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(t){return gt.fromMillis(t.getTime())}static fromMillis(t){const a=Math.floor(t/1e3),s=Math.floor((t-1e3*a)*_y);return new gt(a,s)}constructor(t,a){if(this.seconds=t,this.nanoseconds=a,a<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(t<by)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(t){return this.seconds===t.seconds?Fe(this.nanoseconds,t.nanoseconds):Fe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(_o(t,gt._jsonSchema))return new gt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-by;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Pt("string",gt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};class De{static fromTimestamp(t){return new De(t)}static min(){return new De(new gt(0,0))}static max(){return new De(new gt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ho=-1;function iE(r,t){const a=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new gt(a+1,0):new gt(a,s));return new $i(o,Ae.empty(),t)}function sE(r){return new $i(r.readTime,r.key,ho)}class $i{constructor(t,a,s){this.readTime=t,this.documentKey=a,this.largestBatchId=s}static min(){return new $i(De.min(),Ae.empty(),ho)}static max(){return new $i(De.max(),Ae.empty(),ho)}}function rE(r,t){let a=r.readTime.compareTo(t.readTime);return a!==0?a:(a=Ae.comparator(r.documentKey,t.documentKey),a!==0?a:Fe(r.largestBatchId,t.largestBatchId))}const lE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Kr(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==lE)throw r;ve("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)}),(a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)}))}catch(t){return this.next(void 0,t)}next(t,a){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(t,this.result):new ne(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(a,c).next(s,o)}}))}toPromise(){return new Promise(((t,a)=>{this.next(t,a)}))}wrapUserFunction(t){try{const a=t();return a instanceof ne?a:ne.resolve(a)}catch(a){return ne.reject(a)}}wrapSuccess(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.resolve(a)}wrapFailure(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.reject(a)}static resolve(t){return new ne(((a,s)=>{a(t)}))}static reject(t){return new ne(((a,s)=>{s(t)}))}static waitFor(t){return new ne(((a,s)=>{let o=0,c=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++c,h&&c===o&&a()}),(p=>s(p)))})),h=!0,c===o&&a()}))}static or(t){let a=ne.resolve(!1);for(const s of t)a=a.next((o=>o?ne.resolve(o):s()));return a}static forEach(t,a){const s=[];return t.forEach(((o,c)=>{s.push(a.call(this,o,c))})),this.waitFor(s)}static mapArray(t,a){return new ne(((s,o)=>{const c=t.length,h=new Array(c);let m=0;for(let p=0;p<c;p++){const b=p;a(t[b]).next((x=>{h[b]=x,++m,m===c&&s(h)}),(x=>o(x)))}}))}static doWhile(t,a){return new ne(((s,o)=>{const c=()=>{t()===!0?a().next((()=>{c()}),o):s()};c()}))}}function cE(r){const t=r.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function $r(r){return r.name==="IndexedDbTransactionError"}class Iu{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>a.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Iu.ce=-1;const Gd=-1;function Du(r){return r==null}function vu(r){return r===0&&1/r==-1/0}function uE(r){return typeof r=="number"&&Number.isInteger(r)&&!vu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const qv="";function fE(r){let t="";for(let a=0;a<r.length;a++)t.length>0&&(t=xy(t)),t=hE(r.get(a),t);return xy(t)}function hE(r,t){let a=t;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":a+="";break;case qv:a+="";break;default:a+=c}}return a}function xy(r){return r+qv+""}function Ty(r){let t=0;for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t++;return t}function Us(r,t){for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t(a,r[a])}function Hv(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class xt{constructor(t,a){this.comparator=t,this.root=a||an.EMPTY}insert(t,a){return new xt(this.comparator,this.root.insert(t,a,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let a=this.root;for(;!a.isEmpty();){const s=this.comparator(t,a.key);if(s===0)return a.value;s<0?a=a.left:s>0&&(a=a.right)}return null}indexOf(t){let a=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return a+s.left.size;o<0?s=s.left:(a+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((a,s)=>(t(a,s),!1)))}toString(){const t=[];return this.inorderTraversal(((a,s)=>(t.push(`${a}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wc(this.root,t,this.comparator,!0)}}class Wc{constructor(t,a,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=a?s(t.key,a):1,a&&o&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const a={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,a,s,o,c){this.key=t,this.value=a,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=c??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,a,s,o,c){return new an(t??this.key,a??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,a,s){let o=this;const c=s(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,a,s),null):c===0?o.copy(null,a,null,null,null):o.copy(null,null,null,null,o.right.insert(t,a,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,a){let s,o=this;if(a(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,a),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),a(t,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,a))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,a)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Me(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(t,a,s,o,c){return this}insert(t,a,s){return new an(t,a)}remove(t,a){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((a,s)=>(t(a),!1)))}forEachInRange(t,a){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;a(o.key)}}forEachWhile(t,a){let s;for(s=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const a=this.data.getIteratorFrom(t);return a.hasNext()?a.getNext().key:null}getIterator(){return new Ey(this.data.getIterator())}getIteratorFrom(t){return new Ey(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let a=this;return a.size<t.size&&(a=t,t=this),t.forEach((s=>{a=a.add(s)})),a}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const a=this.data.getIterator(),s=t.data.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((a=>{t.push(a)})),t}toString(){const t=[];return this.forEach((a=>t.push(a))),"SortedSet("+t.toString()+")"}copy(t){const a=new Ht(this.comparator);return a.data=t,a}}class Ey{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class la{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new la([])}unionWith(t){let a=new Ht(sn.comparator);for(const s of this.fields)a=a.add(s);for(const s of t)a=a.add(s);return new la(a.toArray())}covers(t){for(const a of this.fields)if(a.isPrefixOf(t))return!0;return!1}isEqual(t){return Gr(this.fields,t.fields,((a,s)=>a.isEqual(s)))}}class Fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const a=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Fv("Invalid base64 string: "+c):c}})(t);return new rn(a)}static fromUint8Array(t){const a=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(t);return new rn(a)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(a){return btoa(a)})(this.binaryString)}toUint8Array(){return(function(a){const s=new Uint8Array(a.length);for(let o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Fe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const dE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(r){if(it(!!r,39018),typeof r=="string"){let t=0;const a=dE.exec(r);if(it(!!a,46558,{timestamp:r}),a[1]){let o=a[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ji(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}const Qv="server_timestamp",Xv="__type__",Yv="__previous_value__",Kv="__local_write_time__";function qd(r){return(r?.mapValue?.fields||{})[Xv]?.stringValue===Qv}function Ou(r){const t=r.mapValue.fields[Yv];return qd(t)?Ou(t):t}function mo(r){const t=Zi(r.mapValue.fields[Kv].timestampValue);return new gt(t.seconds,t.nanos)}class mE{constructor(t,a,s,o,c,h,m,p,b,x){this.databaseId=t,this.appId=a,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=b,this.isUsingEmulator=x}}const bu="(default)";class po{constructor(t,a){this.projectId=t,this.database=a||bu}static empty(){return new po("","")}get isDefaultDatabase(){return this.database===bu}isEqual(t){return t instanceof po&&t.projectId===this.projectId&&t.database===this.database}}const $v="__type__",pE="__max__",eu={mapValue:{}},Zv="__vector__",_u="value";function Wi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qd(r)?4:yE(r)?9007199254740991:gE(r)?10:11:Me(28295,{value:r})}function Ba(r,t){if(r===t)return!0;const a=Wi(r);if(a!==Wi(t))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return mo(r).isEqual(mo(t));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Zi(o.timestampValue),m=Zi(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,c){return Ji(o.bytesValue).isEqual(Ji(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(r,t);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Rt(o.doubleValue),m=Rt(c.doubleValue);return h===m?vu(h)===vu(m):isNaN(h)&&isNaN(m)}return!1})(r,t);case 9:return Gr(r.arrayValue.values||[],t.arrayValue.values||[],Ba);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Ty(h)!==Ty(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Ba(h[p],m[p])))return!1;return!0})(r,t);default:return Me(52216,{left:r})}}function go(r,t){return(r.values||[]).find((a=>Ba(a,t)))!==void 0}function qr(r,t){if(r===t)return 0;const a=Wi(r),s=Wi(t);if(a!==s)return Fe(a,s);switch(a){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,t.booleanValue);case 2:return(function(c,h){const m=Rt(c.integerValue||c.doubleValue),p=Rt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,t);case 3:return Sy(r.timestampValue,t.timestampValue);case 4:return Sy(mo(r),mo(t));case 5:return yd(r.stringValue,t.stringValue);case 6:return(function(c,h){const m=Ji(c),p=Ji(h);return m.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(c,h){const m=c.split("/"),p=h.split("/");for(let b=0;b<m.length&&b<p.length;b++){const x=Fe(m[b],p[b]);if(x!==0)return x}return Fe(m.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,h){const m=Fe(Rt(c.latitude),Rt(h.latitude));return m!==0?m:Fe(Rt(c.longitude),Rt(h.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return wy(r.arrayValue,t.arrayValue);case 10:return(function(c,h){const m=c.fields||{},p=h.fields||{},b=m[_u]?.arrayValue,x=p[_u]?.arrayValue,T=Fe(b?.values?.length||0,x?.values?.length||0);return T!==0?T:wy(b,x)})(r.mapValue,t.mapValue);case 11:return(function(c,h){if(c===eu.mapValue&&h===eu.mapValue)return 0;if(c===eu.mapValue)return 1;if(h===eu.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),b=h.fields||{},x=Object.keys(b);p.sort(),x.sort();for(let T=0;T<p.length&&T<x.length;++T){const S=yd(p[T],x[T]);if(S!==0)return S;const I=qr(m[p[T]],b[x[T]]);if(I!==0)return I}return Fe(p.length,x.length)})(r.mapValue,t.mapValue);default:throw Me(23264,{he:a})}}function Sy(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Fe(r,t);const a=Zi(r),s=Zi(t),o=Fe(a.seconds,s.seconds);return o!==0?o:Fe(a.nanos,s.nanos)}function wy(r,t){const a=r.values||[],s=t.values||[];for(let o=0;o<a.length&&o<s.length;++o){const c=qr(a[o],s[o]);if(c)return c}return Fe(a.length,s.length)}function Hr(r){return vd(r)}function vd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(a){const s=Zi(a);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(a){return Ji(a).toBase64()})(r.bytesValue):"referenceValue"in r?(function(a){return Ae.fromName(a).toString()})(r.referenceValue):"geoPointValue"in r?(function(a){return`geo(${a.latitude},${a.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(a){let s="[",o=!0;for(const c of a.values||[])o?o=!1:s+=",",s+=vd(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(a){const s=Object.keys(a.fields||{}).sort();let o="{",c=!0;for(const h of s)c?c=!1:o+=",",o+=`${h}:${vd(a.fields[h])}`;return o+"}"})(r.mapValue):Me(61005,{value:r})}function ru(r){switch(Wi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ou(r);return t?16+ru(t):16;case 5:return 2*r.stringValue.length;case 6:return Ji(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+ru(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Us(s.fields,((c,h)=>{o+=c.length+ru(h)})),o})(r.mapValue);default:throw Me(13486,{value:r})}}function Ay(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function bd(r){return!!r&&"integerValue"in r}function Hd(r){return!!r&&"arrayValue"in r}function Cy(r){return!!r&&"nullValue"in r}function Ny(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function lu(r){return!!r&&"mapValue"in r}function gE(r){return(r?.mapValue?.fields||{})[$v]?.stringValue===Zv}function so(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Us(r.mapValue.fields,((a,s)=>t.mapValue.fields[a]=so(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let a=0;a<(r.arrayValue.values||[]).length;++a)t.arrayValue.values[a]=so(r.arrayValue.values[a]);return t}return{...r}}function yE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===pE}class Fn{constructor(t){this.value=t}static empty(){return new Fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let a=this.value;for(let s=0;s<t.length-1;++s)if(a=(a.mapValue.fields||{})[t.get(s)],!lu(a))return null;return a=(a.mapValue.fields||{})[t.lastSegment()],a||null}}set(t,a){this.getFieldsMap(t.popLast())[t.lastSegment()]=so(a)}setAll(t){let a=sn.emptyPath(),s={},o=[];t.forEach(((h,m)=>{if(!a.isImmediateParentOf(m)){const p=this.getFieldsMap(a);this.applyChanges(p,s,o),s={},o=[],a=m.popLast()}h?s[m.lastSegment()]=so(h):o.push(m.lastSegment())}));const c=this.getFieldsMap(a);this.applyChanges(c,s,o)}delete(t){const a=this.field(t.popLast());lu(a)&&a.mapValue.fields&&delete a.mapValue.fields[t.lastSegment()]}isEqual(t){return Ba(this.value,t.value)}getFieldsMap(t){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=a.mapValue.fields[t.get(s)];lu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},a.mapValue.fields[t.get(s)]=o),a=o}return a.mapValue.fields}applyChanges(t,a,s){Us(a,((o,c)=>t[o]=c));for(const o of s)delete t[o]}clone(){return new Fn(so(this.value))}}function Jv(r){const t=[];return Us(r.fields,((a,s)=>{const o=new sn([a]);if(lu(s)){const c=Jv(s.mapValue).fields;if(c.length===0)t.push(o);else for(const h of c)t.push(o.child(h))}else t.push(o)})),new la(t)}class cn{constructor(t,a,s,o,c,h,m){this.key=t,this.documentType=a,this.version=s,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,De.min(),De.min(),De.min(),Fn.empty(),0)}static newFoundDocument(t,a,s,o){return new cn(t,1,a,De.min(),s,o,0)}static newNoDocument(t,a){return new cn(t,2,a,De.min(),De.min(),Fn.empty(),0)}static newUnknownDocument(t,a){return new cn(t,3,a,De.min(),De.min(),Fn.empty(),2)}convertToFoundDocument(t,a){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xu{constructor(t,a){this.position=t,this.inclusive=a}}function Ry(r,t,a){let s=0;for(let o=0;o<r.position.length;o++){const c=t[o],h=r.position[o];if(c.field.isKeyField()?s=Ae.comparator(Ae.fromName(h.referenceValue),a.key):s=qr(h,a.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function My(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let a=0;a<r.position.length;a++)if(!Ba(r.position[a],t.position[a]))return!1;return!0}class yo{constructor(t,a="asc"){this.field=t,this.dir=a}}function vE(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class Wv{}class zt extends Wv{constructor(t,a,s){super(),this.field=t,this.op=a,this.value=s}static create(t,a,s){return t.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(t,a,s):new _E(t,a,s):a==="array-contains"?new EE(t,s):a==="in"?new SE(t,s):a==="not-in"?new wE(t,s):a==="array-contains-any"?new AE(t,s):new zt(t,a,s)}static createKeyFieldInFilter(t,a,s){return a==="in"?new xE(t,s):new TE(t,s)}matches(t){const a=t.data.field(this.field);return this.op==="!="?a!==null&&a.nullValue===void 0&&this.matchesComparison(qr(a,this.value)):a!==null&&Wi(this.value)===Wi(a)&&this.matchesComparison(qr(a,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oa extends Wv{constructor(t,a){super(),this.filters=t,this.op=a,this.Pe=null}static create(t,a){return new oa(t,a)}matches(t){return e1(this)?this.filters.find((a=>!a.matches(t)))===void 0:this.filters.find((a=>a.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,a)=>t.concat(a.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function e1(r){return r.op==="and"}function t1(r){return bE(r)&&e1(r)}function bE(r){for(const t of r.filters)if(t instanceof oa)return!1;return!0}function _d(r){if(r instanceof zt)return r.field.canonicalString()+r.op.toString()+Hr(r.value);if(t1(r))return r.filters.map((t=>_d(t))).join(",");{const t=r.filters.map((a=>_d(a))).join(",");return`${r.op}(${t})`}}function n1(r,t){return r instanceof zt?(function(s,o){return o instanceof zt&&s.op===o.op&&s.field.isEqual(o.field)&&Ba(s.value,o.value)})(r,t):r instanceof oa?(function(s,o){return o instanceof oa&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,h,m)=>c&&n1(h,o.filters[m])),!0):!1})(r,t):void Me(19439)}function a1(r){return r instanceof zt?(function(a){return`${a.field.canonicalString()} ${a.op} ${Hr(a.value)}`})(r):r instanceof oa?(function(a){return a.op.toString()+" {"+a.getFilters().map(a1).join(" ,")+"}"})(r):"Filter"}class _E extends zt{constructor(t,a,s){super(t,a,s),this.key=Ae.fromName(s.referenceValue)}matches(t){const a=Ae.comparator(t.key,this.key);return this.matchesComparison(a)}}class xE extends zt{constructor(t,a){super(t,"in",a),this.keys=i1("in",a)}matches(t){return this.keys.some((a=>a.isEqual(t.key)))}}class TE extends zt{constructor(t,a){super(t,"not-in",a),this.keys=i1("not-in",a)}matches(t){return!this.keys.some((a=>a.isEqual(t.key)))}}function i1(r,t){return(t.arrayValue?.values||[]).map((a=>Ae.fromName(a.referenceValue)))}class EE extends zt{constructor(t,a){super(t,"array-contains",a)}matches(t){const a=t.data.field(this.field);return Hd(a)&&go(a.arrayValue,this.value)}}class SE extends zt{constructor(t,a){super(t,"in",a)}matches(t){const a=t.data.field(this.field);return a!==null&&go(this.value.arrayValue,a)}}class wE extends zt{constructor(t,a){super(t,"not-in",a)}matches(t){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=t.data.field(this.field);return a!==null&&a.nullValue===void 0&&!go(this.value.arrayValue,a)}}class AE extends zt{constructor(t,a){super(t,"array-contains-any",a)}matches(t){const a=t.data.field(this.field);return!(!Hd(a)||!a.arrayValue.values)&&a.arrayValue.values.some((s=>go(this.value.arrayValue,s)))}}class CE{constructor(t,a=null,s=[],o=[],c=null,h=null,m=null){this.path=t,this.collectionGroup=a,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function Iy(r,t=null,a=[],s=[],o=null,c=null,h=null){return new CE(r,t,a,s,o,c,h)}function Fd(r){const t=Oe(r);if(t.Te===null){let a=t.path.canonicalString();t.collectionGroup!==null&&(a+="|cg:"+t.collectionGroup),a+="|f:",a+=t.filters.map((s=>_d(s))).join(","),a+="|ob:",a+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Du(t.limit)||(a+="|l:",a+=t.limit),t.startAt&&(a+="|lb:",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Hr(s))).join(",")),t.endAt&&(a+="|ub:",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Hr(s))).join(",")),t.Te=a}return t.Te}function Qd(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<r.orderBy.length;a++)if(!vE(r.orderBy[a],t.orderBy[a]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let a=0;a<r.filters.length;a++)if(!n1(r.filters[a],t.filters[a]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!My(r.startAt,t.startAt)&&My(r.endAt,t.endAt)}function xd(r){return Ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Zr{constructor(t,a=null,s=[],o=[],c=null,h="F",m=null,p=null){this.path=t,this.collectionGroup=a,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NE(r,t,a,s,o,c,h,m){return new Zr(r,t,a,s,o,c,h,m)}function s1(r){return new Zr(r)}function Dy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function r1(r){return r.collectionGroup!==null}function ro(r){const t=Oe(r);if(t.Ie===null){t.Ie=[];const a=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),a.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ht(sn.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((b=>{b.isInequality()&&(m=m.add(b.field))}))})),m})(t).forEach((c=>{a.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new yo(c,s))})),a.has(sn.keyField().canonicalString())||t.Ie.push(new yo(sn.keyField(),s))}return t.Ie}function Va(r){const t=Oe(r);return t.Ee||(t.Ee=RE(t,ro(r))),t.Ee}function RE(r,t){if(r.limitType==="F")return Iy(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new yo(o.field,c)}));const a=r.endAt?new xu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new xu(r.startAt.position,r.startAt.inclusive):null;return Iy(r.path,r.collectionGroup,t,r.filters,r.limit,a,s)}}function Td(r,t){const a=r.filters.concat([t]);return new Zr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),a,r.limit,r.limitType,r.startAt,r.endAt)}function Tu(r,t,a){return new Zr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,a,r.startAt,r.endAt)}function Vu(r,t){return Qd(Va(r),Va(t))&&r.limitType===t.limitType}function l1(r){return`${Fd(Va(r))}|lt:${r.limitType}`}function Or(r){return`Query(target=${(function(a){let s=a.path.canonicalString();return a.collectionGroup!==null&&(s+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(s+=`, filters: [${a.filters.map((o=>a1(o))).join(", ")}]`),Du(a.limit)||(s+=", limit: "+a.limit),a.orderBy.length>0&&(s+=`, orderBy: [${a.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),a.startAt&&(s+=", startAt: ",s+=a.startAt.inclusive?"b:":"a:",s+=a.startAt.position.map((o=>Hr(o))).join(",")),a.endAt&&(s+=", endAt: ",s+=a.endAt.inclusive?"a:":"b:",s+=a.endAt.position.map((o=>Hr(o))).join(",")),`Target(${s})`})(Va(r))}; limitType=${r.limitType})`}function ju(r,t){return t.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ae.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,o){for(const c of ro(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(h,m,p){const b=Ry(h,m,p);return h.inclusive?b<=0:b<0})(s.startAt,ro(s),o)||s.endAt&&!(function(h,m,p){const b=Ry(h,m,p);return h.inclusive?b>=0:b>0})(s.endAt,ro(s),o))})(r,t)}function ME(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function o1(r){return(t,a)=>{let s=!1;for(const o of ro(r)){const c=IE(o,t,a);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function IE(r,t,a){const s=r.field.isKeyField()?Ae.comparator(t.key,a.key):(function(c,h,m){const p=h.data.field(c),b=m.data.field(c);return p!==null&&b!==null?qr(p,b):Me(42886)})(r.field,t,a);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:r.dir})}}class zs{constructor(t,a){this.mapKeyFn=t,this.equalsFn=a,this.inner={},this.innerSize=0}get(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,t))return c}}has(t){return this.get(t)!==void 0}set(t,a){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,a]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return void(o[c]=[t,a]);o.push([t,a]),this.innerSize++}delete(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[a]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Us(this.inner,((a,s)=>{for(const[o,c]of s)t(o,c)}))}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}const DE=new xt(Ae.comparator);function oi(){return DE}const c1=new xt(Ae.comparator);function to(...r){let t=c1;for(const a of r)t=t.insert(a.key,a);return t}function u1(r){let t=c1;return r.forEach(((a,s)=>t=t.insert(a,s.overlayedDocument))),t}function js(){return lo()}function f1(){return lo()}function lo(){return new zs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const OE=new xt(Ae.comparator),VE=new Ht(Ae.comparator);function Qe(...r){let t=VE;for(const a of r)t=t.add(a);return t}const jE=new Ht(Fe);function kE(){return jE}function Xd(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(t)?"-0":t}}function h1(r){return{integerValue:""+r}}function LE(r,t){return uE(t)?h1(t):Xd(r,t)}class ku{constructor(){this._=void 0}}function BE(r,t,a){return r instanceof Eu?(function(o,c){const h={fields:{[Xv]:{stringValue:Qv},[Kv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&qd(c)&&(c=Ou(c)),c&&(h.fields[Yv]=c),{mapValue:h}})(a,t):r instanceof vo?m1(r,t):r instanceof bo?p1(r,t):(function(o,c){const h=d1(o,c),m=Oy(h)+Oy(o.Ae);return bd(h)&&bd(o.Ae)?h1(m):Xd(o.serializer,m)})(r,t)}function UE(r,t,a){return r instanceof vo?m1(r,t):r instanceof bo?p1(r,t):a}function d1(r,t){return r instanceof Su?(function(s){return bd(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Eu extends ku{}class vo extends ku{constructor(t){super(),this.elements=t}}function m1(r,t){const a=g1(t);for(const s of r.elements)a.some((o=>Ba(o,s)))||a.push(s);return{arrayValue:{values:a}}}class bo extends ku{constructor(t){super(),this.elements=t}}function p1(r,t){let a=g1(t);for(const s of r.elements)a=a.filter((o=>!Ba(o,s)));return{arrayValue:{values:a}}}class Su extends ku{constructor(t,a){super(),this.serializer=t,this.Ae=a}}function Oy(r){return Rt(r.integerValue||r.doubleValue)}function g1(r){return Hd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function zE(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof vo&&o instanceof vo||s instanceof bo&&o instanceof bo?Gr(s.elements,o.elements,Ba):s instanceof Su&&o instanceof Su?Ba(s.Ae,o.Ae):s instanceof Eu&&o instanceof Eu})(r.transform,t.transform)}class PE{constructor(t,a){this.version=t,this.transformResults=a}}class si{constructor(t,a){this.updateTime=t,this.exists=a}static none(){return new si}static exists(t){return new si(void 0,t)}static updateTime(t){return new si(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ou(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Lu{}function y1(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new b1(r.key,si.none()):new xo(r.key,r.data,si.none());{const a=r.data,s=Fn.empty();let o=new Ht(sn.comparator);for(let c of t.fields)if(!o.has(c)){let h=a.field(c);h===null&&c.length>1&&(c=c.popLast(),h=a.field(c)),h===null?s.delete(c):s.set(c,h),o=o.add(c)}return new Ps(r.key,s,new la(o.toArray()),si.none())}}function GE(r,t,a){r instanceof xo?(function(o,c,h){const m=o.value.clone(),p=jy(o.fieldTransforms,c,h.transformResults);m.setAll(p),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,t,a):r instanceof Ps?(function(o,c,h){if(!ou(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=jy(o.fieldTransforms,c,h.transformResults),p=c.data;p.setAll(v1(o)),p.setAll(m),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,t,a):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,a)}function oo(r,t,a,s){return r instanceof xo?(function(c,h,m,p){if(!ou(c.precondition,h))return m;const b=c.value.clone(),x=ky(c.fieldTransforms,p,h);return b.setAll(x),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),null})(r,t,a,s):r instanceof Ps?(function(c,h,m,p){if(!ou(c.precondition,h))return m;const b=ky(c.fieldTransforms,p,h),x=h.data;return x.setAll(v1(c)),x.setAll(b),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(r,t,a,s):(function(c,h,m){return ou(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,t,a)}function qE(r,t){let a=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),c=d1(s.transform,o||null);c!=null&&(a===null&&(a=Fn.empty()),a.set(s.field,c))}return a||null}function Vy(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Gr(s,o,((c,h)=>zE(c,h)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class xo extends Lu{constructor(t,a,s,o=[]){super(),this.key=t,this.value=a,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ps extends Lu{constructor(t,a,s,o,c=[]){super(),this.key=t,this.data=a,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function v1(r){const t=new Map;return r.fieldMask.fields.forEach((a=>{if(!a.isEmpty()){const s=r.data.field(a);t.set(a,s)}})),t}function jy(r,t,a){const s=new Map;it(r.length===a.length,32656,{Re:a.length,Ve:r.length});for(let o=0;o<a.length;o++){const c=r[o],h=c.transform,m=t.data.field(c.field);s.set(c.field,UE(h,m,a[o]))}return s}function ky(r,t,a){const s=new Map;for(const o of r){const c=o.transform,h=a.data.field(o.field);s.set(o.field,BE(c,h,t))}return s}class b1 extends Lu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HE extends Lu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FE{constructor(t,a,s,o){this.batchId=t,this.localWriteTime=a,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,a){const s=a.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(t.key)&&GE(c,t,s[o])}}applyToLocalView(t,a){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(a=oo(s,t,a,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(a=oo(s,t,a,this.localWriteTime));return a}applyToLocalDocumentSet(t,a){const s=f1();return this.mutations.forEach((o=>{const c=t.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=a.has(o.key)?null:m;const p=y1(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((t,a)=>t.add(a.key)),Qe())}isEqual(t){return this.batchId===t.batchId&&Gr(this.mutations,t.mutations,((a,s)=>Vy(a,s)))&&Gr(this.baseMutations,t.baseMutations,((a,s)=>Vy(a,s)))}}class Yd{constructor(t,a,s,o){this.batch=t,this.commitVersion=a,this.mutationResults=s,this.docVersions=o}static from(t,a,s){it(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return OE})();const c=t.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new Yd(t,a,s,o)}}class QE{constructor(t,a){this.largestBatchId=t,this.mutation=a}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XE{constructor(t,a){this.count=t,this.unchangedNames=a}}var Ut,Ye;function YE(r){switch(r){case te.OK:return Me(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Me(15467,{code:r})}}function _1(r){if(r===void 0)return li("GRPC error has no .code"),te.UNKNOWN;switch(r){case Ut.OK:return te.OK;case Ut.CANCELLED:return te.CANCELLED;case Ut.UNKNOWN:return te.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return te.INTERNAL;case Ut.UNAVAILABLE:return te.UNAVAILABLE;case Ut.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ut.NOT_FOUND:return te.NOT_FOUND;case Ut.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ut.ABORTED:return te.ABORTED;case Ut.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ut.DATA_LOSS:return te.DATA_LOSS;default:return Me(39323,{code:r})}}(Ye=Ut||(Ut={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function KE(){return new TextEncoder}const $E=new Xi([4294967295,4294967295],0);function Ly(r){const t=KE().encode(r),a=new Ov;return a.update(t),new Uint8Array(a.digest())}function By(r){const t=new DataView(r.buffer),a=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Xi([a,s],0),new Xi([o,c],0)]}class Kd{constructor(t,a,s){if(this.bitmap=t,this.padding=a,this.hashCount=s,a<0||a>=8)throw new no(`Invalid padding: ${a}`);if(s<0)throw new no(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${s}`);if(t.length===0&&a!==0)throw new no(`Invalid padding when bitmap length is 0: ${a}`);this.ge=8*t.length-a,this.pe=Xi.fromNumber(this.ge)}ye(t,a,s){let o=t.add(a.multiply(Xi.fromNumber(s)));return o.compare($E)===1&&(o=new Xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const a=Ly(t),[s,o]=By(a);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);if(!this.we(h))return!1}return!0}static create(t,a,s){const o=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),h=new Kd(c,o,a);return s.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const a=Ly(t),[s,o]=By(a);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);this.Se(h)}}Se(t){const a=Math.floor(t/8),s=t%8;this.bitmap[a]|=1<<s}}class no extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bu{constructor(t,a,s,o,c){this.snapshotVersion=t,this.targetChanges=a,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,a,s){const o=new Map;return o.set(t,To.createSynthesizedTargetChangeForCurrentChange(t,a,s)),new Bu(De.min(),o,new xt(Fe),oi(),Qe())}}class To{constructor(t,a,s,o,c){this.resumeToken=t,this.current=a,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,a,s){return new To(s,a,Qe(),Qe(),Qe())}}class cu{constructor(t,a,s,o){this.be=t,this.removedTargetIds=a,this.key=s,this.De=o}}class x1{constructor(t,a){this.targetId=t,this.Ce=a}}class T1{constructor(t,a,s=rn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=a,this.resumeToken=s,this.cause=o}}class Uy{constructor(){this.ve=0,this.Fe=zy(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Qe(),a=Qe(),s=Qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:t=t.add(o);break;case 2:a=a.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:c})}})),new To(this.Me,this.xe,t,a,s)}qe(){this.Oe=!1,this.Fe=zy()}Qe(t,a){this.Oe=!0,this.Fe=this.Fe.insert(t,a)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZE{constructor(t){this.Ge=t,this.ze=new Map,this.je=oi(),this.Je=tu(),this.He=tu(),this.Ye=new xt(Fe)}Ze(t){for(const a of t.be)t.De&&t.De.isFoundDocument()?this.Xe(a,t.De):this.et(a,t.key,t.De);for(const a of t.removedTargetIds)this.et(a,t.key,t.De)}tt(t){this.forEachTarget(t,(a=>{const s=this.nt(a);switch(t.state){case 0:this.rt(a)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(a);break;case 3:this.rt(a)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(a)&&(this.it(a),s.Le(t.resumeToken));break;default:Me(56790,{state:t.state})}}))}forEachTarget(t,a){t.targetIds.length>0?t.targetIds.forEach(a):this.ze.forEach(((s,o)=>{this.rt(o)&&a(o)}))}st(t){const a=t.targetId,s=t.Ce.count,o=this.ot(a);if(o){const c=o.target;if(xd(c))if(s===0){const h=new Ae(c.path);this.et(a,h,cn.newNoDocument(h,De.min()))}else it(s===1,20013,{expectedCount:s});else{const h=this._t(a);if(h!==s){const m=this.ut(t),p=m?this.ct(m,t,h):1;if(p!==0){this.it(a);const b=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(a,b)}}}}}ut(t){const a=t.Ce.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=a;let h,m;try{h=Ji(s).toUint8Array()}catch(p){if(p instanceof Fv)return Pr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Kd(h,o,c)}catch(p){return Pr(p instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,a,s){return a.Ce.count===s-this.Pt(t,a.targetId)?0:2}Pt(t,a){const s=this.Ge.getRemoteKeysForTarget(a);let o=0;return s.forEach((c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.et(a,c,null),o++)})),o}Tt(t){const a=new Map;this.ze.forEach(((c,h)=>{const m=this.ot(h);if(m){if(c.current&&xd(m.target)){const p=new Ae(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,cn.newNoDocument(p,t))}c.Be&&(a.set(h,c.ke()),c.qe())}}));let s=Qe();this.He.forEach(((c,h)=>{let m=!0;h.forEachWhile((p=>{const b=this.ot(p);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(t)));const o=new Bu(t,a,this.Ye,this.je,s);return this.je=oi(),this.Je=tu(),this.He=tu(),this.Ye=new xt(Fe),o}Xe(t,a){if(!this.rt(t))return;const s=this.Et(t,a.key)?2:0;this.nt(t).Qe(a.key,s),this.je=this.je.insert(a.key,a),this.Je=this.Je.insert(a.key,this.It(a.key).add(t)),this.He=this.He.insert(a.key,this.dt(a.key).add(t))}et(t,a,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,a)?o.Qe(a,1):o.$e(a),this.He=this.He.insert(a,this.dt(a).delete(t)),this.He=this.He.insert(a,this.dt(a).add(t)),s&&(this.je=this.je.insert(a,s))}removeTarget(t){this.ze.delete(t)}_t(t){const a=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+a.addedDocuments.size-a.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let a=this.ze.get(t);return a||(a=new Uy,this.ze.set(t,a)),a}dt(t){let a=this.He.get(t);return a||(a=new Ht(Fe),this.He=this.He.insert(t,a)),a}It(t){let a=this.Je.get(t);return a||(a=new Ht(Fe),this.Je=this.Je.insert(t,a)),a}rt(t){const a=this.ot(t)!==null;return a||ve("WatchChangeAggregator","Detected inactive target",t),a}ot(t){const a=this.ze.get(t);return a&&a.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Uy),this.Ge.getRemoteKeysForTarget(t).forEach((a=>{this.et(t,a,null)}))}Et(t,a){return this.Ge.getRemoteKeysForTarget(t).has(a)}}function tu(){return new xt(Ae.comparator)}function zy(){return new xt(Ae.comparator)}const JE={asc:"ASCENDING",desc:"DESCENDING"},WE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eS={and:"AND",or:"OR"};class tS{constructor(t,a){this.databaseId=t,this.useProto3Json=a}}function Ed(r,t){return r.useProto3Json||Du(t)?t:{value:t}}function wu(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E1(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function nS(r,t){return wu(r,t.toTimestamp())}function ja(r){return it(!!r,49232),De.fromTimestamp((function(a){const s=Zi(a);return new gt(s.seconds,s.nanos)})(r))}function $d(r,t){return Sd(r,t).canonicalString()}function Sd(r,t){const a=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?a:a.child(t)}function S1(r){const t=pt.fromString(r);return it(R1(t),10190,{key:t.toString()}),t}function wd(r,t){return $d(r.databaseId,t.path)}function ed(r,t){const a=S1(t);if(a.get(1)!==r.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+r.databaseId.projectId);if(a.get(3)!==r.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+r.databaseId.database);return new Ae(A1(a))}function w1(r,t){return $d(r.databaseId,t)}function aS(r){const t=S1(r);return t.length===4?pt.emptyPath():A1(t)}function Ad(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function A1(r){return it(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Py(r,t,a){return{name:wd(r,t),fields:a.value.mapValue.fields}}function iS(r,t){let a;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Me(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=(function(b,x){return b.useProto3Json?(it(x===void 0||typeof x=="string",58123),rn.fromBase64String(x||"")):(it(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),rn.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(b){const x=b.code===void 0?te.UNKNOWN:_1(b.code);return new pe(x,b.message||"")})(h);a=new T1(s,o,c,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=ed(r,s.document.name),c=ja(s.document.updateTime),h=s.document.createTime?ja(s.document.createTime):De.min(),m=new Fn({mapValue:{fields:s.document.fields}}),p=cn.newFoundDocument(o,c,h,m),b=s.targetIds||[],x=s.removedTargetIds||[];a=new cu(b,x,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=ed(r,s.document),c=s.readTime?ja(s.readTime):De.min(),h=cn.newNoDocument(o,c),m=s.removedTargetIds||[];a=new cu([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=ed(r,s.document),c=s.removedTargetIds||[];a=new cu([],c,o,null)}else{if(!("filter"in t))return Me(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,h=new XE(o,c),m=s.targetId;a=new x1(m,h)}}return a}function sS(r,t){let a;if(t instanceof xo)a={update:Py(r,t.key,t.value)};else if(t instanceof b1)a={delete:wd(r,t.key)};else if(t instanceof Ps)a={update:Py(r,t.key,t.data),updateMask:mS(t.fieldMask)};else{if(!(t instanceof HE))return Me(16599,{Vt:t.type});a={verify:wd(r,t.key)}}return t.fieldTransforms.length>0&&(a.updateTransforms=t.fieldTransforms.map((s=>(function(c,h){const m=h.transform;if(m instanceof Eu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof vo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof bo)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Su)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Me(20930,{transform:h.transform})})(0,s)))),t.precondition.isNone||(a.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:nS(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)})(r,t.precondition)),a}function rS(r,t){return r&&r.length>0?(it(t!==void 0,14353),r.map((a=>(function(o,c){let h=o.updateTime?ja(o.updateTime):ja(c);return h.isEqual(De.min())&&(h=ja(c)),new PE(h,o.transformResults||[])})(a,t)))):[]}function lS(r,t){return{documents:[w1(r,t.path)]}}function oS(r,t){const a={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),a.structuredQuery.from=[{collectionId:s.lastSegment()}]),a.parent=w1(r,o);const c=(function(b){if(b.length!==0)return N1(oa.create(b,"and"))})(t.filters);c&&(a.structuredQuery.where=c);const h=(function(b){if(b.length!==0)return b.map((x=>(function(S){return{field:Vr(S.field),direction:fS(S.dir)}})(x)))})(t.orderBy);h&&(a.structuredQuery.orderBy=h);const m=Ed(r,t.limit);return m!==null&&(a.structuredQuery.limit=m),t.startAt&&(a.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(a.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:a,parent:o}}function cS(r){let t=aS(r.parent);const a=r.structuredQuery,s=a.from?a.from.length:0;let o=null;if(s>0){it(s===1,65062);const x=a.from[0];x.allDescendants?o=x.collectionId:t=t.child(x.collectionId)}let c=[];a.where&&(c=(function(T){const S=C1(T);return S instanceof oa&&t1(S)?S.getFilters():[S]})(a.where));let h=[];a.orderBy&&(h=(function(T){return T.map((S=>(function(V){return new yo(jr(V.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(a.orderBy));let m=null;a.limit&&(m=(function(T){let S;return S=typeof T=="object"?T.value:T,Du(S)?null:S})(a.limit));let p=null;a.startAt&&(p=(function(T){const S=!!T.before,I=T.values||[];return new xu(I,S)})(a.startAt));let b=null;return a.endAt&&(b=(function(T){const S=!T.before,I=T.values||[];return new xu(I,S)})(a.endAt)),NE(t,o,h,c,m,"F",p,b)}function uS(r,t){const a=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(t.purpose);return a==null?null:{"goog-listen-tags":a}}function C1(r){return r.unaryFilter!==void 0?(function(a){switch(a.unaryFilter.op){case"IS_NAN":const s=jr(a.unaryFilter.field);return zt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=jr(a.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=jr(a.unaryFilter.field);return zt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=jr(a.unaryFilter.field);return zt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(r):r.fieldFilter!==void 0?(function(a){return zt.create(jr(a.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(a.fieldFilter.op),a.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(a){return oa.create(a.compositeFilter.filters.map((s=>C1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(a.compositeFilter.op))})(r):Me(30097,{filter:r})}function fS(r){return JE[r]}function hS(r){return WE[r]}function dS(r){return eS[r]}function Vr(r){return{fieldPath:r.canonicalString()}}function jr(r){return sn.fromServerFormat(r.fieldPath)}function N1(r){return r instanceof zt?(function(a){if(a.op==="=="){if(Ny(a.value))return{unaryFilter:{field:Vr(a.field),op:"IS_NAN"}};if(Cy(a.value))return{unaryFilter:{field:Vr(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(Ny(a.value))return{unaryFilter:{field:Vr(a.field),op:"IS_NOT_NAN"}};if(Cy(a.value))return{unaryFilter:{field:Vr(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(a.field),op:hS(a.op),value:a.value}}})(r):r instanceof oa?(function(a){const s=a.getFilters().map((o=>N1(o)));return s.length===1?s[0]:{compositeFilter:{op:dS(a.op),filters:s}}})(r):Me(54877,{filter:r})}function mS(r){const t=[];return r.fields.forEach((a=>t.push(a.canonicalString()))),{fieldPaths:t}}function R1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Hi{constructor(t,a,s,o,c=De.min(),h=De.min(),m=rn.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=a,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new Hi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,a){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class pS{constructor(t){this.yt=t}}function gS(r){const t=cS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Tu(t,t.limit,"L"):t}class yS{constructor(){this.Cn=new vS}addToCollectionParentIndex(t,a){return this.Cn.add(a),ne.resolve()}getCollectionParents(t,a){return ne.resolve(this.Cn.getEntries(a))}addFieldIndex(t,a){return ne.resolve()}deleteFieldIndex(t,a){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,a){return ne.resolve()}getDocumentsMatchingTarget(t,a){return ne.resolve(null)}getIndexType(t,a){return ne.resolve(0)}getFieldIndexes(t,a){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,a){return ne.resolve($i.min())}getMinOffsetFromCollectionGroup(t,a){return ne.resolve($i.min())}updateCollectionGroup(t,a,s){return ne.resolve()}updateIndexEntries(t,a){return ne.resolve()}}class vS{constructor(){this.index={}}add(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a]||new Ht(pt.comparator),c=!o.has(s);return this.index[a]=o.add(s),c}has(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ht(pt.comparator)).toArray()}}const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M1=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,a,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=a,this.maximumSequenceNumbersToCollect=s}}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(M1,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class Fr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Fr(0)}static cr(){return new Fr(-1)}}const qy="LruGarbageCollector",bS=1048576;function Hy([r,t],[a,s]){const o=Fe(r,a);return o===0?Fe(t,s):o}class _S{constructor(t){this.Ir=t,this.buffer=new Ht(Hy),this.Er=0}dr(){return++this.Er}Ar(t){const a=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(a);else{const s=this.buffer.last();Hy(a,s)<0&&(this.buffer=this.buffer.delete(s).add(a))}}get maxValue(){return this.buffer.last()[0]}}class xS{constructor(t,a,s){this.garbageCollector=t,this.asyncQueue=a,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ve(qy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){$r(a)?ve(qy,"Ignoring IndexedDB error during garbage collection: ",a):await Kr(a)}await this.Vr(3e5)}))}}class TS{constructor(t,a){this.mr=t,this.params=a}calculateTargetCount(t,a){return this.mr.gr(t).next((s=>Math.floor(a/100*s)))}nthSequenceNumber(t,a){if(a===0)return ne.resolve(Iu.ce);const s=new _S(a);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,a,s){return this.mr.removeTargets(t,a,s)}removeOrphanedDocuments(t,a){return this.mr.removeOrphanedDocuments(t,a)}collect(t,a){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Gy)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.yr(t,a)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,a){let s,o,c,h,m,p,b;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,a)))).next((T=>(c=T,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(b=Date.now(),Dr()<=Ke.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(b-p)+`ms
Total Duration: ${b-x}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T}))))}}function ES(r,t){return new TS(r,t)}class SS{constructor(){this.changes=new zs((t=>t.toString()),((t,a)=>t.isEqual(a))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,a){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(a))}getEntry(t,a){this.assertNotApplied();const s=this.changes.get(a);return s!==void 0?ne.resolve(s):this.getFromCache(t,a)}getEntries(t,a){return this.getAllFromCache(t,a)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class wS{constructor(t,a){this.overlayedDocument=t,this.mutatedFields=a}}class AS{constructor(t,a,s,o){this.remoteDocumentCache=t,this.mutationQueue=a,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,a){let s=null;return this.documentOverlayCache.getOverlay(t,a).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,a)))).next((o=>(s!==null&&oo(s.mutation,o,la.empty(),gt.now()),o)))}getDocuments(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.getLocalViewOfDocuments(t,s,Qe()).next((()=>s))))}getLocalViewOfDocuments(t,a,s=Qe()){const o=js();return this.populateOverlays(t,o,a).next((()=>this.computeViews(t,a,o,s).next((c=>{let h=to();return c.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(t,a){const s=js();return this.populateOverlays(t,s,a).next((()=>this.computeViews(t,a,s,Qe())))}populateOverlays(t,a,s){const o=[];return s.forEach((c=>{a.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(t,o).next((c=>{c.forEach(((h,m)=>{a.set(h,m)}))}))}computeViews(t,a,s,o){let c=oi();const h=lo(),m=(function(){return lo()})();return a.forEach(((p,b)=>{const x=s.get(b.key);o.has(b.key)&&(x===void 0||x.mutation instanceof Ps)?c=c.insert(b.key,b):x!==void 0?(h.set(b.key,x.mutation.getFieldMask()),oo(x.mutation,b,x.mutation.getFieldMask(),gt.now())):h.set(b.key,la.empty())})),this.recalculateAndSaveOverlays(t,c).next((p=>(p.forEach(((b,x)=>h.set(b,x))),a.forEach(((b,x)=>m.set(b,new wS(x,h.get(b)??null)))),m)))}recalculateAndSaveOverlays(t,a){const s=lo();let o=new xt(((h,m)=>h-m)),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,a).next((h=>{for(const m of h)m.keys().forEach((p=>{const b=a.get(p);if(b===null)return;let x=s.get(p)||la.empty();x=m.applyToLocalView(b,x),s.set(p,x);const T=(o.get(m.batchId)||Qe()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),b=p.key,x=p.value,T=f1();x.forEach((S=>{if(!c.has(S)){const I=y1(a.get(S),s.get(S));I!==null&&T.set(S,I),c=c.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(t,b,T))}return ne.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,a,s,o){return(function(h){return Ae.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(a)?this.getDocumentsMatchingDocumentQuery(t,a.path):r1(a)?this.getDocumentsMatchingCollectionGroupQuery(t,a,s,o):this.getDocumentsMatchingCollectionQuery(t,a,s,o)}getNextDocuments(t,a,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,a,s,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,a,s.largestBatchId,o-c.size):ne.resolve(js());let m=ho,p=c;return h.next((b=>ne.forEach(b,((x,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),c.get(x)?ne.resolve():this.remoteDocumentCache.getEntry(t,x).next((S=>{p=p.insert(x,S)}))))).next((()=>this.populateOverlays(t,b,c))).next((()=>this.computeViews(t,p,b,Qe()))).next((x=>({batchId:m,changes:u1(x)})))))}))}getDocumentsMatchingDocumentQuery(t,a){return this.getDocument(t,new Ae(a)).next((s=>{let o=to();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,a,s,o){const c=a.collectionGroup;let h=to();return this.indexManager.getCollectionParents(t,c).next((m=>ne.forEach(m,(p=>{const b=(function(T,S){return new Zr(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(a,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,b,s,o).next((x=>{x.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,a,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(t,a.path,s.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,a,s,c,o)))).next((h=>{c.forEach(((p,b)=>{const x=b.getKey();h.get(x)===null&&(h=h.insert(x,cn.newInvalidDocument(x)))}));let m=to();return h.forEach(((p,b)=>{const x=c.get(p);x!==void 0&&oo(x.mutation,b,la.empty(),gt.now()),ju(a,b)&&(m=m.insert(p,b))})),m}))}}class CS{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,a){return ne.resolve(this.Lr.get(a))}saveBundleMetadata(t,a){return this.Lr.set(a.id,(function(o){return{id:o.id,version:o.version,createTime:ja(o.createTime)}})(a)),ne.resolve()}getNamedQuery(t,a){return ne.resolve(this.kr.get(a))}saveNamedQuery(t,a){return this.kr.set(a.name,(function(o){return{name:o.name,query:gS(o.bundledQuery),readTime:ja(o.readTime)}})(a)),ne.resolve()}}class NS{constructor(){this.overlays=new xt(Ae.comparator),this.qr=new Map}getOverlay(t,a){return ne.resolve(this.overlays.get(a))}getOverlays(t,a){const s=js();return ne.forEach(a,(o=>this.getOverlay(t,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(t,a,s){return s.forEach(((o,c)=>{this.St(t,a,c)})),ne.resolve()}removeOverlaysForBatchId(t,a,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(t,a,s){const o=js(),c=a.length+1,h=new Ae(a.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,b=p.getKey();if(!a.isPrefixOf(b.path))break;b.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(t,a,s,o){let c=new xt(((b,x)=>b-x));const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===a&&b.largestBatchId>s){let x=c.get(b.largestBatchId);x===null&&(x=js(),c=c.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=js(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((b,x)=>m.set(b,x))),!(m.size()>=o)););return ne.resolve(m)}St(t,a,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new QE(a,s));let c=this.qr.get(a);c===void 0&&(c=Qe(),this.qr.set(a,c)),this.qr.set(a,c.add(s.key))}}class RS{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,a){return this.sessionToken=a,ne.resolve()}}class Zd{constructor(){this.Qr=new Ht(Yt.$r),this.Ur=new Ht(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,a){const s=new Yt(t,a);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,a){t.forEach((s=>this.addReference(s,a)))}removeReference(t,a){this.Gr(new Yt(t,a))}zr(t,a){t.forEach((s=>this.removeReference(s,a)))}jr(t){const a=new Ae(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1),c=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const a=new Ae(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1);let c=Qe();return this.Ur.forEachInRange([s,o],(h=>{c=c.add(h.key)})),c}containsKey(t){const a=new Yt(t,0),s=this.Qr.firstAfterOrEqual(a);return s!==null&&t.isEqual(s.key)}}class Yt{constructor(t,a){this.key=t,this.Yr=a}static $r(t,a){return Ae.comparator(t.key,a.key)||Fe(t.Yr,a.Yr)}static Kr(t,a){return Fe(t.Yr,a.Yr)||Ae.comparator(t.key,a.key)}}class MS{constructor(t,a){this.indexManager=t,this.referenceDelegate=a,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Yt.$r)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,a,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new FE(c,a,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(t,a){return ne.resolve(this.Xr(a))}getNextMutationBatchAfterBatchId(t,a){const s=a+1,o=this.ei(s),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Gd:this.tr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,a){const s=new Yt(a,0),o=new Yt(a,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);c.push(m)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,a){let s=new Ht(Fe);return a.forEach((o=>{const c=new Yt(o,0),h=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,a){const s=a.path,o=s.length+1;let c=s;Ae.isDocumentKey(c)||(c=c.child(""));const h=new Yt(new Ae(c),0);let m=new Ht(Fe);return this.Zr.forEachWhile((p=>{const b=p.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(m=m.add(p.Yr)),!0)}),h),ne.resolve(this.ti(m))}ti(t){const a=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&a.push(o)})),a}removeMutationBatch(t,a){it(this.ni(a.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(a.mutations,(o=>{const c=new Yt(o.key,a.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,a){const s=new Yt(a,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(a.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}ni(t,a){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const a=this.ei(t);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}class IS{constructor(t){this.ri=t,this.docs=(function(){return new xt(Ae.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,a){const s=a.key,o=this.docs.get(s),c=o?o.size:0,h=this.ri(a);return this.docs=this.docs.insert(s,{document:a.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const a=this.docs.get(t);a&&(this.docs=this.docs.remove(t),this.size-=a.size)}getEntry(t,a){const s=this.docs.get(a);return ne.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(a))}getEntries(t,a){let s=oi();return a.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():cn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(t,a,s,o){let c=oi();const h=a.path,m=new Ae(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:b,value:{document:x}}=p.getNext();if(!h.isPrefixOf(b.path))break;b.path.length>h.length+1||rE(sE(x),s)<=0||(o.has(x.key)||ju(a,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(t,a,s,o){Me(9500)}ii(t,a){return ne.forEach(this.docs,(s=>a(s)))}newChangeBuffer(t){return new DS(this)}getSize(t){return ne.resolve(this.size)}}class DS extends SS{constructor(t){super(),this.Nr=t}applyChanges(t){const a=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?a.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),ne.waitFor(a)}getFromCache(t,a){return this.Nr.getEntry(t,a)}getAllFromCache(t,a){return this.Nr.getEntries(t,a)}}class OS{constructor(t){this.persistence=t,this.si=new zs((a=>Fd(a)),Qd),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Zd,this.targetCount=0,this.ai=Fr.ur()}forEachTarget(t,a){return this.si.forEach(((s,o)=>a(o))),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,a,s){return s&&(this.lastRemoteSnapshotVersion=s),a>this.oi&&(this.oi=a),ne.resolve()}Pr(t){this.si.set(t.target,t);const a=t.targetId;a>this.highestTargetId&&(this.ai=new Fr(a),this.highestTargetId=a),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,a){return this.Pr(a),this.targetCount+=1,ne.resolve()}updateTargetData(t,a){return this.Pr(a),ne.resolve()}removeTargetData(t,a){return this.si.delete(a.target),this._i.jr(a.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,a,s){let o=0;const c=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=a&&s.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,a){const s=this.si.get(a)||null;return ne.resolve(s)}addMatchingKeys(t,a,s){return this._i.Wr(a,s),ne.resolve()}removeMatchingKeys(t,a,s){this._i.zr(a,s);const o=this.persistence.referenceDelegate,c=[];return o&&a.forEach((h=>{c.push(o.markPotentiallyOrphaned(t,h))})),ne.waitFor(c)}removeMatchingKeysForTargetId(t,a){return this._i.jr(a),ne.resolve()}getMatchingKeysForTargetId(t,a){const s=this._i.Hr(a);return ne.resolve(s)}containsKey(t,a){return ne.resolve(this._i.containsKey(a))}}class I1{constructor(t,a){this.ui={},this.overlays={},this.ci=new Iu(0),this.li=!1,this.li=!0,this.hi=new RS,this.referenceDelegate=t(this),this.Pi=new OS(this),this.indexManager=new yS,this.remoteDocumentCache=(function(o){return new IS(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new pS(a),this.Ii=new CS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let a=this.overlays[t.toKey()];return a||(a=new NS,this.overlays[t.toKey()]=a),a}getMutationQueue(t,a){let s=this.ui[t.toKey()];return s||(s=new MS(a,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,a,s){ve("MemoryPersistence","Starting transaction:",t);const o=new VS(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(t,a){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,a))))}}class VS extends oE{constructor(t){super(),this.currentSequenceNumber=t}}class Jd{constructor(t){this.persistence=t,this.Ri=new Zd,this.Vi=null}static mi(t){return new Jd(t)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(t,a,s){return this.Ri.addReference(s,a),this.fi.delete(s.toString()),ne.resolve()}removeReference(t,a,s){return this.Ri.removeReference(s,a),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(t,a){return this.fi.add(a.toString()),ne.resolve()}removeTarget(t,a){this.Ri.jr(a.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,a.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,a)))}Ei(){this.Vi=new Set}di(t){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=Ae.fromPath(s);return this.gi(t,o).next((c=>{c||a.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,a.apply(t))))}updateLimboDocument(t,a){return this.gi(t,a).next((s=>{s?this.fi.delete(a.toString()):this.fi.add(a.toString())}))}Ti(t){return 0}gi(t,a){return ne.or([()=>ne.resolve(this.Ri.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(t,a),()=>this.persistence.Ai(t,a)])}}class Au{constructor(t,a){this.persistence=t,this.pi=new zs((s=>fE(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=ES(this,a)}static mi(t,a){return new Au(t,a)}Ei(){}di(t){return ne.resolve()}forEachTarget(t,a){return this.persistence.getTargetCache().forEachTarget(t,a)}gr(t){const a=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>a.next((o=>s+o))))}wr(t){let a=0;return this.pr(t,(s=>{a++})).next((()=>a))}pr(t,a){return ne.forEach(this.pi,((s,o)=>this.br(t,s,o).next((c=>c?ne.resolve():a(o)))))}removeTargets(t,a,s){return this.persistence.getTargetCache().removeTargets(t,a,s)}removeOrphanedDocuments(t,a){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,a).next((m=>{m||(s++,c.removeEntry(h,De.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,a){return this.pi.set(a,t.currentSequenceNumber),ne.resolve()}removeTarget(t,a){const s=a.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),ne.resolve()}removeReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,a){return this.pi.set(a,t.currentSequenceNumber),ne.resolve()}Ti(t){let a=t.key.toString().length;return t.isFoundDocument()&&(a+=ru(t.data.value)),a}br(t,a,s){return ne.or([()=>this.persistence.Ai(t,a),()=>this.persistence.getTargetCache().containsKey(t,a),()=>{const o=this.pi.get(a);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Wd{constructor(t,a,s,o){this.targetId=t,this.fromCache=a,this.Es=s,this.ds=o}static As(t,a){let s=Qe(),o=Qe();for(const c of a.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Wd(t,a.fromCache,s,o)}}class jS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class kS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return A2()?8:cE(S2())>0?6:4})()}initialize(t,a){this.ps=t,this.indexManager=a,this.Rs=!0}getDocumentsMatchingQuery(t,a,s,o){const c={result:null};return this.ys(t,a).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(t,a,o,s).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new jS;return this.Ss(t,a,h).next((m=>{if(c.result=m,this.Vs)return this.bs(t,a,h,m.size)}))})).next((()=>c.result))}bs(t,a,s,o){return s.documentReadCount<this.fs?(Dr()<=Ke.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Or(a),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Dr()<=Ke.DEBUG&&ve("QueryEngine","Query:",Or(a),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Dr()<=Ke.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Or(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Va(a))):ne.resolve())}ys(t,a){if(Dy(a))return ne.resolve(null);let s=Va(a);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(a.limit!==null&&o===1&&(a=Tu(a,null,"F"),s=Va(a)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const h=Qe(...c);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,s).next((p=>{const b=this.Ds(a,m);return this.Cs(a,b,h,p.readTime)?this.ys(t,Tu(a,null,"F")):this.vs(t,b,a,p)}))))})))))}ws(t,a,s,o){return Dy(a)||o.isEqual(De.min())?ne.resolve(null):this.ps.getDocuments(t,s).next((c=>{const h=this.Ds(a,c);return this.Cs(a,h,s,o)?ne.resolve(null):(Dr()<=Ke.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Or(a)),this.vs(t,h,a,iE(o,ho)).next((m=>m)))}))}Ds(t,a){let s=new Ht(o1(t));return a.forEach(((o,c)=>{ju(t,c)&&(s=s.add(c))})),s}Cs(t,a,s,o){if(t.limit===null)return!1;if(s.size!==a.size)return!0;const c=t.limitType==="F"?a.last():a.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(t,a,s){return Dr()<=Ke.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Or(a)),this.ps.getDocumentsMatchingQuery(t,a,$i.min(),s)}vs(t,a,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((c=>(a.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const em="LocalStore",LS=3e8;class BS{constructor(t,a,s,o){this.persistence=t,this.Fs=a,this.serializer=o,this.Ms=new xt(Fe),this.xs=new zs((c=>Fd(c)),Qd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new AS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(a=>t.collect(a,this.Ms)))}}function US(r,t,a,s){return new BS(r,t,a,s)}async function D1(r,t){const a=Oe(r);return await a.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return a.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,a.Bs(t),a.mutationQueue.getAllMutationBatches(s)))).next((c=>{const h=[],m=[];let p=Qe();for(const b of o){h.push(b.batchId);for(const x of b.mutations)p=p.add(x.key)}for(const b of c){m.push(b.batchId);for(const x of b.mutations)p=p.add(x.key)}return a.localDocuments.getDocuments(s,p).next((b=>({Ls:b,removedBatchIds:h,addedBatchIds:m})))}))}))}function zS(r,t){const a=Oe(r);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),c=a.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,b,x){const T=b.batch,S=T.keys();let I=ne.resolve();return S.forEach((V=>{I=I.next((()=>x.getEntry(p,V))).next((q=>{const U=b.docVersions.get(V);it(U!==null,48541),q.version.compareTo(U)<0&&(T.applyToRemoteDocument(q,b),q.isValidDocument()&&(q.setReadTime(b.commitVersion),x.addEntry(q)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(a,s,t,c).next((()=>c.apply(s))).next((()=>a.mutationQueue.performConsistencyCheck(s))).next((()=>a.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Qe();for(let b=0;b<m.mutationResults.length;++b)m.mutationResults[b].transformResults.length>0&&(p=p.add(m.batch.mutations[b].key));return p})(t)))).next((()=>a.localDocuments.getDocuments(s,o)))}))}function O1(r){const t=Oe(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(a=>t.Pi.getLastRemoteSnapshotVersion(a)))}function PS(r,t){const a=Oe(r),s=t.snapshotVersion;let o=a.Ms;return a.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=a.Ns.newChangeBuffer({trackRemovals:!0});o=a.Ms;const m=[];t.targetChanges.forEach(((x,T)=>{const S=o.get(T);if(!S)return;m.push(a.Pi.removeMatchingKeys(c,x.removedDocuments,T).next((()=>a.Pi.addMatchingKeys(c,x.addedDocuments,T))));let I=S.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(T)!==null?I=I.withResumeToken(rn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):x.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(x.resumeToken,s)),o=o.insert(T,I),(function(q,U,k){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=LS?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(S,I,x)&&m.push(a.Pi.updateTargetData(c,I))}));let p=oi(),b=Qe();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&m.push(a.persistence.referenceDelegate.updateLimboDocument(c,x))})),m.push(GS(c,h,t.documentUpdates).next((x=>{p=x.ks,b=x.qs}))),!s.isEqual(De.min())){const x=a.Pi.getLastRemoteSnapshotVersion(c).next((T=>a.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(x)}return ne.waitFor(m).next((()=>h.apply(c))).next((()=>a.localDocuments.getLocalViewOfDocuments(c,p,b))).next((()=>p))})).then((c=>(a.Ms=o,c)))}function GS(r,t,a){let s=Qe(),o=Qe();return a.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let h=oi();return a.forEach(((m,p)=>{const b=c.get(m);p.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(t.removeEntry(m,p.readTime),h=h.insert(m,p)):!b.isValidDocument()||p.version.compareTo(b.version)>0||p.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(p),h=h.insert(m,p)):ve(em,"Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function qS(r,t){const a=Oe(r);return a.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Gd),a.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function HS(r,t){const a=Oe(r);return a.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return a.Pi.getTargetData(s,t).next((c=>c?(o=c,ne.resolve(o)):a.Pi.allocateTargetId(s).next((h=>(o=new Hi(t,h,"TargetPurposeListen",s.currentSequenceNumber),a.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=a.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(a.Ms=a.Ms.insert(s.targetId,s),a.xs.set(t,s.targetId)),s}))}async function Cd(r,t,a){const s=Oe(r),o=s.Ms.get(t),c=a?"readwrite":"readwrite-primary";try{a||await s.persistence.runTransaction("Release target",c,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!$r(h))throw h;ve(em,`Failed to update sequence numbers for target ${t}: ${h}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function Fy(r,t,a){const s=Oe(r);let o=De.min(),c=Qe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,b,x){const T=Oe(p),S=T.xs.get(x);return S!==void 0?ne.resolve(T.Ms.get(S)):T.Pi.getTargetData(b,x)})(s,h,Va(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,t,a?o:De.min(),a?c:Qe()))).next((m=>(FS(s,ME(t),m),{documents:m,Qs:c})))))}function FS(r,t,a){let s=r.Os.get(t)||De.min();a.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Qy{constructor(){this.activeTargetIds=kE()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QS{constructor(){this.Mo=new Qy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,a,s){}addLocalQueryTarget(t,a=!0){return a&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,a,s){this.xo[t]=a}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Qy,Promise.resolve()}handleUserChange(t,a,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class XS{Oo(t){}shutdown(){}}const Xy="ConnectivityMonitor";class Yy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Xy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ve(Xy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nu=null;function Nd(){return nu===null?nu=(function(){return 268435456+Math.round(2147483648*Math.random())})():nu++,"0x"+nu.toString(16)}const td="RestConnection",YS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const a=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=a+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===bu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,a,s,o,c){const h=Nd(),m=this.zo(t,a.toUriEncodedString());ve(td,`Sending RPC '${t}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:b}=new URL(m),x=Bd(b);return this.Jo(t,m,p,s,x).then((T=>(ve(td,`Received RPC '${t}' ${h}: `,T),T)),(T=>{throw Pr(td,`RPC '${t}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(t,a,s,o,c,h){return this.Go(t,a,s,o,c)}jo(t,a,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach(((o,c)=>t[c]=o)),s&&s.headers.forEach(((o,c)=>t[c]=o))}zo(t,a){const s=YS[t];return`${this.Uo}/v1/${a}:${s}`}terminate(){}}class $S{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const ln="WebChannelConnection";class ZS extends KS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,a,s,o,c){const h=Nd();return new Promise(((m,p)=>{const b=new Vv;b.setWithCredentials(!0),b.listenOnce(jv.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case su.NO_ERROR:const T=b.getResponseJson();ve(ln,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(T)),m(T);break;case su.TIMEOUT:ve(ln,`RPC '${t}' ${h} timed out`),p(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case su.HTTP_ERROR:const S=b.getStatus();if(ve(ln,`RPC '${t}' ${h} failed with status:`,S,"response text:",b.getResponseText()),S>0){let I=b.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I?.error;if(V&&V.status&&V.message){const q=(function(k){const W=k.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN})(V.status);p(new pe(q,V.message))}else p(new pe(te.UNKNOWN,"Server responded with status "+b.getStatus()))}else p(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:t,streamId:h,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{ve(ln,`RPC '${t}' ${h} completed.`)}}));const x=JSON.stringify(o);ve(ln,`RPC '${t}' ${h} sending request:`,o),b.send(a,"POST",x,s,15)}))}T_(t,a,s){const o=Nd(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=Bv(),m=Lv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(p.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,a,s),p.encodeInitMessageHeaders=!0;const x=c.join("");ve(ln,`Creating RPC '${t}' stream ${o}: ${x}`,p);const T=h.createWebChannel(x,p);this.I_(T);let S=!1,I=!1;const V=new $S({Yo:U=>{I?ve(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,U):(S||(ve(ln,`Opening RPC '${t}' stream ${o} transport.`),T.open(),S=!0),ve(ln,`RPC '${t}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),q=(U,k,W)=>{U.listen(k,($=>{try{W($)}catch(se){setTimeout((()=>{throw se}),0)}}))};return q(T,eo.EventType.OPEN,(()=>{I||(ve(ln,`RPC '${t}' stream ${o} transport opened.`),V.o_())})),q(T,eo.EventType.CLOSE,(()=>{I||(I=!0,ve(ln,`RPC '${t}' stream ${o} transport closed`),V.a_(),this.E_(T))})),q(T,eo.EventType.ERROR,(U=>{I||(I=!0,Pr(ln,`RPC '${t}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),V.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),q(T,eo.EventType.MESSAGE,(U=>{if(!I){const k=U.data[0];it(!!k,16349);const W=k,$=W?.error||W[0]?.error;if($){ve(ln,`RPC '${t}' stream ${o} received error:`,$);const se=$.status;let ce=(function(w){const C=Ut[w];if(C!==void 0)return _1(C)})(se),le=$.message;ce===void 0&&(ce=te.INTERNAL,le="Unknown error status: "+se+" with message "+$.message),I=!0,V.a_(new pe(ce,le)),T.close()}else ve(ln,`RPC '${t}' stream ${o} received:`,k),V.u_(k)}})),q(m,kv.STAT_EVENT,(U=>{U.stat===gd.PROXY?ve(ln,`RPC '${t}' stream ${o} detected buffering proxy`):U.stat===gd.NOPROXY&&ve(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((a=>a===t))}}function nd(){return typeof document<"u"?document:null}function Uu(r){return new tS(r,!0)}class V1{constructor(t,a,s=1e3,o=1.5,c=6e4){this.Mi=t,this.timerId=a,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const a=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,a-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${a} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ky="PersistentStream";class j1{constructor(t,a,s,o,c,h,m,p){this.Mi=t,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V1(t,a)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,a){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():a&&a.code===te.RESOURCE_EXHAUSTED?(li(a.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):a&&a.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(a)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),a=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===a&&this.G_(s,o)}),(s=>{t((()=>{const o=new pe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,a){const s=this.W_(this.D_);this.stream=this.j_(t,a),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ve(Ky,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return a=>{this.Mi.enqueueAndForget((()=>this.D_===t?a():(ve(Ky,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JS extends j1{constructor(t,a,s,o,c,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,s,o,h),this.serializer=c}j_(t,a){return this.connection.T_("Listen",t,a)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const a=iS(this.serializer,t),s=(function(c){if(!("targetChange"in c))return De.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?De.min():h.readTime?ja(h.readTime):De.min()})(t);return this.listener.H_(a,s)}Y_(t){const a={};a.database=Ad(this.serializer),a.addTarget=(function(c,h){let m;const p=h.target;if(m=xd(p)?{documents:lS(c,p)}:{query:oS(c,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=E1(c,h.resumeToken);const b=Ed(c,h.expectedCount);b!==null&&(m.expectedCount=b)}else if(h.snapshotVersion.compareTo(De.min())>0){m.readTime=wu(c,h.snapshotVersion.toTimestamp());const b=Ed(c,h.expectedCount);b!==null&&(m.expectedCount=b)}return m})(this.serializer,t);const s=uS(this.serializer,t);s&&(a.labels=s),this.q_(a)}Z_(t){const a={};a.database=Ad(this.serializer),a.removeTarget=t,this.q_(a)}}class WS extends j1{constructor(t,a,s,o,c,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,s,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,a){return this.connection.T_("Write",t,a)}J_(t){return it(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,it(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){it(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const a=rS(t.writeResults,t.commitTime),s=ja(t.commitTime);return this.listener.na(s,a)}ra(){const t={};t.database=Ad(this.serializer),this.q_(t)}ea(t){const a={streamToken:this.lastStreamToken,writes:t.map((s=>sS(this.serializer,s)))};this.q_(a)}}class ew{}class tw extends ew{constructor(t,a,s,o){super(),this.authCredentials=t,this.appCheckCredentials=a,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,a,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(t,Sd(a,s),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(te.UNKNOWN,c.toString())}))}Ho(t,a,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Sd(a,s),o,h,m,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(te.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nw{constructor(t,a){this.asyncQueue=t,this.onlineStateHandler=a,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const a=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(a),this.aa=!1):ve("OnlineStateTracker",a)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bs="RemoteStore";class aw{constructor(t,a,s,o,c){this.localStore=t,this.datastore=a,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Gs(this)&&(ve(Bs,"Restarting streams for network reachability change."),await(async function(p){const b=Oe(p);b.Ea.add(4),await Eo(b),b.Ra.set("Unknown"),b.Ea.delete(4),await zu(b)})(this))}))})),this.Ra=new nw(s,o)}}async function zu(r){if(Gs(r))for(const t of r.da)await t(!0)}async function Eo(r){for(const t of r.da)await t(!1)}function k1(r,t){const a=Oe(r);a.Ia.has(t.targetId)||(a.Ia.set(t.targetId,t),im(a)?am(a):Jr(a).O_()&&nm(a,t))}function tm(r,t){const a=Oe(r),s=Jr(a);a.Ia.delete(t),s.O_()&&L1(a,t),a.Ia.size===0&&(s.O_()?s.L_():Gs(a)&&a.Ra.set("Unknown"))}function nm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(De.min())>0){const a=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(a)}Jr(r).Y_(t)}function L1(r,t){r.Va.Ue(t),Jr(r).Z_(t)}function am(r){r.Va=new ZE({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Jr(r).start(),r.Ra.ua()}function im(r){return Gs(r)&&!Jr(r).x_()&&r.Ia.size>0}function Gs(r){return Oe(r).Ea.size===0}function B1(r){r.Va=void 0}async function iw(r){r.Ra.set("Online")}async function sw(r){r.Ia.forEach(((t,a)=>{nm(r,t)}))}async function rw(r,t){B1(r),im(r)?(r.Ra.ha(t),am(r)):r.Ra.set("Unknown")}async function lw(r,t,a){if(r.Ra.set("Online"),t instanceof T1&&t.state===2&&t.cause)try{await(async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){ve(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Cu(r,s)}else if(t instanceof cu?r.Va.Ze(t):t instanceof x1?r.Va.st(t):r.Va.tt(t),!a.isEqual(De.min()))try{const s=await O1(r.localStore);a.compareTo(s)>=0&&await(function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach(((p,b)=>{if(p.resumeToken.approximateByteSize()>0){const x=c.Ia.get(b);x&&c.Ia.set(b,x.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,b)=>{const x=c.Ia.get(p);if(!x)return;c.Ia.set(p,x.withResumeToken(rn.EMPTY_BYTE_STRING,x.snapshotVersion)),L1(c,p);const T=new Hi(x.target,p,b,x.sequenceNumber);nm(c,T)})),c.remoteSyncer.applyRemoteEvent(m)})(r,a)}catch(s){ve(Bs,"Failed to raise snapshot:",s),await Cu(r,s)}}async function Cu(r,t,a){if(!$r(t))throw t;r.Ea.add(1),await Eo(r),r.Ra.set("Offline"),a||(a=()=>O1(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve(Bs,"Retrying IndexedDB access"),await a(),r.Ea.delete(1),await zu(r)}))}function U1(r,t){return t().catch((a=>Cu(r,a,t)))}async function Pu(r){const t=Oe(r),a=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Gd;for(;ow(t);)try{const o=await qS(t.localStore,s);if(o===null){t.Ta.length===0&&a.L_();break}s=o.batchId,cw(t,o)}catch(o){await Cu(t,o)}z1(t)&&P1(t)}function ow(r){return Gs(r)&&r.Ta.length<10}function cw(r,t){r.Ta.push(t);const a=es(r);a.O_()&&a.X_&&a.ea(t.mutations)}function z1(r){return Gs(r)&&!es(r).x_()&&r.Ta.length>0}function P1(r){es(r).start()}async function uw(r){es(r).ra()}async function fw(r){const t=es(r);for(const a of r.Ta)t.ea(a.mutations)}async function hw(r,t,a){const s=r.Ta.shift(),o=Yd.from(s,t,a);await U1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Pu(r)}async function dw(r,t){t&&es(r).X_&&await(async function(s,o){if((function(h){return YE(h)&&h!==te.ABORTED})(o.code)){const c=s.Ta.shift();es(s).B_(),await U1(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Pu(s)}})(r,t),z1(r)&&P1(r)}async function $y(r,t){const a=Oe(r);a.asyncQueue.verifyOperationInProgress(),ve(Bs,"RemoteStore received new credentials");const s=Gs(a);a.Ea.add(3),await Eo(a),s&&a.Ra.set("Unknown"),await a.remoteSyncer.handleCredentialChange(t),a.Ea.delete(3),await zu(a)}async function mw(r,t){const a=Oe(r);t?(a.Ea.delete(2),await zu(a)):t||(a.Ea.add(2),await Eo(a),a.Ra.set("Unknown"))}function Jr(r){return r.ma||(r.ma=(function(a,s,o){const c=Oe(a);return c.sa(),new JS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:iw.bind(null,r),t_:sw.bind(null,r),r_:rw.bind(null,r),H_:lw.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),im(r)?am(r):r.Ra.set("Unknown")):(await r.ma.stop(),B1(r))}))),r.ma}function es(r){return r.fa||(r.fa=(function(a,s,o){const c=Oe(a);return c.sa(),new WS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:uw.bind(null,r),r_:dw.bind(null,r),ta:fw.bind(null,r),na:hw.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Pu(r)):(await r.fa.stop(),r.Ta.length>0&&(ve(Bs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class sm{constructor(t,a,s,o,c){this.asyncQueue=t,this.timerId=a,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,a,s,o,c){const h=Date.now()+s,m=new sm(t,a,h,o,c);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(r,t){if(li("AsyncQueue",`${t}: ${r}`),$r(r))return new pe(te.UNAVAILABLE,`${t}: ${r}`);throw r}class Lr{static emptySet(t){return new Lr(t.comparator)}constructor(t){this.comparator=t?(a,s)=>t(a,s)||Ae.comparator(a.key,s.key):(a,s)=>Ae.comparator(a.key,s.key),this.keyedMap=to(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const a=this.keyedMap.get(t);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((a,s)=>(t(a),!1)))}add(t){const a=this.delete(t.key);return a.copy(a.keyedMap.insert(t.key,t),a.sortedSet.insert(t,null))}delete(t){const a=this.get(t);return a?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(a)):this}isEqual(t){if(!(t instanceof Lr)||this.size!==t.size)return!1;const a=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((a=>{t.push(a.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,a){const s=new Lr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=a,s}}class Zy{constructor(){this.ga=new xt(Ae.comparator)}track(t){const a=t.doc.key,s=this.ga.get(a);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(a,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(a,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(a,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(a):t.type===1&&s.type===2?this.ga=this.ga.insert(a,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):Me(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(a,t)}ya(){const t=[];return this.ga.inorderTraversal(((a,s)=>{t.push(s)})),t}}class Qr{constructor(t,a,s,o,c,h,m,p,b){this.query=t,this.docs=a,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=b}static fromInitialDocuments(t,a,s,o,c){const h=[];return a.forEach((m=>{h.push({type:0,doc:m})})),new Qr(t,a,Lr.emptySet(a),h,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const a=this.docChanges,s=t.docChanges;if(a.length!==s.length)return!1;for(let o=0;o<a.length;o++)if(a[o].type!==s[o].type||!a[o].doc.isEqual(s[o].doc))return!1;return!0}}class pw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class gw{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(a,s){const o=Oe(a),c=o.queries;o.queries=Jy(),c.forEach(((h,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function Jy(){return new zs((r=>l1(r)),Vu)}async function yw(r,t){const a=Oe(r);let s=3;const o=t.query;let c=a.queries.get(o);c?!c.ba()&&t.Da()&&(s=2):(c=new pw,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await a.onListen(o,!0);break;case 1:c.wa=await a.onListen(o,!1);break;case 2:await a.onFirstRemoteStoreListen(o)}}catch(h){const m=rm(h,`Initialization of query '${Or(t.query)}' failed`);return void t.onError(m)}a.queries.set(o,c),c.Sa.push(t),t.va(a.onlineState),c.wa&&t.Fa(c.wa)&&lm(a)}async function vw(r,t){const a=Oe(r),s=t.query;let o=3;const c=a.queries.get(s);if(c){const h=c.Sa.indexOf(t);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=t.Da()?0:1:!c.ba()&&t.Da()&&(o=2))}switch(o){case 0:return a.queries.delete(s),a.onUnlisten(s,!0);case 1:return a.queries.delete(s),a.onUnlisten(s,!1);case 2:return a.onLastRemoteStoreUnlisten(s);default:return}}function bw(r,t){const a=Oe(r);let s=!1;for(const o of t){const c=o.query,h=a.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&lm(a)}function _w(r,t,a){const s=Oe(r),o=s.queries.get(t);if(o)for(const c of o.Sa)c.onError(a);s.queries.delete(t)}function lm(r){r.Ca.forEach((t=>{t.next()}))}var Rd,Wy;(Wy=Rd||(Rd={})).Ma="default",Wy.Cache="cache";class xw{constructor(t,a,s){this.query=t,this.xa=a,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Qr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let a=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),a=!0):this.La(t,this.onlineState)&&(this.ka(t),a=!0),this.Na=t,a}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let a=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),a=!0),a}La(t,a){if(!t.fromCache||!this.Da())return!0;const s=a!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||a==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const a=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}ka(t){t=Qr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Rd.Cache}}class G1{constructor(t){this.key=t}}class q1{constructor(t){this.key=t}}class Tw{constructor(t,a){this.query=t,this.Ya=a,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=o1(t),this.tu=new Lr(this.eu)}get nu(){return this.Ya}ru(t,a){const s=a?a.iu:new Zy,o=a?a.tu:this.tu;let c=a?a.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((x,T)=>{const S=o.get(x),I=ju(this.query,T)?T:null,V=!!S&&this.mutatedKeys.has(S.key),q=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;S&&I?S.data.isEqual(I.data)?V!==q&&(s.track({type:3,doc:I}),U=!0):this.su(S,I)||(s.track({type:2,doc:I}),U=!0,(p&&this.eu(I,p)>0||b&&this.eu(I,b)<0)&&(m=!0)):!S&&I?(s.track({type:0,doc:I}),U=!0):S&&!I&&(s.track({type:1,doc:S}),U=!0,(p||b)&&(m=!0)),U&&(I?(h=h.add(I),c=q?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:h,iu:s,Cs:m,mutatedKeys:c}}su(t,a){return t.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(t,a,s,o){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((x,T)=>(function(I,V){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:U})}};return q(I)-q(V)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(s),o=o??!1;const m=a&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,b=p!==this.Za;return this.Za=p,h.length!==0||b?{snapshot:new Qr(this.query,t.tu,c,h,t.mutatedKeys,p===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((a=>this.Ya=this.Ya.add(a))),t.modifiedDocuments.forEach((a=>{})),t.removedDocuments.forEach((a=>this.Ya=this.Ya.delete(a))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const a=[];return t.forEach((s=>{this.Xa.has(s)||a.push(new q1(s))})),this.Xa.forEach((s=>{t.has(s)||a.push(new G1(s))})),a}cu(t){this.Ya=t.Qs,this.Xa=Qe();const a=this.ru(t.documents);return this.applyChanges(a,!0)}lu(){return Qr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const om="SyncEngine";class Ew{constructor(t,a,s){this.query=t,this.targetId=a,this.view=s}}class Sw{constructor(t){this.key=t,this.hu=!1}}class ww{constructor(t,a,s,o,c,h){this.localStore=t,this.remoteStore=a,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new zs((m=>l1(m)),Vu),this.Iu=new Map,this.Eu=new Set,this.du=new xt(Ae.comparator),this.Au=new Map,this.Ru=new Zd,this.Vu={},this.mu=new Map,this.fu=Fr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Aw(r,t,a=!0){const s=K1(r);let o;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await H1(s,t,a,!0),o}async function Cw(r,t){const a=K1(r);await H1(a,t,!0,!1)}async function H1(r,t,a,s){const o=await HS(r.localStore,Va(t)),c=o.targetId,h=r.sharedClientState.addLocalQueryTarget(c,a);let m;return s&&(m=await Nw(r,t,c,h==="current",o.resumeToken)),r.isPrimaryClient&&a&&k1(r.remoteStore,o),m}async function Nw(r,t,a,s,o){r.pu=(T,S,I)=>(async function(q,U,k,W){let $=U.view.ru(k);$.Cs&&($=await Fy(q.localStore,U.query,!1).then((({documents:M})=>U.view.ru(M,$))));const se=W&&W.targetChanges.get(U.targetId),ce=W&&W.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges($,q.isPrimaryClient,se,ce);return tv(q,U.targetId,le.au),le.snapshot})(r,T,S,I);const c=await Fy(r.localStore,t,!0),h=new Tw(t,c.Qs),m=h.ru(c.documents),p=To.createSynthesizedTargetChangeForCurrentChange(a,s&&r.onlineState!=="Offline",o),b=h.applyChanges(m,r.isPrimaryClient,p);tv(r,a,b.au);const x=new Ew(t,a,h);return r.Tu.set(t,x),r.Iu.has(a)?r.Iu.get(a).push(t):r.Iu.set(a,[t]),b.snapshot}async function Rw(r,t,a){const s=Oe(r),o=s.Tu.get(t),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((h=>!Vu(h,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Cd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),a&&tm(s.remoteStore,o.targetId),Md(s,o.targetId)})).catch(Kr)):(Md(s,o.targetId),await Cd(s.localStore,o.targetId,!0))}async function Mw(r,t){const a=Oe(r),s=a.Tu.get(t),o=a.Iu.get(s.targetId);a.isPrimaryClient&&o.length===1&&(a.sharedClientState.removeLocalQueryTarget(s.targetId),tm(a.remoteStore,s.targetId))}async function Iw(r,t,a){const s=Bw(r);try{const o=await(function(h,m){const p=Oe(h),b=gt.now(),x=m.reduce(((I,V)=>I.add(V.key)),Qe());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let V=oi(),q=Qe();return p.Ns.getEntries(I,x).next((U=>{V=U,V.forEach(((k,W)=>{W.isValidDocument()||(q=q.add(k))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,V))).next((U=>{T=U;const k=[];for(const W of m){const $=qE(W,T.get(W.key).overlayedDocument);$!=null&&k.push(new Ps(W.key,$,Jv($.value.mapValue),si.exists(!0)))}return p.mutationQueue.addMutationBatch(I,b,k,m)})).next((U=>{S=U;const k=U.applyToLocalDocumentSet(T,q);return p.documentOverlayCache.saveOverlays(I,U.batchId,k)}))})).then((()=>({batchId:S.batchId,changes:u1(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let b=h.Vu[h.currentUser.toKey()];b||(b=new xt(Fe)),b=b.insert(m,p),h.Vu[h.currentUser.toKey()]=b})(s,o.batchId,a),await So(s,o.changes),await Pu(s.remoteStore)}catch(o){const c=rm(o,"Failed to persist write");a.reject(c)}}async function F1(r,t){const a=Oe(r);try{const s=await PS(a.localStore,t);t.targetChanges.forEach(((o,c)=>{const h=a.Au.get(c);h&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?it(h.hu,14607):o.removedDocuments.size>0&&(it(h.hu,42227),h.hu=!1))})),await So(a,s,t)}catch(s){await Kr(s)}}function ev(r,t,a){const s=Oe(r);if(s.isPrimaryClient&&a===0||!s.isPrimaryClient&&a===1){const o=[];s.Tu.forEach(((c,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=Oe(h);p.onlineState=m;let b=!1;p.queries.forEach(((x,T)=>{for(const S of T.Sa)S.va(m)&&(b=!0)})),b&&lm(p)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Dw(r,t,a){const s=Oe(r);s.sharedClientState.updateQueryState(t,"rejected",a);const o=s.Au.get(t),c=o&&o.key;if(c){let h=new xt(Ae.comparator);h=h.insert(c,cn.newNoDocument(c,De.min()));const m=Qe().add(c),p=new Bu(De.min(),new Map,new xt(Fe),h,m);await F1(s,p),s.du=s.du.remove(c),s.Au.delete(t),cm(s)}else await Cd(s.localStore,t,!1).then((()=>Md(s,t,a))).catch(Kr)}async function Ow(r,t){const a=Oe(r),s=t.batch.batchId;try{const o=await zS(a.localStore,t);X1(a,s,null),Q1(a,s),a.sharedClientState.updateMutationState(s,"acknowledged"),await So(a,o)}catch(o){await Kr(o)}}async function Vw(r,t,a){const s=Oe(r);try{const o=await(function(h,m){const p=Oe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let x;return p.mutationQueue.lookupMutationBatch(b,m).next((T=>(it(T!==null,37113),x=T.keys(),p.mutationQueue.removeMutationBatch(b,T)))).next((()=>p.mutationQueue.performConsistencyCheck(b))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(b,x,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,x))).next((()=>p.localDocuments.getDocuments(b,x)))}))})(s.localStore,t);X1(s,t,a),Q1(s,t),s.sharedClientState.updateMutationState(t,"rejected",a),await So(s,o)}catch(o){await Kr(o)}}function Q1(r,t){(r.mu.get(t)||[]).forEach((a=>{a.resolve()})),r.mu.delete(t)}function X1(r,t,a){const s=Oe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(t);c&&(a?c.reject(a):c.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function Md(r,t,a=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),a&&r.Pu.yu(s,a);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||Y1(r,s)}))}function Y1(r,t){r.Eu.delete(t.path.canonicalString());const a=r.du.get(t);a!==null&&(tm(r.remoteStore,a),r.du=r.du.remove(t),r.Au.delete(a),cm(r))}function tv(r,t,a){for(const s of a)s instanceof G1?(r.Ru.addReference(s.key,t),jw(r,s)):s instanceof q1?(ve(om,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||Y1(r,s.key)):Me(19791,{wu:s})}function jw(r,t){const a=t.key,s=a.path.canonicalString();r.du.get(a)||r.Eu.has(s)||(ve(om,"New document in limbo: "+a),r.Eu.add(s),cm(r))}function cm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const a=new Ae(pt.fromString(t)),s=r.fu.next();r.Au.set(s,new Sw(a)),r.du=r.du.insert(a,s),k1(r.remoteStore,new Hi(Va(s1(a.path)),s,"TargetPurposeLimboResolution",Iu.ce))}}async function So(r,t,a){const s=Oe(r),o=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{h.push(s.pu(p,t,a).then((b=>{if((b||a)&&s.isPrimaryClient){const x=b?!b.fromCache:a?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(b){o.push(b);const x=Wd.As(p.targetId,b);c.push(x)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,b){const x=Oe(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ne.forEach(b,(S=>ne.forEach(S.Es,(I=>x.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>ne.forEach(S.ds,(I=>x.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!$r(T))throw T;ve(em,"Failed to update sequence numbers: "+T)}for(const T of b){const S=T.targetId;if(!T.fromCache){const I=x.Ms.get(S),V=I.snapshotVersion,q=I.withLastLimboFreeSnapshotVersion(V);x.Ms=x.Ms.insert(S,q)}}})(s.localStore,c))}async function kw(r,t){const a=Oe(r);if(!a.currentUser.isEqual(t)){ve(om,"User change. New user:",t.toKey());const s=await D1(a.localStore,t);a.currentUser=t,(function(c,h){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new pe(te.CANCELLED,h))}))})),c.mu.clear()})(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await So(a,s.Ls)}}function Lw(r,t){const a=Oe(r),s=a.Au.get(t);if(s&&s.hu)return Qe().add(s.key);{let o=Qe();const c=a.Iu.get(t);if(!c)return o;for(const h of c){const m=a.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function K1(r){const t=Oe(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dw.bind(null,t),t.Pu.H_=bw.bind(null,t.eventManager),t.Pu.yu=_w.bind(null,t.eventManager),t}function Bw(r){const t=Oe(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ow.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vw.bind(null,t),t}class Nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,a){return null}Mu(t,a){return null}vu(t){return US(this.persistence,new kS,t.initialUser,this.serializer)}Cu(t){return new I1(Jd.mi,this.serializer)}Du(t){return new QS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nu.provider={build:()=>new Nu};class Uw extends Nu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,a){it(this.persistence.referenceDelegate instanceof Au,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xS(s,t.asyncQueue,a)}Cu(t){const a=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new I1((s=>Au.mi(s,a)),this.serializer)}}class Id{async initialize(t,a){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ev(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kw.bind(null,this.syncEngine),await mw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new gw})()}createDatastore(t){const a=Uu(t.databaseInfo.databaseId),s=(function(c){return new ZS(c)})(t.databaseInfo);return(function(c,h,m,p){return new tw(c,h,m,p)})(t.authCredentials,t.appCheckCredentials,s,a)}createRemoteStore(t){return(function(s,o,c,h,m){return new aw(s,o,c,h,m)})(this.localStore,this.datastore,t.asyncQueue,(a=>ev(this.syncEngine,a,0)),(function(){return Yy.v()?new Yy:new XS})())}createSyncEngine(t,a){return(function(o,c,h,m,p,b,x){const T=new ww(o,c,h,m,p,b);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,a)}async terminate(){await(async function(a){const s=Oe(a);ve(Bs,"RemoteStore shutting down."),s.Ea.add(5),await Eo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Id.provider={build:()=>new Id};class zw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):li("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,a){setTimeout((()=>{this.muted||t(a)}),0)}}const ts="FirestoreClient";class Pw{constructor(t,a,s,o,c){this.authCredentials=t,this.appCheckCredentials=a,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async h=>{ve(ts,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ve(ts,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(a){const s=rm(a,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function ad(r,t){r.asyncQueue.verifyOperationInProgress(),ve(ts,"Initializing OfflineComponentProvider");const a=r.configuration;await t.initialize(a);let s=a.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await D1(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function nv(r,t){r.asyncQueue.verifyOperationInProgress();const a=await Gw(r);ve(ts,"Initializing OnlineComponentProvider"),await t.initialize(a,r.configuration),r.setCredentialChangeListener((s=>$y(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>$y(t.remoteStore,o))),r._onlineComponents=t}async function Gw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ts,"Using user provided OfflineComponentProvider");try{await ad(r,r._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(a))throw a;Pr("Error using user provided cache. Falling back to memory cache: "+a),await ad(r,new Nu)}}else ve(ts,"Using default OfflineComponentProvider"),await ad(r,new Uw(void 0));return r._offlineComponents}async function $1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ts,"Using user provided OnlineComponentProvider"),await nv(r,r._uninitializedComponentsProvider._online)):(ve(ts,"Using default OnlineComponentProvider"),await nv(r,new Id))),r._onlineComponents}function qw(r){return $1(r).then((t=>t.syncEngine))}async function Hw(r){const t=await $1(r),a=t.eventManager;return a.onListen=Aw.bind(null,t.syncEngine),a.onUnlisten=Rw.bind(null,t.syncEngine),a.onFirstRemoteStoreListen=Cw.bind(null,t.syncEngine),a.onLastRemoteStoreUnlisten=Mw.bind(null,t.syncEngine),a}function Fw(r,t,a={}){const s=new Yi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,p,b){const x=new zw({next:S=>{x.Nu(),h.enqueueAndForget((()=>vw(c,T))),S.fromCache&&p.source==="server"?b.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(S)},error:S=>b.reject(S)}),T=new xw(m,x,{includeMetadataChanges:!0,qa:!0});return yw(c,T)})(await Hw(r),r.asyncQueue,t,a,s))),s.promise}function Z1(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const av=new Map;const J1="firestore.googleapis.com",iv=!0;class sv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J1,this.ssl=iv}else this.host=t.host,this.ssl=t.ssl??iv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=M1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<bS)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}nE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z1(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Gu{constructor(t,a,s,o){this._authCredentials=t,this._appCheckCredentials=a,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new QT;switch(s.type){case"firstParty":return new $T(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(a){const s=av.get(a);s&&(ve("ComponentProvider","Removing Datastore"),av.delete(a),s.terminate())})(this),Promise.resolve()}}function Qw(r,t,a,s={}){r=yu(r,Gu);const o=Bd(t),c=r._getSettings(),h={...c,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${a}`;o&&(b2(`https://${m}`),E2("Firestore",!0)),c.host!==J1&&c.host!==m&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:s};if(!mu(p,h)&&(r._setSettings(p),s.mockUserToken)){let b,x;if(typeof s.mockUserToken=="string")b=s.mockUserToken,x=on.MOCK_USER;else{b=_2(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(T)}r._authCredentials=new XT(new zv(b,x))}}class ns{constructor(t,a,s){this.converter=a,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ns(this.firestore,t,this._query)}}class Kt{constructor(t,a,s){this.converter=a,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kt(this.firestore,t,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,a,s){if(_o(a,Kt._jsonSchema))return new Kt(t,s||null,new Ae(pt.fromString(a.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Pt("string",Kt._jsonSchemaVersion),referencePath:Pt("string")};class Ki extends ns{constructor(t,a,s){super(t,a,s1(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new Ae(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function W1(r,t,...a){if(r=zr(r),Pv("collection","path",t),r instanceof Gu){const s=pt.fromString(t,...a);return vy(s),new Ki(r,null,s)}{if(!(r instanceof Kt||r instanceof Ki))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return vy(s),new Ki(r.firestore,null,s)}}function Xw(r,t,...a){if(r=zr(r),arguments.length===1&&(t=Pd.newId()),Pv("doc","path",t),r instanceof Gu){const s=pt.fromString(t,...a);return yy(s),new Kt(r,null,new Ae(s))}{if(!(r instanceof Kt||r instanceof Ki))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return yy(s),new Kt(r.firestore,r instanceof Ki?r.converter:null,new Ae(s))}}const rv="AsyncQueue";class lv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V1(this,"async_queue_retry"),this._c=()=>{const s=nd();s&&ve(rv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const a=nd();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const a=nd();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const a=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(a.resolve,a.reject),a.promise))).then((()=>a.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!$r(t))throw t;ve(rv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const a=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",ov(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=a,a}enqueueAfterDelay(t,a,s){this.uc(),this.oc.indexOf(t)>-1&&(a=0);const o=sm.createAndSchedule(this,t,a,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:ov(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const a of this.tc)if(a.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((a,s)=>a.targetTimeMs-s.targetTimeMs));for(const a of this.tc)if(a.skipDelay(),t!=="all"&&a.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const a=this.tc.indexOf(t);this.tc.splice(a,1)}}function ov(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class um extends Gu{constructor(t,a,s,o){super(t,a,s,o),this.type="firestore",this._queue=new lv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lv(t),this._firestoreClient=void 0,await t}}}function Yw(r,t){const a=typeof r=="object"?r:OT(),s=typeof r=="string"?r:bu,o=NT(a,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=y2("firestore");c&&Qw(o,...c)}return o}function eb(r){if(r._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Kw(r),r._firestoreClient}function Kw(r){const t=r._freezeSettings(),a=(function(o,c,h,m){return new mE(o,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Z1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new Pw(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qn(rn.fromBase64String(t))}catch(a){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(t){return new Qn(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(_o(t,Qn._jsonSchema))return Qn.fromBase64String(t.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Pt("string",Qn._jsonSchemaVersion),bytes:Pt("string")};class fm{constructor(...t){for(let a=0;a<t.length;++a)if(t[a].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class tb{constructor(t){this._methodName=t}}class ka{constructor(t,a){if(!isFinite(t)||t<-90||t>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(a)||a<-180||a>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=t,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Fe(this._lat,t._lat)||Fe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ka._jsonSchemaVersion}}static fromJSON(t){if(_o(t,ka._jsonSchema))return new ka(t.latitude,t.longitude)}}ka._jsonSchemaVersion="firestore/geoPoint/1.0",ka._jsonSchema={type:Pt("string",ka._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};class La{constructor(t){this._values=(t||[]).map((a=>a))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(_o(t,La._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((a=>typeof a=="number")))return new La(t.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:Pt("string",La._jsonSchemaVersion),vectorValues:Pt("object")};const $w=/^__.*__$/;class Zw{constructor(t,a,s){this.data=t,this.fieldMask=a,this.fieldTransforms=s}toMutation(t,a){return this.fieldMask!==null?new Ps(t,this.data,this.fieldMask,a,this.fieldTransforms):new xo(t,this.data,a,this.fieldTransforms)}}function nb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:r})}}class hm{constructor(t,a,s,o,c,h){this.settings=t,this.databaseId=a,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new hm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.gc(t),s}yc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ru(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((a=>t.isPrefixOf(a)))!==void 0||this.fieldTransforms.find((a=>t.isPrefixOf(a.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(nb(this.Ac)&&$w.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Jw{constructor(t,a,s){this.databaseId=t,this.ignoreUndefinedProperties=a,this.serializer=s||Uu(t)}Cc(t,a,s,o=!1){return new hm({Ac:t,methodName:a,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ab(r){const t=r._freezeSettings(),a=Uu(r._databaseId);return new Jw(r._databaseId,!!t.ignoreUndefinedProperties,a)}function Ww(r,t,a,s,o,c={}){const h=r.Cc(c.merge||c.mergeFields?2:0,t,a,o);rb("Data must be an object, but it was:",h,s);const m=ib(s,h);let p,b;if(c.merge)p=new la(h.fieldMask),b=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const T of c.mergeFields){const S=tA(t,T,a);if(!h.contains(S))throw new pe(te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);aA(x,S)||x.push(S)}p=new la(x),b=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,b=h.fieldTransforms;return new Zw(new Fn(m),p,b)}function eA(r,t,a,s=!1){return dm(a,r.Cc(s?4:3,t))}function dm(r,t){if(sb(r=zr(r)))return rb("Unsupported field value:",t,r),ib(r,t);if(r instanceof tb)return(function(s,o){if(!nb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let h=0;for(const m of s){let p=dm(m,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),h++}return{arrayValue:{values:c}}})(r,t)}return(function(s,o){if((s=zr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LE(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=gt.fromDate(s);return{timestampValue:wu(o.serializer,c)}}if(s instanceof gt){const c=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:wu(o.serializer,c)}}if(s instanceof ka)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qn)return{bytesValue:E1(o.serializer,s._byteString)};if(s instanceof Kt){const c=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$d(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof La)return(function(h,m){return{mapValue:{fields:{[$v]:{stringValue:Zv},[_u]:{arrayValue:{values:h.toArray().map((b=>{if(typeof b!="number")throw m.Sc("VectorValues must only contain numeric values.");return Xd(m.serializer,b)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Mu(s)}`)})(r,t)}function ib(r,t){const a={};return Hv(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Us(r,((s,o)=>{const c=dm(o,t.mc(s));c!=null&&(a[s]=c)})),{mapValue:{fields:a}}}function sb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof ka||r instanceof Qn||r instanceof Kt||r instanceof tb||r instanceof La)}function rb(r,t,a){if(!sb(a)||!Gv(a)){const s=Mu(a);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function tA(r,t,a){if((t=zr(t))instanceof fm)return t._internalPath;if(typeof t=="string")return lb(r,t);throw Ru("Field path arguments must be of type string or ",r,!1,void 0,a)}const nA=new RegExp("[~\\*/\\[\\]]");function lb(r,t,a){if(t.search(nA)>=0)throw Ru(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,a);try{return new fm(...t.split("."))._internalPath}catch{throw Ru(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,a)}}function Ru(r,t,a,s,o){const c=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;a&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||h)&&(p+=" (found",c&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new pe(te.INVALID_ARGUMENT,m+r+p)}function aA(r,t){return r.some((a=>a.isEqual(t)))}class ob{constructor(t,a,s,o,c){this._firestore=t,this._userDataWriter=a,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new iA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const a=this._document.data.field(qu("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a)}}}class iA extends ob{data(){return super.data()}}function qu(r,t){return typeof t=="string"?lb(r,t):t instanceof fm?t._internalPath:t._delegate._internalPath}function sA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mm{}class pm extends mm{}function cv(r,t,...a){let s=[];t instanceof mm&&s.push(t),s=s.concat(a),(function(c){const h=c.filter((p=>p instanceof gm)).length,m=c.filter((p=>p instanceof Hu)).length;if(h>1||h>0&&m>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Hu extends pm{constructor(t,a,s){super(),this._field=t,this._op=a,this._value=s,this.type="where"}static _create(t,a,s){return new Hu(t,a,s)}_apply(t){const a=this._parse(t);return cb(t._query,a),new ns(t.firestore,t.converter,Td(t._query,a))}_parse(t){const a=ab(t.firestore);return(function(c,h,m,p,b,x,T){let S;if(b.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){mv(T,x);const V=[];for(const q of T)V.push(dv(p,c,q));S={arrayValue:{values:V}}}else S=dv(p,c,T)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||mv(T,x),S=eA(m,h,T,x==="in"||x==="not-in");return zt.create(b,x,S)})(t._query,"where",a,t.firestore._databaseId,this._field,this._op,this._value)}}function uv(r,t,a){const s=t,o=qu("where",r);return Hu._create(o,s,a)}class gm extends mm{constructor(t,a){super(),this.type=t,this._queryConstraints=a}static _create(t,a){return new gm(t,a)}_parse(t){const a=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return a.length===1?a[0]:oa.create(a,this._getOperator())}_apply(t){const a=this._parse(t);return a.getFilters().length===0?t:((function(o,c){let h=o;const m=c.getFlattenedFilters();for(const p of m)cb(h,p),h=Td(h,p)})(t._query,a),new ns(t.firestore,t.converter,Td(t._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ym extends pm{constructor(t,a){super(),this._field=t,this._direction=a,this.type="orderBy"}static _create(t,a){return new ym(t,a)}_apply(t){const a=(function(o,c,h){if(o.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(c,h)})(t._query,this._field,this._direction);return new ns(t.firestore,t.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Zr(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,a))}}function fv(r,t="asc"){const a=t,s=qu("orderBy",r);return ym._create(s,a)}class vm extends pm{constructor(t,a,s){super(),this.type=t,this._limit=a,this._limitType=s}static _create(t,a,s){return new vm(t,a,s)}_apply(t){return new ns(t.firestore,t.converter,Tu(t._query,this._limit,this._limitType))}}function hv(r){return aE("limit",r),vm._create("limit",r,"F")}function dv(r,t,a){if(typeof(a=zr(a))=="string"){if(a==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r1(t)&&a.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const s=t.path.child(pt.fromString(a));if(!Ae.isDocumentKey(s))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ay(r,new Ae(s))}if(a instanceof Kt)return Ay(r,a._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mu(a)}.`)}function mv(r,t){if(!Array.isArray(r)||r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function cb(r,t){const a=(function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(a!==null)throw a===t.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${a.toString()}' filters.`)}class rA{convertValue(t,a="none"){switch(Wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,a);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,a);case 11:return this.convertObject(t.mapValue,a);case 10:return this.convertVectorValue(t.mapValue);default:throw Me(62114,{value:t})}}convertObject(t,a){return this.convertObjectMap(t.fields,a)}convertObjectMap(t,a="none"){const s={};return Us(t,((o,c)=>{s[o]=this.convertValue(c,a)})),s}convertVectorValue(t){const a=t.fields?.[_u].arrayValue?.values?.map((s=>Rt(s.doubleValue)));return new La(a)}convertGeoPoint(t){return new ka(Rt(t.latitude),Rt(t.longitude))}convertArray(t,a){return(t.values||[]).map((s=>this.convertValue(s,a)))}convertServerTimestamp(t,a){switch(a){case"previous":const s=Ou(t);return s==null?null:this.convertValue(s,a);case"estimate":return this.convertTimestamp(mo(t));default:return null}}convertTimestamp(t){const a=Zi(t);return new gt(a.seconds,a.nanos)}convertDocumentKey(t,a){const s=pt.fromString(t);it(R1(s),9688,{name:t});const o=new po(s.get(1),s.get(3)),c=new Ae(s.popFirst(5));return o.isEqual(a)||li(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),c}}function lA(r,t,a){let s;return s=r?r.toFirestore(t):t,s}class au{constructor(t,a){this.hasPendingWrites=t,this.fromCache=a}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Br extends ob{constructor(t,a,s,o,c,h){super(t,a,s,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const a=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,a={}){if(this._document){const s=this._document.data.field(qu("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,a.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,a={};return a.type=Br._jsonSchemaVersion,a.bundle="",a.bundleSource="DocumentSnapshot",a.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?a:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),a.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),a)}}Br._jsonSchemaVersion="firestore/documentSnapshot/1.0",Br._jsonSchema={type:Pt("string",Br._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class uu extends Br{data(t={}){return super.data(t)}}class Ur{constructor(t,a,s,o){this._firestore=t,this._userDataWriter=a,this._snapshot=o,this.metadata=new au(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((a=>t.push(a))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,a){this._snapshot.docs.forEach((s=>{t.call(a,new uu(this._firestore,this._userDataWriter,s.key,s,new au(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const a=!!t.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new uu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new au(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new uu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new au(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,x=-1;return m.type!==0&&(b=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),x=h.indexOf(m.doc.key)),{type:oA(m.type),doc:p,oldIndex:b,newIndex:x}}))}})(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ur._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Pd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const a=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(a.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function oA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:r})}}Ur._jsonSchemaVersion="firestore/querySnapshot/1.0",Ur._jsonSchema={type:Pt("string",Ur._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class cA extends rA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qn(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,a)}}function uA(r){r=yu(r,ns);const t=yu(r.firestore,um),a=eb(t),s=new cA(t);return sA(r._query),Fw(a,r._query).then((o=>new Ur(t,s,r,o)))}function fA(r,t){const a=yu(r.firestore,um),s=Xw(r),o=lA(r.converter,t);return hA(a,[Ww(ab(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,si.exists(!1))]).then((()=>s))}function hA(r,t){return(function(s,o){const c=new Yi;return s.asyncQueue.enqueueAndForget((async()=>Iw(await qw(s),o,c))),c.promise})(eb(r),t)}(function(t,a=!0){(function(o){Yr=o})(DT),gu(new uo("firestore",((s,{instanceIdentifier:o,options:c})=>{const h=s.getProvider("app").getImmediate(),m=new um(new YT(s.getProvider("auth-internal")),new ZT(h,s.getProvider("app-check-internal")),(function(b,x){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(b.options.projectId,x)})(h,o),h);return c={useFetchStreams:a,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),kr(dy,my,t),kr(dy,my,"esm2020")})();const dA={apiKey:"AIzaSyBKsN2qQ7oc3l5MrNXpWtHnxLlMqM3PFSA",authDomain:"gugudan-e4c77.firebaseapp.com",projectId:"gugudan-e4c77",storageBucket:"gugudan-e4c77.firebasestorage.app",messagingSenderId:"798815663534",appId:"1:798815663534:web:9e4aacdbd8acfc36c6fc67"},mA=Mv(dA),ub=Yw(mA),Dd="chromafall_local_rankings";function pA(r){try{const t=localStorage.getItem(Dd),a=t?JSON.parse(t):[],s={...r,id:r.id||`local_${Date.now()}`,createdAt:new Date().toISOString()};a.push(s),a.sort((c,h)=>h.score-c.score);const o=a.slice(0,100);localStorage.setItem(Dd,JSON.stringify(o))}catch(t){console.error("   :",t)}}function fb(r){try{const t=localStorage.getItem(Dd);return t?JSON.parse(t).filter(s=>s.gameMode===r).sort((s,o)=>o.score-s.score):[]}catch(t){return console.error("   :",t),[]}}function hb(){let r=localStorage.getItem("chromafall_player_id");return r||(r="player_"+Math.random().toString(36).substring(2,15)+Date.now().toString(36),localStorage.setItem("chromafall_player_id",r)),r}function db(){return localStorage.getItem("chromafall_player_name")||"Player"}function mb(r){localStorage.setItem("chromafall_player_name",r)}async function gA(r){const t={...r,id:`local_${Date.now()}`,createdAt:new Date().toISOString()};pA(t);try{return(await fA(W1(ub,"rankings"),{...r,createdAt:gt.now()})).id}catch(a){return console.error("Firebase    ( ):",a),t.id||null}}async function pb(r="all",t="classic",a=100){const s=fb(t);try{let o;const c=W1(ub,"rankings");r==="all"?o=cv(c,uv("gameMode","==",t),fv("score","desc"),hv(a)):o=cv(c,uv("gameMode","==",t),fv("score","desc"),hv(a*2));const h=await uA(o),m=[];h.forEach(T=>{m.push({id:T.id,...T.data()})});let p=m;if(r==="daily"||r==="weekly"){const T=new Date,S=new Date;r==="daily"||S.setDate(S.getDate()-7),S.setHours(0,0,0,0),p=m.filter(I=>{const V=I.createdAt;let q;if(V instanceof Date)q=V;else if(typeof V=="string")q=new Date(V);else if(V&&typeof V.toDate=="function")q=V.toDate();else return!1;return q>=S})}const b=new Map;return p.forEach(T=>{const S=`${T.playerId}_${T.score}_${T.gameMode}`;b.has(S)||b.set(S,T)}),s.forEach(T=>{if(r!=="all"){const I=new Date;if(r==="daily"||I.setDate(I.getDate()-7),I.setHours(0,0,0,0),new Date(T.createdAt)<I)return}const S=`${T.playerId}_${T.score}_${T.gameMode}`;b.has(S)||b.set(S,T)}),Array.from(b.values()).sort((T,S)=>S.score-T.score).slice(0,a)}catch(o){return console.error("Firebase   ,   :",o),s.slice(0,a)}}async function yA(r,t="classic"){try{const s=(await pb("all",t,200)).findIndex(o=>o.playerId===r);return s>=0?s+1:-1}catch(a){console.error("   :",a);const o=fb(t).findIndex(c=>c.playerId===r);return o>=0?o+1:-1}}function vA({onRestart:r,onMainMenu:t,onContinue:a}){const{score:s,level:o,maxCombo:c,chainCount:h,gameTime:m,continues:p,statistics:b,gameMode:x}=Pe(),{currency:T,addPersonalBest:S}=Xn(),{playSound:I}=ca(),[V,q]=re.useState(!1),[U,k]=re.useState(!1),[W,$]=re.useState(db()),[se,ce]=re.useState(W==="Player"),[le,M]=re.useState(W),w=s>b.highScore-s,C=p<3,N=X=>{const oe=Math.floor(X/60),xe=X%60;return`${oe} ${xe}`},O=X=>X.toLocaleString(),B=async()=>{if(!(V||U||s===0)){le.trim()&&le!==W&&(mb(le.trim()),$(le.trim())),k(!0);try{await gA({playerId:hb(),playerName:le.trim()||W,score:s,level:o,maxCombo:c,maxChain:h,gameMode:x,playTime:m})&&(q(!0),I("rewardGet"))}catch(X){console.error("  :",X)}finally{k(!1),ce(!1)}}};re.useEffect(()=>{I("gameOver"),w&&s>0&&setTimeout(()=>{I("highScore"),kd({particleCount:100,spread:70,origin:{y:.6}})},500),S("classic",s),s>0&&W!=="Player"&&B()},[]);const R=()=>s>=1e6?{grade:"S+",color:"text-purple-400"}:s>=5e5?{grade:"S",color:"text-yellow-400"}:s>=2e5?{grade:"A",color:"text-green-400"}:s>=1e5?{grade:"B",color:"text-blue-400"}:s>=5e4?{grade:"C",color:"text-gray-300"}:{grade:"D",color:"text-gray-500"},{grade:Be,color:tt}=R();return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,y:50},animate:{scale:1,y:0},transition:{delay:.2,type:"spring"},children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"GAME OVER"}),w&&s>0&&g.jsx(ie.p,{className:"text-yellow-400 font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:"NEW HIGH SCORE!"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-gray-400 text-sm",children:"SCORE"}),g.jsx(ie.p,{className:"text-4xl font-bold text-white",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:O(s)})]}),g.jsx(ie.div,{className:`text-6xl font-bold ${tt}`,initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.4,type:"spring"},children:Be})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"LEVEL"}),g.jsx("p",{className:"text-xl font-bold text-game-accent",children:o})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX COMBO"}),g.jsxs("p",{className:"text-xl font-bold text-orange-400",children:["x",c]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX CHAIN"}),g.jsxs("p",{className:"text-xl font-bold text-purple-400",children:[h,""]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"TIME"}),g.jsx("p",{className:"text-xl font-bold text-gray-300",children:N(m)})]})]}),g.jsxs("div",{className:"space-y-3",children:[C&&a&&g.jsxs(ie.button,{className:`w-full py-4 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white flex items-center justify-center gap-2\r
                         hover:from-green-400 hover:to-green-500 transition-all`,whileTap:{scale:.98},onClick:a,children:[g.jsx("span",{children:""}),g.jsx("span",{children:"  "}),g.jsxs("span",{className:"text-sm opacity-70",children:["(",3-p," )"]})]}),g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:r,children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:" "}),g.jsxs(ie.button,{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white flex items-center justify-center gap-2\r
                       hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:()=>{I("rewardGet")},children:[g.jsx("span",{children:""}),g.jsx("span",{children:"   2"})]})]}),s>0&&!V&&g.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl border border-purple-500/30",children:[g.jsx("p",{className:"text-center text-sm text-gray-300 mb-2",children:" "}),se?g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:le,onChange:X=>M(X.target.value),placeholder:" ",maxLength:12,className:"flex-1 bg-black/50 border border-purple-500 rounded-lg px-3 py-2 text-white text-sm",autoFocus:!0,onKeyDown:X=>X.key==="Enter"&&B()}),g.jsx("button",{onClick:B,disabled:U||!le.trim(),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:U?"...":""})]}):g.jsx("button",{onClick:B,disabled:U,className:"w-full py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:U?" ...":`${W} `})]}),V&&g.jsx("div",{className:"mt-4 p-3 bg-green-900/30 rounded-xl border border-green-500/30 text-center",children:g.jsx("span",{className:"text-green-400 font-bold",children:" !"})}),g.jsx("div",{className:"mt-4 text-center",children:g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>{const X=`ChromaFall ${O(s)} !  ${o},  ${c} !`;navigator.share?navigator.share({title:"ChromaFall",text:X}):(navigator.clipboard.writeText(X),alert("  !"))},children:"  "})})]})})}const bA=[{icon:"",name:"",desc:"   3x3    ",color:"from-red-500 to-orange-500"},{icon:"",name:"",desc:"       ",color:"from-yellow-400 to-yellow-600"},{icon:"",name:"",desc:"     +    ",color:"from-green-400 to-green-600"},{icon:"",name:"",desc:"2   ( )",color:"from-cyan-300 to-blue-500"},{icon:"",name:"",desc:" !      ",color:"from-gray-400 to-gray-600"},{icon:"",name:"",desc:"      ",color:"from-purple-400 to-pink-500"},{icon:"",name:"",desc:"      ",color:"from-pink-400 to-rose-500"},{icon:"2",name:"",desc:"   2 ",color:"from-amber-400 to-orange-500"},{icon:"",name:"",desc:"    ",color:"from-red-400 via-yellow-400 to-blue-400"}],_A=[{key:" ",desc:"  "},{key:"",desc:"  ( )"},{key:"Space",desc:"  (  + )"},{key:"Z / ",desc:"  ()"},{key:"P / ESC",desc:""}],xA=[" 4      ()","       "," (Space)     ","       ","    3!"];function TA({onClose:r}){const[t,a]=re.useState("blocks");return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:s=>s.stopPropagation(),children:[g.jsxs("div",{className:"bg-gradient-to-r from-game-accent to-purple-600 p-4 flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),g.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30",children:""})]}),g.jsx("div",{className:"flex border-b border-gray-700",children:[{id:"blocks",label:" "},{id:"controls",label:""},{id:"tips",label:""}].map(s=>g.jsx("button",{onClick:()=>a(s.id),className:`flex-1 py-3 text-sm font-bold transition-colors ${t===s.id?"text-game-accent border-b-2 border-game-accent bg-game-accent/10":"text-gray-400 hover:text-white"}`,children:s.label},s.id))}),g.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:g.jsxs(un,{mode:"wait",children:[t==="blocks"&&g.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:bA.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center text-2xl`,children:s.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-white",children:s.name}),g.jsx("p",{className:"text-xs text-gray-400",children:s.desc})]})]},o))},"blocks"),t==="controls"&&g.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[g.jsx("p",{className:"text-gray-400 text-sm mb-4",children:" &  "}),_A.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-4 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:"w-20 text-center",children:g.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded text-white font-mono text-sm",children:s.key})}),g.jsx("p",{className:"text-white flex-1",children:s.desc})]},o)),g.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:g.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",g.jsx("strong",{children:":"}),"      "]})})]},"controls"),t==="tips"&&g.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[xA.map((s,o)=>g.jsx("div",{className:"bg-black/30 rounded-lg p-4 text-white",children:s},o)),g.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg border border-orange-500/30",children:[g.jsx("h4",{className:"font-bold text-orange-400 mb-2",children:"  "}),g.jsxs("p",{className:"text-sm text-gray-300",children:["     !     ",g.jsx("strong",{className:"text-orange-400",children:"3"})," !"]})]})]},"tips")]})})]})})}function EA({onResume:r,onRestart:t,onSettings:a,onMainMenu:s}){const{score:o,level:c,gameTime:h}=Pe(),{playSound:m}=ca(),[p,b]=re.useState(!1),x=S=>{m("buttonClick"),S()},T=S=>{const I=Math.floor(S/60),V=S%60;return`${I}:${V.toString().padStart(2,"0")}`};return g.jsxs(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-xs w-full mx-4",initial:{scale:.8,y:-50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:20},children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:""}),g.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:o.toLocaleString()})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-game-accent font-bold",children:c})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:T(h)})]})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white text-lg hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(r),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(t),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(a),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gradient-to-r from-purple-700 to-blue-700 rounded-xl font-bold text-white\r
                       hover:from-purple-600 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>{m("buttonClick"),b(!0)},children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-red-900/50 rounded-xl font-bold text-red-300\r
                       hover:bg-red-800/50 transition-all`,whileTap:{scale:.98},onClick:()=>x(s),children:"  "})]})]}),g.jsx(un,{children:p&&g.jsx(TA,{onClose:()=>b(!1)})})]})}function pv({onClose:r}){const{settings:t,updateSettings:a}=Xn(),{playSound:s}=ca(),o=(h,m)=>{s("buttonClick"),a({[h]:m})},c=(h,m)=>{a({[h]:m})};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4 max-h-[80vh] overflow-y-auto",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:h=>h.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors text-2xl",onClick:r,children:""})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.soundEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("soundEnabled",!t.soundEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.soundEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.soundEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.soundVolume,onChange:h=>c("soundVolume",parseFloat(h.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.soundVolume*100),"%"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.musicEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("musicEnabled",!t.musicEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.musicEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.musicEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.musicVolume,onChange:h=>c("musicVolume",parseFloat(h.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.musicVolume*100),"%"]})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.hapticEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("hapticEnabled",!t.hapticEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.hapticEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:"  "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.showGhostBlock?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("showGhostBlock",!t.showGhostBlock),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.showGhostBlock?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:" "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.colorBlindMode?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("colorBlindMode",!t.colorBlindMode),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.colorBlindMode?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:["swipe","buttons","both"].map(h=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.controlType===h?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({controlType:h})},children:[h==="swipe"&&"",h==="buttons"&&"",h==="both"&&" "]},h))})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:["auto","high","medium","low"].map(h=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.performanceMode===h?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({performanceMode:h})},children:[h==="auto"&&"",h==="high"&&"",h==="medium"&&"",h==="low"&&""]},h))})]}),g.jsx(ie.button,{className:`w-full mt-6 py-3 bg-gray-700 rounded-xl font-bold text-white\r
                     hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:r,children:""})]})})}function SA({onNextLevel:r,onMainMenu:t}){const{score:a,puzzleLevel:s,movesRemaining:o,levelObjectives:c}=Pe(),h=o*100,m=a+h;return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(ie.div,{className:"bg-gradient-to-b from-purple-900 to-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4 border-2 border-purple-500",initial:{scale:.5,y:50},animate:{scale:1,y:0},transition:{type:"spring",damping:15},children:[g.jsxs(ie.div,{className:"text-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[g.jsx(ie.div,{className:"text-6xl mb-2",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5,delay:.3},children:""}),g.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"PUZZLE CLEAR!"}),g.jsxs("p",{className:"text-purple-300 mt-1",children:["Level ",s," Complete"]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-4",children:[g.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:c.map((p,b)=>g.jsxs(ie.div,{className:"flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+b*.1},children:[g.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:g.jsx("span",{className:"text-white text-xs",children:""})}),g.jsxs("span",{className:"text-gray-300 text-sm flex-1",children:[p.type==="score"&&` ${p.target.toLocaleString()}`,p.type==="clearBlocks"&&` ${p.target} `,p.type==="chains"&&`${p.target}`,p.type==="clearColor"&&`  ${p.target} `]}),g.jsxs("span",{className:"text-green-400 text-sm",children:[p.current,"/",p.target]})]},b))})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-gray-400 text-sm",children:""}),g.jsx("span",{className:"text-white font-mono",children:a.toLocaleString()})]}),o>0&&g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("span",{className:"text-gray-400 text-sm",children:["   (",o,")"]}),g.jsxs("span",{className:"text-yellow-400 font-mono",children:["+",h.toLocaleString()]})]}),g.jsx("div",{className:"border-t border-gray-700 pt-2 mt-2",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-purple-300 font-bold",children:" "}),g.jsx("span",{className:"text-2xl font-bold text-white font-mono",children:m.toLocaleString()})]})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs(ie.button,{className:`w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl
                       font-bold text-white text-lg hover:from-purple-500 hover:to-pink-500 transition-all`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,children:[" Level ",s+1]}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:"  "})]})]})})}function wA({onStartGame:r,onOpenShop:t,onOpenSettings:a,onOpenLeaderboard:s,onOpenBattlePass:o,onOpenDailyReward:c}){const{currency:h,playerName:m,playerLevel:p,streakInfo:b,checkDailyRewardAvailable:x}=Xn(),{playSound:T}=ca(),[S,I]=re.useState(!1),[V,q]=re.useState(!1);re.useEffect(()=>{q(x())},[x]);const U=k=>{T("buttonClick"),k()};return g.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col items-center justify-center text-white bg-[#050510]",children:[g.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-[#050510] to-[#050510]"}),[...Array(15)].map((k,W)=>g.jsx(ie.div,{className:"absolute rounded-full blur-xl",style:{background:["#ff4757","#3742fa","#2ed573","#ffa502"][W%4],width:Math.random()*100+50,height:Math.random()*100+50,opacity:.1,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-100],x:[0,Math.random()*50-25],scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"easeInOut"}},W))]}),g.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>U(a),className:"w-10 h-10 rounded-full bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors",children:""}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-yellow-400 font-mono",children:h.coins.toLocaleString()})]}),g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-purple-400 font-mono",children:h.gems.toLocaleString()})]})]})]}),g.jsxs("div",{className:"z-10 w-full max-w-md px-6 flex flex-col items-center gap-8",children:[g.jsxs("div",{className:"text-center relative",children:[g.jsx(ie.div,{initial:{scale:.5,opacity:0,y:-30},animate:{scale:1,opacity:1,y:0},transition:{type:"spring",stiffness:180,damping:12},children:g.jsxs("h1",{className:"text-6xl md:text-8xl font-black italic tracking-tighter",style:{fontFamily:"var(--font-display)"},children:[g.jsx(ie.span,{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 neon-pulse inline-block",animate:{filter:["hue-rotate(0deg)","hue-rotate(20deg)","hue-rotate(0deg)"]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},style:{textShadow:"0 0 40px rgba(0,200,255,0.5), 0 0 80px rgba(100,100,255,0.3)"},children:"CHROMA"}),g.jsx("br",{}),g.jsx(ie.span,{className:"text-white inline-block",style:{textShadow:"0 4px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.4)"},animate:{textShadow:["0 4px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.4)","0 4px 12px rgba(0,0,0,0.6), 0 0 50px rgba(255,255,255,0.6)","0 4px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"FALL"})]})}),g.jsx(ie.p,{className:"text-gray-400 mt-3 tracking-[0.3em] text-sm uppercase font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:" Color Fusion Puzzle "})]}),g.jsxs(ie.div,{className:"glass-ultra w-full p-5 rounded-3xl flex items-center justify-between shimmer",initial:{y:30,opacity:0,scale:.95},animate:{y:0,opacity:1,scale:1},transition:{delay:.25,type:"spring",stiffness:150},children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(ie.div,{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center text-2xl font-bold shadow-lg",style:{boxShadow:"0 8px 25px rgba(139, 92, 246, 0.4)"},whileHover:{scale:1.08,rotate:5},transition:{type:"spring",stiffness:400},children:m.charAt(0)}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-lg tracking-wide",children:m}),g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsxs("span",{className:"bg-gradient-to-r from-blue-500/30 to-cyan-500/30 text-cyan-300 px-2 py-1 rounded-lg font-semibold border border-cyan-500/20",children:["Lv.",p]}),b.currentStreak>0&&g.jsxs(ie.span,{className:"text-orange-400 flex items-center gap-1",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},children:[" ",b.currentStreak,""]})]})]})]}),V&&g.jsxs(ie.button,{onClick:()=>U(c),className:"bg-gradient-to-r from-amber-400 via-orange-500 to-red-500 text-white text-xs font-bold px-4 py-2 rounded-xl shadow-lg relative overflow-hidden",style:{boxShadow:"0 6px 20px rgba(251, 146, 60, 0.5)"},whileHover:{scale:1.05},whileTap:{scale:.95},animate:{y:[0,-3,0]},transition:{y:{duration:1,repeat:1/0,ease:"easeInOut"}},children:[g.jsx("span",{className:"relative z-10",children:"  "}),g.jsx(ie.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:1}})]})]}),g.jsxs(ie.div,{className:"w-full space-y-5",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35,type:"spring",stiffness:120},children:[g.jsxs(ie.button,{onClick:()=>U(()=>I(!0)),className:"w-full py-6 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-3xl font-black text-2xl text-white relative overflow-hidden group",style:{boxShadow:"0 10px 40px rgba(79, 70, 229, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",fontFamily:"var(--font-display)"},whileHover:{scale:1.03,boxShadow:"0 15px 50px rgba(79, 70, 229, 0.6)"},whileTap:{scale:.98},children:[g.jsx(ie.div,{className:"absolute inset-[-2px] bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 rounded-3xl opacity-0 group-hover:opacity-100 -z-10",style:{filter:"blur(8px)"},transition:{duration:.3}}),g.jsx(ie.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/25 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2.5,repeat:1/0,ease:"linear"}}),g.jsxs("span",{className:"relative flex items-center justify-center gap-4",children:[g.jsx(ie.span,{className:"text-3xl",animate:{rotate:[0,-10,10,0]},transition:{duration:2,repeat:1/0},children:""}),"GAME START"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsx(id,{icon:"",label:"",onClick:()=>U(t),color:"from-pink-500/20 to-rose-500/20"}),g.jsx(id,{icon:"",label:"",onClick:()=>U(s),color:"from-amber-500/20 to-yellow-500/20"}),g.jsx(id,{icon:"",label:"",onClick:()=>U(o),color:"from-emerald-500/20 to-green-500/20"})]})]})]}),g.jsx(un,{children:S&&g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),children:g.jsxs(ie.div,{className:"w-full max-w-md bg-[#1a1a2e] border border-white/10 rounded-3xl overflow-hidden shadow-2xl",initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},onClick:k=>k.stopPropagation(),children:[g.jsxs("div",{className:"p-6 bg-gradient-to-b from-[#2a2a4e] to-[#1a1a2e]",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-6",style:{fontFamily:"var(--font-display)"},children:"SELECT MODE"}),g.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:Object.entries(bv).map(([k,W])=>g.jsxs("button",{onClick:()=>{U(()=>{I(!1),r(k)})},className:"w-full p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-left flex items-center gap-4 group",children:[g.jsx("span",{className:"text-3xl group-hover:scale-110 transition-transform",children:W.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:W.name}),W.hasTimeLimit&&g.jsx("span",{className:"text-xs text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:"TIME"})]}),g.jsx("p",{className:"text-sm text-gray-400",children:W.description})]}),g.jsx("span",{className:"text-gray-500 group-hover:text-white transition-colors",children:""})]},k))})]}),g.jsx("div",{className:"p-4 bg-[#151525]",children:g.jsx("button",{onClick:()=>I(!1),className:"w-full py-3 text-gray-400 font-bold hover:text-white transition-colors",children:""})})]})})})]})}function id({icon:r,label:t,onClick:a,color:s}){return g.jsxs(ie.button,{onClick:a,className:`flex flex-col items-center justify-center gap-2 py-5 rounded-2xl border border-white/10 transition-all bg-gradient-to-br ${s} backdrop-blur-sm relative overflow-hidden group`,whileHover:{scale:1.05,borderColor:"rgba(255,255,255,0.3)"},whileTap:{scale:.95},children:[g.jsx(ie.span,{className:"text-3xl drop-shadow-lg",animate:{y:[0,-2,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:r}),g.jsx("span",{className:"text-sm font-bold text-gray-200 tracking-wide",children:t}),g.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"})]})}function AA({onClose:r}){const{claimDailyReward:t,dailyRewardDay:a,checkDailyRewardAvailable:s,streakInfo:o}=Xn(),{playSound:c}=ca(),[h,m]=re.useState(!1),[p,b]=re.useState(null),x=s(),T=()=>{if(!x||h)return;const S=t();S&&(c("rewardGet"),m(!0),b(S),kd({particleCount:50,spread:60,origin:{y:.7}}))};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:S=>S.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:" "}),g.jsx("div",{className:"text-center mb-6",children:g.jsxs("p",{className:"text-orange-400",children:[" ",o.currentStreak,"  "]})}),g.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:cd.map((S,I)=>{const V=I+1,q=V<(a||0)+1,U=V===(a||0)+1;return g.jsxs(ie.div,{className:`relative p-2 rounded-lg text-center ${q?"bg-gray-700 opacity-50":U?"bg-gradient-to-b from-game-accent to-blue-600 ring-2 ring-yellow-400":"bg-gray-800"}`,animate:U&&x?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:1.5},children:[g.jsx("p",{className:"text-xs text-gray-400",children:"Day"}),g.jsx("p",{className:"text-lg font-bold text-white",children:V}),g.jsx("div",{className:"mt-1",children:S.reward.gems?g.jsxs("p",{className:"text-xs text-purple-400",children:["",S.reward.gems]}):g.jsxs("p",{className:"text-xs text-yellow-400",children:["",S.reward.coins]})}),q&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:""})})]},V)})}),h&&p?g.jsxs(ie.div,{className:"text-center py-4",initial:{scale:0},animate:{scale:1},children:[g.jsx("p",{className:"text-xl font-bold text-green-400 mb-2",children:" !"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[p.coins&&g.jsxs("p",{className:"text-yellow-400",children:[" +",p.coins]}),p.gems&&g.jsxs("p",{className:"text-purple-400",children:[" +",p.gems]})]})]}):x?g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white text-lg hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:T,children:"  "}):g.jsxs("div",{className:"text-center py-4",children:[g.jsx("p",{className:"text-gray-400",children:"   "}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  !"})]}),g.jsx("button",{className:`w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                     hover:bg-gray-600 transition-all`,onClick:r,children:""})]})})}function CA({onClose:r}){const{currency:t,ownedSkins:a,ownedThemes:s,equippedSkinId:o,equippedThemeId:c,purchaseSkin:h,purchaseTheme:m,equipSkin:p,equipTheme:b}=Xn(),{playSound:x}=ca(),[T,S]=re.useState("skins"),I=k=>{h(k)&&x("purchaseSuccess")},V=k=>{m(k)&&x("purchaseSuccess")},q=k=>{x("buttonClick"),p(k)},U=k=>{x("buttonClick"),b(k)};return g.jsxs(ie.div,{className:"fixed inset-0 bg-game-bg z-50 flex flex-col",initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"tween"},children:[g.jsxs("div",{className:"flex items-center justify-between p-4 bg-game-panel/80",children:[g.jsx("button",{className:"text-2xl text-gray-400 hover:text-white",onClick:r,children:""}),g.jsx("h1",{className:"text-xl font-bold text-white",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:t.coins.toLocaleString()})]}),g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-purple-400 font-bold text-sm",children:t.gems.toLocaleString()})]})]})]}),g.jsx("div",{className:"flex bg-game-panel/50",children:["skins","themes","gems"].map(k=>g.jsxs("button",{className:`flex-1 py-3 font-bold transition-colors ${T===k?"text-game-accent border-b-2 border-game-accent":"text-gray-400"}`,onClick:()=>{x("buttonClick"),S(k)},children:[k==="skins"&&" ",k==="themes"&&" ",k==="gems"&&" "]},k))}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g.jsxs(un,{mode:"wait",children:[T==="skins"&&g.jsx(ie.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:od.map(k=>{const W=a.some(ce=>ce.id===k.id),$=o===k.id,se=k.currency==="coins"?t.coins>=k.price:k.currency==="gems"?t.gems>=k.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 ${$?"ring-2 ring-game-accent":""}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("p",{className:"font-bold text-white",children:k.name}),g.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:Nx[k.rarity]},children:Rx[k.rarity]})]}),g.jsx("div",{className:"bg-black/40 rounded-lg p-3 mb-3",children:g.jsx("div",{className:"flex gap-1.5 justify-center",children:(()=>{const ce=co[k.id]||co.classic;return ce.colors.slice(0,4).map((le,M)=>g.jsxs(ie.div,{className:"relative overflow-hidden",style:{width:32,height:32,borderRadius:ce.borderRadius,background:ce.innerEffect==="glow"?`radial-gradient(circle at 30% 30%, ${le}dd, ${le}88 70%, ${le}44)`:ce.innerEffect==="glass"?`linear-gradient(145deg, ${le}ee, ${le}aa 50%, ${le}cc)`:ce.innerEffect==="gradient"?`linear-gradient(135deg, ${le}, ${le}88, ${le}cc)`:ce.innerEffect==="metallic"?`linear-gradient(145deg, ${le}ff, ${le}66 30%, ${le}cc 70%, ${le}ff)`:ce.innerEffect==="flat"?le:`linear-gradient(145deg, ${le}, ${le}dd)`,border:ce.borderWidth>0?`${ce.borderWidth}px ${ce.borderStyle} ${le}aa`:"none",boxShadow:ce.glowIntensity>0?`0 0 ${Math.round(ce.glowIntensity*15)}px ${le}, 0 0 ${Math.round(ce.glowIntensity*5)}px ${le}`:"0 2px 4px rgba(0,0,0,0.3)"},animate:ce.animation==="pulse"?{boxShadow:[`0 0 8px ${le}`,`0 0 20px ${le}`,`0 0 8px ${le}`]}:ce.animation==="fire"?{y:[0,-3,0,-1,0]}:ce.animation==="ice"?{opacity:[1,.7,1]}:ce.animation==="electric"?{x:[-2,2,-1,1,0]}:void 0,transition:ce.animation==="pulse"?{duration:1.2,repeat:1/0}:ce.animation==="fire"?{duration:.4,repeat:1/0}:ce.animation==="ice"?{duration:2.5,repeat:1/0}:ce.animation==="electric"?{duration:.15,repeat:1/0}:void 0,children:[(ce.innerEffect==="glossy"||ce.innerEffect==="glass")&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent rounded-inherit"}),ce.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30"}),ce.texture==="lines"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.2) 2px, rgba(255,255,255,0.2) 4px)"}}),ce.texture==="dots"&&g.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.5) 1px, transparent 1px)",backgroundSize:"6px 6px"}}),ce.texture==="cracks"&&g.jsx("div",{className:"absolute inset-0 opacity-25",style:{background:"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.3) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.2) 61%, transparent 62%)"}}),ce.texture==="circuit"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%)",backgroundSize:"8px 8px"}}),ce.animation==="shimmer"&&g.jsx(ie.div,{className:"absolute inset-0",style:{background:"linear-gradient(110deg, transparent 25%, rgba(255,255,255,0.6) 50%, transparent 75%)"},animate:{x:["-150%","250%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:.5}})]},M))})()})}),g.jsxs("p",{className:"text-[10px] text-gray-400 mb-2 text-center",children:[k.id==="classic"&&"  ",k.id==="neon"&&"  + ",k.id==="candy"&&"  ",k.id==="pixel"&&"8  ",k.id==="galaxy"&&"  + ",k.id==="crystal"&&"  +  ",k.id==="holographic"&&" ",k.id==="animated_fire"&&"  ",k.id==="animated_ice"&&"  ",k.id==="animated_electric"&&"  "]}),W?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold ${$?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>q(k.id),disabled:$,children:$?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-1 ${se||k.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>I(k.id),disabled:!se&&k.currency!=="free",children:k.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[k.currency==="coins"?"":"",k.price," "]})})]},k.id)})},"skins"),T==="themes"&&g.jsx(ie.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:hu.map(k=>{const W=s.some(ce=>ce.id===k.id),$=c===k.id,se=k.currency==="coins"?t.coins>=k.price:k.currency==="gems"?t.gems>=k.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-3 ${$?"ring-2 ring-game-accent":""}`,children:[g.jsx("p",{className:"font-bold text-white mb-1 text-sm",children:k.name}),k.description&&g.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:k.description}),g.jsx("div",{className:"h-24 rounded-lg mb-2 p-2 overflow-hidden relative",style:{background:k.colors.backgroundGradient||k.colors.background,border:`1px solid ${k.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:g.jsxs("div",{className:"w-full h-full rounded relative",style:{backgroundColor:k.colors.panel,border:`1px solid ${k.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:[g.jsx("div",{className:"absolute top-2 left-2 w-12 h-1.5 rounded-full",style:{backgroundColor:k.colors.accent}}),g.jsxs("div",{className:"absolute top-5 left-2 flex flex-col gap-1",children:[g.jsx("div",{className:"w-8 h-1 rounded",style:{backgroundColor:k.colors.text||"#fff",opacity:.8}}),g.jsx("div",{className:"w-6 h-1 rounded",style:{backgroundColor:k.colors.textSecondary||"#888",opacity:.6}})]}),g.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-0.5",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#ff4757"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3742fa"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#2ed573"}})]}),g.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:k.colors.success||"#2ed573"}}),g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:k.colors.danger||"#ff4757"}})]})]})}),W?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm ${$?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>U(k.id),disabled:$,children:$?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm flex items-center justify-center gap-1 ${se||k.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>V(k.id),disabled:!se&&k.currency!=="free",children:k.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[k.currency==="coins"?"":"",k.price," "]})})]},k.id)})},"themes"),T==="gems"&&g.jsxs(ie.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[Cx.map(k=>g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 flex items-center justify-between ${k.highlight?"ring-2 ring-yellow-400":""} ${k.bestValue?"ring-2 ring-purple-400":""}`,children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("p",{className:"font-bold text-white text-lg",children:[k.amount," "]}),k.bonusAmount>0&&g.jsxs("span",{className:"text-green-400 text-sm",children:["+",k.bonusAmount," "]})]}),g.jsx("p",{className:"text-sm text-gray-400",children:k.label})]})]}),g.jsxs("button",{className:`bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-xl\r
                               font-bold text-white hover:from-purple-400 hover:to-pink-400`,onClick:()=>{x("purchaseSuccess"),alert(`${k.amount+k.bonusAmount}   (   )`)},children:["$",k.price]})]},k.id)),g.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-white",children:" "}),g.jsx("p",{className:"text-sm text-green-200",children:"  50  "})]})]}),g.jsx("button",{className:`bg-white/20 px-6 py-3 rounded-xl font-bold text-white\r
                             hover:bg-white/30`,onClick:()=>{x("rewardGet"),alert("   50   ( SDK  )")},children:""})]})]},"gems")]})})]})}function NA({onClose:r}){const[t,a]=re.useState([]),[s,o]=re.useState(!0),[c,h]=re.useState("all"),[m,p]=re.useState("classic"),[b,x]=re.useState(-1),[T,S]=re.useState(db()),[I,V]=re.useState(!1),[q,U]=re.useState(T),k=hb(),W=re.useCallback(async()=>{o(!0);try{const w=await pb(c,m,50);a(w);const C=await yA(k,m);x(C)}catch(w){console.error("  :",w)}finally{o(!1)}},[c,m,k]);re.useEffect(()=>{W()},[W]);const $=()=>{q.trim()&&(mb(q.trim()),S(q.trim())),V(!1)},se=w=>w===1?"bg-gradient-to-r from-yellow-500 to-amber-600 text-black":w===2?"bg-gradient-to-r from-gray-300 to-gray-400 text-black":w===3?"bg-gradient-to-r from-orange-400 to-orange-600 text-black":"bg-white/10 text-white",ce=w=>w===1?"":w===2?"":w===3?"":w.toString(),le=w=>{const C=Math.floor(w/60),N=w%60;return`${C}:${N.toString().padStart(2,"0")}`},M=w=>{let C;if(w instanceof Date)C=w;else if(typeof w=="string")C=new Date(w);else if(w&&typeof w.toDate=="function")C=w.toDate();else return"";const O=new Date().getTime()-C.getTime(),B=Math.floor(O/(1e3*60*60)),R=Math.floor(O/(1e3*60*60*24));return B<1?" ":B<24?`${B} `:R<7?`${R} `:C.toLocaleDateString("ko-KR")};return g.jsxs(ie.div,{className:"fixed inset-0 bg-gradient-to-b from-[#0a0a20] via-[#1a1a40] to-[#0a0a20] z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"}),g.jsxs("div",{className:"relative h-full flex flex-col max-w-lg mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""}),g.jsx("h1",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500",children:"RANKING"}),g.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""})]}),g.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-2xl p-4 mb-4 border border-purple-500/30",children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-2xl",children:""}),g.jsxs("div",{children:[I?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:q,onChange:w=>U(w.target.value),maxLength:12,className:"bg-black/50 border border-purple-500 rounded px-2 py-1 text-white text-sm w-28",autoFocus:!0,onKeyDown:w=>w.key==="Enter"&&$()}),g.jsx("button",{onClick:$,className:"text-green-400 text-sm",children:""})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-white font-bold",children:T}),g.jsx("button",{onClick:()=>V(!0),className:"text-gray-400 text-xs hover:text-white",children:""})]}),g.jsx("div",{className:"text-gray-400 text-xs",children:b>0?` : ${b}`:" "})]})]})})}),g.jsx("div",{className:"flex gap-2 mb-3",children:g.jsx("div",{className:"flex bg-black/30 rounded-xl p-1 flex-1",children:["all","weekly","daily"].map(w=>g.jsx("button",{onClick:()=>h(w),className:`flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all ${c===w?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400"}`,children:w==="all"?"":w==="weekly"?"":""},w))})}),g.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:["classic","timeAttack","survival","puzzle"].map(w=>g.jsx("button",{onClick:()=>p(w),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all ${m===w?"bg-gradient-to-r from-orange-500 to-red-600 text-white":"bg-white/10 text-gray-400"}`,children:w==="classic"?"":w==="timeAttack"?"":w==="survival"?"":""},w))}),g.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-4",children:s?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-gray-400 text-sm",children:" ..."})]}):t.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("span",{className:"text-5xl",children:""}),g.jsx("span",{className:"text-gray-400 text-sm",children:"  "}),g.jsx("span",{className:"text-gray-500 text-xs",children:"  1 !"})]}):g.jsx(un,{children:t.map((w,C)=>{const N=C+1,O=w.playerId===k;return g.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:C*.03},className:`rounded-xl p-3 ${se(N)} ${O?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-[#0a0a20]":""}`,children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-sm ${N<=3?"":"bg-black/20"}`,children:ce(N)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`font-bold truncate ${N<=3?"":"text-white"}`,children:w.playerName}),O&&g.jsx("span",{className:"text-[10px] bg-cyan-500 text-white px-1.5 py-0.5 rounded-full",children:"ME"})]}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-400"}`,children:["Lv.",w.level," | ",le(w.playTime)," |"," ",M(w.createdAt)]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:`font-black text-lg ${N<=3?"":"text-cyan-400"}`,children:w.score.toLocaleString()}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-500"}`,children:[w.maxCombo," ",w.maxChain,""]})]})]})},w.id||C)})})})]})]})}function RA({onClose:r}){const{wheelState:t,spinWheel:a,canSpinWheel:s,addCoins:o,addGems:c}=Xn(),{playSound:h}=ca(),[m,p]=re.useState(!1),[b,x]=re.useState(0),[T,S]=re.useState(null),I=re.useRef(null),V=s(),q=360/Ds.length,U=k=>{if(m||k==="free"&&!V.free||k==="ad"&&!V.ad||k==="gem"&&!V.gem)return;p(!0),S(null),h("wheelSpin");const W=Math.random();let $=0,se=Ds[0];for(const C of Ds)if($+=C.probability,W<=$){se=C;break}const le=Ds.findIndex(C=>C.id===se.id)*q,M=5+Math.random()*3,w=b+M*360+(360-le);x(w),setTimeout(()=>{p(!1),S(se.id);const C=se.reward;C.coins&&o(C.coins),C.gems&&c(C.gems),se.probability<.1?(h("jackpot"),kd({particleCount:100,spread:70,origin:{y:.6}})):h("rewardGet"),a()},5e3)};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-md w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:k=>k.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:" "}),g.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-6",children:[g.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-10",children:g.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-12 border-l-transparent border-r-transparent border-t-yellow-400"})}),g.jsx(ie.div,{ref:I,className:"w-full h-full rounded-full overflow-hidden border-4 border-yellow-400",style:{background:`conic-gradient(${Ds.map((k,W)=>`${k.color} ${W*q}deg ${(W+1)*q}deg`).join(", ")})`},animate:{rotate:b},transition:{duration:5,ease:[.25,.1,.25,1]},children:Ds.map((k,W)=>{const $=W*q+q/2;return g.jsx("div",{className:"absolute text-xs font-bold text-white whitespace-nowrap",style:{top:"50%",left:"50%",transform:`rotate(${$}deg) translateY(-100px)`,transformOrigin:"center",textShadow:"1px 1px 2px black"},children:k.label},k.id)})}),g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-yellow-400 flex items-center justify-center text-2xl shadow-lg",children:""})]}),T&&!m&&g.jsx(ie.div,{className:"text-center mb-4",initial:{scale:0},animate:{scale:1},children:g.jsxs("p",{className:"text-xl font-bold text-green-400",children:[Ds.find(k=>k.id===T)?.label," !"]})}),g.jsxs("div",{className:"space-y-2",children:[V.free&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white hover:from-green-400 hover:to-green-500 disabled:opacity-50`,onClick:()=>U("free"),disabled:m,children:["   (",t.freeSpinsRemaining,")"]}),V.ad&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                         font-bold text-white hover:from-yellow-400 hover:to-orange-400 disabled:opacity-50`,onClick:()=>U("ad"),disabled:m,children:["    (",t.adSpinsRemaining,")"]}),V.gem&&g.jsx("button",{className:`w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl\r
                         font-bold text-white hover:from-purple-400 hover:to-pink-400 disabled:opacity-50`,onClick:()=>U("gem"),disabled:m,children:" 20  "}),!V.free&&!V.ad&&!V.gem&&g.jsx("p",{className:"text-center text-gray-400",children:"   "})]}),g.jsx("button",{className:"w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300",onClick:r,disabled:m,children:""})]})})}const MA={background:"#0a0a1a",backgroundGradient:"radial-gradient(circle at 50% 10%, #1a1a40 0%, #050510 60%)",panel:"#1a1a2e",panelBorder:"rgba(255,255,255,0.1)",accent:"#4a9eff",text:"#ffffff",textSecondary:"#888888",danger:"#ff4757",success:"#2ed573"};function IA(){const[r,t]=re.useState("menu"),[a,s]=re.useState(!1),[o,c]=re.useState(!1),[h,m]=re.useState(!1),[p,b]=re.useState(!1),[x,T]=re.useState(!1),[S,I]=re.useState(0),V=re.useRef(!1),q=Pe(),{gameStatus:U,startGame:k,pauseGame:W,resumeGame:$,resetGame:se,continueGame:ce,incrementGameTime:le,endGame:M,nextPuzzleLevel:w,score:C,combo:N,chainCount:O,level:B,board:R,isFeverMode:Be,feverGauge:tt,gameTime:X,gameMode:oe}=q,{settings:xe,updateStreak:Le,equippedThemeId:z}=Xn(),j=re.useMemo(()=>hu.find(Ne=>Ne.id===z)?.colors||MA,[z]);re.useEffect(()=>{const de=document.documentElement;de.style.setProperty("--theme-bg",j.background),de.style.setProperty("--theme-bg-gradient",j.backgroundGradient||j.background),de.style.setProperty("--theme-panel",j.panel),de.style.setProperty("--theme-panel-border",j.panelBorder||"rgba(255,255,255,0.1)"),de.style.setProperty("--theme-accent",j.accent),de.style.setProperty("--theme-text",j.text||"#ffffff"),de.style.setProperty("--theme-text-secondary",j.textSecondary||"#888888"),de.style.setProperty("--theme-danger",j.danger||"#ff4757"),de.style.setProperty("--theme-success",j.success||"#2ed573"),document.body.style.background=j.backgroundGradient||j.background,document.body.style.backgroundColor=j.background},[j]);const{playSound:ae,stopBGM:ue}=ca(),ge=re.useRef(B);re.useEffect(()=>{Le()},[Le]),re.useEffect(()=>{B>ge.current&&U==="playing"&&(b(!0),ae("levelUp"),setTimeout(()=>b(!1),2e3)),ge.current=B},[B,U,ae]),re.useEffect(()=>{Be&&!V.current&&U==="playing"&&(T(!0),ae("combo"),setTimeout(()=>T(!1),2e3)),V.current=Be},[Be,U,ae]),re.useEffect(()=>{if(U!=="playing"){I(0);return}let de=0;for(let Ne=0;Ne<4;Ne++)for(let Ie=0;Ie<me.COLUMNS;Ie++)R[Ne]?.[Ie]!==null&&de++;de>=me.COLUMNS*2?I(2):de>=me.COLUMNS?I(1):I(0)},[R,U]),re.useEffect(()=>{let de=null;return U==="playing"&&(de=window.setInterval(()=>le(),1e3)),()=>{de&&clearInterval(de)}},[U,le]),re.useEffect(()=>{if(U!=="playing")return;const de=bv[oe];de?.hasTimeLimit&&de.timeLimit&&X>=de.timeLimit&&M()},[U,oe,X,M]);const Te=re.useCallback(()=>{const de=document.documentElement;de.requestFullscreen?de.requestFullscreen().catch(()=>{}):de.webkitRequestFullscreen?de.webkitRequestFullscreen():de.msRequestFullscreen&&de.msRequestFullscreen()},[]),Ce=re.useCallback(de=>{ae("buttonClick"),("ontouchstart"in window||navigator.maxTouchPoints>0)&&Te(),k(de),t("game")},[k,ae,Te]),he=re.useCallback(()=>{ae("buttonClick"),se(),ue(),t("menu")},[se,ue,ae]),be=re.useCallback(()=>{ae("buttonClick"),se(),k("classic")},[se,k,ae]),ye=re.useCallback(()=>{ae("buttonClick"),ce()},[ce,ae]);return r==="menu"?g.jsxs(g.Fragment,{children:[g.jsx(wA,{onStartGame:Ce,onOpenShop:()=>{ae("buttonClick"),t("shop")},onOpenSettings:()=>{ae("buttonClick"),s(!0)},onOpenLeaderboard:()=>{ae("buttonClick"),t("leaderboard")},onOpenBattlePass:()=>{ae("buttonClick"),alert("Coming Soon!")},onOpenDailyReward:()=>{ae("buttonClick"),c(!0)}}),g.jsxs(un,{children:[a&&g.jsx(pv,{onClose:()=>s(!1)}),o&&g.jsx(AA,{onClose:()=>c(!1)}),h&&g.jsx(RA,{onClose:()=>m(!1)})]})]}):r==="shop"?g.jsx(CA,{onClose:()=>t("menu")}):r==="leaderboard"?g.jsx(NA,{onClose:()=>t("menu")}):g.jsxs("div",{className:`fixed inset-0 bg-[#0a0a15] flex flex-col items-center overflow-hidden transition-colors duration-500
      ${S===2?"shadow-[inset_0_0_50px_rgba(255,0,0,0.3)]":""}
      ${Be?"shadow-[inset_0_0_100px_rgba(255,100,0,0.3)]":""}`,children:[Be&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none z-0",animate:{opacity:[.3,.5,.3]},transition:{duration:.5,repeat:1/0},style:{background:"radial-gradient(ellipse at center, rgba(255, 100, 0, 0.2) 0%, transparent 70%)"}}),S>0&&!Be&&g.jsx("div",{className:`absolute inset-0 pointer-events-none z-0 animate-pulse ${S===2?"bg-red-900/10":"bg-transparent"}`}),g.jsx(un,{children:p&&g.jsxs(ie.div,{initial:{scale:.5,opacity:0,y:100},animate:{scale:1,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-100},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx("h2",{className:"text-6xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-yellow-400 to-yellow-100 drop-shadow-[0_0_20px_rgba(255,215,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:"LEVEL UP!"}),g.jsxs("p",{className:"text-3xl text-white font-bold mt-2 neon-text",children:["Lv. ",B]})]})}),g.jsx(un,{children:x&&g.jsxs(ie.div,{initial:{scale:0,rotate:-10,opacity:0},animate:{scale:1,rotate:0,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx(ie.h2,{className:"text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-orange-600 via-red-500 to-yellow-400 drop-shadow-[0_0_30px_rgba(255,100,0,0.8)]",style:{fontFamily:"var(--font-display)"},animate:{scale:[1,1.1,1]},transition:{duration:.3,repeat:1/0},children:" FEVER! "}),g.jsx("p",{className:"text-2xl text-yellow-300 font-bold mt-2",children:"x3 SCORE MULTIPLIER!"})]})}),g.jsxs("div",{className:"w-full max-w-2xl px-4 py-2 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>{ae("buttonClick"),U==="playing"?W():$()},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:U==="paused"?"":""}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[10px] text-gray-400 font-bold tracking-widest",children:"LEVEL"}),g.jsx("div",{className:"text-xl font-black text-cyan-400 font-mono leading-none",children:B})]}),g.jsx("button",{onClick:()=>{ae("buttonClick"),s(!0)},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:""})]}),g.jsxs("div",{className:"flex-1 w-full max-w-4xl flex justify-center items-start gap-1 md:gap-4 px-1 md:px-2 py-1 overflow-hidden",children:[g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-48 items-stretch z-10",children:g.jsx(r2,{})}),g.jsxs("div",{className:"flex flex-col items-center relative z-20",children:[g.jsx("div",{className:"flex md:hidden justify-end w-full max-w-[280px] mb-1 px-1",children:g.jsx(ey,{cellSize:18,maxBlocks:3})}),g.jsx(n2,{}),g.jsxs("div",{className:"md:hidden flex justify-around w-full max-w-[280px] mt-1 py-1 px-2 bg-black/30 rounded-lg",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"SCORE"}),g.jsx("div",{className:"text-sm font-mono font-bold text-white leading-none",children:C.toLocaleString()})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"COMBO"}),g.jsxs("div",{className:`text-sm font-mono font-bold leading-none ${N>1?"text-orange-400":"text-gray-600"}`,children:["x",N]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"CHAIN"}),g.jsx("div",{className:`text-sm font-mono font-bold leading-none ${O>0?"text-cyan-400":"text-gray-600"}`,children:O})]})]}),g.jsx("div",{className:"mt-1 w-full max-w-[300px]",children:g.jsx(s2,{})})]}),g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-32 items-center z-10",children:g.jsx(ey,{cellSize:28,maxBlocks:5})})]}),g.jsx("div",{className:"w-full max-w-lg pb-safe z-30",children:(xe.controlType==="buttons"||xe.controlType==="both")&&g.jsx(i2,{visible:U==="playing"})}),g.jsxs(un,{children:[U==="paused"&&g.jsx(EA,{onResume:$,onRestart:be,onSettings:()=>s(!0),onMainMenu:he}),U==="gameover"&&g.jsx(vA,{onRestart:be,onMainMenu:he,onContinue:ye}),U==="levelComplete"&&oe==="puzzle"&&g.jsx(SA,{onNextLevel:()=>{ae("levelUp"),w()},onMainMenu:he}),a&&g.jsx(pv,{onClose:()=>s(!1)})]})]})}J_.createRoot(document.getElementById("root")).render(g.jsx(re.StrictMode,{children:g.jsx(IA,{})}));
