import{r as se,j as g,m as ie,A as un}from"./animations-BJOS7rFy.js";import{r as P1,a as G1}from"./vendor-DlBnNAMw.js";import{c as gv}from"./state-ChBe2EGv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Xh={exports:{}},eo={},Yh={exports:{}},Kh={};var H0;function q1(){return H0||(H0=1,(function(r){function t(X,le){var xe=X.length;X.push(le);e:for(;0<xe;){var Le=xe-1>>>1,G=X[Le];if(0<o(G,le))X[Le]=le,X[xe]=G,xe=Le;else break e}}function a(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var le=X[0],xe=X.pop();if(xe!==le){X[0]=xe;e:for(var Le=0,G=X.length,O=G>>>1;Le<O;){var ae=2*(Le+1)-1,ue=X[ae],ye=ae+1,Te=X[ye];if(0>o(ue,xe))ye<G&&0>o(Te,ue)?(X[Le]=Te,X[ye]=xe,Le=ye):(X[Le]=ue,X[ae]=xe,Le=ae);else if(ye<G&&0>o(Te,xe))X[Le]=Te,X[ye]=xe,Le=ye;else break e}}return le}function o(X,le){var xe=X.sortIndex-le.sortIndex;return xe!==0?xe:X.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var y=[],_=[],x=1,T=null,A=3,U=!1,B=!1,P=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var le=a(_);le!==null;){if(le.callback===null)s(_);else if(le.startTime<=X)s(_),le.sortIndex=le.expirationTime,t(y,le);else break;le=a(_)}}function ce(X){if(P=!1,re(X),!B)if(a(y)!==null)B=!0,oe||(oe=!0,L());else{var le=a(_);le!==null&&We(ce,le.startTime-X)}}var oe=!1,M=-1,S=5,C=-1;function N(){return k?!0:!(r.unstable_now()-C<S)}function D(){if(k=!1,oe){var X=r.unstable_now();C=X;var le=!0;try{e:{B=!1,P&&(P=!1,J(M),M=-1),U=!0;var xe=A;try{t:{for(re(X),T=a(y);T!==null&&!(T.expirationTime>X&&N());){var Le=T.callback;if(typeof Le=="function"){T.callback=null,A=T.priorityLevel;var G=Le(T.expirationTime<=X);if(X=r.unstable_now(),typeof G=="function"){T.callback=G,re(X),le=!0;break t}T===a(y)&&s(y),re(X)}else s(y);T=a(y)}if(T!==null)le=!0;else{var O=a(_);O!==null&&We(ce,O.startTime-X),le=!1}}break e}finally{T=null,A=xe,U=!1}le=void 0}}finally{le?L():oe=!1}}}var L;if(typeof ne=="function")L=function(){ne(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ue=R.port2;R.port1.onmessage=D,L=function(){Ue.postMessage(null)}}else L=function(){V(D,0)};function We(X,le){M=V(function(){X(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(X){switch(A){case 1:case 2:case 3:var le=3;break;default:le=A}var xe=A;A=le;try{return X()}finally{A=xe}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var xe=A;A=X;try{return le()}finally{A=xe}},r.unstable_scheduleCallback=function(X,le,xe){var Le=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Le+xe:Le):xe=Le,X){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=xe+G,X={id:x++,callback:le,priorityLevel:X,startTime:xe,expirationTime:G,sortIndex:-1},xe>Le?(X.sortIndex=xe,t(_,X),a(y)===null&&X===a(_)&&(P?(J(M),M=-1):P=!0,We(ce,xe-Le))):(X.sortIndex=G,t(y,X),B||U||(B=!0,oe||(oe=!0,L()))),X},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(X){var le=A;return function(){var xe=A;A=le;try{return X.apply(this,arguments)}finally{A=xe}}}})(Kh)),Kh}var F0;function H1(){return F0||(F0=1,Yh.exports=q1()),Yh.exports}var Q0;function F1(){if(Q0)return eo;Q0=1;var r=H1(),t=P1(),a=G1();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(s(188))}function _(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,l=n;;){var f=i.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===i)return y(f),e;if(d===l)return y(f),n;d=d.sibling}throw Error(s(188))}if(i.return!==l.return)i=f,l=d;else{for(var v=!1,E=f.child;E;){if(E===i){v=!0,i=f,l=d;break}if(E===l){v=!0,l=f,i=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===i){v=!0,i=d,l=f;break}if(E===l){v=!0,l=d,i=f;break}E=E.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case V:return"Profiler";case k:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case ne:return e.displayName||"Context";case J:return(e._context.displayName||"Context")+".Consumer";case re:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:Ue(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Ue(e(n))}catch{}}return null}var We=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Le=[],G=-1;function O(e){return{current:e}}function ae(e){0>G||(e.current=Le[G],Le[G]=null,G--)}function ue(e,n){G++,Le[G]=e.current,e.current=n}var ye=O(null),Te=O(null),ve=O(null),he=O(null);function de(e,n){switch(ue(ve,n),ue(Te,e),ue(ye,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?d0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=d0(n),e=m0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(ye),ue(ye,e)}function me(){ae(ye),ae(Te),ae(ve)}function De(e){e.memoizedState!==null&&ue(he,e);var n=ye.current,i=m0(n,e.type);n!==i&&(ue(Te,e),ue(ye,i))}function Ne(e){Te.current===e&&(ae(ye),ae(Te)),he.current===e&&(ae(he),$l._currentValue=xe)}var Be,Oe;function Ae(e){if(Be===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Be=n&&n[1]||"",Oe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+e+Oe}var nt=!1;function St(e,n){if(!e||nt)return"";nt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var Q=K}Reflect.construct(e,[],W)}else{try{W.call()}catch(K){Q=K}e.call(W.prototype)}}else{try{throw Error()}catch(K){Q=K}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var I=v.split(`
`),F=E.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===F.length)for(l=I.length-1,f=F.length-1;1<=l&&0<=f&&I[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==F[f]){var $=`
`+I[l].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=l&&0<=f);break}}}finally{nt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ae(i):""}function vt(e,n){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==n&&n!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return St(e.type,!1);case 11:return St(e.type.render,!1);case 1:return St(e.type,!0);case 31:return Ae("Activity");default:return""}}function Mt(e){try{var n="",i=null;do n+=vt(e,i),i=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var at=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,fn=r.unstable_cancelCallback,as=r.unstable_shouldYield,ci=r.unstable_requestPaint,It=r.unstable_now,Dn=r.unstable_getCurrentPriorityLevel,ca=r.unstable_ImmediatePriority,it=r.unstable_UserBlockingPriority,ua=r.unstable_NormalPriority,Hs=r.unstable_LowPriority,is=r.unstable_IdlePriority,ui=r.log,Fs=r.unstable_setDisableYieldValue,En=null,$t=null;function On(e){if(typeof ui=="function"&&Fs(e),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(En,e)}catch{}}var wt=Math.clz32?Math.clz32:No,Co=Math.log,Qs=Math.LN2;function No(e){return e>>>=0,e===0?32:31-(Co(e)/Qs|0)|0}var fa=256,ss=262144,Dt=4194304;function ha(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function da(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?f=ha(l):(v&=E,v!==0?f=ha(v):i||(i=E&~e,i!==0&&(f=ha(i))))):(E=l&~d,E!==0?f=ha(E):v!==0?f=ha(v):i||(i=l&~e,i!==0&&(f=ha(i)))),f===0?0:n!==0&&n!==f&&(n&d)===0&&(d=f&-f,i=n&-n,d>=i||d===32&&(i&4194048)!==0)?n:f}function Kn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function $u(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ro(){var e=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),e}function ma(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function rs(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Zu(e,n,i,l,f,d){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var E=e.entanglements,I=e.expirationTimes,F=e.hiddenUpdates;for(i=v&~i;0<i;){var $=31-wt(i),W=1<<$;E[$]=0,I[$]=-1;var Q=F[$];if(Q!==null)for(F[$]=null,$=0;$<Q.length;$++){var K=Q[$];K!==null&&(K.lane&=-536870913)}i&=~W}l!==0&&ls(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~n))}function ls(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-wt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function tl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-wt(i),f=1<<l;f&n|e[l]&n&&(e[l]|=n),i&=~f}}function nl(e,n){var i=n&-n;return i=(i&42)!==0?1:os(i),(i&(e.suspendedLanes|n))!==0?0:i}function os(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ua(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Mo(){var e=le.p;return e!==0?e:(e=window.event,e===void 0?32:L0(e.type))}function $n(e,n){var i=le.p;try{return le.p=e,n()}finally{le.p=i}}var Zn=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Zn,Ft="__reactProps$"+Zn,pa="__reactContainer$"+Zn,Xs="__reactEvents$"+Zn,Ju="__reactListeners$"+Zn,Io="__reactHandles$"+Zn,Do="__reactResources$"+Zn,ga="__reactMarker$"+Zn;function Ys(e){delete e[Ot],delete e[Ft],delete e[Xs],delete e[Ju],delete e[Io]}function ya(e){var n=e[Ot];if(n)return n;for(var i=e.parentNode;i;){if(n=i[pa]||i[Ot]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=x0(e);e!==null;){if(i=e[Ot])return i;e=x0(e)}return n}e=i,i=e.parentNode}return null}function Vn(e){if(e=e[Ot]||e[pa]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Tn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function va(e){var n=e[Do];return n||(n=e[Do]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Vt(e){e[ga]=!0}var al=new Set,il={};function _a(e,n){ba(e,n),ba(e+"Capture",n)}function ba(e,n){for(il[e]=n,e=0;e<n.length;e++)al.add(n[e])}var sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},ll={};function Oo(e){return at.call(ll,e)?!0:at.call(rl,e)?!1:sl.test(e)?ll[e]=!0:(rl[e]=!0,!1)}function Ks(e,n,i){if(Oo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Sn(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function jt(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ol(e,n,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(v){i=""+v,d.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function rt(e){if(!e._valueTracker){var n=fi(e)?"checked":"value";e._valueTracker=ol(e,n,""+e[n])}}function cs(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=fi(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var us=/[\n"\\]/g;function mn(e){return e.replace(us,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function $s(e,n,i,l,f,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?cl(e,v,Qt(n)):i!=null?cl(e,v,Qt(i)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Qt(E):e.removeAttribute("name")}function Vo(e,n,i,l,f,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){rt(e);return}i=i!=null?""+Qt(i):"",n=n!=null?""+Qt(n):i,E||n===e.value||(e.value=n),e.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),rt(e)}function cl(e,n,i){n==="number"&&xa(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hi(e,n,i,l){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Qt(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function jo(e,n,i){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Qt(i):""}function di(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(s(92));if(We(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Qt(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),rt(e)}function pn(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||ko.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function fl(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&i[f]!==l&&ul(e,f,l)}else for(var d in n)n.hasOwnProperty(d)&&ul(e,d,n[d])}function Zs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(e){return mi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jn(){}var hl=null;function jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Ea=null;function fs(e){var n=Vn(e);if(n&&(e=n.stateNode)){var i=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if($s(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var f=l[Ft]||null;if(!f)throw Error(s(90));$s(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&cs(l)}break e;case"textarea":jo(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&hi(e,!!i.multiple,n,!1)}}}var Ws=!1;function gi(e,n,i){if(Ws)return e(n,i);Ws=!0;try{var l=e(n);return l}finally{if(Ws=!1,(pi!==null||Ea!==null)&&(Mc(),pi&&(n=pi,e=Ea,Ea=pi=null,fs(n),e)))for(n=0;n<e.length;n++)fs(e[n])}}function Wn(e,n){var i=e.stateNode;if(i===null)return null;var l=i[Ft]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=!1;if(kn)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){hs=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{hs=!1}var Ta=null,dl=null,ds=null;function ml(){if(ds)return ds;var e,n=dl,i=n.length,l,f="value"in Ta?Ta.value:Ta.textContent,d=f.length;for(e=0;e<i&&n[e]===f[e];e++);var v=i-e;for(l=1;l<=v&&n[i-l]===f[d-l];l++);return ds=f.slice(e,1<l?1-l:void 0)}function ms(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function za(){return!0}function ea(){return!1}function Zt(e){function n(i,l,f,d,v){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?za:ea,this.isPropagationStopped=ea,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),n}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Zt(Pa),yi=T({},Pa,{view:0,detail:0}),pl=Zt(yi),vi,er,wa,tr=T({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(vi=e.screenX-wa.screenX,er=e.screenY-wa.screenY):er=vi=0,wa=e),vi)},movementY:function(e){return"movementY"in e?e.movementY:er}}),gl=Zt(tr),ps=T({},tr,{dataTransfer:0}),Bo=Zt(ps),Uo=T({},yi,{relatedTarget:0}),gs=Zt(Uo),yl=T({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),zo=Zt(yl),nr=T({},Pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Po=Zt(nr),Go=T({},Pa,{data:0}),Aa=Zt(Go),qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ho={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Fo[e])?!!n[e]:!1}function _i(){return Qo}var hn=T({},yi,{key:function(e){if(e.key){var n=qo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ho[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(e){return e.type==="keypress"?ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xo=Zt(hn),Yo=T({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Zt(Yo),u=T({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),p=Zt(u),b=T({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Zt(b),q=T({},tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Zt(q),fe=T({},Pa,{newState:0,oldState:0}),Ve=Zt(fe),At=[9,13,27,32],et=kn&&"CompositionEvent"in window,_t=null;kn&&"documentMode"in document&&(_t=document.documentMode);var Ln=kn&&"TextEvent"in window&&!_t,Ca=kn&&(!et||_t&&8<_t&&11>=_t),ta=" ",na=!1;function ys(e,n){switch(e){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ar(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ir=!1;function fb(e,n){switch(e){case"compositionend":return ar(n);case"keypress":return n.which!==32?null:(na=!0,ta);case"textInput":return e=n.data,e===ta&&na?null:e;default:return null}}function hb(e,n){if(ir)return e==="compositionend"||!et&&ys(e,n)?(e=ml(),ds=dl=Ta=null,ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ca&&n.locale!=="ko"?null:n.data;default:return null}}var db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!db[e.type]:n==="textarea"}function wm(e,n,i,l){pi?Ea?Ea.push(l):Ea=[l]:pi=l,n=Lc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var vl=null,_l=null;function mb(e){l0(e,0)}function Ko(e){var n=Tn(e);if(cs(n))return e}function Am(e,n){if(e==="change")return n}var Cm=!1;if(kn){var Wu;if(kn){var ef="oninput"in document;if(!ef){var Nm=document.createElement("div");Nm.setAttribute("oninput","return;"),ef=typeof Nm.oninput=="function"}Wu=ef}else Wu=!1;Cm=Wu&&(!document.documentMode||9<document.documentMode)}function Rm(){vl&&(vl.detachEvent("onpropertychange",Mm),_l=vl=null)}function Mm(e){if(e.propertyName==="value"&&Ko(_l)){var n=[];wm(n,_l,e,jn(e)),gi(mb,n)}}function pb(e,n,i){e==="focusin"?(Rm(),vl=n,_l=i,vl.attachEvent("onpropertychange",Mm)):e==="focusout"&&Rm()}function gb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ko(_l)}function yb(e,n){if(e==="click")return Ko(n)}function vb(e,n){if(e==="input"||e==="change")return Ko(n)}function _b(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var wn=typeof Object.is=="function"?Object.is:_b;function bl(e,n){if(wn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!at.call(n,f)||!wn(e[f],n[f]))return!1}return!0}function Im(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dm(e,n){var i=Im(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Im(i)}}function Om(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Om(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Vm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xa(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=xa(e.document)}return n}function tf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var bb=kn&&"documentMode"in document&&11>=document.documentMode,sr=null,nf=null,xl=null,af=!1;function jm(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;af||sr==null||sr!==xa(l)||(l=sr,"selectionStart"in l&&tf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),xl&&bl(xl,l)||(xl=l,l=Lc(nf,"onSelect"),0<l.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=sr)))}function vs(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var rr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},sf={},km={};kn&&(km=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function _s(e){if(sf[e])return sf[e];if(!rr[e])return e;var n=rr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in km)return sf[e]=n[i];return e}var Lm=_s("animationend"),Bm=_s("animationiteration"),Um=_s("animationstart"),xb=_s("transitionrun"),Eb=_s("transitionstart"),Tb=_s("transitioncancel"),zm=_s("transitionend"),Pm=new Map,rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rf.push("scrollEnd");function aa(e,n){Pm.set(e,n),_a(n,[e])}var $o=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bn=[],lr=0,lf=0;function Zo(){for(var e=lr,n=lf=lr=0;n<e;){var i=Bn[n];Bn[n++]=null;var l=Bn[n];Bn[n++]=null;var f=Bn[n];Bn[n++]=null;var d=Bn[n];if(Bn[n++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&Gm(i,f,d)}}function Jo(e,n,i,l){Bn[lr++]=e,Bn[lr++]=n,Bn[lr++]=i,Bn[lr++]=l,lf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function of(e,n,i,l){return Jo(e,n,i,l),Wo(e)}function bs(e,n){return Jo(e,null,null,n),Wo(e)}function Gm(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var f=!1,d=e.return;d!==null;)d.childLanes|=i,l=d.alternate,l!==null&&(l.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&n!==null&&(f=31-wt(i),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[n]:l.push(n),n.lane=i|536870912),d):null}function Wo(e){if(50<ql)throw ql=0,yh=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var or={};function Sb(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,n,i,l){return new Sb(e,n,i,l)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qa(e,n){var i=e.alternate;return i===null?(i=An(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function qm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ec(e,n,i,l,f,d){var v=0;if(l=e,typeof e=="function")cf(e)&&(v=1);else if(typeof e=="string")v=R1(e,i,ye.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=An(31,i,n,f),e.elementType=C,e.lanes=d,e;case P:return xs(i.children,f,d,n);case k:v=8,f|=24;break;case V:return e=An(12,i,n,f|2),e.elementType=V,e.lanes=d,e;case ce:return e=An(13,i,n,f),e.elementType=ce,e.lanes=d,e;case oe:return e=An(19,i,n,f),e.elementType=oe,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ne:v=10;break e;case J:v=9;break e;case re:v=11;break e;case M:v=14;break e;case S:v=16,l=null;break e}v=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=An(v,i,n,f),n.elementType=e,n.type=l,n.lanes=d,n}function xs(e,n,i,l){return e=An(7,e,l,n),e.lanes=i,e}function uf(e,n,i){return e=An(6,e,null,n),e.lanes=i,e}function Hm(e){var n=An(18,null,null,0);return n.stateNode=e,n}function ff(e,n,i){return n=An(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Fm=new WeakMap;function Un(e,n){if(typeof e=="object"&&e!==null){var i=Fm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Mt(n)},Fm.set(e,n),n)}return{value:e,source:n,stack:Mt(n)}}var cr=[],ur=0,tc=null,El=0,zn=[],Pn=0,bi=null,Na=1,Ra="";function Ha(e,n){cr[ur++]=El,cr[ur++]=tc,tc=e,El=n}function Qm(e,n,i){zn[Pn++]=Na,zn[Pn++]=Ra,zn[Pn++]=bi,bi=e;var l=Na;e=Ra;var f=32-wt(l)-1;l&=~(1<<f),i+=1;var d=32-wt(n)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Na=1<<32-wt(n)+f|i<<f|l,Ra=d+e}else Na=1<<d|i<<f|l,Ra=e}function hf(e){e.return!==null&&(Ha(e,1),Qm(e,1,0))}function df(e){for(;e===tc;)tc=cr[--ur],cr[ur]=null,El=cr[--ur],cr[ur]=null;for(;e===bi;)bi=zn[--Pn],zn[Pn]=null,Ra=zn[--Pn],zn[Pn]=null,Na=zn[--Pn],zn[Pn]=null}function Xm(e,n){zn[Pn++]=Na,zn[Pn++]=Ra,zn[Pn++]=bi,Na=n.id,Ra=n.overflow,bi=e}var Jt=null,gt=null,Xe=!1,xi=null,Gn=!1,mf=Error(s(519));function Ei(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Un(n,e)),mf}function Ym(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[Ot]=e,n[Ft]=l,i){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(i=0;i<Fl.length;i++)Pe(Fl[i],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":Pe("invalid",n),Vo(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",n);break;case"textarea":Pe("invalid",n),di(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||f0(n.textContent,i)?(l.popover!=null&&(Pe("beforetoggle",n),Pe("toggle",n)),l.onScroll!=null&&Pe("scroll",n),l.onScrollEnd!=null&&Pe("scrollend",n),l.onClick!=null&&(n.onclick=Jn),n=!0):n=!1,n||Ei(e,!0)}function Km(e){for(Jt=e.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Jt=Jt.return}}function fr(e){if(e!==Jt)return!1;if(!Xe)return Km(e),Xe=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Dh(e.type,e.memoizedProps)),i=!i),i&&gt&&Ei(e),Km(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=b0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=b0(e)}else n===27?(n=gt,ki(e.type)?(e=Lh,Lh=null,gt=e):gt=n):gt=Jt?Hn(e.stateNode.nextSibling):null;return!0}function Es(){gt=Jt=null,Xe=!1}function pf(){var e=xi;return e!==null&&(_n===null?_n=e:_n.push.apply(_n,e),xi=null),e}function Tl(e){xi===null?xi=[e]:xi.push(e)}var gf=O(null),Ts=null,Fa=null;function Ti(e,n,i){ue(gf,n._currentValue),n._currentValue=i}function Qa(e){e._currentValue=gf.current,ae(gf)}function yf(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function vf(e,n,i,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=f;for(var I=0;I<n.length;I++)if(E.context===n[I]){d.lanes|=i,E=d.alternate,E!==null&&(E.lanes|=i),yf(d.return,i,e),l||(v=null);break e}d=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=i,d=v.alternate,d!==null&&(d.lanes|=i),yf(v,i,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function hr(e,n,i,l){e=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=f.type;wn(f.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(f===he.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push($l):e=[$l])}f=f.return}e!==null&&vf(n,e,i,l),n.flags|=262144}function nc(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ss(e){Ts=e,Fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return $m(Ts,e)}function ac(e,n){return Ts===null&&Ss(e),$m(e,n)}function $m(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Fa===null){if(e===null)throw Error(s(308));Fa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Fa=Fa.next=n;return i}var wb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Ab=r.unstable_scheduleCallback,Cb=r.unstable_NormalPriority,kt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new wb,data:new Map,refCount:0}}function Sl(e){e.refCount--,e.refCount===0&&Ab(Cb,function(){e.controller.abort()})}var wl=null,bf=0,dr=0,mr=null;function Nb(e,n){if(wl===null){var i=wl=[];bf=0,dr=Th(),mr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return bf++,n.then(Zm,Zm),n}function Zm(){if(--bf===0&&wl!==null){mr!==null&&(mr.status="fulfilled");var e=wl;wl=null,dr=0,mr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Rb(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var Jm=X.S;X.S=function(e,n){jg=It(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Nb(e,n),Jm!==null&&Jm(e,n)};var ws=O(null);function xf(){var e=ws.current;return e!==null?e:mt.pooledCache}function ic(e,n){n===null?ue(ws,ws.current):ue(ws,n.pool)}function Wm(){var e=xf();return e===null?null:{parent:kt._currentValue,pool:e}}var pr=Error(s(460)),Ef=Error(s(474)),sc=Error(s(542)),rc={then:function(){}};function ep(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tp(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Jn,Jn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ap(e),e;default:if(typeof n.status=="string")n.then(Jn,Jn);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ap(e),e}throw Cs=n,pr}}function As(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Cs=i,pr):i}}var Cs=null;function np(){if(Cs===null)throw Error(s(459));var e=Cs;return Cs=null,e}function ap(e){if(e===pr||e===sc)throw Error(s(483))}var gr=null,Al=0;function lc(e){var n=Al;return Al+=1,gr===null&&(gr=[]),tp(gr,e,n)}function Cl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function oc(e,n){throw n.$$typeof===A?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ip(e){function n(z,j){if(e){var H=z.deletions;H===null?(z.deletions=[j],z.flags|=16):H.push(j)}}function i(z,j){if(!e)return null;for(;j!==null;)n(z,j),j=j.sibling;return null}function l(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function f(z,j){return z=qa(z,j),z.index=0,z.sibling=null,z}function d(z,j,H){return z.index=H,e?(H=z.alternate,H!==null?(H=H.index,H<j?(z.flags|=67108866,j):H):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function v(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function E(z,j,H,Z){return j===null||j.tag!==6?(j=uf(H,z.mode,Z),j.return=z,j):(j=f(j,H),j.return=z,j)}function I(z,j,H,Z){var Se=H.type;return Se===P?$(z,j,H.props.children,Z,H.key):j!==null&&(j.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&As(Se)===j.type)?(j=f(j,H.props),Cl(j,H),j.return=z,j):(j=ec(H.type,H.key,H.props,null,z.mode,Z),Cl(j,H),j.return=z,j)}function F(z,j,H,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=ff(H,z.mode,Z),j.return=z,j):(j=f(j,H.children||[]),j.return=z,j)}function $(z,j,H,Z,Se){return j===null||j.tag!==7?(j=xs(H,z.mode,Z,Se),j.return=z,j):(j=f(j,H),j.return=z,j)}function W(z,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=uf(""+j,z.mode,H),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case U:return H=ec(j.type,j.key,j.props,null,z.mode,H),Cl(H,j),H.return=z,H;case B:return j=ff(j,z.mode,H),j.return=z,j;case S:return j=As(j),W(z,j,H)}if(We(j)||L(j))return j=xs(j,z.mode,H,null),j.return=z,j;if(typeof j.then=="function")return W(z,lc(j),H);if(j.$$typeof===ne)return W(z,ac(z,j),H);oc(z,j)}return null}function Q(z,j,H,Z){var Se=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:E(z,j,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case U:return H.key===Se?I(z,j,H,Z):null;case B:return H.key===Se?F(z,j,H,Z):null;case S:return H=As(H),Q(z,j,H,Z)}if(We(H)||L(H))return Se!==null?null:$(z,j,H,Z,null);if(typeof H.then=="function")return Q(z,j,lc(H),Z);if(H.$$typeof===ne)return Q(z,j,ac(z,H),Z);oc(z,H)}return null}function K(z,j,H,Z,Se){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(H)||null,E(j,z,""+Z,Se);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:return z=z.get(Z.key===null?H:Z.key)||null,I(j,z,Z,Se);case B:return z=z.get(Z.key===null?H:Z.key)||null,F(j,z,Z,Se);case S:return Z=As(Z),K(z,j,H,Z,Se)}if(We(Z)||L(Z))return z=z.get(H)||null,$(j,z,Z,Se,null);if(typeof Z.then=="function")return K(z,j,H,lc(Z),Se);if(Z.$$typeof===ne)return K(z,j,H,ac(j,Z),Se);oc(j,Z)}return null}function be(z,j,H,Z){for(var Se=null,Ze=null,Ee=j,ke=j=0,qe=null;Ee!==null&&ke<H.length;ke++){Ee.index>ke?(qe=Ee,Ee=null):qe=Ee.sibling;var Je=Q(z,Ee,H[ke],Z);if(Je===null){Ee===null&&(Ee=qe);break}e&&Ee&&Je.alternate===null&&n(z,Ee),j=d(Je,j,ke),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je,Ee=qe}if(ke===H.length)return i(z,Ee),Xe&&Ha(z,ke),Se;if(Ee===null){for(;ke<H.length;ke++)Ee=W(z,H[ke],Z),Ee!==null&&(j=d(Ee,j,ke),Ze===null?Se=Ee:Ze.sibling=Ee,Ze=Ee);return Xe&&Ha(z,ke),Se}for(Ee=l(Ee);ke<H.length;ke++)qe=K(Ee,z,ke,H[ke],Z),qe!==null&&(e&&qe.alternate!==null&&Ee.delete(qe.key===null?ke:qe.key),j=d(qe,j,ke),Ze===null?Se=qe:Ze.sibling=qe,Ze=qe);return e&&Ee.forEach(function(Pi){return n(z,Pi)}),Xe&&Ha(z,ke),Se}function Ce(z,j,H,Z){if(H==null)throw Error(s(151));for(var Se=null,Ze=null,Ee=j,ke=j=0,qe=null,Je=H.next();Ee!==null&&!Je.done;ke++,Je=H.next()){Ee.index>ke?(qe=Ee,Ee=null):qe=Ee.sibling;var Pi=Q(z,Ee,Je.value,Z);if(Pi===null){Ee===null&&(Ee=qe);break}e&&Ee&&Pi.alternate===null&&n(z,Ee),j=d(Pi,j,ke),Ze===null?Se=Pi:Ze.sibling=Pi,Ze=Pi,Ee=qe}if(Je.done)return i(z,Ee),Xe&&Ha(z,ke),Se;if(Ee===null){for(;!Je.done;ke++,Je=H.next())Je=W(z,Je.value,Z),Je!==null&&(j=d(Je,j,ke),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je);return Xe&&Ha(z,ke),Se}for(Ee=l(Ee);!Je.done;ke++,Je=H.next())Je=K(Ee,z,ke,Je.value,Z),Je!==null&&(e&&Je.alternate!==null&&Ee.delete(Je.key===null?ke:Je.key),j=d(Je,j,ke),Ze===null?Se=Je:Ze.sibling=Je,Ze=Je);return e&&Ee.forEach(function(z1){return n(z,z1)}),Xe&&Ha(z,ke),Se}function ht(z,j,H,Z){if(typeof H=="object"&&H!==null&&H.type===P&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case U:e:{for(var Se=H.key;j!==null;){if(j.key===Se){if(Se=H.type,Se===P){if(j.tag===7){i(z,j.sibling),Z=f(j,H.props.children),Z.return=z,z=Z;break e}}else if(j.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&As(Se)===j.type){i(z,j.sibling),Z=f(j,H.props),Cl(Z,H),Z.return=z,z=Z;break e}i(z,j);break}else n(z,j);j=j.sibling}H.type===P?(Z=xs(H.props.children,z.mode,Z,H.key),Z.return=z,z=Z):(Z=ec(H.type,H.key,H.props,null,z.mode,Z),Cl(Z,H),Z.return=z,z=Z)}return v(z);case B:e:{for(Se=H.key;j!==null;){if(j.key===Se)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){i(z,j.sibling),Z=f(j,H.children||[]),Z.return=z,z=Z;break e}else{i(z,j);break}else n(z,j);j=j.sibling}Z=ff(H,z.mode,Z),Z.return=z,z=Z}return v(z);case S:return H=As(H),ht(z,j,H,Z)}if(We(H))return be(z,j,H,Z);if(L(H)){if(Se=L(H),typeof Se!="function")throw Error(s(150));return H=Se.call(H),Ce(z,j,H,Z)}if(typeof H.then=="function")return ht(z,j,lc(H),Z);if(H.$$typeof===ne)return ht(z,j,ac(z,H),Z);oc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(i(z,j.sibling),Z=f(j,H),Z.return=z,z=Z):(i(z,j),Z=uf(H,z.mode,Z),Z.return=z,z=Z),v(z)):i(z,j)}return function(z,j,H,Z){try{Al=0;var Se=ht(z,j,H,Z);return gr=null,Se}catch(Ee){if(Ee===pr||Ee===sc)throw Ee;var Ze=An(29,Ee,null,z.mode);return Ze.lanes=Z,Ze.return=z,Ze}finally{}}}var Ns=ip(!0),sp=ip(!1),Si=!1;function Tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=Wo(e),Gm(e,null,i),n}return Jo(e,l,n,i),Wo(e)}function Nl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,tl(e,i)}}function wf(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,i=i.next}while(i!==null);d===null?f=d=n:d=d.next=n}else f=d=n;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Af=!1;function Rl(){if(Af){var e=mr;if(e!==null)throw e}}function Ml(e,n,i,l){Af=!1;var f=e.updateQueue;Si=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var I=E,F=I.next;I.next=null,v===null?d=F:v.next=F,v=I;var $=e.alternate;$!==null&&($=$.updateQueue,E=$.lastBaseUpdate,E!==v&&(E===null?$.firstBaseUpdate=F:E.next=F,$.lastBaseUpdate=I))}if(d!==null){var W=f.baseState;v=0,$=F=I=null,E=d;do{var Q=E.lane&-536870913,K=Q!==E.lane;if(K?(Ge&Q)===Q:(l&Q)===Q){Q!==0&&Q===dr&&(Af=!0),$!==null&&($=$.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var be=e,Ce=E;Q=n;var ht=i;switch(Ce.tag){case 1:if(be=Ce.payload,typeof be=="function"){W=be.call(ht,W,Q);break e}W=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ce.payload,Q=typeof be=="function"?be.call(ht,W,Q):be,Q==null)break e;W=T({},W,Q);break e;case 2:Si=!0}}Q=E.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},$===null?(F=$=K,I=W):$=$.next=K,v|=Q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;K=E,E=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);$===null&&(I=W),f.baseState=I,f.firstBaseUpdate=F,f.lastBaseUpdate=$,d===null&&(f.shared.lanes=0),Ii|=v,e.lanes=v,e.memoizedState=W}}function rp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function lp(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)rp(i[e],n)}var yr=O(null),cc=O(0);function op(e,n){e=ti,ue(cc,e),ue(yr,n),ti=e|n.baseLanes}function Cf(){ue(cc,ti),ue(yr,yr.current)}function Nf(){ti=cc.current,ae(yr),ae(cc)}var Cn=O(null),qn=null;function Ci(e){var n=e.alternate;ue(Ct,Ct.current&1),ue(Cn,e),qn===null&&(n===null||yr.current!==null||n.memoizedState!==null)&&(qn=e)}function Rf(e){ue(Ct,Ct.current),ue(Cn,e),qn===null&&(qn=e)}function cp(e){e.tag===22?(ue(Ct,Ct.current),ue(Cn,e),qn===null&&(qn=e)):Ni()}function Ni(){ue(Ct,Ct.current),ue(Cn,Cn.current)}function Nn(e){ae(Cn),qn===e&&(qn=null),ae(Ct)}var Ct=O(0);function uc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||jh(i)||kh(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Xa=0,je=null,ut=null,Lt=null,fc=!1,vr=!1,Rs=!1,hc=0,Il=0,_r=null,Mb=0;function Et(){throw Error(s(321))}function Mf(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!wn(e[i],n[i]))return!1;return!0}function If(e,n,i,l,f,d){return Xa=d,je=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=e===null||e.memoizedState===null?Qp:Qf,Rs=!1,d=i(l,f),Rs=!1,vr&&(d=fp(n,i,l,f)),up(e),d}function up(e){X.H=Vl;var n=ut!==null&&ut.next!==null;if(Xa=0,Lt=ut=je=null,fc=!1,Il=0,_r=null,n)throw Error(s(300));e===null||Bt||(e=e.dependencies,e!==null&&nc(e)&&(Bt=!0))}function fp(e,n,i,l){je=e;var f=0;do{if(vr&&(_r=null),Il=0,vr=!1,25<=f)throw Error(s(301));if(f+=1,Lt=ut=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=Xp,d=n(i,l)}while(vr);return d}function Ib(){var e=X.H,n=e.useState()[0];return n=typeof n.then=="function"?Dl(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(je.flags|=1024),n}function Df(){var e=hc!==0;return hc=0,e}function Of(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Vf(e){if(fc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}fc=!1}Xa=0,Lt=ut=je=null,vr=!1,Il=hc=0,_r=null}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?je.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Nt(){if(ut===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=Lt===null?je.memoizedState:Lt.next;if(n!==null)Lt=n,ut=e;else{if(e===null)throw je.alternate===null?Error(s(467)):Error(s(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Lt===null?je.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(e){var n=Il;return Il+=1,_r===null&&(_r=[]),e=tp(_r,e,n),n=je,(Lt===null?n.memoizedState:Lt.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?Qp:Qf),e}function mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Dl(e);if(e.$$typeof===ne)return Wt(e)}throw Error(s(438,String(e)))}function jf(e){var n=null,i=je.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=dc(),je.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=N;return n.index++,i}function Ya(e,n){return typeof n=="function"?n(e):n}function pc(e){var n=Nt();return kf(n,ut,e)}function kf(e,n,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}n.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{n=f.next;var E=v=null,I=null,F=n,$=!1;do{var W=F.lane&-536870913;if(W!==F.lane?(Ge&W)===W:(Xa&W)===W){var Q=F.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),W===dr&&($=!0);else if((Xa&Q)===Q){F=F.next,Q===dr&&($=!0);continue}else W={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(E=I=W,v=d):I=I.next=W,je.lanes|=Q,Ii|=Q;W=F.action,Rs&&i(d,W),d=F.hasEagerState?F.eagerState:i(d,W)}else Q={lane:W,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(E=I=Q,v=d):I=I.next=Q,je.lanes|=W,Ii|=W;F=F.next}while(F!==null&&F!==n);if(I===null?v=d:I.next=E,!wn(d,e.memoizedState)&&(Bt=!0,$&&(i=mr,i!==null)))throw i;e.memoizedState=d,e.baseState=v,e.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Lf(e){var n=Nt(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,f=i.pending,d=n.memoizedState;if(f!==null){i.pending=null;var v=f=f.next;do d=e(d,v.action),v=v.next;while(v!==f);wn(d,n.memoizedState)||(Bt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),i.lastRenderedState=d}return[d,l]}function hp(e,n,i){var l=je,f=Nt(),d=Xe;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=n();var v=!wn((ut||f).memoizedState,i);if(v&&(f.memoizedState=i,Bt=!0),f=f.queue,zf(pp.bind(null,l,f,e),[e]),f.getSnapshot!==n||v||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,br(9,{destroy:void 0},mp.bind(null,l,f,i,n),null),mt===null)throw Error(s(349));d||(Xa&127)!==0||dp(l,n,i)}return i}function dp(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=je.updateQueue,n===null?(n=dc(),je.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function mp(e,n,i,l){n.value=i,n.getSnapshot=l,gp(n)&&yp(e)}function pp(e,n,i){return i(function(){gp(n)&&yp(e)})}function gp(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!wn(e,i)}catch{return!0}}function yp(e){var n=bs(e,2);n!==null&&bn(n,e,2)}function Bf(e){var n=dn();if(typeof e=="function"){var i=e;if(e=i(),Rs){On(!0);try{i()}finally{On(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},n}function vp(e,n,i,l){return e.baseState=i,kf(e,ut,typeof l=="function"?l:Ya)}function Db(e,n,i,l,f){if(vc(e))throw Error(s(485));if(e=n.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};X.T!==null?i(!0):d.isTransition=!1,l(d),i=n.pending,i===null?(d.next=n.pending=d,_p(n,d)):(d.next=i.next,n.pending=i.next=d)}}function _p(e,n){var i=n.action,l=n.payload,f=e.state;if(n.isTransition){var d=X.T,v={};X.T=v;try{var E=i(f,l),I=X.S;I!==null&&I(v,E),bp(e,n,E)}catch(F){Uf(e,n,F)}finally{d!==null&&v.types!==null&&(d.types=v.types),X.T=d}}else try{d=i(f,l),bp(e,n,d)}catch(F){Uf(e,n,F)}}function bp(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){xp(e,n,l)},function(l){return Uf(e,n,l)}):xp(e,n,i)}function xp(e,n,i){n.status="fulfilled",n.value=i,Ep(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,_p(e,i)))}function Uf(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,Ep(n),n=n.next;while(n!==l)}e.action=null}function Ep(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Tp(e,n){return n}function Sp(e,n){if(Xe){var i=mt.formState;if(i!==null){e:{var l=je;if(Xe){if(gt){t:{for(var f=gt,d=Gn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Hn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){gt=Hn(f.nextSibling),l=f.data==="F!";break e}}Ei(l)}l=!1}l&&(n=i[0])}}return i=dn(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:n},i.queue=l,i=qp.bind(null,je,l),l.dispatch=i,l=Bf(!1),d=Ff.bind(null,je,!1,l.queue),l=dn(),f={state:n,dispatch:null,action:e,pending:null},l.queue=f,i=Db.bind(null,je,f,d,i),f.dispatch=i,l.memoizedState=e,[n,i,!1]}function wp(e){var n=Nt();return Ap(n,ut,e)}function Ap(e,n,i){if(n=kf(e,n,Tp)[0],e=pc(Ya)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Dl(n)}catch(v){throw v===pr?sc:v}else l=n;n=Nt();var f=n.queue,d=f.dispatch;return i!==n.memoizedState&&(je.flags|=2048,br(9,{destroy:void 0},Ob.bind(null,f,i),null)),[l,d,e]}function Ob(e,n){e.action=n}function Cp(e){var n=Nt(),i=ut;if(i!==null)return Ap(n,i,e);Nt(),n=n.memoizedState,i=Nt();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function br(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=je.updateQueue,n===null&&(n=dc(),je.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function Np(){return Nt().memoizedState}function gc(e,n,i,l){var f=dn();je.flags|=e,f.memoizedState=br(1|n,{destroy:void 0},i,l===void 0?null:l)}function yc(e,n,i,l){var f=Nt();l=l===void 0?null:l;var d=f.memoizedState.inst;ut!==null&&l!==null&&Mf(l,ut.memoizedState.deps)?f.memoizedState=br(n,d,i,l):(je.flags|=e,f.memoizedState=br(1|n,d,i,l))}function Rp(e,n){gc(8390656,8,e,n)}function zf(e,n){yc(2048,8,e,n)}function Vb(e){je.flags|=4;var n=je.updateQueue;if(n===null)n=dc(),je.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Mp(e){var n=Nt().memoizedState;return Vb({ref:n,nextImpl:e}),function(){if((tt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Ip(e,n){return yc(4,2,e,n)}function Dp(e,n){return yc(4,4,e,n)}function Op(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Vp(e,n,i){i=i!=null?i.concat([e]):null,yc(4,4,Op.bind(null,n,e),i)}function Pf(){}function jp(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&Mf(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function kp(e,n){var i=Nt();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&Mf(n,l[1]))return l[0];if(l=e(),Rs){On(!0);try{e()}finally{On(!1)}}return i.memoizedState=[l,n],l}function Gf(e,n,i){return i===void 0||(Xa&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Lg(),je.lanes|=e,Ii|=e,i)}function Lp(e,n,i,l){return wn(i,n)?i:yr.current!==null?(e=Gf(e,i,l),wn(e,n)||(Bt=!0),e):(Xa&42)===0||(Xa&1073741824)!==0&&(Ge&261930)===0?(Bt=!0,e.memoizedState=i):(e=Lg(),je.lanes|=e,Ii|=e,n)}function Bp(e,n,i,l,f){var d=le.p;le.p=d!==0&&8>d?d:8;var v=X.T,E={};X.T=E,Ff(e,!1,n,i);try{var I=f(),F=X.S;if(F!==null&&F(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=Rb(I,l);Ol(e,n,$,In(e))}else Ol(e,n,l,In(e))}catch(W){Ol(e,n,{then:function(){},status:"rejected",reason:W},In())}finally{le.p=d,v!==null&&E.types!==null&&(v.types=E.types),X.T=v}}function jb(){}function qf(e,n,i,l){if(e.tag!==5)throw Error(s(476));var f=Up(e).queue;Bp(e,f,n,xe,i===null?jb:function(){return zp(e),i(l)})}function Up(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:xe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function zp(e){var n=Up(e);n.next===null&&(n=e.alternate.memoizedState),Ol(e,n.next.queue,{},In())}function Hf(){return Wt($l)}function Pp(){return Nt().memoizedState}function Gp(){return Nt().memoizedState}function kb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=In();e=wi(i);var l=Ai(n,e,i);l!==null&&(bn(l,n,i),Nl(l,n,i)),n={cache:_f()},e.payload=n;return}n=n.return}}function Lb(e,n,i){var l=In();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},vc(e)?Hp(n,i):(i=of(e,n,i,l),i!==null&&(bn(i,e,l),Fp(i,n,l)))}function qp(e,n,i){var l=In();Ol(e,n,i,l)}function Ol(e,n,i,l){var f={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(vc(e))Hp(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var v=n.lastRenderedState,E=d(v,i);if(f.hasEagerState=!0,f.eagerState=E,wn(E,v))return Jo(e,n,f,0),mt===null&&Zo(),!1}catch{}finally{}if(i=of(e,n,f,l),i!==null)return bn(i,e,l),Fp(i,n,l),!0}return!1}function Ff(e,n,i,l){if(l={lane:2,revertLane:Th(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vc(e)){if(n)throw Error(s(479))}else n=of(e,i,l,2),n!==null&&bn(n,e,2)}function vc(e){var n=e.alternate;return e===je||n!==null&&n===je}function Hp(e,n){vr=fc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Fp(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,tl(e,i)}}var Vl={readContext:Wt,use:mc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Vl.useEffectEvent=Et;var Qp={readContext:Wt,use:mc,useCallback:function(e,n){return dn().memoizedState=[e,n===void 0?null:n],e},useContext:Wt,useEffect:Rp,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,gc(4194308,4,Op.bind(null,n,e),i)},useLayoutEffect:function(e,n){return gc(4194308,4,e,n)},useInsertionEffect:function(e,n){gc(4,2,e,n)},useMemo:function(e,n){var i=dn();n=n===void 0?null:n;var l=e();if(Rs){On(!0);try{e()}finally{On(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=dn();if(i!==void 0){var f=i(n);if(Rs){On(!0);try{i(n)}finally{On(!1)}}}else f=n;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Lb.bind(null,je,e),[l.memoizedState,e]},useRef:function(e){var n=dn();return e={current:e},n.memoizedState=e},useState:function(e){e=Bf(e);var n=e.queue,i=qp.bind(null,je,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Pf,useDeferredValue:function(e,n){var i=dn();return Gf(i,e,n)},useTransition:function(){var e=Bf(!1);return e=Bp.bind(null,je,e.queue,!0,!1),dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=je,f=dn();if(Xe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),mt===null)throw Error(s(349));(Ge&127)!==0||dp(l,n,i)}f.memoizedState=i;var d={value:i,getSnapshot:n};return f.queue=d,Rp(pp.bind(null,l,d,e),[e]),l.flags|=2048,br(9,{destroy:void 0},mp.bind(null,l,d,i,n),null),i},useId:function(){var e=dn(),n=mt.identifierPrefix;if(Xe){var i=Ra,l=Na;i=(l&~(1<<32-wt(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=hc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Mb++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hf,useFormState:Sp,useActionState:Sp,useOptimistic:function(e){var n=dn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Ff.bind(null,je,!0,i),i.dispatch=n,[e,n]},useMemoCache:jf,useCacheRefresh:function(){return dn().memoizedState=kb.bind(null,je)},useEffectEvent:function(e){var n=dn(),i={impl:e};return n.memoizedState=i,function(){if((tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Qf={readContext:Wt,use:mc,useCallback:jp,useContext:Wt,useEffect:zf,useImperativeHandle:Vp,useInsertionEffect:Ip,useLayoutEffect:Dp,useMemo:kp,useReducer:pc,useRef:Np,useState:function(){return pc(Ya)},useDebugValue:Pf,useDeferredValue:function(e,n){var i=Nt();return Lp(i,ut.memoizedState,e,n)},useTransition:function(){var e=pc(Ya)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:hp,useId:Pp,useHostTransitionStatus:Hf,useFormState:wp,useActionState:wp,useOptimistic:function(e,n){var i=Nt();return vp(i,ut,e,n)},useMemoCache:jf,useCacheRefresh:Gp};Qf.useEffectEvent=Mp;var Xp={readContext:Wt,use:mc,useCallback:jp,useContext:Wt,useEffect:zf,useImperativeHandle:Vp,useInsertionEffect:Ip,useLayoutEffect:Dp,useMemo:kp,useReducer:Lf,useRef:Np,useState:function(){return Lf(Ya)},useDebugValue:Pf,useDeferredValue:function(e,n){var i=Nt();return ut===null?Gf(i,e,n):Lp(i,ut.memoizedState,e,n)},useTransition:function(){var e=Lf(Ya)[0],n=Nt().memoizedState;return[typeof e=="boolean"?e:Dl(e),n]},useSyncExternalStore:hp,useId:Pp,useHostTransitionStatus:Hf,useFormState:Cp,useActionState:Cp,useOptimistic:function(e,n){var i=Nt();return ut!==null?vp(i,ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:jf,useCacheRefresh:Gp};Xp.useEffectEvent=Mp;function Xf(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:T({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yf={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=In(),f=wi(l);f.payload=n,i!=null&&(f.callback=i),n=Ai(e,f,l),n!==null&&(bn(n,e,l),Nl(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=In(),f=wi(l);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Ai(e,f,l),n!==null&&(bn(n,e,l),Nl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=In(),l=wi(i);l.tag=2,n!=null&&(l.callback=n),n=Ai(e,l,i),n!==null&&(bn(n,e,i),Nl(n,e,i))}};function Yp(e,n,i,l,f,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):n.prototype&&n.prototype.isPureReactComponent?!bl(i,l)||!bl(f,d):!0}function Kp(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&Yf.enqueueReplaceState(n,n.state,null)}function Ms(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=T({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function $p(e){$o(e)}function Zp(e){console.error(e)}function Jp(e){$o(e)}function _c(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Wp(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kf(e,n,i){return i=wi(i),i.tag=3,i.payload={element:null},i.callback=function(){_c(e,n)},i}function eg(e){return e=wi(e),e.tag=3,e}function tg(e,n,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Wp(n,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Wp(n,i,l),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function Bb(e,n,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&hr(n,i,f,!0),i=Cn.current,i!==null){switch(i.tag){case 31:case 13:return qn===null?Ic():i.alternate===null&&Tt===0&&(Tt=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===rc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),bh(e,l,f)),!1;case 22:return i.flags|=65536,l===rc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),bh(e,l,f)),!1}throw Error(s(435,i.tag))}return bh(e,l,f),Ic(),!1}if(Xe)return n=Cn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==mf&&(e=Error(s(422),{cause:l}),Tl(Un(e,i)))):(l!==mf&&(n=Error(s(423),{cause:l}),Tl(Un(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Un(l,i),f=Kf(e.stateNode,l,f),wf(e,f),Tt!==4&&(Tt=2)),!1;var d=Error(s(520),{cause:l});if(d=Un(d,i),Gl===null?Gl=[d]:Gl.push(d),Tt!==4&&(Tt=2),n===null)return!0;l=Un(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=Kf(i.stateNode,l,e),wf(i,e),!1;case 1:if(n=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Di===null||!Di.has(d))))return i.flags|=65536,f&=-f,i.lanes|=f,f=eg(f),tg(f,e,i,l),wf(i,f),!1}i=i.return}while(i!==null);return!1}var $f=Error(s(461)),Bt=!1;function en(e,n,i,l){n.child=e===null?sp(n,null,i,l):Ns(n,e.child,i,l)}function ng(e,n,i,l,f){i=i.render;var d=n.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Ss(n),l=If(e,n,i,v,d,f),E=Df(),e!==null&&!Bt?(Of(e,n,f),Ka(e,n,f)):(Xe&&E&&hf(n),n.flags|=1,en(e,n,l,f),n.child)}function ag(e,n,i,l,f){if(e===null){var d=i.type;return typeof d=="function"&&!cf(d)&&d.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=d,ig(e,n,d,l,f)):(e=ec(i.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!ih(e,f)){var v=d.memoizedProps;if(i=i.compare,i=i!==null?i:bl,i(v,l)&&e.ref===n.ref)return Ka(e,n,f)}return n.flags|=1,e=qa(d,l),e.ref=n.ref,e.return=n,n.child=e}function ig(e,n,i,l,f){if(e!==null){var d=e.memoizedProps;if(bl(d,l)&&e.ref===n.ref)if(Bt=!1,n.pendingProps=l=d,ih(e,f))(e.flags&131072)!==0&&(Bt=!0);else return n.lanes=e.lanes,Ka(e,n,f)}return Zf(e,n,i,l,f)}function sg(e,n,i,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(l=n.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,n.child=null;return rg(e,n,d,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ic(n,d!==null?d.cachePool:null),d!==null?op(n,d):Cf(),cp(n);else return l=n.lanes=536870912,rg(e,n,d!==null?d.baseLanes|i:i,i,l)}else d!==null?(ic(n,d.cachePool),op(n,d),Ni(),n.memoizedState=null):(e!==null&&ic(n,null),Cf(),Ni());return en(e,n,f,i),n.child}function jl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function rg(e,n,i,l,f){var d=xf();return d=d===null?null:{parent:kt._currentValue,pool:d},n.memoizedState={baseLanes:i,cachePool:d},e!==null&&ic(n,null),Cf(),cp(n),e!==null&&hr(e,n,l,!0),n.childLanes=f,null}function bc(e,n){return n=Ec({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function lg(e,n,i){return Ns(n,e.child,null,i),e=bc(n,n.pendingProps),e.flags|=2,Nn(n),n.memoizedState=null,e}function Ub(e,n,i){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Xe){if(l.mode==="hidden")return e=bc(n,l),n.lanes=536870912,jl(null,e);if(Rf(n),(e=gt)?(e=_0(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bi!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Hm(e),i.return=n,n.child=i,Jt=n,gt=null)):e=null,e===null)throw Ei(n);return n.lanes=536870912,null}return bc(n,l)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(Rf(n),f)if(n.flags&256)n.flags&=-257,n=lg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Bt||hr(e,n,i,!1),f=(i&e.childLanes)!==0,Bt||f){if(l=mt,l!==null&&(v=nl(l,i),v!==0&&v!==d.retryLane))throw d.retryLane=v,bs(e,v),bn(l,e,v),$f;Ic(),n=lg(e,n,i)}else e=d.treeContext,gt=Hn(v.nextSibling),Jt=n,Xe=!0,xi=null,Gn=!1,e!==null&&Xm(n,e),n=bc(n,l),n.flags|=4096;return n}return e=qa(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function xc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Zf(e,n,i,l,f){return Ss(n),i=If(e,n,i,l,void 0,f),l=Df(),e!==null&&!Bt?(Of(e,n,f),Ka(e,n,f)):(Xe&&l&&hf(n),n.flags|=1,en(e,n,i,f),n.child)}function og(e,n,i,l,f,d){return Ss(n),n.updateQueue=null,i=fp(n,l,i,f),up(e),l=Df(),e!==null&&!Bt?(Of(e,n,d),Ka(e,n,d)):(Xe&&l&&hf(n),n.flags|=1,en(e,n,i,d),n.child)}function cg(e,n,i,l,f){if(Ss(n),n.stateNode===null){var d=or,v=i.contextType;typeof v=="object"&&v!==null&&(d=Wt(v)),d=new i(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Tf(n),v=i.contextType,d.context=typeof v=="object"&&v!==null?Wt(v):or,d.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Xf(n,i,v,l),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Yf.enqueueReplaceState(d,d.state,null),Ml(n,l,d,f),Rl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var E=n.memoizedProps,I=Ms(i,E);d.props=I;var F=d.context,$=i.contextType;v=or,typeof $=="object"&&$!==null&&(v=Wt($));var W=i.getDerivedStateFromProps;$=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||F!==v)&&Kp(n,d,l,v),Si=!1;var Q=n.memoizedState;d.state=Q,Ml(n,l,d,f),Rl(),F=n.memoizedState,E||Q!==F||Si?(typeof W=="function"&&(Xf(n,i,W,l),F=n.memoizedState),(I=Si||Yp(n,i,I,l,Q,F,v))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),d.props=l,d.state=F,d.context=v,l=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,Sf(e,n),v=n.memoizedProps,$=Ms(i,v),d.props=$,W=n.pendingProps,Q=d.context,F=i.contextType,I=or,typeof F=="object"&&F!==null&&(I=Wt(F)),E=i.getDerivedStateFromProps,(F=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||Q!==I)&&Kp(n,d,l,I),Si=!1,Q=n.memoizedState,d.state=Q,Ml(n,l,d,f),Rl();var K=n.memoizedState;v!==W||Q!==K||Si||e!==null&&e.dependencies!==null&&nc(e.dependencies)?(typeof E=="function"&&(Xf(n,i,E,l),K=n.memoizedState),($=Si||Yp(n,i,$,l,Q,K,I)||e!==null&&e.dependencies!==null&&nc(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),d.props=l,d.state=K,d.context=I,l=$):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,xc(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Ns(n,e.child,null,f),n.child=Ns(n,null,i,f)):en(e,n,i,f),n.memoizedState=d.state,e=n.child):e=Ka(e,n,f),e}function ug(e,n,i,l){return Es(),n.flags|=256,en(e,n,i,l),n.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(e){return{baseLanes:e,cachePool:Wm()}}function eh(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Mn),e}function fg(e,n,i){var l=n.pendingProps,f=!1,d=(n.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),v&&(f=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Xe){if(f?Ci(n):Ni(),(e=gt)?(e=_0(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bi!==null?{id:Na,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Hm(e),i.return=n,n.child=i,Jt=n,gt=null)):e=null,e===null)throw Ei(n);return kh(e)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Ni(),f=n.mode,E=Ec({mode:"hidden",children:E},f),l=xs(l,f,i,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=Wf(i),l.childLanes=eh(e,v,i),n.memoizedState=Jf,jl(null,l)):(Ci(n),th(n,E))}var I=e.memoizedState;if(I!==null&&(E=I.dehydrated,E!==null)){if(d)n.flags&256?(Ci(n),n.flags&=-257,n=nh(e,n,i)):n.memoizedState!==null?(Ni(),n.child=e.child,n.flags|=128,n=null):(Ni(),E=l.fallback,f=n.mode,l=Ec({mode:"visible",children:l.children},f),E=xs(E,f,i,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,Ns(n,e.child,null,i),l=n.child,l.memoizedState=Wf(i),l.childLanes=eh(e,v,i),n.memoizedState=Jf,n=jl(null,l));else if(Ci(n),kh(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var F=v.dgst;v=F,l=Error(s(419)),l.stack="",l.digest=v,Tl({value:l,source:null,stack:null}),n=nh(e,n,i)}else if(Bt||hr(e,n,i,!1),v=(i&e.childLanes)!==0,Bt||v){if(v=mt,v!==null&&(l=nl(v,i),l!==0&&l!==I.retryLane))throw I.retryLane=l,bs(e,l),bn(v,e,l),$f;jh(E)||Ic(),n=nh(e,n,i)}else jh(E)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,gt=Hn(E.nextSibling),Jt=n,Xe=!0,xi=null,Gn=!1,e!==null&&Xm(n,e),n=th(n,l.children),n.flags|=4096);return n}return f?(Ni(),E=l.fallback,f=n.mode,I=e.child,F=I.sibling,l=qa(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,F!==null?E=qa(F,E):(E=xs(E,f,i,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,jl(null,l),l=n.child,E=e.child.memoizedState,E===null?E=Wf(i):(f=E.cachePool,f!==null?(I=kt._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=Wm(),E={baseLanes:E.baseLanes|i,cachePool:f}),l.memoizedState=E,l.childLanes=eh(e,v,i),n.memoizedState=Jf,jl(e.child,l)):(Ci(n),i=e.child,e=i.sibling,i=qa(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=i,n.memoizedState=null,i)}function th(e,n){return n=Ec({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ec(e,n){return e=An(22,e,null,n),e.lanes=0,e}function nh(e,n,i){return Ns(n,e.child,null,i),e=th(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function hg(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),yf(e.return,n,i)}function ah(e,n,i,l,f,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f,treeForkCount:d}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=i,v.tailMode=f,v.treeForkCount=d)}function dg(e,n,i){var l=n.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=Ct.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,ue(Ct,v),en(e,n,l,i),l=Xe?El:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hg(e,i,n);else if(e.tag===19)hg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&uc(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),ah(n,!1,f,i,d,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&uc(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}ah(n,!0,i,null,d,l);break;case"together":ah(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ka(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ii|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(hr(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=qa(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=qa(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function ih(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&nc(e)))}function zb(e,n,i){switch(n.tag){case 3:de(n,n.stateNode.containerInfo),Ti(n,kt,e.memoizedState.cache),Es();break;case 27:case 5:De(n);break;case 4:de(n,n.stateNode.containerInfo);break;case 10:Ti(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Rf(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ci(n),n.flags|=128,null):(i&n.child.childLanes)!==0?fg(e,n,i):(Ci(n),e=Ka(e,n,i),e!==null?e.sibling:null);Ci(n);break;case 19:var f=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(hr(e,n,i,!1),l=(i&n.childLanes)!==0),f){if(l)return dg(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Ct,Ct.current),l)break;return null;case 22:return n.lanes=0,sg(e,n,i,n.pendingProps);case 24:Ti(n,kt,e.memoizedState.cache)}return Ka(e,n,i)}function mg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Bt=!0;else{if(!ih(e,i)&&(n.flags&128)===0)return Bt=!1,zb(e,n,i);Bt=(e.flags&131072)!==0}else Bt=!1,Xe&&(n.flags&1048576)!==0&&Qm(n,El,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=As(n.elementType),n.type=e,typeof e=="function")cf(e)?(l=Ms(e,l),n.tag=1,n=cg(null,n,e,l,i)):(n.tag=0,n=Zf(null,n,e,l,i));else{if(e!=null){var f=e.$$typeof;if(f===re){n.tag=11,n=ng(null,n,e,l,i);break e}else if(f===M){n.tag=14,n=ag(null,n,e,l,i);break e}}throw n=Ue(e)||e,Error(s(306,n,""))}}return n;case 0:return Zf(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,f=Ms(l,n.pendingProps),cg(e,n,l,f,i);case 3:e:{if(de(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;f=d.element,Sf(e,n),Ml(n,l,null,i);var v=n.memoizedState;if(l=v.cache,Ti(n,kt,l),l!==d.cache&&vf(n,[kt],i,!0),Rl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=ug(e,n,l,i);break e}else if(l!==f){f=Un(Error(s(424)),n),Tl(f),n=ug(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(gt=Hn(e.firstChild),Jt=n,Xe=!0,xi=null,Gn=!0,i=sp(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Es(),l===f){n=Ka(e,n,i);break e}en(e,n,l,i)}n=n.child}return n;case 26:return xc(e,n),e===null?(i=w0(n.type,null,n.pendingProps,null))?n.memoizedState=i:Xe||(i=n.type,e=n.pendingProps,l=Bc(ve.current).createElement(i),l[Ot]=n,l[Ft]=e,tn(l,i,e),Vt(l),n.stateNode=l):n.memoizedState=w0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return De(n),e===null&&Xe&&(l=n.stateNode=E0(n.type,n.pendingProps,ve.current),Jt=n,Gn=!0,f=gt,ki(n.type)?(Lh=f,gt=Hn(l.firstChild)):gt=f),en(e,n,n.pendingProps.children,i),xc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Xe&&((f=l=gt)&&(l=g1(l,n.type,n.pendingProps,Gn),l!==null?(n.stateNode=l,Jt=n,gt=Hn(l.firstChild),Gn=!1,f=!0):f=!1),f||Ei(n)),De(n),f=n.type,d=n.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,Dh(f,d)?l=null:v!==null&&Dh(f,v)&&(n.flags|=32),n.memoizedState!==null&&(f=If(e,n,Ib,null,null,i),$l._currentValue=f),xc(e,n),en(e,n,l,i),n.child;case 6:return e===null&&Xe&&((e=i=gt)&&(i=y1(i,n.pendingProps,Gn),i!==null?(n.stateNode=i,Jt=n,gt=null,e=!0):e=!1),e||Ei(n)),null;case 13:return fg(e,n,i);case 4:return de(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Ns(n,null,l,i):en(e,n,l,i),n.child;case 11:return ng(e,n,n.type,n.pendingProps,i);case 7:return en(e,n,n.pendingProps,i),n.child;case 8:return en(e,n,n.pendingProps.children,i),n.child;case 12:return en(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,Ti(n,n.type,l.value),en(e,n,l.children,i),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,Ss(n),f=Wt(f),l=l(f),n.flags|=1,en(e,n,l,i),n.child;case 14:return ag(e,n,n.type,n.pendingProps,i);case 15:return ig(e,n,n.type,n.pendingProps,i);case 19:return dg(e,n,i);case 31:return Ub(e,n,i);case 22:return sg(e,n,i,n.pendingProps);case 24:return Ss(n),l=Wt(kt),e===null?(f=xf(),f===null&&(f=mt,d=_f(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=i),f=d),n.memoizedState={parent:l,cache:f},Tf(n),Ti(n,kt,f)):((e.lanes&i)!==0&&(Sf(e,n),Ml(n,null,null,i),Rl()),f=e.memoizedState,d=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Ti(n,kt,l)):(l=d.cache,Ti(n,kt,l),l!==f.cache&&vf(n,[kt],i,!0))),en(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function $a(e){e.flags|=4}function sh(e,n,i,l,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Pg())e.flags|=8192;else throw Cs=rc,Ef}else e.flags&=-16777217}function pg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!M0(n))if(Pg())e.flags|=8192;else throw Cs=rc,Ef}function Tc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ro():536870912,e.lanes|=n,Sr|=n)}function kl(e,n){if(!Xe)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function Pb(e,n,i){var l=n.pendingProps;switch(df(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(n),null;case 1:return yt(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Qa(kt),me(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fr(n)?$a(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,pf())),yt(n),null;case 26:var f=n.type,d=n.memoizedState;return e===null?($a(n),d!==null?(yt(n),pg(n,d)):(yt(n),sh(n,f,null,l,i))):d?d!==e.memoizedState?($a(n),yt(n),pg(n,d)):(yt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&$a(n),yt(n),sh(n,f,e,l,i)),null;case 27:if(Ne(n),i=ve.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}e=ye.current,fr(n)?Ym(n):(e=E0(f,l,i),n.stateNode=e,$a(n))}return yt(n),null;case 5:if(Ne(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return yt(n),null}if(d=ye.current,fr(n))Ym(n);else{var v=Bc(ve.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[Ot]=n,d[Ft]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=d;e:switch(tn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$a(n)}}return yt(n),sh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&$a(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ve.current,fr(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,f=Jt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Ot]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||f0(e.nodeValue,i)),e||Ei(n,!0)}else e=Bc(e).createTextNode(l),e[Ot]=n,n.stateNode=e}return yt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(l=fr(n),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ot]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),e=!1}else i=pf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(Nn(n),n):(Nn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return yt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=fr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ot]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yt(n),f=!1}else f=pf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Nn(n),n):(Nn(n),null)}return Nn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Tc(n,n.updateQueue),yt(n),null);case 4:return me(),e===null&&Ch(n.stateNode.containerInfo),yt(n),null;case 10:return Qa(n.type),yt(n),null;case 19:if(ae(Ct),l=n.memoizedState,l===null)return yt(n),null;if(f=(n.flags&128)!==0,d=l.rendering,d===null)if(f)kl(l,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=uc(e),d!==null){for(n.flags|=128,kl(l,!1),e=d.updateQueue,n.updateQueue=e,Tc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)qm(i,e),i=i.sibling;return ue(Ct,Ct.current&1|2),Xe&&Ha(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&It()>Nc&&(n.flags|=128,f=!0,kl(l,!1),n.lanes=4194304)}else{if(!f)if(e=uc(d),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Tc(n,e),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Xe)return yt(n),null}else 2*It()-l.renderingStartTime>Nc&&i!==536870912&&(n.flags|=128,f=!0,kl(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=It(),e.sibling=null,i=Ct.current,ue(Ct,f?i&1|2:i&1),Xe&&Ha(n,l.treeForkCount),e):(yt(n),null);case 22:case 23:return Nn(n),Nf(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(yt(n),n.subtreeFlags&6&&(n.flags|=8192)):yt(n),i=n.updateQueue,i!==null&&Tc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&ae(ws),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Qa(kt),yt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Gb(e,n){switch(df(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Qa(kt),me(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ne(n),null;case 31:if(n.memoizedState!==null){if(Nn(n),n.alternate===null)throw Error(s(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ae(Ct),null;case 4:return me(),null;case 10:return Qa(n.type),null;case 22:case 23:return Nn(n),Nf(),e!==null&&ae(ws),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Qa(kt),null;case 25:return null;default:return null}}function gg(e,n){switch(df(n),n.tag){case 3:Qa(kt),me();break;case 26:case 27:case 5:Ne(n);break;case 4:me();break;case 31:n.memoizedState!==null&&Nn(n);break;case 13:Nn(n);break;case 19:ae(Ct);break;case 10:Qa(n.type);break;case 22:case 23:Nn(n),Nf(),e!==null&&ae(ws);break;case 24:Qa(kt)}}function Ll(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&e)===e){l=void 0;var d=i.create,v=i.inst;l=d(),v.destroy=l}i=i.next}while(i!==f)}}catch(E){ot(n,n.return,E)}}function Ri(e,n,i){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=n;var I=i,F=E;try{F()}catch($){ot(f,I,$)}}}l=l.next}while(l!==d)}}catch($){ot(n,n.return,$)}}function yg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{lp(n,i)}catch(l){ot(e,e.return,l)}}}function vg(e,n,i){i.props=Ms(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){ot(e,n,l)}}function Bl(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(f){ot(e,n,f)}}function Ma(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){ot(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){ot(e,n,f)}else i.current=null}function _g(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){ot(e,e.return,f)}}function rh(e,n,i){try{var l=e.stateNode;u1(l,e.type,i,n),l[Ft]=n}catch(f){ot(e,e.return,f)}}function bg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ki(e.type)||e.tag===4}function lh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oh(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Jn));else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(oh(e,n,i),e=e.sibling;e!==null;)oh(e,n,i),e=e.sibling}function Sc(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&ki(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Sc(e,n,i),e=e.sibling;e!==null;)Sc(e,n,i),e=e.sibling}function xg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);tn(n,l,i),n[Ot]=e,n[Ft]=i}catch(d){ot(e,e.return,d)}}var Za=!1,Ut=!1,ch=!1,Eg=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function qb(e,n){if(e=e.containerInfo,Mh=Fc,e=Vm(e),tf(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var v=0,E=-1,I=-1,F=0,$=0,W=e,Q=null;t:for(;;){for(var K;W!==i||f!==0&&W.nodeType!==3||(E=v+f),W!==d||l!==0&&W.nodeType!==3||(I=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(K=W.firstChild)!==null;)Q=W,W=K;for(;;){if(W===e)break t;if(Q===i&&++F===f&&(E=v),Q===d&&++$===l&&(I=v),(K=W.nextSibling)!==null)break;W=Q,Q=W.parentNode}W=K}i=E===-1||I===-1?null:{start:E,end:I}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ih={focusedElem:e,selectionRange:i},Fc=!1,Xt=n;Xt!==null;)if(n=Xt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Xt=e;else for(;Xt!==null;){switch(n=Xt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=n,f=d.memoizedProps,d=d.memoizedState,l=i.stateNode;try{var be=Ms(i.type,f);e=l.getSnapshotBeforeUpdate(be,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){ot(i,i.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Vh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Xt=e;break}Xt=n.return}}function Tg(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Wa(e,i),l&4&&Ll(5,i);break;case 1:if(Wa(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(v){ot(i,i.return,v)}else{var f=Ms(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ot(i,i.return,v)}}l&64&&yg(i),l&512&&Bl(i,i.return);break;case 3:if(Wa(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{lp(e,n)}catch(v){ot(i,i.return,v)}}break;case 27:n===null&&l&4&&xg(i);case 26:case 5:Wa(e,i),n===null&&l&4&&_g(i),l&512&&Bl(i,i.return);break;case 12:Wa(e,i);break;case 31:Wa(e,i),l&4&&Ag(e,i);break;case 13:Wa(e,i),l&4&&Cg(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Jb.bind(null,i),v1(e,i))));break;case 22:if(l=i.memoizedState!==null||Za,!l){n=n!==null&&n.memoizedState!==null||Ut,f=Za;var d=Ut;Za=l,(Ut=n)&&!d?ei(e,i,(i.subtreeFlags&8772)!==0):Wa(e,i),Za=f,Ut=d}break;case 30:break;default:Wa(e,i)}}function Sg(e){var n=e.alternate;n!==null&&(e.alternate=null,Sg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ys(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,gn=!1;function Ja(e,n,i){for(i=i.child;i!==null;)wg(e,n,i),i=i.sibling}function wg(e,n,i){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(En,i)}catch{}switch(i.tag){case 26:Ut||Ma(i,n),Ja(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ut||Ma(i,n);var l=bt,f=gn;ki(i.type)&&(bt=i.stateNode,gn=!1),Ja(e,n,i),Xl(i.stateNode),bt=l,gn=f;break;case 5:Ut||Ma(i,n);case 6:if(l=bt,f=gn,bt=null,Ja(e,n,i),bt=l,gn=f,bt!==null)if(gn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(i.stateNode)}catch(d){ot(i,n,d)}else try{bt.removeChild(i.stateNode)}catch(d){ot(i,n,d)}break;case 18:bt!==null&&(gn?(e=bt,y0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Dr(e)):y0(bt,i.stateNode));break;case 4:l=bt,f=gn,bt=i.stateNode.containerInfo,gn=!0,Ja(e,n,i),bt=l,gn=f;break;case 0:case 11:case 14:case 15:Ri(2,i,n),Ut||Ri(4,i,n),Ja(e,n,i);break;case 1:Ut||(Ma(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&vg(i,n,l)),Ja(e,n,i);break;case 21:Ja(e,n,i);break;case 22:Ut=(l=Ut)||i.memoizedState!==null,Ja(e,n,i),Ut=l;break;default:Ja(e,n,i)}}function Ag(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Dr(e)}catch(i){ot(n,n.return,i)}}}function Cg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Dr(e)}catch(i){ot(n,n.return,i)}}function Hb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Eg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Eg),n;default:throw Error(s(435,e.tag))}}function wc(e,n){var i=Hb(e);n.forEach(function(l){if(!i.has(l)){i.add(l);var f=Wb.bind(null,e,l);l.then(f,f)}})}function yn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],d=e,v=n,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ki(E.type)){bt=E.stateNode,gn=!1;break e}break;case 5:bt=E.stateNode,gn=!1;break e;case 3:case 4:bt=E.stateNode.containerInfo,gn=!0;break e}E=E.return}if(bt===null)throw Error(s(160));wg(d,v,f),bt=null,gn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Ng(n,e),n=n.sibling}var ia=null;function Ng(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),vn(e),l&4&&(Ri(3,e,e.return),Ll(3,e),Ri(5,e,e.return));break;case 1:yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),l&64&&Za&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=ia;if(yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),l&4){var d=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[ga]||d[Ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),tn(d,l,i),d[Ot]=e,Vt(d),l=d;break e;case"link":var v=N0("link","href",f).get(l+(i.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(E,1);break t}}d=f.createElement(l),tn(d,l,i),f.head.appendChild(d);break;case"meta":if(v=N0("meta","content",f).get(l+(i.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(E,1);break t}}d=f.createElement(l),tn(d,l,i),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ot]=e,Vt(d),l=d}e.stateNode=l}else R0(f,e.type,e.stateNode);else e.stateNode=C0(f,l,e.memoizedProps);else d!==l?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,l===null?R0(f,e.type,e.stateNode):C0(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&rh(e,e.memoizedProps,i.memoizedProps)}break;case 27:yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),i!==null&&l&4&&rh(e,e.memoizedProps,i.memoizedProps);break;case 5:if(yn(n,e),vn(e),l&512&&(Ut||i===null||Ma(i,i.return)),e.flags&32){f=e.stateNode;try{pn(f,"")}catch(be){ot(e,e.return,be)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,rh(e,f,i!==null?i.memoizedProps:f)),l&1024&&(ch=!0);break;case 6:if(yn(n,e),vn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(be){ot(e,e.return,be)}}break;case 3:if(Pc=null,f=ia,ia=Uc(n.containerInfo),yn(n,e),ia=f,vn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Dr(n.containerInfo)}catch(be){ot(e,e.return,be)}ch&&(ch=!1,Rg(e));break;case 4:l=ia,ia=Uc(e.stateNode.containerInfo),yn(n,e),vn(e),ia=l;break;case 12:yn(n,e),vn(e);break;case 31:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 13:yn(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Cc=It()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 22:f=e.memoizedState!==null;var I=i!==null&&i.memoizedState!==null,F=Za,$=Ut;if(Za=F||f,Ut=$||I,yn(n,e),Ut=$,Za=F,vn(e),l&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||I||Za||Ut||Is(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){I=i=n;try{if(d=I.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=I.stateNode;var W=I.memoizedProps.style,Q=W!=null&&W.hasOwnProperty("display")?W.display:null;E.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(be){ot(I,I.return,be)}}}else if(n.tag===6){if(i===null){I=n;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(be){ot(I,I.return,be)}}}else if(n.tag===18){if(i===null){I=n;try{var K=I.stateNode;f?v0(K,!0):v0(I.stateNode,!1)}catch(be){ot(I,I.return,be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,wc(e,i))));break;case 19:yn(n,e),vn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 30:break;case 21:break;default:yn(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(bg(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,d=lh(e);Sc(e,d,f);break;case 5:var v=i.stateNode;i.flags&32&&(pn(v,""),i.flags&=-33);var E=lh(e);Sc(e,E,v);break;case 3:case 4:var I=i.stateNode.containerInfo,F=lh(e);oh(e,F,I);break;default:throw Error(s(161))}}catch($){ot(e,e.return,$)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Rg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Rg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wa(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Tg(e,n.alternate,n),n=n.sibling}function Is(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ri(4,n,n.return),Is(n);break;case 1:Ma(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&vg(n,n.return,i),Is(n);break;case 27:Xl(n.stateNode);case 26:case 5:Ma(n,n.return),Is(n);break;case 22:n.memoizedState===null&&Is(n);break;case 30:Is(n);break;default:Is(n)}e=e.sibling}}function ei(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=e,d=n,v=d.flags;switch(d.tag){case 0:case 11:case 15:ei(f,d,i),Ll(4,d);break;case 1:if(ei(f,d,i),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ot(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var E=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)rp(I[f],E)}catch(F){ot(l,l.return,F)}}i&&v&64&&yg(d),Bl(d,d.return);break;case 27:xg(d);case 26:case 5:ei(f,d,i),i&&l===null&&v&4&&_g(d),Bl(d,d.return);break;case 12:ei(f,d,i);break;case 31:ei(f,d,i),i&&v&4&&Ag(f,d);break;case 13:ei(f,d,i),i&&v&4&&Cg(f,d);break;case 22:d.memoizedState===null&&ei(f,d,i),Bl(d,d.return);break;case 30:break;default:ei(f,d,i)}n=n.sibling}}function uh(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Sl(i))}function fh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e))}function sa(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mg(e,n,i,l),n=n.sibling}function Mg(e,n,i,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:sa(e,n,i,l),f&2048&&Ll(9,n);break;case 1:sa(e,n,i,l);break;case 3:sa(e,n,i,l),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Sl(e)));break;case 12:if(f&2048){sa(e,n,i,l),e=n.stateNode;try{var d=n.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ot(n,n.return,I)}}else sa(e,n,i,l);break;case 31:sa(e,n,i,l);break;case 13:sa(e,n,i,l);break;case 23:break;case 22:d=n.stateNode,v=n.alternate,n.memoizedState!==null?d._visibility&2?sa(e,n,i,l):Ul(e,n):d._visibility&2?sa(e,n,i,l):(d._visibility|=2,xr(e,n,i,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&uh(v,n);break;case 24:sa(e,n,i,l),f&2048&&fh(n.alternate,n);break;default:sa(e,n,i,l)}}function xr(e,n,i,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,v=n,E=i,I=l,F=v.flags;switch(v.tag){case 0:case 11:case 15:xr(d,v,E,I,f),Ll(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?xr(d,v,E,I,f):Ul(d,v):($._visibility|=2,xr(d,v,E,I,f)),f&&F&2048&&uh(v.alternate,v);break;case 24:xr(d,v,E,I,f),f&&F&2048&&fh(v.alternate,v);break;default:xr(d,v,E,I,f)}n=n.sibling}}function Ul(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,f=l.flags;switch(l.tag){case 22:Ul(i,l),f&2048&&uh(l.alternate,l);break;case 24:Ul(i,l),f&2048&&fh(l.alternate,l);break;default:Ul(i,l)}n=n.sibling}}var zl=8192;function Er(e,n,i){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)Ig(e,n,i),e=e.sibling}function Ig(e,n,i){switch(e.tag){case 26:Er(e,n,i),e.flags&zl&&e.memoizedState!==null&&M1(i,ia,e.memoizedState,e.memoizedProps);break;case 5:Er(e,n,i);break;case 3:case 4:var l=ia;ia=Uc(e.stateNode.containerInfo),Er(e,n,i),ia=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,Er(e,n,i),zl=l):Er(e,n,i));break;default:Er(e,n,i)}}function Dg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Pl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,Vg(l,e)}Dg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Og(e),e=e.sibling}function Og(e){switch(e.tag){case 0:case 11:case 15:Pl(e),e.flags&2048&&Ri(9,e,e.return);break;case 3:Pl(e);break;case 12:Pl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ac(e)):Pl(e);break;default:Pl(e)}}function Ac(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Xt=l,Vg(l,e)}Dg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ri(8,n,n.return),Ac(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Ac(n));break;default:Ac(n)}e=e.sibling}}function Vg(e,n){for(;Xt!==null;){var i=Xt;switch(i.tag){case 0:case 11:case 15:Ri(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Xt=l;else e:for(i=e;Xt!==null;){l=Xt;var f=l.sibling,d=l.return;if(Sg(l),l===i){Xt=null;break e}if(f!==null){f.return=d,Xt=f;break e}Xt=d}}}var Fb={getCacheForType:function(e){var n=Wt(kt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Wt(kt).controller.signal}},Qb=typeof WeakMap=="function"?WeakMap:Map,tt=0,mt=null,ze=null,Ge=0,lt=0,Rn=null,Mi=!1,Tr=!1,hh=!1,ti=0,Tt=0,Ii=0,Ds=0,dh=0,Mn=0,Sr=0,Gl=null,_n=null,mh=!1,Cc=0,jg=0,Nc=1/0,Rc=null,Di=null,qt=0,Oi=null,wr=null,ni=0,ph=0,gh=null,kg=null,ql=0,yh=null;function In(){return(tt&2)!==0&&Ge!==0?Ge&-Ge:X.T!==null?Th():Mo()}function Lg(){if(Mn===0)if((Ge&536870912)===0||Xe){var e=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),Mn=e}else Mn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Mn}function bn(e,n,i){(e===mt&&(lt===2||lt===9)||e.cancelPendingCommit!==null)&&(Ar(e,0),Vi(e,Ge,Mn,!1)),rs(e,i),((tt&2)===0||e!==mt)&&(e===mt&&((tt&2)===0&&(Ds|=i),Tt===4&&Vi(e,Ge,Mn,!1)),Ia(e))}function Bg(e,n,i){if((tt&6)!==0)throw Error(s(327));var l=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Kn(e,n),f=l?Kb(e,n):_h(e,n,!0),d=l;do{if(f===0){Tr&&!l&&Vi(e,n,0,!1);break}else{if(i=e.current.alternate,d&&!Xb(i)){f=_h(e,n,!1),d=!1;continue}if(f===2){if(d=n,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var E=e;f=Gl;var I=E.current.memoizedState.isDehydrated;if(I&&(Ar(E,v).flags|=256),v=_h(E,v,!1),v!==2){if(hh&&!I){E.errorRecoveryDisabledLanes|=d,Ds|=d,f=4;break e}d=_n,_n=f,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){Ar(e,0),Vi(e,n,0,!0);break}e:{switch(l=e,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Vi(l,n,Mn,!Mi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=Cc+300-It(),10<f)){if(Vi(l,n,Mn,!Mi),da(l,0,!0)!==0)break e;ni=n,l.timeoutHandle=p0(Ug.bind(null,l,i,_n,Rc,mh,n,Mn,Ds,Sr,Mi,d,"Throttled",-0,0),f);break e}Ug(l,i,_n,Rc,mh,n,Mn,Ds,Sr,Mi,d,null,-0,0)}}break}while(!0);Ia(e)}function Ug(e,n,i,l,f,d,v,E,I,F,$,W,Q,K){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Ig(n,d,W);var be=(d&62914560)===d?Cc-It():(d&4194048)===d?jg-It():0;if(be=I1(W,be),be!==null){ni=d,e.cancelPendingCommit=be(Xg.bind(null,e,n,d,i,l,f,v,E,I,$,W,null,Q,K)),Vi(e,d,v,!F);return}}Xg(e,n,d,i,l,f,v,E,I)}function Xb(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],d=f.getSnapshot;f=f.value;try{if(!wn(d(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Vi(e,n,i,l){n&=~dh,n&=~Ds,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var f=n;0<f;){var d=31-wt(f),v=1<<d;l[d]=-1,f&=~v}i!==0&&ls(e,i,n)}function Mc(){return(tt&6)===0?(Hl(0),!1):!0}function vh(){if(ze!==null){if(lt===0)var e=ze.return;else e=ze,Fa=Ts=null,Vf(e),gr=null,Al=0,e=ze;for(;e!==null;)gg(e.alternate,e),e=e.return;ze=null}}function Ar(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,d1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ni=0,vh(),mt=e,ze=i=qa(e.current,null),Ge=n,lt=0,Rn=null,Mi=!1,Tr=Kn(e,n),hh=!1,Sr=Mn=dh=Ds=Ii=Tt=0,_n=Gl=null,mh=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var f=31-wt(l),d=1<<f;n|=e[f],l&=~d}return ti=n,Zo(),i}function zg(e,n){je=null,X.H=Vl,n===pr||n===sc?(n=np(),lt=3):n===Ef?(n=np(),lt=4):lt=n===$f?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Rn=n,ze===null&&(Tt=1,_c(e,Un(n,e.current)))}function Pg(){var e=Cn.current;return e===null?!0:(Ge&4194048)===Ge?qn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===qn:!1}function Gg(){var e=X.H;return X.H=Vl,e===null?Vl:e}function qg(){var e=X.A;return X.A=Fb,e}function Ic(){Tt=4,Mi||(Ge&4194048)!==Ge&&Cn.current!==null||(Tr=!0),(Ii&134217727)===0&&(Ds&134217727)===0||mt===null||Vi(mt,Ge,Mn,!1)}function _h(e,n,i){var l=tt;tt|=2;var f=Gg(),d=qg();(mt!==e||Ge!==n)&&(Rc=null,Ar(e,n)),n=!1;var v=Tt;e:do try{if(lt!==0&&ze!==null){var E=ze,I=Rn;switch(lt){case 8:vh(),v=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(n=!0);var F=lt;if(lt=0,Rn=null,Cr(e,E,I,F),i&&Tr){v=0;break e}break;default:F=lt,lt=0,Rn=null,Cr(e,E,I,F)}}Yb(),v=Tt;break}catch($){zg(e,$)}while(!0);return n&&e.shellSuspendCounter++,Fa=Ts=null,tt=l,X.H=f,X.A=d,ze===null&&(mt=null,Ge=0,Zo()),v}function Yb(){for(;ze!==null;)Hg(ze)}function Kb(e,n){var i=tt;tt|=2;var l=Gg(),f=qg();mt!==e||Ge!==n?(Rc=null,Nc=It()+500,Ar(e,n)):Tr=Kn(e,n);e:do try{if(lt!==0&&ze!==null){n=ze;var d=Rn;t:switch(lt){case 1:lt=0,Rn=null,Cr(e,n,d,1);break;case 2:case 9:if(ep(d)){lt=0,Rn=null,Fg(n);break}n=function(){lt!==2&&lt!==9||mt!==e||(lt=7),Ia(e)},d.then(n,n);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:ep(d)?(lt=0,Rn=null,Fg(n)):(lt=0,Rn=null,Cr(e,n,d,7));break;case 5:var v=null;switch(ze.tag){case 26:v=ze.memoizedState;case 5:case 27:var E=ze;if(v?M0(v):E.stateNode.complete){lt=0,Rn=null;var I=E.sibling;if(I!==null)ze=I;else{var F=E.return;F!==null?(ze=F,Dc(F)):ze=null}break t}}lt=0,Rn=null,Cr(e,n,d,5);break;case 6:lt=0,Rn=null,Cr(e,n,d,6);break;case 8:vh(),Tt=6;break e;default:throw Error(s(462))}}$b();break}catch($){zg(e,$)}while(!0);return Fa=Ts=null,X.H=l,X.A=f,tt=i,ze!==null?0:(mt=null,Ge=0,Zo(),Tt)}function $b(){for(;ze!==null&&!as();)Hg(ze)}function Hg(e){var n=mg(e.alternate,e,ti);e.memoizedProps=e.pendingProps,n===null?Dc(e):ze=n}function Fg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=og(i,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=og(i,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:Vf(n);default:gg(i,n),n=ze=qm(n,ti),n=mg(i,n,ti)}e.memoizedProps=e.pendingProps,n===null?Dc(e):ze=n}function Cr(e,n,i,l){Fa=Ts=null,Vf(n),gr=null,Al=0;var f=n.return;try{if(Bb(e,f,n,i,Ge)){Tt=1,_c(e,Un(i,e.current)),ze=null;return}}catch(d){if(f!==null)throw ze=f,d;Tt=1,_c(e,Un(i,e.current)),ze=null;return}n.flags&32768?(Xe||l===1?e=!0:Tr||(Ge&536870912)!==0?e=!1:(Mi=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qg(n,e)):Dc(n)}function Dc(e){var n=e;do{if((n.flags&32768)!==0){Qg(n,Mi);return}e=n.return;var i=Pb(n.alternate,n,ti);if(i!==null){ze=i;return}if(n=n.sibling,n!==null){ze=n;return}ze=n=e}while(n!==null);Tt===0&&(Tt=5)}function Qg(e,n){do{var i=Gb(e.alternate,e);if(i!==null){i.flags&=32767,ze=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ze=e;return}ze=e=i}while(e!==null);Tt=6,ze=null}function Xg(e,n,i,l,f,d,v,E,I){e.cancelPendingCommit=null;do Oc();while(qt!==0);if((tt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=lf,Zu(e,i,d,v,E,I),e===mt&&(ze=mt=null,Ge=0),wr=n,Oi=e,ni=i,ph=d,gh=f,kg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,e1(ua,function(){return Jg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=le.p,le.p=2,v=tt,tt|=4;try{qb(e,n,i)}finally{tt=v,le.p=f,X.T=l}}qt=1,Yg(),Kg(),$g()}}function Yg(){if(qt===1){qt=0;var e=Oi,n=wr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var l=le.p;le.p=2;var f=tt;tt|=4;try{Ng(n,e);var d=Ih,v=Vm(e.containerInfo),E=d.focusedElem,I=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Om(E.ownerDocument.documentElement,E)){if(I!==null&&tf(E)){var F=I.start,$=I.end;if($===void 0&&($=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min($,E.value.length);else{var W=E.ownerDocument||document,Q=W&&W.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),be=E.textContent.length,Ce=Math.min(I.start,be),ht=I.end===void 0?Ce:Math.min(I.end,be);!K.extend&&Ce>ht&&(v=ht,ht=Ce,Ce=v);var z=Dm(E,Ce),j=Dm(E,ht);if(z&&j&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==j.node||K.focusOffset!==j.offset)){var H=W.createRange();H.setStart(z.node,z.offset),K.removeAllRanges(),Ce>ht?(K.addRange(H),K.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),K.addRange(H))}}}}for(W=[],K=E;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<W.length;E++){var Z=W[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Fc=!!Mh,Ih=Mh=null}finally{tt=f,le.p=l,X.T=i}}e.current=n,qt=2}}function Kg(){if(qt===2){qt=0;var e=Oi,n=wr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var l=le.p;le.p=2;var f=tt;tt|=4;try{Tg(e,n.alternate,n)}finally{tt=f,le.p=l,X.T=i}}qt=3}}function $g(){if(qt===4||qt===3){qt=0,ci();var e=Oi,n=wr,i=ni,l=kg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qt=5:(qt=0,wr=Oi=null,Zg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Di=null),Ua(i),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(En,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,f=le.p,le.p=2,X.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{X.T=n,le.p=f}}(ni&3)!==0&&Oc(),Ia(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===yh?ql++:(ql=0,yh=e):ql=0,Hl(0)}}function Zg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Sl(n)))}function Oc(){return Yg(),Kg(),$g(),Jg()}function Jg(){if(qt!==5)return!1;var e=Oi,n=ph;ph=0;var i=Ua(ni),l=X.T,f=le.p;try{le.p=32>i?32:i,X.T=null,i=gh,gh=null;var d=Oi,v=ni;if(qt=0,wr=Oi=null,ni=0,(tt&6)!==0)throw Error(s(331));var E=tt;if(tt|=4,Og(d.current),Mg(d,d.current,v,i),tt=E,Hl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(En,d)}catch{}return!0}finally{le.p=f,X.T=l,Zg(e,n)}}function Wg(e,n,i){n=Un(i,n),n=Kf(e.stateNode,n,2),e=Ai(e,n,2),e!==null&&(rs(e,2),Ia(e))}function ot(e,n,i){if(e.tag===3)Wg(e,e,i);else for(;n!==null;){if(n.tag===3){Wg(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Di===null||!Di.has(l))){e=Un(i,e),i=eg(2),l=Ai(n,i,2),l!==null&&(tg(i,l,n,e),rs(l,2),Ia(l));break}}n=n.return}}function bh(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Qb;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(i)||(hh=!0,f.add(i),e=Zb.bind(null,e,n,i),n.then(e,e))}function Zb(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,mt===e&&(Ge&i)===i&&(Tt===4||Tt===3&&(Ge&62914560)===Ge&&300>It()-Cc?(tt&2)===0&&Ar(e,0):dh|=i,Sr===Ge&&(Sr=0)),Ia(e)}function e0(e,n){n===0&&(n=Ro()),e=bs(e,n),e!==null&&(rs(e,n),Ia(e))}function Jb(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),e0(e,i)}function Wb(e,n){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),e0(e,i)}function e1(e,n){return $e(e,n)}var Vc=null,Nr=null,xh=!1,jc=!1,Eh=!1,ji=0;function Ia(e){e!==Nr&&e.next===null&&(Nr===null?Vc=Nr=e:Nr=Nr.next=e),jc=!0,xh||(xh=!0,n1())}function Hl(e,n){if(!Eh&&jc){Eh=!0;do for(var i=!1,l=Vc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-wt(42|e)+1)-1,d&=f&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,i0(l,d))}else d=Ge,d=da(l,l===mt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Kn(l,d)||(i=!0,i0(l,d));l=l.next}while(i);Eh=!1}}function t1(){t0()}function t0(){jc=xh=!1;var e=0;ji!==0&&h1()&&(e=ji);for(var n=It(),i=null,l=Vc;l!==null;){var f=l.next,d=n0(l,n);d===0?(l.next=null,i===null?Vc=f:i.next=f,f===null&&(Nr=i)):(i=l,(e!==0||(d&3)!==0)&&(jc=!0)),l=f}qt!==0&&qt!==5||Hl(e),ji!==0&&(ji=0)}function n0(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-wt(d),E=1<<v,I=f[v];I===-1?((E&i)===0||(E&l)!==0)&&(f[v]=$u(E,n)):I<=n&&(e.expiredLanes|=E),d&=~E}if(n=mt,i=Ge,i=da(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(lt===2||lt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&fn(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Kn(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&fn(l),Ua(i)){case 2:case 8:i=it;break;case 32:i=ua;break;case 268435456:i=is;break;default:i=ua}return l=a0.bind(null,e),i=$e(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&fn(l),e.callbackPriority=2,e.callbackNode=null,2}function a0(e,n){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Oc()&&e.callbackNode!==i)return null;var l=Ge;return l=da(e,e===mt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Bg(e,l,n),n0(e,It()),e.callbackNode!=null&&e.callbackNode===i?a0.bind(null,e):null)}function i0(e,n){if(Oc())return null;Bg(e,n,!0)}function n1(){m1(function(){(tt&6)!==0?$e(ca,t1):t0()})}function Th(){if(ji===0){var e=dr;e===0&&(e=fa,fa<<=1,(fa&261888)===0&&(fa=256)),ji=e}return ji}function s0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Js(""+e)}function r0(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function a1(e,n,i,l,f){if(n==="submit"&&i&&i.stateNode===f){var d=s0((f[Ft]||null).action),v=l.submitter;v&&(n=(n=v[Ft]||null)?s0(n.formAction):v.getAttribute("formAction"),n!==null&&(d=n,v=null));var E=new Sa("action","action",null,l,f);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ji!==0){var I=v?r0(f,v):new FormData(f);qf(i,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(E.preventDefault(),I=v?r0(f,v):new FormData(f),qf(i,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var Sh=0;Sh<rf.length;Sh++){var wh=rf[Sh],i1=wh.toLowerCase(),s1=wh[0].toUpperCase()+wh.slice(1);aa(i1,"on"+s1)}aa(Lm,"onAnimationEnd"),aa(Bm,"onAnimationIteration"),aa(Um,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(xb,"onTransitionRun"),aa(Eb,"onTransitionStart"),aa(Tb,"onTransitionCancel"),aa(zm,"onTransitionEnd"),ba("onMouseEnter",["mouseout","mouseover"]),ba("onMouseLeave",["mouseout","mouseover"]),ba("onPointerEnter",["pointerout","pointerover"]),ba("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function l0(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var v=l.length-1;0<=v;v--){var E=l[v],I=E.instance,F=E.currentTarget;if(E=E.listener,I!==d&&f.isPropagationStopped())break e;d=E,f.currentTarget=F;try{d(f)}catch($){$o($)}f.currentTarget=null,d=I}else for(v=0;v<l.length;v++){if(E=l[v],I=E.instance,F=E.currentTarget,E=E.listener,I!==d&&f.isPropagationStopped())break e;d=E,f.currentTarget=F;try{d(f)}catch($){$o($)}f.currentTarget=null,d=I}}}}function Pe(e,n){var i=n[Xs];i===void 0&&(i=n[Xs]=new Set);var l=e+"__bubble";i.has(l)||(o0(n,e,2,!1),i.add(l))}function Ah(e,n,i){var l=0;n&&(l|=4),o0(i,e,l,n)}var kc="_reactListening"+Math.random().toString(36).slice(2);function Ch(e){if(!e[kc]){e[kc]=!0,al.forEach(function(i){i!=="selectionchange"&&(r1.has(i)||Ah(i,!1,e),Ah(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[kc]||(n[kc]=!0,Ah("selectionchange",!1,n))}}function o0(e,n,i,l){switch(L0(n)){case 2:var f=V1;break;case 8:f=j1;break;default:f=Gh}i=f.bind(null,n,i,e),f=void 0,!hs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Nh(e,n,i,l,f){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=ya(E),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=d=v;continue e}E=E.parentNode}}l=l.return}gi(function(){var F=d,$=jn(i),W=[];e:{var Q=Pm.get(e);if(Q!==void 0){var K=Sa,be=e;switch(e){case"keypress":if(ms(i)===0)break e;case"keydown":case"keyup":K=Xo;break;case"focusin":be="focus",K=gs;break;case"focusout":be="blur",K=gs;break;case"beforeblur":case"afterblur":K=gs;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Bo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=p;break;case Lm:case Bm:case Um:K=zo;break;case zm:K=w;break;case"scroll":case"scrollend":K=pl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Po;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ga;break;case"toggle":case"beforetoggle":K=Ve}var Ce=(n&4)!==0,ht=!Ce&&(e==="scroll"||e==="scrollend"),z=Ce?Q!==null?Q+"Capture":null:Q;Ce=[];for(var j=F,H;j!==null;){var Z=j;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||z===null||(Z=Wn(j,z),Z!=null&&Ce.push(Ql(j,Z,H))),ht)break;j=j.return}0<Ce.length&&(Q=new K(Q,be,null,i,$),W.push({event:Q,listeners:Ce}))}}if((n&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&i!==hl&&(be=i.relatedTarget||i.fromElement)&&(ya(be)||be[pa]))break e;if((K||Q)&&(Q=$.window===$?$:(Q=$.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(be=i.relatedTarget||i.toElement,K=F,be=be?ya(be):null,be!==null&&(ht=c(be),Ce=be.tag,be!==ht||Ce!==5&&Ce!==27&&Ce!==6)&&(be=null)):(K=null,be=F),K!==be)){if(Ce=gl,Z="onMouseLeave",z="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=Ga,Z="onPointerLeave",z="onPointerEnter",j="pointer"),ht=K==null?Q:Tn(K),H=be==null?Q:Tn(be),Q=new Ce(Z,j+"leave",K,i,$),Q.target=ht,Q.relatedTarget=H,Z=null,ya($)===F&&(Ce=new Ce(z,j+"enter",be,i,$),Ce.target=H,Ce.relatedTarget=ht,Z=Ce),ht=Z,K&&be)t:{for(Ce=l1,z=K,j=be,H=0,Z=z;Z;Z=Ce(Z))H++;Z=0;for(var Se=j;Se;Se=Ce(Se))Z++;for(;0<H-Z;)z=Ce(z),H--;for(;0<Z-H;)j=Ce(j),Z--;for(;H--;){if(z===j||j!==null&&z===j.alternate){Ce=z;break t}z=Ce(z),j=Ce(j)}Ce=null}else Ce=null;K!==null&&c0(W,Q,K,Ce,!1),be!==null&&ht!==null&&c0(W,ht,be,Ce,!0)}}e:{if(Q=F?Tn(F):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var Ze=Am;else if(Sm(Q))if(Cm)Ze=vb;else{Ze=gb;var Ee=pb}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&Zs(F.elementType)&&(Ze=Am):Ze=yb;if(Ze&&(Ze=Ze(e,F))){wm(W,Ze,i,$);break e}Ee&&Ee(e,Q,F),e==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&cl(Q,"number",Q.value)}switch(Ee=F?Tn(F):window,e){case"focusin":(Sm(Ee)||Ee.contentEditable==="true")&&(sr=Ee,nf=F,xl=null);break;case"focusout":xl=nf=sr=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,jm(W,i,$);break;case"selectionchange":if(bb)break;case"keydown":case"keyup":jm(W,i,$)}var ke;if(et)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ir?ys(e,i)&&(qe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(qe="onCompositionStart");qe&&(Ca&&i.locale!=="ko"&&(ir||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ir&&(ke=ml()):(Ta=$,dl="value"in Ta?Ta.value:Ta.textContent,ir=!0)),Ee=Lc(F,qe),0<Ee.length&&(qe=new Aa(qe,e,null,i,$),W.push({event:qe,listeners:Ee}),ke?qe.data=ke:(ke=ar(i),ke!==null&&(qe.data=ke)))),(ke=Ln?fb(e,i):hb(e,i))&&(qe=Lc(F,"onBeforeInput"),0<qe.length&&(Ee=new Aa("onBeforeInput","beforeinput",null,i,$),W.push({event:Ee,listeners:qe}),Ee.data=ke)),a1(W,e,F,i,$)}l0(W,n)})}function Ql(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Lc(e,n){for(var i=n+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Wn(e,i),f!=null&&l.unshift(Ql(e,f,d)),f=Wn(e,n),f!=null&&l.push(Ql(e,f,d))),e.tag===3)return l;e=e.return}return[]}function l1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function c0(e,n,i,l,f){for(var d=n._reactName,v=[];i!==null&&i!==l;){var E=i,I=E.alternate,F=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||F===null||(I=F,f?(F=Wn(i,d),F!=null&&v.unshift(Ql(i,F,I))):f||(F=Wn(i,d),F!=null&&v.push(Ql(i,F,I)))),i=i.return}v.length!==0&&e.push({event:n,listeners:v})}var o1=/\r\n?/g,c1=/\u0000|\uFFFD/g;function u0(e){return(typeof e=="string"?e:""+e).replace(o1,`
`).replace(c1,"")}function f0(e,n){return n=u0(n),u0(e)===n}function ft(e,n,i,l,f,d){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||pn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&pn(e,""+l);break;case"className":Sn(e,"class",l);break;case"tabIndex":Sn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(e,i,l);break;case"style":fl(e,l,d);break;case"data":if(n!=="object"){Sn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Js(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(n!=="input"&&ft(e,n,"name",f.name,f,null),ft(e,n,"formEncType",f.formEncType,f,null),ft(e,n,"formMethod",f.formMethod,f,null),ft(e,n,"formTarget",f.formTarget,f,null)):(ft(e,n,"encType",f.encType,f,null),ft(e,n,"method",f.method,f,null),ft(e,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Js(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Js(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Pe("beforetoggle",e),Pe("toggle",e),Ks(e,"popover",l);break;case"xlinkActuate":jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ks(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Lo.get(i)||i,Ks(e,i,l))}}function Rh(e,n,i,l,f,d){switch(i){case"style":fl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?pn(e,l):(typeof l=="number"||typeof l=="bigint")&&pn(e,""+l);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),d=e[Ft]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(n,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,f);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Ks(e,i,l)}}}function tn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",e),Pe("load",e);var l=!1,f=!1,d;for(d in i)if(i.hasOwnProperty(d)){var v=i[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ft(e,n,d,v,i,null)}}f&&ft(e,n,"srcSet",i.srcSet,i,null),l&&ft(e,n,"src",i.src,i,null);return;case"input":Pe("invalid",e);var E=d=v=f=null,I=null,F=null;for(l in i)if(i.hasOwnProperty(l)){var $=i[l];if($!=null)switch(l){case"name":f=$;break;case"type":v=$;break;case"checked":I=$;break;case"defaultChecked":F=$;break;case"value":d=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,n));break;default:ft(e,n,l,$,i,null)}}Vo(e,d,E,I,F,v,f,!1);return;case"select":Pe("invalid",e),l=v=d=null;for(f in i)if(i.hasOwnProperty(f)&&(E=i[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:ft(e,n,f,E,i,null)}n=d,i=v,e.multiple=!!l,n!=null?hi(e,!!l,n,!1):i!=null&&hi(e,!!l,i,!0);return;case"textarea":Pe("invalid",e),d=f=l=null;for(v in i)if(i.hasOwnProperty(v)&&(E=i[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ft(e,n,v,E,i,null)}di(e,l,f,d);return;case"option":for(I in i)if(i.hasOwnProperty(I)&&(l=i[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(e,n,I,l,i,null)}return;case"dialog":Pe("beforetoggle",e),Pe("toggle",e),Pe("cancel",e),Pe("close",e);break;case"iframe":case"object":Pe("load",e);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Pe(Fl[l],e);break;case"image":Pe("error",e),Pe("load",e);break;case"details":Pe("toggle",e);break;case"embed":case"source":case"link":Pe("error",e),Pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in i)if(i.hasOwnProperty(F)&&(l=i[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ft(e,n,F,l,i,null)}return;default:if(Zs(n)){for($ in i)i.hasOwnProperty($)&&(l=i[$],l!==void 0&&Rh(e,n,$,l,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(l=i[E],l!=null&&ft(e,n,E,l,i,null))}function u1(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,E=null,I=null,F=null,$=null;for(K in i){var W=i[K];if(i.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=W;default:l.hasOwnProperty(K)||ft(e,n,K,null,l,W)}}for(var Q in l){var K=l[Q];if(W=i[Q],l.hasOwnProperty(Q)&&(K!=null||W!=null))switch(Q){case"type":d=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":$=K;break;case"value":v=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==W&&ft(e,n,Q,K,l,W)}}$s(e,v,E,I,F,$,d,f);return;case"select":K=v=E=Q=null;for(d in i)if(I=i[d],i.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":K=I;default:l.hasOwnProperty(d)||ft(e,n,d,null,l,I)}for(f in l)if(d=l[f],I=i[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":Q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==I&&ft(e,n,f,d,l,I)}n=E,i=v,l=K,Q!=null?hi(e,!!i,Q,!1):!!l!=!!i&&(n!=null?hi(e,!!i,n,!0):hi(e,!!i,i?[]:"",!1));return;case"textarea":K=Q=null;for(E in i)if(f=i[E],i.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ft(e,n,E,null,l,f)}for(v in l)if(f=l[v],d=i[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":Q=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&ft(e,n,v,f,l,d)}jo(e,Q,K);return;case"option":for(var be in i)if(Q=i[be],i.hasOwnProperty(be)&&Q!=null&&!l.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:ft(e,n,be,null,l,Q)}for(I in l)if(Q=l[I],K=i[I],l.hasOwnProperty(I)&&Q!==K&&(Q!=null||K!=null))switch(I){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ft(e,n,I,Q,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in i)Q=i[Ce],i.hasOwnProperty(Ce)&&Q!=null&&!l.hasOwnProperty(Ce)&&ft(e,n,Ce,null,l,Q);for(F in l)if(Q=l[F],K=i[F],l.hasOwnProperty(F)&&Q!==K&&(Q!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:ft(e,n,F,Q,l,K)}return;default:if(Zs(n)){for(var ht in i)Q=i[ht],i.hasOwnProperty(ht)&&Q!==void 0&&!l.hasOwnProperty(ht)&&Rh(e,n,ht,void 0,l,Q);for($ in l)Q=l[$],K=i[$],!l.hasOwnProperty($)||Q===K||Q===void 0&&K===void 0||Rh(e,n,$,Q,l,K);return}}for(var z in i)Q=i[z],i.hasOwnProperty(z)&&Q!=null&&!l.hasOwnProperty(z)&&ft(e,n,z,null,l,Q);for(W in l)Q=l[W],K=i[W],!l.hasOwnProperty(W)||Q===K||Q==null&&K==null||ft(e,n,W,Q,l,K)}function h0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var f=i[l],d=f.transferSize,v=f.initiatorType,E=f.duration;if(d&&E&&h0(v)){for(v=0,E=f.responseEnd,l+=1;l<i.length;l++){var I=i[l],F=I.startTime;if(F>E)break;var $=I.transferSize,W=I.initiatorType;$&&h0(W)&&(I=I.responseEnd,v+=$*(I<E?1:(E-F)/(I-F)))}if(--l,n+=8*(d+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mh=null,Ih=null;function Bc(e){return e.nodeType===9?e:e.ownerDocument}function d0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Dh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Oh=null;function h1(){var e=window.event;return e&&e.type==="popstate"?e===Oh?!1:(Oh=e,!0):(Oh=null,!1)}var p0=typeof setTimeout=="function"?setTimeout:void 0,d1=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(e){return g0.resolve(null).then(e).catch(p1)}:p0;function p1(e){setTimeout(function(){throw e})}function ki(e){return e==="head"}function y0(e,n){var i=n,l=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(f),Dr(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Xl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Xl(i);for(var d=i.firstChild;d;){var v=d.nextSibling,E=d.nodeName;d[ga]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=v}}else i==="body"&&Xl(e.ownerDocument.body);i=f}while(i);Dr(n)}function v0(e,n){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function Vh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Vh(i),Ys(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function g1(e,n,i,l){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ga])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function y1(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Hn(e.nextSibling),e===null))return null;return e}function _0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Hn(e.nextSibling),e===null))return null;return e}function jh(e){return e.data==="$?"||e.data==="$~"}function kh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function v1(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Hn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Lh=null;function b0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Hn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function x0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function E0(e,n,i){switch(n=Bc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Xl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ys(e)}var Fn=new Map,T0=new Set;function Uc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ai=le.d;le.d={f:_1,r:b1,D:x1,C:E1,L:T1,m:S1,X:A1,S:w1,M:C1};function _1(){var e=ai.f(),n=Mc();return e||n}function b1(e){var n=Vn(e);n!==null&&n.tag===5&&n.type==="form"?zp(n):ai.r(e)}var Rr=typeof document>"u"?null:document;function S0(e,n,i){var l=Rr;if(l&&typeof n=="string"&&n){var f=mn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),T0.has(f)||(T0.add(f),e={rel:e,crossOrigin:i,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function x1(e){ai.D(e),S0("dns-prefetch",e,null)}function E1(e,n){ai.C(e,n),S0("preconnect",e,n)}function T1(e,n,i){ai.L(e,n,i);var l=Rr;if(l&&e&&n){var f='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+mn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+mn(i.imageSizes)+'"]')):f+='[href="'+mn(e)+'"]';var d=f;switch(n){case"style":d=Mr(e);break;case"script":d=Ir(e)}Fn.has(d)||(e=T({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Fn.set(d,e),l.querySelector(f)!==null||n==="style"&&l.querySelector(Yl(d))||n==="script"&&l.querySelector(Kl(d))||(n=l.createElement("link"),tn(n,"link",e),Vt(n),l.head.appendChild(n)))}}function S1(e,n){ai.m(e,n);var i=Rr;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+mn(l)+'"][href="'+mn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ir(e)}if(!Fn.has(d)&&(e=T({rel:"modulepreload",href:e},n),Fn.set(d,e),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Kl(d)))return}l=i.createElement("link"),tn(l,"link",e),Vt(l),i.head.appendChild(l)}}}function w1(e,n,i){ai.S(e,n,i);var l=Rr;if(l&&e){var f=va(l).hoistableStyles,d=Mr(e);n=n||"default";var v=f.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Yl(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Fn.get(d))&&Bh(e,i);var I=v=l.createElement("link");Vt(I),tn(I,"link",e),I._p=new Promise(function(F,$){I.onload=F,I.onerror=$}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,zc(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(d,v)}}}function A1(e,n){ai.X(e,n);var i=Rr;if(i&&e){var l=va(i).hoistableScripts,f=Ir(e),d=l.get(f);d||(d=i.querySelector(Kl(f)),d||(e=T({src:e,async:!0},n),(n=Fn.get(f))&&Uh(e,n),d=i.createElement("script"),Vt(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function C1(e,n){ai.M(e,n);var i=Rr;if(i&&e){var l=va(i).hoistableScripts,f=Ir(e),d=l.get(f);d||(d=i.querySelector(Kl(f)),d||(e=T({src:e,async:!0,type:"module"},n),(n=Fn.get(f))&&Uh(e,n),d=i.createElement("script"),Vt(d),tn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function w0(e,n,i,l){var f=(f=ve.current)?Uc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Mr(i.href),i=va(f).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Mr(i.href);var d=va(f).hoistableStyles,v=d.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=f.querySelector(Yl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Fn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Fn.set(e,i),d||N1(f,e,i,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ir(i),i=va(f).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Mr(e){return'href="'+mn(e)+'"'}function Yl(e){return'link[rel="stylesheet"]['+e+"]"}function A0(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function N1(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),tn(n,"link",i),Vt(n),e.head.appendChild(n))}function Ir(e){return'[src="'+mn(e)+'"]'}function Kl(e){return"script[async]"+e}function C0(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+mn(i.href)+'"]');if(l)return n.instance=l,Vt(l),l;var f=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Vt(l),tn(l,"style",f),zc(l,i.precedence,e),n.instance=l;case"stylesheet":f=Mr(i.href);var d=e.querySelector(Yl(f));if(d)return n.state.loading|=4,n.instance=d,Vt(d),d;l=A0(i),(f=Fn.get(f))&&Bh(l,f),d=(e.ownerDocument||e).createElement("link"),Vt(d);var v=d;return v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),tn(d,"link",l),n.state.loading|=4,zc(d,i.precedence,e),n.instance=d;case"script":return d=Ir(i.src),(f=e.querySelector(Kl(d)))?(n.instance=f,Vt(f),f):(l=i,(f=Fn.get(d))&&(l=T({},i),Uh(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Vt(f),tn(f,"link",l),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,zc(l,i.precedence,e));return n.instance}function zc(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===n)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Bh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Uh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Pc=null;function N0(e,n,i){if(Pc===null){var l=new Map,f=Pc=new Map;f.set(i,l)}else f=Pc,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var d=i[f];if(!(d[ga]||d[Ot]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(n)||"";v=e+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function R0(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function R1(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function M0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function M1(e,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Mr(l.href),d=n.querySelector(Yl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Gc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=d,Vt(d);return}d=n.ownerDocument||n,l=A0(l),(f=Fn.get(f))&&Bh(l,f),d=d.createElement("link"),Vt(d);var v=d;v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),tn(d,"link",l),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Gc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var zh=0;function I1(e,n){return e.stylesheets&&e.count===0&&Hc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Hc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&zh===0&&(zh=62500*f1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Hc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>zh?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qc=null;function Hc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qc=new Map,n.forEach(D1,e),qc=null,Gc.call(e))}function D1(e,n){if(!(n.state.loading&4)){var i=qc.get(e);if(i)var l=i.get(null);else{i=new Map,qc.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}f=n.instance,v=f.getAttribute("data-precedence"),d=i.get(v)||l,d===l&&i.set(null,f),i.set(v,f),this.count++,l=Gc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var $l={$$typeof:ne,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function O1(e,n,i,l,f,d,v,E,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function I0(e,n,i,l,f,d,v,E,I,F,$,W){return e=new O1(e,n,i,v,I,F,$,W,E),n=1,d===!0&&(n|=24),d=An(3,null,null,n),e.current=d,d.stateNode=e,n=_f(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:i,cache:n},Tf(d),e}function D0(e){return e?(e=or,e):or}function O0(e,n,i,l,f,d){f=D0(f),l.context===null?l.context=f:l.pendingContext=f,l=wi(n),l.payload={element:i},d=d===void 0?null:d,d!==null&&(l.callback=d),i=Ai(e,l,n),i!==null&&(bn(i,e,n),Nl(i,e,n))}function V0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Ph(e,n){V0(e,n),(e=e.alternate)&&V0(e,n)}function j0(e){if(e.tag===13||e.tag===31){var n=bs(e,67108864);n!==null&&bn(n,e,67108864),Ph(e,67108864)}}function k0(e){if(e.tag===13||e.tag===31){var n=In();n=os(n);var i=bs(e,n);i!==null&&bn(i,e,n),Ph(e,n)}}var Fc=!0;function V1(e,n,i,l){var f=X.T;X.T=null;var d=le.p;try{le.p=2,Gh(e,n,i,l)}finally{le.p=d,X.T=f}}function j1(e,n,i,l){var f=X.T;X.T=null;var d=le.p;try{le.p=8,Gh(e,n,i,l)}finally{le.p=d,X.T=f}}function Gh(e,n,i,l){if(Fc){var f=qh(l);if(f===null)Nh(e,n,l,Qc,i),B0(e,l);else if(L1(f,e,n,i,l))l.stopPropagation();else if(B0(e,l),n&4&&-1<k1.indexOf(e)){for(;f!==null;){var d=Vn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=ha(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var I=1<<31-wt(v);E.entanglements[1]|=I,v&=~I}Ia(d),(tt&6)===0&&(Nc=It()+500,Hl(0))}}break;case 31:case 13:E=bs(d,2),E!==null&&bn(E,d,2),Mc(),Ph(d,2)}if(d=qh(l),d===null&&Nh(e,n,l,Qc,i),d===f)break;f=d}f!==null&&l.stopPropagation()}else Nh(e,n,l,null,i)}}function qh(e){return e=jn(e),Hh(e)}var Qc=null;function Hh(e){if(Qc=null,e=ya(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=h(n),e!==null)return e;e=null}else if(i===31){if(e=m(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Qc=e,null}function L0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case ca:return 2;case it:return 8;case ua:case Hs:return 32;case is:return 268435456;default:return 32}default:return 32}}var Fh=!1,Li=null,Bi=null,Ui=null,Zl=new Map,Jl=new Map,zi=[],k1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(e,n){switch(e){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(n.pointerId)}}function Wl(e,n,i,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=Vn(n),n!==null&&j0(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function L1(e,n,i,l,f){switch(n){case"focusin":return Li=Wl(Li,e,n,i,l,f),!0;case"dragenter":return Bi=Wl(Bi,e,n,i,l,f),!0;case"mouseover":return Ui=Wl(Ui,e,n,i,l,f),!0;case"pointerover":var d=f.pointerId;return Zl.set(d,Wl(Zl.get(d)||null,e,n,i,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Jl.set(d,Wl(Jl.get(d)||null,e,n,i,l,f)),!0}return!1}function U0(e){var n=ya(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=h(i),n!==null){e.blockedOn=n,$n(e.priority,function(){k0(i)});return}}else if(n===31){if(n=m(i),n!==null){e.blockedOn=n,$n(e.priority,function(){k0(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=qh(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);hl=l,i.target.dispatchEvent(l),hl=null}else return n=Vn(i),n!==null&&j0(n),e.blockedOn=i,!1;n.shift()}return!0}function z0(e,n,i){Xc(e)&&i.delete(n)}function B1(){Fh=!1,Li!==null&&Xc(Li)&&(Li=null),Bi!==null&&Xc(Bi)&&(Bi=null),Ui!==null&&Xc(Ui)&&(Ui=null),Zl.forEach(z0),Jl.forEach(z0)}function Yc(e,n){e.blockedOn===n&&(e.blockedOn=null,Fh||(Fh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,B1)))}var Kc=null;function P0(e){Kc!==e&&(Kc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Kc===e&&(Kc=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],f=e[n+2];if(typeof l!="function"){if(Hh(l||i)===null)continue;break}var d=Vn(i);d!==null&&(e.splice(n,3),n-=3,qf(d,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function Dr(e){function n(I){return Yc(I,e)}Li!==null&&Yc(Li,e),Bi!==null&&Yc(Bi,e),Ui!==null&&Yc(Ui,e),Zl.forEach(n),Jl.forEach(n);for(var i=0;i<zi.length;i++){var l=zi[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<zi.length&&(i=zi[0],i.blockedOn===null);)U0(i),i.blockedOn===null&&zi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],d=i[l+1],v=f[Ft]||null;if(typeof d=="function")v||P0(i);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Ft]||null)E=v.formAction;else if(Hh(f)!==null)continue}else E=v.action;typeof E=="function"?i[l+1]=E:(i.splice(l,3),l-=3),P0(i)}}}function G0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Qh(e){this._internalRoot=e}$c.prototype.render=Qh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,l=In();O0(i,l,e,n,null,null)},$c.prototype.unmount=Qh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;O0(e.current,2,null,e,null,null),Mc(),n[pa]=null}};function $c(e){this._internalRoot=e}$c.prototype.unstable_scheduleHydration=function(e){if(e){var n=Mo();e={blockedOn:null,target:e,priority:n};for(var i=0;i<zi.length&&n!==0&&n<zi[i].priority;i++);zi.splice(i,0,e),i===0&&U0(e)}};var q0=t.version;if(q0!=="19.2.1")throw Error(s(527,q0,"19.2.1"));le.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=_(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var U1={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{En=Zc.inject(U1),$t=Zc}catch{}}return eo.createRoot=function(e,n){if(!o(e))throw Error(s(299));var i=!1,l="",f=$p,d=Zp,v=Jp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=I0(e,1,!1,null,null,i,l,null,f,d,v,G0),e[pa]=n.current,Ch(e),new Qh(n)},eo.hydrateRoot=function(e,n,i){if(!o(e))throw Error(s(299));var l=!1,f="",d=$p,v=Zp,E=Jp,I=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(I=i.formState)),n=I0(e,1,!0,n,i??null,l,f,I,d,v,E,G0),n.context=D0(null),i=n.current,l=In(),l=os(l),f=wi(l),f.callback=null,Ai(i,f,l),i=l,n.current.lanes=i,rs(n,i),Ia(n),e[pa]=n.current,Ch(e),new $c(n)},eo.version="19.2.1",eo}var X0;function Q1(){if(X0)return Xh.exports;X0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Xh.exports=F1(),Xh.exports}var X1=Q1();function Y1(r,t){let a;try{a=r()}catch{return}return{getItem:o=>{var c;const h=y=>y===null?null:JSON.parse(y,void 0),m=(c=a.getItem(o))!=null?c:null;return m instanceof Promise?m.then(h):h(m)},setItem:(o,c)=>a.setItem(o,JSON.stringify(c,void 0)),removeItem:o=>a.removeItem(o)}}const ud=r=>t=>{try{const a=r(t);return a instanceof Promise?a:{then(s){return ud(s)(a)},catch(s){return this}}}catch(a){return{then(s){return this},catch(s){return ud(s)(a)}}}},K1=(r,t)=>(a,s,o)=>{let c={storage:Y1(()=>localStorage),partialize:P=>P,version:0,merge:(P,k)=>({...k,...P}),...t},h=!1;const m=new Set,y=new Set;let _=c.storage;if(!_)return r((...P)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...P)},s,o);const x=()=>{const P=c.partialize({...s()});return _.setItem(c.name,{state:P,version:c.version})},T=o.setState;o.setState=(P,k)=>(T(P,k),x());const A=r((...P)=>(a(...P),x()),s,o);o.getInitialState=()=>A;let U;const B=()=>{var P,k;if(!_)return;h=!1,m.forEach(J=>{var ne;return J((ne=s())!=null?ne:A)});const V=((k=c.onRehydrateStorage)==null?void 0:k.call(c,(P=s())!=null?P:A))||void 0;return ud(_.getItem.bind(_))(c.name).then(J=>{if(J)if(typeof J.version=="number"&&J.version!==c.version){if(c.migrate){const ne=c.migrate(J.state,J.version);return ne instanceof Promise?ne.then(re=>[!0,re]):[!0,ne]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,J.state];return[!1,void 0]}).then(J=>{var ne;const[re,ce]=J;if(U=c.merge(ce,(ne=s())!=null?ne:A),a(U,!0),re)return x()}).then(()=>{V?.(U,void 0),U=s(),h=!0,y.forEach(J=>J(U))}).catch(J=>{V?.(void 0,J)})};return o.persist={setOptions:P=>{c={...c,...P},P.storage&&(_=P.storage)},clearStorage:()=>{_?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>B(),hasHydrated:()=>h,onHydrate:P=>(m.add(P),()=>{m.delete(P)}),onFinishHydration:P=>(y.add(P),()=>{y.delete(P)})},c.skipHydration||B(),U||A},yv=K1,nn=[];for(let r=0;r<256;++r)nn.push((r+256).toString(16).slice(1));function $1(r,t=0){return(nn[r[t+0]]+nn[r[t+1]]+nn[r[t+2]]+nn[r[t+3]]+"-"+nn[r[t+4]]+nn[r[t+5]]+"-"+nn[r[t+6]]+nn[r[t+7]]+"-"+nn[r[t+8]]+nn[r[t+9]]+"-"+nn[r[t+10]]+nn[r[t+11]]+nn[r[t+12]]+nn[r[t+13]]+nn[r[t+14]]+nn[r[t+15]]).toLowerCase()}let $h;const Z1=new Uint8Array(16);function J1(){if(!$h){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$h=crypto.getRandomValues.bind(crypto)}return $h(Z1)}const W1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y0={randomUUID:W1};function ex(r,t,a){r=r||{};const s=r.random??r.rng?.()??J1();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,$1(s)}function Jc(r,t,a){return Y0.randomUUID&&!r?Y0.randomUUID():ex(r)}const pe={COLUMNS:8,ROWS:16},Zh={1:["red","blue","green","yellow","purple"],6:["red","blue","green","yellow","purple","cyan"],11:["red","blue","green","yellow","purple","cyan","pink"],16:["red","blue","green","yellow","purple","cyan","pink","orange"]},Ld={red:"#ff4757",blue:"#3742fa",green:"#2ed573",yellow:"#ffa502",purple:"#8854d0",cyan:"#00d2d3",pink:"#ff6b81",orange:"#ff7f50",rainbow:"linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff)"},tx={red:"#D55E00",blue:"#0072B2",green:"#009E73",yellow:"#F0E442",purple:"#CC79A7",cyan:"#56B4E9",pink:"#E69F00",orange:"#999999",rainbow:"linear-gradient(45deg, #D55E00, #0072B2, #009E73, #F0E442)"},nx={red:"striped",blue:"dotted",green:"crosshatch",yellow:"solid",purple:"diagonal",cyan:"grid",pink:"waves",orange:"circles",rainbow:"rainbow"},vv={normal:{name:"",icon:"",description:" ",baseChance:0,minLevel:1},bomb:{name:"",icon:"",description:" 3x3  ",baseChance:.05,minLevel:3,color:"#ff6b6b"},lightning:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:5,color:"#ffd93d"},cross:{name:"",icon:"",description:"    ",baseChance:.04,minLevel:4,color:"#6bcb77"},frozen:{name:"",icon:"",description:"2  ",baseChance:.06,minLevel:2,color:"#74b9ff"},stone:{name:"",icon:"",description:" ,    ",baseChance:.03,minLevel:6,color:"#636e72"},multiplier:{name:"",icon:"",description:"      2",baseChance:.035,minLevel:4,color:"#fdcb6e"},shuffle:{name:"",icon:"",description:"   3x3   ",baseChance:.02,minLevel:8,color:"#a29bfe"},colorShift:{name:"",icon:"",description:"    ",baseChance:.025,minLevel:7,color:"#fd79a8"}},qi={BASE_DROP_SPEED:600,SPEED_DECREASE_PER_LEVEL:40,MIN_DROP_SPEED:80,FUSION_ANIMATION_DURATION:180,CHAIN_DELAY:120,COMBO_TIMEOUT:2e3,SPECIAL_EFFECT_DURATION:300,GARBAGE_INTERVAL:25},Da={BASE_POINTS_PER_BLOCK:10,CHAIN_BONUS_MULTIPLIER:150,COMBO_BONUS:75,MASS_FUSION_THRESHOLD:6,MASS_FUSION_BONUS_PER_BLOCK:30,PERFECT_CLEAR_BONUS:15e3,LEVEL_UP_THRESHOLD:1e3,SPECIAL_BLOCK_BONUS:50,FEVER_MULTIPLIER:3},fd={MIN_BLOCKS_TO_FUSE:4,BOMB_RADIUS:1};function ax(r){return fd.MIN_BLOCKS_TO_FUSE}const Vs={GAUGE_PER_CHAIN:10,GAUGE_PER_COMBO:5,MAX_GAUGE:100,DECAY_RATE:2},Ls={SPECIAL_CHANCE_PER_LEVEL:.006,GARBAGE_START_LEVEL:5,GARBAGE_ROWS_PER_INTERVAL:1,GARBAGE_MAX_ROWS:3,GARBAGE_INTERVAL_DECREASE:.5,GARBAGE_MIN_INTERVAL:10};function K0(r){return r>=30?8:r>=25?7:r>=20?6:r>=15?5:r>=10?4:r>=5?3:2}const ix=[{offsets:[[0,0],[1,0]],name:"horizontal"},{offsets:[[0,0],[0,1]],name:"vertical"}],sx=[{offsets:[[0,0],[1,0],[2,0]],name:"line-h"},{offsets:[[0,0],[0,1],[0,2]],name:"line-v"},{offsets:[[0,0],[1,0],[1,1]],name:"L-right"},{offsets:[[0,0],[0,1],[1,1]],name:"L-left"},{offsets:[[1,0],[0,1],[1,1]],name:"L-up"},{offsets:[[0,0],[1,0],[0,1]],name:"corner"}],rx=[{offsets:[[0,0],[1,0],[2,0],[3,0]],name:"line-h4"},{offsets:[[0,0],[0,1],[0,2],[0,3]],name:"line-v4"},{offsets:[[0,0],[1,0],[0,1],[1,1]],name:"square"},{offsets:[[1,0],[0,1],[1,1],[2,1]],name:"T-down"},{offsets:[[0,0],[0,1],[1,1],[0,2]],name:"T-right"},{offsets:[[0,0],[1,0],[1,1],[2,1]],name:"zigzag"},{offsets:[[1,0],[0,1],[1,1],[1,2]],name:"plus"},{offsets:[[0,0],[1,0],[2,0],[1,1]],name:"arrow"}],lx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0]],name:"line-h5"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2]],name:"L-big"},{offsets:[[0,0],[1,0],[2,0],[1,1],[1,2]],name:"T-long"},{offsets:[[1,0],[0,1],[1,1],[2,1],[1,2]],name:"cross"},{offsets:[[0,0],[1,0],[1,1],[2,1],[3,1]],name:"snake"},{offsets:[[0,0],[0,1],[1,1],[1,2],[2,2]],name:"stairs"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1]],name:"P-shape"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1]],name:"U-shape"}],ox=[{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1]],name:"rect-2x3"},{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0]],name:"line-h6"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"tree"},{offsets:[[0,0],[1,0],[2,0],[0,1],[0,2],[0,3]],name:"L-huge"},{offsets:[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],name:"tower"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"H-shape"}],cx=[{offsets:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0]],name:"line-h7"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],name:"diamond"},{offsets:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[1,2]],name:"arrow-big"},{offsets:[[0,0],[2,0],[0,1],[1,1],[2,1],[0,2],[2,2]],name:"window"},{offsets:[[1,0],[0,1],[1,1],[2,1],[3,1],[1,2],[1,3]],name:"anchor"}],ux=[{offsets:[[0,0],[1,0],[2,0],[3,0],[0,1],[1,1],[2,1],[3,1]],name:"rect-2x4"},{offsets:[[1,0],[2,0],[0,1],[1,1],[2,1],[3,1],[1,2],[2,2]],name:"bone"},{offsets:[[0,0],[1,0],[2,0],[0,1],[2,1],[0,2],[1,2],[2,2]],name:"frame"},{offsets:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2],[1,3]],name:"big-cross"},{offsets:[[0,0],[1,0],[0,1],[1,1],[2,1],[3,1],[2,2],[3,2]],name:"zigzag-big"}];function fx(r){let t;switch(r){case 2:t=ix;break;case 3:t=sx;break;case 4:t=rx;break;case 5:t=lx;break;case 6:t=ox;break;case 7:t=cx;break;case 8:t=ux;break;default:return{offsets:[[0,0]],name:"single"}}return t[Math.floor(Math.random()*t.length)]}function hx(r){const t=qi.GARBAGE_INTERVAL-(r-Ls.GARBAGE_START_LEVEL)*Ls.GARBAGE_INTERVAL_DECREASE;return Math.max(t,Ls.GARBAGE_MIN_INTERVAL)}function $0(r){const t=[];return t.push({type:"score",target:r*500+(r-1)*200,current:0,completed:!1}),r>=3&&t.push({type:"clearBlocks",target:20+r*5,current:0,completed:!1}),r>=5&&t.push({type:"chains",target:Math.min(3+Math.floor(r/3),8),current:0,completed:!1}),r>=7&&t.push({type:"clearSpecial",target:3+Math.floor(r/4),current:0,completed:!1}),r>=10&&t.push({type:"clearStone",target:2+Math.floor(r/5),current:0,completed:!1}),t}const mu={getMovesForLevel:r=>Math.max(10,25-Math.floor(r/2)),getTargetScore:r=>500+r*300+Math.floor(r/3)*200,getTargetBlocks:r=>15+r*5,getColorCount:r=>r<=3?4:r<=6?5:r<=10?6:7};function Z0(r){const t=[];if(t.push({type:"score",target:mu.getTargetScore(r),current:0,completed:!1}),r>=2&&t.push({type:"clearBlocks",target:mu.getTargetBlocks(r),current:0,completed:!1}),r>=5&&t.push({type:"chains",target:2+Math.floor(r/3),current:0,completed:!1}),r>=8){const a=["red","blue","green","yellow","purple"],s=a[r%a.length];t.push({type:"clearColor",target:10+r,current:0,color:s,completed:!1})}return t}const dx={colorBomb:{name:" ",description:"    ",icon:"",price:{coins:500,gems:20}},rowClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},columnClear:{name:" ",description:"  ",icon:"",price:{coins:400,gems:15}},gravityShift:{name:" ",description:"  ",icon:"",price:{coins:600,gems:25}},timeSlow:{name:" ",description:"5 50%  ",icon:"",price:{coins:300,gems:10}},rainbowBlock:{name:" ",description:"    ",icon:"",price:{coins:800,gems:30}},scoreMultiplier:{name:" ",description:"30  2",icon:"",price:{coins:700,gems:28}},blockPreview:{name:"",description:"10  ",icon:"",price:{coins:200,gems:8}},undo:{name:"",description:" 3 ",icon:"",price:{coins:500,gems:20}},freeze:{name:"",description:"5   ",icon:"",price:{coins:400,gems:15}}},hd={down:{dx:0,dy:1},up:{dx:0,dy:-1},left:{dx:-1,dy:0},right:{dx:1,dy:0}},mx={down:"",up:"",left:"",right:""},px=5,_v={classic:{name:"",description:" !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1},timeAttack:{name:"",description:"2   !",icon:"",hasTimeLimit:!0,timeLimit:120,hasLevelLimit:!1},puzzle:{name:"",description:"   ",icon:"",hasTimeLimit:!1,hasLevelLimit:!0,movesLimit:30},zen:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,noGameOver:!0},daily:{name:" ",description:"  !",icon:"",hasTimeLimit:!0,timeLimit:180,hasLevelLimit:!1},survival:{name:"",description:"  !",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,speedIncrease:!0},challenge:{name:"",description:"  ",icon:"",hasTimeLimit:!1,hasLevelLimit:!1,hasObjectives:!0}},Gi={SWIPE_THRESHOLD:30,FAST_SWIPE_VELOCITY:1e3,LONG_PRESS_DURATION:500,DOUBLE_TAP_DELAY:300},gx={light:[10],medium:[20],heavy:[30],success:[10,50,20],error:[30,50,30],selection:[5]};function Bd(r){const t=Object.keys(Zh).map(Number).sort((a,s)=>s-a);for(const a of t)if(r>=a)return Zh[a];return Zh[1]}function J0(r){const t=qi.BASE_DROP_SPEED-(r-1)*qi.SPEED_DECREASE_PER_LEVEL;return Math.max(t,qi.MIN_DROP_SPEED)}function yx(r){return Da.LEVEL_UP_THRESHOLD*r+(r-1)*200}function vx(r){return Math.min(.15,.05+r*Ls.SPECIAL_CHANCE_PER_LEVEL)}function W0(r){const t=Object.entries(vv).filter(([o,c])=>o!=="normal"&&r>=c.minLevel).map(([o,c])=>({type:o,chance:c.baseChance}));if(t.length===0)return"normal";const a=t.reduce((o,c)=>o+c.chance,0);let s=Math.random()*a;for(const{type:o,chance:c}of t)if(s-=c,s<=0)return o;return t[0].type}function _x(r){const{blocksCleared:t,chainCount:a,comboCount:s,level:o,powerUpMultiplier:c,perfectClear:h,isFeverMode:m=!1,specialBlocksCleared:y=0}=r;let _=t*Da.BASE_POINTS_PER_BLOCK*o;const x=a>1?Math.pow(a,2.5)*Da.CHAIN_BONUS_MULTIPLIER:0,T=s*Da.COMBO_BONUS*(1+s*.1),A=t>=Da.MASS_FUSION_THRESHOLD?t*Da.MASS_FUSION_BONUS_PER_BLOCK*Math.floor(t/Da.MASS_FUSION_THRESHOLD):0,U=y*Da.SPECIAL_BLOCK_BONUS*o,B=h?Da.PERFECT_CLEAR_BONUS*o:0,P=m?Da.FEVER_MULTIPLIER:1;return Math.floor((_+x+T+A+U+B)*c*P)}const bx=[{id:"score_10k",name:"",description:"10,000 ",category:"score",target:1e4,reward:{gems:10},icon:""},{id:"score_50k",name:"",description:"50,000 ",category:"score",target:5e4,reward:{gems:25},icon:""},{id:"score_100k",name:"",description:"100,000 ",category:"score",target:1e5,reward:{gems:50},icon:""},{id:"score_500k",name:"",description:"500,000 ",category:"score",target:5e5,reward:{gems:100},icon:""},{id:"score_1m",name:"",description:"1,000,000 ",category:"score",target:1e6,reward:{gems:200,skin:"score_master"},icon:""},{id:"score_5m",name:"",description:"5,000,000 ",category:"score",target:5e6,reward:{gems:500},icon:""},{id:"score_10m",name:"",description:"10,000,000 ",category:"score",target:1e7,reward:{gems:1e3,skin:"mythic_legend"},icon:""},{id:"combo_10",name:" ",description:"10  ",category:"combo",target:10,reward:{gems:10},icon:""},{id:"combo_20",name:" ",description:"20  ",category:"combo",target:20,reward:{gems:25},icon:""},{id:"combo_30",name:" ",description:"30  ",category:"combo",target:30,reward:{gems:50},icon:""},{id:"combo_50",name:" ",description:"50  ",category:"combo",target:50,reward:{gems:100,skin:"combo_legend"},icon:""},{id:"combo_100",name:" ",description:"100  ",category:"combo",target:100,reward:{gems:300},icon:""},{id:"chain_5",name:" ",description:"5 ",category:"chain",target:5,reward:{gems:15},icon:""},{id:"chain_10",name:" ",description:"10 ",category:"chain",target:10,reward:{gems:50},icon:""},{id:"chain_15",name:" ",description:"15 ",category:"chain",target:15,reward:{gems:150,skin:"chain_master"},icon:""},{id:"chain_20",name:" ",description:"20 ",category:"chain",target:20,reward:{gems:300},icon:""},{id:"perfect_clear",name:"!",description:"  ",category:"special",target:1,reward:{gems:100},icon:""},{id:"comeback",name:" ",description:"  ",category:"special",target:1,reward:{gems:75},icon:""},{id:"speed_demon",name:" ",description:"1  50,000",category:"special",target:1,reward:{gems:100},icon:""},{id:"no_powerup",name:"",description:"   20",category:"special",target:1,reward:{gems:150},icon:""},{id:"all_colors",name:"",description:"5   ",category:"special",target:1,reward:{gems:50},icon:""},{id:"first_blood",name:" ",description:"  ",category:"special",target:1,reward:{gems:5},icon:""},{id:"marathon",name:"",description:"30  ",category:"special",target:1,reward:{gems:80},icon:""},{id:"games_10",name:"",description:"10 ",category:"play",target:10,reward:{coins:500},icon:""},{id:"games_100",name:"",description:"100 ",category:"play",target:100,reward:{gems:50},icon:""},{id:"games_500",name:"",description:"500 ",category:"play",target:500,reward:{gems:200},icon:""},{id:"games_1000",name:"",description:"1000 ",category:"play",target:1e3,reward:{gems:500},icon:""},{id:"time_1h",name:"",description:" 1 ",category:"play",target:3600,reward:{coins:1e3},icon:""},{id:"time_10h",name:"",description:" 10 ",category:"play",target:36e3,reward:{gems:100},icon:""},{id:"time_100h",name:" ",description:" 100 ",category:"play",target:36e4,reward:{gems:1e3,skin:"veteran"},icon:""},{id:"secret_gravity",name:"???",description:"   ",category:"hidden",target:1,reward:{gems:50},icon:""},{id:"secret_lucky",name:"???",description:" 3  ",category:"hidden",target:1,reward:{gems:100},icon:""},{id:"secret_developer",name:"???",description:"  ",category:"hidden",target:1,reward:{gems:200},icon:""}];function xx(){return bx.map(r=>({...r,current:0,completed:!1,claimed:!1}))}const fo={classic:{colors:["#ff4757","#3742fa","#2ed573","#ffa502","#8854d0"],borderRadius:"4px",borderWidth:0,borderStyle:"none",innerEffect:"glossy",animation:"none",glowIntensity:0,texture:"none"},neon:{colors:["#ff0080","#00ffff","#39ff14","#ffff00","#bf00ff"],borderRadius:"2px",borderWidth:2,borderStyle:"solid",innerEffect:"glow",animation:"pulse",glowIntensity:.8,texture:"none"},candy:{colors:["#ff6b9d","#a855f7","#4ade80","#fbbf24","#fb923c"],borderRadius:"50%",borderWidth:3,borderStyle:"solid",innerEffect:"glass",animation:"none",glowIntensity:.2,texture:"none"},pixel:{colors:["#dc2626","#2563eb","#16a34a","#ca8a04","#7c3aed"],borderRadius:"0px",borderWidth:3,borderStyle:"solid",innerEffect:"flat",animation:"none",glowIntensity:0,texture:"lines"},galaxy:{colors:["#8b5cf6","#ec4899","#06b6d4","#f43f5e","#3b82f6"],borderRadius:"6px",borderWidth:1,borderStyle:"solid",innerEffect:"gradient",animation:"shimmer",glowIntensity:.5,texture:"dots"},crystal:{colors:["#f0abfc","#a5f3fc","#bbf7d0","#fef08a","#fecaca"],borderRadius:"8px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"shimmer",glowIntensity:.6,texture:"cracks"},holographic:{colors:["#f472b6","#c084fc","#60a5fa","#34d399","#fbbf24"],borderRadius:"4px",borderWidth:1,borderStyle:"solid",innerEffect:"metallic",animation:"shimmer",glowIntensity:.7,texture:"lines"},animated_fire:{colors:["#ef4444","#f97316","#eab308","#dc2626","#fb923c"],borderRadius:"4px",borderWidth:0,borderStyle:"none",innerEffect:"glow",animation:"fire",particleEffect:!0,glowIntensity:.9,texture:"noise"},animated_ice:{colors:["#38bdf8","#67e8f9","#a5f3fc","#22d3ee","#0ea5e9"],borderRadius:"2px",borderWidth:2,borderStyle:"solid",innerEffect:"glass",animation:"ice",particleEffect:!0,glowIntensity:.6,texture:"cracks"},animated_electric:{colors:["#facc15","#a3e635","#22d3ee","#e879f9","#fbbf24"],borderRadius:"4px",borderWidth:2,borderStyle:"solid",innerEffect:"glow",animation:"electric",particleEffect:!0,glowIntensity:1,texture:"circuit"}};Object.fromEntries(Object.entries(fo).map(([r,t])=>[r,t.colors]));const dd=[{id:"classic",name:"",price:0,currency:"free",rarity:"common",owned:!0,equipped:!0},{id:"neon",name:"",price:1e3,currency:"coins",rarity:"common",owned:!1,equipped:!1},{id:"candy",name:"",price:2e3,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"pixel",name:"",price:2500,currency:"coins",rarity:"uncommon",owned:!1,equipped:!1},{id:"galaxy",name:"",price:100,currency:"gems",rarity:"rare",owned:!1,equipped:!1},{id:"crystal",name:"",price:200,currency:"gems",rarity:"epic",owned:!1,equipped:!1},{id:"holographic",name:"",price:500,currency:"gems",rarity:"legendary",owned:!1,equipped:!1},{id:"animated_fire",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_ice",name:"",price:800,currency:"gems",rarity:"legendary",owned:!1,equipped:!1,animated:!0},{id:"animated_electric",name:"",price:1e3,currency:"gems",rarity:"mythic",owned:!1,equipped:!1,animated:!0}],pu=[{id:"dark",name:"",description:"  ",price:0,currency:"free",owned:!0,equipped:!0,colors:{background:"#0a0a1a",backgroundGradient:"radial-gradient(circle at 50% 10%, #1a1a40 0%, #050510 60%)",panel:"#1a1a2e",panelBorder:"rgba(255,255,255,0.1)",accent:"#4a9eff",text:"#ffffff",textSecondary:"#888888",danger:"#ff4757",success:"#2ed573"}},{id:"light",name:"",description:"  ",price:500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#e8e8f0",backgroundGradient:"linear-gradient(180deg, #f5f5fa 0%, #e0e0ea 100%)",panel:"#ffffff",panelBorder:"rgba(0,0,0,0.1)",accent:"#3742fa",text:"#1a1a2e",textSecondary:"#666666",danger:"#dc3545",success:"#28a745"}},{id:"ocean",name:"",description:"   ",price:1500,currency:"coins",owned:!1,equipped:!1,colors:{background:"#0a1628",backgroundGradient:"radial-gradient(ellipse at bottom, #0a2463 0%, #0a1628 50%, #030811 100%)",panel:"#162d50",panelBorder:"rgba(0,210,211,0.3)",accent:"#00d2d3",text:"#e0f7fa",textSecondary:"#80deea",danger:"#ff6b6b",success:"#00e676"}},{id:"forest",name:"",description:"  ",price:150,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0a1a0a",backgroundGradient:"radial-gradient(circle at 30% 80%, #1a3a1a 0%, #0a1a0a 60%)",panel:"#1a2e1a",panelBorder:"rgba(46,213,115,0.3)",accent:"#2ed573",text:"#e8f5e9",textSecondary:"#a5d6a7",danger:"#ff7043",success:"#76ff03"}},{id:"sunset",name:"",description:"  ",price:200,currency:"gems",owned:!1,equipped:!1,colors:{background:"#1a0a1a",backgroundGradient:"linear-gradient(180deg, #2d1b3d 0%, #1a0a1a 50%, #0d0508 100%)",panel:"#2e1a2e",panelBorder:"rgba(255,107,129,0.3)",accent:"#ff6b81",text:"#fce4ec",textSecondary:"#f48fb1",danger:"#ff1744",success:"#ffab40"}},{id:"space",name:"",description:"  ",price:300,currency:"gems",owned:!1,equipped:!1,colors:{background:"#050510",backgroundGradient:"radial-gradient(ellipse at 20% 20%, #1a0a30 0%, #050510 40%, #000005 100%)",panel:"#0a0a20",panelBorder:"rgba(136,84,208,0.4)",accent:"#8854d0",text:"#ede7f6",textSecondary:"#b39ddb",danger:"#ff4081",success:"#7c4dff"}},{id:"cyberpunk",name:"",description:"   ",price:500,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0d0d1a",backgroundGradient:"linear-gradient(135deg, #0d0d1a 0%, #1a0a2e 50%, #0d0d1a 100%)",panel:"#1a1a33",panelBorder:"rgba(255,0,255,0.4)",accent:"#ff00ff",text:"#f0f0ff",textSecondary:"#ce93d8",danger:"#ff1744",success:"#00ff88"}},{id:"cherry",name:"",description:"  ",price:400,currency:"gems",owned:!1,equipped:!1,colors:{background:"#1a0f14",backgroundGradient:"radial-gradient(circle at 70% 30%, #3d1f2e 0%, #1a0f14 60%)",panel:"#2d1a24",panelBorder:"rgba(255,183,197,0.3)",accent:"#ffb7c5",text:"#fff0f3",textSecondary:"#f8bbd0",danger:"#ff5252",success:"#ff8a80"}},{id:"gold",name:"",description:"  ",price:800,currency:"gems",owned:!1,equipped:!1,colors:{background:"#0f0d08",backgroundGradient:"radial-gradient(circle at 50% 50%, #2a2210 0%, #0f0d08 70%)",panel:"#1f1a0f",panelBorder:"rgba(255,215,0,0.4)",accent:"#ffd700",text:"#fff8e1",textSecondary:"#ffe082",danger:"#ff6f00",success:"#ffc400"}}],Ex=[{id:"gems_100",amount:100,bonusAmount:0,price:1.99,label:""},{id:"gems_500",amount:500,bonusAmount:50,price:7.99,label:"",highlight:!0},{id:"gems_1200",amount:1200,bonusAmount:200,price:14.99,label:""},{id:"gems_2500",amount:2500,bonusAmount:500,price:27.99,label:""},{id:"gems_6500",amount:6500,bonusAmount:1500,price:54.99,label:" ",bestValue:!0}],Os=[{id:"coins_50",reward:{coins:50},probability:.25,color:"#888888",label:"50 "},{id:"coins_100",reward:{coins:100},probability:.2,color:"#3742fa",label:"100 "},{id:"coins_200",reward:{coins:200},probability:.15,color:"#3742fa",label:"200 "},{id:"gems_5",reward:{gems:5},probability:.12,color:"#8854d0",label:"5 "},{id:"gems_10",reward:{gems:10},probability:.1,color:"#8854d0",label:"10 "},{id:"powerup",reward:{powerUp:{type:"colorBomb",count:1}},probability:.08,color:"#2ed573",label:""},{id:"gems_25",reward:{gems:25},probability:.05,color:"#ffd700",label:"25 "},{id:"gems_50",reward:{gems:50},probability:.03,color:"#ffd700",label:"50 "},{id:"gems_100",reward:{gems:100},probability:.015,color:"#ff4757",label:"100 !"},{id:"jackpot",reward:{gems:500,coins:5e3},probability:.005,color:"#ff00ff",label:"!"}],md=[{day:1,reward:{coins:100}},{day:2,reward:{coins:150,powerUp:{type:"timeSlow",count:1}}},{day:3,reward:{coins:200}},{day:4,reward:{coins:250,gems:10}},{day:5,reward:{coins:300,powerUp:{type:"colorBomb",count:1}}},{day:6,reward:{coins:400,gems:20}},{day:7,reward:{coins:500,gems:50}}],Tx={common:"#888888",uncommon:"#2ed573",rare:"#3742fa",epic:"#8854d0",legendary:"#ffd700",mythic:"#ff00ff"},Sx={common:"",uncommon:"",rare:"",epic:"",legendary:"",mythic:""},wx=[{id:"play_3_games",type:"games_played",target:3,desc:"3 ",reward:{xp:30,coins:100}},{id:"score_10k",type:"score",target:1e4,desc:"10,000 ",reward:{xp:40,coins:150}},{id:"combo_10",type:"combo",target:10,desc:"10  ",reward:{xp:50,coins:200}},{id:"chain_5",type:"chain",target:5,desc:"5 ",reward:{xp:50,gems:10}},{id:"use_powerup",type:"powerup_used",target:3,desc:" 3 ",reward:{xp:30,coins:100}},{id:"fuse_50",type:"blocks_fused",target:50,desc:"50  ",reward:{xp:35,coins:120}},{id:"level_10",type:"level_reached",target:10,desc:" 10 ",reward:{xp:45,coins:180}},{id:"play_classic",type:"mode_played",target:1,desc:"  ",reward:{xp:25,coins:80}},{id:"watch_ad",type:"ad_watched",target:1,desc:" ",reward:{xp:20,coins:50}},{id:"perfect_clear",type:"perfect_clear",target:1,desc:" ",reward:{xp:100,gems:20}}],Ax=[{id:"play_20_games",type:"games_played",target:20,desc:"20 ",reward:{xp:200,gems:50}},{id:"total_score_100k",type:"total_score",target:1e5,desc:" 100,000 ",reward:{xp:300,gems:100}},{id:"max_combo_30",type:"max_combo",target:30,desc:" 30  ",reward:{xp:250,gems:75}},{id:"chain_10",type:"max_chain",target:10,desc:"10 ",reward:{xp:300,gems:150}},{id:"reach_level_20",type:"max_level",target:20,desc:" 20 ",reward:{xp:200,gems:80}},{id:"fuse_500",type:"blocks_fused",target:500,desc:"500  ",reward:{xp:250,gems:90}},{id:"use_all_powerups",type:"unique_powerups",target:5,desc:"5  ",reward:{xp:180,gems:60}},{id:"gravity_all",type:"gravity_directions",target:4,desc:"   ",reward:{xp:150,gems:50}}];function Cx(){return[...wx].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function Nx(){return[...Ax].sort(()=>Math.random()-.5).slice(0,3).map(t=>({id:t.id,type:t.type,target:t.target,current:0,completed:!1,reward:t.reward}))}function io(r){return Math.floor(100*Math.pow(1.15,r-1))}function ey(r){let t=1,a=0;for(;a+io(t)<=r;)a+=io(t),t++;return t}function ty(r){let t=1,a=0;for(;a+io(t)<=r;)a+=io(t),t++;const s=r-a,o=io(t);return{currentLevelXP:s,nextLevelXP:o,progress:s/o}}const Rx=[{id:"first_step",name:" ",description:"  ",condition:"games >= 1",icon:"",rarity:"common"},{id:"beginner",name:"",description:"10 ",condition:"games >= 10",icon:"",rarity:"common"},{id:"regular",name:"",description:"50 ",condition:"games >= 50",icon:"",rarity:"rare"},{id:"veteran",name:"",description:"100 ",condition:"games >= 100",icon:"",rarity:"epic"},{id:"legend",name:"",description:"500 ",condition:"games >= 500",icon:"",rarity:"legendary"},{id:"score_1k",name:"1 ",description:"1,000 ",condition:"highScore >= 1000",icon:"",rarity:"common"},{id:"score_5k",name:"5 ",description:"5,000 ",condition:"highScore >= 5000",icon:"",rarity:"rare"},{id:"score_10k",name:"",description:"10,000 ",condition:"highScore >= 10000",icon:"",rarity:"epic"},{id:"score_50k",name:" ",description:"50,000 ",condition:"highScore >= 50000",icon:"",rarity:"legendary"},{id:"score_100k",name:" ",description:"100,000 ",condition:"highScore >= 100000",icon:"",rarity:"mythic"},{id:"combo_5",name:" ",description:"5 ",condition:"maxCombo >= 5",icon:"",rarity:"common"},{id:"combo_10",name:" ",description:"10 ",condition:"maxCombo >= 10",icon:"",rarity:"rare"},{id:"combo_20",name:" ",description:"20 ",condition:"maxCombo >= 20",icon:"",rarity:"epic"},{id:"combo_50",name:" ",description:"50 ",condition:"maxCombo >= 50",icon:"",rarity:"legendary"},{id:"chain_3",name:" ",description:"3 ",condition:"maxChain >= 3",icon:"",rarity:"common"},{id:"chain_5",name:" ",description:"5 ",condition:"maxChain >= 5",icon:"",rarity:"rare"},{id:"chain_10",name:" ",description:"10 ",condition:"maxChain >= 10",icon:"",rarity:"epic"},{id:"chain_15",name:" ",description:"15 ",condition:"maxChain >= 15",icon:"",rarity:"legendary"},{id:"level_10",name:"10 ",description:" 10 ",condition:"maxLevel >= 10",icon:"",rarity:"common"},{id:"level_20",name:"20 ",description:" 20 ",condition:"maxLevel >= 20",icon:"",rarity:"rare"},{id:"level_30",name:"30 ",description:" 30 ",condition:"maxLevel >= 30",icon:"",rarity:"epic"},{id:"level_50",name:" ",description:" 50 ",condition:"maxLevel >= 50",icon:"",rarity:"legendary"},{id:"fever_master",name:" ",description:"  10 ",condition:"feverCount >= 10",icon:"",rarity:"rare"},{id:"speed_demon",name:" ",description:" 3  10,000",condition:"speedScore >= 10000",icon:"",rarity:"epic"},{id:"puzzle_solver",name:" ",description:"  20 ",condition:"puzzleLevel >= 20",icon:"",rarity:"epic"},{id:"perfectionist",name:"",description:" 10",condition:"perfectClears >= 10",icon:"",rarity:"legendary"},{id:"early_bird",name:"",description:" 6-9  ",condition:"special",icon:"",rarity:"rare"},{id:"night_owl",name:"",description:" 12-3  ",condition:"special",icon:"",rarity:"rare"},{id:"weekend_warrior",name:" ",description:" 10  ",condition:"special",icon:"",rarity:"rare"},{id:"streak_7",name:"7 ",description:"7  ",condition:"streak >= 7",icon:"",rarity:"epic"},{id:"streak_30",name:"30 ",description:"30  ",condition:"streak >= 30",icon:"",rarity:"legendary"}];function Mx(r,t,a,s){const o=Math.floor(r/100),c=t*2,h=a*5,m=s*10;return o+c+h+m}function pd(){return Array(pe.ROWS).fill(null).map(()=>Array(pe.COLUMNS).fill(null))}function bv(r){const t=Bd(r);return t[Math.floor(Math.random()*t.length)]}function xv(r,t){if(t>0&&t%20===0)return W0(r);const a=vx(r);return Math.random()<a?W0(r):"normal"}function ny(r,t){const a=[],s=[];for(let o=0;o<r;o++)a.push(bv(t)),s.push(o===0?xv(t,0):"normal");return{colors:a,specialTypes:s}}const Ix={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,specialBlocksUsed:0,levelsCompleted:0},Dx={dailyMissions:Cx(),weeklyMissions:Nx()},ay={board:pd(),currentBlock:null,currentBlocks:[],nextBlocks:[],nextSpecialTypes:[],holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"ready",gameMode:"classic",powerUps:[],activePowerUp:null,gravityDirection:"down",gameTime:0,statistics:Ix,continues:0,adWatchedThisGame:!1,missionProgress:Dx,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:[],feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,specialBlockChance:.05,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:1,movesRemaining:0,puzzleLevel:1,puzzleCompleted:!1,currentShapeOffsets:[],basePosition:{x:0,y:0}},He=gv()(yv((r,t)=>({...ay,blocksPlaced:0,startGame:(a="classic")=>{const c=a==="puzzle"?1:K0(1),{colors:h,specialTypes:m}=ny(5+c,1);let y=[];a==="challenge"?y=$0(1):a==="puzzle"&&(y=Z0(1));const _=a==="puzzle"?mu.getMovesForLevel(1):0;r({board:pd(),currentBlock:null,currentBlocks:[],nextBlocks:h,nextSpecialTypes:m,holdBlock:null,holdSpecialType:null,canHold:!0,score:0,level:1,combo:0,maxCombo:0,chainCount:0,gameStatus:"playing",gameMode:a,activePowerUp:null,gravityDirection:"down",gameTime:0,continues:0,adWatchedThisGame:!1,isPowerUpSelecting:!1,selectedGravityDirection:null,levelObjectives:y,feverGauge:0,isFeverMode:!1,comboTimer:0,dangerLevel:0,blocksPlaced:0,blocksUntilSpecial:10,garbageTimer:0,garbagePending:0,fallingBlockCount:c,movesRemaining:_,puzzleLevel:1,puzzleCompleted:!1}),setTimeout(()=>t().spawnBlock(),100)},pauseGame:()=>{t().gameStatus==="playing"&&r({gameStatus:"paused"})},resumeGame:()=>{t().gameStatus==="paused"&&r({gameStatus:"playing"})},endGame:()=>{const{score:a,statistics:s,combo:o,chainCount:c}=t();r({gameStatus:"gameover",statistics:{...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a,highScore:Math.max(s.highScore,a),maxCombo:Math.max(s.maxCombo,o),maxChain:Math.max(s.maxChain,c)}})},resetGame:()=>{r({...ay,statistics:t().statistics,powerUps:t().powerUps,missionProgress:t().missionProgress})},spawnBlock:()=>{const{nextBlocks:a,nextSpecialTypes:s,level:o,gravityDirection:c,board:h,blocksPlaced:m}=t(),y=K0(o);let _=[...a],x=[...s];for(;_.length<10;)_.push(bv(o)),x.push(xv(o,m+_.length));if(_.length<1)return;const A=fx(y).offsets,U=Math.min(...A.map(N=>N[0])),B=Math.max(...A.map(N=>N[0])),P=Math.min(...A.map(N=>N[1])),k=Math.max(...A.map(N=>N[1])),V=B-U+1,J=k-P+1;let ne,re;switch(c){case"down":ne=Math.floor((pe.COLUMNS-V)/2),re=0;break;case"up":ne=Math.floor((pe.COLUMNS-V)/2),re=pe.ROWS-1-J+1;break;case"left":ne=pe.COLUMNS-V,re=Math.floor((pe.ROWS-J)/2);break;case"right":ne=0,re=Math.floor((pe.ROWS-J)/2);break}const ce=[],oe=_[0],M=x[0]||"normal";for(let N=0;N<A.length;N++){const[D,L]=A[N],R=oe,Ue=N===0?M:"normal",We=ne+D,X=re+L;We<0||We>=pe.COLUMNS||X<0||X>=pe.ROWS||h[X][We]===null&&ce.push({id:Jc(),color:R,x:We,y:X,targetY:X,specialType:Ue})}if(ce.length===0){t().endGame();return}if(c==="down"){let N=0;for(let D=0;D<pe.COLUMNS;D++)h[0][D]!==null&&N++,h[1][D]!==null&&N++;if(N>=pe.COLUMNS){t().endGame();return}}const S=[..._.slice(1)],C=[...x.slice(1)];r({currentBlock:ce[0]||null,currentBlocks:ce,nextBlocks:S,nextSpecialTypes:C,canHold:!0,blocksPlaced:m+y,fallingBlockCount:y,currentShapeOffsets:A,basePosition:{x:ne,y:re}})},moveBlock:a=>{const{currentBlocks:s,board:o,gravityDirection:c}=t();if(s.length===0)return;const h=[],m=new Set;for(const y of s){let _=y.x,x=y.y;if(c==="down"||c==="up"?_=a==="left"?y.x-1:y.x+1:x=a==="left"?y.y-1:y.y+1,_<0||_>=pe.COLUMNS||x<0||x>=pe.ROWS||o[x][_]!==null)return;h.push({...y,x:_,y:x}),m.add(`${_},${x}`)}r({currentBlock:h[0]||null,currentBlocks:h})},rotateBlock:()=>{const{currentBlocks:a,board:s}=t();if(a.length<=1)return;const o=a[0],c=[];let h=!0;for(let m=0;m<a.length;m++){const y=a[m],_=y.x-o.x,x=y.y-o.y,T=o.x-x,A=o.y+_;if(T<0||T>=pe.COLUMNS||A<0||A>=pe.ROWS){h=!1;break}if(s[A]?.[T]!==null){h=!1;break}c.push({...y,x:T,y:A})}if(!h){const m=[[-1,0],[1,0],[-2,0],[2,0],[0,-1],[0,1]];for(const[y,_]of m){const x=[];let T=!0;for(let A=0;A<a.length;A++){const U=a[A],B=U.x-o.x,P=U.y-o.y,k=o.x-P+y,V=o.y+B+_;if(k<0||k>=pe.COLUMNS||V<0||V>=pe.ROWS||s[V]?.[k]!==null){T=!1;break}x.push({...U,x:k,y:V})}if(T&&x.length===a.length){c.length=0,c.push(...x),h=!0;break}}}if(h&&c.length===a.length){const m=c[0],y=c.map(_=>[_.x-m.x,_.y-m.y]);r({currentBlock:c[0]||null,currentBlocks:c,currentShapeOffsets:y,basePosition:{x:m.x,y:m.y}})}},softDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:h}=hd[o];let m=!1;new Set(a.map(_=>`${_.x},${_.y}`));for(const _ of a){const x=_.x+c,T=_.y+h;if(x<0||x>=pe.COLUMNS||T<0||T>=pe.ROWS){m=!0;break}if(s[T]?.[x]!==null){m=!0;break}}if(m){t().placeBlock();return}const y=a.map(_=>({..._,x:_.x+c,y:_.y+h}));r({currentBlock:y[0]||null,currentBlocks:y})},hardDrop:()=>{const{currentBlocks:a,board:s,gravityDirection:o}=t();if(a.length===0)return;const{dx:c,dy:h}=hd[o],m=new Set,y=s.map(T=>[...T]),_=[...a].sort((T,A)=>o==="down"?A.y-T.y:o==="up"?T.y-A.y:o==="right"?A.x-T.x:T.x-A.x),x=[];for(const T of _){let A=T.x,U=T.y;for(;;){const B=A+c,P=U+h;if(B<0||B>=pe.COLUMNS||P<0||P>=pe.ROWS||y[P]?.[B]!==null||m.has(`${B},${P}`))break;A=B,U=P}m.add(`${A},${U}`),x.push({...T,x:A,y:U}),y[U][A]={id:T.id||Jc(),color:T.color,x:A,y:U,specialType:T.specialType,frozenCount:T.specialType==="frozen"?2:void 0,createdAt:Date.now()}}r({currentBlock:x[0]||null,currentBlocks:x}),t().placeBlock()},doHoldBlock:()=>{const{currentBlock:a,holdBlock:s,holdSpecialType:o,canHold:c}=t();!a||!c||(s&&o!==null?r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:{color:s,x:Math.floor(pe.COLUMNS/2),y:0,targetY:0,specialType:o},canHold:!1}):(r({holdBlock:a.color,holdSpecialType:a.specialType,currentBlock:null,canHold:!1}),t().spawnBlock()))},placeBlock:()=>{const{currentBlocks:a,board:s,garbagePending:o,gameMode:c}=t();if(a.length===0)return;let h=s.map(m=>[...m]);for(const m of a){const y={id:Jc(),color:m.color,x:m.x,y:m.y,specialType:m.specialType,frozenCount:m.specialType==="frozen"?2:void 0,createdAt:Date.now()};h[m.y][m.x]=y}r({board:h,currentBlock:null,currentBlocks:[]}),c==="puzzle"&&t().decrementMoves(),o>0&&c!=="puzzle"&&setTimeout(()=>{t().addGarbageRows(t().garbagePending)},100)},setGravityDirection:a=>{r({gravityDirection:a,isPowerUpSelecting:!1,selectedGravityDirection:null})},toggleGravitySelection:a=>{r({isPowerUpSelecting:a})},cycleGravity:()=>{const{gravityDirection:a}=t(),s=["down","right","up","left"],c=(s.indexOf(a)+1)%s.length;r({gravityDirection:s[c]})},addPowerUp:(a,s=1)=>{const{powerUps:o}=t(),c=o.findIndex(h=>h.type===a);if(c>=0){const h=[...o];h[c]={...h[c],count:h[c].count+s},r({powerUps:h})}else r({powerUps:[...o,{type:a,count:s}]})},usePowerUp:a=>{const{powerUps:s}=t(),o=s.findIndex(h=>h.type===a&&h.count>0);if(o<0)return;const c=[...s];c[o]={...c[o],count:c[o].count-1},c[o].count<=0&&c.splice(o,1),r({powerUps:c})},activatePowerUp:a=>{r({activePowerUp:a})},deactivatePowerUp:()=>{r({activePowerUp:null})},updateBoard:a=>{r({board:a})},addScore:a=>{const{score:s,activePowerUp:o,isFeverMode:c}=t();let h=o?.type==="scoreMultiplier"?2:1;c&&(h*=3),r({score:s+a*h}),t().checkLevelUp()},incrementCombo:()=>{const{combo:a,maxCombo:s}=t(),o=a+1;r({combo:o,maxCombo:Math.max(s,o),comboTimer:3}),t().addFeverGauge(Vs.GAUGE_PER_COMBO*o)},resetCombo:()=>{r({combo:0,comboTimer:0})},incrementChain:()=>{const{chainCount:a}=t(),s=a+1;r({chainCount:s}),t().addFeverGauge(Vs.GAUGE_PER_CHAIN*s)},resetChain:()=>{r({chainCount:0})},checkLevelUp:()=>{const{score:a,level:s,gameMode:o}=t(),c=yx(s);if(a>=c){const h=s+1,m=o==="challenge"?$0(h):t().levelObjectives;r({level:h,levelObjectives:m})}},addFeverGauge:a=>{const{feverGauge:s,isFeverMode:o}=t();if(o)return;const c=Math.min(Vs.MAX_GAUGE,s+a);r({feverGauge:c}),c>=Vs.MAX_GAUGE&&t().activateFeverMode()},activateFeverMode:()=>{r({isFeverMode:!0,feverGauge:Vs.MAX_GAUGE})},deactivateFeverMode:()=>{r({isFeverMode:!1,feverGauge:0})},updateLevelObjective:(a,s)=>{const{levelObjectives:o}=t(),c=o.map(h=>{if(h.type===a&&!h.completed){const m=h.current+s;return{...h,current:m,completed:m>=h.target}}return h});r({levelObjectives:c}),c.length>0&&c.every(h=>h.completed)&&r({gameStatus:"levelComplete"})},setDangerLevel:a=>{r({dangerLevel:a})},decrementBlocksUntilSpecial:()=>{const{blocksUntilSpecial:a}=t();a>0?r({blocksUntilSpecial:a-1}):r({blocksUntilSpecial:10+Math.floor(Math.random()*5)})},addGarbageRows:a=>{const s=o=>{if(o<=0){r({garbagePending:0});return}const{board:c,level:h}=t(),m=Bd(h),y=Array(pe.ROWS).fill(null).map(()=>Array(pe.COLUMNS).fill(null));for(let A=1;A<pe.ROWS;A++)for(let U=0;U<pe.COLUMNS;U++){const B=c[A][U];B&&(y[A-1][U]={...B,y:A-1})}const _=Math.floor(Math.random()*pe.COLUMNS),x=pe.ROWS-1;for(let A=0;A<pe.COLUMNS;A++)A===_?y[x][A]=null:y[x][A]={id:Jc(),color:m[Math.floor(Math.random()*m.length)],x:A,y:x,specialType:Math.random()<.1?"stone":"normal",createdAt:Date.now()};r({board:y});let T=!1;for(let A=0;A<pe.COLUMNS;A++)if(y[0][A]!==null){T=!0;break}if(T){t().endGame();return}o>1?setTimeout(()=>s(o-1),300):r({garbagePending:0})};s(a)},incrementGarbageTimer:()=>{const{garbageTimer:a,level:s,garbagePending:o}=t();if(s<Ls.GARBAGE_START_LEVEL)return;const c=hx(s),h=a+1;if(h>=c){const m=Math.min(Ls.GARBAGE_ROWS_PER_INTERVAL+Math.floor(s/5),Ls.GARBAGE_MAX_ROWS);r({garbageTimer:0,garbagePending:o+m})}else r({garbageTimer:h})},updateStatistics:a=>{const{statistics:s}=t();r({statistics:{...s,...a}})},updateMissionProgress:(a,s)=>{const{missionProgress:o}=t(),c=o.dailyMissions.map(m=>{if(m.type===a&&!m.completed){const y=m.current+s;return{...m,current:y,completed:y>=m.target}}return m}),h=o.weeklyMissions.map(m=>{if(m.type===a&&!m.completed){const y=m.current+s;return{...m,current:y,completed:y>=m.target}}return m});r({missionProgress:{dailyMissions:c,weeklyMissions:h}})},incrementGameTime:()=>{const{gameTime:a,comboTimer:s,feverGauge:o,isFeverMode:c}=t();if(s>0){const h=s-1;h<=0?t().resetCombo():r({comboTimer:h})}!c&&o>0&&r({feverGauge:Math.max(0,o-Vs.DECAY_RATE)}),t().incrementGarbageTimer(),r({gameTime:a+1})},continueGame:()=>{const{continues:a,board:s}=t(),o=s.map((c,h)=>h<4?Array(pe.COLUMNS).fill(null):c);r({board:o,gameStatus:"playing",continues:a+1}),t().spawnBlock()},decrementMoves:()=>{const{movesRemaining:a,gameMode:s}=t();if(s!=="puzzle")return;const o=a-1;r({movesRemaining:o}),o<=0&&t().checkPuzzleComplete()},nextPuzzleLevel:()=>{const{puzzleLevel:a}=t(),s=a+1,o=mu.getMovesForLevel(s),c=Z0(s),{colors:h,specialTypes:m}=ny(6,1);r({board:pd(),currentBlock:null,currentBlocks:[],nextBlocks:h,nextSpecialTypes:m,score:0,puzzleLevel:s,movesRemaining:o,levelObjectives:c,puzzleCompleted:!1,gameStatus:"playing",combo:0,chainCount:0}),setTimeout(()=>t().spawnBlock(),100)},checkPuzzleComplete:()=>{const{levelObjectives:a,gameMode:s,movesRemaining:o}=t();if(s!=="puzzle")return;a.every(h=>h.completed)?r({puzzleCompleted:!0,gameStatus:"levelComplete"}):o<=0&&t().endGame()}}),{name:"chromafall-game-storage",partialize:r=>({statistics:r.statistics,powerUps:r.powerUps,missionProgress:r.missionProgress})})),Ox={soundEnabled:!0,musicEnabled:!0,soundVolume:.7,musicVolume:.5,hapticEnabled:!0,showGhostBlock:!0,controlType:"both",colorBlindMode:!1,language:"ko",performanceMode:"auto"},Vx={coins:1e3,gems:50,lives:5,maxLives:5,lifeRegenTime:0},jx={freeSpinsRemaining:1,adSpinsRemaining:3,lastFreeSpinTime:0,spinHistory:[],pityCounter:0},kx={currentStreak:0,longestStreak:0,lastPlayDate:"",todayPlayed:!1},Lx={adsEnabled:!0,iapEnabled:!0,removeAds:!1,vipActive:!1,firstPurchaseBonus:!0},Bx={totalGamesPlayed:0,totalScore:0,highScore:0,maxCombo:0,maxChain:0,maxLevel:1,totalBlocksCleared:0,totalFusions:0,totalPlayTime:0,perfectClears:0,feverCount:0,puzzleLevel:1,speedScore:0},Yn=gv()(yv((r,t)=>({playerId:`player_${Date.now()}`,playerName:"",playerLevel:1,playerXP:0,totalXP:0,avatarId:"default",playerStats:Bx,unlockedTitles:["first_step"],equippedTitleId:"",settings:Ox,currency:Vx,achievements:xx(),ownedSkins:dd.filter(a=>a.owned),ownedThemes:pu.filter(a=>a.owned),equippedSkinId:"classic",equippedThemeId:"dark",dailyRewards:md.map((a,s)=>({...a,claimed:!1})),lastDailyRewardClaim:"",dailyRewardDay:0,streakInfo:kx,wheelState:jx,monetizationConfig:Lx,purchaseHistory:[],personalBestScores:[],battlePassLevel:1,battlePassXP:0,battlePassPremium:!1,setPlayerName:a=>r({playerName:a}),addXP:a=>{const{totalXP:s}=t(),o=s+a,c=ey(o),h=ty(o);r({totalXP:o,playerLevel:c,playerXP:h.currentLevelXP})},processGameResult:a=>{const{playerStats:s,totalXP:o}=t(),c=Mx(a.score,a.combo,a.chain,a.level),h={...s,totalGamesPlayed:s.totalGamesPlayed+1,totalScore:s.totalScore+a.score,highScore:Math.max(s.highScore,a.score),maxCombo:Math.max(s.maxCombo,a.combo),maxChain:Math.max(s.maxChain,a.chain),maxLevel:Math.max(s.maxLevel,a.level)};a.mode==="timeAttack"?h.speedScore=Math.max(h.speedScore,a.score):a.mode==="puzzle"&&(h.puzzleLevel=Math.max(h.puzzleLevel,a.level));const m=o+c,y=ey(m),_=ty(m),x=Math.floor(a.score/50),{currency:T}=t();return r({playerStats:h,totalXP:m,playerLevel:y,playerXP:_.currentLevelXP,currency:{...T,coins:T.coins+x}}),t().checkAndUnlockTitles(),c},checkAndUnlockTitles:()=>{const{playerStats:a,unlockedTitles:s,streakInfo:o}=t(),c=[];return Rx.forEach(h=>{if(s.includes(h.id))return;let m=!1;const y=h.condition;if(y.includes("games >=")){const _=parseInt(y.split(">=")[1]);m=a.totalGamesPlayed>=_}else if(y.includes("highScore >=")){const _=parseInt(y.split(">=")[1]);m=a.highScore>=_}else if(y.includes("maxCombo >=")){const _=parseInt(y.split(">=")[1]);m=a.maxCombo>=_}else if(y.includes("maxChain >=")){const _=parseInt(y.split(">=")[1]);m=a.maxChain>=_}else if(y.includes("maxLevel >=")){const _=parseInt(y.split(">=")[1]);m=a.maxLevel>=_}else if(y.includes("feverCount >=")){const _=parseInt(y.split(">=")[1]);m=a.feverCount>=_}else if(y.includes("speedScore >=")){const _=parseInt(y.split(">=")[1]);m=a.speedScore>=_}else if(y.includes("puzzleLevel >=")){const _=parseInt(y.split(">=")[1]);m=a.puzzleLevel>=_}else if(y.includes("perfectClears >=")){const _=parseInt(y.split(">=")[1]);m=a.perfectClears>=_}else if(y.includes("streak >=")){const _=parseInt(y.split(">=")[1]);m=o.currentStreak>=_}m&&c.push(h.id)}),c.length>0&&r({unlockedTitles:[...s,...c]}),c},equipTitle:a=>{const{unlockedTitles:s}=t();(s.includes(a)||a==="")&&r({equippedTitleId:a})},updatePlayerStats:a=>{const{playerStats:s}=t();r({playerStats:{...s,...a}})},updateSettings:a=>{const{settings:s}=t();r({settings:{...s,...a}})},addCoins:a=>{const{currency:s}=t();r({currency:{...s,coins:s.coins+a}})},spendCoins:a=>{const{currency:s}=t();return s.coins>=a?(r({currency:{...s,coins:s.coins-a}}),!0):!1},addGems:a=>{const{currency:s}=t();r({currency:{...s,gems:s.gems+a}})},spendGems:a=>{const{currency:s}=t();return s.gems>=a?(r({currency:{...s,gems:s.gems-a}}),!0):!1},addLife:a=>{const{currency:s}=t(),o=Math.min(s.lives+a,s.maxLives);r({currency:{...s,lives:o}})},useLife:()=>{const{currency:a}=t();return a.lives>0?(r({currency:{...a,lives:a.lives-1}}),!0):!1},updateAchievement:(a,s)=>{const{achievements:o}=t(),c=o.map(h=>{if(h.id===a){const m=Math.max(h.current,s);return{...h,current:m,completed:m>=h.target}}return h});r({achievements:c})},claimAchievement:a=>{const{achievements:s}=t(),o=s.find(c=>c.id===a);if(o&&o.completed&&!o.claimed){o.reward.coins&&t().addCoins(o.reward.coins),o.reward.gems&&t().addGems(o.reward.gems);const c=s.map(h=>h.id===a?{...h,claimed:!0}:h);r({achievements:c})}},purchaseSkin:a=>{const s=dd.find(h=>h.id===a);if(!s)return!1;const{currency:o,ownedSkins:c}=t();return c.some(h=>h.id===a)?!1:s.currency==="free"?(r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedSkins:[...c,{...s,owned:!0}]}),!0):!1},purchaseTheme:a=>{const s=pu.find(h=>h.id===a);if(!s)return!1;const{currency:o,ownedThemes:c}=t();return c.some(h=>h.id===a)?!1:s.currency==="free"?(r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="coins"&&o.coins>=s.price?(t().spendCoins(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):s.currency==="gems"&&o.gems>=s.price?(t().spendGems(s.price),r({ownedThemes:[...c,{...s,owned:!0}]}),!0):!1},equipSkin:a=>{const{ownedSkins:s}=t();s.some(o=>o.id===a)&&r({equippedSkinId:a})},equipTheme:a=>{const{ownedThemes:s}=t();s.some(o=>o.id===a)&&r({equippedThemeId:a})},claimDailyReward:()=>{const{dailyRewardDay:a,dailyRewards:s,lastDailyRewardClaim:o}=t(),c=new Date().toDateString();if(o===c)return null;const h=a%7+1,m=md[h-1];return m.reward.coins&&t().addCoins(m.reward.coins),m.reward.gems&&t().addGems(m.reward.gems),r({dailyRewardDay:h,lastDailyRewardClaim:c}),m.reward},checkDailyRewardAvailable:()=>{const{lastDailyRewardClaim:a}=t(),s=new Date().toDateString();return a!==s},updateStreak:()=>{const{streakInfo:a}=t(),s=new Date().toDateString();if(a.lastPlayDate===s)return;const o=new Date(Date.now()-864e5).toDateString();let c=a.currentStreak;a.lastPlayDate===o?c+=1:a.lastPlayDate!==s&&(c=1),r({streakInfo:{currentStreak:c,longestStreak:Math.max(a.longestStreak,c),lastPlayDate:s,todayPlayed:!0}})},spinWheel:()=>{const{wheelState:a}=t(),{freeSpinsRemaining:s,adSpinsRemaining:o}=a;if(s<=0&&o<=0)return null;const c=["coins_50","coins_100","gems_5","gems_10","powerup"],h=c[Math.floor(Math.random()*c.length)];return r({wheelState:{...a,freeSpinsRemaining:s>0?s-1:s,adSpinsRemaining:s<=0?o-1:o,spinHistory:[...a.spinHistory,h],pityCounter:a.pityCounter+1}}),h},canSpinWheel:()=>{const{wheelState:a,currency:s}=t();return{free:a.freeSpinsRemaining>0,ad:a.adSpinsRemaining>0,gem:s.gems>=20}},addBattlePassXP:a=>{const{battlePassXP:s,battlePassLevel:o}=t(),c=100,h=s+a,m=Math.floor(h/c);r({battlePassXP:h%c,battlePassLevel:Math.min(o+m,50)})},purchaseBattlePassPremium:()=>{const{currency:a}=t();return a.gems>=499?(t().spendGems(499),r({battlePassPremium:!0}),!0):!1},addPersonalBest:(a,s)=>{const{personalBestScores:o}=t(),c=o.findIndex(h=>h.mode===a);if(c>=0){if(s>o[c].score){const h=[...o];h[c]={mode:a,score:s,date:new Date().toISOString()},r({personalBestScores:h})}}else r({personalBestScores:[...o,{mode:a,score:s,date:new Date().toISOString()}]})}}),{name:"chromafall-user-storage"}));function Ux(r,t,a,s){const o=[],c=new Set,h=[[t,a]];for(;h.length>0;){const[m,y]=h.shift(),_=`${m},${y}`;if(c.has(_)||m<0||m>=pe.COLUMNS||y<0||y>=pe.ROWS)continue;const x=r[y][m];x&&(x.color!==s&&x.color!=="rainbow"&&s!=="rainbow"||(c.add(_),o.push(x),h.push([m-1,y]),h.push([m+1,y]),h.push([m,y-1]),h.push([m,y+1])))}return o}function zx(r,t){const a=[],s=new Set,o=ax();for(let c=0;c<pe.ROWS;c++)for(let h=0;h<pe.COLUMNS;h++){const m=r[c][h];if(!m)continue;const y=`${h},${c}`;if(s.has(y))continue;const _=Ux(r,h,c,m.color);_.length>=o&&(a.push(_),_.forEach(x=>s.add(`${x.x},${x.y}`)))}return a}function Px(r,t){const a=Array(pe.ROWS).fill(null).map(()=>Array(pe.COLUMNS).fill(null));if(t==="down")for(let s=0;s<pe.COLUMNS;s++){let o=pe.ROWS-1;for(let c=pe.ROWS-1;c>=0;c--)r[c][s]&&(a[o][s]={...r[c][s],y:o},o--)}else if(t==="up")for(let s=0;s<pe.COLUMNS;s++){let o=0;for(let c=0;c<pe.ROWS;c++)r[c][s]&&(a[o][s]={...r[c][s],y:o},o++)}else if(t==="left")for(let s=0;s<pe.ROWS;s++){let o=0;for(let c=0;c<pe.COLUMNS;c++)r[s][c]&&(a[s][o]={...r[s][c],x:o},o++)}else if(t==="right")for(let s=0;s<pe.ROWS;s++){let o=pe.COLUMNS-1;for(let c=pe.COLUMNS-1;c>=0;c--)r[s][c]&&(a[s][o]={...r[s][c],x:o},o--)}return a}function Gx(r){for(let t=0;t<pe.ROWS;t++)for(let a=0;a<pe.COLUMNS;a++)if(r[t][a])return!1;return!0}function qx(r,t,a){const s=r.map(m=>[...m]),o=[],c=[],h=new Set;for(const m of t){if(m.specialType==="normal")continue;const y=`${m.x},${m.y}`;if(h.has(y))continue;h.add(y);const _=[];switch(m.specialType){case"bomb":{for(let x=-1;x<=fd.BOMB_RADIUS;x++)for(let T=-1;T<=fd.BOMB_RADIUS;T++){const A=m.x+T,U=m.y+x;if(A>=0&&A<pe.COLUMNS&&U>=0&&U<pe.ROWS){const B=s[U][A];B&&!t.includes(B)&&(B.specialType==="frozen"&&(B.frozenCount||2)>1?s[U][A]={...B,frozenCount:(B.frozenCount||2)-1}:(B.specialType,o.push(B),s[U][A]=null),_.push({x:A,y:U}))}}break}case"lightning":{for(let x=0;x<pe.ROWS;x++)for(let T=0;T<pe.COLUMNS;T++){const A=s[x][T];A&&A.color===m.color&&!t.includes(A)&&(A.specialType==="frozen"&&(A.frozenCount||2)>1?s[x][T]={...A,frozenCount:(A.frozenCount||2)-1}:A.specialType!=="stone"&&(o.push(A),s[x][T]=null),_.push({x:T,y:x}))}break}case"cross":{for(let x=0;x<pe.COLUMNS;x++){const T=s[m.y][x];T&&!t.includes(T)&&(T.specialType==="frozen"&&(T.frozenCount||2)>1?s[m.y][x]={...T,frozenCount:(T.frozenCount||2)-1}:T.specialType!=="stone"&&(o.push(T),s[m.y][x]=null),_.push({x,y:m.y}))}for(let x=0;x<pe.ROWS;x++){const T=s[x][m.x];T&&!t.includes(T)&&(T.specialType==="frozen"&&(T.frozenCount||2)>1?s[x][m.x]={...T,frozenCount:(T.frozenCount||2)-1}:T.specialType!=="stone"&&(o.push(T),s[x][m.x]=null),_.push({x:m.x,y:x}))}break}case"colorShift":{for(let x=-1;x<=1;x++)for(let T=-1;T<=1;T++){if(T===0&&x===0)continue;const A=m.x+T,U=m.y+x;if(A>=0&&A<pe.COLUMNS&&U>=0&&U<pe.ROWS){const B=s[U][A];B&&B.specialType!=="stone"&&B.specialType!=="frozen"&&(s[U][A]={...B,color:m.color},_.push({x:A,y:U}))}}break}case"shuffle":{const x=Bd(a);for(let T=-1;T<=1;T++)for(let A=-1;A<=1;A++){if(A===0&&T===0)continue;const U=m.x+A,B=m.y+T;if(U>=0&&U<pe.COLUMNS&&B>=0&&B<pe.ROWS){const P=s[B][U];if(P&&P.specialType!=="stone"&&P.specialType!=="frozen"){const k=x[Math.floor(Math.random()*x.length)];s[B][U]={...P,color:k},_.push({x:U,y:B})}}}break}}_.length>0&&c.push({type:m.specialType,x:m.x,y:m.y,affectedBlocks:_})}return{additionalCleared:o,newBoard:s,effects:c}}function Hx(r,t){const a=r.map(c=>[...c]),s=[],o=new Set(t.map(c=>`${c.x},${c.y}`));for(let c=0;c<pe.ROWS;c++)for(let h=0;h<pe.COLUMNS;h++){const m=a[c][h];m?.specialType==="stone"&&[`${h-1},${c}`,`${h+1},${c}`,`${h},${c-1}`,`${h},${c+1}`].some(x=>o.has(x))&&(s.push(m),a[c][h]=null)}return{destroyedStones:s,newBoard:a}}function Fx(r,t){const a=t.map(o=>[...o]),s=[];for(const o of r)if(o.specialType==="frozen"){const c=o.frozenCount||2;c>1?a[o.y][o.x]={...o,frozenCount:c-1}:s.push(o)}else s.push(o);return{blocksToRemove:s,updatedBoard:a}}function Qx(){const{board:r,currentBlock:t,currentBlocks:a,gameStatus:s,level:o,combo:c,chainCount:h,gravityDirection:m,activePowerUp:y,updateBoard:_,addScore:x,incrementCombo:T,resetCombo:A,incrementChain:U,resetChain:B,spawnBlock:P,softDrop:k,updateStatistics:V,updateMissionProgress:J,updateLevelObjective:ne,checkPuzzleComplete:re,gameMode:ce,statistics:oe}=He(),{updateAchievement:M,addBattlePassXP:S}=Yn(),[C,N]=se.useState(!1),[D,L]=se.useState([]),[R,Ue]=se.useState(0),[We,X]=se.useState([]),le=se.useRef(null),xe=se.useRef(null),Le=se.useRef(0),G=se.useRef(!1),O=se.useRef(!1),ae=y?.type==="timeSlow"?J0(o)*2:J0(o),ue=se.useCallback(async ve=>{const he=zx(ve);if(he.length===0)return{result:null,newBoard:ve};let de=0,me=0;const De=[],Ne=[];let Be=!1,Oe=ve.map(it=>[...it]);const Ae=he.flat(),{blocksToRemove:nt,updatedBoard:St}=Fx(Ae,Oe);Oe=St;for(const it of nt)De.push({x:it.x,y:it.y,color:it.color}),Oe[it.y][it.x]=null,de++,it.specialType!=="normal"&&(me++,it.specialType==="multiplier"&&(Be=!0));L(De);const vt=qx(Oe,nt,o);Oe=vt.newBoard,de+=vt.additionalCleared.length,Ne.push(...vt.effects);for(const it of vt.additionalCleared)De.push({x:it.x,y:it.y,color:it.color}),it.specialType!=="normal"&&me++;const Mt=Hx(Oe,[...nt,...vt.additionalCleared]);Oe=Mt.newBoard,de+=Mt.destroyedStones.length;for(const it of Mt.destroyedStones)De.push({x:it.x,y:it.y,color:it.color}),me++;Ne.length>0&&X(Ne);const at=Gx(Oe),$e=(y?.type==="scoreMultiplier"?2:1)*(Be?2:1),fn=He.getState().chainCount,as=He.getState().combo,ci=He.getState().isFeverMode,It=_x({blocksCleared:de,chainCount:fn+1,comboCount:as,level:o,powerUpMultiplier:$e,perfectClear:at,isFeverMode:ci,specialBlocksCleared:me}),Dn=He.getState().addFeverGauge;Dn&&Dn(de*3+(fn+1)*10),await new Promise(it=>setTimeout(it,qi.FUSION_ANIMATION_DURATION)),Ne.length>0&&await new Promise(it=>setTimeout(it,qi.SPECIAL_EFFECT_DURATION));const ca=Px(Oe,m);return L([]),X([]),{result:{clearedBlocks:[...nt,...vt.additionalCleared,...Mt.destroyedStones],score:It,chainCount:fn+1,isChainReaction:fn>0,specialEffects:Ne},newBoard:ca}},[o,m,y]),ye=se.useCallback(async()=>{if(G.current)return;G.current=!0,N(!0);let ve=0,he=0,de=0,me=He.getState().board;for(B();;){const{result:Ne,newBoard:Be}=await ue(me);if(!Ne)break;me=Be,_(me),de++,ve+=Ne.score,he+=Ne.clearedBlocks.length,U(),Ue(de),await new Promise(Oe=>setTimeout(Oe,qi.CHAIN_DELAY))}if(ve>0){if(x(ve),T(),V({totalBlocksCleared:oe.totalBlocksCleared+he,totalFusions:oe.totalFusions+1,maxChain:Math.max(oe.maxChain,de)}),J("blocks_fused",he),de>=5&&J("chain",1),He.getState().gameMode==="puzzle"){const Be=He.getState();if(ne("score",ve),ne("clearBlocks",he),de>0){const Oe=Be.levelObjectives.find(Ae=>Ae.type==="chains");Oe&&de>Oe.current&&ne("chains",de-Oe.current)}setTimeout(()=>{He.getState().checkPuzzleComplete()},100)}M("chain_5",de),M("chain_10",de),M("chain_15",de),M("chain_20",de),S(Math.floor(ve/100)),xe.current&&clearTimeout(xe.current),xe.current=window.setTimeout(()=>{A()},qi.COMBO_TIMEOUT)}Ue(0),N(!1),G.current=!1,He.getState().gameStatus==="playing"&&setTimeout(()=>{P()},50)},[ue,x,T,A,U,B,P,_,oe,V,J,ne,M,S]);se.useEffect(()=>{a.length>0?O.current=!0:O.current&&s==="playing"&&!G.current&&(O.current=!1,ye())},[a,s,ye]),se.useEffect(()=>{if(s!=="playing"||C){le.current&&(clearInterval(le.current),le.current=null);return}Le.current=Date.now();const ve=()=>{const he=Date.now(),de=He.getState();de.currentBlocks.length>0&&!G.current&&he-Le.current>=ae&&(de.softDrop(),Le.current=he)};return le.current=window.setInterval(ve,50),()=>{le.current&&(clearInterval(le.current),le.current=null)}},[s,ae,C]),se.useEffect(()=>()=>{le.current&&clearInterval(le.current),xe.current&&clearTimeout(xe.current)},[]);const Te=se.useCallback(()=>{if(a.length===0)return null;const{dx:ve,dy:he}=hd[m];let de=1/0;for(const De of a){let Ne=0,Be=De.x,Oe=De.y;for(;;){const Ae=Be+ve,nt=Oe+he;if(Ae<0||Ae>=pe.COLUMNS||nt<0||nt>=pe.ROWS||r[nt]?.[Ae]!==null)break;Ne++,Be=Ae,Oe=nt}de=Math.min(de,Ne)}const me=a[0];return{x:me.x+ve*de,y:me.y+he*de}},[a,r,m]);return{isProcessingFusion:C,fusionEffects:D,chainEffects:R,specialEffects:We,getGhostPosition:Te,dropSpeed:ae}}function Xx(r){const{gameStatus:t,moveBlock:a,softDrop:s,hardDrop:o,doHoldBlock:c,pauseGame:h,isPowerUpSelecting:m,setGravityDirection:y}=He(),{settings:_}=Yn(),x=se.useRef({startX:0,startY:0,startTime:0,lastTapTime:0,isDragging:!1}),T=se.useRef(null),A=se.useCallback(k=>{!_.hapticEnabled||!navigator.vibrate||navigator.vibrate(gx[k])},[_.hapticEnabled]),U=se.useCallback(k=>{if(t!=="playing")return;const V=k.touches[0],J=Date.now();x.current={startX:V.clientX,startY:V.clientY,startTime:J,lastTapTime:x.current.lastTapTime,isDragging:!1},T.current=window.setTimeout(()=>{A("medium"),c(),x.current.isDragging=!0},Gi.LONG_PRESS_DURATION)},[t,c,A]),B=se.useCallback(k=>{if(t!=="playing")return;const V=k.touches[0],{startX:J,startY:ne,isDragging:re}=x.current,ce=V.clientX-J,oe=V.clientY-ne,M=Math.abs(ce),S=Math.abs(oe);if((M>10||S>10)&&T.current&&(clearTimeout(T.current),T.current=null),M>=Gi.SWIPE_THRESHOLD||S>=Gi.SWIPE_THRESHOLD){if(x.current.isDragging=!0,m){M>S?y(ce>0?"right":"left"):y(oe>0?"down":"up"),x.current.startX=V.clientX,x.current.startY=V.clientY;return}M>S&&M>=Gi.SWIPE_THRESHOLD&&(ce>0?a("right"):a("left"),A("light"),x.current.startX=V.clientX),S>M&&S>=Gi.SWIPE_THRESHOLD&&(oe>0&&(s(),A("light")),x.current.startY=V.clientY)}},[t,m,a,s,y,A]),P=se.useCallback(k=>{if(t!=="playing")return;T.current&&(clearTimeout(T.current),T.current=null);const{startX:V,startY:J,startTime:ne,lastTapTime:re,isDragging:ce}=x.current,oe=Date.now(),M=oe-ne;if(!ce&&M<Gi.LONG_PRESS_DURATION){const S=k.changedTouches[0],C=Math.abs(S.clientX-V),N=Math.abs(S.clientY-J);C<10&&N<10&&(oe-re<Gi.DOUBLE_TAP_DELAY?(A("medium"),o()):A("selection"),x.current.lastTapTime=oe)}if(ce){const C=k.changedTouches[0].clientY-J,N=C/M*1e3;C>0&&N>Gi.FAST_SWIPE_VELOCITY&&(A("heavy"),o())}x.current.isDragging=!1},[t,o,A]);return se.useEffect(()=>{const k=r.current;if(k)return k.addEventListener("touchstart",U,{passive:!0}),k.addEventListener("touchmove",B,{passive:!0}),k.addEventListener("touchend",P,{passive:!0}),()=>{k.removeEventListener("touchstart",U),k.removeEventListener("touchmove",B),k.removeEventListener("touchend",P),T.current&&clearTimeout(T.current)}},[r,U,B,P]),{triggerHaptic:A}}class Yx{audioContext=null;masterGain=null;musicGain=null;sfxGain=null;currentOscillators=[];constructor(){this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.musicGain=this.audioContext.createGain(),this.sfxGain=this.audioContext.createGain(),this.musicGain.connect(this.masterGain),this.sfxGain.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination)}catch{console.warn("Web Audio API not supported")}}resume(){this.audioContext?.state==="suspended"&&this.audioContext.resume()}setMusicVolume(t){this.musicGain&&(this.musicGain.gain.value=t)}setSfxVolume(t){this.sfxGain&&(this.sfxGain.gain.value=t)}playTone(t,a,s="sine",o=.3){if(!this.audioContext||!this.sfxGain)return;const c=this.audioContext.createOscillator(),h=this.audioContext.createGain();c.type=s,c.frequency.value=t,h.gain.setValueAtTime(o,this.audioContext.currentTime),h.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+a),c.connect(h),h.connect(this.sfxGain),c.start(),c.stop(this.audioContext.currentTime+a)}playSoundEffect(t){if(this.audioContext)switch(t){case"blockLand":this.playTone(200,.1,"triangle",.2);break;case"blockMove":this.playTone(400,.03,"sine",.1);break;case"blockRotate":this.playTone(600,.05,"sine",.15),setTimeout(()=>this.playTone(800,.05,"sine",.12),30);break;case"hardDrop":this.playTone(150,.08,"triangle",.25),setTimeout(()=>this.playTone(100,.1,"triangle",.2),50);break;case"fusion":this.playTone(440,.15,"sine",.3),setTimeout(()=>this.playTone(554,.15,"sine",.3),50),setTimeout(()=>this.playTone(659,.2,"sine",.3),100);break;case"chain":const a=330;for(let h=0;h<4;h++)setTimeout(()=>{this.playTone(a*Math.pow(1.2,h),.1,"sine",.25)},h*80);break;case"combo":this.playTone(523,.08,"square",.2),setTimeout(()=>this.playTone(659,.08,"square",.2),60);break;case"levelUp":[523,659,784,1047].forEach((h,m)=>{setTimeout(()=>this.playTone(h,.2,"sine",.3),m*100)});break;case"powerUpGet":this.playTone(880,.1,"sine",.3),setTimeout(()=>this.playTone(1100,.15,"sine",.3),80);break;case"powerUpUse":this.playTone(440,.1,"sawtooth",.2),setTimeout(()=>this.playTone(880,.2,"sawtooth",.3),100);break;case"gameOver":[440,415,392,370].forEach((h,m)=>{setTimeout(()=>this.playTone(h,.3,"sine",.25),m*200)});break;case"highScore":[523,659,784,880,1047].forEach((h,m)=>{setTimeout(()=>this.playTone(h,.2,"sine",.3),m*120)});break;case"achievement":this.playTone(659,.15,"sine",.3),setTimeout(()=>this.playTone(784,.15,"sine",.3),100),setTimeout(()=>this.playTone(1047,.25,"sine",.35),200);break;case"buttonClick":this.playTone(800,.05,"sine",.15);break;case"rewardGet":this.playTone(698,.1,"sine",.25),setTimeout(()=>this.playTone(880,.15,"sine",.3),80);break;case"purchaseSuccess":this.playTone(523,.1,"sine",.3),setTimeout(()=>this.playTone(659,.1,"sine",.3),100),setTimeout(()=>this.playTone(784,.2,"sine",.35),200);break;case"wheelSpin":this.playTone(300,.05,"triangle",.2);break;case"jackpot":for(let h=0;h<8;h++)setTimeout(()=>{this.playTone(440+h*100,.15,"sine",.3)},h*100);break}}startBGM(t=1){if(!this.audioContext||!this.musicGain)return;this.stopBGM();const s=60/(120+t*2),o=[261.63,293.66,329.63,392,440,523.25,587.33,659.25],h=setInterval(()=>{if(!this.audioContext||!this.musicGain)return;const m=this.audioContext.createOscillator(),y=this.audioContext.createGain();m.type="sine",m.frequency.value=o[0]/2,y.gain.setValueAtTime(.15,this.audioContext.currentTime),y.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s*.8),m.connect(y),y.connect(this.musicGain),m.start(),m.stop(this.audioContext.currentTime+s);const _=this.audioContext.createOscillator(),x=this.audioContext.createGain();_.type="triangle",_.frequency.value=o[Math.floor(Math.random()*o.length)],x.gain.setValueAtTime(.08,this.audioContext.currentTime),x.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s*.5),_.connect(x),x.connect(this.musicGain),_.start(),_.stop(this.audioContext.currentTime+s*.5),this.currentOscillators.push(m,_)},s*1e3);this.bgmInterval=h}stopBGM(){this.bgmInterval&&clearInterval(this.bgmInterval),this.currentOscillators.forEach(t=>{try{t.stop()}catch{}}),this.currentOscillators=[]}cleanup(){this.stopBGM(),this.audioContext&&this.audioContext.close()}}let Jh=null;function Kx(){return Jh||(Jh=new Yx),Jh}function oa(){const{settings:r}=Yn(),t=se.useRef(null);se.useEffect(()=>{t.current=Kx(),t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0);const c=()=>{t.current?.resume(),window.removeEventListener("click",c),window.removeEventListener("touchstart",c)};return window.addEventListener("click",c),window.addEventListener("touchstart",c),()=>{window.removeEventListener("click",c),window.removeEventListener("touchstart",c)}},[]),se.useEffect(()=>{t.current&&(t.current.setMusicVolume(r.musicEnabled?r.musicVolume:0),t.current.setSfxVolume(r.soundEnabled?r.soundVolume:0))},[r.soundEnabled,r.musicEnabled,r.soundVolume,r.musicVolume]);const a=se.useCallback(c=>{r.soundEnabled&&t.current&&t.current.playSoundEffect(c)},[r.soundEnabled]),s=se.useCallback((c=1)=>{r.musicEnabled&&t.current&&t.current.startBGM(c)},[r.musicEnabled]),o=se.useCallback(()=>{t.current?.stopBGM()},[]);return{playSound:a,startBGM:s,stopBGM:o}}const $x={red:0,blue:1,green:2,yellow:3,purple:4,orange:3,cyan:1,pink:0,rainbow:0},ru=se.memo(function({color:t,size:a,isGhost:s=!1,isFusing:o=!1,isMatched:c=!1,specialType:h="normal",frozenCount:m=0}){const{settings:y,equippedSkinId:_}=Yn(),x=se.useMemo(()=>fo[_]||fo.classic,[_]),T=$x[t]??0,A=x.colors[T]||x.colors[0],U=y.colorBlindMode?tx:Ld,B=y.colorBlindMode?U[t]:A,P=y.colorBlindMode?nx[t]:null,k=t==="rainbow",V=h!=="normal",J=vv[h],ne=h==="frozen",re=h==="stone";if(s)return g.jsx("div",{className:"absolute rounded-md box-border transition-all duration-75",style:{width:a-2,height:a-2,borderColor:B,borderWidth:"2px",borderStyle:"dashed",backgroundColor:`${B}15`,boxShadow:`0 0 10px ${B}40`}});if(re)return g.jsxs(ie.div,{className:"absolute rounded-md overflow-hidden",style:{width:a-2,height:a-2,background:"linear-gradient(145deg, #6c757d, #495057)",border:"2px solid #343a40"},initial:!1,animate:{scale:o?[1,1.1,0]:1},transition:{scale:{duration:.3}},children:[g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"}}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-lg",children:""})]});const ce=()=>{if(k)return"linear-gradient(135deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff)";if(ne)return`linear-gradient(145deg, ${B}90, ${B}60)`;switch(x.innerEffect){case"glow":return`radial-gradient(circle at 30% 30%, ${B}dd, ${B}88 70%, ${B}44)`;case"glass":return`linear-gradient(145deg, ${B}ee, ${B}aa 50%, ${B}cc)`;case"gradient":return`linear-gradient(135deg, ${B}, ${B}88, ${B}cc)`;case"flat":return B;case"metallic":return`linear-gradient(145deg, ${B}ff, ${B}66 30%, ${B}cc 70%, ${B}ff)`;case"matte":return`linear-gradient(180deg, ${B}ee, ${B}bb)`;default:return B}},oe=()=>{if(x.glowIntensity<=0)return"none";const N=Math.round(x.glowIntensity*20);return`0 0 ${N}px ${B}, 0 0 ${N*2}px ${B}66`},M=()=>{switch(x.texture){case"lines":return"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.1) 2px, rgba(255,255,255,0.1) 4px)";case"dots":return"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.2) 1px, transparent 1px)";case"circuit":return"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.3) 50%, transparent 52%)";case"cracks":return"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.2) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.15) 61%, transparent 62%)";case"noise":return`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`;default:return"none"}},S=()=>{const N={scale:o?[1,1.2,0]:c?[1,1.1,1]:1,filter:o?"brightness(1.5)":"brightness(1)",rotate:k?360:0};switch(x.animation){case"pulse":return{...N,boxShadow:[`0 0 5px ${B}`,`0 0 20px ${B}`,`0 0 5px ${B}`]};case"shimmer":return N;case"fire":return{...N,y:[0,-2,0,-1,0]};case"ice":return{...N,opacity:[1,.9,1]};case"electric":return{...N,x:[-1,1,-1,0]};default:return N}},C=()=>{const N={scale:{duration:o?.3:.2},rotate:{duration:3,repeat:1/0,ease:"linear"}};switch(x.animation){case"pulse":return{...N,boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}};case"fire":return{...N,y:{duration:.3,repeat:1/0,ease:"easeInOut"}};case"ice":return{...N,opacity:{duration:2,repeat:1/0,ease:"easeInOut"}};case"electric":return{...N,x:{duration:.1,repeat:1/0}};default:return N}};return g.jsxs(ie.div,{className:"absolute overflow-hidden block-3d",style:{width:a-2,height:a-2,borderRadius:x.borderRadius,background:ce(),opacity:o?.8:1,zIndex:o?10:1,border:ne?"2px solid #a5d8ff":V?`2px solid ${J?.color||B}`:x.borderWidth>0?`${x.borderWidth}px ${x.borderStyle} ${B}88`:"none",boxShadow:V&&!ne?`0 0 8px ${J?.color||B}60`:oe()},initial:!1,animate:S(),transition:C(),children:[x.innerEffect==="glossy"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-transparent to-black/10 pointer-events-none"}),x.innerEffect==="glass"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent pointer-events-none"}),x.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30 pointer-events-none"}),g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius,border:x.innerEffect==="flat"?"none":"1px solid rgba(255,255,255,0.2)"}}),x.texture!=="none"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-50",style:{backgroundImage:M(),backgroundSize:x.texture==="dots"?"8px 8px":"100% 100%",borderRadius:x.borderRadius}}),x.animation==="shimmer"&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(110deg, transparent 20%, rgba(255,255,255,0.4) 50%, transparent 80%)",borderRadius:x.borderRadius},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}}),x.animation==="fire"&&g.jsx(ie.div,{className:"absolute -inset-1 pointer-events-none",style:{background:`radial-gradient(ellipse at bottom, ${B}88 0%, transparent 70%)`,filter:"blur(2px)",borderRadius:x.borderRadius},animate:{opacity:[.5,.8,.5],scale:[1,1.1,1]},transition:{duration:.5,repeat:1/0}}),x.animation==="ice"&&g.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(200,230,255,0.2) 100%)",borderRadius:x.borderRadius}}),x.animation==="electric"&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none",style:{borderRadius:x.borderRadius},animate:{boxShadow:[`inset 0 0 5px ${B}`,`inset 0 0 15px ${B}, 0 0 10px ${B}`,`inset 0 0 5px ${B}`]},transition:{duration:.2,repeat:1/0}}),ne&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-200/50 to-blue-300/30"}),g.jsx(ie.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.4) 50%, transparent 60%)",backgroundSize:"200% 200%"},animate:{backgroundPosition:["0% 0%","200% 200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),m>0&&g.jsx("div",{className:"absolute bottom-0 right-0 bg-cyan-600 text-white text-xs font-bold px-1 rounded-tl",children:m})]}),V&&!ne&&J?.icon&&g.jsx(ie.div,{className:"absolute inset-0 flex items-center justify-center text-base drop-shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:J.icon}),o&&g.jsx(ie.div,{className:"absolute inset-0 rounded-md",style:{boxShadow:`0 0 20px 5px ${B}`}}),P&&g.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{background:Zx(P)}}),V&&!ne&&g.jsx(ie.div,{className:"absolute inset-0 rounded-md pointer-events-none",animate:{boxShadow:[`0 0 5px ${J?.color||B}40`,`0 0 15px ${J?.color||B}60`,`0 0 5px ${J?.color||B}40`]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})});function Zx(r){switch(r){case"striped":return"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.3) 5px, rgba(0,0,0,0.3) 10px)";case"dotted":return"radial-gradient(circle, rgba(0,0,0,0.3) 2px, transparent 2.5px) 0 0 / 8px 8px";case"crosshatch":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(0,0,0,0.2) 4px, rgba(0,0,0,0.2) 5px)";case"diagonal":return"repeating-linear-gradient(135deg, transparent, transparent 3px, rgba(255,255,255,0.5) 3px, rgba(255,255,255,0.5) 5px)";case"grid":return"repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px), repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 5px)";case"waves":return"repeating-linear-gradient(45deg, transparent 0px, transparent 5px, rgba(255,255,255,0.3) 5px, rgba(255,255,255,0.3) 10px)";case"circles":return"radial-gradient(circle at 50% 50%, transparent 3px, rgba(255,255,255,0.3) 3px, rgba(255,255,255,0.3) 5px, transparent 5px)";default:return"none"}}function Jx({cellSize:r}){const t=se.useRef(null),{triggerHaptic:a}=Xx(t),{playSound:s,startBGM:o,stopBGM:c}=oa(),{board:h,currentBlock:m,currentBlocks:y,gameStatus:_,level:x,gravityDirection:T,isPowerUpSelecting:A,garbagePending:U,garbageTimer:B}=He(),{settings:P}=Yn(),{fusionEffects:k,chainEffects:V,specialEffects:J,getGhostPosition:ne}=Qx(),re=se.useMemo(()=>{if(r)return r;if(typeof window<"u"){const S=window.innerWidth<768,C=Math.min(window.innerWidth-32,450),N=window.innerHeight-200,D=Math.floor(C/pe.COLUMNS),L=Math.floor(N/pe.ROWS);return Math.min(D,L,S?38:45)}return 40},[r]),ce=re*pe.COLUMNS,oe=re*pe.ROWS,M=se.useMemo(()=>P.showGhostBlock&&m?ne():null,[m,P.showGhostBlock,ne]);return se.useEffect(()=>{_==="playing"?o(x):c()},[_,x,o,c]),se.useEffect(()=>{k.length>0&&(s("fusion"),a("medium"))},[k,s,a]),se.useEffect(()=>{V>1&&(s("chain"),a("heavy"))},[V,s,a]),g.jsx("div",{className:"relative p-1 rounded-xl bg-gradient-to-b from-gray-800 to-gray-900 shadow-2xl border border-white/10",children:g.jsxs("div",{ref:t,className:"relative overflow-hidden rounded-lg bg-[#0a0a15] select-none touch-none",style:{width:ce,height:oe},children:[g.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:g.jsxs("svg",{width:"100%",height:"100%",children:[g.jsx("defs",{children:g.jsx("pattern",{id:"grid",width:re,height:re,patternUnits:"userSpaceOnUse",children:g.jsx("path",{d:`M ${re} 0 L 0 0 0 ${re}`,fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"})})}),g.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),T==="down"&&g.jsx("div",{className:"absolute top-0 left-0 right-0 pointer-events-none transition-opacity duration-500",style:{height:re*3,background:"linear-gradient(to bottom, rgba(255, 50, 50, 0.15) 0%, transparent 100%)",borderBottom:"1px dashed rgba(255, 50, 50, 0.3)"}}),M&&m&&M.y!==m.y&&g.jsx("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:M.x*re+1,top:M.y*re+1,zIndex:0},children:g.jsx(ru,{color:m.color,size:re,isGhost:!0})}),g.jsx(un,{children:h.map((S,C)=>S.map((N,D)=>{if(!N)return null;const L=k.some(R=>R.x===D&&R.y===C);return g.jsx(ie.div,{className:"absolute",style:{left:D*re+1,top:C*re+1,zIndex:10},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:g.jsx(ru,{color:N.color,size:re,isFusing:L,specialType:N.specialType,frozenCount:N.frozenCount})},N.id)}))}),g.jsx(un,{children:y.map((S,C)=>g.jsx(ie.div,{className:"absolute pointer-events-none",style:{left:S.x*re+1,top:S.y*re+1,zIndex:20},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.05},children:g.jsx(ru,{color:S.color,size:re,specialType:S.specialType})},S.id||`falling-${C}`))}),U>0&&g.jsx(ie.div,{className:"absolute bottom-0 left-0 right-0 flex justify-center items-center gap-1 py-1 bg-red-600/80 backdrop-blur-sm z-25",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:g.jsxs("span",{className:"text-white text-xs font-bold",children:[" GARBAGE INCOMING: ",U," ROW",U>1?"S":""]})}),g.jsx("div",{className:"absolute inset-0 pointer-events-none z-30",children:g.jsxs(un,{children:[k.map((S,C)=>g.jsx(ie.div,{className:"absolute rounded-full blur-md",style:{left:S.x*re,top:S.y*re,width:re,height:re,backgroundColor:Ld[S.color]||"#fff"},initial:{scale:.5,opacity:.8},animate:{scale:2.5,opacity:0},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"}},`fusion-${C}`)),V>1&&g.jsx(ie.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:.5,opacity:0,y:20},animate:{scale:1.2,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:g.jsxs("div",{className:"text-center",children:[g.jsxs("h2",{className:"text-5xl font-black italic text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-orange-500 drop-shadow-[0_0_15px_rgba(255,165,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:[V," CHAIN!"]}),g.jsx("p",{className:"text-white font-bold text-lg drop-shadow-md",children:"COMBO BOOSTER"})]})}),J.map((S,C)=>g.jsxs(ie.div,{className:"absolute pointer-events-none",style:{left:S.x*re,top:S.y*re,width:re,height:re},initial:{scale:1,opacity:1},animate:{scale:2.5,opacity:0},transition:{duration:.5},children:[S.type==="bomb"&&g.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-orange-500 to-red-600 blur-md"}),S.type==="lightning"&&g.jsx("div",{className:"w-full h-full bg-yellow-400 blur-lg animate-pulse"}),S.type==="cross"&&g.jsxs("div",{className:"w-full h-full",children:[g.jsx("div",{className:"absolute inset-x-0 top-1/2 h-2 -translate-y-1/2 bg-green-400 blur-sm"}),g.jsx("div",{className:"absolute inset-y-0 left-1/2 w-2 -translate-x-1/2 bg-green-400 blur-sm"})]})]},`special-${C}`))]})}),g.jsx(un,{children:A&&g.jsx(ie.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-white font-bold text-xl mb-6 neon-text",children:"  "}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsx("div",{}),g.jsx("button",{onClick:()=>He.getState().setGravityDirection("up"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("div",{}),g.jsx("button",{onClick:()=>He.getState().setGravityDirection("left"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>He.getState().setGravityDirection("down"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""}),g.jsx("button",{onClick:()=>He.getState().setGravityDirection("right"),className:"w-14 h-14 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-2xl border border-white/20 active:scale-95 transition-all",children:""})]})]})})}),_==="paused"&&g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] z-30 flex items-center justify-center",children:g.jsx("h2",{className:"text-3xl font-bold text-white tracking-widest",style:{fontFamily:"var(--font-display)"},children:"PAUSED"})})]})})}function iy({cellSize:r=24,maxBlocks:t=px}){const{nextBlocks:a,nextSpecialTypes:s}=He(),o=a.slice(0,t),c=s?.slice(0,t)||[];return g.jsxs("div",{className:"glass-panel rounded-xl p-3 flex flex-col items-center min-w-[60px]",children:[g.jsx("h3",{className:"text-[10px] font-bold text-gray-400 mb-3 tracking-widest text-center",children:"NEXT"}),g.jsx("div",{className:"flex flex-col gap-3 items-center",children:o.map((h,m)=>g.jsxs(ie.div,{className:"relative",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:m*.1},style:{transform:`scale(${m===0?1:.8})`,opacity:m===0?1:.6,filter:m===0?"none":"grayscale(30%)"},children:[g.jsx(ru,{color:h,size:r,specialType:c[m]||"normal"}),m===0&&g.jsx("div",{className:"absolute -inset-2 rounded-full border border-white/20 animate-pulse pointer-events-none"})]},`next-${m}`))})]})}function Wx({visible:r=!0}){const{playSound:t}=oa(),a=se.useRef(null);se.useEffect(()=>{const m=new Set;let y=null,_=null,x=null;const T=()=>{y&&clearInterval(y),x&&clearTimeout(x),y=null,x=null,_=null},A=P=>{if(m.has(P.code)){P.preventDefault();return}m.add(P.code);const k=He.getState();if(P.code==="Escape"||P.code==="KeyP"){k.gameStatus==="playing"?k.pauseGame():k.gameStatus==="paused"&&k.resumeGame();return}if(k.gameStatus==="playing"){if(k.isPowerUpSelecting){P.code==="ArrowUp"?k.setGravityDirection("up"):P.code==="ArrowDown"?k.setGravityDirection("down"):P.code==="ArrowLeft"?k.setGravityDirection("left"):P.code==="ArrowRight"&&k.setGravityDirection("right");return}if(P.code==="ArrowLeft"||P.code==="KeyA"){P.preventDefault(),T(),k.moveBlock("left"),_="left",x=window.setTimeout(()=>{_==="left"&&(y=window.setInterval(()=>He.getState().moveBlock("left"),50))},250);return}if(P.code==="ArrowRight"||P.code==="KeyD"){P.preventDefault(),T(),k.moveBlock("right"),_="right",x=window.setTimeout(()=>{_==="right"&&(y=window.setInterval(()=>{He.getState().moveBlock("right")},50))},250);return}if(P.code==="ArrowDown"||P.code==="KeyS"){P.preventDefault(),k.softDrop();return}if(P.code==="ArrowUp"||P.code==="KeyW"){P.preventDefault(),k.rotateBlock();return}if(P.code==="Space"){P.preventDefault(),k.hardDrop();return}}},U=P=>{m.delete(P.code),(P.code==="ArrowLeft"||P.code==="KeyA")&&_==="left"&&T(),(P.code==="ArrowRight"||P.code==="KeyD")&&_==="right"&&T()},B=()=>{m.clear(),T()};return window.addEventListener("keydown",A),window.addEventListener("keyup",U),window.addEventListener("blur",B),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",U),window.removeEventListener("blur",B),T()}},[]);const s=se.useCallback((m,y="buttonClick")=>{t(y),m()},[t]),o=se.useCallback(m=>{t("blockMove"),(()=>{He.getState().moveBlock(m)})(),a.current&&clearInterval(a.current),a.current=window.setInterval(()=>{t("blockMove"),He.getState().moveBlock(m)},80)},[t]),c=se.useCallback(()=>{a.current&&(clearInterval(a.current),a.current=null)},[]),h=He(m=>m.currentBlocks);return r?g.jsx("div",{className:"w-full px-3 pb-4 pt-2 select-none touch-none",children:g.jsxs("div",{className:"flex justify-between items-center gap-3 max-w-md mx-auto",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Wh,{icon:"",onStart:()=>o("left"),onEnd:c}),g.jsx(Wh,{icon:"",onStart:()=>s(()=>He.getState().softDrop(),"blockMove")}),g.jsx(Wh,{icon:"",onStart:()=>o("right"),onEnd:c})]}),g.jsxs(ie.button,{className:`w-14 h-14 rounded-2xl flex flex-col items-center justify-center
                     text-white font-bold shadow-lg border-b-4
                     active:border-b-0 active:translate-y-1 transition-all
                     ${h.length>1?"bg-gradient-to-br from-purple-500 to-indigo-600 border-purple-700":"bg-slate-700 border-slate-600 opacity-50"}`,whileTap:{scale:.9},onTouchStart:m=>{m.preventDefault(),s(()=>He.getState().rotateBlock(),"blockRotate")},onMouseDown:()=>s(()=>He.getState().rotateBlock(),"blockRotate"),children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-[8px] opacity-80",children:""})]}),g.jsxs(ie.button,{className:`w-20 h-14 rounded-2xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500\r
                     flex items-center justify-center gap-1 text-white font-bold\r
                     shadow-lg shadow-orange-500/30 border-b-4 border-orange-700\r
                     active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.95},onTouchStart:m=>{m.preventDefault(),s(()=>He.getState().hardDrop(),"hardDrop")},onMouseDown:()=>s(()=>He.getState().hardDrop(),"hardDrop"),children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:"text-sm",children:"DROP"})]})]})}):null}function Wh({icon:r,onStart:t,onEnd:a}){return g.jsx(ie.button,{className:`w-14 h-14 rounded-2xl bg-slate-700/90 backdrop-blur\r
                 flex items-center justify-center text-white text-2xl font-bold\r
                 shadow-lg border-b-4 border-slate-600\r
                 active:border-b-0 active:translate-y-1 transition-all`,whileTap:{scale:.9},onTouchStart:s=>{s.preventDefault(),t()},onTouchEnd:s=>{s.preventDefault(),a?.()},onMouseDown:t,onMouseUp:a,onMouseLeave:a,children:r})}function eE(){const{powerUps:r,gameStatus:t,usePowerUp:a,toggleGravitySelection:s,activatePowerUp:o}=He(),{playSound:c}=oa(),h=m=>{if(t!=="playing")return;const y=r.find(_=>_.type===m);if(!(!y||y.count<=0)){if(c("powerUpUse"),m==="gravityShift"){s(!0),a(m);return}a(m),(m==="timeSlow"||m==="scoreMultiplier"||m==="freeze")&&(o({type:m,count:1,isActive:!0,remainingTime:m==="scoreMultiplier"?30:5}),setTimeout(()=>{He.getState().deactivatePowerUp()},m==="scoreMultiplier"?3e4:5e3))}};return r.length===0?null:g.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:g.jsx(un,{children:r.map(m=>{const y=dx[m.type];return g.jsxs(ie.button,{className:`relative flex flex-col items-center gap-1 p-2 bg-game-panel/80 rounded-lg\r
                         hover:bg-game-accent/30 active:scale-95 transition-all border border-white/10\r
                         disabled:opacity-50 disabled:cursor-not-allowed`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:()=>h(m.type),disabled:t!=="playing"||m.count<=0,title:`${y.name}: ${y.description}`,children:[g.jsx("span",{className:"text-2xl",children:y.icon}),g.jsx("span",{className:"text-xs text-gray-400",children:y.name}),g.jsx("span",{className:`absolute -top-1 -right-1 w-5 h-5 bg-game-accent rounded-full\r
                             text-xs font-bold flex items-center justify-center text-white`,children:m.count})]},m.type)})})})}function tE(){const{score:r,level:t,combo:a,chainCount:s,gravityDirection:o,gameTime:c,activePowerUp:h,statistics:m,feverGauge:y,isFeverMode:_,gameMode:x,movesRemaining:T,puzzleLevel:A,levelObjectives:U}=He(),B=x==="puzzle",P=V=>{const J=Math.floor(V/60),ne=V%60;return`${J}:${ne.toString().padStart(2,"0")}`},k=r>m.highScore&&r>0;return g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsxs("div",{className:"glass-panel p-4 rounded-xl text-center relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 tracking-wider mb-1",children:"SCORE"}),g.jsx(ie.p,{initial:{scale:1.1},animate:{scale:1},className:`text-2xl font-mono font-bold ${k?"text-yellow-400 neon-text":"text-white"}`,children:r.toLocaleString()},r),k&&g.jsx("span",{className:"absolute top-2 right-2 text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded font-bold animate-pulse",children:"NEW"})]}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:B?g.jsxs(g.Fragment,{children:[g.jsx(Wc,{label:"PUZZLE",value:`Lv.${A}`,color:"text-purple-400"}),g.jsx(Wc,{label:"MOVES",value:T,color:T<=5?"text-red-400":"text-yellow-400"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Wc,{label:"LEVEL",value:t,color:"text-cyan-400"}),g.jsx(Wc,{label:"TIME",value:P(c),color:"text-gray-300",font:"font-mono"})]})}),B&&U.length>0&&g.jsxs("div",{className:"glass-panel p-3 rounded-xl",children:[g.jsx("p",{className:"text-xs font-bold text-purple-300 mb-2",children:" OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:U.map((V,J)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${V.completed?"bg-green-500":"bg-gray-600"}`,children:V.completed?"":""}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center text-xs",children:[g.jsxs("span",{className:"text-gray-300",children:[V.type==="score"&&"",V.type==="clearBlocks"&&" ",V.type==="chains"&&"",V.type==="clearColor"&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"w-3 h-3 rounded",style:{background:Ld[V.color]}})," "]})]}),g.jsxs("span",{className:V.completed?"text-green-400":"text-white",children:[V.current,"/",V.target]})]}),g.jsx("div",{className:"w-full bg-gray-700 h-1 rounded-full mt-1 overflow-hidden",children:g.jsx("div",{className:`h-full ${V.completed?"bg-green-500":"bg-purple-500"}`,style:{width:`${Math.min(100,V.current/V.target*100)}%`}})})]})]},J))})]}),g.jsx(un,{children:(a>1||s>0)&&g.jsxs(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex gap-2",children:[a>1&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-orange-900/20 border-orange-500/30",children:[g.jsx("span",{className:"text-[10px] text-orange-300",children:"COMBO"}),g.jsxs("span",{className:"text-lg font-bold text-orange-400",children:["x",a]})]}),s>0&&g.jsxs("div",{className:"flex-1 glass-panel p-2 rounded-lg flex flex-col items-center justify-center bg-purple-900/20 border-purple-500/30",children:[g.jsx("span",{className:"text-[10px] text-purple-300",children:"CHAIN"}),g.jsx("span",{className:"text-lg font-bold text-purple-400",children:s})]})]})}),g.jsxs("div",{className:`glass-panel p-3 rounded-xl ${_?"border-2 border-orange-500 bg-orange-900/30":""}`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:`text-xs font-bold ${_?"text-orange-300":"text-gray-400"}`,children:_?" FEVER MODE!":"FEVER GAUGE"}),g.jsxs("span",{className:`text-xs font-mono ${_?"text-orange-400":"text-gray-500"}`,children:[Math.floor(y||0),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-700/50 h-3 rounded-full overflow-hidden",children:g.jsx(ie.div,{className:`h-full ${_?"bg-gradient-to-r from-orange-500 via-red-500 to-yellow-500":"bg-gradient-to-r from-orange-600 to-yellow-500"}`,initial:!1,animate:{width:`${Math.min(y||0,Vs.MAX_GAUGE)}%`},transition:{duration:.3},style:{boxShadow:_?"0 0 10px #ff6b00":"none"}})}),_&&g.jsx(ie.p,{className:"text-center text-xs text-orange-300 mt-1 font-bold",animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},children:"x3 SCORE MULTIPLIER!"})]}),g.jsxs("div",{className:"glass-panel p-3 rounded-xl flex items-center justify-between",children:[g.jsx("span",{className:"text-xs text-gray-400",children:"GRAVITY"}),g.jsx(ie.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},className:"text-xl bg-white/10 w-8 h-8 rounded flex items-center justify-center",children:mx[o]},o)]}),g.jsx(un,{children:h&&g.jsxs(ie.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"glass-panel p-3 rounded-xl border-l-4 border-blue-500 bg-blue-900/20",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-xs font-bold text-blue-300",children:"ACTIVE EFFECT"}),h.remainingTime&&g.jsxs("span",{className:"text-xs font-mono text-white",children:[h.remainingTime,"s"]})]}),g.jsxs("div",{className:"text-sm text-white font-medium flex items-center gap-2",children:[h.type==="timeSlow"&&" Time Slow",h.type==="scoreMultiplier"&&" x2 Score",h.type==="freeze"&&" Frozen"]}),h.remainingTime&&g.jsx("div",{className:"w-full bg-gray-700 h-1 mt-2 rounded-full overflow-hidden",children:g.jsx(ie.div,{className:"h-full bg-blue-400",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:h.remainingTime,ease:"linear"}})})]})})]})}function Wc({label:r,value:t,color:a,font:s=""}){return g.jsxs("div",{className:"glass-panel p-2 rounded-lg text-center flex flex-col justify-center min-h-[60px]",children:[g.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-0.5",children:r}),g.jsx("p",{className:`text-lg font-bold ${a} ${s}`,children:t})]})}var Ud={};(function r(t,a,s,o){var c=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=(function(){if(!t.OffscreenCanvas)return!1;try{var G=new OffscreenCanvas(1,1),O=G.getContext("2d");O.fillRect(0,0,1,1);var ae=G.transferToImageBitmap();O.createPattern(ae,"no-repeat")}catch{return!1}return!0})();function y(){}function _(G){var O=a.exports.Promise,ae=O!==void 0?O:t.Promise;return typeof ae=="function"?new ae(G):(G(y,y),null)}var x=(function(G,O){return{transform:function(ae){if(G)return ae;if(O.has(ae))return O.get(ae);var ue=new OffscreenCanvas(ae.width,ae.height),ye=ue.getContext("2d");return ye.drawImage(ae,0,0),O.set(ae,ue),ue},clear:function(){O.clear()}}})(m,new Map),T=(function(){var G=Math.floor(16.666666666666668),O,ae,ue={},ye=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(O=function(Te){var ve=Math.random();return ue[ve]=requestAnimationFrame(function he(de){ye===de||ye+G-1<de?(ye=de,delete ue[ve],Te()):ue[ve]=requestAnimationFrame(he)}),ve},ae=function(Te){ue[Te]&&cancelAnimationFrame(ue[Te])}):(O=function(Te){return setTimeout(Te,G)},ae=function(Te){return clearTimeout(Te)}),{frame:O,cancel:ae}})(),A=(function(){var G,O,ae={};function ue(ye){function Te(ve,he){ye.postMessage({options:ve||{},callback:he})}ye.init=function(he){var de=he.transferControlToOffscreen();ye.postMessage({canvas:de},[de])},ye.fire=function(he,de,me){if(O)return Te(he,null),O;var De=Math.random().toString(36).slice(2);return O=_(function(Ne){function Be(Oe){Oe.data.callback===De&&(delete ae[De],ye.removeEventListener("message",Be),O=null,x.clear(),me(),Ne())}ye.addEventListener("message",Be),Te(he,De),ae[De]=Be.bind(null,{data:{callback:De}})}),O},ye.reset=function(){ye.postMessage({reset:!0});for(var he in ae)ae[he](),delete ae[he]}}return function(){if(G)return G;if(!s&&c){var ye=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{G=new Worker(URL.createObjectURL(new Blob([ye])))}catch(Te){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Te),null}ue(G)}return G}})(),U={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function B(G,O){return O?O(G):G}function P(G){return G!=null}function k(G,O,ae){return B(G&&P(G[O])?G[O]:U[O],ae)}function V(G){return G<0?0:Math.floor(G)}function J(G,O){return Math.floor(Math.random()*(O-G))+G}function ne(G){return parseInt(G,16)}function re(G){return G.map(ce)}function ce(G){var O=String(G).replace(/[^0-9a-f]/gi,"");return O.length<6&&(O=O[0]+O[0]+O[1]+O[1]+O[2]+O[2]),{r:ne(O.substring(0,2)),g:ne(O.substring(2,4)),b:ne(O.substring(4,6))}}function oe(G){var O=k(G,"origin",Object);return O.x=k(O,"x",Number),O.y=k(O,"y",Number),O}function M(G){G.width=document.documentElement.clientWidth,G.height=document.documentElement.clientHeight}function S(G){var O=G.getBoundingClientRect();G.width=O.width,G.height=O.height}function C(G){var O=document.createElement("canvas");return O.style.position="fixed",O.style.top="0px",O.style.left="0px",O.style.pointerEvents="none",O.style.zIndex=G,O}function N(G,O,ae,ue,ye,Te,ve,he,de){G.save(),G.translate(O,ae),G.rotate(Te),G.scale(ue,ye),G.arc(0,0,1,ve,he,de),G.restore()}function D(G){var O=G.angle*(Math.PI/180),ae=G.spread*(Math.PI/180);return{x:G.x,y:G.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:G.startVelocity*.5+Math.random()*G.startVelocity,angle2D:-O+(.5*ae-Math.random()*ae),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:G.color,shape:G.shape,tick:0,totalTicks:G.ticks,decay:G.decay,drift:G.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:G.gravity*3,ovalScalar:.6,scalar:G.scalar,flat:G.flat}}function L(G,O){O.x+=Math.cos(O.angle2D)*O.velocity+O.drift,O.y+=Math.sin(O.angle2D)*O.velocity+O.gravity,O.velocity*=O.decay,O.flat?(O.wobble=0,O.wobbleX=O.x+10*O.scalar,O.wobbleY=O.y+10*O.scalar,O.tiltSin=0,O.tiltCos=0,O.random=1):(O.wobble+=O.wobbleSpeed,O.wobbleX=O.x+10*O.scalar*Math.cos(O.wobble),O.wobbleY=O.y+10*O.scalar*Math.sin(O.wobble),O.tiltAngle+=.1,O.tiltSin=Math.sin(O.tiltAngle),O.tiltCos=Math.cos(O.tiltAngle),O.random=Math.random()+2);var ae=O.tick++/O.totalTicks,ue=O.x+O.random*O.tiltCos,ye=O.y+O.random*O.tiltSin,Te=O.wobbleX+O.random*O.tiltCos,ve=O.wobbleY+O.random*O.tiltSin;if(G.fillStyle="rgba("+O.color.r+", "+O.color.g+", "+O.color.b+", "+(1-ae)+")",G.beginPath(),h&&O.shape.type==="path"&&typeof O.shape.path=="string"&&Array.isArray(O.shape.matrix))G.fill(le(O.shape.path,O.shape.matrix,O.x,O.y,Math.abs(Te-ue)*.1,Math.abs(ve-ye)*.1,Math.PI/10*O.wobble));else if(O.shape.type==="bitmap"){var he=Math.PI/10*O.wobble,de=Math.abs(Te-ue)*.1,me=Math.abs(ve-ye)*.1,De=O.shape.bitmap.width*O.scalar,Ne=O.shape.bitmap.height*O.scalar,Be=new DOMMatrix([Math.cos(he)*de,Math.sin(he)*de,-Math.sin(he)*me,Math.cos(he)*me,O.x,O.y]);Be.multiplySelf(new DOMMatrix(O.shape.matrix));var Oe=G.createPattern(x.transform(O.shape.bitmap),"no-repeat");Oe.setTransform(Be),G.globalAlpha=1-ae,G.fillStyle=Oe,G.fillRect(O.x-De/2,O.y-Ne/2,De,Ne),G.globalAlpha=1}else if(O.shape==="circle")G.ellipse?G.ellipse(O.x,O.y,Math.abs(Te-ue)*O.ovalScalar,Math.abs(ve-ye)*O.ovalScalar,Math.PI/10*O.wobble,0,2*Math.PI):N(G,O.x,O.y,Math.abs(Te-ue)*O.ovalScalar,Math.abs(ve-ye)*O.ovalScalar,Math.PI/10*O.wobble,0,2*Math.PI);else if(O.shape==="star")for(var Ae=Math.PI/2*3,nt=4*O.scalar,St=8*O.scalar,vt=O.x,Mt=O.y,at=5,$e=Math.PI/at;at--;)vt=O.x+Math.cos(Ae)*St,Mt=O.y+Math.sin(Ae)*St,G.lineTo(vt,Mt),Ae+=$e,vt=O.x+Math.cos(Ae)*nt,Mt=O.y+Math.sin(Ae)*nt,G.lineTo(vt,Mt),Ae+=$e;else G.moveTo(Math.floor(O.x),Math.floor(O.y)),G.lineTo(Math.floor(O.wobbleX),Math.floor(ye)),G.lineTo(Math.floor(Te),Math.floor(ve)),G.lineTo(Math.floor(ue),Math.floor(O.wobbleY));return G.closePath(),G.fill(),O.tick<O.totalTicks}function R(G,O,ae,ue,ye){var Te=O.slice(),ve=G.getContext("2d"),he,de,me=_(function(De){function Ne(){he=de=null,ve.clearRect(0,0,ue.width,ue.height),x.clear(),ye(),De()}function Be(){s&&!(ue.width===o.width&&ue.height===o.height)&&(ue.width=G.width=o.width,ue.height=G.height=o.height),!ue.width&&!ue.height&&(ae(G),ue.width=G.width,ue.height=G.height),ve.clearRect(0,0,ue.width,ue.height),Te=Te.filter(function(Oe){return L(ve,Oe)}),Te.length?he=T.frame(Be):Ne()}he=T.frame(Be),de=Ne});return{addFettis:function(De){return Te=Te.concat(De),me},canvas:G,promise:me,reset:function(){he&&T.cancel(he),de&&de()}}}function Ue(G,O){var ae=!G,ue=!!k(O||{},"resize"),ye=!1,Te=k(O,"disableForReducedMotion",Boolean),ve=c&&!!k(O||{},"useWorker"),he=ve?A():null,de=ae?M:S,me=G&&he?!!G.__confetti_initialized:!1,De=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ne;function Be(Ae,nt,St){for(var vt=k(Ae,"particleCount",V),Mt=k(Ae,"angle",Number),at=k(Ae,"spread",Number),$e=k(Ae,"startVelocity",Number),fn=k(Ae,"decay",Number),as=k(Ae,"gravity",Number),ci=k(Ae,"drift",Number),It=k(Ae,"colors",re),Dn=k(Ae,"ticks",Number),ca=k(Ae,"shapes"),it=k(Ae,"scalar"),ua=!!k(Ae,"flat"),Hs=oe(Ae),is=vt,ui=[],Fs=G.width*Hs.x,En=G.height*Hs.y;is--;)ui.push(D({x:Fs,y:En,angle:Mt,spread:at,startVelocity:$e,color:It[is%It.length],shape:ca[J(0,ca.length)],ticks:Dn,decay:fn,gravity:as,drift:ci,scalar:it,flat:ua}));return Ne?Ne.addFettis(ui):(Ne=R(G,ui,de,nt,St),Ne.promise)}function Oe(Ae){var nt=Te||k(Ae,"disableForReducedMotion",Boolean),St=k(Ae,"zIndex",Number);if(nt&&De)return _(function($e){$e()});ae&&Ne?G=Ne.canvas:ae&&!G&&(G=C(St),document.body.appendChild(G)),ue&&!me&&de(G);var vt={width:G.width,height:G.height};he&&!me&&he.init(G),me=!0,he&&(G.__confetti_initialized=!0);function Mt(){if(he){var $e={getBoundingClientRect:function(){if(!ae)return G.getBoundingClientRect()}};de($e),he.postMessage({resize:{width:$e.width,height:$e.height}});return}vt.width=vt.height=null}function at(){Ne=null,ue&&(ye=!1,t.removeEventListener("resize",Mt)),ae&&G&&(document.body.contains(G)&&document.body.removeChild(G),G=null,me=!1)}return ue&&!ye&&(ye=!0,t.addEventListener("resize",Mt,!1)),he?he.fire(Ae,vt,at):Be(Ae,vt,at)}return Oe.reset=function(){he&&he.reset(),Ne&&Ne.reset()},Oe}var We;function X(){return We||(We=Ue(null,{useWorker:!0,resize:!0})),We}function le(G,O,ae,ue,ye,Te,ve){var he=new Path2D(G),de=new Path2D;de.addPath(he,new DOMMatrix(O));var me=new Path2D;return me.addPath(de,new DOMMatrix([Math.cos(ve)*ye,Math.sin(ve)*ye,-Math.sin(ve)*Te,Math.cos(ve)*Te,ae,ue])),me}function xe(G){if(!h)throw new Error("path confetti are not supported in this browser");var O,ae;typeof G=="string"?O=G:(O=G.path,ae=G.matrix);var ue=new Path2D(O),ye=document.createElement("canvas"),Te=ye.getContext("2d");if(!ae){for(var ve=1e3,he=ve,de=ve,me=0,De=0,Ne,Be,Oe=0;Oe<ve;Oe+=2)for(var Ae=0;Ae<ve;Ae+=2)Te.isPointInPath(ue,Oe,Ae,"nonzero")&&(he=Math.min(he,Oe),de=Math.min(de,Ae),me=Math.max(me,Oe),De=Math.max(De,Ae));Ne=me-he,Be=De-de;var nt=10,St=Math.min(nt/Ne,nt/Be);ae=[St,0,0,St,-Math.round(Ne/2+he)*St,-Math.round(Be/2+de)*St]}return{type:"path",path:O,matrix:ae}}function Le(G){var O,ae=1,ue="#000000",ye='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof G=="string"?O=G:(O=G.text,ae="scalar"in G?G.scalar:ae,ye="fontFamily"in G?G.fontFamily:ye,ue="color"in G?G.color:ue);var Te=10*ae,ve=""+Te+"px "+ye,he=new OffscreenCanvas(Te,Te),de=he.getContext("2d");de.font=ve;var me=de.measureText(O),De=Math.ceil(me.actualBoundingBoxRight+me.actualBoundingBoxLeft),Ne=Math.ceil(me.actualBoundingBoxAscent+me.actualBoundingBoxDescent),Be=2,Oe=me.actualBoundingBoxLeft+Be,Ae=me.actualBoundingBoxAscent+Be;De+=Be+Be,Ne+=Be+Be,he=new OffscreenCanvas(De,Ne),de=he.getContext("2d"),de.font=ve,de.fillStyle=ue,de.fillText(O,Oe,Ae);var nt=1/ae;return{type:"bitmap",bitmap:he.transferToImageBitmap(),matrix:[nt,0,0,nt,-De*nt/2,-Ne*nt/2]}}a.exports=function(){return X().apply(this,arguments)},a.exports.reset=function(){X().reset()},a.exports.create=Ue,a.exports.shapeFromPath=xe,a.exports.shapeFromText=Le})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Ud,!1);const zd=Ud.exports;Ud.exports.create;const nE=()=>{};var sy={};const Ev=function(r){const t=[];let a=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[a++]=o:o<2048?(t[a++]=o>>6|192,t[a++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[a++]=o>>18|240,t[a++]=o>>12&63|128,t[a++]=o>>6&63|128,t[a++]=o&63|128):(t[a++]=o>>12|224,t[a++]=o>>6&63|128,t[a++]=o&63|128)}return t},aE=function(r){const t=[];let a=0,s=0;for(;a<r.length;){const o=r[a++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[a++];t[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[a++],h=r[a++],m=r[a++],y=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const c=r[a++],h=r[a++];t[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return t.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],h=o+1<r.length,m=h?r[o+1]:0,y=o+2<r.length,_=y?r[o+2]:0,x=c>>2,T=(c&3)<<4|m>>4;let A=(m&15)<<2|_>>6,U=_&63;y||(U=64,h||(A=64)),s.push(a[x],a[T],a[A],a[U])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Ev(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):aE(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=a[r.charAt(o++)],m=o<r.length?a[r.charAt(o)]:0;++o;const _=o<r.length?a[r.charAt(o)]:64;++o;const T=o<r.length?a[r.charAt(o)]:64;if(++o,c==null||m==null||_==null||T==null)throw new iE;const A=c<<2|m>>4;if(s.push(A),_!==64){const U=m<<4&240|_>>2;if(s.push(U),T!==64){const B=_<<6&192|T;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sE=function(r){const t=Ev(r);return Tv.encodeByteArray(t,!0)},gu=function(r){return sE(r).replace(/\./g,"")},rE=function(r){try{return Tv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function lE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const oE=()=>lE().__FIREBASE_DEFAULTS__,cE=()=>{if(typeof process>"u"||typeof sy>"u")return;const r=sy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},uE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&rE(r[1]);return t&&JSON.parse(t)},Pd=()=>{try{return nE()||oE()||cE()||uE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},fE=r=>Pd()?.emulatorHosts?.[r],hE=r=>{const t=fE(r);if(!t)return;const a=t.lastIndexOf(":");if(a<=0||a+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(a+1),10);return t[0]==="["?[t.substring(1,a-1),s]:[t.substring(0,a),s]},Sv=()=>Pd()?.config;class dE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,s)=>{a?this.reject(a):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,s))}}}function Gd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mE(r){return(await fetch(r,{credentials:"include"})).ok}function pE(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gu(JSON.stringify(a)),gu(JSON.stringify(h)),""].join(".")}const so={};function gE(){const r={prod:[],emulator:[]};for(const t of Object.keys(so))so[t]?r.emulator.push(t):r.prod.push(t);return r}function yE(r){let t=document.getElementById(r),a=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),a=!0),{created:a,element:t}}let ry=!1;function vE(r,t){if(typeof window>"u"||typeof document>"u"||!Gd(window.location.host)||so[r]===t||so[r]||ry)return;so[r]=t;function a(A){return`__firebase__banner__${A}`}const s="__firebase__banner",c=gE().prod.length>0;function h(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,U){A.setAttribute("width","24"),A.setAttribute("id",U),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{ry=!0,h()},A}function x(A,U){A.setAttribute("id",U),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=yE(s),U=a("text"),B=document.getElementById(U)||document.createElement("span"),P=a("learnmore"),k=document.getElementById(P)||document.createElement("a"),V=a("preprendIcon"),J=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ne=A.element;m(ne),x(k,P);const re=_();y(J,V),ne.append(J,B,k,re),document.body.appendChild(ne)}c?(B.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function _E(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bE(){const r=Pd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xE(){return!bE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EE(){try{return typeof indexedDB=="object"}catch{return!1}}function TE(){return new Promise((r,t)=>{try{let a=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),a||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{a=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(a){t(a)}})}const SE="FirebaseError";class Kr extends Error{constructor(t,a,s){super(a),this.code=t,this.customData=s,this.name=SE,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wv.prototype.create)}}class wv{constructor(t,a,s){this.service=t,this.serviceName=a,this.errors=s}create(t,...a){const s=a[0]||{},o=`${this.service}/${t}`,c=this.errors[t],h=c?wE(c,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Kr(o,m,s)}}function wE(r,t){return r.replace(AE,(a,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const AE=/\{\$([^}]+)}/g;function yu(r,t){if(r===t)return!0;const a=Object.keys(r),s=Object.keys(t);for(const o of a){if(!s.includes(o))return!1;const c=r[o],h=t[o];if(ly(c)&&ly(h)){if(!yu(c,h))return!1}else if(c!==h)return!1}for(const o of s)if(!a.includes(o))return!1;return!0}function ly(r){return r!==null&&typeof r=="object"}function Gr(r){return r&&r._delegate?r._delegate:r}class ho{constructor(t,a,s){this.name=t,this.instanceFactory=a,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const js="[DEFAULT]";class CE{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const s=new dE;if(this.instancesDeferred.set(a,s),this.isInitialized(a)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:a});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){const a=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(RE(t))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(t=js){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=js){return this.instances.has(t)}getOptions(t=js){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:a});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&h.resolve(o)}return o}onInit(t,a){const s=this.normalizeInstanceIdentifier(a),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&t(c,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,a){const s=this.onInitCallbacks.get(a);if(s)for(const o of s)try{o(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NE(t),options:a}),this.instances.set(t,s),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=js){return this.component?this.component.multipleInstances?t:js:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NE(r){return r===js?void 0:r}function RE(r){return r.instantiationMode==="EAGER"}class ME{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new CE(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const IE={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},DE=Ke.INFO,OE={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},VE=(r,t,...a)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=OE[t];if(o)console[o](`[${s}]  ${r.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Av{constructor(t){this.name=t,this._logLevel=DE,this._logHandler=VE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ke))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}const jE=(r,t)=>t.some(a=>r instanceof a);let oy,cy;function kE(){return oy||(oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LE(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cv=new WeakMap,gd=new WeakMap,Nv=new WeakMap,ed=new WeakMap,qd=new WeakMap;function BE(r){const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{a(Fi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",h)});return t.then(a=>{a instanceof IDBCursor&&Cv.set(a,r)}).catch(()=>{}),qd.set(t,r),t}function UE(r){if(gd.has(r))return;const t=new Promise((a,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{a(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});gd.set(r,t)}let yd={get(r,t,a){if(r instanceof IDBTransaction){if(t==="done")return gd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Nv.get(r);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Fi(r[t])},set(r,t,a){return r[t]=a,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function zE(r){yd=r(yd)}function PE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const s=r.call(td(this),t,...a);return Nv.set(s,t.sort?t.sort():[t]),Fi(s)}:LE().includes(r)?function(...t){return r.apply(td(this),t),Fi(Cv.get(this))}:function(...t){return Fi(r.apply(td(this),t))}}function GE(r){return typeof r=="function"?PE(r):(r instanceof IDBTransaction&&UE(r),jE(r,kE())?new Proxy(r,yd):r)}function Fi(r){if(r instanceof IDBRequest)return BE(r);if(ed.has(r))return ed.get(r);const t=GE(r);return t!==r&&(ed.set(r,t),qd.set(t,r)),t}const td=r=>qd.get(r);function qE(r,t,{blocked:a,upgrade:s,blocking:o,terminated:c}={}){const h=indexedDB.open(r,t),m=Fi(h);return s&&h.addEventListener("upgradeneeded",y=>{s(Fi(h.result),y.oldVersion,y.newVersion,Fi(h.transaction),y)}),a&&h.addEventListener("blocked",y=>a(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const HE=["get","getKey","getAll","getAllKeys","count"],FE=["put","add","delete","clear"],nd=new Map;function uy(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(nd.get(t))return nd.get(t);const a=t.replace(/FromIndex$/,""),s=t!==a,o=FE.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(o||HE.includes(a)))return;const c=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[a](...m),o&&y.done]))[0]};return nd.set(t,c),c}zE(r=>({...r,get:(t,a,s)=>uy(t,a)||r.get(t,a,s),has:(t,a)=>!!uy(t,a)||r.has(t,a)}));class QE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(XE(a)){const s=a.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(a=>a).join(" ")}}function XE(r){return r.getComponent()?.type==="VERSION"}const vd="@firebase/app",fy="0.14.6";const ri=new Av("@firebase/app"),YE="@firebase/app-compat",KE="@firebase/analytics-compat",$E="@firebase/analytics",ZE="@firebase/app-check-compat",JE="@firebase/app-check",WE="@firebase/auth",eT="@firebase/auth-compat",tT="@firebase/database",nT="@firebase/data-connect",aT="@firebase/database-compat",iT="@firebase/functions",sT="@firebase/functions-compat",rT="@firebase/installations",lT="@firebase/installations-compat",oT="@firebase/messaging",cT="@firebase/messaging-compat",uT="@firebase/performance",fT="@firebase/performance-compat",hT="@firebase/remote-config",dT="@firebase/remote-config-compat",mT="@firebase/storage",pT="@firebase/storage-compat",gT="@firebase/firestore",yT="@firebase/ai",vT="@firebase/firestore-compat",_T="firebase",bT="12.6.0";const _d="[DEFAULT]",xT={[vd]:"fire-core",[YE]:"fire-core-compat",[$E]:"fire-analytics",[KE]:"fire-analytics-compat",[JE]:"fire-app-check",[ZE]:"fire-app-check-compat",[WE]:"fire-auth",[eT]:"fire-auth-compat",[tT]:"fire-rtdb",[nT]:"fire-data-connect",[aT]:"fire-rtdb-compat",[iT]:"fire-fn",[sT]:"fire-fn-compat",[rT]:"fire-iid",[lT]:"fire-iid-compat",[oT]:"fire-fcm",[cT]:"fire-fcm-compat",[uT]:"fire-perf",[fT]:"fire-perf-compat",[hT]:"fire-rc",[dT]:"fire-rc-compat",[mT]:"fire-gcs",[pT]:"fire-gcs-compat",[gT]:"fire-fst",[vT]:"fire-fst-compat",[yT]:"fire-vertex","fire-js":"fire-js",[_T]:"fire-js-all"};const vu=new Map,ET=new Map,bd=new Map;function hy(r,t){try{r.container.addComponent(t)}catch(a){ri.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,a)}}function _u(r){const t=r.name;if(bd.has(t))return ri.debug(`There were multiple attempts to register component ${t}.`),!1;bd.set(t,r);for(const a of vu.values())hy(a,r);for(const a of ET.values())hy(a,r);return!0}function TT(r,t){const a=r.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),r.container.getProvider(t)}function ST(r){return r==null?!1:r.settings!==void 0}const wT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new wv("app","Firebase",wT);class AT{constructor(t,a,s){this._isDeleted=!1,this._options={...t},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const CT=bT;function Rv(r,t={}){let a=r;typeof t!="object"&&(t={name:t});const s={name:_d,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Qi.create("bad-app-name",{appName:String(o)});if(a||(a=Sv()),!a)throw Qi.create("no-options");const c=vu.get(o);if(c){if(yu(a,c.options)&&yu(s,c.config))return c;throw Qi.create("duplicate-app",{appName:o})}const h=new ME(o);for(const y of bd.values())h.addComponent(y);const m=new AT(a,s,h);return vu.set(o,m),m}function NT(r=_d){const t=vu.get(r);if(!t&&r===_d&&Sv())return Rv();if(!t)throw Qi.create("no-app",{appName:r});return t}function Br(r,t,a){let s=xT[r]??r;a&&(s+=`-${a}`);const o=s.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ri.warn(h.join(" "));return}_u(new ho(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const RT="firebase-heartbeat-database",MT=1,mo="firebase-heartbeat-store";let ad=null;function Mv(){return ad||(ad=qE(RT,MT,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(mo)}catch(a){console.warn(a)}}}}).catch(r=>{throw Qi.create("idb-open",{originalErrorMessage:r.message})})),ad}async function IT(r){try{const a=(await Mv()).transaction(mo),s=await a.objectStore(mo).get(Iv(r));return await a.done,s}catch(t){if(t instanceof Kr)ri.warn(t.message);else{const a=Qi.create("idb-get",{originalErrorMessage:t?.message});ri.warn(a.message)}}}async function dy(r,t){try{const s=(await Mv()).transaction(mo,"readwrite");await s.objectStore(mo).put(t,Iv(r)),await s.done}catch(a){if(a instanceof Kr)ri.warn(a.message);else{const s=Qi.create("idb-set",{originalErrorMessage:a?.message});ri.warn(s.message)}}}function Iv(r){return`${r.name}!${r.options.appId}`}const DT=1024,OT=30;class VT{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new kT(a),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=my();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>OT){const o=LT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ri.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=my(),{heartbeatsToSend:a,unsentEntries:s}=jT(this._heartbeatsCache.heartbeats),o=gu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ri.warn(t),""}}}function my(){return new Date().toISOString().substring(0,10)}function jT(r,t=DT){const a=[];let s=r.slice();for(const o of r){const c=a.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),py(a)>t){c.dates.pop();break}}else if(a.push({agent:o.agent,dates:[o.date]}),py(a)>t){a.pop();break}s=s.slice(1)}return{heartbeatsToSend:a,unsentEntries:s}}class kT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EE()?TE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await IT(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return dy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return dy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function py(r){return gu(JSON.stringify({version:2,heartbeats:r})).length}function LT(r){if(r.length===0)return-1;let t=0,a=r[0].date;for(let s=1;s<r.length;s++)r[s].date<a&&(a=r[s].date,t=s);return t}function BT(r){_u(new ho("platform-logger",t=>new QE(t),"PRIVATE")),_u(new ho("heartbeat",t=>new VT(t),"PRIVATE")),Br(vd,fy,r),Br(vd,fy,"esm2020"),Br("fire-js","")}BT("");var UT="firebase",zT="12.6.0";Br(UT,zT,"app");var gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xi,Dv;(function(){var r;function t(M,S){function C(){}C.prototype=S.prototype,M.F=S.prototype,M.prototype=new C,M.prototype.constructor=M,M.D=function(N,D,L){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return S.prototype[D].apply(N,R)}}function a(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,a),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,S,C){C||(C=0);const N=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)N[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)N[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=M.g[0],C=M.g[1],D=M.g[2];let L=M.g[3],R;R=S+(L^C&(D^L))+N[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=L+(D^S&(C^D))+N[1]+3905402710&4294967295,L=S+(R<<12&4294967295|R>>>20),R=D+(C^L&(S^C))+N[2]+606105819&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(S^D&(L^S))+N[3]+3250441966&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(L^C&(D^L))+N[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=L+(D^S&(C^D))+N[5]+1200080426&4294967295,L=S+(R<<12&4294967295|R>>>20),R=D+(C^L&(S^C))+N[6]+2821735955&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(S^D&(L^S))+N[7]+4249261313&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(L^C&(D^L))+N[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=L+(D^S&(C^D))+N[9]+2336552879&4294967295,L=S+(R<<12&4294967295|R>>>20),R=D+(C^L&(S^C))+N[10]+4294925233&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(S^D&(L^S))+N[11]+2304563134&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(L^C&(D^L))+N[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=L+(D^S&(C^D))+N[13]+4254626195&4294967295,L=S+(R<<12&4294967295|R>>>20),R=D+(C^L&(S^C))+N[14]+2792965006&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(S^D&(L^S))+N[15]+1236535329&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(D^L&(C^D))+N[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(S^C))+N[6]+3225465664&4294967295,L=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(L^S))+N[11]+643717713&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^S&(D^L))+N[0]+3921069994&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^L&(C^D))+N[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(S^C))+N[10]+38016083&4294967295,L=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(L^S))+N[15]+3634488961&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^S&(D^L))+N[4]+3889429448&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^L&(C^D))+N[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(S^C))+N[14]+3275163606&4294967295,L=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(L^S))+N[3]+4107603335&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^S&(D^L))+N[8]+1163531501&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^L&(C^D))+N[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(S^C))+N[2]+4243563512&4294967295,L=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(L^S))+N[7]+1735328473&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^S&(D^L))+N[12]+2368359562&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(C^D^L)+N[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=L+(S^C^D)+N[8]+2272392833&4294967295,L=S+(R<<11&4294967295|R>>>21),R=D+(L^S^C)+N[11]+1839030562&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^S)+N[14]+4259657740&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^L)+N[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=L+(S^C^D)+N[4]+1272893353&4294967295,L=S+(R<<11&4294967295|R>>>21),R=D+(L^S^C)+N[7]+4139469664&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^S)+N[10]+3200236656&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^L)+N[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=L+(S^C^D)+N[0]+3936430074&4294967295,L=S+(R<<11&4294967295|R>>>21),R=D+(L^S^C)+N[3]+3572445317&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^S)+N[6]+76029189&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^L)+N[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=L+(S^C^D)+N[12]+3873151461&4294967295,L=S+(R<<11&4294967295|R>>>21),R=D+(L^S^C)+N[15]+530742520&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^S)+N[2]+3299628645&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(D^(C|~L))+N[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=L+(C^(S|~D))+N[7]+1126891415&4294967295,L=S+(R<<10&4294967295|R>>>22),R=D+(S^(L|~C))+N[14]+2878612391&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~S))+N[5]+4237533241&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~L))+N[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=L+(C^(S|~D))+N[3]+2399980690&4294967295,L=S+(R<<10&4294967295|R>>>22),R=D+(S^(L|~C))+N[10]+4293915773&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~S))+N[1]+2240044497&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~L))+N[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=L+(C^(S|~D))+N[15]+4264355552&4294967295,L=S+(R<<10&4294967295|R>>>22),R=D+(S^(L|~C))+N[6]+2734768916&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~S))+N[13]+1309151649&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~L))+N[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=L+(C^(S|~D))+N[11]+3174756917&4294967295,L=S+(R<<10&4294967295|R>>>22),R=D+(S^(L|~C))+N[2]+718787259&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~S))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+L&4294967295}s.prototype.v=function(M,S){S===void 0&&(S=M.length);const C=S-this.blockSize,N=this.C;let D=this.h,L=0;for(;L<S;){if(D==0)for(;L<=C;)o(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<S;)if(N[D++]=M.charCodeAt(L++),D==this.blockSize){o(this,N),D=0;break}}else for(;L<S;)if(N[D++]=M[L++],D==this.blockSize){o(this,N),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var C=M.length-8;C<M.length;++C)M[C]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)M[S++]=this.g[C]>>>N&255;return M};function c(M,S){var C=m;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=S(M)}function h(M,S){this.h=S;const C=[];let N=!0;for(let D=M.length-1;D>=0;D--){const L=M[D]|0;N&&L==S||(C[D]=L,N=!1)}this.g=C}var m={};function y(M){return-128<=M&&M<128?c(M,function(S){return new h([S|0],S<0?-1:0)}):new h([M|0],M<0?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return k(_(-M));const S=[];let C=1;for(let N=0;M>=C;N++)S[N]=M/C|0,C*=4294967296;return new h(S,0)}function x(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return k(x(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(S,8));let N=T;for(let L=0;L<M.length;L+=8){var D=Math.min(8,M.length-L);const R=parseInt(M.substring(L,L+D),S);D<8?(D=_(Math.pow(S,D)),N=N.j(D).add(_(R))):(N=N.j(C),N=N.add(_(R)))}return N}var T=y(0),A=y(1),U=y(16777216);r=h.prototype,r.m=function(){if(P(this))return-k(this).m();let M=0,S=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);M+=(N>=0?N:4294967296+N)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(B(this))return"0";if(P(this))return"-"+k(this).toString(M);const S=_(Math.pow(M,6));var C=this;let N="";for(;;){const D=re(C,S).g;C=V(C,D.j(S));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(M);if(C=D,B(C))return L+N;for(;L.length<6;)L="0"+L;N=L+N}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function B(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function P(M){return M.h==-1}r.l=function(M){return M=V(this,M),P(M)?-1:B(M)?0:1};function k(M){const S=M.g.length,C=[];for(let N=0;N<S;N++)C[N]=~M.g[N];return new h(C,~M.h).add(A)}r.abs=function(){return P(this)?k(this):this},r.add=function(M){const S=Math.max(this.g.length,M.g.length),C=[];let N=0;for(let D=0;D<=S;D++){let L=N+(this.i(D)&65535)+(M.i(D)&65535),R=(L>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);N=R>>>16,L&=65535,R&=65535,C[D]=R<<16|L}return new h(C,C[C.length-1]&-2147483648?-1:0)};function V(M,S){return M.add(k(S))}r.j=function(M){if(B(this)||B(M))return T;if(P(this))return P(M)?k(this).j(k(M)):k(k(this).j(M));if(P(M))return k(this.j(k(M)));if(this.l(U)<0&&M.l(U)<0)return _(this.m()*M.m());const S=this.g.length+M.g.length,C=[];for(var N=0;N<2*S;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<M.g.length;D++){const L=this.i(N)>>>16,R=this.i(N)&65535,Ue=M.i(D)>>>16,We=M.i(D)&65535;C[2*N+2*D]+=R*We,J(C,2*N+2*D),C[2*N+2*D+1]+=L*We,J(C,2*N+2*D+1),C[2*N+2*D+1]+=R*Ue,J(C,2*N+2*D+1),C[2*N+2*D+2]+=L*Ue,J(C,2*N+2*D+2)}for(M=0;M<S;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=S;M<2*S;M++)C[M]=0;return new h(C,0)};function J(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function ne(M,S){this.g=M,this.h=S}function re(M,S){if(B(S))throw Error("division by zero");if(B(M))return new ne(T,T);if(P(M))return S=re(k(M),S),new ne(k(S.g),k(S.h));if(P(S))return S=re(M,k(S)),new ne(k(S.g),S.h);if(M.g.length>30){if(P(M)||P(S))throw Error("slowDivide_ only works with positive integers.");for(var C=A,N=S;N.l(M)<=0;)C=ce(C),N=ce(N);var D=oe(C,1),L=oe(N,1);for(N=oe(N,2),C=oe(C,2);!B(N);){var R=L.add(N);R.l(M)<=0&&(D=D.add(C),L=R),N=oe(N,1),C=oe(C,1)}return S=V(M,D.j(S)),new ne(D,S)}for(D=T;M.l(S)>=0;){for(C=Math.max(1,Math.floor(M.m()/S.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),L=_(C),R=L.j(S);P(R)||R.l(M)>0;)C-=N,L=_(C),R=L.j(S);B(L)&&(L=A),D=D.add(L),M=V(M,R)}return new ne(D,M)}r.B=function(M){return re(this,M).h},r.and=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)&M.i(N);return new h(C,this.h&M.h)},r.or=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)|M.i(N);return new h(C,this.h|M.h)},r.xor=function(M){const S=Math.max(this.g.length,M.g.length),C=[];for(let N=0;N<S;N++)C[N]=this.i(N)^M.i(N);return new h(C,this.h^M.h)};function ce(M){const S=M.g.length+1,C=[];for(let N=0;N<S;N++)C[N]=M.i(N)<<1|M.i(N-1)>>>31;return new h(C,M.h)}function oe(M,S){const C=S>>5;S%=32;const N=M.g.length-C,D=[];for(let L=0;L<N;L++)D[L]=S>0?M.i(L+C)>>>S|M.i(L+C+1)<<32-S:M.i(L+C);return new h(D,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Dv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=x,Xi=h}).apply(typeof gy<"u"?gy:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ov,to,Vv,lu,xd,jv,kv,Lv;(function(){var r,t=Object.defineProperty;function a(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var p=0;p<u.length;++p){var b=u[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=a(this);function o(u,p){if(p)e:{var b=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var q=u[w];if(!(q in b))break e;b=b[q]}u=u[u.length-1],w=b[u],p=p(w),p!=w&&p!=null&&t(b,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var b=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&b.push([w,p[w]]);return b}});var c=c||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function y(u,p,b){return u.call.apply(u.bind,arguments)}function _(u,p,b){return _=y,_.apply(null,arguments)}function x(u,p){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function T(u,p){function b(){}b.prototype=p.prototype,u.Z=p.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(w,q,Y){for(var fe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)fe[Ve-2]=arguments[Ve];return p.prototype[q].apply(w,fe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const p=u.length;if(p>0){const b=Array(p);for(let w=0;w<p;w++)b[w]=u[w];return b}return[]}function B(u,p){for(let w=1;w<arguments.length;w++){const q=arguments[w];var b=typeof q;if(b=b!="object"?b:q?Array.isArray(q)?"array":b:"null",b=="array"||b=="object"&&typeof q.length=="number"){b=u.length||0;const Y=q.length||0;u.length=b+Y;for(let fe=0;fe<Y;fe++)u[b+fe]=q[fe]}else u.push(q)}}class P{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(u){h.setTimeout(()=>{throw u},0)}function V(){var u=M;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class J{constructor(){this.h=this.g=null}add(p,b){const w=ne.get();w.set(p,b),this.h?this.h.next=w:this.g=w,this.h=w}}var ne=new P(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,oe=!1,M=new J,S=()=>{const u=Promise.resolve(void 0);ce=()=>{u.then(C)}};function C(){for(var u;u=V();){try{u.h.call(u.g)}catch(b){k(b)}var p=ne;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}oe=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};h.addEventListener("test",b,p),h.removeEventListener("test",b,p)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}T(Ue,D),Ue.prototype.init=function(u,p){const b=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(b=="mouseover"?p=u.fromElement:b=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),X=0;function le(u,p,b,w,q){this.listener=u,this.proxy=null,this.src=p,this.type=b,this.capture=!!w,this.ha=q,this.key=++X,this.da=this.fa=!1}function xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Le(u,p,b){for(const w in u)p.call(b,u[w],w,u)}function G(u,p){for(const b in u)p.call(void 0,u[b],b,u)}function O(u){const p={};for(const b in u)p[b]=u[b];return p}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(u,p){let b,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(b in w)u[b]=w[b];for(let Y=0;Y<ae.length;Y++)b=ae[Y],Object.prototype.hasOwnProperty.call(w,b)&&(u[b]=w[b])}}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,p,b,w,q){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const fe=ve(u,p,w,q);return fe>-1?(p=u[fe],b||(p.fa=!1)):(p=new le(p,this.src,Y,!!w,q),p.fa=b,u.push(p)),p};function Te(u,p){const b=p.type;if(b in u.g){var w=u.g[b],q=Array.prototype.indexOf.call(w,p,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(w,q,1),Y&&(xe(p),u.g[b].length==0&&(delete u.g[b],u.h--))}}function ve(u,p,b,w){for(let q=0;q<u.length;++q){const Y=u[q];if(!Y.da&&Y.listener==p&&Y.capture==!!b&&Y.ha==w)return q}return-1}var he="closure_lm_"+(Math.random()*1e6|0),de={};function me(u,p,b,w,q){if(Array.isArray(p)){for(let Y=0;Y<p.length;Y++)me(u,p[Y],b,w,q);return null}return b=Mt(b),u&&u[We]?u.J(p,b,m(w)?!!w.capture:!1,q):De(u,p,b,!1,w,q)}function De(u,p,b,w,q,Y){if(!p)throw Error("Invalid event type");const fe=m(q)?!!q.capture:!!q;let Ve=St(u);if(Ve||(u[he]=Ve=new ye(u)),b=Ve.add(p,b,w,fe,Y),b.proxy)return b;if(w=Ne(),b.proxy=w,w.src=u,w.listener=b,u.addEventListener)L||(q=fe),q===void 0&&(q=!1),u.addEventListener(p.toString(),w,q);else if(u.attachEvent)u.attachEvent(Ae(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Ne(){function u(b){return p.call(u.src,u.listener,b)}const p=nt;return u}function Be(u,p,b,w,q){if(Array.isArray(p))for(var Y=0;Y<p.length;Y++)Be(u,p[Y],b,w,q);else w=m(w)?!!w.capture:!!w,b=Mt(b),u&&u[We]?(u=u.i,Y=String(p).toString(),Y in u.g&&(p=u.g[Y],b=ve(p,b,w,q),b>-1&&(xe(p[b]),Array.prototype.splice.call(p,b,1),p.length==0&&(delete u.g[Y],u.h--)))):u&&(u=St(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ve(p,b,w,q)),(b=u>-1?p[u]:null)&&Oe(b))}function Oe(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[We])Te(p.i,u);else{var b=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(b,w,u.capture):p.detachEvent?p.detachEvent(Ae(b),w):p.addListener&&p.removeListener&&p.removeListener(w),(b=St(p))?(Te(b,u),b.h==0&&(b.src=null,p[he]=null)):xe(u)}}}function Ae(u){return u in de?de[u]:de[u]="on"+u}function nt(u,p){if(u.da)u=!0;else{p=new Ue(p,this);const b=u.listener,w=u.ha||u.src;u.fa&&Oe(u),u=b.call(w,p)}return u}function St(u){return u=u[he],u instanceof ye?u:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(u){return typeof u=="function"?u:(u[vt]||(u[vt]=function(p){return u.handleEvent(p)}),u[vt])}function at(){N.call(this),this.i=new ye(this),this.M=this,this.G=null}T(at,N),at.prototype[We]=!0,at.prototype.removeEventListener=function(u,p,b,w){Be(this,u,p,b,w)};function $e(u,p){var b,w=u.G;if(w)for(b=[];w;w=w.G)b.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var q=p;p=new D(w,u),ue(p,q)}q=!0;let Y,fe;if(b)for(fe=b.length-1;fe>=0;fe--)Y=p.g=b[fe],q=fn(Y,w,!0,p)&&q;if(Y=p.g=u,q=fn(Y,w,!0,p)&&q,q=fn(Y,w,!1,p)&&q,b)for(fe=0;fe<b.length;fe++)Y=p.g=b[fe],q=fn(Y,w,!1,p)&&q}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const b=u.g[p];for(let w=0;w<b.length;w++)xe(b[w]);delete u.g[p],u.h--}}this.G=null},at.prototype.J=function(u,p,b,w){return this.i.add(String(u),p,!1,b,w)},at.prototype.K=function(u,p,b,w){return this.i.add(String(u),p,!0,b,w)};function fn(u,p,b,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let q=!0;for(let Y=0;Y<p.length;++Y){const fe=p[Y];if(fe&&!fe.da&&fe.capture==b){const Ve=fe.listener,At=fe.ha||fe.src;fe.fa&&Te(u.i,fe),q=Ve.call(At,w)!==!1&&q}}return q&&!w.defaultPrevented}function as(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function ci(u){u.g=as(()=>{u.g=null,u.i&&(u.i=!1,ci(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class It extends N{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ci(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(u){N.call(this),this.h=u,this.g={}}T(Dn,N);var ca=[];function it(u){Le(u.g,function(p,b){this.g.hasOwnProperty(b)&&Oe(p)},u),u.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),it(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ua=h.JSON.stringify,Hs=h.JSON.parse,is=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ui(){}function Fs(){}var En={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){D.call(this,"d")}T($t,D);function On(){D.call(this,"c")}T(On,D);var wt={},Co=null;function Qs(){return Co=Co||new at}wt.Ia="serverreachability";function No(u){D.call(this,wt.Ia,u)}T(No,D);function fa(u){const p=Qs();$e(p,new No(p))}wt.STAT_EVENT="statevent";function ss(u,p){D.call(this,wt.STAT_EVENT,u),this.stat=p}T(ss,D);function Dt(u){const p=Qs();$e(p,new ss(p,u))}wt.Ja="timingevent";function ha(u,p){D.call(this,wt.Ja,u),this.size=p}T(ha,D);function da(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function $u(u,p,b,w,q,Y){u.info(function(){if(u.g)if(Y){var fe="",Ve=Y.split("&");for(let et=0;et<Ve.length;et++){var At=Ve[et].split("=");if(At.length>1){const _t=At[0];At=At[1];const Ln=_t.split("_");fe=Ln.length>=2&&Ln[1]=="type"?fe+(_t+"="+At+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+p+`
`+b+`
`+fe})}function Ro(u,p,b,w,q,Y,fe){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+p+`
`+b+`
`+Y+" "+fe})}function ma(u,p,b,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Zu(u,b)+(w?" "+w:"")})}function rs(u,p){u.info(function(){return"TIMEOUT: "+p})}Kn.prototype.info=function(){};function Zu(u,p){if(!u.g)return p;if(!p)return null;try{const Y=JSON.parse(p);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var b=Y[u];if(!(b.length<2)){var w=b[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let fe=1;fe<w.length;fe++)w[fe]=""}}}}return ua(Y)}catch{return p}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function os(){}T(os,ui),os.prototype.g=function(){return new XMLHttpRequest},nl=new os;function Ua(u){return encodeURIComponent(String(u))}function Mo(u){var p=1;u=u.split(":");const b=[];for(;p>0&&u.length;)b.push(u.shift()),p--;return u.length&&b.push(u.join(":")),b}function $n(u,p,b,w){this.j=u,this.i=p,this.l=b,this.S=w||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ot={},Ft={};function pa(u,p,b){u.M=1,u.A=cs(jt(p)),u.u=b,u.R=!0,Xs(u,null)}function Xs(u,p){u.F=Date.now(),ga(u),u.B=jt(u.A);var b=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),Zs(b.i,"t",w),u.C=0,b=u.j.L,u.h=new Zn,u.g=Fo(u.j,b?p:null,!u.u),u.P>0&&(u.O=new It(_(u.Y,u,u.g),u.P)),p=u.V,b=u.g,w=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(ca[0]=q.toString()),q=ca);for(let Y=0;Y<q.length;Y++){const fe=me(b,q[Y],w||p.handleEvent,!1,p.h||p);if(!fe)break;p.g[fe.key]=fe}p=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),fa(),$u(u.i,u.v,u.B,u.l,u.S,u.u)}$n.prototype.ba=function(u){u=u.target;const p=this.O;p&&ea(u)==3?p.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const Ve=ea(this.g),At=this.g.ya(),et=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Ve!=4||At==7||(At==8||et<=0?fa(3):fa(2)),ya(this);var p=this.g.ca();this.X=p;var b=Ju(this);if(this.o=p==200,Ro(this.i,this.v,this.B,this.l,this.S,Ve,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(w)){var Y=w;break t}}Y=null}if(u=Y)ma(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,va(this,u);else{this.o=!1,this.m=3,Dt(12),Tn(this),Vn(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<b.length;)if(_t=Do(this,b),_t==Ft){Ve==4&&(this.m=4,Dt(14),u=!1),ma(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Dt(15),ma(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else ma(this.i,this.l,_t,null),va(this,_t);if(Io(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||b.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)ma(this.i,this.l,b,"[Invalid Chunked Response]"),Tn(this),Vn(this);else if(b.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),yl(fe),fe.P=!0,Dt(11))}}else ma(this.i,this.l,b,null),va(this,b);Ve==4&&Tn(this),this.o&&!this.K&&(Ve==4?Po(this.j,this):(this.o=!1,ga(this)))}else Pa(this.g),p==400&&b.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Tn(this),Vn(this)}}}catch{}finally{}};function Ju(u){if(!Io(u))return u.g.la();const p=Zt(u.g);if(p==="")return"";let b="";const w=p.length,q=ea(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Tn(u),Vn(u),"";u.h.i=new h.TextDecoder}for(let Y=0;Y<w;Y++)u.h.h=!0,b+=u.h.i.decode(p[Y],{stream:!(q&&Y==w-1)});return p.length=0,u.h.g+=b,u.C=0,u.h.g}function Io(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Do(u,p){var b=u.C,w=p.indexOf(`
`,b);return w==-1?Ft:(b=Number(p.substring(b,w)),isNaN(b)?Ot:(w+=1,w+b>p.length?Ft:(p=p.slice(w,w+b),u.C=w+b,p)))}$n.prototype.cancel=function(){this.K=!0,Tn(this)};function ga(u){u.T=Date.now()+u.H,Ys(u,u.H)}function Ys(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=da(_(u.aa,u),p)}function ya(u){u.D&&(h.clearTimeout(u.D),u.D=null)}$n.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(rs(this.i,this.B),this.M!=2&&(fa(),Dt(17)),Tn(this),this.m=2,Vn(this)):Ys(this,this.T-u)};function Vn(u){u.j.I==0||u.K||Po(u.j,u)}function Tn(u){ya(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,it(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function va(u,p){try{var b=u.j;if(b.I!=0&&(b.g==u||ba(b.h,u))){if(!u.L&&ba(b.h,u)&&b.I==3){try{var w=b.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)nr(b),vi(b);else break e;gs(b),Dt(18)}}else b.xa=q[1],0<b.xa-b.K&&q[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=da(_(b.Va,b),6e3));_a(b.h)<=1&&b.ta&&(b.ta=void 0)}else Aa(b,11)}else if((u.L||b.g==u)&&nr(b),!R(p))for(q=b.Ba.g.parse(p),p=0;p<q.length;p++){let et=q[p];const _t=et[0];if(!(_t<=b.K))if(b.K=_t,et=et[1],b.I==2)if(et[0]=="c"){b.M=et[1],b.ba=et[2];const Ln=et[3];Ln!=null&&(b.ka=Ln,b.j.info("VER="+b.ka));const Ca=et[4];Ca!=null&&(b.za=Ca,b.j.info("SVER="+b.za));const ta=et[5];ta!=null&&typeof ta=="number"&&ta>0&&(w=1.5*ta,b.O=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const na=u.g;if(na){const ys=na.g?na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var Y=w.h;Y.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sl(Y,Y.h),Y.h=null))}if(w.G){const ar=na.g?na.g.getResponseHeader("X-HTTP-Session-Id"):null;ar&&(w.wa=ar,rt(w.J,w.G,ar))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),w=b;var fe=u;if(w.na=Ho(w,w.L?w.ba:null,w.W),fe.L){rl(w.h,fe);var Ve=fe,At=w.O;At&&(Ve.H=At),Ve.D&&(ya(Ve),ga(Ve)),w.g=fe}else Uo(w);b.i.length>0&&wa(b)}else et[0]!="stop"&&et[0]!="close"||Aa(b,7);else b.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Aa(b,7):pl(b):et[0]!="noop"&&b.l&&b.l.qa(et),b.A=0)}}fa(4)}catch{}}var Vt=class{constructor(u,p){this.g=u,this.map=p}};function al(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function il(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _a(u){return u.h?1:u.g?u.g.size:0}function ba(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function sl(u,p){u.g?u.g.add(p):u.h=p}function rl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}al.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ll(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const b of u.g.values())p=p.concat(b.G);return p}return U(u.i)}var Oo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(u,p){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const w=u[b].indexOf("=");let q,Y=null;w>=0?(q=u[b].substring(0,w),Y=u[b].substring(w+1)):q=u[b],p(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Sn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Sn?(this.l=u.l,Qt(this,u.j),this.o=u.o,this.g=u.g,fi(this,u.u),this.h=u.h,ol(this,Lo(u.i)),this.m=u.m):u&&(p=String(u).match(Oo))?(this.l=!1,Qt(this,p[1]||"",!0),this.o=xa(p[2]||""),this.g=xa(p[3]||"",!0),fi(this,p[4]),this.h=xa(p[5]||"",!0),ol(this,p[6]||"",!0),this.m=xa(p[7]||"")):(this.l=!1,this.i=new di(null,this.l))}Sn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(us(p,$s,!0),":");var b=this.g;return(b||p=="file")&&(u.push("//"),(p=this.o)&&u.push(us(p,$s,!0),"@"),u.push(Ua(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(us(b,b.charAt(0)=="/"?cl:Vo,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",us(b,jo)),u.join("")},Sn.prototype.resolve=function(u){const p=jt(this);let b=!!u.j;b?Qt(p,u.j):b=!!u.o,b?p.o=u.o:b=!!u.g,b?p.g=u.g:b=u.u!=null;var w=u.h;if(b)fi(p,u.u);else if(b=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=p.h.lastIndexOf("/");q!=-1&&(w=p.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let fe=0;fe<q.length;){const Ve=q[fe++];Ve=="."?w&&fe==q.length&&Y.push(""):Ve==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&fe==q.length&&Y.push("")):(Y.push(Ve),w=!0)}w=Y.join("/")}else w=q}return b?p.h=w:b=u.i.toString()!=="",b?ol(p,Lo(u.i)):b=!!u.m,b&&(p.m=u.m),p};function jt(u){return new Sn(u)}function Qt(u,p,b){u.j=b?xa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fi(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function ol(u,p,b){p instanceof di?(u.i=p,Js(u.i,u.l)):(b||(p=us(p,hi)),u.i=new di(p,u.l))}function rt(u,p,b){u.i.set(p,b)}function cs(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,p,b){return typeof u=="string"?(u=encodeURI(u).replace(p,mn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $s=/[#\/\?@]/g,Vo=/[#\?:]/g,cl=/[#\?]/g,hi=/[#\?@]/g,jo=/#/g;function di(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function pn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ks(u.i,function(p,b){u.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}r=di.prototype,r.add=function(u,p){pn(this),this.i=null,u=mi(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(p),this.h+=1,this};function ko(u,p){pn(u),p=mi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ul(u,p){return pn(u),p=mi(u,p),u.g.has(p)}r.forEach=function(u,p){pn(this),this.g.forEach(function(b,w){b.forEach(function(q){u.call(p,q,w,this)},this)},this)};function fl(u,p){pn(u);let b=[];if(typeof p=="string")ul(u,p)&&(b=b.concat(u.g.get(mi(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)b=b.concat(u[p]);return b}r.set=function(u,p){return pn(this),this.i=null,u=mi(this,u),ul(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=fl(this,u),u.length>0?String(u[0]):p):p};function Zs(u,p,b){ko(u,p),b.length>0&&(u.i=null,u.g.set(mi(u,p),U(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var b=p[w];const q=Ua(b);b=fl(this,b);for(let Y=0;Y<b.length;Y++){let fe=q;b[Y]!==""&&(fe+="="+Ua(b[Y])),u.push(fe)}}return this.i=u.join("&")};function Lo(u){const p=new di;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function mi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Js(u,p){p&&!u.j&&(pn(u),u.i=null,u.g.forEach(function(b,w){const q=w.toLowerCase();w!=q&&(ko(this,w),Zs(this,q,b))},u)),u.j=p}function Jn(u,p){const b=new Kn;if(h.Image){const w=new Image;w.onload=x(jn,b,"TestLoadImage: loaded",!0,p,w),w.onerror=x(jn,b,"TestLoadImage: error",!1,p,w),w.onabort=x(jn,b,"TestLoadImage: abort",!1,p,w),w.ontimeout=x(jn,b,"TestLoadImage: timeout",!1,p,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function hl(u,p){const b=new Kn,w=new AbortController,q=setTimeout(()=>{w.abort(),jn(b,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(Y=>{clearTimeout(q),Y.ok?jn(b,"TestPingServer: ok",!0,p):jn(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(q),jn(b,"TestPingServer: error",!1,p)})}function jn(u,p,b,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(b)}catch{}}function pi(){this.g=new is}function Ea(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Ea,ui),Ea.prototype.g=function(){return new fs(this.i,this.h)};function fs(u,p){at.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(fs,at),r=fs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ws(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ws(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?gi(this):Wn(this),this.readyState==3&&Ws(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,gi(this))},r.Na=function(u){this.g&&(this.response=u,gi(this))},r.ga=function(){this.g&&gi(this)};function gi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Wn(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=p.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function kn(u){let p="";return Le(u,function(b,w){p+=w,p+=":",p+=b,p+=`\r
`}),p}function hs(u,p,b){e:{for(w in b){var w=!1;break e}w=!0}w||(b=kn(b),typeof u=="string"?b!=null&&Ua(b):rt(u,p,b))}function ct(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ct,at);var Ta=/^https?$/i,dl=["POST","PUT"];r=ct.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=A(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(Y){ds(this,Y);return}if(u=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)b.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())b.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(dl,p,void 0)>=0)||w||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of b)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){ds(this,Y)}};function ds(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,ml(u),za(u)}function ml(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,$e(this,"complete"),$e(this,"abort"),za(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),ct.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},r.Xa=function(){ms(this)};function ms(u){if(u.h&&typeof c<"u"){if(u.v&&ea(u)==4)setTimeout(u.Ca.bind(u),0);else if($e(u,"readystatechange"),ea(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var w;if(w=Y===0){let fe=String(u.D).match(Oo)[1]||null;!fe&&h.self&&h.self.location&&(fe=h.self.location.protocol.slice(0,-1)),w=!Ta.test(fe?fe.toLowerCase():"")}b=w}if(b)$e(u,"complete"),$e(u,"success");else{u.o=6;try{var q=ea(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",ml(u)}}finally{za(u)}}}}function za(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,p||$e(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ea(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ea(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Hs(p)}};function Zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Pa(u){const p={};u=(u.g&&ea(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(R(u[w]))continue;var b=Mo(u[w]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=p[q]||[];p[q]=Y,Y.push(b)}G(p,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(u,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||p}function yi(u){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,u),this.Za=Sa("retryDelaySeedMs",1e4,u),this.Ta=Sa("forwardChannelMaxRetries",2,u),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new al(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=yi.prototype,r.ka=8,r.I=1,r.connect=function(u,p,b,w){Dt(0),this.W=u,this.H=p||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.J=Ho(this,null,this.W),wa(this)};function pl(u){if(er(u),u.I==3){var p=u.V++,b=jt(u.J);if(rt(b,"SID",u.M),rt(b,"RID",p),rt(b,"TYPE","terminate"),ps(u,b),p=new $n(u,u.j,p),p.M=2,p.A=cs(jt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=p.A,b=!0),b||(p.g=Fo(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ga(p)}qo(u)}function vi(u){u.g&&(yl(u),u.g.cancel(),u.g=null)}function er(u){vi(u),u.v&&(h.clearTimeout(u.v),u.v=null),nr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function wa(u){if(!il(u.h)&&!u.m){u.m=!0;var p=u.Ea;ce||S(),oe||(ce(),oe=!0),M.add(p,u),u.D=0}}function tr(u,p){return _a(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=da(_(u.Ea,u,p),Go(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new $n(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=O(Y),ue(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Bo(this,q,p),b=jt(this.J),rt(b,"RID",u),rt(b,"CVER",22),this.G&&rt(b,"X-HTTP-Session-Id",this.G),ps(this,b),Y&&(this.R?p="headers="+Ua(kn(Y))+"&"+p:this.u&&hs(b,this.u,Y)),sl(this.h,q),this.Ra&&rt(b,"TYPE","init"),this.S?(rt(b,"$req",p),rt(b,"SID","null"),q.U=!0,pa(q,b,null)):pa(q,b,p),this.I=2}}else this.I==3&&(u?gl(this,u):this.i.length==0||il(this.h)||gl(this))};function gl(u,p){var b;p?b=p.l:b=u.V++;const w=jt(u.J);rt(w,"SID",u.M),rt(w,"RID",b),rt(w,"AID",u.K),ps(u,w),u.u&&u.o&&hs(w,u.u,u.o),b=new $n(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Bo(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),sl(u.h,b),pa(b,w,p)}function ps(u,p){u.H&&Le(u.H,function(b,w){rt(p,w,b)}),u.l&&Le({},function(b,w){rt(p,w,b)})}function Bo(u,p,b){b=Math.min(u.i.length,b);const w=u.l?_(u.l.Ka,u.l,u):null;e:{var q=u.i;let Ve=-1;for(;;){const At=["count="+b];Ve==-1?b>0?(Ve=q[0].g,At.push("ofs="+Ve)):Ve=0:At.push("ofs="+Ve);let et=!0;for(let _t=0;_t<b;_t++){var Y=q[_t].g;const Ln=q[_t].map;if(Y-=Ve,Y<0)Ve=Math.max(0,q[_t].g-100),et=!1;else try{Y="req"+Y+"_"||"";try{var fe=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Ca,ta]of fe){let na=ta;m(ta)&&(na=ua(ta)),At.push(Y+Ca+"="+encodeURIComponent(na))}}catch(Ca){throw At.push(Y+"type="+encodeURIComponent("_badmap")),Ca}}catch{w&&w(Ln)}}if(et){fe=At.join("&");break e}}fe=void 0}return u=u.i.splice(0,b),p.G=u,fe}function Uo(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;ce||S(),oe||(ce(),oe=!0),M.add(p,u),u.A=0}}function gs(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=da(_(u.Da,u),Go(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=da(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),vi(this),zo(this))};function yl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function zo(u){u.g=new $n(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=jt(u.na);rt(p,"RID","rpc"),rt(p,"SID",u.M),rt(p,"AID",u.K),rt(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(p,"TO",u.ia),rt(p,"TYPE","xmlhttp"),ps(u,p),u.u&&u.o&&hs(p,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=cs(jt(p)),b.u=null,b.R=!0,Xs(b,u)}r.Va=function(){this.C!=null&&(this.C=null,vi(this),gs(this),Dt(19))};function nr(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Po(u,p){var b=null;if(u.g==p){nr(u),yl(u),u.g=null;var w=2}else if(ba(u.h,p))b=p.G,rl(u.h,p),w=1;else return;if(u.I!=0){if(p.o)if(w==1){b=p.u?p.u.length:0,p=Date.now()-p.F;var q=u.D;w=Qs(),$e(w,new ha(w,b)),wa(u)}else Uo(u);else if(q=p.m,q==3||q==0&&p.X>0||!(w==1&&tr(u,p)||w==2&&gs(u)))switch(b&&b.length>0&&(p=u.h,p.i=p.i.concat(b)),q){case 1:Aa(u,5);break;case 4:Aa(u,10);break;case 3:Aa(u,6);break;default:Aa(u,2)}}}function Go(u,p){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*p}function Aa(u,p){if(u.j.info("Error code "+p),p==2){var b=_(u.bb,u),w=u.Ua;const q=!w;w=new Sn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qt(w,"https"),cs(w),q?Jn(w.toString(),b):hl(w.toString(),b)}else Dt(2);u.I=0,u.l&&u.l.pa(p),qo(u),er(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function qo(u){if(u.I=0,u.ja=[],u.l){const p=ll(u.h);(p.length!=0||u.i.length!=0)&&(B(u.ja,p),B(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function Ho(u,p,b){var w=b instanceof Sn?jt(b):new Sn(b);if(w.g!="")p&&(w.g=p+"."+w.g),fi(w,w.u);else{var q=h.location;w=q.protocol,p=p?p+"."+q.hostname:q.hostname,q=+q.port;const Y=new Sn(null);w&&Qt(Y,w),p&&(Y.g=p),q&&fi(Y,q),b&&(Y.h=b),w=Y}return b=u.G,p=u.wa,b&&p&&rt(w,b,p),rt(w,"VER",u.ka),ps(u,w),w}function Fo(u,p,b){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new ct(new Ea({ab:b})):new ct(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}r=Qo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function _i(){}_i.prototype.g=function(u,p){return new hn(u,p)};function hn(u,p){at.call(this),this.g=new yi(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!R(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ga(this)}T(hn,at),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){pl(this.g)},hn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=ua(u),u=b);p.i.push(new Vt(p.Ya++,u)),p.I==3&&wa(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,hn.Z.N.call(this)};function Xo(u){$t.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const b in p){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}T(Xo,$t);function Yo(){On.call(this),this.status=1}T(Yo,On);function Ga(u){this.g=u}T(Ga,Qo),Ga.prototype.ra=function(){$e(this.g,"a")},Ga.prototype.qa=function(u){$e(this.g,new Xo(u))},Ga.prototype.pa=function(u){$e(this.g,new Yo)},Ga.prototype.oa=function(){$e(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Lv=function(){return new _i},kv=function(){return Qs()},jv=wt,xd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,lu=ls,tl.COMPLETE="complete",Vv=tl,Fs.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",at.prototype.listen=at.prototype.J,to=Fs,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,Ov=ct}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const yy="@firebase/firestore",vy="4.9.2";class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let $r="12.3.0";const Bs=new Av("@firebase/firestore");function Or(){return Bs.logLevel}function _e(r,...t){if(Bs.logLevel<=Ke.DEBUG){const a=t.map(Hd);Bs.debug(`Firestore (${$r}): ${r}`,...a)}}function li(r,...t){if(Bs.logLevel<=Ke.ERROR){const a=t.map(Hd);Bs.error(`Firestore (${$r}): ${r}`,...a)}}function qr(r,...t){if(Bs.logLevel<=Ke.WARN){const a=t.map(Hd);Bs.warn(`Firestore (${$r}): ${r}`,...a)}}function Hd(r){if(typeof r=="string")return r;try{return(function(a){return JSON.stringify(a)})(r)}catch{return r}}function Re(r,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,Bv(r,s,a)}function Bv(r,t,a){let s=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(a!==void 0)try{s+=" CONTEXT: "+JSON.stringify(a)}catch{s+=" CONTEXT: "+a}throw li(s),new Error(s)}function st(r,t,a,s){let o="Unexpected state";typeof a=="string"?o=a:s=a,r||Bv(t,o,s)}function Ie(r,t){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Kr{constructor(t,a){super(t,a),this.code=t,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yi{constructor(){this.promise=new Promise(((t,a)=>{this.resolve=t,this.reject=a}))}}class Uv{constructor(t,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class PT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,a){t.enqueueRetryable((()=>a(on.UNAUTHENTICATED)))}shutdown(){}}class GT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,a){this.changeListener=a,t.enqueueRetryable((()=>a(this.token.user)))}shutdown(){this.changeListener=null}}class qT{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,a){st(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,a(y)):Promise.resolve();let c=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Yi,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=c;t.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Yi)}}),0),h()}getToken(){const t=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then((s=>this.i!==t?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new Uv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return st(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class HT{constructor(t,a,s){this.P=t,this.T=a,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FT{constructor(t,a,s){this.P=t,this.T=a,this.I=s}getToken(){return Promise.resolve(new HT(this.P,this.T,this.I))}start(t,a){t.enqueueRetryable((()=>a(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _y{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QT{constructor(t,a){this.V=a,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ST(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,a){st(this.o===void 0,3512);const s=c=>{c.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,_e("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?a(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const o=c=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _y(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((a=>a?(st(typeof a.token=="string",44558,{tokenResult:a}),this.m=a.token,new _y(a.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function XT(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(a);else for(let s=0;s<r;s++)a[s]=Math.floor(256*Math.random());return a}class Fd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=XT(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<a&&(s+=t.charAt(o[c]%62))}return s}}function Fe(r,t){return r<t?-1:r>t?1:0}function Ed(r,t){const a=Math.min(r.length,t.length);for(let s=0;s<a;s++){const o=r.charAt(s),c=t.charAt(s);if(o!==c)return id(o)===id(c)?Fe(o,c):id(o)?1:-1}return Fe(r.length,t.length)}const YT=55296,KT=57343;function id(r){const t=r.charCodeAt(0);return t>=YT&&t<=KT}function Hr(r,t,a){return r.length===t.length&&r.every(((s,o)=>a(s,t[o])))}const by="__name__";class Oa{constructor(t,a,s){a===void 0?a=0:a>t.length&&Re(637,{offset:a,range:t.length}),s===void 0?s=t.length-a:s>t.length-a&&Re(1746,{length:s,range:t.length-a}),this.segments=t,this.offset=a,this.len=s}get length(){return this.len}isEqual(t){return Oa.comparator(this,t)===0}child(t){const a=this.segments.slice(this.offset,this.limit());return t instanceof Oa?t.forEach((s=>{a.push(s)})):a.push(t),this.construct(a)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}forEach(t){for(let a=this.offset,s=this.limit();a<s;a++)t(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,a){const s=Math.min(t.length,a.length);for(let o=0;o<s;o++){const c=Oa.compareSegments(t.get(o),a.get(o));if(c!==0)return c}return Fe(t.length,a.length)}static compareSegments(t,a){const s=Oa.isNumericId(t),o=Oa.isNumericId(a);return s&&!o?-1:!s&&o?1:s&&o?Oa.extractNumericId(t).compare(Oa.extractNumericId(a)):Ed(t,a)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xi.fromString(t.substring(4,t.length-2))}}class pt extends Oa{construct(t,a,s){return new pt(t,a,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const a=[];for(const s of t){if(s.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);a.push(...s.split("/").filter((o=>o.length>0)))}return new pt(a)}static emptyPath(){return new pt([])}}const $T=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Oa{construct(t,a,s){return new sn(t,a,s)}static isValidIdentifier(t){return $T.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===by}static keyField(){return new sn([by])}static fromServerFormat(t){const a=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(s),s=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(c(),o++)}if(c(),h)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(a)}static emptyPath(){return new sn([])}}class we{constructor(t){this.path=t}static fromPath(t){return new we(pt.fromString(t))}static fromName(t){return new we(pt.fromString(t).popFirst(5))}static empty(){return new we(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,a){return pt.comparator(t.path,a.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new we(new pt(t.slice()))}}function zv(r,t,a){if(!a)throw new ge(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function ZT(r,t,a,s){if(t===!0&&s===!0)throw new ge(ee.INVALID_ARGUMENT,`${r} and ${a} cannot be used together.`)}function xy(r){if(!we.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ey(r){if(we.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Pv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ou(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Re(12329,{type:typeof r})}function bu(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Ou(r);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${a}`)}}return r}function JT(r,t){if(t<=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}function Gt(r,t){const a={typeString:r};return t&&(a.value=t),a}function Eo(r,t){if(!Pv(r))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let a;for(const s in t)if(t[s]){const o=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){a=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){a=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){a=`Expected '${s}' field to equal '${c.value}'`;break}}if(a)throw new ge(ee.INVALID_ARGUMENT,a);return!0}const Ty=-62135596800,Sy=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(t){return dt.fromMillis(t.getTime())}static fromMillis(t){const a=Math.floor(t/1e3),s=Math.floor((t-1e3*a)*Sy);return new dt(a,s)}constructor(t,a){if(this.seconds=t,this.nanoseconds=a,a<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(t<Ty)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sy}_compareTo(t){return this.seconds===t.seconds?Fe(this.nanoseconds,t.nanoseconds):Fe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Eo(t,dt._jsonSchema))return new dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ty;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Gt("string",dt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};class Me{static fromTimestamp(t){return new Me(t)}static min(){return new Me(new dt(0,0))}static max(){return new Me(new dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const po=-1;function WT(r,t){const a=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(s===1e9?new dt(a+1,0):new dt(a,s));return new $i(o,we.empty(),t)}function e2(r){return new $i(r.readTime,r.key,po)}class $i{constructor(t,a,s){this.readTime=t,this.documentKey=a,this.largestBatchId=s}static min(){return new $i(Me.min(),we.empty(),po)}static max(){return new $i(Me.max(),we.empty(),po)}}function t2(r,t){let a=r.readTime.compareTo(t.readTime);return a!==0?a:(a=we.comparator(r.documentKey,t.documentKey),a!==0?a:Fe(r.largestBatchId,t.largestBatchId))}const n2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Zr(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==n2)throw r;_e("LocalStore","Unexpectedly lost primary lease")}class te{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)}),(a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)}))}catch(t){return this.next(void 0,t)}next(t,a){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(t,this.result):new te(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(a,c).next(s,o)}}))}toPromise(){return new Promise(((t,a)=>{this.next(t,a)}))}wrapUserFunction(t){try{const a=t();return a instanceof te?a:te.resolve(a)}catch(a){return te.reject(a)}}wrapSuccess(t,a){return t?this.wrapUserFunction((()=>t(a))):te.resolve(a)}wrapFailure(t,a){return t?this.wrapUserFunction((()=>t(a))):te.reject(a)}static resolve(t){return new te(((a,s)=>{a(t)}))}static reject(t){return new te(((a,s)=>{s(t)}))}static waitFor(t){return new te(((a,s)=>{let o=0,c=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++c,h&&c===o&&a()}),(y=>s(y)))})),h=!0,c===o&&a()}))}static or(t){let a=te.resolve(!1);for(const s of t)a=a.next((o=>o?te.resolve(o):s()));return a}static forEach(t,a){const s=[];return t.forEach(((o,c)=>{s.push(a.call(this,o,c))})),this.waitFor(s)}static mapArray(t,a){return new te(((s,o)=>{const c=t.length,h=new Array(c);let m=0;for(let y=0;y<c;y++){const _=y;a(t[_]).next((x=>{h[_]=x,++m,m===c&&s(h)}),(x=>o(x)))}}))}static doWhile(t,a){return new te(((s,o)=>{const c=()=>{t()===!0?a().next((()=>{c()}),o):s()};c()}))}}function i2(r){const t=r.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function Jr(r){return r.name==="IndexedDbTransactionError"}class Vu{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>a.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Vu.ce=-1;const Qd=-1;function ju(r){return r==null}function xu(r){return r===0&&1/r==-1/0}function s2(r){return typeof r=="number"&&Number.isInteger(r)&&!xu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Gv="";function r2(r){let t="";for(let a=0;a<r.length;a++)t.length>0&&(t=wy(t)),t=l2(r.get(a),t);return wy(t)}function l2(r,t){let a=t;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":a+="";break;case Gv:a+="";break;default:a+=c}}return a}function wy(r){return r+Gv+""}function Ay(r){let t=0;for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t++;return t}function zs(r,t){for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&t(a,r[a])}function qv(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class xt{constructor(t,a){this.comparator=t,this.root=a||an.EMPTY}insert(t,a){return new xt(this.comparator,this.root.insert(t,a,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let a=this.root;for(;!a.isEmpty();){const s=this.comparator(t,a.key);if(s===0)return a.value;s<0?a=a.left:s>0&&(a=a.right)}return null}indexOf(t){let a=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return a+s.left.size;o<0?s=s.left:(a+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((a,s)=>(t(a,s),!1)))}toString(){const t=[];return this.inorderTraversal(((a,s)=>(t.push(`${a}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tu(this.root,t,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tu(this.root,t,this.comparator,!0)}}class tu{constructor(t,a,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=a?s(t.key,a):1,a&&o&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const a={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,a,s,o,c){this.key=t,this.value=a,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=c??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,a,s,o,c){return new an(t??this.key,a??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,a,s){let o=this;const c=s(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,a,s),null):c===0?o.copy(null,a,null,null,null):o.copy(null,null,null,null,o.right.insert(t,a,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,a){let s,o=this;if(a(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,a),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),a(t,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,a))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,a)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Re(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(t,a,s,o,c){return this}insert(t,a,s){return new an(t,a)}remove(t,a){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((a,s)=>(t(a),!1)))}forEachInRange(t,a){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;a(o.key)}}forEachWhile(t,a){let s;for(s=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const a=this.data.getIteratorFrom(t);return a.hasNext()?a.getNext().key:null}getIterator(){return new Cy(this.data.getIterator())}getIteratorFrom(t){return new Cy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let a=this;return a.size<t.size&&(a=t,t=this),t.forEach((s=>{a=a.add(s)})),a}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const a=this.data.getIterator(),s=t.data.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((a=>{t.push(a)})),t}toString(){const t=[];return this.forEach((a=>t.push(a))),"SortedSet("+t.toString()+")"}copy(t){const a=new Ht(this.comparator);return a.data=t,a}}class Cy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ra{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new ra([])}unionWith(t){let a=new Ht(sn.comparator);for(const s of this.fields)a=a.add(s);for(const s of t)a=a.add(s);return new ra(a.toArray())}covers(t){for(const a of this.fields)if(a.isPrefixOf(t))return!0;return!1}isEqual(t){return Hr(this.fields,t.fields,((a,s)=>a.isEqual(s)))}}class Hv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const a=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Hv("Invalid base64 string: "+c):c}})(t);return new rn(a)}static fromUint8Array(t){const a=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(t);return new rn(a)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(a){return btoa(a)})(this.binaryString)}toUint8Array(){return(function(a){const s=new Uint8Array(a.length);for(let o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Fe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const o2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(r){if(st(!!r,39018),typeof r=="string"){let t=0;const a=o2.exec(r);if(st(!!a,46558,{timestamp:r}),a[1]){let o=a[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ji(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}const Fv="server_timestamp",Qv="__type__",Xv="__previous_value__",Yv="__local_write_time__";function Xd(r){return(r?.mapValue?.fields||{})[Qv]?.stringValue===Fv}function ku(r){const t=r.mapValue.fields[Xv];return Xd(t)?ku(t):t}function go(r){const t=Zi(r.mapValue.fields[Yv].timestampValue);return new dt(t.seconds,t.nanos)}class c2{constructor(t,a,s,o,c,h,m,y,_,x){this.databaseId=t,this.appId=a,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=x}}const Eu="(default)";class yo{constructor(t,a){this.projectId=t,this.database=a||Eu}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database===Eu}isEqual(t){return t instanceof yo&&t.projectId===this.projectId&&t.database===this.database}}const Kv="__type__",u2="__max__",nu={mapValue:{}},$v="__vector__",Tu="value";function Wi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Xd(r)?4:h2(r)?9007199254740991:f2(r)?10:11:Re(28295,{value:r})}function Ba(r,t){if(r===t)return!0;const a=Wi(r);if(a!==Wi(t))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return go(r).isEqual(go(t));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Zi(o.timestampValue),m=Zi(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(o,c){return Ji(o.bytesValue).isEqual(Ji(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(r,t);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Rt(o.doubleValue),m=Rt(c.doubleValue);return h===m?xu(h)===xu(m):isNaN(h)&&isNaN(m)}return!1})(r,t);case 9:return Hr(r.arrayValue.values||[],t.arrayValue.values||[],Ba);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Ay(h)!==Ay(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!Ba(h[y],m[y])))return!1;return!0})(r,t);default:return Re(52216,{left:r})}}function vo(r,t){return(r.values||[]).find((a=>Ba(a,t)))!==void 0}function Fr(r,t){if(r===t)return 0;const a=Wi(r),s=Wi(t);if(a!==s)return Fe(a,s);switch(a){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,t.booleanValue);case 2:return(function(c,h){const m=Rt(c.integerValue||c.doubleValue),y=Rt(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(r,t);case 3:return Ny(r.timestampValue,t.timestampValue);case 4:return Ny(go(r),go(t));case 5:return Ed(r.stringValue,t.stringValue);case 6:return(function(c,h){const m=Ji(c),y=Ji(h);return m.compareTo(y)})(r.bytesValue,t.bytesValue);case 7:return(function(c,h){const m=c.split("/"),y=h.split("/");for(let _=0;_<m.length&&_<y.length;_++){const x=Fe(m[_],y[_]);if(x!==0)return x}return Fe(m.length,y.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,h){const m=Fe(Rt(c.latitude),Rt(h.latitude));return m!==0?m:Fe(Rt(c.longitude),Rt(h.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Ry(r.arrayValue,t.arrayValue);case 10:return(function(c,h){const m=c.fields||{},y=h.fields||{},_=m[Tu]?.arrayValue,x=y[Tu]?.arrayValue,T=Fe(_?.values?.length||0,x?.values?.length||0);return T!==0?T:Ry(_,x)})(r.mapValue,t.mapValue);case 11:return(function(c,h){if(c===nu.mapValue&&h===nu.mapValue)return 0;if(c===nu.mapValue)return 1;if(h===nu.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),_=h.fields||{},x=Object.keys(_);y.sort(),x.sort();for(let T=0;T<y.length&&T<x.length;++T){const A=Ed(y[T],x[T]);if(A!==0)return A;const U=Fr(m[y[T]],_[x[T]]);if(U!==0)return U}return Fe(y.length,x.length)})(r.mapValue,t.mapValue);default:throw Re(23264,{he:a})}}function Ny(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Fe(r,t);const a=Zi(r),s=Zi(t),o=Fe(a.seconds,s.seconds);return o!==0?o:Fe(a.nanos,s.nanos)}function Ry(r,t){const a=r.values||[],s=t.values||[];for(let o=0;o<a.length&&o<s.length;++o){const c=Fr(a[o],s[o]);if(c)return c}return Fe(a.length,s.length)}function Qr(r){return Td(r)}function Td(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(a){const s=Zi(a);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(a){return Ji(a).toBase64()})(r.bytesValue):"referenceValue"in r?(function(a){return we.fromName(a).toString()})(r.referenceValue):"geoPointValue"in r?(function(a){return`geo(${a.latitude},${a.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(a){let s="[",o=!0;for(const c of a.values||[])o?o=!1:s+=",",s+=Td(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(a){const s=Object.keys(a.fields||{}).sort();let o="{",c=!0;for(const h of s)c?c=!1:o+=",",o+=`${h}:${Td(a.fields[h])}`;return o+"}"})(r.mapValue):Re(61005,{value:r})}function ou(r){switch(Wi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ku(r);return t?16+ou(t):16;case 5:return 2*r.stringValue.length;case 6:return Ji(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+ou(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return zs(s.fields,((c,h)=>{o+=c.length+ou(h)})),o})(r.mapValue);default:throw Re(13486,{value:r})}}function My(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Sd(r){return!!r&&"integerValue"in r}function Yd(r){return!!r&&"arrayValue"in r}function Iy(r){return!!r&&"nullValue"in r}function Dy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function cu(r){return!!r&&"mapValue"in r}function f2(r){return(r?.mapValue?.fields||{})[Kv]?.stringValue===$v}function ro(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return zs(r.mapValue.fields,((a,s)=>t.mapValue.fields[a]=ro(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let a=0;a<(r.arrayValue.values||[]).length;++a)t.arrayValue.values[a]=ro(r.arrayValue.values[a]);return t}return{...r}}function h2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===u2}class Qn{constructor(t){this.value=t}static empty(){return new Qn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let a=this.value;for(let s=0;s<t.length-1;++s)if(a=(a.mapValue.fields||{})[t.get(s)],!cu(a))return null;return a=(a.mapValue.fields||{})[t.lastSegment()],a||null}}set(t,a){this.getFieldsMap(t.popLast())[t.lastSegment()]=ro(a)}setAll(t){let a=sn.emptyPath(),s={},o=[];t.forEach(((h,m)=>{if(!a.isImmediateParentOf(m)){const y=this.getFieldsMap(a);this.applyChanges(y,s,o),s={},o=[],a=m.popLast()}h?s[m.lastSegment()]=ro(h):o.push(m.lastSegment())}));const c=this.getFieldsMap(a);this.applyChanges(c,s,o)}delete(t){const a=this.field(t.popLast());cu(a)&&a.mapValue.fields&&delete a.mapValue.fields[t.lastSegment()]}isEqual(t){return Ba(this.value,t.value)}getFieldsMap(t){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=a.mapValue.fields[t.get(s)];cu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},a.mapValue.fields[t.get(s)]=o),a=o}return a.mapValue.fields}applyChanges(t,a,s){zs(a,((o,c)=>t[o]=c));for(const o of s)delete t[o]}clone(){return new Qn(ro(this.value))}}function Zv(r){const t=[];return zs(r.fields,((a,s)=>{const o=new sn([a]);if(cu(s)){const c=Zv(s.mapValue).fields;if(c.length===0)t.push(o);else for(const h of c)t.push(o.child(h))}else t.push(o)})),new ra(t)}class cn{constructor(t,a,s,o,c,h,m){this.key=t,this.documentType=a,this.version=s,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Me.min(),Me.min(),Me.min(),Qn.empty(),0)}static newFoundDocument(t,a,s,o){return new cn(t,1,a,Me.min(),s,o,0)}static newNoDocument(t,a){return new cn(t,2,a,Me.min(),Me.min(),Qn.empty(),0)}static newUnknownDocument(t,a){return new cn(t,3,a,Me.min(),Me.min(),Qn.empty(),2)}convertToFoundDocument(t,a){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Su{constructor(t,a){this.position=t,this.inclusive=a}}function Oy(r,t,a){let s=0;for(let o=0;o<r.position.length;o++){const c=t[o],h=r.position[o];if(c.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),a.key):s=Fr(h,a.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Vy(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let a=0;a<r.position.length;a++)if(!Ba(r.position[a],t.position[a]))return!1;return!0}class _o{constructor(t,a="asc"){this.field=t,this.dir=a}}function d2(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class Jv{}class Pt extends Jv{constructor(t,a,s){super(),this.field=t,this.op=a,this.value=s}static create(t,a,s){return t.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(t,a,s):new p2(t,a,s):a==="array-contains"?new v2(t,s):a==="in"?new _2(t,s):a==="not-in"?new b2(t,s):a==="array-contains-any"?new x2(t,s):new Pt(t,a,s)}static createKeyFieldInFilter(t,a,s){return a==="in"?new g2(t,s):new y2(t,s)}matches(t){const a=t.data.field(this.field);return this.op==="!="?a!==null&&a.nullValue===void 0&&this.matchesComparison(Fr(a,this.value)):a!==null&&Wi(this.value)===Wi(a)&&this.matchesComparison(Fr(a,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class la extends Jv{constructor(t,a){super(),this.filters=t,this.op=a,this.Pe=null}static create(t,a){return new la(t,a)}matches(t){return Wv(this)?this.filters.find((a=>!a.matches(t)))===void 0:this.filters.find((a=>a.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,a)=>t.concat(a.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wv(r){return r.op==="and"}function e_(r){return m2(r)&&Wv(r)}function m2(r){for(const t of r.filters)if(t instanceof la)return!1;return!0}function wd(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+Qr(r.value);if(e_(r))return r.filters.map((t=>wd(t))).join(",");{const t=r.filters.map((a=>wd(a))).join(",");return`${r.op}(${t})`}}function t_(r,t){return r instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&Ba(s.value,o.value)})(r,t):r instanceof la?(function(s,o){return o instanceof la&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,h,m)=>c&&t_(h,o.filters[m])),!0):!1})(r,t):void Re(19439)}function n_(r){return r instanceof Pt?(function(a){return`${a.field.canonicalString()} ${a.op} ${Qr(a.value)}`})(r):r instanceof la?(function(a){return a.op.toString()+" {"+a.getFilters().map(n_).join(" ,")+"}"})(r):"Filter"}class p2 extends Pt{constructor(t,a,s){super(t,a,s),this.key=we.fromName(s.referenceValue)}matches(t){const a=we.comparator(t.key,this.key);return this.matchesComparison(a)}}class g2 extends Pt{constructor(t,a){super(t,"in",a),this.keys=a_("in",a)}matches(t){return this.keys.some((a=>a.isEqual(t.key)))}}class y2 extends Pt{constructor(t,a){super(t,"not-in",a),this.keys=a_("not-in",a)}matches(t){return!this.keys.some((a=>a.isEqual(t.key)))}}function a_(r,t){return(t.arrayValue?.values||[]).map((a=>we.fromName(a.referenceValue)))}class v2 extends Pt{constructor(t,a){super(t,"array-contains",a)}matches(t){const a=t.data.field(this.field);return Yd(a)&&vo(a.arrayValue,this.value)}}class _2 extends Pt{constructor(t,a){super(t,"in",a)}matches(t){const a=t.data.field(this.field);return a!==null&&vo(this.value.arrayValue,a)}}class b2 extends Pt{constructor(t,a){super(t,"not-in",a)}matches(t){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=t.data.field(this.field);return a!==null&&a.nullValue===void 0&&!vo(this.value.arrayValue,a)}}class x2 extends Pt{constructor(t,a){super(t,"array-contains-any",a)}matches(t){const a=t.data.field(this.field);return!(!Yd(a)||!a.arrayValue.values)&&a.arrayValue.values.some((s=>vo(this.value.arrayValue,s)))}}class E2{constructor(t,a=null,s=[],o=[],c=null,h=null,m=null){this.path=t,this.collectionGroup=a,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function jy(r,t=null,a=[],s=[],o=null,c=null,h=null){return new E2(r,t,a,s,o,c,h)}function Kd(r){const t=Ie(r);if(t.Te===null){let a=t.path.canonicalString();t.collectionGroup!==null&&(a+="|cg:"+t.collectionGroup),a+="|f:",a+=t.filters.map((s=>wd(s))).join(","),a+="|ob:",a+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ju(t.limit)||(a+="|l:",a+=t.limit),t.startAt&&(a+="|lb:",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Qr(s))).join(",")),t.endAt&&(a+="|ub:",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Qr(s))).join(",")),t.Te=a}return t.Te}function $d(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<r.orderBy.length;a++)if(!d2(r.orderBy[a],t.orderBy[a]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let a=0;a<r.filters.length;a++)if(!t_(r.filters[a],t.filters[a]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Vy(r.startAt,t.startAt)&&Vy(r.endAt,t.endAt)}function Ad(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Wr{constructor(t,a=null,s=[],o=[],c=null,h="F",m=null,y=null){this.path=t,this.collectionGroup=a,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function T2(r,t,a,s,o,c,h,m){return new Wr(r,t,a,s,o,c,h,m)}function i_(r){return new Wr(r)}function ky(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function s_(r){return r.collectionGroup!==null}function lo(r){const t=Ie(r);if(t.Ie===null){t.Ie=[];const a=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),a.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ht(sn.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(t).forEach((c=>{a.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new _o(c,s))})),a.has(sn.keyField().canonicalString())||t.Ie.push(new _o(sn.keyField(),s))}return t.Ie}function Va(r){const t=Ie(r);return t.Ee||(t.Ee=S2(t,lo(r))),t.Ee}function S2(r,t){if(r.limitType==="F")return jy(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new _o(o.field,c)}));const a=r.endAt?new Su(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Su(r.startAt.position,r.startAt.inclusive):null;return jy(r.path,r.collectionGroup,t,r.filters,r.limit,a,s)}}function Cd(r,t){const a=r.filters.concat([t]);return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),a,r.limit,r.limitType,r.startAt,r.endAt)}function wu(r,t,a){return new Wr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,a,r.startAt,r.endAt)}function Lu(r,t){return $d(Va(r),Va(t))&&r.limitType===t.limitType}function r_(r){return`${Kd(Va(r))}|lt:${r.limitType}`}function Vr(r){return`Query(target=${(function(a){let s=a.path.canonicalString();return a.collectionGroup!==null&&(s+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(s+=`, filters: [${a.filters.map((o=>n_(o))).join(", ")}]`),ju(a.limit)||(s+=", limit: "+a.limit),a.orderBy.length>0&&(s+=`, orderBy: [${a.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),a.startAt&&(s+=", startAt: ",s+=a.startAt.inclusive?"b:":"a:",s+=a.startAt.position.map((o=>Qr(o))).join(",")),a.endAt&&(s+=", endAt: ",s+=a.endAt.inclusive?"a:":"b:",s+=a.endAt.position.map((o=>Qr(o))).join(",")),`Target(${s})`})(Va(r))}; limitType=${r.limitType})`}function Bu(r,t){return t.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):we.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,o){for(const c of lo(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,t)&&(function(s,o){return!(s.startAt&&!(function(h,m,y){const _=Oy(h,m,y);return h.inclusive?_<=0:_<0})(s.startAt,lo(s),o)||s.endAt&&!(function(h,m,y){const _=Oy(h,m,y);return h.inclusive?_>=0:_>0})(s.endAt,lo(s),o))})(r,t)}function w2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function l_(r){return(t,a)=>{let s=!1;for(const o of lo(r)){const c=A2(o,t,a);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function A2(r,t,a){const s=r.field.isKeyField()?we.comparator(t.key,a.key):(function(c,h,m){const y=h.data.field(c),_=m.data.field(c);return y!==null&&_!==null?Fr(y,_):Re(42886)})(r.field,t,a);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:r.dir})}}class Ps{constructor(t,a){this.mapKeyFn=t,this.equalsFn=a,this.inner={},this.innerSize=0}get(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,t))return c}}has(t){return this.get(t)!==void 0}set(t,a){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,a]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return void(o[c]=[t,a]);o.push([t,a]),this.innerSize++}delete(t){const a=this.mapKeyFn(t),s=this.inner[a];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[a]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){zs(this.inner,((a,s)=>{for(const[o,c]of s)t(o,c)}))}isEmpty(){return qv(this.inner)}size(){return this.innerSize}}const C2=new xt(we.comparator);function oi(){return C2}const o_=new xt(we.comparator);function no(...r){let t=o_;for(const a of r)t=t.insert(a.key,a);return t}function c_(r){let t=o_;return r.forEach(((a,s)=>t=t.insert(a,s.overlayedDocument))),t}function ks(){return oo()}function u_(){return oo()}function oo(){return new Ps((r=>r.toString()),((r,t)=>r.isEqual(t)))}const N2=new xt(we.comparator),R2=new Ht(we.comparator);function Qe(...r){let t=R2;for(const a of r)t=t.add(a);return t}const M2=new Ht(Fe);function I2(){return M2}function Zd(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xu(t)?"-0":t}}function f_(r){return{integerValue:""+r}}function D2(r,t){return s2(t)?f_(t):Zd(r,t)}class Uu{constructor(){this._=void 0}}function O2(r,t,a){return r instanceof Au?(function(o,c){const h={fields:{[Qv]:{stringValue:Fv},[Yv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Xd(c)&&(c=ku(c)),c&&(h.fields[Xv]=c),{mapValue:h}})(a,t):r instanceof bo?d_(r,t):r instanceof xo?m_(r,t):(function(o,c){const h=h_(o,c),m=Ly(h)+Ly(o.Ae);return Sd(h)&&Sd(o.Ae)?f_(m):Zd(o.serializer,m)})(r,t)}function V2(r,t,a){return r instanceof bo?d_(r,t):r instanceof xo?m_(r,t):a}function h_(r,t){return r instanceof Cu?(function(s){return Sd(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Au extends Uu{}class bo extends Uu{constructor(t){super(),this.elements=t}}function d_(r,t){const a=p_(t);for(const s of r.elements)a.some((o=>Ba(o,s)))||a.push(s);return{arrayValue:{values:a}}}class xo extends Uu{constructor(t){super(),this.elements=t}}function m_(r,t){let a=p_(t);for(const s of r.elements)a=a.filter((o=>!Ba(o,s)));return{arrayValue:{values:a}}}class Cu extends Uu{constructor(t,a){super(),this.serializer=t,this.Ae=a}}function Ly(r){return Rt(r.integerValue||r.doubleValue)}function p_(r){return Yd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function j2(r,t){return r.field.isEqual(t.field)&&(function(s,o){return s instanceof bo&&o instanceof bo||s instanceof xo&&o instanceof xo?Hr(s.elements,o.elements,Ba):s instanceof Cu&&o instanceof Cu?Ba(s.Ae,o.Ae):s instanceof Au&&o instanceof Au})(r.transform,t.transform)}class k2{constructor(t,a){this.version=t,this.transformResults=a}}class si{constructor(t,a){this.updateTime=t,this.exists=a}static none(){return new si}static exists(t){return new si(void 0,t)}static updateTime(t){return new si(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function uu(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class zu{}function g_(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new v_(r.key,si.none()):new To(r.key,r.data,si.none());{const a=r.data,s=Qn.empty();let o=new Ht(sn.comparator);for(let c of t.fields)if(!o.has(c)){let h=a.field(c);h===null&&c.length>1&&(c=c.popLast(),h=a.field(c)),h===null?s.delete(c):s.set(c,h),o=o.add(c)}return new Gs(r.key,s,new ra(o.toArray()),si.none())}}function L2(r,t,a){r instanceof To?(function(o,c,h){const m=o.value.clone(),y=Uy(o.fieldTransforms,c,h.transformResults);m.setAll(y),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,t,a):r instanceof Gs?(function(o,c,h){if(!uu(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=Uy(o.fieldTransforms,c,h.transformResults),y=c.data;y.setAll(y_(o)),y.setAll(m),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,t,a):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,a)}function co(r,t,a,s){return r instanceof To?(function(c,h,m,y){if(!uu(c.precondition,h))return m;const _=c.value.clone(),x=zy(c.fieldTransforms,y,h);return _.setAll(x),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(r,t,a,s):r instanceof Gs?(function(c,h,m,y){if(!uu(c.precondition,h))return m;const _=zy(c.fieldTransforms,y,h),x=h.data;return x.setAll(y_(c)),x.setAll(_),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(r,t,a,s):(function(c,h,m){return uu(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,t,a)}function B2(r,t){let a=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),c=h_(s.transform,o||null);c!=null&&(a===null&&(a=Qn.empty()),a.set(s.field,c))}return a||null}function By(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Hr(s,o,((c,h)=>j2(c,h)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class To extends zu{constructor(t,a,s,o=[]){super(),this.key=t,this.value=a,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends zu{constructor(t,a,s,o,c=[]){super(),this.key=t,this.data=a,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function y_(r){const t=new Map;return r.fieldMask.fields.forEach((a=>{if(!a.isEmpty()){const s=r.data.field(a);t.set(a,s)}})),t}function Uy(r,t,a){const s=new Map;st(r.length===a.length,32656,{Re:a.length,Ve:r.length});for(let o=0;o<a.length;o++){const c=r[o],h=c.transform,m=t.data.field(c.field);s.set(c.field,V2(h,m,a[o]))}return s}function zy(r,t,a){const s=new Map;for(const o of r){const c=o.transform,h=a.data.field(o.field);s.set(o.field,O2(c,h,t))}return s}class v_ extends zu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U2 extends zu{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class z2{constructor(t,a,s,o){this.batchId=t,this.localWriteTime=a,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,a){const s=a.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(t.key)&&L2(c,t,s[o])}}applyToLocalView(t,a){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(a=co(s,t,a,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(a=co(s,t,a,this.localWriteTime));return a}applyToLocalDocumentSet(t,a){const s=u_();return this.mutations.forEach((o=>{const c=t.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=a.has(o.key)?null:m;const y=g_(h,m);y!==null&&s.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Me.min())})),s}keys(){return this.mutations.reduce(((t,a)=>t.add(a.key)),Qe())}isEqual(t){return this.batchId===t.batchId&&Hr(this.mutations,t.mutations,((a,s)=>By(a,s)))&&Hr(this.baseMutations,t.baseMutations,((a,s)=>By(a,s)))}}class Jd{constructor(t,a,s,o){this.batch=t,this.commitVersion=a,this.mutationResults=s,this.docVersions=o}static from(t,a,s){st(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return N2})();const c=t.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new Jd(t,a,s,o)}}class P2{constructor(t,a){this.largestBatchId=t,this.mutation=a}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class G2{constructor(t,a){this.count=t,this.unchangedNames=a}}var zt,Ye;function q2(r){switch(r){case ee.OK:return Re(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Re(15467,{code:r})}}function __(r){if(r===void 0)return li("GRPC error has no .code"),ee.UNKNOWN;switch(r){case zt.OK:return ee.OK;case zt.CANCELLED:return ee.CANCELLED;case zt.UNKNOWN:return ee.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ee.INTERNAL;case zt.UNAVAILABLE:return ee.UNAVAILABLE;case zt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case zt.NOT_FOUND:return ee.NOT_FOUND;case zt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case zt.ABORTED:return ee.ABORTED;case zt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case zt.DATA_LOSS:return ee.DATA_LOSS;default:return Re(39323,{code:r})}}(Ye=zt||(zt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function H2(){return new TextEncoder}const F2=new Xi([4294967295,4294967295],0);function Py(r){const t=H2().encode(r),a=new Dv;return a.update(t),new Uint8Array(a.digest())}function Gy(r){const t=new DataView(r.buffer),a=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Xi([a,s],0),new Xi([o,c],0)]}class Wd{constructor(t,a,s){if(this.bitmap=t,this.padding=a,this.hashCount=s,a<0||a>=8)throw new ao(`Invalid padding: ${a}`);if(s<0)throw new ao(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${s}`);if(t.length===0&&a!==0)throw new ao(`Invalid padding when bitmap length is 0: ${a}`);this.ge=8*t.length-a,this.pe=Xi.fromNumber(this.ge)}ye(t,a,s){let o=t.add(a.multiply(Xi.fromNumber(s)));return o.compare(F2)===1&&(o=new Xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const a=Py(t),[s,o]=Gy(a);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);if(!this.we(h))return!1}return!0}static create(t,a,s){const o=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),h=new Wd(c,o,a);return s.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const a=Py(t),[s,o]=Gy(a);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);this.Se(h)}}Se(t){const a=Math.floor(t/8),s=t%8;this.bitmap[a]|=1<<s}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pu{constructor(t,a,s,o,c){this.snapshotVersion=t,this.targetChanges=a,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,a,s){const o=new Map;return o.set(t,So.createSynthesizedTargetChangeForCurrentChange(t,a,s)),new Pu(Me.min(),o,new xt(Fe),oi(),Qe())}}class So{constructor(t,a,s,o,c){this.resumeToken=t,this.current=a,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,a,s){return new So(s,a,Qe(),Qe(),Qe())}}class fu{constructor(t,a,s,o){this.be=t,this.removedTargetIds=a,this.key=s,this.De=o}}class b_{constructor(t,a){this.targetId=t,this.Ce=a}}class x_{constructor(t,a,s=rn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=a,this.resumeToken=s,this.cause=o}}class qy{constructor(){this.ve=0,this.Fe=Hy(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Qe(),a=Qe(),s=Qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:t=t.add(o);break;case 2:a=a.add(o);break;case 1:s=s.add(o);break;default:Re(38017,{changeType:c})}})),new So(this.Me,this.xe,t,a,s)}qe(){this.Oe=!1,this.Fe=Hy()}Qe(t,a){this.Oe=!0,this.Fe=this.Fe.insert(t,a)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Q2{constructor(t){this.Ge=t,this.ze=new Map,this.je=oi(),this.Je=au(),this.He=au(),this.Ye=new xt(Fe)}Ze(t){for(const a of t.be)t.De&&t.De.isFoundDocument()?this.Xe(a,t.De):this.et(a,t.key,t.De);for(const a of t.removedTargetIds)this.et(a,t.key,t.De)}tt(t){this.forEachTarget(t,(a=>{const s=this.nt(a);switch(t.state){case 0:this.rt(a)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(a);break;case 3:this.rt(a)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(a)&&(this.it(a),s.Le(t.resumeToken));break;default:Re(56790,{state:t.state})}}))}forEachTarget(t,a){t.targetIds.length>0?t.targetIds.forEach(a):this.ze.forEach(((s,o)=>{this.rt(o)&&a(o)}))}st(t){const a=t.targetId,s=t.Ce.count,o=this.ot(a);if(o){const c=o.target;if(Ad(c))if(s===0){const h=new we(c.path);this.et(a,h,cn.newNoDocument(h,Me.min()))}else st(s===1,20013,{expectedCount:s});else{const h=this._t(a);if(h!==s){const m=this.ut(t),y=m?this.ct(m,t,h):1;if(y!==0){this.it(a);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(a,_)}}}}}ut(t){const a=t.Ce.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=a;let h,m;try{h=Ji(s).toUint8Array()}catch(y){if(y instanceof Hv)return qr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Wd(h,o,c)}catch(y){return qr(y instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(t,a,s){return a.Ce.count===s-this.Pt(t,a.targetId)?0:2}Pt(t,a){const s=this.Ge.getRemoteKeysForTarget(a);let o=0;return s.forEach((c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.et(a,c,null),o++)})),o}Tt(t){const a=new Map;this.ze.forEach(((c,h)=>{const m=this.ot(h);if(m){if(c.current&&Ad(m.target)){const y=new we(m.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,cn.newNoDocument(y,t))}c.Be&&(a.set(h,c.ke()),c.qe())}}));let s=Qe();this.He.forEach(((c,h)=>{let m=!0;h.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(t)));const o=new Pu(t,a,this.Ye,this.je,s);return this.je=oi(),this.Je=au(),this.He=au(),this.Ye=new xt(Fe),o}Xe(t,a){if(!this.rt(t))return;const s=this.Et(t,a.key)?2:0;this.nt(t).Qe(a.key,s),this.je=this.je.insert(a.key,a),this.Je=this.Je.insert(a.key,this.It(a.key).add(t)),this.He=this.He.insert(a.key,this.dt(a.key).add(t))}et(t,a,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,a)?o.Qe(a,1):o.$e(a),this.He=this.He.insert(a,this.dt(a).delete(t)),this.He=this.He.insert(a,this.dt(a).add(t)),s&&(this.je=this.je.insert(a,s))}removeTarget(t){this.ze.delete(t)}_t(t){const a=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+a.addedDocuments.size-a.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let a=this.ze.get(t);return a||(a=new qy,this.ze.set(t,a)),a}dt(t){let a=this.He.get(t);return a||(a=new Ht(Fe),this.He=this.He.insert(t,a)),a}It(t){let a=this.Je.get(t);return a||(a=new Ht(Fe),this.Je=this.Je.insert(t,a)),a}rt(t){const a=this.ot(t)!==null;return a||_e("WatchChangeAggregator","Detected inactive target",t),a}ot(t){const a=this.ze.get(t);return a&&a.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new qy),this.Ge.getRemoteKeysForTarget(t).forEach((a=>{this.et(t,a,null)}))}Et(t,a){return this.Ge.getRemoteKeysForTarget(t).has(a)}}function au(){return new xt(we.comparator)}function Hy(){return new xt(we.comparator)}const X2={asc:"ASCENDING",desc:"DESCENDING"},Y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"};class $2{constructor(t,a){this.databaseId=t,this.useProto3Json=a}}function Nd(r,t){return r.useProto3Json||ju(t)?t:{value:t}}function Nu(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E_(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Z2(r,t){return Nu(r,t.toTimestamp())}function ja(r){return st(!!r,49232),Me.fromTimestamp((function(a){const s=Zi(a);return new dt(s.seconds,s.nanos)})(r))}function em(r,t){return Rd(r,t).canonicalString()}function Rd(r,t){const a=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return t===void 0?a:a.child(t)}function T_(r){const t=pt.fromString(r);return st(N_(t),10190,{key:t.toString()}),t}function Md(r,t){return em(r.databaseId,t.path)}function sd(r,t){const a=T_(t);if(a.get(1)!==r.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+r.databaseId.projectId);if(a.get(3)!==r.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+r.databaseId.database);return new we(w_(a))}function S_(r,t){return em(r.databaseId,t)}function J2(r){const t=T_(r);return t.length===4?pt.emptyPath():w_(t)}function Id(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function w_(r){return st(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Fy(r,t,a){return{name:Md(r,t),fields:a.value.mapValue.fields}}function W2(r,t){let a;if("targetChange"in t){t.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Re(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=(function(_,x){return _.useProto3Json?(st(x===void 0||typeof x=="string",58123),rn.fromBase64String(x||"")):(st(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),rn.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(_){const x=_.code===void 0?ee.UNKNOWN:__(_.code);return new ge(x,_.message||"")})(h);a=new x_(s,o,c,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=sd(r,s.document.name),c=ja(s.document.updateTime),h=s.document.createTime?ja(s.document.createTime):Me.min(),m=new Qn({mapValue:{fields:s.document.fields}}),y=cn.newFoundDocument(o,c,h,m),_=s.targetIds||[],x=s.removedTargetIds||[];a=new fu(_,x,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=sd(r,s.document),c=s.readTime?ja(s.readTime):Me.min(),h=cn.newNoDocument(o,c),m=s.removedTargetIds||[];a=new fu([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=sd(r,s.document),c=s.removedTargetIds||[];a=new fu([],c,o,null)}else{if(!("filter"in t))return Re(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,h=new G2(o,c),m=s.targetId;a=new b_(m,h)}}return a}function eS(r,t){let a;if(t instanceof To)a={update:Fy(r,t.key,t.value)};else if(t instanceof v_)a={delete:Md(r,t.key)};else if(t instanceof Gs)a={update:Fy(r,t.key,t.data),updateMask:cS(t.fieldMask)};else{if(!(t instanceof U2))return Re(16599,{Vt:t.type});a={verify:Md(r,t.key)}}return t.fieldTransforms.length>0&&(a.updateTransforms=t.fieldTransforms.map((s=>(function(c,h){const m=h.transform;if(m instanceof Au)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof bo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xo)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Cu)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Re(20930,{transform:h.transform})})(0,s)))),t.precondition.isNone||(a.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:Z2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Re(27497)})(r,t.precondition)),a}function tS(r,t){return r&&r.length>0?(st(t!==void 0,14353),r.map((a=>(function(o,c){let h=o.updateTime?ja(o.updateTime):ja(c);return h.isEqual(Me.min())&&(h=ja(c)),new k2(h,o.transformResults||[])})(a,t)))):[]}function nS(r,t){return{documents:[S_(r,t.path)]}}function aS(r,t){const a={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),a.structuredQuery.from=[{collectionId:s.lastSegment()}]),a.parent=S_(r,o);const c=(function(_){if(_.length!==0)return C_(la.create(_,"and"))})(t.filters);c&&(a.structuredQuery.where=c);const h=(function(_){if(_.length!==0)return _.map((x=>(function(A){return{field:jr(A.field),direction:rS(A.dir)}})(x)))})(t.orderBy);h&&(a.structuredQuery.orderBy=h);const m=Nd(r,t.limit);return m!==null&&(a.structuredQuery.limit=m),t.startAt&&(a.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(a.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:a,parent:o}}function iS(r){let t=J2(r.parent);const a=r.structuredQuery,s=a.from?a.from.length:0;let o=null;if(s>0){st(s===1,65062);const x=a.from[0];x.allDescendants?o=x.collectionId:t=t.child(x.collectionId)}let c=[];a.where&&(c=(function(T){const A=A_(T);return A instanceof la&&e_(A)?A.getFilters():[A]})(a.where));let h=[];a.orderBy&&(h=(function(T){return T.map((A=>(function(B){return new _o(kr(B.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(A)))})(a.orderBy));let m=null;a.limit&&(m=(function(T){let A;return A=typeof T=="object"?T.value:T,ju(A)?null:A})(a.limit));let y=null;a.startAt&&(y=(function(T){const A=!!T.before,U=T.values||[];return new Su(U,A)})(a.startAt));let _=null;return a.endAt&&(_=(function(T){const A=!T.before,U=T.values||[];return new Su(U,A)})(a.endAt)),T2(t,o,h,c,m,"F",y,_)}function sS(r,t){const a=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(t.purpose);return a==null?null:{"goog-listen-tags":a}}function A_(r){return r.unaryFilter!==void 0?(function(a){switch(a.unaryFilter.op){case"IS_NAN":const s=kr(a.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=kr(a.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=kr(a.unaryFilter.field);return Pt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=kr(a.unaryFilter.field);return Pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(r):r.fieldFilter!==void 0?(function(a){return Pt.create(kr(a.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(a.fieldFilter.op),a.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(a){return la.create(a.compositeFilter.filters.map((s=>A_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(a.compositeFilter.op))})(r):Re(30097,{filter:r})}function rS(r){return X2[r]}function lS(r){return Y2[r]}function oS(r){return K2[r]}function jr(r){return{fieldPath:r.canonicalString()}}function kr(r){return sn.fromServerFormat(r.fieldPath)}function C_(r){return r instanceof Pt?(function(a){if(a.op==="=="){if(Dy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NAN"}};if(Iy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(Dy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NOT_NAN"}};if(Iy(a.value))return{unaryFilter:{field:jr(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(a.field),op:lS(a.op),value:a.value}}})(r):r instanceof la?(function(a){const s=a.getFilters().map((o=>C_(o)));return s.length===1?s[0]:{compositeFilter:{op:oS(a.op),filters:s}}})(r):Re(54877,{filter:r})}function cS(r){const t=[];return r.fields.forEach((a=>t.push(a.canonicalString()))),{fieldPaths:t}}function N_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Hi{constructor(t,a,s,o,c=Me.min(),h=Me.min(),m=rn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=a,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new Hi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,a){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class uS{constructor(t){this.yt=t}}function fS(r){const t=iS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wu(t,t.limit,"L"):t}class hS{constructor(){this.Cn=new dS}addToCollectionParentIndex(t,a){return this.Cn.add(a),te.resolve()}getCollectionParents(t,a){return te.resolve(this.Cn.getEntries(a))}addFieldIndex(t,a){return te.resolve()}deleteFieldIndex(t,a){return te.resolve()}deleteAllFieldIndexes(t){return te.resolve()}createTargetIndexes(t,a){return te.resolve()}getDocumentsMatchingTarget(t,a){return te.resolve(null)}getIndexType(t,a){return te.resolve(0)}getFieldIndexes(t,a){return te.resolve([])}getNextCollectionGroupToUpdate(t){return te.resolve(null)}getMinOffset(t,a){return te.resolve($i.min())}getMinOffsetFromCollectionGroup(t,a){return te.resolve($i.min())}updateCollectionGroup(t,a,s){return te.resolve()}updateIndexEntries(t,a){return te.resolve()}}class dS{constructor(){this.index={}}add(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a]||new Ht(pt.comparator),c=!o.has(s);return this.index[a]=o.add(s),c}has(t){const a=t.lastSegment(),s=t.popLast(),o=this.index[a];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ht(pt.comparator)).toArray()}}const Qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R_=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,a,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=a,this.maximumSequenceNumbersToCollect=s}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(R_,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xr(0)}static cr(){return new Xr(-1)}}const Xy="LruGarbageCollector",mS=1048576;function Yy([r,t],[a,s]){const o=Fe(r,a);return o===0?Fe(t,s):o}class pS{constructor(t){this.Ir=t,this.buffer=new Ht(Yy),this.Er=0}dr(){return++this.Er}Ar(t){const a=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(a);else{const s=this.buffer.last();Yy(a,s)<0&&(this.buffer=this.buffer.delete(s).add(a))}}get maxValue(){return this.buffer.last()[0]}}class gS{constructor(t,a,s){this.garbageCollector=t,this.asyncQueue=a,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){_e(Xy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(a){Jr(a)?_e(Xy,"Ignoring IndexedDB error during garbage collection: ",a):await Zr(a)}await this.Vr(3e5)}))}}class yS{constructor(t,a){this.mr=t,this.params=a}calculateTargetCount(t,a){return this.mr.gr(t).next((s=>Math.floor(a/100*s)))}nthSequenceNumber(t,a){if(a===0)return te.resolve(Vu.ce);const s=new pS(a);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,a,s){return this.mr.removeTargets(t,a,s)}removeOrphanedDocuments(t,a){return this.mr.removeOrphanedDocuments(t,a)}collect(t,a){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Qy)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qy):this.yr(t,a)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,a){let s,o,c,h,m,y,_;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,a)))).next((T=>(c=T,y=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(_=Date.now(),Or()<=Ke.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${T} documents in `+(_-y)+`ms
Total Duration: ${_-x}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T}))))}}function vS(r,t){return new yS(r,t)}class _S{constructor(){this.changes=new Ps((t=>t.toString()),((t,a)=>t.isEqual(a))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,a){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(a))}getEntry(t,a){this.assertNotApplied();const s=this.changes.get(a);return s!==void 0?te.resolve(s):this.getFromCache(t,a)}getEntries(t,a){return this.getAllFromCache(t,a)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class bS{constructor(t,a){this.overlayedDocument=t,this.mutatedFields=a}}class xS{constructor(t,a,s,o){this.remoteDocumentCache=t,this.mutationQueue=a,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,a){let s=null;return this.documentOverlayCache.getOverlay(t,a).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,a)))).next((o=>(s!==null&&co(s.mutation,o,ra.empty(),dt.now()),o)))}getDocuments(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.getLocalViewOfDocuments(t,s,Qe()).next((()=>s))))}getLocalViewOfDocuments(t,a,s=Qe()){const o=ks();return this.populateOverlays(t,o,a).next((()=>this.computeViews(t,a,o,s).next((c=>{let h=no();return c.forEach(((m,y)=>{h=h.insert(m,y.overlayedDocument)})),h}))))}getOverlayedDocuments(t,a){const s=ks();return this.populateOverlays(t,s,a).next((()=>this.computeViews(t,a,s,Qe())))}populateOverlays(t,a,s){const o=[];return s.forEach((c=>{a.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(t,o).next((c=>{c.forEach(((h,m)=>{a.set(h,m)}))}))}computeViews(t,a,s,o){let c=oi();const h=oo(),m=(function(){return oo()})();return a.forEach(((y,_)=>{const x=s.get(_.key);o.has(_.key)&&(x===void 0||x.mutation instanceof Gs)?c=c.insert(_.key,_):x!==void 0?(h.set(_.key,x.mutation.getFieldMask()),co(x.mutation,_,x.mutation.getFieldMask(),dt.now())):h.set(_.key,ra.empty())})),this.recalculateAndSaveOverlays(t,c).next((y=>(y.forEach(((_,x)=>h.set(_,x))),a.forEach(((_,x)=>m.set(_,new bS(x,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(t,a){const s=oo();let o=new xt(((h,m)=>h-m)),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,a).next((h=>{for(const m of h)m.keys().forEach((y=>{const _=a.get(y);if(_===null)return;let x=s.get(y)||ra.empty();x=m.applyToLocalView(_,x),s.set(y,x);const T=(o.get(m.batchId)||Qe()).add(y);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),_=y.key,x=y.value,T=u_();x.forEach((A=>{if(!c.has(A)){const U=g_(a.get(A),s.get(A));U!==null&&T.set(A,U),c=c.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(t,_,T))}return te.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,a){return this.remoteDocumentCache.getEntries(t,a).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,a,s,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(a)?this.getDocumentsMatchingDocumentQuery(t,a.path):s_(a)?this.getDocumentsMatchingCollectionGroupQuery(t,a,s,o):this.getDocumentsMatchingCollectionQuery(t,a,s,o)}getNextDocuments(t,a,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,a,s,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,a,s.largestBatchId,o-c.size):te.resolve(ks());let m=po,y=c;return h.next((_=>te.forEach(_,((x,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),c.get(x)?te.resolve():this.remoteDocumentCache.getEntry(t,x).next((A=>{y=y.insert(x,A)}))))).next((()=>this.populateOverlays(t,_,c))).next((()=>this.computeViews(t,y,_,Qe()))).next((x=>({batchId:m,changes:c_(x)})))))}))}getDocumentsMatchingDocumentQuery(t,a){return this.getDocument(t,new we(a)).next((s=>{let o=no();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,a,s,o){const c=a.collectionGroup;let h=no();return this.indexManager.getCollectionParents(t,c).next((m=>te.forEach(m,(y=>{const _=(function(T,A){return new Wr(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(a,y.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,s,o).next((x=>{x.forEach(((T,A)=>{h=h.insert(T,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,a,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(t,a.path,s.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,a,s,c,o)))).next((h=>{c.forEach(((y,_)=>{const x=_.getKey();h.get(x)===null&&(h=h.insert(x,cn.newInvalidDocument(x)))}));let m=no();return h.forEach(((y,_)=>{const x=c.get(y);x!==void 0&&co(x.mutation,_,ra.empty(),dt.now()),Bu(a,_)&&(m=m.insert(y,_))})),m}))}}class ES{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,a){return te.resolve(this.Lr.get(a))}saveBundleMetadata(t,a){return this.Lr.set(a.id,(function(o){return{id:o.id,version:o.version,createTime:ja(o.createTime)}})(a)),te.resolve()}getNamedQuery(t,a){return te.resolve(this.kr.get(a))}saveNamedQuery(t,a){return this.kr.set(a.name,(function(o){return{name:o.name,query:fS(o.bundledQuery),readTime:ja(o.readTime)}})(a)),te.resolve()}}class TS{constructor(){this.overlays=new xt(we.comparator),this.qr=new Map}getOverlay(t,a){return te.resolve(this.overlays.get(a))}getOverlays(t,a){const s=ks();return te.forEach(a,(o=>this.getOverlay(t,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(t,a,s){return s.forEach(((o,c)=>{this.St(t,a,c)})),te.resolve()}removeOverlaysForBatchId(t,a,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(t,a,s){const o=ks(),c=a.length+1,h=new we(a.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,_=y.getKey();if(!a.isPrefixOf(_.path))break;_.path.length===c&&y.largestBatchId>s&&o.set(y.getKey(),y)}return te.resolve(o)}getOverlaysForCollectionGroup(t,a,s,o){let c=new xt(((_,x)=>_-x));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===a&&_.largestBatchId>s){let x=c.get(_.largestBatchId);x===null&&(x=ks(),c=c.insert(_.largestBatchId,x)),x.set(_.getKey(),_)}}const m=ks(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,x)=>m.set(_,x))),!(m.size()>=o)););return te.resolve(m)}St(t,a,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new P2(a,s));let c=this.qr.get(a);c===void 0&&(c=Qe(),this.qr.set(a,c)),this.qr.set(a,c.add(s.key))}}class SS{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return te.resolve(this.sessionToken)}setSessionToken(t,a){return this.sessionToken=a,te.resolve()}}class tm{constructor(){this.Qr=new Ht(Yt.$r),this.Ur=new Ht(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,a){const s=new Yt(t,a);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,a){t.forEach((s=>this.addReference(s,a)))}removeReference(t,a){this.Gr(new Yt(t,a))}zr(t,a){t.forEach((s=>this.removeReference(s,a)))}jr(t){const a=new we(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1),c=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const a=new we(new pt([])),s=new Yt(a,t),o=new Yt(a,t+1);let c=Qe();return this.Ur.forEachInRange([s,o],(h=>{c=c.add(h.key)})),c}containsKey(t){const a=new Yt(t,0),s=this.Qr.firstAfterOrEqual(a);return s!==null&&t.isEqual(s.key)}}class Yt{constructor(t,a){this.key=t,this.Yr=a}static $r(t,a){return we.comparator(t.key,a.key)||Fe(t.Yr,a.Yr)}static Kr(t,a){return Fe(t.Yr,a.Yr)||we.comparator(t.key,a.key)}}class wS{constructor(t,a){this.indexManager=t,this.referenceDelegate=a,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Yt.$r)}checkEmpty(t){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(t,a,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new z2(c,a,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return te.resolve(h)}lookupMutationBatch(t,a){return te.resolve(this.Xr(a))}getNextMutationBatchAfterBatchId(t,a){const s=a+1,o=this.ei(s),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Qd:this.tr-1)}getAllMutationBatches(t){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,a){const s=new Yt(a,0),o=new Yt(a,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);c.push(m)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,a){let s=new Ht(Fe);return a.forEach((o=>{const c=new Yt(o,0),h=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(m=>{s=s.add(m.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,a){const s=a.path,o=s.length+1;let c=s;we.isDocumentKey(c)||(c=c.child(""));const h=new Yt(new we(c),0);let m=new Ht(Fe);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(y.Yr)),!0)}),h),te.resolve(this.ti(m))}ti(t){const a=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&a.push(o)})),a}removeMutationBatch(t,a){st(this.ni(a.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(a.mutations,(o=>{const c=new Yt(o.key,a.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,a){const s=new Yt(a,0),o=this.Zr.firstAfterOrEqual(s);return te.resolve(a.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,te.resolve()}ni(t,a){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const a=this.ei(t);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}class AS{constructor(t){this.ri=t,this.docs=(function(){return new xt(we.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,a){const s=a.key,o=this.docs.get(s),c=o?o.size:0,h=this.ri(a);return this.docs=this.docs.insert(s,{document:a.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const a=this.docs.get(t);a&&(this.docs=this.docs.remove(t),this.size-=a.size)}getEntry(t,a){const s=this.docs.get(a);return te.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(a))}getEntries(t,a){let s=oi();return a.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():cn.newInvalidDocument(o))})),te.resolve(s)}getDocumentsMatchingQuery(t,a,s,o){let c=oi();const h=a.path,m=new we(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:_,value:{document:x}}=y.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||t2(e2(x),s)<=0||(o.has(x.key)||Bu(a,x))&&(c=c.insert(x.key,x.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(t,a,s,o){Re(9500)}ii(t,a){return te.forEach(this.docs,(s=>a(s)))}newChangeBuffer(t){return new CS(this)}getSize(t){return te.resolve(this.size)}}class CS extends _S{constructor(t){super(),this.Nr=t}applyChanges(t){const a=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?a.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),te.waitFor(a)}getFromCache(t,a){return this.Nr.getEntry(t,a)}getAllFromCache(t,a){return this.Nr.getEntries(t,a)}}class NS{constructor(t){this.persistence=t,this.si=new Ps((a=>Kd(a)),$d),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new tm,this.targetCount=0,this.ai=Xr.ur()}forEachTarget(t,a){return this.si.forEach(((s,o)=>a(o))),te.resolve()}getLastRemoteSnapshotVersion(t){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return te.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(t,a,s){return s&&(this.lastRemoteSnapshotVersion=s),a>this.oi&&(this.oi=a),te.resolve()}Pr(t){this.si.set(t.target,t);const a=t.targetId;a>this.highestTargetId&&(this.ai=new Xr(a),this.highestTargetId=a),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,a){return this.Pr(a),this.targetCount+=1,te.resolve()}updateTargetData(t,a){return this.Pr(a),te.resolve()}removeTargetData(t,a){return this.si.delete(a.target),this._i.jr(a.targetId),this.targetCount-=1,te.resolve()}removeTargets(t,a,s){let o=0;const c=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=a&&s.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(t){return te.resolve(this.targetCount)}getTargetData(t,a){const s=this.si.get(a)||null;return te.resolve(s)}addMatchingKeys(t,a,s){return this._i.Wr(a,s),te.resolve()}removeMatchingKeys(t,a,s){this._i.zr(a,s);const o=this.persistence.referenceDelegate,c=[];return o&&a.forEach((h=>{c.push(o.markPotentiallyOrphaned(t,h))})),te.waitFor(c)}removeMatchingKeysForTargetId(t,a){return this._i.jr(a),te.resolve()}getMatchingKeysForTargetId(t,a){const s=this._i.Hr(a);return te.resolve(s)}containsKey(t,a){return te.resolve(this._i.containsKey(a))}}class M_{constructor(t,a){this.ui={},this.overlays={},this.ci=new Vu(0),this.li=!1,this.li=!0,this.hi=new SS,this.referenceDelegate=t(this),this.Pi=new NS(this),this.indexManager=new hS,this.remoteDocumentCache=(function(o){return new AS(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new uS(a),this.Ii=new ES(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let a=this.overlays[t.toKey()];return a||(a=new TS,this.overlays[t.toKey()]=a),a}getMutationQueue(t,a){let s=this.ui[t.toKey()];return s||(s=new wS(a,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,a,s){_e("MemoryPersistence","Starting transaction:",t);const o=new RS(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(t,a){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,a))))}}class RS extends a2{constructor(t){super(),this.currentSequenceNumber=t}}class nm{constructor(t){this.persistence=t,this.Ri=new tm,this.Vi=null}static mi(t){return new nm(t)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(t,a,s){return this.Ri.addReference(s,a),this.fi.delete(s.toString()),te.resolve()}removeReference(t,a,s){return this.Ri.removeReference(s,a),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(t,a){return this.fi.add(a.toString()),te.resolve()}removeTarget(t,a){this.Ri.jr(a.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,a.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,a)))}Ei(){this.Vi=new Set}di(t){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const o=we.fromPath(s);return this.gi(t,o).next((c=>{c||a.removeEntry(o,Me.min())}))})).next((()=>(this.Vi=null,a.apply(t))))}updateLimboDocument(t,a){return this.gi(t,a).next((s=>{s?this.fi.delete(a.toString()):this.fi.add(a.toString())}))}Ti(t){return 0}gi(t,a){return te.or([()=>te.resolve(this.Ri.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(t,a),()=>this.persistence.Ai(t,a)])}}class Ru{constructor(t,a){this.persistence=t,this.pi=new Ps((s=>r2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=vS(this,a)}static mi(t,a){return new Ru(t,a)}Ei(){}di(t){return te.resolve()}forEachTarget(t,a){return this.persistence.getTargetCache().forEachTarget(t,a)}gr(t){const a=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>a.next((o=>s+o))))}wr(t){let a=0;return this.pr(t,(s=>{a++})).next((()=>a))}pr(t,a){return te.forEach(this.pi,((s,o)=>this.br(t,s,o).next((c=>c?te.resolve():a(o)))))}removeTargets(t,a,s){return this.persistence.getTargetCache().removeTargets(t,a,s)}removeOrphanedDocuments(t,a){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,a).next((m=>{m||(s++,c.removeEntry(h,Me.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,a){return this.pi.set(a,t.currentSequenceNumber),te.resolve()}removeTarget(t,a){const s=a.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),te.resolve()}removeReference(t,a,s){return this.pi.set(s,t.currentSequenceNumber),te.resolve()}updateLimboDocument(t,a){return this.pi.set(a,t.currentSequenceNumber),te.resolve()}Ti(t){let a=t.key.toString().length;return t.isFoundDocument()&&(a+=ou(t.data.value)),a}br(t,a,s){return te.or([()=>this.persistence.Ai(t,a),()=>this.persistence.getTargetCache().containsKey(t,a),()=>{const o=this.pi.get(a);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class am{constructor(t,a,s,o){this.targetId=t,this.fromCache=a,this.Es=s,this.ds=o}static As(t,a){let s=Qe(),o=Qe();for(const c of a.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new am(t,a.fromCache,s,o)}}class MS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class IS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xE()?8:i2(_E())>0?6:4})()}initialize(t,a){this.ps=t,this.indexManager=a,this.Rs=!0}getDocumentsMatchingQuery(t,a,s,o){const c={result:null};return this.ys(t,a).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(t,a,o,s).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new MS;return this.Ss(t,a,h).next((m=>{if(c.result=m,this.Vs)return this.bs(t,a,h,m.size)}))})).next((()=>c.result))}bs(t,a,s,o){return s.documentReadCount<this.fs?(Or()<=Ke.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Vr(a),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Or()<=Ke.DEBUG&&_e("QueryEngine","Query:",Vr(a),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Or()<=Ke.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Vr(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Va(a))):te.resolve())}ys(t,a){if(ky(a))return te.resolve(null);let s=Va(a);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(a.limit!==null&&o===1&&(a=wu(a,null,"F"),s=Va(a)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const h=Qe(...c);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,s).next((y=>{const _=this.Ds(a,m);return this.Cs(a,_,h,y.readTime)?this.ys(t,wu(a,null,"F")):this.vs(t,_,a,y)}))))})))))}ws(t,a,s,o){return ky(a)||o.isEqual(Me.min())?te.resolve(null):this.ps.getDocuments(t,s).next((c=>{const h=this.Ds(a,c);return this.Cs(a,h,s,o)?te.resolve(null):(Or()<=Ke.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vr(a)),this.vs(t,h,a,WT(o,po)).next((m=>m)))}))}Ds(t,a){let s=new Ht(l_(t));return a.forEach(((o,c)=>{Bu(t,c)&&(s=s.add(c))})),s}Cs(t,a,s,o){if(t.limit===null)return!1;if(s.size!==a.size)return!0;const c=t.limitType==="F"?a.last():a.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(t,a,s){return Or()<=Ke.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Vr(a)),this.ps.getDocumentsMatchingQuery(t,a,$i.min(),s)}vs(t,a,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((c=>(a.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const im="LocalStore",DS=3e8;class OS{constructor(t,a,s,o){this.persistence=t,this.Fs=a,this.serializer=o,this.Ms=new xt(Fe),this.xs=new Ps((c=>Kd(c)),$d),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(a=>t.collect(a,this.Ms)))}}function VS(r,t,a,s){return new OS(r,t,a,s)}async function I_(r,t){const a=Ie(r);return await a.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return a.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,a.Bs(t),a.mutationQueue.getAllMutationBatches(s)))).next((c=>{const h=[],m=[];let y=Qe();for(const _ of o){h.push(_.batchId);for(const x of _.mutations)y=y.add(x.key)}for(const _ of c){m.push(_.batchId);for(const x of _.mutations)y=y.add(x.key)}return a.localDocuments.getDocuments(s,y).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function jS(r,t){const a=Ie(r);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),c=a.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,_,x){const T=_.batch,A=T.keys();let U=te.resolve();return A.forEach((B=>{U=U.next((()=>x.getEntry(y,B))).next((P=>{const k=_.docVersions.get(B);st(k!==null,48541),P.version.compareTo(k)<0&&(T.applyToRemoteDocument(P,_),P.isValidDocument()&&(P.setReadTime(_.commitVersion),x.addEntry(P)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(y,T)))})(a,s,t,c).next((()=>c.apply(s))).next((()=>a.mutationQueue.performConsistencyCheck(s))).next((()=>a.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=Qe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(y=y.add(m.batch.mutations[_].key));return y})(t)))).next((()=>a.localDocuments.getDocuments(s,o)))}))}function D_(r){const t=Ie(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(a=>t.Pi.getLastRemoteSnapshotVersion(a)))}function kS(r,t){const a=Ie(r),s=t.snapshotVersion;let o=a.Ms;return a.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=a.Ns.newChangeBuffer({trackRemovals:!0});o=a.Ms;const m=[];t.targetChanges.forEach(((x,T)=>{const A=o.get(T);if(!A)return;m.push(a.Pi.removeMatchingKeys(c,x.removedDocuments,T).next((()=>a.Pi.addMatchingKeys(c,x.addedDocuments,T))));let U=A.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(T)!==null?U=U.withResumeToken(rn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):x.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(x.resumeToken,s)),o=o.insert(T,U),(function(P,k,V){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=DS?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(A,U,x)&&m.push(a.Pi.updateTargetData(c,U))}));let y=oi(),_=Qe();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&m.push(a.persistence.referenceDelegate.updateLimboDocument(c,x))})),m.push(LS(c,h,t.documentUpdates).next((x=>{y=x.ks,_=x.qs}))),!s.isEqual(Me.min())){const x=a.Pi.getLastRemoteSnapshotVersion(c).next((T=>a.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(x)}return te.waitFor(m).next((()=>h.apply(c))).next((()=>a.localDocuments.getLocalViewOfDocuments(c,y,_))).next((()=>y))})).then((c=>(a.Ms=o,c)))}function LS(r,t,a){let s=Qe(),o=Qe();return a.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let h=oi();return a.forEach(((m,y)=>{const _=c.get(m);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Me.min())?(t.removeEntry(m,y.readTime),h=h.insert(m,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),h=h.insert(m,y)):_e(im,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function BS(r,t){const a=Ie(r);return a.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Qd),a.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function US(r,t){const a=Ie(r);return a.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return a.Pi.getTargetData(s,t).next((c=>c?(o=c,te.resolve(o)):a.Pi.allocateTargetId(s).next((h=>(o=new Hi(t,h,"TargetPurposeListen",s.currentSequenceNumber),a.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=a.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(a.Ms=a.Ms.insert(s.targetId,s),a.xs.set(t,s.targetId)),s}))}async function Dd(r,t,a){const s=Ie(r),o=s.Ms.get(t),c=a?"readwrite":"readwrite-primary";try{a||await s.persistence.runTransaction("Release target",c,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Jr(h))throw h;_e(im,`Failed to update sequence numbers for target ${t}: ${h}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function Ky(r,t,a){const s=Ie(r);let o=Me.min(),c=Qe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,_,x){const T=Ie(y),A=T.xs.get(x);return A!==void 0?te.resolve(T.Ms.get(A)):T.Pi.getTargetData(_,x)})(s,h,Va(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,t,a?o:Me.min(),a?c:Qe()))).next((m=>(zS(s,w2(t),m),{documents:m,Qs:c})))))}function zS(r,t,a){let s=r.Os.get(t)||Me.min();a.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class $y{constructor(){this.activeTargetIds=I2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class PS{constructor(){this.Mo=new $y,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,a,s){}addLocalQueryTarget(t,a=!0){return a&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,a,s){this.xo[t]=a}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new $y,Promise.resolve()}handleUserChange(t,a,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class GS{Oo(t){}shutdown(){}}const Zy="ConnectivityMonitor";class Jy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(Zy,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){_e(Zy,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let iu=null;function Od(){return iu===null?iu=(function(){return 268435456+Math.round(2147483648*Math.random())})():iu++,"0x"+iu.toString(16)}const rd="RestConnection",qS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const a=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=a+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Eu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,a,s,o,c){const h=Od(),m=this.zo(t,a.toUriEncodedString());_e(rd,`Sending RPC '${t}' ${h}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:_}=new URL(m),x=Gd(_);return this.Jo(t,m,y,s,x).then((T=>(_e(rd,`Received RPC '${t}' ${h}: `,T),T)),(T=>{throw qr(rd,`RPC '${t}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(t,a,s,o,c,h){return this.Go(t,a,s,o,c)}jo(t,a,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$r})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach(((o,c)=>t[c]=o)),s&&s.headers.forEach(((o,c)=>t[c]=o))}zo(t,a){const s=qS[t];return`${this.Uo}/v1/${a}:${s}`}terminate(){}}class FS{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const ln="WebChannelConnection";class QS extends HS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,a,s,o,c){const h=Od();return new Promise(((m,y)=>{const _=new Ov;_.setWithCredentials(!0),_.listenOnce(Vv.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case lu.NO_ERROR:const T=_.getResponseJson();_e(ln,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(T)),m(T);break;case lu.TIMEOUT:_e(ln,`RPC '${t}' ${h} timed out`),y(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:const A=_.getStatus();if(_e(ln,`RPC '${t}' ${h} failed with status:`,A,"response text:",_.getResponseText()),A>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const B=U?.error;if(B&&B.status&&B.message){const P=(function(V){const J=V.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(J)>=0?J:ee.UNKNOWN})(B.status);y(new ge(P,B.message))}else y(new ge(ee.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:t,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{_e(ln,`RPC '${t}' ${h} completed.`)}}));const x=JSON.stringify(o);_e(ln,`RPC '${t}' ${h} sending request:`,o),_.send(a,"POST",x,s,15)}))}T_(t,a,s){const o=Od(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=Lv(),m=kv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,a,s),y.encodeInitMessageHeaders=!0;const x=c.join("");_e(ln,`Creating RPC '${t}' stream ${o}: ${x}`,y);const T=h.createWebChannel(x,y);this.I_(T);let A=!1,U=!1;const B=new FS({Yo:k=>{U?_e(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,k):(A||(_e(ln,`Opening RPC '${t}' stream ${o} transport.`),T.open(),A=!0),_e(ln,`RPC '${t}' stream ${o} sending:`,k),T.send(k))},Zo:()=>T.close()}),P=(k,V,J)=>{k.listen(V,(ne=>{try{J(ne)}catch(re){setTimeout((()=>{throw re}),0)}}))};return P(T,to.EventType.OPEN,(()=>{U||(_e(ln,`RPC '${t}' stream ${o} transport opened.`),B.o_())})),P(T,to.EventType.CLOSE,(()=>{U||(U=!0,_e(ln,`RPC '${t}' stream ${o} transport closed`),B.a_(),this.E_(T))})),P(T,to.EventType.ERROR,(k=>{U||(U=!0,qr(ln,`RPC '${t}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),B.a_(new ge(ee.UNAVAILABLE,"The operation could not be completed")))})),P(T,to.EventType.MESSAGE,(k=>{if(!U){const V=k.data[0];st(!!V,16349);const J=V,ne=J?.error||J[0]?.error;if(ne){_e(ln,`RPC '${t}' stream ${o} received error:`,ne);const re=ne.status;let ce=(function(S){const C=zt[S];if(C!==void 0)return __(C)})(re),oe=ne.message;ce===void 0&&(ce=ee.INTERNAL,oe="Unknown error status: "+re+" with message "+ne.message),U=!0,B.a_(new ge(ce,oe)),T.close()}else _e(ln,`RPC '${t}' stream ${o} received:`,V),B.u_(V)}})),P(m,jv.STAT_EVENT,(k=>{k.stat===xd.PROXY?_e(ln,`RPC '${t}' stream ${o} detected buffering proxy`):k.stat===xd.NOPROXY&&_e(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((a=>a===t))}}function ld(){return typeof document<"u"?document:null}function Gu(r){return new $2(r,!0)}class O_{constructor(t,a,s=1e3,o=1.5,c=6e4){this.Mi=t,this.timerId=a,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const a=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,a-s);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${a} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Wy="PersistentStream";class V_{constructor(t,a,s,o,c,h,m,y){this.Mi=t,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O_(t,a)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,a){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():a&&a.code===ee.RESOURCE_EXHAUSTED?(li(a.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):a&&a.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(a)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),a=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===a&&this.G_(s,o)}),(s=>{t((()=>{const o=new ge(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,a){const s=this.W_(this.D_);this.stream=this.j_(t,a),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return _e(Wy,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return a=>{this.Mi.enqueueAndForget((()=>this.D_===t?a():(_e(Wy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XS extends V_{constructor(t,a,s,o,c,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,s,o,h),this.serializer=c}j_(t,a){return this.connection.T_("Listen",t,a)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const a=W2(this.serializer,t),s=(function(c){if(!("targetChange"in c))return Me.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Me.min():h.readTime?ja(h.readTime):Me.min()})(t);return this.listener.H_(a,s)}Y_(t){const a={};a.database=Id(this.serializer),a.addTarget=(function(c,h){let m;const y=h.target;if(m=Ad(y)?{documents:nS(c,y)}:{query:aS(c,y).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=E_(c,h.resumeToken);const _=Nd(c,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Me.min())>0){m.readTime=Nu(c,h.snapshotVersion.toTimestamp());const _=Nd(c,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,t);const s=sS(this.serializer,t);s&&(a.labels=s),this.q_(a)}Z_(t){const a={};a.database=Id(this.serializer),a.removeTarget=t,this.q_(a)}}class YS extends V_{constructor(t,a,s,o,c,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,s,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,a){return this.connection.T_("Write",t,a)}J_(t){return st(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,st(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){st(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const a=tS(t.writeResults,t.commitTime),s=ja(t.commitTime);return this.listener.na(s,a)}ra(){const t={};t.database=Id(this.serializer),this.q_(t)}ea(t){const a={streamToken:this.lastStreamToken,writes:t.map((s=>eS(this.serializer,s)))};this.q_(a)}}class KS{}class $S extends KS{constructor(t,a,s,o){super(),this.authCredentials=t,this.appCheckCredentials=a,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,a,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(t,Rd(a,s),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ee.UNKNOWN,c.toString())}))}Ho(t,a,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Rd(a,s),o,h,m,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZS{constructor(t,a){this.asyncQueue=t,this.onlineStateHandler=a,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const a=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(a),this.aa=!1):_e("OnlineStateTracker",a)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Us="RemoteStore";class JS{constructor(t,a,s,o,c){this.localStore=t,this.datastore=a,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{qs(this)&&(_e(Us,"Restarting streams for network reachability change."),await(async function(y){const _=Ie(y);_.Ea.add(4),await wo(_),_.Ra.set("Unknown"),_.Ea.delete(4),await qu(_)})(this))}))})),this.Ra=new ZS(s,o)}}async function qu(r){if(qs(r))for(const t of r.da)await t(!0)}async function wo(r){for(const t of r.da)await t(!1)}function j_(r,t){const a=Ie(r);a.Ia.has(t.targetId)||(a.Ia.set(t.targetId,t),om(a)?lm(a):el(a).O_()&&rm(a,t))}function sm(r,t){const a=Ie(r),s=el(a);a.Ia.delete(t),s.O_()&&k_(a,t),a.Ia.size===0&&(s.O_()?s.L_():qs(a)&&a.Ra.set("Unknown"))}function rm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Me.min())>0){const a=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(a)}el(r).Y_(t)}function k_(r,t){r.Va.Ue(t),el(r).Z_(t)}function lm(r){r.Va=new Q2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),el(r).start(),r.Ra.ua()}function om(r){return qs(r)&&!el(r).x_()&&r.Ia.size>0}function qs(r){return Ie(r).Ea.size===0}function L_(r){r.Va=void 0}async function WS(r){r.Ra.set("Online")}async function ew(r){r.Ia.forEach(((t,a)=>{rm(r,t)}))}async function tw(r,t){L_(r),om(r)?(r.Ra.ha(t),lm(r)):r.Ra.set("Unknown")}async function nw(r,t,a){if(r.Ra.set("Online"),t instanceof x_&&t.state===2&&t.cause)try{await(async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,t)}catch(s){_e(Us,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Mu(r,s)}else if(t instanceof fu?r.Va.Ze(t):t instanceof b_?r.Va.st(t):r.Va.tt(t),!a.isEqual(Me.min()))try{const s=await D_(r.localStore);a.compareTo(s)>=0&&await(function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const x=c.Ia.get(_);x&&c.Ia.set(_,x.withResumeToken(y.resumeToken,h))}})),m.targetMismatches.forEach(((y,_)=>{const x=c.Ia.get(y);if(!x)return;c.Ia.set(y,x.withResumeToken(rn.EMPTY_BYTE_STRING,x.snapshotVersion)),k_(c,y);const T=new Hi(x.target,y,_,x.sequenceNumber);rm(c,T)})),c.remoteSyncer.applyRemoteEvent(m)})(r,a)}catch(s){_e(Us,"Failed to raise snapshot:",s),await Mu(r,s)}}async function Mu(r,t,a){if(!Jr(t))throw t;r.Ea.add(1),await wo(r),r.Ra.set("Offline"),a||(a=()=>D_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_e(Us,"Retrying IndexedDB access"),await a(),r.Ea.delete(1),await qu(r)}))}function B_(r,t){return t().catch((a=>Mu(r,a,t)))}async function Hu(r){const t=Ie(r),a=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Qd;for(;aw(t);)try{const o=await BS(t.localStore,s);if(o===null){t.Ta.length===0&&a.L_();break}s=o.batchId,iw(t,o)}catch(o){await Mu(t,o)}U_(t)&&z_(t)}function aw(r){return qs(r)&&r.Ta.length<10}function iw(r,t){r.Ta.push(t);const a=es(r);a.O_()&&a.X_&&a.ea(t.mutations)}function U_(r){return qs(r)&&!es(r).x_()&&r.Ta.length>0}function z_(r){es(r).start()}async function sw(r){es(r).ra()}async function rw(r){const t=es(r);for(const a of r.Ta)t.ea(a.mutations)}async function lw(r,t,a){const s=r.Ta.shift(),o=Jd.from(s,t,a);await B_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Hu(r)}async function ow(r,t){t&&es(r).X_&&await(async function(s,o){if((function(h){return q2(h)&&h!==ee.ABORTED})(o.code)){const c=s.Ta.shift();es(s).B_(),await B_(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Hu(s)}})(r,t),U_(r)&&z_(r)}async function ev(r,t){const a=Ie(r);a.asyncQueue.verifyOperationInProgress(),_e(Us,"RemoteStore received new credentials");const s=qs(a);a.Ea.add(3),await wo(a),s&&a.Ra.set("Unknown"),await a.remoteSyncer.handleCredentialChange(t),a.Ea.delete(3),await qu(a)}async function cw(r,t){const a=Ie(r);t?(a.Ea.delete(2),await qu(a)):t||(a.Ea.add(2),await wo(a),a.Ra.set("Unknown"))}function el(r){return r.ma||(r.ma=(function(a,s,o){const c=Ie(a);return c.sa(),new XS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:WS.bind(null,r),t_:ew.bind(null,r),r_:tw.bind(null,r),H_:nw.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),om(r)?lm(r):r.Ra.set("Unknown")):(await r.ma.stop(),L_(r))}))),r.ma}function es(r){return r.fa||(r.fa=(function(a,s,o){const c=Ie(a);return c.sa(),new YS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:sw.bind(null,r),r_:ow.bind(null,r),ta:rw.bind(null,r),na:lw.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Hu(r)):(await r.fa.stop(),r.Ta.length>0&&(_e(Us,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class cm{constructor(t,a,s,o,c){this.asyncQueue=t,this.timerId=a,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,a,s,o,c){const h=Date.now()+s,m=new cm(t,a,h,o,c);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function um(r,t){if(li("AsyncQueue",`${t}: ${r}`),Jr(r))return new ge(ee.UNAVAILABLE,`${t}: ${r}`);throw r}class Ur{static emptySet(t){return new Ur(t.comparator)}constructor(t){this.comparator=t?(a,s)=>t(a,s)||we.comparator(a.key,s.key):(a,s)=>we.comparator(a.key,s.key),this.keyedMap=no(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const a=this.keyedMap.get(t);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((a,s)=>(t(a),!1)))}add(t){const a=this.delete(t.key);return a.copy(a.keyedMap.insert(t.key,t),a.sortedSet.insert(t,null))}delete(t){const a=this.get(t);return a?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(a)):this}isEqual(t){if(!(t instanceof Ur)||this.size!==t.size)return!1;const a=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((a=>{t.push(a.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,a){const s=new Ur;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=a,s}}class tv{constructor(){this.ga=new xt(we.comparator)}track(t){const a=t.doc.key,s=this.ga.get(a);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(a,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(a,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(a,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(a):t.type===1&&s.type===2?this.ga=this.ga.insert(a,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(a,{type:2,doc:t.doc}):Re(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(a,t)}ya(){const t=[];return this.ga.inorderTraversal(((a,s)=>{t.push(s)})),t}}class Yr{constructor(t,a,s,o,c,h,m,y,_){this.query=t,this.docs=a,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,a,s,o,c){const h=[];return a.forEach((m=>{h.push({type:0,doc:m})})),new Yr(t,a,Ur.emptySet(a),h,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Lu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const a=this.docChanges,s=t.docChanges;if(a.length!==s.length)return!1;for(let o=0;o<a.length;o++)if(a[o].type!==s[o].type||!a[o].doc.isEqual(s[o].doc))return!1;return!0}}class uw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class fw{constructor(){this.queries=nv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(a,s){const o=Ie(a),c=o.queries;o.queries=nv(),c.forEach(((h,m)=>{for(const y of m.Sa)y.onError(s)}))})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function nv(){return new Ps((r=>r_(r)),Lu)}async function hw(r,t){const a=Ie(r);let s=3;const o=t.query;let c=a.queries.get(o);c?!c.ba()&&t.Da()&&(s=2):(c=new uw,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await a.onListen(o,!0);break;case 1:c.wa=await a.onListen(o,!1);break;case 2:await a.onFirstRemoteStoreListen(o)}}catch(h){const m=um(h,`Initialization of query '${Vr(t.query)}' failed`);return void t.onError(m)}a.queries.set(o,c),c.Sa.push(t),t.va(a.onlineState),c.wa&&t.Fa(c.wa)&&fm(a)}async function dw(r,t){const a=Ie(r),s=t.query;let o=3;const c=a.queries.get(s);if(c){const h=c.Sa.indexOf(t);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=t.Da()?0:1:!c.ba()&&t.Da()&&(o=2))}switch(o){case 0:return a.queries.delete(s),a.onUnlisten(s,!0);case 1:return a.queries.delete(s),a.onUnlisten(s,!1);case 2:return a.onLastRemoteStoreUnlisten(s);default:return}}function mw(r,t){const a=Ie(r);let s=!1;for(const o of t){const c=o.query,h=a.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&fm(a)}function pw(r,t,a){const s=Ie(r),o=s.queries.get(t);if(o)for(const c of o.Sa)c.onError(a);s.queries.delete(t)}function fm(r){r.Ca.forEach((t=>{t.next()}))}var Vd,av;(av=Vd||(Vd={})).Ma="default",av.Cache="cache";class gw{constructor(t,a,s){this.query=t,this.xa=a,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Yr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let a=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),a=!0):this.La(t,this.onlineState)&&(this.ka(t),a=!0),this.Na=t,a}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let a=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),a=!0),a}La(t,a){if(!t.fromCache||!this.Da())return!0;const s=a!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||a==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const a=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}ka(t){t=Yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Vd.Cache}}class P_{constructor(t){this.key=t}}class G_{constructor(t){this.key=t}}class yw{constructor(t,a){this.query=t,this.Ya=a,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=l_(t),this.tu=new Ur(this.eu)}get nu(){return this.Ya}ru(t,a){const s=a?a.iu:new tv,o=a?a.tu:this.tu;let c=a?a.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((x,T)=>{const A=o.get(x),U=Bu(this.query,T)?T:null,B=!!A&&this.mutatedKeys.has(A.key),P=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let k=!1;A&&U?A.data.isEqual(U.data)?B!==P&&(s.track({type:3,doc:U}),k=!0):this.su(A,U)||(s.track({type:2,doc:U}),k=!0,(y&&this.eu(U,y)>0||_&&this.eu(U,_)<0)&&(m=!0)):!A&&U?(s.track({type:0,doc:U}),k=!0):A&&!U&&(s.track({type:1,doc:A}),k=!0,(y||_)&&(m=!0)),k&&(U?(h=h.add(U),c=P?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:h,iu:s,Cs:m,mutatedKeys:c}}su(t,a){return t.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(t,a,s,o){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((x,T)=>(function(U,B){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:k})}};return P(U)-P(B)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(s),o=o??!1;const m=a&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,_=y!==this.Za;return this.Za=y,h.length!==0||_?{snapshot:new Yr(this.query,t.tu,c,h,t.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((a=>this.Ya=this.Ya.add(a))),t.modifiedDocuments.forEach((a=>{})),t.removedDocuments.forEach((a=>this.Ya=this.Ya.delete(a))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const a=[];return t.forEach((s=>{this.Xa.has(s)||a.push(new G_(s))})),this.Xa.forEach((s=>{t.has(s)||a.push(new P_(s))})),a}cu(t){this.Ya=t.Qs,this.Xa=Qe();const a=this.ru(t.documents);return this.applyChanges(a,!0)}lu(){return Yr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hm="SyncEngine";class vw{constructor(t,a,s){this.query=t,this.targetId=a,this.view=s}}class _w{constructor(t){this.key=t,this.hu=!1}}class bw{constructor(t,a,s,o,c,h){this.localStore=t,this.remoteStore=a,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ps((m=>r_(m)),Lu),this.Iu=new Map,this.Eu=new Set,this.du=new xt(we.comparator),this.Au=new Map,this.Ru=new tm,this.Vu={},this.mu=new Map,this.fu=Xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xw(r,t,a=!0){const s=Y_(r);let o;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await q_(s,t,a,!0),o}async function Ew(r,t){const a=Y_(r);await q_(a,t,!0,!1)}async function q_(r,t,a,s){const o=await US(r.localStore,Va(t)),c=o.targetId,h=r.sharedClientState.addLocalQueryTarget(c,a);let m;return s&&(m=await Tw(r,t,c,h==="current",o.resumeToken)),r.isPrimaryClient&&a&&j_(r.remoteStore,o),m}async function Tw(r,t,a,s,o){r.pu=(T,A,U)=>(async function(P,k,V,J){let ne=k.view.ru(V);ne.Cs&&(ne=await Ky(P.localStore,k.query,!1).then((({documents:M})=>k.view.ru(M,ne))));const re=J&&J.targetChanges.get(k.targetId),ce=J&&J.targetMismatches.get(k.targetId)!=null,oe=k.view.applyChanges(ne,P.isPrimaryClient,re,ce);return sv(P,k.targetId,oe.au),oe.snapshot})(r,T,A,U);const c=await Ky(r.localStore,t,!0),h=new yw(t,c.Qs),m=h.ru(c.documents),y=So.createSynthesizedTargetChangeForCurrentChange(a,s&&r.onlineState!=="Offline",o),_=h.applyChanges(m,r.isPrimaryClient,y);sv(r,a,_.au);const x=new vw(t,a,h);return r.Tu.set(t,x),r.Iu.has(a)?r.Iu.get(a).push(t):r.Iu.set(a,[t]),_.snapshot}async function Sw(r,t,a){const s=Ie(r),o=s.Tu.get(t),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((h=>!Lu(h,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Dd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),a&&sm(s.remoteStore,o.targetId),jd(s,o.targetId)})).catch(Zr)):(jd(s,o.targetId),await Dd(s.localStore,o.targetId,!0))}async function ww(r,t){const a=Ie(r),s=a.Tu.get(t),o=a.Iu.get(s.targetId);a.isPrimaryClient&&o.length===1&&(a.sharedClientState.removeLocalQueryTarget(s.targetId),sm(a.remoteStore,s.targetId))}async function Aw(r,t,a){const s=Ow(r);try{const o=await(function(h,m){const y=Ie(h),_=dt.now(),x=m.reduce(((U,B)=>U.add(B.key)),Qe());let T,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let B=oi(),P=Qe();return y.Ns.getEntries(U,x).next((k=>{B=k,B.forEach(((V,J)=>{J.isValidDocument()||(P=P.add(V))}))})).next((()=>y.localDocuments.getOverlayedDocuments(U,B))).next((k=>{T=k;const V=[];for(const J of m){const ne=B2(J,T.get(J.key).overlayedDocument);ne!=null&&V.push(new Gs(J.key,ne,Zv(ne.value.mapValue),si.exists(!0)))}return y.mutationQueue.addMutationBatch(U,_,V,m)})).next((k=>{A=k;const V=k.applyToLocalDocumentSet(T,P);return y.documentOverlayCache.saveOverlays(U,k.batchId,V)}))})).then((()=>({batchId:A.batchId,changes:c_(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,y){let _=h.Vu[h.currentUser.toKey()];_||(_=new xt(Fe)),_=_.insert(m,y),h.Vu[h.currentUser.toKey()]=_})(s,o.batchId,a),await Ao(s,o.changes),await Hu(s.remoteStore)}catch(o){const c=um(o,"Failed to persist write");a.reject(c)}}async function H_(r,t){const a=Ie(r);try{const s=await kS(a.localStore,t);t.targetChanges.forEach(((o,c)=>{const h=a.Au.get(c);h&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?st(h.hu,14607):o.removedDocuments.size>0&&(st(h.hu,42227),h.hu=!1))})),await Ao(a,s,t)}catch(s){await Zr(s)}}function iv(r,t,a){const s=Ie(r);if(s.isPrimaryClient&&a===0||!s.isPrimaryClient&&a===1){const o=[];s.Tu.forEach(((c,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const y=Ie(h);y.onlineState=m;let _=!1;y.queries.forEach(((x,T)=>{for(const A of T.Sa)A.va(m)&&(_=!0)})),_&&fm(y)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Cw(r,t,a){const s=Ie(r);s.sharedClientState.updateQueryState(t,"rejected",a);const o=s.Au.get(t),c=o&&o.key;if(c){let h=new xt(we.comparator);h=h.insert(c,cn.newNoDocument(c,Me.min()));const m=Qe().add(c),y=new Pu(Me.min(),new Map,new xt(Fe),h,m);await H_(s,y),s.du=s.du.remove(c),s.Au.delete(t),dm(s)}else await Dd(s.localStore,t,!1).then((()=>jd(s,t,a))).catch(Zr)}async function Nw(r,t){const a=Ie(r),s=t.batch.batchId;try{const o=await jS(a.localStore,t);Q_(a,s,null),F_(a,s),a.sharedClientState.updateMutationState(s,"acknowledged"),await Ao(a,o)}catch(o){await Zr(o)}}async function Rw(r,t,a){const s=Ie(r);try{const o=await(function(h,m){const y=Ie(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let x;return y.mutationQueue.lookupMutationBatch(_,m).next((T=>(st(T!==null,37113),x=T.keys(),y.mutationQueue.removeMutationBatch(_,T)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,x,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,x))).next((()=>y.localDocuments.getDocuments(_,x)))}))})(s.localStore,t);Q_(s,t,a),F_(s,t),s.sharedClientState.updateMutationState(t,"rejected",a),await Ao(s,o)}catch(o){await Zr(o)}}function F_(r,t){(r.mu.get(t)||[]).forEach((a=>{a.resolve()})),r.mu.delete(t)}function Q_(r,t,a){const s=Ie(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(t);c&&(a?c.reject(a):c.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function jd(r,t,a=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),a&&r.Pu.yu(s,a);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||X_(r,s)}))}function X_(r,t){r.Eu.delete(t.path.canonicalString());const a=r.du.get(t);a!==null&&(sm(r.remoteStore,a),r.du=r.du.remove(t),r.Au.delete(a),dm(r))}function sv(r,t,a){for(const s of a)s instanceof P_?(r.Ru.addReference(s.key,t),Mw(r,s)):s instanceof G_?(_e(hm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||X_(r,s.key)):Re(19791,{wu:s})}function Mw(r,t){const a=t.key,s=a.path.canonicalString();r.du.get(a)||r.Eu.has(s)||(_e(hm,"New document in limbo: "+a),r.Eu.add(s),dm(r))}function dm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const a=new we(pt.fromString(t)),s=r.fu.next();r.Au.set(s,new _w(a)),r.du=r.du.insert(a,s),j_(r.remoteStore,new Hi(Va(i_(a.path)),s,"TargetPurposeLimboResolution",Vu.ce))}}async function Ao(r,t,a){const s=Ie(r),o=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,y)=>{h.push(s.pu(y,t,a).then((_=>{if((_||a)&&s.isPrimaryClient){const x=_?!_.fromCache:a?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(_){o.push(_);const x=am.As(y.targetId,_);c.push(x)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(y,_){const x=Ie(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>te.forEach(_,(A=>te.forEach(A.Es,(U=>x.persistence.referenceDelegate.addReference(T,A.targetId,U))).next((()=>te.forEach(A.ds,(U=>x.persistence.referenceDelegate.removeReference(T,A.targetId,U)))))))))}catch(T){if(!Jr(T))throw T;_e(im,"Failed to update sequence numbers: "+T)}for(const T of _){const A=T.targetId;if(!T.fromCache){const U=x.Ms.get(A),B=U.snapshotVersion,P=U.withLastLimboFreeSnapshotVersion(B);x.Ms=x.Ms.insert(A,P)}}})(s.localStore,c))}async function Iw(r,t){const a=Ie(r);if(!a.currentUser.isEqual(t)){_e(hm,"User change. New user:",t.toKey());const s=await I_(a.localStore,t);a.currentUser=t,(function(c,h){c.mu.forEach((m=>{m.forEach((y=>{y.reject(new ge(ee.CANCELLED,h))}))})),c.mu.clear()})(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ao(a,s.Ls)}}function Dw(r,t){const a=Ie(r),s=a.Au.get(t);if(s&&s.hu)return Qe().add(s.key);{let o=Qe();const c=a.Iu.get(t);if(!c)return o;for(const h of c){const m=a.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function Y_(r){const t=Ie(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cw.bind(null,t),t.Pu.H_=mw.bind(null,t.eventManager),t.Pu.yu=pw.bind(null,t.eventManager),t}function Ow(r){const t=Ie(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Nw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rw.bind(null,t),t}class Iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Gu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,a){return null}Mu(t,a){return null}vu(t){return VS(this.persistence,new IS,t.initialUser,this.serializer)}Cu(t){return new M_(nm.mi,this.serializer)}Du(t){return new PS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Iu.provider={build:()=>new Iu};class Vw extends Iu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,a){st(this.persistence.referenceDelegate instanceof Ru,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new gS(s,t.asyncQueue,a)}Cu(t){const a=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new M_((s=>Ru.mi(s,a)),this.serializer)}}class kd{async initialize(t,a){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Iw.bind(null,this.syncEngine),await cw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new fw})()}createDatastore(t){const a=Gu(t.databaseInfo.databaseId),s=(function(c){return new QS(c)})(t.databaseInfo);return(function(c,h,m,y){return new $S(c,h,m,y)})(t.authCredentials,t.appCheckCredentials,s,a)}createRemoteStore(t){return(function(s,o,c,h,m){return new JS(s,o,c,h,m)})(this.localStore,this.datastore,t.asyncQueue,(a=>iv(this.syncEngine,a,0)),(function(){return Jy.v()?new Jy:new GS})())}createSyncEngine(t,a){return(function(o,c,h,m,y,_,x){const T=new bw(o,c,h,m,y,_);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,a)}async terminate(){await(async function(a){const s=Ie(a);_e(Us,"RemoteStore shutting down."),s.Ea.add(5),await wo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kd.provider={build:()=>new kd};class jw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):li("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,a){setTimeout((()=>{this.muted||t(a)}),0)}}const ts="FirestoreClient";class kw{constructor(t,a,s,o,c){this.authCredentials=t,this.appCheckCredentials=a,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Fd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async h=>{_e(ts,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(_e(ts,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(a){const s=um(a,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function od(r,t){r.asyncQueue.verifyOperationInProgress(),_e(ts,"Initializing OfflineComponentProvider");const a=r.configuration;await t.initialize(a);let s=a.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await I_(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function rv(r,t){r.asyncQueue.verifyOperationInProgress();const a=await Lw(r);_e(ts,"Initializing OnlineComponentProvider"),await t.initialize(a,r.configuration),r.setCredentialChangeListener((s=>ev(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>ev(t.remoteStore,o))),r._onlineComponents=t}async function Lw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_e(ts,"Using user provided OfflineComponentProvider");try{await od(r,r._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(a))throw a;qr("Error using user provided cache. Falling back to memory cache: "+a),await od(r,new Iu)}}else _e(ts,"Using default OfflineComponentProvider"),await od(r,new Vw(void 0));return r._offlineComponents}async function K_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_e(ts,"Using user provided OnlineComponentProvider"),await rv(r,r._uninitializedComponentsProvider._online)):(_e(ts,"Using default OnlineComponentProvider"),await rv(r,new kd))),r._onlineComponents}function Bw(r){return K_(r).then((t=>t.syncEngine))}async function Uw(r){const t=await K_(r),a=t.eventManager;return a.onListen=xw.bind(null,t.syncEngine),a.onUnlisten=Sw.bind(null,t.syncEngine),a.onFirstRemoteStoreListen=Ew.bind(null,t.syncEngine),a.onLastRemoteStoreUnlisten=ww.bind(null,t.syncEngine),a}function zw(r,t,a={}){const s=new Yi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,y,_){const x=new jw({next:A=>{x.Nu(),h.enqueueAndForget((()=>dw(c,T))),A.fromCache&&y.source==="server"?_.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new gw(m,x,{includeMetadataChanges:!0,qa:!0});return hw(c,T)})(await Uw(r),r.asyncQueue,t,a,s))),s.promise}function $_(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const lv=new Map;const Z_="firestore.googleapis.com",ov=!0;class cv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z_,this.ssl=ov}else this.host=t.host,this.ssl=t.ssl??ov;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=R_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mS)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ZT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$_(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Fu{constructor(t,a,s,o){this._authCredentials=t,this._appCheckCredentials=a,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new PT;switch(s.type){case"firstParty":return new FT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(a){const s=lv.get(a);s&&(_e("ComponentProvider","Removing Datastore"),lv.delete(a),s.terminate())})(this),Promise.resolve()}}function Pw(r,t,a,s={}){r=bu(r,Fu);const o=Gd(t),c=r._getSettings(),h={...c,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${a}`;o&&(mE(`https://${m}`),vE("Firestore",!0)),c.host!==Z_&&c.host!==m&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:m,ssl:o,emulatorOptions:s};if(!yu(y,h)&&(r._setSettings(y),s.mockUserToken)){let _,x;if(typeof s.mockUserToken=="string")_=s.mockUserToken,x=on.MOCK_USER;else{_=pE(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(T)}r._authCredentials=new GT(new Uv(_,x))}}class ns{constructor(t,a,s){this.converter=a,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ns(this.firestore,t,this._query)}}class Kt{constructor(t,a,s){this.converter=a,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kt(this.firestore,t,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,a,s){if(Eo(a,Kt._jsonSchema))return new Kt(t,s||null,new we(pt.fromString(a.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Gt("string",Kt._jsonSchemaVersion),referencePath:Gt("string")};class Ki extends ns{constructor(t,a,s){super(t,a,i_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new we(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function Qu(r,t,...a){if(r=Gr(r),zv("collection","path",t),r instanceof Fu){const s=pt.fromString(t,...a);return Ey(s),new Ki(r,null,s)}{if(!(r instanceof Kt||r instanceof Ki))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return Ey(s),new Ki(r.firestore,null,s)}}function Gw(r,t,...a){if(r=Gr(r),arguments.length===1&&(t=Fd.newId()),zv("doc","path",t),r instanceof Fu){const s=pt.fromString(t,...a);return xy(s),new Kt(r,null,new we(s))}{if(!(r instanceof Kt||r instanceof Ki))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(t,...a));return xy(s),new Kt(r.firestore,r instanceof Ki?r.converter:null,new we(s))}}const uv="AsyncQueue";class fv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O_(this,"async_queue_retry"),this._c=()=>{const s=ld();s&&_e(uv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const a=ld();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const a=ld();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const a=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(a.resolve,a.reject),a.promise))).then((()=>a.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Jr(t))throw t;_e(uv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const a=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",hv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=a,a}enqueueAfterDelay(t,a,s){this.uc(),this.oc.indexOf(t)>-1&&(a=0);const o=cm.createAndSchedule(this,t,a,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:hv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const a of this.tc)if(a.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((a,s)=>a.targetTimeMs-s.targetTimeMs));for(const a of this.tc)if(a.skipDelay(),t!=="all"&&a.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const a=this.tc.indexOf(t);this.tc.splice(a,1)}}function hv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class mm extends Fu{constructor(t,a,s,o){super(t,a,s,o),this.type="firestore",this._queue=new fv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new fv(t),this._firestoreClient=void 0,await t}}}function qw(r,t){const a=typeof r=="object"?r:NT(),s=typeof r=="string"?r:Eu,o=TT(a,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=hE("firestore");c&&Pw(o,...c)}return o}function J_(r){if(r._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Hw(r),r._firestoreClient}function Hw(r){const t=r._freezeSettings(),a=(function(o,c,h,m){return new c2(o,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,$_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new kw(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Xn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xn(rn.fromBase64String(t))}catch(a){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(t){return new Xn(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Eo(t,Xn._jsonSchema))return Xn.fromBase64String(t.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Gt("string",Xn._jsonSchemaVersion),bytes:Gt("string")};class pm{constructor(...t){for(let a=0;a<t.length;++a)if(t[a].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class W_{constructor(t){this._methodName=t}}class ka{constructor(t,a){if(!isFinite(t)||t<-90||t>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(a)||a<-180||a>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=t,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Fe(this._lat,t._lat)||Fe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ka._jsonSchemaVersion}}static fromJSON(t){if(Eo(t,ka._jsonSchema))return new ka(t.latitude,t.longitude)}}ka._jsonSchemaVersion="firestore/geoPoint/1.0",ka._jsonSchema={type:Gt("string",ka._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};class La{constructor(t){this._values=(t||[]).map((a=>a))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Eo(t,La._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((a=>typeof a=="number")))return new La(t.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:Gt("string",La._jsonSchemaVersion),vectorValues:Gt("object")};const Fw=/^__.*__$/;class Qw{constructor(t,a,s){this.data=t,this.fieldMask=a,this.fieldTransforms=s}toMutation(t,a){return this.fieldMask!==null?new Gs(t,this.data,this.fieldMask,a,this.fieldTransforms):new To(t,this.data,a,this.fieldTransforms)}}function eb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:r})}}class gm{constructor(t,a,s,o,c,h){this.settings=t,this.databaseId=a,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new gm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.gc(t),s}yc(t){const a=this.path?.child(t),s=this.Vc({path:a,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Du(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((a=>t.isPrefixOf(a)))!==void 0||this.fieldTransforms.find((a=>t.isPrefixOf(a.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(eb(this.Ac)&&Fw.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xw{constructor(t,a,s){this.databaseId=t,this.ignoreUndefinedProperties=a,this.serializer=s||Gu(t)}Cc(t,a,s,o=!1){return new gm({Ac:t,methodName:a,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tb(r){const t=r._freezeSettings(),a=Gu(r._databaseId);return new Xw(r._databaseId,!!t.ignoreUndefinedProperties,a)}function Yw(r,t,a,s,o,c={}){const h=r.Cc(c.merge||c.mergeFields?2:0,t,a,o);ib("Data must be an object, but it was:",h,s);const m=nb(s,h);let y,_;if(c.merge)y=new ra(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const T of c.mergeFields){const A=$w(t,T,a);if(!h.contains(A))throw new ge(ee.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Jw(x,A)||x.push(A)}y=new ra(x),_=h.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,_=h.fieldTransforms;return new Qw(new Qn(m),y,_)}function Kw(r,t,a,s=!1){return ym(a,r.Cc(s?4:3,t))}function ym(r,t){if(ab(r=Gr(r)))return ib("Unsupported field value:",t,r),nb(r,t);if(r instanceof W_)return(function(s,o){if(!eb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let h=0;for(const m of s){let y=ym(m,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),h++}return{arrayValue:{values:c}}})(r,t)}return(function(s,o){if((s=Gr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return D2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=dt.fromDate(s);return{timestampValue:Nu(o.serializer,c)}}if(s instanceof dt){const c=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nu(o.serializer,c)}}if(s instanceof ka)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xn)return{bytesValue:E_(o.serializer,s._byteString)};if(s instanceof Kt){const c=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:em(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof La)return(function(h,m){return{mapValue:{fields:{[Kv]:{stringValue:$v},[Tu]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Zd(m.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Ou(s)}`)})(r,t)}function nb(r,t){const a={};return qv(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zs(r,((s,o)=>{const c=ym(o,t.mc(s));c!=null&&(a[s]=c)})),{mapValue:{fields:a}}}function ab(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof ka||r instanceof Xn||r instanceof Kt||r instanceof W_||r instanceof La)}function ib(r,t,a){if(!ab(a)||!Pv(a)){const s=Ou(a);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function $w(r,t,a){if((t=Gr(t))instanceof pm)return t._internalPath;if(typeof t=="string")return sb(r,t);throw Du("Field path arguments must be of type string or ",r,!1,void 0,a)}const Zw=new RegExp("[~\\*/\\[\\]]");function sb(r,t,a){if(t.search(Zw)>=0)throw Du(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,a);try{return new pm(...t.split("."))._internalPath}catch{throw Du(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,a)}}function Du(r,t,a,s,o){const c=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;a&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${s}`),h&&(y+=` in document ${o}`),y+=")"),new ge(ee.INVALID_ARGUMENT,m+r+y)}function Jw(r,t){return r.some((a=>a.isEqual(t)))}class rb{constructor(t,a,s,o,c){this._firestore=t,this._userDataWriter=a,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const a=this._document.data.field(Xu("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a)}}}class Ww extends rb{data(){return super.data()}}function Xu(r,t){return typeof t=="string"?sb(r,t):t instanceof pm?t._internalPath:t._delegate._internalPath}function eA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vm{}class _m extends vm{}function uo(r,t,...a){let s=[];t instanceof vm&&s.push(t),s=s.concat(a),(function(c){const h=c.filter((y=>y instanceof bm)).length,m=c.filter((y=>y instanceof Yu)).length;if(h>1||h>0&&m>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Yu extends _m{constructor(t,a,s){super(),this._field=t,this._op=a,this._value=s,this.type="where"}static _create(t,a,s){return new Yu(t,a,s)}_apply(t){const a=this._parse(t);return lb(t._query,a),new ns(t.firestore,t.converter,Cd(t._query,a))}_parse(t){const a=tb(t.firestore);return(function(c,h,m,y,_,x,T){let A;if(_.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){mv(T,x);const B=[];for(const P of T)B.push(dv(y,c,P));A={arrayValue:{values:B}}}else A=dv(y,c,T)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||mv(T,x),A=Kw(m,h,T,x==="in"||x==="not-in");return Pt.create(_,x,A)})(t._query,"where",a,t.firestore._databaseId,this._field,this._op,this._value)}}function ii(r,t,a){const s=t,o=Xu("where",r);return Yu._create(o,s,a)}class bm extends vm{constructor(t,a){super(),this.type=t,this._queryConstraints=a}static _create(t,a){return new bm(t,a)}_parse(t){const a=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return a.length===1?a[0]:la.create(a,this._getOperator())}_apply(t){const a=this._parse(t);return a.getFilters().length===0?t:((function(o,c){let h=o;const m=c.getFlattenedFilters();for(const y of m)lb(h,y),h=Cd(h,y)})(t._query,a),new ns(t.firestore,t.converter,Cd(t._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xm extends _m{constructor(t,a){super(),this._field=t,this._direction=a,this.type="orderBy"}static _create(t,a){return new xm(t,a)}_apply(t){const a=(function(o,c,h){if(o.startAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(c,h)})(t._query,this._field,this._direction);return new ns(t.firestore,t.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Wr(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,a))}}function Lr(r,t="asc"){const a=t,s=Xu("orderBy",r);return xm._create(s,a)}class Em extends _m{constructor(t,a,s){super(),this.type=t,this._limit=a,this._limitType=s}static _create(t,a,s){return new Em(t,a,s)}_apply(t){return new ns(t.firestore,t.converter,wu(t._query,this._limit,this._limitType))}}function hu(r){return JT("limit",r),Em._create("limit",r,"F")}function dv(r,t,a){if(typeof(a=Gr(a))=="string"){if(a==="")throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(t)&&a.indexOf("/")!==-1)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const s=t.path.child(pt.fromString(a));if(!we.isDocumentKey(s))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return My(r,new we(s))}if(a instanceof Kt)return My(r,a._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ou(a)}.`)}function mv(r,t){if(!Array.isArray(r)||r.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lb(r,t){const a=(function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(a!==null)throw a===t.op?new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${a.toString()}' filters.`)}class tA{convertValue(t,a="none"){switch(Wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,a);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,a);case 11:return this.convertObject(t.mapValue,a);case 10:return this.convertVectorValue(t.mapValue);default:throw Re(62114,{value:t})}}convertObject(t,a){return this.convertObjectMap(t.fields,a)}convertObjectMap(t,a="none"){const s={};return zs(t,((o,c)=>{s[o]=this.convertValue(c,a)})),s}convertVectorValue(t){const a=t.fields?.[Tu].arrayValue?.values?.map((s=>Rt(s.doubleValue)));return new La(a)}convertGeoPoint(t){return new ka(Rt(t.latitude),Rt(t.longitude))}convertArray(t,a){return(t.values||[]).map((s=>this.convertValue(s,a)))}convertServerTimestamp(t,a){switch(a){case"previous":const s=ku(t);return s==null?null:this.convertValue(s,a);case"estimate":return this.convertTimestamp(go(t));default:return null}}convertTimestamp(t){const a=Zi(t);return new dt(a.seconds,a.nanos)}convertDocumentKey(t,a){const s=pt.fromString(t);st(N_(s),9688,{name:t});const o=new yo(s.get(1),s.get(3)),c=new we(s.popFirst(5));return o.isEqual(a)||li(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),c}}function nA(r,t,a){let s;return s=r?r.toFirestore(t):t,s}class su{constructor(t,a){this.hasPendingWrites=t,this.fromCache=a}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zr extends rb{constructor(t,a,s,o,c,h){super(t,a,s,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const a=new du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,a={}){if(this._document){const s=this._document.data.field(Xu("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,a.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,a={};return a.type=zr._jsonSchemaVersion,a.bundle="",a.bundleSource="DocumentSnapshot",a.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?a:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),a.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),a)}}zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",zr._jsonSchema={type:Gt("string",zr._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class du extends zr{data(t={}){return super.data(t)}}class Pr{constructor(t,a,s,o){this._firestore=t,this._userDataWriter=a,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((a=>t.push(a))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,a){this._snapshot.docs.forEach((s=>{t.call(a,new du(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const a=!!t.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const y=new du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,x=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),x=h.indexOf(m.doc.key)),{type:aA(m.type),doc:y,oldIndex:_,newIndex:x}}))}})(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Fd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const a=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(a.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function aA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:r})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:Gt("string",Pr._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class iA extends tA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xn(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,a)}}function Tm(r){r=bu(r,ns);const t=bu(r.firestore,mm),a=J_(t),s=new iA(t);return eA(r._query),zw(a,r._query).then((o=>new Pr(t,s,r,o)))}function sA(r,t){const a=bu(r.firestore,mm),s=Gw(r),o=nA(r.converter,t);return rA(a,[Yw(tb(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,si.exists(!1))]).then((()=>s))}function rA(r,t){return(function(s,o){const c=new Yi;return s.asyncQueue.enqueueAndForget((async()=>Aw(await Bw(s),o,c))),c.promise})(J_(r),t)}(function(t,a=!0){(function(o){$r=o})(CT),_u(new ho("firestore",((s,{instanceIdentifier:o,options:c})=>{const h=s.getProvider("app").getImmediate(),m=new mm(new qT(s.getProvider("auth-internal")),new QT(h,s.getProvider("app-check-internal")),(function(_,x){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(_.options.projectId,x)})(h,o),h);return c={useFetchStreams:a,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Br(yy,vy,t),Br(yy,vy,"esm2020")})();const lA={apiKey:"AIzaSyBKsN2qQ7oc3l5MrNXpWtHnxLlMqM3PFSA",authDomain:"gugudan-e4c77.firebaseapp.com",projectId:"gugudan-e4c77",storageBucket:"gugudan-e4c77.firebasestorage.app",messagingSenderId:"798815663534",appId:"1:798815663534:web:9e4aacdbd8acfc36c6fc67"},oA=Rv(lA),Ku=qw(oA);function ob(){let r=localStorage.getItem("chromafall_player_id");return r||(r="player_"+Math.random().toString(36).substring(2,15)+Date.now().toString(36),localStorage.setItem("chromafall_player_id",r)),r}function cb(){return localStorage.getItem("chromafall_player_name")||"Player"}function ub(r){localStorage.setItem("chromafall_player_name",r)}async function cA(r){try{return(await sA(Qu(Ku,"rankings"),{...r,createdAt:dt.now()})).id}catch(t){return console.error("  :",t),null}}async function uA(r="all",t="classic",a=100){try{let s;const o=Qu(Ku,"rankings");if(r==="daily"){const m=new Date;m.setHours(0,0,0,0),s=uo(o,ii("gameMode","==",t),ii("createdAt",">=",dt.fromDate(m)),Lr("createdAt","desc"),Lr("score","desc"),hu(a))}else if(r==="weekly"){const m=new Date;m.setDate(m.getDate()-7),m.setHours(0,0,0,0),s=uo(o,ii("gameMode","==",t),ii("createdAt",">=",dt.fromDate(m)),Lr("createdAt","desc"),Lr("score","desc"),hu(a))}else s=uo(o,ii("gameMode","==",t),Lr("score","desc"),hu(a));const c=await Tm(s),h=[];return c.forEach(m=>{h.push({id:m.id,...m.data()})}),(r==="daily"||r==="weekly")&&h.sort((m,y)=>y.score-m.score),h}catch(s){return console.error("  :",s),[]}}async function fA(r,t="classic"){try{const a=Qu(Ku,"rankings"),s=uo(a,ii("playerId","==",r),ii("gameMode","==",t),Lr("score","desc"),hu(1)),o=await Tm(s);if(o.empty)return null;const c=o.docs[0];return{id:c.id,...c.data()}}catch(a){return console.error("    :",a),null}}async function hA(r,t="classic"){try{const a=await fA(r,t);if(!a)return-1;const s=Qu(Ku,"rankings"),o=uo(s,ii("gameMode","==",t),ii("score",">",a.score));return(await Tm(o)).size+1}catch(a){return console.error("   :",a),-1}}function dA({onRestart:r,onMainMenu:t,onContinue:a}){const{score:s,level:o,maxCombo:c,chainCount:h,gameTime:m,continues:y,statistics:_,gameMode:x}=He(),{currency:T,addPersonalBest:A}=Yn(),{playSound:U}=oa(),[B,P]=se.useState(!1),[k,V]=se.useState(!1),[J,ne]=se.useState(cb()),[re,ce]=se.useState(J==="Player"),[oe,M]=se.useState(J),S=s>_.highScore-s,C=y<3,N=X=>{const le=Math.floor(X/60),xe=X%60;return`${le} ${xe}`},D=X=>X.toLocaleString(),L=async()=>{if(!(B||k||s===0)){oe.trim()&&oe!==J&&(ub(oe.trim()),ne(oe.trim())),V(!0);try{await cA({playerId:ob(),playerName:oe.trim()||J,score:s,level:o,maxCombo:c,maxChain:h,gameMode:x,playTime:m})&&(P(!0),U("rewardGet"))}catch(X){console.error("  :",X)}finally{V(!1),ce(!1)}}};se.useEffect(()=>{U("gameOver"),S&&s>0&&setTimeout(()=>{U("highScore"),zd({particleCount:100,spread:70,origin:{y:.6}})},500),A("classic",s),s>0&&J!=="Player"&&L()},[]);const R=()=>s>=1e6?{grade:"S+",color:"text-purple-400"}:s>=5e5?{grade:"S",color:"text-yellow-400"}:s>=2e5?{grade:"A",color:"text-green-400"}:s>=1e5?{grade:"B",color:"text-blue-400"}:s>=5e4?{grade:"C",color:"text-gray-300"}:{grade:"D",color:"text-gray-500"},{grade:Ue,color:We}=R();return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,y:50},animate:{scale:1,y:0},transition:{delay:.2,type:"spring"},children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"GAME OVER"}),S&&s>0&&g.jsx(ie.p,{className:"text-yellow-400 font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:"NEW HIGH SCORE!"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-gray-400 text-sm",children:"SCORE"}),g.jsx(ie.p,{className:"text-4xl font-bold text-white",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:D(s)})]}),g.jsx(ie.div,{className:`text-6xl font-bold ${We}`,initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.4,type:"spring"},children:Ue})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"LEVEL"}),g.jsx("p",{className:"text-xl font-bold text-game-accent",children:o})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX COMBO"}),g.jsxs("p",{className:"text-xl font-bold text-orange-400",children:["x",c]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"MAX CHAIN"}),g.jsxs("p",{className:"text-xl font-bold text-purple-400",children:[h,""]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[g.jsx("p",{className:"text-gray-400 text-xs",children:"TIME"}),g.jsx("p",{className:"text-xl font-bold text-gray-300",children:N(m)})]})]}),g.jsxs("div",{className:"space-y-3",children:[C&&a&&g.jsxs(ie.button,{className:`w-full py-4 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white flex items-center justify-center gap-2\r
                         hover:from-green-400 hover:to-green-500 transition-all`,whileTap:{scale:.98},onClick:a,children:[g.jsx("span",{children:""}),g.jsx("span",{children:"  "}),g.jsxs("span",{className:"text-sm opacity-70",children:["(",3-y," )"]})]}),g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:r,children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:" "}),g.jsxs(ie.button,{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white flex items-center justify-center gap-2\r
                       hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:()=>{U("rewardGet")},children:[g.jsx("span",{children:""}),g.jsx("span",{children:"   2"})]})]}),s>0&&!B&&g.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl border border-purple-500/30",children:[g.jsx("p",{className:"text-center text-sm text-gray-300 mb-2",children:" "}),re?g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:oe,onChange:X=>M(X.target.value),placeholder:" ",maxLength:12,className:"flex-1 bg-black/50 border border-purple-500 rounded-lg px-3 py-2 text-white text-sm",autoFocus:!0,onKeyDown:X=>X.key==="Enter"&&L()}),g.jsx("button",{onClick:L,disabled:k||!oe.trim(),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:k?"...":""})]}):g.jsx("button",{onClick:L,disabled:k,className:"w-full py-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold text-sm disabled:opacity-50",children:k?" ...":`${J} `})]}),B&&g.jsx("div",{className:"mt-4 p-3 bg-green-900/30 rounded-xl border border-green-500/30 text-center",children:g.jsx("span",{className:"text-green-400 font-bold",children:" !"})}),g.jsx("div",{className:"mt-4 text-center",children:g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",onClick:()=>{const X=`ChromaFall ${D(s)} !  ${o},  ${c} !`;navigator.share?navigator.share({title:"ChromaFall",text:X}):(navigator.clipboard.writeText(X),alert("  !"))},children:"  "})})]})})}const mA=[{icon:"",name:"",desc:"   3x3    ",color:"from-red-500 to-orange-500"},{icon:"",name:"",desc:"       ",color:"from-yellow-400 to-yellow-600"},{icon:"",name:"",desc:"     +    ",color:"from-green-400 to-green-600"},{icon:"",name:"",desc:"2   ( )",color:"from-cyan-300 to-blue-500"},{icon:"",name:"",desc:" !      ",color:"from-gray-400 to-gray-600"},{icon:"",name:"",desc:"      ",color:"from-purple-400 to-pink-500"},{icon:"",name:"",desc:"      ",color:"from-pink-400 to-rose-500"},{icon:"2",name:"",desc:"   2 ",color:"from-amber-400 to-orange-500"},{icon:"",name:"",desc:"    ",color:"from-red-400 via-yellow-400 to-blue-400"}],pA=[{key:" ",desc:"  "},{key:"",desc:"  ( )"},{key:"Space",desc:"  (  + )"},{key:"Z / ",desc:"  ()"},{key:"P / ESC",desc:""}],gA=[" 4      ()","       "," (Space)     ","       ","    3!"];function yA({onClose:r}){const[t,a]=se.useState("blocks");return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:s=>s.stopPropagation(),children:[g.jsxs("div",{className:"bg-gradient-to-r from-game-accent to-purple-600 p-4 flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),g.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30",children:""})]}),g.jsx("div",{className:"flex border-b border-gray-700",children:[{id:"blocks",label:" "},{id:"controls",label:""},{id:"tips",label:""}].map(s=>g.jsx("button",{onClick:()=>a(s.id),className:`flex-1 py-3 text-sm font-bold transition-colors ${t===s.id?"text-game-accent border-b-2 border-game-accent bg-game-accent/10":"text-gray-400 hover:text-white"}`,children:s.label},s.id))}),g.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:g.jsxs(un,{mode:"wait",children:[t==="blocks"&&g.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:mA.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center text-2xl`,children:s.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-white",children:s.name}),g.jsx("p",{className:"text-xs text-gray-400",children:s.desc})]})]},o))},"blocks"),t==="controls"&&g.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[g.jsx("p",{className:"text-gray-400 text-sm mb-4",children:" &  "}),pA.map((s,o)=>g.jsxs("div",{className:"flex items-center gap-4 bg-black/30 rounded-lg p-3",children:[g.jsx("div",{className:"w-20 text-center",children:g.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded text-white font-mono text-sm",children:s.key})}),g.jsx("p",{className:"text-white flex-1",children:s.desc})]},o)),g.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:g.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",g.jsx("strong",{children:":"}),"      "]})})]},"controls"),t==="tips"&&g.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[gA.map((s,o)=>g.jsx("div",{className:"bg-black/30 rounded-lg p-4 text-white",children:s},o)),g.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-900/30 to-red-900/30 rounded-lg border border-orange-500/30",children:[g.jsx("h4",{className:"font-bold text-orange-400 mb-2",children:"  "}),g.jsxs("p",{className:"text-sm text-gray-300",children:["     !     ",g.jsx("strong",{className:"text-orange-400",children:"3"})," !"]})]})]},"tips")]})})]})})}function vA({onResume:r,onRestart:t,onSettings:a,onMainMenu:s}){const{score:o,level:c,gameTime:h}=He(),{playSound:m}=oa(),[y,_]=se.useState(!1),x=A=>{m("buttonClick"),A()},T=A=>{const U=Math.floor(A/60),B=A%60;return`${U}:${B.toString().padStart(2,"0")}`};return g.jsxs(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-xs w-full mx-4",initial:{scale:.8,y:-50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:20},children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:""}),g.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:o.toLocaleString()})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-game-accent font-bold",children:c})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-gray-400 text-xs",children:""}),g.jsx("p",{className:"text-white font-bold",children:T(h)})]})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-game-accent to-blue-600 rounded-xl\r
                       font-bold text-white text-lg hover:from-blue-500 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(r),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(t),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-200\r
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:()=>x(a),children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-gradient-to-r from-purple-700 to-blue-700 rounded-xl font-bold text-white\r
                       hover:from-purple-600 hover:to-blue-600 transition-all`,whileTap:{scale:.98},onClick:()=>{m("buttonClick"),_(!0)},children:" "}),g.jsx(ie.button,{className:`w-full py-3 bg-red-900/50 rounded-xl font-bold text-red-300\r
                       hover:bg-red-800/50 transition-all`,whileTap:{scale:.98},onClick:()=>x(s),children:"  "})]})]}),g.jsx(un,{children:y&&g.jsx(yA,{onClose:()=>_(!1)})})]})}function pv({onClose:r}){const{settings:t,updateSettings:a}=Yn(),{playSound:s}=oa(),o=(h,m)=>{s("buttonClick"),a({[h]:m})},c=(h,m)=>{a({[h]:m})};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4 max-h-[80vh] overflow-y-auto",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:h=>h.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),g.jsx("button",{className:"text-gray-400 hover:text-white transition-colors text-2xl",onClick:r,children:""})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.soundEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("soundEnabled",!t.soundEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.soundEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.soundEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.soundVolume,onChange:h=>c("soundVolume",parseFloat(h.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.soundVolume*100),"%"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.musicEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("musicEnabled",!t.musicEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.musicEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.musicEnabled&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-400 text-sm w-20",children:""}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.musicVolume,onChange:h=>c("musicVolume",parseFloat(h.target.value)),className:"flex-1 accent-game-accent"}),g.jsxs("span",{className:"text-gray-400 text-sm w-10",children:[Math.round(t.musicVolume*100),"%"]})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:""}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.hapticEnabled?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("hapticEnabled",!t.hapticEnabled),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.hapticEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:"  "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.showGhostBlock?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("showGhostBlock",!t.showGhostBlock),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.showGhostBlock?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white",children:" "}),g.jsx("button",{className:`w-14 h-8 rounded-full transition-colors ${t.colorBlindMode?"bg-game-accent":"bg-gray-600"}`,onClick:()=>o("colorBlindMode",!t.colorBlindMode),children:g.jsx(ie.div,{className:"w-6 h-6 bg-white rounded-full shadow-md",animate:{x:t.colorBlindMode?26:2},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),g.jsxs("div",{className:"space-y-4 mb-6",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:["swipe","buttons","both"].map(h=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.controlType===h?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({controlType:h})},children:[h==="swipe"&&"",h==="buttons"&&"",h==="both"&&" "]},h))})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase",children:""}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:["auto","high","medium","low"].map(h=>g.jsxs("button",{className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.performanceMode===h?"bg-game-accent text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,onClick:()=>{s("buttonClick"),a({performanceMode:h})},children:[h==="auto"&&"",h==="high"&&"",h==="medium"&&"",h==="low"&&""]},h))})]}),g.jsx(ie.button,{className:`w-full mt-6 py-3 bg-gray-700 rounded-xl font-bold text-white\r
                     hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:r,children:""})]})})}function _A({onNextLevel:r,onMainMenu:t}){const{score:a,puzzleLevel:s,movesRemaining:o,levelObjectives:c}=He(),h=o*100,m=a+h;return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs(ie.div,{className:"bg-gradient-to-b from-purple-900 to-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4 border-2 border-purple-500",initial:{scale:.5,y:50},animate:{scale:1,y:0},transition:{type:"spring",damping:15},children:[g.jsxs(ie.div,{className:"text-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[g.jsx(ie.div,{className:"text-6xl mb-2",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:.5,delay:.3},children:""}),g.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"PUZZLE CLEAR!"}),g.jsxs("p",{className:"text-purple-300 mt-1",children:["Level ",s," Complete"]})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-4",children:[g.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"OBJECTIVES"}),g.jsx("div",{className:"space-y-2",children:c.map((y,_)=>g.jsxs(ie.div,{className:"flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+_*.1},children:[g.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center",children:g.jsx("span",{className:"text-white text-xs",children:""})}),g.jsxs("span",{className:"text-gray-300 text-sm flex-1",children:[y.type==="score"&&` ${y.target.toLocaleString()}`,y.type==="clearBlocks"&&` ${y.target} `,y.type==="chains"&&`${y.target}`,y.type==="clearColor"&&`  ${y.target} `]}),g.jsxs("span",{className:"text-green-400 text-sm",children:[y.current,"/",y.target]})]},_))})]}),g.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-gray-400 text-sm",children:""}),g.jsx("span",{className:"text-white font-mono",children:a.toLocaleString()})]}),o>0&&g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("span",{className:"text-gray-400 text-sm",children:["   (",o,")"]}),g.jsxs("span",{className:"text-yellow-400 font-mono",children:["+",h.toLocaleString()]})]}),g.jsx("div",{className:"border-t border-gray-700 pt-2 mt-2",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-purple-300 font-bold",children:" "}),g.jsx("span",{className:"text-2xl font-bold text-white font-mono",children:m.toLocaleString()})]})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs(ie.button,{className:`w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl
                       font-bold text-white text-lg hover:from-purple-500 hover:to-pink-500 transition-all`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,children:[" Level ",s+1]}),g.jsx(ie.button,{className:`w-full py-3 bg-gray-700 rounded-xl font-bold text-gray-300
                       hover:bg-gray-600 transition-all`,whileTap:{scale:.98},onClick:t,children:"  "})]})]})})}function bA({onStartGame:r,onOpenShop:t,onOpenSettings:a,onOpenLeaderboard:s,onOpenBattlePass:o,onOpenDailyReward:c}){const{currency:h,playerName:m,playerLevel:y,streakInfo:_,checkDailyRewardAvailable:x}=Yn(),{playSound:T}=oa(),[A,U]=se.useState(!1),[B,P]=se.useState(!1);se.useEffect(()=>{P(x())},[x]);const k=V=>{T("buttonClick"),V()};return g.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col items-center justify-center text-white bg-[#050510]",children:[g.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-[#050510] to-[#050510]"}),[...Array(15)].map((V,J)=>g.jsx(ie.div,{className:"absolute rounded-full blur-xl",style:{background:["#ff4757","#3742fa","#2ed573","#ffa502"][J%4],width:Math.random()*100+50,height:Math.random()*100+50,opacity:.1,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-100],x:[0,Math.random()*50-25],scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"easeInOut"}},J))]}),g.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>k(a),className:"w-10 h-10 rounded-full bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors",children:""}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-yellow-400 font-mono",children:h.coins.toLocaleString()})]}),g.jsxs("div",{className:"glass-panel px-3 py-1.5 rounded-full flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("span",{className:"font-bold text-purple-400 font-mono",children:h.gems.toLocaleString()})]})]})]}),g.jsxs("div",{className:"z-10 w-full max-w-md px-6 flex flex-col items-center gap-8",children:[g.jsxs("div",{className:"text-center relative",children:[g.jsx(ie.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},children:g.jsxs("h1",{className:"text-6xl md:text-7xl font-black italic tracking-tighter",style:{fontFamily:"var(--font-display)"},children:[g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300 neon-text",children:"CHROMA"}),g.jsx("br",{}),g.jsx("span",{className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]",children:"FALL"})]})}),g.jsx(ie.p,{className:"text-gray-400 mt-2 tracking-widest text-sm uppercase",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Color Fusion Puzzle"})]}),g.jsxs(ie.div,{className:"glass-panel w-full p-4 rounded-2xl flex items-center justify-between",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xl font-bold shadow-lg",children:m.charAt(0)}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-lg",children:m}),g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[g.jsxs("span",{className:"bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded",children:["Lv.",y]}),_.currentStreak>0&&g.jsxs("span",{className:"text-orange-400",children:[" ",_.currentStreak," "]})]})]})]}),B&&g.jsx("button",{onClick:()=>k(c),className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs font-bold px-3 py-1.5 rounded-full animate-bounce shadow-lg shadow-orange-500/30",children:"  "})]}),g.jsxs(ie.div,{className:"w-full space-y-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[g.jsxs("button",{onClick:()=>k(()=>U(!0)),className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl font-bold text-xl text-white shadow-[0_0_20px_rgba(59,130,246,0.4)] hover:shadow-[0_0_30px_rgba(59,130,246,0.6)] hover:scale-[1.02] active:scale-[0.98] transition-all border border-white/10 group relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:animate-[shine_1s_infinite]"}),g.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[g.jsx("span",{className:"text-2xl",children:""})," GAME START"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsx(cd,{icon:"",label:"",onClick:()=>k(t),color:"bg-pink-600/20"}),g.jsx(cd,{icon:"",label:"",onClick:()=>k(s),color:"bg-yellow-600/20"}),g.jsx(cd,{icon:"",label:"",onClick:()=>k(o),color:"bg-green-600/20"})]})]})]}),g.jsx(un,{children:A&&g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>U(!1),children:g.jsxs(ie.div,{className:"w-full max-w-md bg-[#1a1a2e] border border-white/10 rounded-3xl overflow-hidden shadow-2xl",initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},onClick:V=>V.stopPropagation(),children:[g.jsxs("div",{className:"p-6 bg-gradient-to-b from-[#2a2a4e] to-[#1a1a2e]",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-6",style:{fontFamily:"var(--font-display)"},children:"SELECT MODE"}),g.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:Object.entries(_v).map(([V,J])=>g.jsxs("button",{onClick:()=>{k(()=>{U(!1),r(V)})},className:"w-full p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-left flex items-center gap-4 group",children:[g.jsx("span",{className:"text-3xl group-hover:scale-110 transition-transform",children:J.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:J.name}),J.hasTimeLimit&&g.jsx("span",{className:"text-xs text-orange-400 bg-orange-400/10 px-2 py-0.5 rounded",children:"TIME"})]}),g.jsx("p",{className:"text-sm text-gray-400",children:J.description})]}),g.jsx("span",{className:"text-gray-500 group-hover:text-white transition-colors",children:""})]},V))})]}),g.jsx("div",{className:"p-4 bg-[#151525]",children:g.jsx("button",{onClick:()=>U(!1),className:"w-full py-3 text-gray-400 font-bold hover:text-white transition-colors",children:""})})]})})})]})}function cd({icon:r,label:t,onClick:a,color:s}){return g.jsxs("button",{onClick:a,className:`flex flex-col items-center justify-center gap-2 py-4 rounded-xl border border-white/5 hover:border-white/20 transition-all active:scale-95 ${s} hover:brightness-125`,children:[g.jsx("span",{className:"text-2xl drop-shadow-md",children:r}),g.jsx("span",{className:"text-sm font-bold text-gray-200",children:t})]})}function xA({onClose:r}){const{claimDailyReward:t,dailyRewardDay:a,checkDailyRewardAvailable:s,streakInfo:o}=Yn(),{playSound:c}=oa(),[h,m]=se.useState(!1),[y,_]=se.useState(null),x=s(),T=()=>{if(!x||h)return;const A=t();A&&(c("rewardGet"),m(!0),_(A),zd({particleCount:50,spread:60,origin:{y:.7}}))};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-sm w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:A=>A.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:" "}),g.jsx("div",{className:"text-center mb-6",children:g.jsxs("p",{className:"text-orange-400",children:[" ",o.currentStreak,"  "]})}),g.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:md.map((A,U)=>{const B=U+1,P=B<(a||0)+1,k=B===(a||0)+1;return g.jsxs(ie.div,{className:`relative p-2 rounded-lg text-center ${P?"bg-gray-700 opacity-50":k?"bg-gradient-to-b from-game-accent to-blue-600 ring-2 ring-yellow-400":"bg-gray-800"}`,animate:k&&x?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:1.5},children:[g.jsx("p",{className:"text-xs text-gray-400",children:"Day"}),g.jsx("p",{className:"text-lg font-bold text-white",children:B}),g.jsx("div",{className:"mt-1",children:A.reward.gems?g.jsxs("p",{className:"text-xs text-purple-400",children:["",A.reward.gems]}):g.jsxs("p",{className:"text-xs text-yellow-400",children:["",A.reward.coins]})}),P&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:""})})]},B)})}),h&&y?g.jsxs(ie.div,{className:"text-center py-4",initial:{scale:0},animate:{scale:1},children:[g.jsx("p",{className:"text-xl font-bold text-green-400 mb-2",children:" !"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[y.coins&&g.jsxs("p",{className:"text-yellow-400",children:[" +",y.coins]}),y.gems&&g.jsxs("p",{className:"text-purple-400",children:[" +",y.gems]})]})]}):x?g.jsx(ie.button,{className:`w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                       font-bold text-white text-lg hover:from-yellow-400 hover:to-orange-400 transition-all`,whileTap:{scale:.98},onClick:T,children:"  "}):g.jsxs("div",{className:"text-center py-4",children:[g.jsx("p",{className:"text-gray-400",children:"   "}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"  !"})]}),g.jsx("button",{className:`w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300\r
                     hover:bg-gray-600 transition-all`,onClick:r,children:""})]})})}function EA({onClose:r}){const{currency:t,ownedSkins:a,ownedThemes:s,equippedSkinId:o,equippedThemeId:c,purchaseSkin:h,purchaseTheme:m,equipSkin:y,equipTheme:_}=Yn(),{playSound:x}=oa(),[T,A]=se.useState("skins"),U=V=>{h(V)&&x("purchaseSuccess")},B=V=>{m(V)&&x("purchaseSuccess")},P=V=>{x("buttonClick"),y(V)},k=V=>{x("buttonClick"),_(V)};return g.jsxs(ie.div,{className:"fixed inset-0 bg-game-bg z-50 flex flex-col",initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"tween"},children:[g.jsxs("div",{className:"flex items-center justify-between p-4 bg-game-panel/80",children:[g.jsx("button",{className:"text-2xl text-gray-400 hover:text-white",onClick:r,children:""}),g.jsx("h1",{className:"text-xl font-bold text-white",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:t.coins.toLocaleString()})]}),g.jsxs("div",{className:"bg-black/30 rounded-full px-3 py-1 flex items-center gap-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-purple-400 font-bold text-sm",children:t.gems.toLocaleString()})]})]})]}),g.jsx("div",{className:"flex bg-game-panel/50",children:["skins","themes","gems"].map(V=>g.jsxs("button",{className:`flex-1 py-3 font-bold transition-colors ${T===V?"text-game-accent border-b-2 border-game-accent":"text-gray-400"}`,onClick:()=>{x("buttonClick"),A(V)},children:[V==="skins"&&" ",V==="themes"&&" ",V==="gems"&&" "]},V))}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g.jsxs(un,{mode:"wait",children:[T==="skins"&&g.jsx(ie.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:dd.map(V=>{const J=a.some(ce=>ce.id===V.id),ne=o===V.id,re=V.currency==="coins"?t.coins>=V.price:V.currency==="gems"?t.gems>=V.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 ${ne?"ring-2 ring-game-accent":""}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("p",{className:"font-bold text-white",children:V.name}),g.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:Tx[V.rarity]},children:Sx[V.rarity]})]}),g.jsx("div",{className:"bg-black/40 rounded-lg p-3 mb-3",children:g.jsx("div",{className:"flex gap-1.5 justify-center",children:(()=>{const ce=fo[V.id]||fo.classic;return ce.colors.slice(0,4).map((oe,M)=>g.jsxs(ie.div,{className:"relative overflow-hidden",style:{width:32,height:32,borderRadius:ce.borderRadius,background:ce.innerEffect==="glow"?`radial-gradient(circle at 30% 30%, ${oe}dd, ${oe}88 70%, ${oe}44)`:ce.innerEffect==="glass"?`linear-gradient(145deg, ${oe}ee, ${oe}aa 50%, ${oe}cc)`:ce.innerEffect==="gradient"?`linear-gradient(135deg, ${oe}, ${oe}88, ${oe}cc)`:ce.innerEffect==="metallic"?`linear-gradient(145deg, ${oe}ff, ${oe}66 30%, ${oe}cc 70%, ${oe}ff)`:ce.innerEffect==="flat"?oe:`linear-gradient(145deg, ${oe}, ${oe}dd)`,border:ce.borderWidth>0?`${ce.borderWidth}px ${ce.borderStyle} ${oe}aa`:"none",boxShadow:ce.glowIntensity>0?`0 0 ${Math.round(ce.glowIntensity*15)}px ${oe}, 0 0 ${Math.round(ce.glowIntensity*5)}px ${oe}`:"0 2px 4px rgba(0,0,0,0.3)"},animate:ce.animation==="pulse"?{boxShadow:[`0 0 8px ${oe}`,`0 0 20px ${oe}`,`0 0 8px ${oe}`]}:ce.animation==="fire"?{y:[0,-3,0,-1,0]}:ce.animation==="ice"?{opacity:[1,.7,1]}:ce.animation==="electric"?{x:[-2,2,-1,1,0]}:void 0,transition:ce.animation==="pulse"?{duration:1.2,repeat:1/0}:ce.animation==="fire"?{duration:.4,repeat:1/0}:ce.animation==="ice"?{duration:2.5,repeat:1/0}:ce.animation==="electric"?{duration:.15,repeat:1/0}:void 0,children:[(ce.innerEffect==="glossy"||ce.innerEffect==="glass")&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-white/10 to-transparent rounded-inherit"}),ce.innerEffect==="metallic"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/60 via-transparent to-black/30"}),ce.texture==="lines"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.2) 2px, rgba(255,255,255,0.2) 4px)"}}),ce.texture==="dots"&&g.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.5) 1px, transparent 1px)",backgroundSize:"6px 6px"}}),ce.texture==="cracks"&&g.jsx("div",{className:"absolute inset-0 opacity-25",style:{background:"linear-gradient(30deg, transparent 40%, rgba(255,255,255,0.3) 41%, transparent 42%), linear-gradient(-30deg, transparent 60%, rgba(255,255,255,0.2) 61%, transparent 62%)"}}),ce.texture==="circuit"&&g.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.4) 50%, transparent 52%)",backgroundSize:"8px 8px"}}),ce.animation==="shimmer"&&g.jsx(ie.div,{className:"absolute inset-0",style:{background:"linear-gradient(110deg, transparent 25%, rgba(255,255,255,0.6) 50%, transparent 75%)"},animate:{x:["-150%","250%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:.5}})]},M))})()})}),g.jsxs("p",{className:"text-[10px] text-gray-400 mb-2 text-center",children:[V.id==="classic"&&"  ",V.id==="neon"&&"  + ",V.id==="candy"&&"  ",V.id==="pixel"&&"8  ",V.id==="galaxy"&&"  + ",V.id==="crystal"&&"  +  ",V.id==="holographic"&&" ",V.id==="animated_fire"&&"  ",V.id==="animated_ice"&&"  ",V.id==="animated_electric"&&"  "]}),J?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold ${ne?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>P(V.id),disabled:ne,children:ne?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-1 ${re||V.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>U(V.id),disabled:!re&&V.currency!=="free",children:V.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[V.currency==="coins"?"":"",V.price," "]})})]},V.id)})},"skins"),T==="themes"&&g.jsx(ie.div,{className:"grid grid-cols-2 gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:pu.map(V=>{const J=s.some(ce=>ce.id===V.id),ne=c===V.id,re=V.currency==="coins"?t.coins>=V.price:V.currency==="gems"?t.gems>=V.price:!0;return g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-3 ${ne?"ring-2 ring-game-accent":""}`,children:[g.jsx("p",{className:"font-bold text-white mb-1 text-sm",children:V.name}),V.description&&g.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:V.description}),g.jsx("div",{className:"h-24 rounded-lg mb-2 p-2 overflow-hidden relative",style:{background:V.colors.backgroundGradient||V.colors.background,border:`1px solid ${V.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:g.jsxs("div",{className:"w-full h-full rounded relative",style:{backgroundColor:V.colors.panel,border:`1px solid ${V.colors.panelBorder||"rgba(255,255,255,0.1)"}`},children:[g.jsx("div",{className:"absolute top-2 left-2 w-12 h-1.5 rounded-full",style:{backgroundColor:V.colors.accent}}),g.jsxs("div",{className:"absolute top-5 left-2 flex flex-col gap-1",children:[g.jsx("div",{className:"w-8 h-1 rounded",style:{backgroundColor:V.colors.text||"#fff",opacity:.8}}),g.jsx("div",{className:"w-6 h-1 rounded",style:{backgroundColor:V.colors.textSecondary||"#888",opacity:.6}})]}),g.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-0.5",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#ff4757"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3742fa"}}),g.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#2ed573"}})]}),g.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:V.colors.success||"#2ed573"}}),g.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:V.colors.danger||"#ff4757"}})]})]})}),J?g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm ${ne?"bg-game-accent text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,onClick:()=>k(V.id),disabled:ne,children:ne?"":""}):g.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm flex items-center justify-center gap-1 ${re||V.currency==="free"?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-gray-700 text-gray-500"}`,onClick:()=>B(V.id),disabled:!re&&V.currency!=="free",children:V.currency==="free"?"  ":g.jsxs(g.Fragment,{children:[V.currency==="coins"?"":"",V.price," "]})})]},V.id)})},"themes"),T==="gems"&&g.jsxs(ie.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[Ex.map(V=>g.jsxs("div",{className:`bg-game-panel/80 rounded-xl p-4 flex items-center justify-between ${V.highlight?"ring-2 ring-yellow-400":""} ${V.bestValue?"ring-2 ring-purple-400":""}`,children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("p",{className:"font-bold text-white text-lg",children:[V.amount," "]}),V.bonusAmount>0&&g.jsxs("span",{className:"text-green-400 text-sm",children:["+",V.bonusAmount," "]})]}),g.jsx("p",{className:"text-sm text-gray-400",children:V.label})]})]}),g.jsxs("button",{className:`bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-xl\r
                               font-bold text-white hover:from-purple-400 hover:to-pink-400`,onClick:()=>{x("purchaseSuccess"),alert(`${V.amount+V.bonusAmount}   (   )`)},children:["$",V.price]})]},V.id)),g.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-4xl",children:""}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-white",children:" "}),g.jsx("p",{className:"text-sm text-green-200",children:"  50  "})]})]}),g.jsx("button",{className:`bg-white/20 px-6 py-3 rounded-xl font-bold text-white\r
                             hover:bg-white/30`,onClick:()=>{x("rewardGet"),alert("   50   ( SDK  )")},children:""})]})]},"gems")]})})]})}function TA({onClose:r}){const[t,a]=se.useState([]),[s,o]=se.useState(!0),[c,h]=se.useState("all"),[m,y]=se.useState("classic"),[_,x]=se.useState(-1),[T,A]=se.useState(cb()),[U,B]=se.useState(!1),[P,k]=se.useState(T),V=ob(),J=se.useCallback(async()=>{o(!0);try{const S=await uA(c,m,50);a(S);const C=await hA(V,m);x(C)}catch(S){console.error("  :",S)}finally{o(!1)}},[c,m,V]);se.useEffect(()=>{J()},[J]);const ne=()=>{P.trim()&&(ub(P.trim()),A(P.trim())),B(!1)},re=S=>S===1?"bg-gradient-to-r from-yellow-500 to-amber-600 text-black":S===2?"bg-gradient-to-r from-gray-300 to-gray-400 text-black":S===3?"bg-gradient-to-r from-orange-400 to-orange-600 text-black":"bg-white/10 text-white",ce=S=>S===1?"":S===2?"":S===3?"":S.toString(),oe=S=>{const C=Math.floor(S/60),N=S%60;return`${C}:${N.toString().padStart(2,"0")}`},M=S=>{const C=S instanceof Date?S:S.toDate(),D=new Date().getTime()-C.getTime(),L=Math.floor(D/(1e3*60*60)),R=Math.floor(D/(1e3*60*60*24));return L<1?" ":L<24?`${L} `:R<7?`${R} `:C.toLocaleDateString("ko-KR")};return g.jsxs(ie.div,{className:"fixed inset-0 bg-gradient-to-b from-[#0a0a20] via-[#1a1a40] to-[#0a0a20] z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[g.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"}),g.jsxs("div",{className:"relative h-full flex flex-col max-w-lg mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""}),g.jsx("h1",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500",children:"RANKING"}),g.jsx("button",{onClick:J,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white",children:""})]}),g.jsx("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-2xl p-4 mb-4 border border-purple-500/30",children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-2xl",children:""}),g.jsxs("div",{children:[U?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:P,onChange:S=>k(S.target.value),maxLength:12,className:"bg-black/50 border border-purple-500 rounded px-2 py-1 text-white text-sm w-28",autoFocus:!0,onKeyDown:S=>S.key==="Enter"&&ne()}),g.jsx("button",{onClick:ne,className:"text-green-400 text-sm",children:""})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-white font-bold",children:T}),g.jsx("button",{onClick:()=>B(!0),className:"text-gray-400 text-xs hover:text-white",children:""})]}),g.jsx("div",{className:"text-gray-400 text-xs",children:_>0?` : ${_}`:" "})]})]})})}),g.jsx("div",{className:"flex gap-2 mb-3",children:g.jsx("div",{className:"flex bg-black/30 rounded-xl p-1 flex-1",children:["all","weekly","daily"].map(S=>g.jsx("button",{onClick:()=>h(S),className:`flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all ${c===S?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"text-gray-400"}`,children:S==="all"?"":S==="weekly"?"":""},S))})}),g.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:["classic","timeAttack","survival","puzzle"].map(S=>g.jsx("button",{onClick:()=>y(S),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all ${m===S?"bg-gradient-to-r from-orange-500 to-red-600 text-white":"bg-white/10 text-gray-400"}`,children:S==="classic"?"":S==="timeAttack"?"":S==="survival"?"":""},S))}),g.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-4",children:s?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-gray-400 text-sm",children:" ..."})]}):t.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3",children:[g.jsx("span",{className:"text-5xl",children:""}),g.jsx("span",{className:"text-gray-400 text-sm",children:"  "}),g.jsx("span",{className:"text-gray-500 text-xs",children:"  1 !"})]}):g.jsx(un,{children:t.map((S,C)=>{const N=C+1,D=S.playerId===V;return g.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:C*.03},className:`rounded-xl p-3 ${re(N)} ${D?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-[#0a0a20]":""}`,children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-sm ${N<=3?"":"bg-black/20"}`,children:ce(N)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`font-bold truncate ${N<=3?"":"text-white"}`,children:S.playerName}),D&&g.jsx("span",{className:"text-[10px] bg-cyan-500 text-white px-1.5 py-0.5 rounded-full",children:"ME"})]}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-400"}`,children:["Lv.",S.level," | ",oe(S.playTime)," |"," ",M(S.createdAt)]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:`font-black text-lg ${N<=3?"":"text-cyan-400"}`,children:S.score.toLocaleString()}),g.jsxs("div",{className:`text-xs ${N<=3?"opacity-70":"text-gray-500"}`,children:[S.maxCombo," ",S.maxChain,""]})]})]})},S.id||C)})})})]})]})}function SA({onClose:r}){const{wheelState:t,spinWheel:a,canSpinWheel:s,addCoins:o,addGems:c}=Yn(),{playSound:h}=oa(),[m,y]=se.useState(!1),[_,x]=se.useState(0),[T,A]=se.useState(null),U=se.useRef(null),B=s(),P=360/Os.length,k=V=>{if(m||V==="free"&&!B.free||V==="ad"&&!B.ad||V==="gem"&&!B.gem)return;y(!0),A(null),h("wheelSpin");const J=Math.random();let ne=0,re=Os[0];for(const C of Os)if(ne+=C.probability,J<=ne){re=C;break}const oe=Os.findIndex(C=>C.id===re.id)*P,M=5+Math.random()*3,S=_+M*360+(360-oe);x(S),setTimeout(()=>{y(!1),A(re.id);const C=re.reward;C.coins&&o(C.coins),C.gems&&c(C.gems),re.probability<.1?(h("jackpot"),zd({particleCount:100,spread:70,origin:{y:.6}})):h("rewardGet"),a()},5e3)};return g.jsx(ie.div,{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:g.jsxs(ie.div,{className:"bg-game-panel rounded-2xl p-6 max-w-md w-full mx-4",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},onClick:V=>V.stopPropagation(),children:[g.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:" "}),g.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-6",children:[g.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-10",children:g.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-12 border-l-transparent border-r-transparent border-t-yellow-400"})}),g.jsx(ie.div,{ref:U,className:"w-full h-full rounded-full overflow-hidden border-4 border-yellow-400",style:{background:`conic-gradient(${Os.map((V,J)=>`${V.color} ${J*P}deg ${(J+1)*P}deg`).join(", ")})`},animate:{rotate:_},transition:{duration:5,ease:[.25,.1,.25,1]},children:Os.map((V,J)=>{const ne=J*P+P/2;return g.jsx("div",{className:"absolute text-xs font-bold text-white whitespace-nowrap",style:{top:"50%",left:"50%",transform:`rotate(${ne}deg) translateY(-100px)`,transformOrigin:"center",textShadow:"1px 1px 2px black"},children:V.label},V.id)})}),g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-yellow-400 flex items-center justify-center text-2xl shadow-lg",children:""})]}),T&&!m&&g.jsx(ie.div,{className:"text-center mb-4",initial:{scale:0},animate:{scale:1},children:g.jsxs("p",{className:"text-xl font-bold text-green-400",children:[Os.find(V=>V.id===T)?.label," !"]})}),g.jsxs("div",{className:"space-y-2",children:[B.free&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-xl\r
                         font-bold text-white hover:from-green-400 hover:to-green-500 disabled:opacity-50`,onClick:()=>k("free"),disabled:m,children:["   (",t.freeSpinsRemaining,")"]}),B.ad&&g.jsxs("button",{className:`w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl\r
                         font-bold text-white hover:from-yellow-400 hover:to-orange-400 disabled:opacity-50`,onClick:()=>k("ad"),disabled:m,children:["    (",t.adSpinsRemaining,")"]}),B.gem&&g.jsx("button",{className:`w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl\r
                         font-bold text-white hover:from-purple-400 hover:to-pink-400 disabled:opacity-50`,onClick:()=>k("gem"),disabled:m,children:" 20  "}),!B.free&&!B.ad&&!B.gem&&g.jsx("p",{className:"text-center text-gray-400",children:"   "})]}),g.jsx("button",{className:"w-full mt-4 py-3 bg-gray-700 rounded-xl font-bold text-gray-300",onClick:r,disabled:m,children:""})]})})}const wA={background:"#0a0a1a",backgroundGradient:"radial-gradient(circle at 50% 10%, #1a1a40 0%, #050510 60%)",panel:"#1a1a2e",panelBorder:"rgba(255,255,255,0.1)",accent:"#4a9eff",text:"#ffffff",textSecondary:"#888888",danger:"#ff4757",success:"#2ed573"};function AA(){const[r,t]=se.useState("menu"),[a,s]=se.useState(!1),[o,c]=se.useState(!1),[h,m]=se.useState(!1),[y,_]=se.useState(!1),[x,T]=se.useState(!1),[A,U]=se.useState(0),B=se.useRef(!1),P=He(),{gameStatus:k,startGame:V,pauseGame:J,resumeGame:ne,resetGame:re,continueGame:ce,incrementGameTime:oe,endGame:M,nextPuzzleLevel:S,score:C,combo:N,chainCount:D,level:L,board:R,isFeverMode:Ue,feverGauge:We,gameTime:X,gameMode:le}=P,{settings:xe,updateStreak:Le,equippedThemeId:G}=Yn(),O=se.useMemo(()=>pu.find(De=>De.id===G)?.colors||wA,[G]);se.useEffect(()=>{const me=document.documentElement;me.style.setProperty("--theme-bg",O.background),me.style.setProperty("--theme-bg-gradient",O.backgroundGradient||O.background),me.style.setProperty("--theme-panel",O.panel),me.style.setProperty("--theme-panel-border",O.panelBorder||"rgba(255,255,255,0.1)"),me.style.setProperty("--theme-accent",O.accent),me.style.setProperty("--theme-text",O.text||"#ffffff"),me.style.setProperty("--theme-text-secondary",O.textSecondary||"#888888"),me.style.setProperty("--theme-danger",O.danger||"#ff4757"),me.style.setProperty("--theme-success",O.success||"#2ed573"),document.body.style.background=O.backgroundGradient||O.background,document.body.style.backgroundColor=O.background},[O]);const{playSound:ae,stopBGM:ue}=oa(),ye=se.useRef(L);se.useEffect(()=>{Le()},[Le]),se.useEffect(()=>{L>ye.current&&k==="playing"&&(_(!0),ae("levelUp"),setTimeout(()=>_(!1),2e3)),ye.current=L},[L,k,ae]),se.useEffect(()=>{Ue&&!B.current&&k==="playing"&&(T(!0),ae("combo"),setTimeout(()=>T(!1),2e3)),B.current=Ue},[Ue,k,ae]),se.useEffect(()=>{if(k!=="playing"){U(0);return}let me=0;for(let De=0;De<4;De++)for(let Ne=0;Ne<pe.COLUMNS;Ne++)R[De]?.[Ne]!==null&&me++;me>=pe.COLUMNS*2?U(2):me>=pe.COLUMNS?U(1):U(0)},[R,k]),se.useEffect(()=>{let me=null;return k==="playing"&&(me=window.setInterval(()=>oe(),1e3)),()=>{me&&clearInterval(me)}},[k,oe]),se.useEffect(()=>{if(k!=="playing")return;const me=_v[le];me?.hasTimeLimit&&me.timeLimit&&X>=me.timeLimit&&M()},[k,le,X,M]);const Te=se.useCallback(me=>{ae("buttonClick"),V(me),t("game")},[V,ae]),ve=se.useCallback(()=>{ae("buttonClick"),re(),ue(),t("menu")},[re,ue,ae]),he=se.useCallback(()=>{ae("buttonClick"),re(),V("classic")},[re,V,ae]),de=se.useCallback(()=>{ae("buttonClick"),ce()},[ce,ae]);return r==="menu"?g.jsxs(g.Fragment,{children:[g.jsx(bA,{onStartGame:Te,onOpenShop:()=>{ae("buttonClick"),t("shop")},onOpenSettings:()=>{ae("buttonClick"),s(!0)},onOpenLeaderboard:()=>{ae("buttonClick"),t("leaderboard")},onOpenBattlePass:()=>{ae("buttonClick"),alert("Coming Soon!")},onOpenDailyReward:()=>{ae("buttonClick"),c(!0)}}),g.jsxs(un,{children:[a&&g.jsx(pv,{onClose:()=>s(!1)}),o&&g.jsx(xA,{onClose:()=>c(!1)}),h&&g.jsx(SA,{onClose:()=>m(!1)})]})]}):r==="shop"?g.jsx(EA,{onClose:()=>t("menu")}):r==="leaderboard"?g.jsx(TA,{onClose:()=>t("menu")}):g.jsxs("div",{className:`fixed inset-0 bg-[#0a0a15] flex flex-col items-center overflow-hidden transition-colors duration-500
      ${A===2?"shadow-[inset_0_0_50px_rgba(255,0,0,0.3)]":""}
      ${Ue?"shadow-[inset_0_0_100px_rgba(255,100,0,0.3)]":""}`,children:[Ue&&g.jsx(ie.div,{className:"absolute inset-0 pointer-events-none z-0",animate:{opacity:[.3,.5,.3]},transition:{duration:.5,repeat:1/0},style:{background:"radial-gradient(ellipse at center, rgba(255, 100, 0, 0.2) 0%, transparent 70%)"}}),A>0&&!Ue&&g.jsx("div",{className:`absolute inset-0 pointer-events-none z-0 animate-pulse ${A===2?"bg-red-900/10":"bg-transparent"}`}),g.jsx(un,{children:y&&g.jsxs(ie.div,{initial:{scale:.5,opacity:0,y:100},animate:{scale:1,opacity:1,y:0},exit:{scale:1.5,opacity:0,y:-100},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx("h2",{className:"text-6xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-yellow-400 to-yellow-100 drop-shadow-[0_0_20px_rgba(255,215,0,0.8)]",style:{fontFamily:"var(--font-display)"},children:"LEVEL UP!"}),g.jsxs("p",{className:"text-3xl text-white font-bold mt-2 neon-text",children:["Lv. ",L]})]})}),g.jsx(un,{children:x&&g.jsxs(ie.div,{initial:{scale:0,rotate:-10,opacity:0},animate:{scale:1,rotate:0,opacity:1},exit:{scale:2,opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center z-50 pointer-events-none",children:[g.jsx(ie.h2,{className:"text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-t from-orange-600 via-red-500 to-yellow-400 drop-shadow-[0_0_30px_rgba(255,100,0,0.8)]",style:{fontFamily:"var(--font-display)"},animate:{scale:[1,1.1,1]},transition:{duration:.3,repeat:1/0},children:" FEVER! "}),g.jsx("p",{className:"text-2xl text-yellow-300 font-bold mt-2",children:"x3 SCORE MULTIPLIER!"})]})}),g.jsxs("div",{className:"w-full max-w-2xl px-4 py-2 flex justify-between items-center z-20",children:[g.jsx("button",{onClick:()=>{ae("buttonClick"),k==="playing"?J():ne()},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:k==="paused"?"":""}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[10px] text-gray-400 font-bold tracking-widest",children:"LEVEL"}),g.jsx("div",{className:"text-xl font-black text-cyan-400 font-mono leading-none",children:L})]}),g.jsx("button",{onClick:()=>{ae("buttonClick"),s(!0)},className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center text-xl backdrop-blur-md active:scale-95 transition-transform",children:""})]}),g.jsxs("div",{className:"flex-1 w-full max-w-4xl flex justify-center items-start gap-1 md:gap-4 px-1 md:px-2 py-1 overflow-hidden",children:[g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-48 items-stretch z-10",children:g.jsx(tE,{})}),g.jsxs("div",{className:"flex flex-col items-center relative z-20",children:[g.jsx("div",{className:"flex md:hidden justify-end w-full max-w-[280px] mb-1 px-1",children:g.jsx(iy,{cellSize:18,maxBlocks:3})}),g.jsx(Jx,{}),g.jsxs("div",{className:"md:hidden flex justify-around w-full max-w-[280px] mt-1 py-1 px-2 bg-black/30 rounded-lg",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"SCORE"}),g.jsx("div",{className:"text-sm font-mono font-bold text-white leading-none",children:C.toLocaleString()})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"COMBO"}),g.jsxs("div",{className:`text-sm font-mono font-bold leading-none ${N>1?"text-orange-400":"text-gray-600"}`,children:["x",N]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-[8px] text-gray-500 font-bold",children:"CHAIN"}),g.jsx("div",{className:`text-sm font-mono font-bold leading-none ${D>0?"text-cyan-400":"text-gray-600"}`,children:D})]})]}),g.jsx("div",{className:"mt-1 w-full max-w-[300px]",children:g.jsx(eE,{})})]}),g.jsx("div",{className:"hidden md:flex flex-col gap-3 w-32 items-center z-10",children:g.jsx(iy,{cellSize:28,maxBlocks:5})})]}),g.jsx("div",{className:"w-full max-w-lg pb-safe z-30",children:(xe.controlType==="buttons"||xe.controlType==="both")&&g.jsx(Wx,{visible:k==="playing"})}),g.jsxs(un,{children:[k==="paused"&&g.jsx(vA,{onResume:ne,onRestart:he,onSettings:()=>s(!0),onMainMenu:ve}),k==="gameover"&&g.jsx(dA,{onRestart:he,onMainMenu:ve,onContinue:de}),k==="levelComplete"&&le==="puzzle"&&g.jsx(_A,{onNextLevel:()=>{ae("levelUp"),S()},onMainMenu:ve}),a&&g.jsx(pv,{onClose:()=>s(!1)})]})]})}X1.createRoot(document.getElementById("root")).render(g.jsx(se.StrictMode,{children:g.jsx(AA,{})}));
